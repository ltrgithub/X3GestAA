"use strict";

exports.defines = {
	x3CustomPropDsPrefix: "Sage.X3.DS",
	x3UDFCategory: "Sage X3 User Functions",
	dictionnaryAddress: "A1",
	serverUrlAddress: "A2",
	documentUrlAddress: "A3",
	documentTitleAddress: "A4",
	datasourcesAddress: "A5",
	SIParametersAddress: "A6",
	supportedLocales: "A7",
	syracuseRole: "A8",
	defaultFetchCount: 1000
};

exports.utils = {
	// names is an array of existing names
	makeDatasourceName: function(url, names) {
		// make a name like endpoint_entity
		var dsName = exports.defines.x3CustomPropDsPrefix + "." + url.replace(/#|'/g, "").replace(/\(|\)/g, "_").split("?")[0].split("/").slice(-2).join("_");
		// test if dsName exists
		var nameIdx = 1;
		var orgDsName = dsName;
		while (names.indexOf(dsName) >= 0)
		dsName = orgDsName + "_" + nameIdx++;
		return dsName;
	}
};