var module = QUnit.module;

var rtfparser = require("syracuse-rtf/lib/rtfparse");
var rtfinterpreter = require("syracuse-rtf/lib/rtfinterpret");

module("RTF Interpreter");

test('maps', 1, function() {
    var source = "{\\rtf1\\ansi\\ansicpg1252\\deff0" + //
    "{\\fonttbl" + //
    "\n   {\\f0\\fnil\\fcharset0\\fprq0\\fttruetype Helvetica;}" + //
    "\n   {\\f1\\fnil\\fcharset0\\fprq0\\fttruetype Bitstream Charter;}}" + //
    "\n{\\colortbl;\\red255\\green0\\blue0;\\red0\\green255\\blue0;\\red0\\green0\\blue255;}" + //
    "\n{\\f1\\fs24 Ceci est un texte accentu}" + //
    "\n\\par" + //
    "\n\\par" + //
    "\n{\\f1 des {\\fs18 petits} et des {\\fs32 gros}.}" + //
    "\n}";

    var root = rtfparser.parse(source);
    var model = rtfinterpreter.interpret(root);

    var expModel = {
        deffont: "f0",
        fonts: {
            f0: { name: "Helvetica"},
            f1: { name: "Bitstream Charter"},
        },
        colors: [
            [255, 0, 0],
            [0, 255, 0],
            [0, 0, 255]
        ],
    }
    deepEqual(model, expModel, "model ok")
});