"use strict";
(function($) {
	var that = $.smobile;
	var $helpers = $.helpers;
	var $proto = $.proto;
	that.controls = that.controls || {};
	that.controls.Text = {
		createText: function(controller, c) {
			var options = c.data;
			var html = [];
			that.ui.addErrors(null, c.id, html);
			if (options.label) {
				html.push($helpers.htmlEncode(options.label));
			}
			return {
				html: html.join(''),
				bind: options.bind,
				options: options
			};
		},
		sync: true,
		handler: function(c, after) {
			return after(that.controls.Text.createText(this, after));
		},
		checkValue: function($c, c) {
			if (c.$isReadOnly === true || c.$isDisabled === true) {
				return;
			}
			var controller = this;
			if (c.options.$isMandatory) {
				var value = controller.getValue(c.options.bind, null, null);
				if (!value) {
					return $helpers.format($helpers.locale().ui.input_required, [c.options.label]);
				}
			}
		},
		events: function($c, c) {}
	};
})(jQuery);