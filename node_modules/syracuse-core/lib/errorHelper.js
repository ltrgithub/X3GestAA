"use strict";
var config = require('config');

exports.safeStack = function safeStack(err) {
	return config.system.exposeStacktrace ? err.stack : err.message;
};

// expose it as a property for ease of use
Object.defineProperty(Error.prototype, "safeStack", {
	enumerable: false,
	get: function() {
		return exports.safeStack(this);
	}
});