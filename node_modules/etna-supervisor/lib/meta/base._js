"use strict";

var util = require("etna-supervisor/lib/util");

exports.defineClass = function(constructor, parent, members) {
	// Add base members :
	members._ASETERROR = function(_, path, msg, severity) {
		util.checkInstance(this);
		this.diagnoses.push(this.supervisor.new(_, 'Diagnosis', severity, path, msg));
		return severity;
	};
	members.scripts = function(_) {
		return this.supervisor.loadScripts(_, this);
	};

	return util.defineClass(function(superv, data, group) {
		this.supervisor = superv;
		this.data = data;
		this.methods = {
			ASETERROR: this._ASETERROR
		};
		// Call derived constructor :
		constructor.apply(this, arguments);
	}, parent, members);
};