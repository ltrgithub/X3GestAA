"use strict";

var helpers = require('syracuse-core/lib/helpers');
var querystring = require("querystring");

var Pageview = helpers.defineClass(function(params, dim) {
	this.params = params || {};
	dim = dim || {};
	this.params.t = "pageview";

	this.params.cd1 = dim.AppCustomer;
	this.params.cd2 = dim.AppName;
	this.params.cd3 = dim.AppInternal;
	this.params.cd4 = dim.AppUser;
	this.params.cd5 = dim.AppVersion;
	this.params.cd6 = dim.AppModule;
	this.params.cd7 = dim.AppPlatform;
	this.params.cd8 = dim.AppLinkTyp;
	this.params.cd9 = dim.AppCustomiz;
	this.params.cd10 = dim.AppFacet;
	this.params.cd11 = dim.AppOwner;
}, null, {
	query: function() {
		return querystring.stringify(this.params);
	}
});

var Collector = helpers.defineClass(function() {}, null, {
	pageview: function(params, customDim) {
		return new Pageview(params, customDim);
	}
});

exports.collect = new Collector();