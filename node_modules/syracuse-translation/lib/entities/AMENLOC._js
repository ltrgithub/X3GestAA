"use strict";
var datetime = require('syracuse-core').types.datetime;

exports.entity = {
	$properties: {
		MENLOC: {
			$title: "Local Menu",
			$type: "integer",
			$isMandatory: true
		},
		TITCHP: {
			$title: "Title",
			$isMandatory: true
		},
		MENLOCAL: {
			$title: "Local Menu Flag",
			$type: "boolean"
		},
		FLGPRO: {
			$title: "Product Flag",
			$type: "boolean"
		},
		SPECIF: {
			$title: "Specific",
			$type: "boolean"
		},
		UPDDATTIM: {
			$title: "Last update",
			$isReadOnly: true,
			$type: "datetime"
		}
	},
	$defaultOrder: [
		["MENLOC", true]
	],
	// Performance issue: time x 13
	// $uniqueConstraints: [
	// 	["LANCHP", "LANNUM", "LAN"]
	// ]
	$relations: {
		AMLAST: {
			$type: "APLSTD",
			$title: "Messages",
			$capabilities: "sort,reorder,append,delete",
			$isChild: true
		}
	},
	$init: function(_, instance) {
		instance.UPDDATTIM(_, datetime.now());
	},
	$actions: {
		$save: function(_, instance) {
			var r = {};
			instance.UPDDATTIM(_, datetime.now());
			return r;
		}
	},
};