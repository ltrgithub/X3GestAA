"use strict";
var datetime = require('syracuse-core').types.datetime;

exports.entity = {
	$properties: {
		LANCHP: {
			$title: "Chapter",
			$type: "integer",
			$isMandatory: true
		},
		LANNUM: {
			$title: "Number",
			$type: "integer",
			$isMandatory: true,
		},
		LAN: {
			$title: "Language",
			$isMandatory: true,
			$lookup: {
				entity: "TABLAN",
				field: "LAN"
			}
		},
		LANMES: {
			$title: "Message",
			$isMandatory: true
		},
		UPDDATTIM: {
			$title: "Last update",
			$isReadOnly: true,
			$type: "datetime"
		}
	},
	$defaultOrder: [
		["LANCHP", true],
		["LANNUM", true],
		["LAN", true]
	],
	// Performance issue: time x 13
	// $uniqueConstraints: [
	// 	["LANCHP", "LANNUM", "LAN"]
	// ]
	$init: function(_, instance) {
		instance.UPDDATTIM(_, datetime.now());
	},
	$actions: {
		$save: function(_, instance) {
			var r = {};
			instance.UPDDATTIM(_, datetime.now());
			return r;
		}
	},
};