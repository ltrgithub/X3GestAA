"use strict";
var apis = require('@sage/syracuse-core').apis;
var locales = require("@sage/syracuse-lib/src/collaboration/entities/lookupLocale");
var adminHelper = require("@sage/syracuse-lib/src/collaboration/helpers").AdminHelper;

var jsonImport = require("@sage/syracuse-lib/src/import/jsonImport");

function World(context) {
	this.context = context;
}

function x3Pool() {
	return apis.get('syracuse-x3').pool;
}

World.prototype = {
	submit: function(_, ep, params) {
		params = params || {};
		var session = this.context.request.session;
		params.raw = true;
		return x3Pool().jsonSend(_, session, ep, params);
	},
	getLocales: function(_) {
		return locales.readLocales(_); //adminDb.model.getEntity(_, "lookupLocale").$fetchInstances(_, context),
	},
	fetchInstances: function(_, ep, entityName, facet, opt) {
		var orm = ep.getOrm(_);
		var entity = orm.getEntity(_, entityName, facet);
		return orm.fetchInstances(_, entity, opt);
	},

	simplifyItems: function(_, input, options) {
		return jsonImport.simplifyItems(_, input, options);
	},

	getCollaborationOrm: function(_) {
		return adminHelper.getCollaborationOrm(_);
	}

};

module.exports = World;