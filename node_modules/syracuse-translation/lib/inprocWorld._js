"use strict";
var x3pool = require("syracuse-x3/lib/pool");
var locales = require("syracuse-collaboration/lib/entities/lookupLocale");
var locale = require('streamline-locale');var transMod = require.cache[require.resolve("syracuse-translation/lib/translation")];
var localizedText = locale.format.bind(undefined, transMod || module);

function World(context) {
	this.context = context;
}

World.prototype = {
	submit: function worldSubmit(_, ep, params) {
		params = params || {};
		var session = this.context.request.session;
		params.raw = true;
		return x3pool.jsonSend(_, session, ep, params);
	},
	getLocales: function worldGetLocales(_) {
		return locales.readLocales(_); //adminDb.model.getEntity(_, "lookupLocale").$fetchInstances(_, context),
	},
	fetchInstances: function worldFetchInstance(_, ep, entityName, facet, opt) {
		var orm = ep.getOrm(_);
		var entity = orm.getEntity(_, entityName, facet);
		return orm.fetchInstances(_, entity, opt);
	},
	localizedText: function worldLocalizedText() {
		localizedText.apply(null, localizedText);
	}

};

module.exports = World;