<!DOCTYPE html>
<html>
    <meta http-equiv="X-UA-Compatible" content="IE=9">
    <head>
        <title>Syracuse</title>
        <meta content="text/html; charset=UTF-8" http-equiv="content-type">
        <meta http-equiv="X-UA-Compatible" content="IE=9">	
        <link href="/syracuse-ui/themes/desktop/sage/newpassword.css" rel="stylesheet"/>
        <script src="/syracuse-ui/deps/md5.min.js">
        </script>
        <script>
            function chkFormular(){
                var pwd = document.formular.password.value;
                if (pwd !== document.formular.passwordAgain.value) {
                    alert("{different}");
                    return false;
                }
                else 
                    if (("" + pwd).length === 0) {
                        alert("{empty}");
                        return false;
                    }
                var r = /^[^ -\x7E\xA0-\xFF]+$/.exec("" + pwd); // when you change regexp, also change pattern in password field
                if (r) {
                    alert("{invalid}".replace("XXX", r[0]));
                    return false;
                }
                else {
                    document.formular.passwordHash.value = md5(document.formular.login.value + ":" + document.formular.realm.value + ":" + pwd);
                    document.formular.passwordAgain.value = document.formular.password.value = "";
                    return true;
                }
            }
        </script>
    </head>
    <body>
        <div id="s-newpwd-panel">
            <form id="formular" name="formular" action="{action}" method="POST" onsubmit="return chkFormular()">
                <div class="s-newpwd-title" style="" data-s-box="4" title="Administration dashboard">
                    {changePasswdHeader}
                </div>
                <label id="s-newpwd-description">
                    {explanation}
                </label>
                <table id="s-newpwd-body" >
                    <tr>
                        <td>
                            <label class="s-newpwd-labels">
                                {newPwd}
                            </label>
                        </td>
                        <td>
                            <input name="password" class="s-newpwd-input" placeholder="{Password}" type="password">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label class="s-newpwd-labels">
                                {newPwdAgain}
                            </label>
                        </td>
                        <td>
                            <input name="passwordAgain" class="s-newpwd-input" placeholder="{Password}" type="password">
                        </td>
                    </tr>
                    <tr>
                        <td  colspan="2" id="s-newpwd-btn-slot">
                            <input id="s-newpwd-btn" type="submit" value="{chgPasswd}">
                        </td>
                        </table><input name="login" type="hidden" value="{login}"><input name="passwordHash" type="hidden"><input name="realm" type="hidden" value="{realm}">
                    </form>
                    </div>
                </body>
                </html>