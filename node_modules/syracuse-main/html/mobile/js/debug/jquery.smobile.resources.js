"use strict";
(function($) {
	var that = $.helpers || {};
	$.helpers = that;
	that.language = function() {
		var value = that.settings("language");
		if (value && value.lang) return value.lang;
		return "";
	};
	that.setLanguage = function(lang) {
		that.settings("language", {
			lang: lang
		});
	};
	that.settings = function(key, value) {
		key = key || "mobile";
		var ssettings = window.localStorage["settings"];
		try {
			ssettings = JSON.parse(ssettings || "{}");
		} catch (ex) {
			ssettings = {};
		}
		if (value) {
			ssettings[key] = value;
			window.localStorage["settings"] = JSON.stringify(ssettings);
		} else return ssettings[key] || {};
	};
	that.extractLang = function(value) {
		if (value) {
			var values = value.split("-");
			return values[0];
		}
		return value;
	};
	that.browserLanguage = function() {
		return (window.navigator.language || window.navigator.browserLanguage || "en");
	};
	that.translate = function(lang, value) {
		that.locale();
		if (value) {
			Object.keys(value).forEach(function(prop) {
				var cv = value[prop];
				var dst = that._locale[prop];
				if (typeof cv === "object") {
					if (dst && cv) {
						Object.keys(cv).forEach(function(item) {
							dst[item] = cv[item];
						});
					}
				} else that._locale[prop] = cv;
			});
			that._locale_lang = lang;
			var $scroller = $.scroller;
			if ($scroller) {
				$scroller.setDefaults(that.dateSettings);
			}
		}
	},
	that.currentLocale = function() {
		that.locale();
		return that._locale_lang;

	};
	that.locale = function() {
		if (that._locale) return that._locale;
		that._locale_lang = "en";
		that._locale =
		// do not delete next line  is used in translate.js	
		//#START
		{
			"administration": {
				"title": "Sage <span class=\"s-m-title-color\">ERP X3</span>",
				"welcome": "Welcome"

			},
			"maintoolbar": {
				"home": "Home",
				"back": "Back",
				"setup": "Setup",
				"help": "About",
				"settings": "Settings",
				"previous": "Prev",
				"next": "Next",
				"apps": "Applications"

			},
			"applicationmanager": {
				"installed_apps": "Installed applications",
				"available_apps": "Available applications",
				"title": "Application Manager",
				"description": "Add Remove Applications",
				"install": "Add",
				"uninstall": "Remove"
			},
			"about": "<h3>About Us</h3> About Us Employee PictureSage provides business software, services and support to small and medium sized businesses. Whilst our heritage is in the small business market we also have the experience and expertise to meet the needs of specific industries and larger organisations.<br/><br/><br/>The Sage Group plc 2013. All Rights Reserved.",
			"errorpagetitle": "Errors",
			"sendpagetitle": "Send changes",
			"errorjs": "Javascript error\nPlease contact the administrator",
			"errmailsubject": "Sage X3 Mobile client error",
			"ui": {
				"loading": "Loading ...",
				"installing": "Installing ...",
				"sending": "Sending ...",
				"unknownError": "Unknown error",
				"root_menu_tip": "Applications List",
				"edit_item": "Edit",
				"save_item": "Save",
				"ok_item": "Ok",
				"actions_item": "Plus...",
				"cancel_item": "Cancel",
				"remove_item": "Remove",
				"sync_item": "Synchronization",
				"misc": "Miscellaneous",
				"sync_cancel_all": "Undo All changes",
				"sync_resync_data": "Download",
				"sync_send_all": "Send Changes",
				"sync_sync_data": "Reinstall current application",
				"no_db_support": "Your browser don't support HTML5 database.",
				"no_db_support_sol": "Use a modern browser",
				"open_db_error": "Can't open/create local database",
				"mandatory_field": "\"{0}\" is mandatory.",
				"minlength_field": "Please enter at least {0} characters.",
				"picture_file": "Photo",
				"add_item": "Add ...",
				"search": "Search",
				"sort": "Sort",
				"filter": "Filter",
				"user": "User Name",
				"password": "Password",
				"transparent_logon": "Transparent authentication",
				"auth_type": "Authentication Type",
				"app_exception": "Application Exception",
				"app_fatal": "Fatal error",
				"app_warning": "Warning",
				"app_success": "Success",
				"dev_mode": "Development mode",
				"db_exception": "Database Exception",
				"exception_offline": "The site could be temporarily unavailable or too busy",
				"exception_timeout": "Connection timeout",
				"check_net": "Check your internet connexion",
				"filter_field": "Field",
				"filter_op": "Operator",
				"filter_val": "Value",
				"avanced_options": "Options",
				"array_detail": "More",
				"msg_detail": "Detail",
				"links": "Links",
				"Actions": "Actions",
				"filtersort": "Advanced",
				"notitle": "No title",
				"selendpoint": "Select at least one endpoint",
				"sort_order": "Sort order"
			},
			"datetime": {
				"day": "Day",
				"month": "Month",
				"year": "Year",
				"hour": "Hour",
				"minutes": "Minutes",
				"sec": "Seconds",
				"amDesignator": "AM",
				"pmDesignator": "PM",
				"dateElementOrder": "mdy",
				"dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
				"abbreviatedDayNames": ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
				"monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
				"abbreviatedMonthNames": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
			},
			"actions": {
				"syncronize": "Synchronize your application data."
			},
			"sdata": {
				"S404": "\"[{0}\" - Resource not found.",
				"invalid_response": "Invalid server response ($httpstatus)",
				"post_ni": "Asynchronous POST - not implemented.",
				"modify_before": "Modify the request before resubmitting",
				"S412": "Update canceled",
				"SD412": "Delete canceled",
				"S410": "Record deleted",
				"SU500": "Update canceled",
				"S503": "Retry after ...",
				"SC_canceled": "create canceled",
				"SD_canceled": "delete canceled"

			},
			"filters": {
				"none": "All",
				"gt": "Greater than",
				"ge": "Greater than or equals",
				"lt": "Less than",
				"le": "Less than or equals",
				"eq": "Equals",
				"ne": "Not equals",
				"like_s": "Starts with",
				"like": "Contains",
				"between": "Between"
			}

		}
		//#END	// do not delete this line  is used in translate.js	
		;
		return that._locale;

	};
})(jQuery);