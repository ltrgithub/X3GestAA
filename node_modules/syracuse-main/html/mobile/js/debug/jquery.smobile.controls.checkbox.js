'use strict';
(function($) {
	var that = $.smobile;
	that.controls = that.controls || {};
	
	that.controls.CheckBox={
		createCheckBox: function(controller, c) {
			var options= c.data || {};
			var html = ['<div data-role="fieldcontain" id="'+c.id+'">'];
			html.push('<input type="checkbox" name="'+c.id+'_i" id="'+c.id+'_i" ');
			var value = options.value || false;
			if (options.bind) 
				value = controller.getValue(options.bind, null,  false);
			if (value) html.push("checked");
			html.push('/>');
			html.push('<label for="'+c.id+'_i">'+$.helpers.htmlEncode(options.label)+'</label>');
			html.push('</div>');
			return { 
				html: html.join(''),
				bind: options.bind,
				action: options.action,
				options: options
			};
		},	

		handler: function(c, after, layoutClass) {
			return after(that.controls.CheckBox.createCheckBox(this, c));
		},
		events: function($c, c) {
			var controller = this;
			var $input = $c.find( '#'+ c.id + "_i");
			$input.change(function(target) {
				var _aftercchange = controller.afterChangeHnd(c);
				controller.checkChange(c.id, $input[0].checked, _aftercchange);
			});
			
		}
	};
})(jQuery);