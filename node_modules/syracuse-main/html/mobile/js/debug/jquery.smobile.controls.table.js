(function($) {
	var that = $.smobile || {};
	$.smobile = that;
	that.controls.SummaryTable = {
		handler: function(c, after) {
			var controller = this,  options= c.data || {};
			var html = ['<table class="u-m-stable" data-role="none" id="'+c.id+'">'];
			html.push('<tbody>');
			html.push('<tr>');
			html.push('<th class="u-m-stable-title"></th>');
			html.push('<th class="u-m-stable-value"></th>');
			html.push('</tr>');
			$.helpers.each(options.fields, function(field, index, next) {
				html.push('<tr>');
				html.push('<td>'+field.title+'</td>');
				if (that.hasTemplate(field.value)) {
					var ct = that.parseTemplate(field.value);
					return that._template("", ct, controller.data, controller, function(tv) {
						html.push('<td>'+tv+'</td></tr>');
						return next();
					});
				} else {
					html.push('<td>'+field.value+'</td></tr>');
					return next();
				}
				
			}, function() {
				html.push('</tbody>');
				html.push('</table>');
				after({ 
					html: html.join(''),
					options: options				
				});				
			});
		}
			
	};
})(jQuery);    


