"use strict"; 
$(function() {
	var $auth = $.auth;
	$auth.resetData = function(eventData, info) {
		$auth.name = "";
		$("#json").val('');
	}
	$auth.loadData = function(data, info) {
		$auth.name = info.name;
		$("#json").val(window.JSON.stringify(data, null,2));
	};
	$("#refresh").click(function(e) {
		var value = $("#json").val();
		if (!value) return;
		if (value ) {
			try {
				value = JSON.parse(value);
				$("#json").val(window.JSON.stringify(value, null,2));
			} catch(ex) {
				alert(ex.message);
				return;
			}
			var cw = $('#view')[0].contentWindow;
			if ($auth.name && cw.$.proto.auth.applyAuth) {
				cw.$.proto.auth.applyAuth($auth.name, value); 
			}
			
		}
	});
	$("#save").click(function(e) {
		alert("Do save");
	});
	
	
});