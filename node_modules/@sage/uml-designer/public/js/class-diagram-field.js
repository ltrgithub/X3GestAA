"use strict";

require('../deps/jsPlumb-2.1.7');
var designerComponent = require('@sage/uml-designer/public/js/class-designer');

// fix CSS
['/@sage/uml-designer/public/css/class-designer.css'].forEach(function(href) {
	$("<link/>", {
		rel: "stylesheet",
		type: "text/css",
		href: href,
	}).appendTo("head");
});

exports.create = function(opts) {
	if (/^\$(details|edit)$/.test(opts.facet)) {
		return designerComponent.create(opts);
	} else {
		var $synopsis = $('<span>').addClass('uml-synopsis').appendTo($(opts.div));
		return {
			setValue: function(value) {
				var text = (value && value.classes) ? value.classes.length + " classes" : "<empty>";
				$synopsis.text(text);
			}
		};
	}
};