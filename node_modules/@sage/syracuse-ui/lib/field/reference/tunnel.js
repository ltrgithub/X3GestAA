"use strict";

function _click() {
	var field = this.parent;
	syra_router.executeMenu(field.$menus.$tunnel, field.isRecordArticle ? field : field.articleParent);
}

exports.addPicker = function(field, $menu) {
	$menu.$title = syra_local.fieldTunnel;
	$menu.$isPopup = syra_site.isTabletDevice || (field.$isEditMode && field.$item.$inplace && !field.$item.$isFilterMode);
	if (!$menu.$isPopup && !field.picker_$tunnel && !field.$item.$inplace) {
		syra_button.addFieldPicker({
			parent: field,
			pickerId: "$tunnel",
			fontIcon: "tunnel",
			text: syra_local.fieldTunnel,
			shortCutTip: syra_shortcut.tip.openTunnel,
			click: _click
		});
		if (!field.$isDisabled && field.$isReadOnly) {
			syra_button.hide(field.picker_$tunnel, false);
		}
	}
};