"use strict";

function _onClick() {
	var btn = this;
	var item = btn.parent;
	if (item && item.page) {
		item.isMaximized = !item.isMaximized;
		item.page.modalHost && item.page.modalHost.onMaximizeChildItem(item.isMaximized);
		item.domItem.style.position = item.isMaximized ? "fixed" : "";
		syra_dom.toggleClass(item.domItem, "s_maximized", item.isMaximized);
		if (syra_ldp && item.page.isLandingPage && !item.page.isFusionPage) {
			syra_ldp.resizeItem(true);
		} else {
			item.page.resizeItem(true);
		}
		var state = item.isMaximized ? "minimize" : "maximize";
		syra_button.setText(btn, syra_local["box_" + state], state);
		item.onAfterMaximize && item.onAfterMaximize();
	}
}

exports.addButton = function(btn) {
	if (!btn.parent.maximizeBtn) {
		btn.text = syra_local.box_maximize;
		btn.iconOnly = true;
		btn.fontIcon = "maximize";
		btn.click = _onClick;
		btn.parent.maximizeBtn = syra_button.add(btn);
	}
};