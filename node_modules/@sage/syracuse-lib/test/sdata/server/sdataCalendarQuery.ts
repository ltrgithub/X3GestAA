"use strict";

var baseUrl = "http://localhost:3004";
var port = 3004;
var helpers = require('@sage/syracuse-core').helpers;
var types = require('@sage/syracuse-core').types;
import * as config from 'config'; // must be first syracuse require
import * as mongodb from 'mongodb';
import * as streams from 'streamline-streams';
var apis = require('@sage/syracuse-core').apis;
var testAdmin = apis.get('test-admin');
import * as sys from 'util';
import * as dataModel from '../../../src/orm/dataModel';
var forEachKey = helpers.object.forEachKey;
import * as sdataRegistry from '../../../src/sdata/sdataRegistry';

var tracer; // = console.log;

// force basic auth
config.session = config.session || {};
config.session.auth = "basic";
// no integration server
config.integrationServer = null;

var endPoint = testAdmin.modifyCollaborationEndpoint("mongodb_admin_test");

import * as testData from '../fixtures/testDB';
var testEndPoint = testData.endpoint;

testEndPoint.datasets = {
	test: {
		driver: "mongodb",
		database: "test",
		hostname: "localhost",
		port: config.collaboration.port || 27017
	}
};

// tracer && tracer("TEST ANFANG......................................");

config.sdata.endpoints.push(testEndPoint);

var requestCount = 0;
var MAX_REQUESTS = 13;
var cookie;

import { assert } from 'chai';
Object.keys(assert).forEach(key => {
	if (key !== 'isNaN') global[key] = assert[key];
});

describe(module.id, () => {

	it('test format query calendar', function() {
		// TEST with only calendar
		// TEST with calendar + other type in query
		//
	});
});