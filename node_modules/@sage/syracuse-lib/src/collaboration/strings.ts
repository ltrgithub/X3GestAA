"use strict";

const locale = require('streamline-locale');
import { globals } from 'streamline-runtime';
import { helpers } from '@sage/syracuse-core';


var cache = {};

export const mods = [];

export function extendResources(mod) {
	exports.mods.push(mod);
	// clear cache
	cache = {};
};

export function resources() {
	var loc = globals.context && globals.context.sessionLocale || locale.current;
	if (loc in cache) return cache[loc];
	var res = locale.resources(module, loc)();
	exports.mods.forEach(function(m) {
		helpers.object.merge(locale.resources(m, globals.context && globals.context.sessionLocale)(), res);
	});
	return (cache[loc] = res);
};