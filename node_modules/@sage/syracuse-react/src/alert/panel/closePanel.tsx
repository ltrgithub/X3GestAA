"use strict";
import * as React from 'react';
import { getLocalString } from '../../culture/localString';
import { Link } from '../../link/link';

export class ClosePanel extends React.Component<{
	autoHide?: boolean,
	onClose: () => void
}, {}> {
	autoHideTimeout: number;
	delayAutoHide(on: boolean) {
		if (on) {
			this.autoHideTimeout = window.setTimeout(() => {
				this.autoHideTimeout = 0;
				this.props.onClose();
			}, 4000);
		}
		else {
			if (this.autoHideTimeout) {
				clearTimeout(this.autoHideTimeout);
				this.autoHideTimeout = 0;
			}
		}
	}
	componentDidMount() {
		this.props.autoHide && this.delayAutoHide(true);
	}
	componentWillUnmount() {
		this.delayAutoHide(false);
	}
	render() {
		return <Link
			className="s_alertpanel_hide"
			icon="close"
			title={getLocalString("diag_close")}
			onClick={this.props.onClose} />
	}
}