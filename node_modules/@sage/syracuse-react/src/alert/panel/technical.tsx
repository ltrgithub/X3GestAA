import * as React from 'react';
import { IDiagnoseTechnical } from '../alert';
import { getLocalString } from '../../culture/localString';
import Scrollbar from '../../common/scroll/scrollbar/scrollbar';
import { Copy } from '../copy/copy';

class CopyTechnical extends React.Component<IDiagnoseTechnical, {}>{
    render() {
        let value: any = {};
        if (this.props.stackTrace) {
            value.stackTrace = this.props.stackTrace;
        }
        if (this.props.sdataCode) {
            value.sdataCode = this.props.sdataCode;
        }
        return <Copy value={JSON.stringify(value, null, 2)} />;
    }
}

export class Technical extends React.Component<IDiagnoseTechnical, {}>{
    render() {
        return <div className="s_alertpanel_technical">
            <CopyTechnical  {...this.props} />
            <Scrollbar>
                <div className="s_alertpanel_technical_body">
                    {this.props.sdataCode && <pre className="s_alertpanel_technical_pre">{getLocalString("alertbox_diag_appCode") + this.props.sdataCode}</pre>}
                    {this.props.stackTrace && <pre className="s_alertpanel_technical_pre">{this.props.stackTrace}</pre>}
                </div>
            </Scrollbar>
        </div>;
    }
}
