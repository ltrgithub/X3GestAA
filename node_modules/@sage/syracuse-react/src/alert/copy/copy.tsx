"use strict";
import * as React from 'react';
import { getLocalString } from '../../culture/localString';
import { Link } from '../../link/link';
import './copy.less';

export class Copy extends React.Component<{
	value: any,
	className?: string
}, {}>{
	onCopy = (value: any, event: MouseEvent) => {
		window.getSelection().removeAllRanges();
		let pre = (event as any).currentTarget.getElementsByTagName("pre")[0];
		var range = document.createRange();
		range.selectNode(pre);
		try {
			window.getSelection().addRange(range);
			document.execCommand('copy');
			window.getSelection().removeAllRanges();
		}
		catch (err) {
			console.log("unable to copy");
		}
	}
	render() {
		let css = "s_alert_copy";
		if (this.props.className) {
			css = this.props.className + " " + css;
		}
		return <Link
			className={css}
			icon="copy"
			title={getLocalString("clipboard_copy")}
			onClick={this.onCopy}>
			<pre className="s_alert_copy_pre">{this.props.value} </pre>
		</Link>;
	}
}