"use strict";
import * as React from 'react';
import * as Sdata from '../../dataStore/sdata';
import { parseSdataDiagnoses } from '../alert';
import { getLocalString } from '../../culture/localString';
import { Diagnose } from '../panel/diagnoses';
import { IPageLoadError } from '../../page/pageLoader';
import './alertPage.less';

class AlertDefaultPage extends React.Component<{
    status: number
}, {}> {
    render() {
        let title: string;
        switch (this.props.status) {
            case 401:
            case 403:
                title = "alertpage_" + this.props.status;
                break;
            default:
                title = "alertpage_404";
                break;
        }
        return <div className="s_alertpage">
            <div className="s_alertpage_container">
                <div className="s_alertpage_banner">
                    <div className="s_alertpage_banner_text">
                        <a className="s_alertpage_bar_logo_x3"></a>
                        <div className="s_alertpage_banner_title">{getLocalString(title)}</div>
                        <div className="s_alertpage_banner_body">
                            {this.props.children}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
}


class AlertVignettePage extends React.Component<{}, {}> {
    render() {
        return <div className="s_alert_vignette_page">
            {this.props.children}
        </div>
    }
}

export class AlertPage extends React.Component<IPageLoadError, {}> {
    render() {
        let stack: any[] = []
        let diagnoses = parseSdataDiagnoses(this.props.diagnoses);
        if (diagnoses) {
            for (let diagnose of diagnoses) {
                stack.push(<Diagnose key={stack.length}  {...diagnose} />);
            }
        }
        if (this.props.inVignette) {
            return <AlertVignettePage><ul>{stack}</ul></AlertVignettePage>
        }
        return <AlertDefaultPage status={this.props.status}><ul>{stack}</ul></AlertDefaultPage>;
    }
}