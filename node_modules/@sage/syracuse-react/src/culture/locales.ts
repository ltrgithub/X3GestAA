"use strict";
import { Ajax, AjaxResponse } from '../ajax/ajax';
import { showDiagnoses } from '../alert/alert';
import { ILocalePreferences, } from './culture';
import { currentProfile } from '../profile/profile';

export function load(end: (locales: ILocalePreferences[]) => void): Ajax {
    let ajax = new Ajax();
    ajax.get({
        url: currentProfile.localeLookupUrl,
        end: (response: AjaxResponse) => {
            if (response.ok) {
                end(response.data && response.data.$resources)
            }
            else {
                showDiagnoses(response.error.diagnoses);
            }
        }
    });
    return ajax;
}