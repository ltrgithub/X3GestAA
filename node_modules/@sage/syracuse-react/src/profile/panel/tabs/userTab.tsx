"use strict";
import * as React from 'react';
import { Link, ILinkProp } from '../../../link/link';
import { IUserTabProps } from '../../bar/profileBarProps';
import { getLocalString } from '../../../culture/localString';
import { route } from '../../../route/route';
import './userTab.less';

const defaultPhoto = "styles/static/profile/s_profile_user_default.png";

export class UserTab extends React.Component<IUserTabProps, {}>{
	get name(): string {
		return this.props.profile.firstName || this.props.profile.lastName || this.props.profile.login;
	}
	get surname(): string {
		return this.props.profile.firstName ? this.props.profile.lastName : "";
	}
	onClick = (value: any, event: MouseEvent, prop: ILinkProp) => {
		route.openNewWindow(prop.url);
	}
	render() {
		let photoUrl = this.props.profile.photo || defaultPhoto;
		return <div className="s_profile_panel_tabs_body s_profile_user_panel">
			<div className="s_profile_user_welcome">{getLocalString("profile_user_welcome")}</div>
			<div className="s_profile_user_name">{this.name}</div>
			<div className="s_profile_user_surname">{this.surname}</div>
			<Link
				className="s_profile_user_user_link"
				title={getLocalString("profile_user_goto")}
				onClick={this.props.onGoToUser} />
			<Link
				icon="image"
				className="s_profile_user_upload_photo"
				title={getLocalString("profile_user_upload_photo")}
				onClick={this.props.onUploadPhoto} />
			<svg width="336" height="341" className="s_profile_user_photo">
				<defs>
					<clipPath id="s_profile_user_picture_clippath">
						<polygon points="0 341,336 341,336 0,200 0"></polygon>
					</clipPath>
				</defs>
				<image width="336" height="341" clipPath="url('#s_profile_user_picture_clippath')" xlinkHref={photoUrl} preserveAspectRatio="xMinYMin slice"></image>
			</svg>
			<div className="s_profile_panel_links">
				<Link
					className='s_profile_panel_link'
					title={getLocalString("profile_open_legal")}
					onClick={this.props.onGoToLegal} />
				<Link
					className='s_profile_panel_link'
					title={getLocalString("site_tech_link_mobileHome")}
					value={getLocalString("site_tech_link_mobileHome")}
					url={"/syracuse-tablet/dist/index.html"}
					onClick={this.onClick} />
				<Link
					className='s_profile_panel_link'
					title={getLocalString("site_tech_link_tablethome_v7")}
					value={getLocalString("site_tech_link_tablethome_v7")}
					url={"/syracuse-main/html/main-tablet.html?url=%3Frepresentation%3Dhome.%24landing"}
					onClick={this.onClick} />
			</div>
		</div>;
	}
}