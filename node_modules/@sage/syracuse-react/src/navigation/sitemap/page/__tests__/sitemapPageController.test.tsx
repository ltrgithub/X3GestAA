const testSetup = require('./testSetup')
testSetup.setUp();
import * as React from 'react';
import { shallow, mount, render } from 'enzyme';
import { renderToJson } from 'enzyme-to-json';
import { SitemapModule } from '../../groups';
import { Sitemap } from '../../sitemap';
import Store from '../../../../dataStore/store';
import { SitemapPageController } from '../sitemapPageController';
import { Profile } from '../../../../profile/profile';
import { Bookmarks } from '../../../bookmark/bookmarks';
const sitemap_prototype = require('./sitemap_prototype.json');
const sitemap_dataset = require('./sitemap_dataset.json');
const profile_protoype = require('./profile_protoype.json');
const profile_data = require('./profile_data.json');
const bookmark_data = require('./bookmark_data.json');

const profile = new Profile(profile_protoype, profile_data);
const sitemap = new Sitemap(sitemap_prototype, sitemap_dataset);
const store = new Store(null, sitemap_dataset);
const bookmarks = new Bookmarks(bookmark_data, profile.selectedEndpoint);

let modules: SitemapModule[] = [];
if (store.dataset.modules) {
    for (let mod of store.dataset.modules) {
        modules.push(new SitemapModule(sitemap, mod));
    }
    modules[0].selected = true;
}
profile.sitemap = sitemap;
profile.bookmarks = bookmarks;
profile.dataset.user = { firstName: 'James' };
console.log(profile.dataset.user);

describe('Test Suite for sitemapPageController', function () {

    // it('use jsdom in this test file', () => {
    // 	const element = document.createElement('div');
    // 	expect(element).not.toBeNull();
    // });

    it('<sitemapPageController /> compare to snapshot', () => {
        const wrapper = render(<SitemapPageController
            profile={profile} />
        );
        const json = renderToJson(wrapper);
        expect(json).toMatchSnapshot();
    });
});
