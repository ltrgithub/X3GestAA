"use strict";
import * as React from 'react';
import { getLocalString } from '../../../culture/localString';
import { Link } from '../../../link/link';
import { Submodule } from './submodule';
import { IModuleProps } from './props';

export class Module extends React.Component<IModuleProps, {}>{
	renderSubModules() {
		let lines: any[] = [];
		for (let submodule of this.props.module.submodules) {
			lines.push(<Submodule
				key={submodule.$uuid}
				submodule={submodule}
				onMenuClick={this.props.onMenuClick}
				onSwitchBookmark={this.props.onSwitchBookmark}
				onSubModuleCollapse={this.props.onSubModuleCollapse}
				onMenuBlockCollapse={this.props.onMenuBlockCollapse}
				searchFilter={this.props.searchFilter} />);
		}
		let style = this.props.module.collapsed ? {
			display: "none"
		} : null;
		return <ul className="s_sitemap_submodules" style={style}>
			{lines}
		</ul>;
	}
	render() {
		return <li className="s_sitemap_module" id={this.props.module.$uuid}>
			<Link
				key={this.props.module.$uuid}
				className="s_sitemap_module_link"
				title={this.props.module.title}
				icon={this.props.module.collapsed ? "dir_down" : "dir_up"}
				iconText="left"
				description={this.props.module.collapsed ? getLocalString("section_expand") : getLocalString("section_collapse")}
				value={this.props.module}
				onClick={this.props.onModuleCollapse}
				highlightText={this.props.searchFilter ? this.props.searchFilter : null}
				highlightClassName={"s_sitemap_highlight_text"} />
			{this.renderSubModules()}
		</li>;
	}
}