"use strict";
import * as Sdata from '../../dataStore/sdata';
import { SitemapModule } from './groups';
import Store from '../../dataStore/store';

export class Sitemap extends Store {
    private _modules: SitemapModule[];
    constructor($prototype: Sdata.IPrototype, data: any) {
        super($prototype, data);
        this.load();
    }
    get url() {
        return this.dataset.$url || this.$prototype.$url;
    }
    get modules(): SitemapModule[] {
        return this._modules;
    }
    load() {
        this.clear();
        this._modules = [];
        if (this.dataset.modules) {
            for (let mod of this.dataset.modules) {
                this._modules.push(new SitemapModule(this, mod));
            }
        }
    }
    private clear() {
        if (this._modules) {
            for (let mod of this._modules) {
                mod.dispose();
            }
        }
        this._modules = null;
    }
    dispose() {
        this.clear();
    }
}