"use strict";
//var io = require('syracuse-ui/deps/socket.io-client');


var _toggleWindow = function() {
	var $$notifPanel = $(".s-notif-panel");
	if ($$notifPanel.length > 0) {
		$$notifPanel.toggle();
	} else {
		var notifPanelTmpl = '\
			<div class="s-notif-panel">\
				<header>NOTIFICATIONS</header>\
				<section>{{{notifications}}}</section>\
				<footer></footer>\
			</div>';
		$$notifPanel = $(notifPanelTmpl);

		// append notifpanel
		$(document.body).append($$notifPanel);
	}

};


var _appendTrigger = function() {

	// dom element before which trigger button will be added
	var $$siteOpener = $(".s-site-help-link");

	// building trigger button
	var $$trigger = $("<a>Trigger</a>");
	$$trigger.css("display", "table-cell");
	$$trigger.css("width", "35px");
	$$trigger.css("color", "white");
	$$trigger.css("vertical-align", "middle");

	// bind function on click
	$$trigger.click(_toggleWindow);

	// append trigger button
	$$trigger.insertBefore($$siteOpener);

	// IO CONNECTION
	//var socket = io("http://"+window.location.host+":8124");

	// // on message receive
	// socket.on("message", function(msg) {
	// 	alert("message received : " + msg);
	// });

	// // send message
	// socket.emit("message","hello world !");


};

exports.appendTrigger = _appendTrigger;