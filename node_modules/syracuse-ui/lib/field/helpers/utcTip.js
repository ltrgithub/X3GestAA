"use strict";
var formatApi = require('syracuse-ui/lib/field/formatApi');

//var _pattern = /\d{4}-\d{2}-\d{2}[ T]\d{2}:\d{2}:\d{2}(Z|\s*GMT)/;
var _pattern = /(\d{4}-\d{2}-\d{2})[ T](\d{2}:\d{2}:\d{2})(Z|\s*GMT)/;
exports.emphasis = function(value) {
	/*if (value) {
     value += " 2014-10-28 13:18:21 GMT";
     }*/
	if (value && value.length >= 20) {
		if (_pattern.test(value)) {
			var found = value.match(_pattern);
			for (var ii = 0, jj = found.length; ii < jj; ii++) {
				if (found[ii].length > 10) {
					value = value.replace(found[ii], "<em class='s-dt-utc'>" + found[ii] + "</em>");
				}
			}
			return value;
		}
	}
};

exports.onInout = function(onEnter, event, target) {
	var className = target && target.className;
	var isUTC = className && className.indexOf && className.indexOf("s-dt-utc") >= 0;
	if (isUTC) {
		var field = syra_store.findField(target);
		if (field && onEnter) {
			syra_site.dialogManager.titleTip.show(formatApi.utcToLocal(target.textContent), target);
		}
	}
};