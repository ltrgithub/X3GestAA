"use strict";
var helpers = require('syracuse-core/lib/helpers');
var Article = require("syracuse-ui/lib/article/article").Article;

function TabularChartRecord() {}

exports.TabularChartRecord = helpers.defineClass(TabularChartRecord, Article, {
	drawBox: function() {
		this.menusSlot = document.createElement("div");
		this.menusSlot.style.position = "absolute";
		this.menusSlot.style.display = "none";
		syra_site.dom.toggleClass(this.menusSlot, "s-record-actions", true);
		this.menusBox = this.page.loadNewItem(this.menusSlot, {
			$isMenusBag: true,
			$category: "menus",
			$title: "-",
			$isTitlePicker: true,
			$isBoxCollapsable: true,
			$isPopupContent: true,
			$clientId: this.id + "-menu-picker",
			$skin: "s-mn-popus",
			$itemSkin: "s-mn-link"
		}, this);
		this.menusBox.contextField = this;
	},
	onMenuClick: function(menuItem) {
		return this._onGraphMenuClick ? this._onGraphMenuClick(menuItem) : true;
	},
	openMenuBox: function($links, event, onGraphMenuClick) {
		this.applyChange($links);
		this._onGraphMenuClick = onGraphMenuClick;
		this.menusSlot.style.top = event.pageY + "px";
		this.menusSlot.style.left = event.pageX + "px";
		this.menusBox.doOpenPicker();
		this.menusBox.body.style.width = "";
		this.menusBox.body.style.height = "";
		this.menusBox.body.style.top = event.pageY + "px";
		this.menusBox.body.style.left = event.pageX + "px";
	},
	dispose: function() {
		this._onGraphMenuClick = this.menusBox = null;
		Article.prototype.dispose.call(this);
	}
});