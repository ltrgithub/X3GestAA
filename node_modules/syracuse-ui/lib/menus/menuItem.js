"use strict";
var helpers = require('syracuse-core/lib/helpers');
var menuItemBuilder = require('./menuItemBuilder');

function MenuItem() {

}

exports.MenuItem = helpers.defineClass(MenuItem, null, {
	highlight: function(show) {
		syra_site.dom.toggleClass(this.domItem, "s-highlight", show);
	},
	ensureLayoutMode: function() {
		this.layoutParent && this.layoutParent.ensureLayoutSlot(this);
	},
	loadBox: function(record) {
		this.$isAuthoringEnabled = false;
		menuItemBuilder.load(this, record);
	},
	onItemInOut: function(onEnter, event) {
		syra_menus.onItemInOut(onEnter, event, this);
	},
	getTitle: function() {
		if (this.domItem.syraTitle == null && this.$title) {
			if (this.$title && this.$title.length > 0 && this.$title[1] == "@") {
				this.domItem.syraTitle = syra_site.expressionMaker.render(this.boxParent, this.$title);
			} else {
				this.domItem.syraTitle = this.$title;
			}
		}
		return this.domItem.syraTitle || "";
	},
	showItem: function(show) {
		menuItemBuilder.show(this, show);
	},
	setState: function(state) {
		menuItemBuilder.setState(this, state);
	},
	disable: function($value) {
		syra_site.dom.disableItem(this.domItem, this.$isDisabled = $value || false);
	},
	click: function(event) {
		syra_menus.click(this, event);
	},
	setMenu: function($menu, record) {
		menuItemBuilder.setMenu(this, $menu, record);
	},
	dispose: function() {
		this.onItemInOut();
		delete syra_map[this.id];
		this.$vignettes = this.rowSeparator = this._description = this.delta = null;
		this.article = this.onMenuClick = this.$item = this.layoutSlot = null;
		this.$url = this.domItem = this.$title = this.iconValue = null;
		this.external = this.layoutParent = this.boxParent = this.articleParent = this.page = this.childVariants = null;
		this.popupTitle = null;
	}
});