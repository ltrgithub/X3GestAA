"use strict";
var helpers = require('syracuse-core/lib/helpers');

exports.calculDegrade = function(alpha) {
	// l'angle de rotation est calculé par rapport au centre de la forme, on considére donc ce point comme centre de notre graphe
	// le repère est orthonormée de longueur max 50 (la fenetre graphique éMath.tant de longueur et largeur 100)
	//traitement cas spéciaux
	var margeArrondi = Math.PI / 100,
		x1, x2, y1, y2;
	if (alpha == 0) {
		x2 = 50;
		y2 = 0;
	} else if (alpha == Math.PI / 2) {
		x2 = 0;
		y2 = 50;
	} else if (alpha == Math.PI) {
		x2 = -50;
		y2 = 0;
	} else if (alpha == 3 * Math.PI / 2) {
		x2 = 0;
		y2 = -50;
	}
	//cas normaux
	else if (alpha < Math.PI / 4) {
		x2 = 50;
		y2 = 50 * Math.tan(alpha);
	} else if (alpha < Math.PI / 2 - margeArrondi) {
		x2 = 50 * (Math.tan(alpha - Math.PI / 4));
		y2 = 50;
	} else if (alpha < 3 * Math.PI / 4) {
		x2 = 50 * (Math.tan(alpha - Math.PI / 2)) * -1;
		y2 = 50;
	} else if (alpha < Math.PI) {
		x2 = -50;
		y2 = 50 * (Math.tan(alpha - 3 * Math.PI / 4));
	} else if (alpha < 5 * Math.PI / 4) {
		x2 = -50;
		y2 = 50 * (Math.tan(alpha - Math.PI)) * -1;
	} else if (alpha < 3 * Math.PI / 2) {
		x2 = 50 * (Math.tan(alpha - 5 * Math.PI / 4)) * -1;
		y2 = -50;
	} else if (alpha < 7 * Math.PI / 4) {
		x2 = 50 * (Math.tan(alpha - 3 * Math.PI / 2)) * -1;
		y2 = -50;
	} else { //alpha>315
		x2 = 50;
		y2 = (50 * Math.tan(alpha - 7 * Math.PI / 4)) * -1;
	}
	//calcul de x1 y1 en fonction de x2, y2. x1 et y1 sont opposé par rapport à l'origine
	x1 = -x2;
	y1 = -y2;
	// calcul pour basculer en coordonnées grphique (origine en haut a gauche)
	x1 += 50;
	y1 += 50;
	x2 += 50;
	y2 += 50;
	return {
		x1: x1,
		y1: y1,
		x2: x2,
		y2: y2
	};
};