"use strict";
var helpers = require('syracuse-core/lib/helpers');

function DiagnoseMessagePopup() {

}

exports.DiagnoseMessagePopup = helpers.defineClass(DiagnoseMessagePopup, null, {
	loadBox: function(msgHTML, severity) {
		var self = this;

		// $$item
		self._item = document.createElement("div");
		self._item.className = "s-diag-msg-popup";
		self.$$item = $(self._item);

		// $$header
		self.header = document.createElement("div");
		self.header.className = "s-diag-msg-popup-header";
		self.$$header = $(self.header);
		self._item.appendChild(self.header);

		// $$body
		self.body = document.createElement("div");
		self.body.className = "s-diag-msg-popup-body-" + severity;
		self.$$body = $(self.body);

		// message
		self._message = document.createElement("div");
		self._message.className = "s-diag-msg-popup-message";
		var html = document.createElement("div");
		html.innerHTML = msgHTML;
		// in order to remove wrapping "span" tag
		self._message.innerHTML = ($(html).find("span").contents().unwrap().end().end())[0].innerHTML;

		// appending
		self.$$body[0].appendChild(self._message);
		self.$$item.append(self.$$body);

	},
	dispose: function() {
		this.$$item = null;
	}

});