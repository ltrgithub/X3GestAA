"use strict";
var helpers = require('syracuse-core/lib/helpers');

function DiagnoseMessagePopup(){

}

exports.DiagnoseMessagePopup = helpers.defineClass(DiagnoseMessagePopup, null, {
    loadBox: function(message){
        var self = this;
        
        // $$item
        self._item = document.createElement("div");
        self._item.className = "s-diag-msg-popup";
        self.$$item = $(self._item);
        
        // $$body
        self._body = document.createElement("div");
        self._body.className = "s-diag-msg-popup-body";
        self.$$body = $(self._body);
        
        // message
        self._message = document.createElement("div");
        self._message.className = "s-diag-msg-popup-message";
        self._message.textContent = message;
        
        // appending
        self.$$body[0].appendChild(self._message);
        self.$$item.append(self.$$body);
        
        // bind events
        self._bindEvents(true);
    },
    _bindEvents: function(bind){
        var self = this;
        if (self.$$item) {
            if (bind) {
                self.$$item.delegate("div.s-diag-msg-popup-message", "mouseenter", function(){
                    self.isMouseOver = true;
                }).delegate("div.s-diag-msg-popup-message", "mouseleave", function(){
                    self.isMouseOver = false;
                });
            }
            else {
                self.$$item.undelegate();
            }
        }
    },
    dispose: function(){
        this._bindEvents(false);
        this.isMouseOver = null;
        this.$$item = null;
    }
    
});
