"use strict";

function _addTextNode(slot, text) {
	var node = slot.appendChild(document.createElement("pre"));
	node.className = "s-err-page-start";
	node.textContent = text;
}

function _addLink(slot, text, syraOnClick) {
	var node = slot.appendChild(document.createElement("a"));
	node.className = "s-err-page-start";
	node.textContent = text;
	node.syraOnClick = syraOnClick;
}

function _makeTemplate(title, $diagnoses) {
	var page = document.createElement("div");
	page.className = "s-err-page";
	var container = page.appendChild(document.createElement("div"));
	container.className = "s-err-page-container";
	var banner = container.appendChild(document.createElement("div"));
	banner.className = "s-err-page-banner";
	var textSlot = banner.appendChild(document.createElement("div"));
	textSlot.className = "s-err-page-banner-text";
	var node = textSlot.appendChild(document.createElement("pre"));
	node.className = "s-err-page-banner-title";
	node.textContent = title;
	for (var ii = 0, jj = $diagnoses.length; ii < jj; ii++) {
		node = textSlot.appendChild(document.createElement("pre"));
		node.className = "s-err-page-banner-detail";
		node.textContent = $diagnoses[ii].$message;
	}
	/*var home = text.appendChild(document.createElement("div"));
     _addTextNode(home, "Please ");
     _addLink(home, "go back");
     _addTextNode(home, " or return to ");
     _addLink(home, "the home page");
     _addTextNode(home, " or ");
     _addLink(home, "the navigation page");*/
	return page;
}

exports.show403 = function(error, $diagnoses) {
	syra_site.body.style.display = "none";
	syra_site.resetMainPage();
	syra_site.body.appendChild(_makeTemplate(syra_local.error_page_403, $diagnoses));
	syra_site.body.style.display = "";
	return true;
};

exports.show404 = function(error, $diagnoses) {
	syra_site.body.style.display = "none";
	syra_site.resetMainPage();
	syra_site.body.appendChild(_makeTemplate(syra_local.error_page_404, $diagnoses));
	syra_site.body.style.display = "";
	return true;
};
exports.show401 = function(error, $diagnoses) {
	syra_site.body.style.display = "none";
	syra_site.resetMainPage();
	syra_site.body.appendChild(_makeTemplate(syra_local.error_page_401, $diagnoses));
	syra_site.body.style.display = "";
	return true;
};