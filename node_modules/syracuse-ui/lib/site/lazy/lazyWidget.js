"use strict";
var helpers = require('syracuse-core/lib/helpers');

function LazyWidget(path, $format) {
	this.path = path;
}

exports.LazyWidget = helpers.defineClass(LazyWidget, null, {
	loadBox: function(initData) {
		var self = this;
		require.async(self.path, function(err, module) {
			try {
				var item = new module[self.$item.$format || self.$item.$class]();
				if (item) {
					self.boxParent.page.initializeNewItem(item, self.$item, self.boxParent);
					item.layoutSlot = self.layoutSlot;
					item.loadBox(initData);
				}
			} catch (error) {
				console.error(error.message)
			}
		});
	},
	dispose: function() {
		//important for deleteing boxParent
	}
});