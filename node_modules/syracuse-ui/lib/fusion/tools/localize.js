"use strict";

var _localize = {
	"en-US": {
		"1": "Unexpected script error caught in method",
		"2": "Your server connexion should not be released properly.",
		"3": "Could not open a new session. No data received from web server.",
		"4": "Could not open a new session. Unexpected data received from web server.",
		"5": "Can't get resource on web server.",
		"6": "HTTP status",
		"7": "HTTP error.",
		"8": "Can't retrieve session shared resources on web server. Your session will be closed.",
		"9": "Unexpected error while sending request to web server.",
		"10": "Application error",
		"11": "connexion refused. Detail",
		"12": "connexion refused without reason.",
		"13": "An unexpected javascript error has been detected. Your current session must be closed. Please, log in again.",
		"14": "An unexpected error occured in response to the last web server request.",
		"15": "Resource : ",
		"16": "A thrown and not caught Javascript error occured. Your current session must be closed",
		"17": "Error can't be recovered."
	},
	"fr-FR": {
		"1": "Une erreur de script inattendue a été rencontrée dans la méthode ",
		"2": "Votre connexion serveur n'a peut-être pas été libérée correctement.",
		"3": "Impossible d'ouvrir une nouvelle session. Aucune donnée reçue du serveur web.",
		"4": "Impossible d'ouvrir une nouvelle session. Des données inattendue ont été reçues du serveur web.",
		"5": "Impossible de récupérer la ressource sur le serveur web.",
		"6": "Statut HTTP",
		"7": "Erreur HTTP.",
		"8": "Impossible de récupérer les ressources partagées sur le serveur web. Votre session va être fermée.",
		"9": "Une erreur inattendue a été rencontrée lors de l'envoi d'une requête à destination du serveur web.",
		"10": "Erreur de l'application",
		"11": "La connexion a échoué. Détail",
		"12": "La connexion a échoué sans raison.",
		"13": "Une erreur javascript inattendue a été détectée. Votre session va être fermée. Veuillez vous reconnecter à nouveau.",
		"14": "Une erreur inattendue s'est produite suite à l'envoi d'une requête au serveur web.",
		"15": "Ressource : ",
		"16": "Une exception Javascript non capturée s'est produite. Votre session va devoir être fermée.",
		"17": "Impossible de rattraper l'erreur."
	}
};

var _defLang = "en-US";

function _getMess(lang, codeMess){
	var country, cdLang, mess, langEx = lang || _defLang;
	if(_localize[langEx] && _localize[langEx][codeMess]) {
		mess = _localize[langEx][codeMess];
	}
	else {
		country = (langEx.split("-"))[0];
		cdLang = _.find(_localize, function(value, key) {
			return (key.split("-"))[0] == country && value[codeMess];
		});
		mess = cdLang ? cdLang[codeMess] : _localize[_defLang][codeMess];
	}
	return mess;
}

exports.localize = {
	"getMessage": _getMess,
	"defLang": _defLang
};
