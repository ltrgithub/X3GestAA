"use strict";

exports.getFieldValue = function(options) {

	var val = options.field.getInputValue();
	if (["like_s", "like_e", "like"].indexOf(options.operator) >= 0) {
		val = val.replace(/\**$/, "");
		val = val.replace(/\**/, "");
	}
	var values = ["", val, ""];
	switch (options.operator) {
		case "none":
			break;
		case "gt":
			values[0] = ">";
			break;
		case "ge":
			values[0] = ">=";
			break;
		case "lt":
			values[0] = "<";
			break;
		case "le":
			values[0] = "<=";
			break;
		case "eq":
			values[0] = "=";
			break;
		case "ne":
			values[0] = "<>";
			break;
		case "like_s":
			values[2] = "*";
			break;
		case "like_e":
			values[0] = "*";
			break;
		case "like":
			values[0] = "*";
			values[2] = "*";
			break;
	}
	return values.join("");
};

exports.getFieldOperators = function($type, field, $filterField) {
	switch ($type || field.$field.$type) {
		case "application/x-reference":
			return exports.getFieldOperators($filterField.$type, field);
		case "application/x-date":
		case "application/x-time":
		case "application/x-datetime":
			return ["none", "gt", "ge", "lt", "le", "eq", "ne"];
		case "application/x-string":
			return ["none", "gt", "ge", "lt", "le", "eq", "ne", "like_s", "like", "like_e"];
		case "application/x-integer":
		case "application/x-quantity":
			return ["none", "gt", "ge", "lt", "le", "eq", "ne"];
	}
	return ["none", "eq", "ne"];
};