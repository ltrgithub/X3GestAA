"use strict";
var helpers = require('syracuse-core/lib/helpers');
var DesktopList = require("syracuse-ui/lib/field/array/list").DesktopList;
//-----------------------------------------------
// GridSyra
//-----------------------------------------------
function Grid(){

}

exports.Grid = helpers.defineClass(Grid, DesktopList, {
	setFocus: function(){
        var record = this._store._records[arguments[1] - 1], field;
        if (record && !record.disposed) {
            field = record.boundFields[arguments[0]];
            if (field) {
                field[0].focus();
            }
        }
	},
    getDataValue: function(){
        var record = this._store._records[arguments[1] - 1], field;
        if (record && !record.disposed) {
            field = record.boundFields[arguments[0]];
            if (field && field[0].$isEditMode) {
                return field[0].getDataValue();
            }
        };
        return null;
    },
	
	getSelectedRecordIndexes:function(){
		var result=[],ir=-1,r={};
		this._store._records.filter(function(elt,idx){
			if (elt.$$item && elt.$$item.hasClass("s-list-record-selected")){
				return true
				};
				return false
			}).forEach( function(elt, idx){
				if (!result[ir] || result[ir].start + result[ir].count != elt.$recordIndex) {
					r = {};
					r.start = elt.$recordIndex;
					r.count = 1;
					result.push(r);
					ir++;
				}
				else {
					result[ir].count++
				}
			}
			)
		return result;
	}
});
