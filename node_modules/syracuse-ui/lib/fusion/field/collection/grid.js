"use strict";
var helpers = require('syracuse-core/lib/helpers');
var DesktopList = require("syracuse-ui/lib/field/array/list").DesktopList;
//-----------------------------------------------
// GridSyra
//-----------------------------------------------
function Grid(){

}

exports.Grid = helpers.defineClass(Grid, DesktopList, {
    setFocus: function(){
        var record = this._store._map[arguments[1] - 1], field;
        if (record) {
            field = record.boundFields[arguments[0]];
            var edit = (arguments[3]) ? arguments[3].edit : false;
            if (!this.$isEditMode) {
                if (field && ((!field[0].$isEditMode && edit) || (field[0].$isEditMode && !edit))) {
                    //setTimeout(function(){
                        field[0].toggleEditMode();
                        field[0].focus();
                   // }, 10);
                }
            }
            else {
                if (field) {
                    field[0].focus();
                }
            }
        }
    },
    getDataValue: function(){
        var record = this._store._map[arguments[1] - 1], field;
        if (record) {
            field = record.boundFields[arguments[0]];
            if (field && field[0].$isEditMode) {
                return field[0].getDataValue();
            }
        };
        return null;
    },
    resetFocus: function(){
        if (!this.$isEditMode) {
            var record = this._store._map[arguments[1] - 1], field;
            if (record) {
                field = record.boundFields[arguments[0]];
                if (field && field[0].$isEditMode) {
                    setTimeout(function(){
                        field[0].toggleEditMode();
                        field[0].focus();
                    }, 10);
                }
            }
        }
    }
});
