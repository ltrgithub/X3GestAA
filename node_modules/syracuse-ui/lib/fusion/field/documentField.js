"use strict";
var helpers = require('syracuse-core/lib/helpers');
var DocumentField = require('syracuse-ui/lib/field/documentField').DocumentField;

function CvgDocumentField() {}

exports.CvgDocumentField = helpers.defineClass(CvgDocumentField, DocumentField, {
	initialize: function() {
		DocumentField.prototype.initialize.call(this);
	},
	render: function() {
		DocumentField.prototype.render.call(this);
		document.site.dom.disableItem(this.removeBtn, true);
	},
	setDataValue: function(value) {
		if (!this.isImage && value && value.$url) {
			this.$dataUrl = this.$field.$url = value.$url;
		}
		DocumentField.prototype.setDataValue.apply(this, arguments);
	},
	_onEndUpload: function(file) {
		DocumentField.prototype._onEndUpload.apply(this, arguments);
		this.page.externalAdapter.onUploadDone({
			"field": this,
			"file": file
		});
	},
	_onUploadSuccess: function(file, data, response) {
		DocumentField.prototype._onUploadSuccess.apply(this, arguments);
		this.page.externalAdapter.onUploadSucceeded({
			"field": this,
			"file": file
		});
	}
});