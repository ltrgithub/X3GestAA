var _fieldTypes = {
    "application/x-choice": require('./choiceField').FusionChoiceField,
    "application/x-collection": require("./collection/grid").Grid,
    "application/x-boolean": require('syracuse-ui/lib/desktop/field/booleanField').DesktopBoolean,
    "application/x-collection$xflgrid": require("./collection/listgrid").Grid,
    "application/x-tree$xstd": require("./collection/listgridtree").LGridTreeStd,
    "application/x-tree$xpick": require("./collection/listgridtree").LGridTreePick,
    "application/x-tree$xrec": require("./collection/listgridtree").LGridTreeRec,
    "application/x-date": require("syracuse-ui/lib/common/field/field").Field
    //"application/x-xslgraphic": require('./xslGraphic').XslGraphic,
};
// FDB - temporaire - "application/x-date -> "application/x-string en attendant le format - POur fiare fonctionner les prototypes générés
_fieldTypes["application/x-time"] = _fieldTypes["application/x-datetime"] = _fieldTypes["application/x-date"];
var sapUtil = require('syracuse-ui/lib/fusion/core/client/sap/util').Fusion;


exports.create = function($field, $item, boxParent, $class){

    switch ($class) {
        case "application/x-password":
            $item.$isConfirmDisabled = true;
            break;
        case "application/x-tree":
            $class += (("$" + $field.$format) || "");
            break;
    }
    if ($class == "application/x-collection" && $item.$format == "xflgrid") {
        $class = $class + "$" + $item.$format;
    }
    var fieldClass = _fieldTypes[$class], field;
    if (fieldClass) {
        field = new fieldClass();
        field.$field = $field;
        if ($class == "application/x-boolean") {
            field.statusValues = {
                on: sapUtil.check.on,
                off: sapUtil.check.off
            };
        }
    }
    return field;
};
