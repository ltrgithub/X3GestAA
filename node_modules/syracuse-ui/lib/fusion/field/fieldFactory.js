var _fieldTypes = {
    "application/x-choice": require('./choiceField').FusionChoiceField,
    "application/x-string$text": require('./alphaNumField').FusionTextField,
    "application/x-boolean": require('syracuse-ui/lib/desktop/field/booleanField').DesktopBoolean,
    "application/x-collection": require("./collection/grid").Grid,
    "application/x-tree$xstd": require("./collection/listgridtree").LGridTreeStd,
    "application/x-tree$xpick": require("./collection/listgridtree").LGridTreePick,
    "application/x-tree$xrec": require("./collection/listgridtree").LGridTreeRec
    //"application/x-xslgraphic": require('./xslGraphic').XslGraphic,
    // Temporaire pour test liste gauches avec filtre et tri
};
var FBFusionDesktopList = require("./collection/listgrid").FBFusionDesktopList;
var FBSyraDesktopList = require("./collection/listgrid").FBSyraDesktopList;

var sapUtil = require('syracuse-ui/lib/fusion/core/client/sap/util').Fusion;

exports.create = function($field, $item, boxParent, $class){
    if ($class == "application/x-tree") {
        $class += (("$" + $field.$format) || "");
    }
    var field, fieldClass;
    if ($class == "application/x-collection") {
        switch ($item.$format) {
            case "xflgrid":
                fieldClass = FBSyraDesktopList;
                break;
            case "xflgridfusion":
                fieldClass = FBFusionDesktopList;
                break;
        }
    }
    if (!fieldClass) {
        fieldClass = _fieldTypes[$class];
    }
    if (fieldClass) {
        field = new fieldClass();
        field.$field = $field;
        if ($class == "application/x-boolean") {
            field.statusValues = {
                on: sapUtil.check.on,
                off: sapUtil.check.off
            };
        }
    }
    return field;
}
