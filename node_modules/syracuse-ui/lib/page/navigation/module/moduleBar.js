"use strict";
var helpers = require('syracuse-core/lib/helpers');
var BarSplitter = require("syracuse-ui/lib/page/bar/barSplitter").BarSplitter;

function ModuleBar() {}

exports.ModuleBar = helpers.defineClass(ModuleBar, BarSplitter, {
	load: function(page) {
		this.minWidth = 250;
		if (syra_site.isTabletDevice) {
			this.options = {
				resizeDirection: "left",
				$viewMode: "dock",
				$skins: {
					bar: "s-nav-modulebar",
					openerPicker: "s-nav-modulebar-opener",
					resizePicker: "s-nav-modulebar-resizer"
				}
			};
		} else {
			this.options = {
				$isResizerDisabled: true,
				$skins: {
					bar: "s-nav-modulebar"
				}
			};
		}
		this.barSlot = document.createElement("div");
		this.barSlot.className = "s-nav-modulebar-slot";
		this.barBody = document.createElement("div");
		this.barBody.className = "s-nav-modulebar-body";
		page.domItem.insertBefore(this.barSlot, page.domItem.firstChild);
		BarSplitter.prototype.load.call(this, page);
		this.page.loadNewItem(this.barBody, {
			$isTitleHidden: true,
			$bind: "modules"
		});
	}
});