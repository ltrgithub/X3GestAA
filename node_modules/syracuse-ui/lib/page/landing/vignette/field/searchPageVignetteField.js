"use strict";
var helpers = require('syracuse-core/lib/helpers');
var VignetteField = require("syracuse-ui/lib/page/landing/vignette/field/vignetteField").VignetteField;
var PageVignetteField = require("syracuse-ui/lib/page/landing/vignette/field/pageVignetteField").PageVignetteField;

function SearchPageVignetteField() {}

exports.SearchPageVignetteField = helpers.defineClass(SearchPageVignetteField, PageVignetteField, {
	renderLayoutContent: function($url, onVignetteRefresh) {
		var self = this;
		VignetteField.prototype.renderLayoutContent.call(self);
		if ($url) {
			self.$url = $url;
		}
		var $itemPage = {};
		$itemPage.layoutSlot = self.body;
		$itemPage.$category = "searchVignette";
		$itemPage.vignetteField = self;
		$itemPage.$urlParts = {
			$facet: "$query"
		};
		$itemPage.$autoFetch = false;
		$itemPage.$representation = self.$field;
		self.vignette = document.site.loadNewPage($itemPage);
		if (onVignetteRefresh) {
			self.onItemEnterLeave(null, true);
		}
	}
});