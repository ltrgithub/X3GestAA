exports.onLoadBox = function(parentClass,field, mobilePlugin, onInitPlugin){
    field.ensureEditMode();
    field.$item.$skin = field.$item.$skin || (field.$item.$inplace ? "s-inplace" : (field.$isEditMode?"s-field-edit":"s-field"));
	parentClass.prototype.loadBox.call(field);
	exports.setTheme(field);
    if (field.$isEditMode) {
        if (field.$$input) {
            field.$$input[0].setAttribute("data-theme", field.$theme.$input);
        }
        if (!field.$item.$inplace) {
            field.$$item[0].setAttribute("data-role", "fieldcontain");
        }
    }
    if (onInitPlugin) {
        onInitPlugin(field);
    }
    if (field.getPage().$isjqmPage) {
        if (field.$isEditMode) {
            if (!field.$item.$inplace) {
                field.$$item.fieldcontain();
            }
            if (field.$$input) {
                field.$$input[mobilePlugin || "textinput"]();
            }
        }
        field.$isjqmField = true;
    }
};
exports.setTheme = function(field){
    if (!field.$theme) {
        var $fieldThemes = document.site.$item.$themes.$field;
        field.$theme = $fieldThemes[field.$field.$type] || $fieldThemes.$defaultField;
    }
};
