"use strict";
var helpers = require('syracuse-core/lib/helpers');

function EventListener() {}

exports.EventListener = helpers.defineClass(EventListener, null, {
	load: function() {
		try {
			this._bindSwipeEvents();
		} catch (e) {
			// Temporarily to not propagate errors to  desktop client
			console.log("mobileEventListener error\n" + e.stack);
		}
	},
	_bindSwipeEvents: function() {
		document.site.$$layoutSlot.delegate("article.s-list *", "swipeleft", function(event, data) {
			//$(document).on("swipeleft", function(event, data) {
			var article = document.controller.findArticle($(event.target));
			if (article.list && article.list.pagging) {
				article.list.pagging.onShortKeyEvent(false);
				event.stopPropagation();
			}

		});
		//$(document).on("swiperight", function(event, data) {
		document.site.$$layoutSlot.delegate("article.s-list *", "swiperight", function(event, data) {
			//var listdescendants=$("article.s-list *");
			var article = document.controller.findArticle($(event.target));
			if (article.list && article.list.pagging) {
				article.list.pagging.onShortKeyEvent(true);
				event.stopPropagation();
			}

		});
	}
});