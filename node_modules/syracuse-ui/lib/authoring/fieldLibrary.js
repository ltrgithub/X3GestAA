"use strict";

var TabularChartAuthoring = require("./field/chart/tabularChartAuthoring").TabularChartAuthoring;
var _vignettesClasses = {
    "$html": require('./field/vignette/htmlVignetteAuthoring').HtmlVignetteAuthoring
};
var _classes = {
    "application/x-choice": require('./field/choice/choiceFieldAuthoring').ChoiceFieldAuthoring,
    "image": require('./field/imageFieldAuthoring').ImageFieldAuthoring,
    "application/x-array": require("./field/array/authoringOpener").WidgetAuthoring
};

exports.getAuthoringFieldWidget = function(field){
    var widgetClass = _classes[field.$field.$type];
    if (!widgetClass) {
        switch (field.$field.$type) {
            case "application/x-portlet":
            case "application/x-vignette":
                widgetClass = _vignettesClasses[field.$field.$format];
                break;
            default:
                if (field.$decorator == "cube$highCharts") {
                    widgetClass = TabularChartAuthoring;
                }
                break;
        }
    }
    var widget = widgetClass ? new widgetClass() : null;
    if (widget) {
        switch (field.$field.$type) {
            case "application/x-array":
                widget.authoringFieldLibrary = this;
                break;
        }
    }
    return widget;
};
