"use strict";
var helpers = require('syracuse-core/lib/helpers');
var BarSplitter = require("syracuse-ui/lib/page/bar/barSplitter").BarSplitter;

function TreesBar() {}

exports.TreesBar = helpers.defineClass(TreesBar, BarSplitter, {
	load: function(page) {
		this.options = {
			resizeDirection: "left",
			$skins: {
				bar: "s-aw-treebar",
				openButton: "s-aw-treebar-opener",
				resizePicker: "s-aw-treebar-resizer"
			}
		};
		BarSplitter.prototype.load.call(this, page);
	},
	resizeBar: function() {
		if (BarSplitter.prototype.resizeBar.call(this)) {
			if (this.trees) {
				var height = syra_site.dom.getInnerSize(this.barSlot).height;
				var bodyHeight = Math.max(height - this.trees.treebarTabs.getBoundingClientRect().height, 20) + "px";
				this.trees.contentTree.tabItem.body.style.height = bodyHeight;
				this.trees.insertTree.tabItem.body.style.height = bodyHeight;
			}
		}
	},
	dispose: function() {
		this.trees = null;
		BarSplitter.prototype.dispose.call(this);
	}
});