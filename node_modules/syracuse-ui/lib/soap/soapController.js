"use strict";

exports.isSoapUrl = function($url) {
	return $url && ($url.indexOf("soap-") >= 0);
};
exports.openRequestPage = function(openerUrlSegments) {
	var soapQuery = syra_controller.parseUrl(openerUrlSegments.$url);
	soapQuery.sendNewRequest({
		onSuccess: function(data, response, requestUrl) {
			var $itemPage = {
				layoutSlot: document.createElement("div"),
				$isEditMode: true,
				$category: "soap",
				openerUrlSegments: soapQuery.openerUrlSegments,
				$representation: data
			};
			$itemPage.openerUrlSegments.$facet = "$request";
			//$itemPage.initData = $itemPage.initData || initData;
			$itemPage.openerUrlSegments = openerUrlSegments;
			$itemPage.openerUrlSegments.fullUrl = document.location.href;
			syra_site.onMainPageChange($itemPage);
		},
		onError: function(data, response) {
			syra_site.showDiagnoses({
				$diagnoses: data && data.length > 0 ? (data.indexOf("$diagnoses") >= 0 ? JSON.parse(data).$diagnoses : [{
					$message: data ? data : syra_local.http_empty_error
				}]) : [{
					$message: syra_local.default_err_msg
				}]
			});
		}
	});
};