"use strict";

function _cleanItem(item) {
	delete item.$r_url;
	delete item.$shortUrl;
	delete item.$uuid;
	delete item.$hostUrl;
	delete item.$menuBaseUrl;
	return item;
}

function _cleanItems(items) {
	if (items) {
		for (var ii = 0, jj = items.length; ii < jj; ii++) {
			var item = _cleanItem(items[ii]);
			if (item.menuItem) {
				_cleanItem(item.menuItem);
				var menu = item.menuItem;
				menu.$links = {
					$execute_$query: {
						$title: menu.title,
						$url: syra_site.$menus.$home.$url
					}
				};
			}
			if (item.menuBlock) {
				_cleanItem(item.menuBlock);
				_cleanItems(item.menuBlock.items);
			}
		}
	}
}

exports.clean = function() {
	var modules = _navigation.data.modules;
	for (var ii = 0, jj = modules.length; ii < jj; ii++) {
		var module = _cleanItem(modules[ii]);
		for (var mm = 0, kk = module.submodules.length; mm < kk; mm++) {
			_cleanItems(_cleanItem(module.submodules[mm]).items);
		}
	}
	console.log(JSON.stringify(_navigation.data));
};