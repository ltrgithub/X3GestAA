"use strict";
var helpers = require('syracuse-core/lib/helpers');
var LazyWidget = require('syracuse-ui/lib/site/lazy/lazyWidget').LazyWidget;

var _pages = {
    messagebox: {
        $title: "Message box test",
        $pages: [{
            $title: "Message box",
            $path: "syracuse-ui/lib/tests/messageBoxTest",
            $class: "MessageBoxTest"
        }],
        $links: {
            "uioverview": {
                "$title": "UI Overview",
                "$url": "?representation=s-uitest-fields.$test"
            },
            "uilist": {
                "$title": "UI List Overview",
                "$url": "?representation=s-uitest-list.$test"
            },
            "transitionTest": {
                "$title": "Json Page test",
                "$url": "?representation=s-uitest-json.$test"
            }
        }
    },
    diagnoses: {
        $title: "Diagnoses Page test",
        $pages: [{
            $title: "Diagnoses",
            $path: "syracuse-ui/lib/tests/diagnosesTest",
            $class: "DiagnosesTest"
        }],
        $links: {
            "uioverview": {
                "$title": "UI Overview",
                "$url": "?representation=s-uitest-fields.$test"
            },
            "uilist": {
                "$title": "UI List Overview",
                "$url": "?representation=s-uitest-list.$test"
            },
            "transitionTest": {
                "$title": "Json Page test",
                "$url": "?representation=s-uitest-json.$test"
            }
        }
    },
    menus: {
        $title: "Menus Page test",
        $pages: [{
            $title: "Menus",
            $path: "syracuse-ui/lib/tests/menusTest",
            $class: "MenusTest"
        }],
        $links: {
            "messagebox": {
                "$title": "Message box",
                "$url": "?representation=s-uitest-messagebox.$test"
            },
            "diagnoses": {
                "$title": "Diagnoses",
                "$url": "?representation=s-uitest-diagnoses.$test"
            },
            "uioverview": {
                "$title": "UI Overview",
                "$url": "?representation=s-uitest-fields.$test"
            },
            "uilist": {
                "$title": "UI List Overview",
                "$url": "?representation=s-uitest-list.$test"
            },
            "transitionTest": {
                "$title": "Json Page test",
                "$url": "?representation=s-uitest-json.$test"
            }
        }
    },
    json: {
        $title: "Json Page test",
        $pages: [{
            $title: "Json Page test",
            $path: "syracuse-ui/lib/tests/jsonPageViewer",
            $class: "JsonPageViewer"
        }],
        $links: {
			"messagebox": {
                "$title": "Message box",
                "$url": "?representation=s-uitest-messagebox.$test"
            },
            "diagnoses": {
                "$title": "Diagnoses",
                "$url": "?representation=s-uitest-diagnoses.$test"
            },
            "menus": {
                "$title": "Menus",
                "$url": "?representation=s-uitest-menus.$test"
            },
            "uioverview": {
                "$title": "UI Overview",
                "$url": "?representation=s-uitest-fields.$test"
            },
            "uilist": {
                "$title": "UI List Overview",
                "$url": "?representation=s-uitest-list.$test"
            },
            "transitionTest": {
                "$title": "Json Page test",
                "$url": "?representation=s-uitest-json.$test"
            }
        }
    },
    macro: {
        $title: "Macros test",
        $pages: [{
            $title: "Macros",
            $path: "syracuse-ui/lib/tests/macroTest",
            $class: "MacroTest"
        }],
        $links: {
            "menus": {
                "$title": "Menus",
                "$url": "?representation=s-uitest-menus.$test"
            },
            
            "uioverview": {
                "$title": "UI Overview",
                "$url": "?representation=s-uitest-fields.$test"
            },
            "uilist": {
                "$title": "UI List Overview",
                "$url": "?representation=s-uitest-list.$test"
            },
            "transitionTest": {
                "$title": "Json Page test",
                "$url": "?representation=s-uitest-json.$test"
            }
        }
    },
    boost: {
        $title: "UI Boost tests",
        $pages: [{
            $title: "Menus",
            $path: "syracuse-ui/lib/tests/boost/boostProcessTest",
            $class: "ProcessTest"
        }]
    },
    fields: {
        $title: "UI tests",
        "$links": {
			"messagebox": {
                "$title": "Message box",
                "$url": "?representation=s-uitest-messagebox.$test"
            },
            "diagnoses": {
                "$title": "Diagnoses",
                "$url": "?representation=s-uitest-diagnoses.$test"
            },
            "menus": {
                "$title": "Menus",
                "$url": "?representation=s-uitest-menus.$test"
            },
            
            "uioverview": {
                "$title": "UI Overview",
                "$url": "?representation=s-uitest-fields.$test"
            },
            "uilist": {
                "$title": "UI List Overview",
                "$url": "?representation=s-uitest-list.$test"
            },
            "uiboost": {
                "$title": "UI Boost Overview",
                "$url": "?representation=s-uitest-boost.$test"
            },
            "transitionTest": {
                "$title": "Json Page test",
                "$url": "?representation=s-uitest-json.$test"
            },
            "JsonLint": {
                "$title": "JsonLint",
                "$url": "http://jsonlint.com/"
            },
            "jsonformatter": {
                "$title": "Jsonformatter Curiousconcept",
                "$url": "http://jsonformatter.curiousconcept.com/"
            }
        },
        $pages: [{
            $title: "Simple Fields",
            $path: "syracuse-ui/lib/tests/simpleFieldsTest",
            $class: "SimpleFieldsTest"
        }, {
            $title: "Editor Fields",
            $path: "syracuse-ui/lib/tests/editorFieldTest",
            $class: "EditorFieldTest"
        }, {
            $title: "Child Object Fields",
            $path: "syracuse-ui/lib/tests/childFieldTest",
            $class: "ChildFieldTest"
        }, {
            $title: "Icon Fields",
            $path: "syracuse-ui/lib/tests/iconFieldsTest",
            $class: "IconFieldsTest"
        }, {
            $title: "Layouts",
            $path: "syracuse-ui/lib/tests/LayoutTest",
            $class: "LayoutTest"
        }]
    },
    list: {
        $title: "UI List tests",
        $links: {
			"messagebox": {
                "$title": "Message box",
                "$url": "?representation=s-uitest-messagebox.$test"
            },
            "diagnoses": {
                "$title":"Diagnoses",
                "$url": "?representation=s-uitest-diagnoses.$test"
            },
            "uimacrotest": {
                "$title": "UI Macro test",
                "$url": "?representation=s-uitest-macro.$test"
            },
            "menus": {
                "$title": "Menus",
                "$url": "?representation=s-uitest-menus.$test"
            },
            
            "uioverview": {
                "$title": "UI Overview",
                "$url": "?representation=s-uitest-fields.$test"
            },
            "uilist": {
                "$title": "UI List Overview",
                "$url": "?representation=s-uitest-list.$test"
            },
            "transitionTest": {
                "$title": "Json Page test",
                "$url": "?representation=s-uitest-json.$test"
            },
            "testx3LinkAQFB": {
                "$title": "X3 link --> AQFB : Test Tableaux",
                "$url": "/trans/x3/erp/superv/$sessions?f=AQFB"
            },
            "JsonLint": {
                "$title": "JsonLint",
                "$url": "http://jsonlint.com/"
            },
            "jsonformatter": {
                "$title": "Jsonformatter Curiousconcept",
                "$url": "http://jsonformatter.curiousconcept.com/"
            }
        },
        $pages: [{
            $title: "Scroll",
            $path: "syracuse-ui/lib/tests/list/formatArrayTest",
            $class: "ScrollTest"
        }, {
            $title: "Edit",
            $path: "syracuse-ui/lib/tests/list/editListTest",
            $class: "EditListTest"
        }, {
            $title: "Fill",
            $path: "syracuse-ui/lib/tests/list/formatArrayTest",
            $class: "FillListTest"
        }, {
            $title: "Grid",
            $path: "syracuse-ui/lib/tests/list/formatArrayTest",
            $class: "GridTest"
        }, {
            $title: "Vgrid",
            $path: "syracuse-ui/lib/tests/list/formatArrayTest",
            $class: "VgridTest"
        }, {
            $title: "Cards",
            $path: "syracuse-ui/lib/tests/list/formatArrayTest",
            $class: "CardsTest"
        }, {
            $title: "Single",
            $path: "syracuse-ui/lib/tests/list/singleListTest",
            $class: "SingleListTest"
        }, {
            $title: "Selection",
            $path: "syracuse-ui/lib/tests/list/formatArrayTest",
            $class: "SelectionListTest"
        }, {
            $title: "Graph",
            $path: "syracuse-ui/lib/tests/list/graphTest",
            $class: "GraphTest"
        }]
    }
};



exports.isUiTestUrl = function($url){
    return $url && ($url.indexOf("s-uitest-") >= 0);
};

exports.openPage = function(httpQuery){
    var key = httpQuery.$urlParts.representationRoot.replace("s-uitest-", "");
    var $testPage = _pages[key];
    var $itemPage = {
        $$container: $("<div/>"),
        $category: "page",
        $isSearchFacetEnabled: false,
        $urlParts: httpQuery.$urlParts,
        $representation: {
            $prototype: {
                $title: $testPage.$title,
                $links: $testPage.$links
            },
            $article: {
                $layout: $testPage.$pages.length == 1 ? {
                    $items: [{
                        $category: "lazy",
                        $path: $testPage.$pages[0].$path,
                        $class: $testPage.$pages[0].$class
                    }]
                } : {
                    $layoutType: "tabs",
                    $items: $testPage.$pages.map(function($page, index){
                        return {
                            $category: "section",
                            $skin: "s-dash-h1",
                            $title: $page.$title,
                            $id: "pageTest-" + key + "-" + index,
                            $layout: {
                                $items: [{
                                    $category: "lazy",
                                    $path: $page.$path,
                                    $class: $page.$class
                                }]
                            }
                        };
                    })
                }
            }
        }
    };
    $itemPage.httpQuery = httpQuery;
    $itemPage.httpQuery.fullUrl = document.location.href;
    document.site.onMainPageChange($itemPage);
};
