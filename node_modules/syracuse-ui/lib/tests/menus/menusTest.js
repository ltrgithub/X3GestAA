"use strict";
var helpers = require("syracuse-core/lib/helpers");
var TestPage = require("syracuse-ui/lib/tests/testPage").TestPage;

function MenusTest() {}

exports.MenusTest = helpers.defineClass(MenusTest, TestPage, {
	defineMenu: function($title, $skin) {
		var $items = Object.keys(this.$prototype.$links).map(function($bind) {
			return {
				$bind: $bind
			};
		});
		Object.keys(this.$prototype.$actions).forEach(function($bind) {
			$items.push({
				$bind: $bind
			});
		});
		this.$item.$layout.$items.push({
			$category: "section",
			$title: $title,
			$layout: {
				$items: [{
					$category: "menus",
					$skin: $skin,
					$layout: {
						$items: $items
					}
				}]
			}
		});
	},
	_initiliazeTestPage: function() {
		var self = this;
		["$links", "$actions", "$linksParameters", "$actionsParameters"].forEach(function($value) {
			var $menus = self.getResources().getActionLinks($value);
			["$links", "$actions"].forEach(function($type) {
				if ($menus[$type]) {
					Object.keys($menus[$type]).forEach(function($bind) {
						self.$prototype[$type][$bind] = $menus[$type][$bind];
					});
				}
			});
		});
		this.$item.$layout = {
			$items: []
		};
		this.defineMenu("s-mn-bar-main", "s-mn-bar-main");
		this.defineMenu("s-mn-bar-toolbar", "s-mn-bar-toolbar");
		this.defineMenu("s-mn-bar-extra", "s-mn-bar-extra");
		this.defineMenu("s-mn-bar-business", "s-mn-bar-business");
		this.defineMenu("s-mn-bar-preferred", "s-mn-bar-preferred");
		this.defineMenu("s-vignette-menus", "s-vignette-menus");
		this.defineMenu("s-vignette-widget-menus", "s-vignette-widget-menus");
		this.defineMenu("s-list-menus (popup)", "s-list-menus");
		this.defineMenu("s-record-menus (popup)", "s-record-menus");
		this.defineMenu("s-field-menus (popup)", "s-field-menus");
		this.defineMenu("s-site-header-menus", "s-site-header-menus");

	}
});