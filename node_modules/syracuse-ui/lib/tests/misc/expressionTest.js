"use strict";
var helpers = require("syracuse-core/lib/helpers");
var TestPage = require("syracuse-ui/lib/tests/testPage").TestPage;

function ExpressionTest() {}

exports.ExpressionTest = helpers.defineClass(ExpressionTest, TestPage, {
	_initiliazeTestPage: function() {
		document.site.deltaManager.applyObjectDelta(this, this.$prototype, {
			"$device": "desktop",
			"$baseUrl": "/sdata/x3/erp/SUPERV",
			"$baseType": "application/json;vnd.sage=syracuse;vnd.sage.syracuse.representation=x3.erp.SUPERV",
			"$prototype": "{$baseUrl}/$prototype('{$representation}.$thumb')",
			"$representation": "AQCPROC03",
			"$instanceUrl": "{$baseUrl}/$workingCopies('{$trackingId}')",
			"$url": "{$baseUrl}/AQCPROC03('{$key}')?representation=AQCPROC03.$edit",
			"$key": "{C03P01}",
			"$value": "{C03P01}",
			"$title": "{@28424}",
			"$type": "{$baseType}.AQCPROC03.$edit",
			"$properties": {
				"C03P01": {
					"$title": "{@28417}",
					"$shortTitle": "{@28425}",
					"$type": "application/x-string",
					"$capabilities": "sort,filter",
					"$maxLength": 10
				},
				"AQCP03COL": {
					"$type": "application/x-array",
					"$maxItems": 4,
					"$title": "{@28080}",
					"$shortTitle": "{@28080}",
					"$item": {
						"$type": "application/json",
						"$instanceUrl": "{$instanceUrl}/COL('{$uuid}')",
						"$properties": {
							"C03P02": {
								"$title": "{@28418}",
								"$shortTitle": "{@28426}",
								"$type": "application/x-integer",
								"$capabilities": "sort,filter",
								"$maxLength": 4
							},
							"C03P03": {
								"$type": "application/x-string",
								"$maxLength": 30,
								"$isExcluded": true
							},
							"C03P03_REF": {
								"$title": "{@28423}",
								"$shortTitle": "{@28427}",
								"$type": "application/x-reference",
								"$capabilities": "sort,filter",
								"$item": {
									"$url": "{$baseUrl}/AQCPROR01('{$key}')?representation=AQCPROR01.$lookup",
									"$value": "{R01P01}",
									"$key": "{R01P01}",
									"$properties": {
										"R01P01": {
											"$type": "application/x-string"
										}
									},
									"R01P01": "{C03P03}",
									"$links": {
										"$lookup": {
											"$title": "{@6109}",
											"$type": "application/json;vnd.sage=syracuse",
											"$url": "{$baseUrl}/AQCPROR01?representation=AQCPROR01.$lookup"
										}
									}
								}
							},
							"DESCRIPTION": {
								"$title": "{@6468}",
								"$shortTitle": "{@6468}",
								"$type": "application/x-string",
								"$capabilities": "sort,filter,localize",
								"$links": {
									"$localize": {
										"$title": "{@mes124_232}",
										"$url": "{$instanceUrl}/DESCRIPTION/$localize"
									}
								},
								"$maxLength": 50
							}
						}
					},
					"$capabilities": "append,insert,delete,reorder"
				}
			},
			"$actions": {
				"$save": {
					"$title": "{@24812}",
					"$style": "main",
					"$isHidden": true,
					"$isRequested": false,
					"$isDisabled": false,
					"$links": {
						"$query": {
							"$title": "{@27982}",
							"$type": "application/json;vnd.sage=syracuse",
							"$url": "{$baseUrl}/AQCPROC03?representation=AQCPROC03.$query"
						},
						"$details": {
							"$title": "{@28123}",
							"$type": "application/json;vnd.sage=syracuse",
							"$url": "{$baseUrl}/AQCPROC03('{C03P01}')?representation=AQCPROC03.$details"
						},
						"$edit": {
							"$title": "{@25313}",
							"$type": "application/json;vnd.sage=syracuse",
							"$method": "POST",
							"$url": "{$baseUrl}/AQCPROC03('{C03P01}')/$workingCopies?representation=AQCPROC03.$edit"
						}
					}
				},
				"$abort": {
					"$title": "{@27972}",
					"$isHidden": true,
					"$isRequested": false,
					"$isDisabled": false,
					"$links": {
						"$query": {
							"$title": "{@27982}",
							"$type": "application/json;vnd.sage=syracuse",
							"$url": "{$baseUrl}/AQCPROC03?representation=AQCPROC03.$query"
						},
						"$details": {
							"$title": "{@28123}",
							"$type": "application/json;vnd.sage=syracuse",
							"$url": "{$baseUrl}/AQCPROC03('{C03P01}')?representation=AQCPROC03.$details"
						}
					}
				}
			},
			"$article": {
				"$menus": {
					"$layout": {
						"$items": [{
							"$bind": "$save",
							"$style": "main"
						}, {
							"$bind": "$abort"
						}]
					}
				},
				"$layout": {
					"$items": [{
						"$title": "{@28027}",
						"$category": "section",
						"$layout": {
							"$items": [{
								"$title": "{@727}",
								"$category": "block",
								"$layout": {
									"$items": [{
										"$bind": "C03P01"
									}, {
										"$bind": "AQCP03COL"
									}]
								}
							}]
						}
					}]
				}
			},
			"$localization": {
				"@0": "",
				"@12331": "Supprimer",
				"@24812": "Enregistrer",
				"@25036": "Résumé",
				"@25313": "Modifier",
				"@27709": "Créer",
				"@27972": "Abandon",
				"@27982": "Lister",
				"@28027": "Section",
				"@28080": "Collection",
				"@28123": "Afficher",
				"@28417": "C01P01",
				"@28418": "C01P02",
				"@28423": "C01P03",
				"@28424": "ZQLFPROC03",
				"@28425": "C03P01",
				"@28426": "C03P02",
				"@28427": "C03P03",
				"@6109": "Sélection",
				"@6468": "Description",
				"@727": "Bloc",
				"@mes124_232": "Traduction"
			}
		}, true);
		this.$item = this.$prototype.$article;
		this.$prototype.$facet = "$edit";
	},
	loadBox: function() {
		TestPage.prototype.loadBox.call(this);
		this.fillPage(this);
	},
	fillPage: function(page) {
		page.applyChange({
			"$trackingId": "7f8af5c3-fb62-47fa-83e3-1e40c731ca24",
			"$baseUrl": "/sdata/x3/erp/SUPERV",
			"$prototype": "{$baseUrl}/$prototype('{$representation}.$thumb')",
			"$representation": "AQCPROC03",
			"$url": "{$baseUrl}/$workingCopies('7f8af5c3-fb62-47fa-83e3-1e40c731ca24')?representation=AQCPROC03.$edit",
			"$type": "application/json;vnd.sage=syracuse",
			"$etag": 1,
			"ETag": 2,
			"$uuid": "08c13c01-37c9-4bdf-8e95-3af42af1ece8",
			"C03P01": "QUNIT_003",
			"AQCP03COL": [{
				"$uuid": "49851d00-462d-45cb-84bd-fc36fa26af09",
				"$index": 0,
				"C03P02": 102,
				"DESCRIPTION": "",
				"C03P03": "R01P01_02",
				"C03P03_REF": {
					"$title": "INTSHO 2",
					"$description": "INTDES 2"
				}
			}],
			"$properties": {
				"C03P01": {
					"$isReadOnly": true
				}
			},
			"$actions": {
				"$save": {
					"$isHidden": false,
					"$isDisabled": false,
					"$links": {
						"$query": {
							"$isHidden": false
						},
						"$details": {
							"$isHidden": false
						},
						"$edit": {
							"$isHidden": false
						}
					}
				},
				"$abort": {
					"$isHidden": false,
					"$isDisabled": false,
					"$links": {
						"$query": {
							"$isHidden": false
						},
						"$details": {
							"$isHidden": false
						}
					}
				}
			}
		});
	},
	applyFieldMetaData: function($bind, value, $field) {

	}
});