"use strict";

exports.dispatcher = function(config) {
	return function(_, request, response) {
		var url = request.url.split('&')[0]; // temp hack to get rid of &format=text appended by client
		response.writeHead(200, {
			"Content-Type": "application/json"
		});
		var d = require("syracuse-trace/lib/dumpGlobals");
		response.end(JSON.stringify(d.dumpGlobals(_, 1, url), null, "\t"));
	};
};