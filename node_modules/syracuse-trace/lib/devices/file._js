"use strict";

var path = require('path');
var helpers = require('syracuse-core/lib/helpers');
var ez = require('ez-streams');
var Console = require('syracuse-trace/lib/devices/console').Console;

// Default implementation for log tracing simply outputs all information directly to the console

exports.File = helpers.defineClass(function(options) {
	this.name = options && options.name;
	this.location = options && options.location;
	this.filename = path.normalize(path.join(this.location, this.name));
	this.type = "file";
}, Console, {
	initialise: function() {
		this.device = ez.devices.file.text.writer(this.filename);
	},
	write: function(_, data) {
		this.device.write(_, data.output + "\n");
	},
	close: function(_, data) {
		this.device.end(data);
	}
});