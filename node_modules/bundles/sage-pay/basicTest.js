require('streamline').register();
var sgex = require('bundles/sage-pay');

var values, defVals = {
		ApplicationID: 'SAGEERPX5X00000ERPLAAA5USEN',
		LanguageID: 'en-US',
		MerchantID: '941457786836',
		MerchantKey: 'F6K7Y7E7C7T7'
	};

// Account Query
values = 'Application.ApplicationID~=~' + defVals.ApplicationID +
	'~,~Application.LanguageID~=~' + defVals.LanguageID +
	'~,~AccountQuery.Merchant.MerchantID~=~' + defVals.MerchantID +
	'~,~AccountQuery.Merchant.MerchantKey~=~' + defVals.MerchantKey;

console.log("HELLO WORLD");

var proxy = { proxy : {
  "host": "ecvmdevprod2",
  "port": "80",
  "excludes": [
    "PO102055",
    "localhost",
    "127.0.0.1"
  ]}};

/*
 * Other proxy examples:
 	PROXY CONF NTLM : 
	{
		"host": "proxysage",
		"port": "8080",
		"auth": "ntlm",
		"user": "a-domain-user",
		"password": "XXXXXX",
		"domain": "YOURDOMAIN",
		"proxyAuthenticator": require('syracuse-httpclient/lib/proxyAuthenticator')
	}

	NO PROXY : 
	{ 
		ignoreProxy : true
	}
 */
 
sgex.seRequest(function(err, result) {
	if (err) throw err;
	console.log('\n\n Account Query Response = ' + result.Response.ResponseIndicator + ' -> ' + result.Response.ResponseMessage);
}, values, 'AccountQueryResponse', proxy);