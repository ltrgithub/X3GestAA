"use strict";

exports.getErrorObjects = function(data) {
	return _getObjects(data, "$severity", "error");
};

function _getObjects(obj, key, value) {
	var objects = [];
	for (var i in obj) {
		if (!obj.hasOwnProperty(i)) continue;
		if (typeof obj[i] == 'object') {
			objects = objects.concat(_getObjects(obj[i], key, value));
		} else if (i === key && obj[i] === value || i === key && value === '') { //
			objects.push(obj);
		} else if (obj[i] === value && key === '') {
			if (objects.lastIndexOf(obj) == -1) {
				objects.push(obj);
			}
		}
	}
	return objects;
}