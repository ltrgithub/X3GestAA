#!/usr/bin/env node

require('npm-shadow')();
require('streamline').register({});
var fs = require('fs');
var path = require('path');
var atCommunication = require('../atCommunication');

var config;
try {
	config = JSON.parse(fs.readFileSync(path.resolve(__dirname, 'config.json')));
} catch(e) {
	throw new Error("Test pt-at error: config.json file not found");
}

var data;
try {
	data = JSON.parse(fs.readFileSync(path.resolve(__dirname, 'data.json')));
} catch(e) {
	throw new Error("Test pt-at error: data.json file not found");
}


atCommunication.sendDT(function(err, res) {
	if (err) throw err;
	console.log("Result: "+JSON.stringify(res,null,2));
	process.exit();
}, config.context, data, config.options);

