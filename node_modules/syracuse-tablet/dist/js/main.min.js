/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */

/*!

 handlebars v2.0.0

Copyright (C) 2011-2014 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

/*
* jQuery Mobile v1.4.5
* http://jquerymobile.com
*
* Copyright 2010, 2014 jQuery Foundation, Inc. and other contributors
* Released under the MIT license.
* http://jquery.org/license
*
*/

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */

define("syracuse-tablet/html/js/ui/uiUtils",["require","exports","module"],function(require,exports,module){var _empty=function(domNode){if(domNode)while(domNode.firstChild)domNode.removeChild(domNode.firstChild)},_toggleClass=function(item,css,show){if(item){var className=item.className;show?className.indexOf(css)<0&&(item.className=className+(" "+css)):item.className=className.replace(css,"")}},_waitDefOpts={className:"waiting-circles",elements:8,radius:30,auto:!0},_waitGlobal=null,_wait=function(waitObject,start){waitObject==null&&(_waitGlobal==null&&(_waitGlobal=_waitWheelCreate($(document.body))),waitObject=_waitGlobal),start?(waitObject.$$bckg.show(),_waitPluginStatus(waitObject.$$wheel,"enable")):(waitObject.$$bckg.hide(),_waitPluginStatus(waitObject.$$wheel,"disable"))},_waitWheelCreate=function($$parent,opts){var waitObject={$$bckg:$('<div class="waiting-background" style="display:none;z-index:2000"></div>'),$$wheel:$('<div class="waiting-wheel"  style="display:none;z-index:2000"></div>')};return waitObject.$$bckg.appendTo($$parent),waitObject.$$wheel.appendTo($$parent),_waitPluginCreate(waitObject.$$wheel,_waitDefOpts),waitObject},_waitPluginDestroy=function($$elmt){$$elmt&&$$elmt.data("waiting")&&($$elmt.waiting("destroy"),$$elmt.remove())},_waitPluginStatus=function($$elmt,status){$$elmt&&$$elmt.data("waiting")&&($$elmt.waiting(status),$$elmt[status==="disable"?"hide":"show"]())},_waitPluginCreate=function($$elmt,opts){if(!opts)throw new Error("opts is mandatory");return $$elmt&&$$elmt.waiting(opts),$$elmt},_waitWheelDestroy=function(waitObject){waitObject&&(_waitPluginDestroy(waitObject.$$wheel),waitObject.$$bckg&&waitObject.$$bckg.remove())},_createDomElement=function(tag,classList,content,attrList,parent){if(!tag)throw new Error("tag parameter is necessary !");var dom=document.createElement(tag);if(classList)if($.isArray(classList))$.each(classList,function(index,className){dom.className+=className+(index==classList.length-1?"":" ")});else{if(typeof classList!="string")throw new Error("classList parameter must be an array or a string");dom.className+=classList}dom.textContent=content?content:"";if(tag==="a"||tag==="img")attrList=attrList||{},attrList.draggable="false";return attrList&&$.each(attrList,function(key,value){dom.setAttribute(key,value)}),parent&&(parent.jquery?parent=parent.append(dom):parent.appendChild(dom)),dom},_appendTextNode=function(e,text){if(!e)return;var t=document.createTextNode(text||"");return e.jquery?e=e.append(t):e.appendChild(t),e},_buildDom=function(domDesc,parent){$.each(domDesc,function(nodeName,value){var dom=_createDomElement(nodeName,value.classList,value.textContent,value.attr,parent);value.children&&$.each(value.children,function(index,childElement){_buildDom(childElement,dom)})})};exports.empty=_empty,exports.toggleClass=_toggleClass,exports.waitWheelStart=function(waitObject){_wait(waitObject,!0)},exports.waitWheelStop=function(waitObject){_wait(waitObject,!1)},exports.waitWheelCreate=_waitWheelCreate,exports.waitWheelDestroy=_waitWheelDestroy,exports.waitPluginDestroy=_waitPluginDestroy,exports.waitPluginCreate=_waitPluginCreate,exports.waitPluginDisable=function($$elmt){_waitPluginStatus($$elmt,"disable")},exports.waitPluginEnable=function($$elmt){_waitPluginStatus($$elmt,"enable")},exports.createDomElement=_createDomElement,exports.buildDom=_buildDom,exports.appendTextNode=_appendTextNode,exports.triggerResizeInternal=function(opts){$(window).triggerHandler("resizeInternal",[opts])},exports.imgHeight2px=function(val){val=val||"small";switch(val){case"xsmall":return 25;case"small":return 50;case"medium":return 100;case"large":return 200;case"xlarge":return 300;default:return 100}}}),define("syracuse-tablet/html/js/helpers/jsutils",["require","exports","module"],function(require,exports,module){function bindFn(fn,context){var args=arguments.length>2?Array.prototype.splice.call(arguments,2):null;return function boundFn(){var callBackArgs=arguments;return args&&args.length>0&&args.forEach(function(a){Array.prototype.push.call(callBackArgs,a)}),fn.apply(context?context:this,callBackArgs)}}window.exports||(window.exports=window);var _purlOptions={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","querystring","anchor"],q:{name:"query",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},_parseURL=function(str){var o=_purlOptions,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){$1&&(uri[o.q.name][$1]=decodeURIComponent($2))}),uri},_urlToString=function(u){if(!u)return"";var url="";u.protocol&&u.host&&(url+=u.protocol+"://"+u.host,u.port.length!=0&&(url+=":"+u.port)),url+=u.path;var query="";for(var p in u.query)query.length!=0&&(query+="&"),query+=p+"="+encodeURIComponent(u.query[p]);return query.length!=0&&(url+="?"+query),u.anchor&&(url+="#"+u.anchor),url},_curUrl,_getCurrentUrl=function(){return _curUrl?_curUrl:(_curUrl=_parseURL(window.location.href),_curUrl)},_getOpenLinkUrl=function(ctx){var url=exports.getCurrentUrl(),file=url.file;return url.file="open_link.html",url.path=url.path.replace(file,url.file),ctx&&(url.query||(url.query={}),url.query.context=JSON.stringify(ctx)),exports.urlToString(url)},_getUrlContext=function(){var context,sessStorage=typeof sessionStorage!="undefined"?sessionStorage:null;sessStorage&&(context=sessStorage.getItem("__urlContext__"),sessStorage.removeItem("__urlContext__"));if(!context){var url=exports.getCurrentUrl();context=url.quey?url.query.context:null;if(!context)return}try{context=JSON.parse(context)}catch(e){context=null}return!context||!$.isPlainObject(context)||$.isEmptyObject(context)?null:!context.endpoint||!context.currentState||!context.applicationName?(globals.getModal()&&globals.getModal().actionResult(_localeModule.text("urlcontext.bad"),_localeModule.text("urlcontext.cantopen")),console.log("Bad url context","Can't open the page",JSON.stringify(context,null,2)),null):context},_setUrlContext=function(){var sessStorage=typeof sessionStorage!="undefined"?sessionStorage:null;sessStorage&&sessStorage.removeItem("__urlContext__");var url=_parseURL(window.location.href);try{var context=url.query&&url.query.context;sessStorage&&context&&context.trim().length>0&&(sessStorage.setItem("__urlContext__",context),delete url.query.context)}catch(e){}var file=url.file;url.file=url.path.indexOf("/dist/")>0?"index.html":"index_debug.html",url.path=url.path.replace(file,url.file),window.location.replace(_urlToString(url))},_isInstanceOf=function(o,name){if(o==null)return!1;var ctor=o.constructor;return ctor&&ctor.$smClasses?ctor.$smClasses.indexOf(name)>-1:!1},_addInheritanceInfo=function(ctor,parent){var classes=[];if(ctor.name){classes.push(ctor.name);if(parent&&parent.$smClasses){var i;for(i=0;i<parent.$smClasses.length;i++)classes.push(parent.$smClasses[i])}}ctor.$smClasses=classes},_isError=function(o){return o&&Error.prototype.toString===o.toString},_isException=function(o){return o&&o.constructor&&o.constructor.name==="DOMException"},_stackRegexp,_cleanStack=function(stack,max,html){if(Array.isArray(stack))return stack;var globals=window.$sm;if(!globals)return stack;!_stackRegexp&&globals&&globals.baseLocation()&&(_stackRegexp={r1:new RegExp(globals.baseLocation().withPath,"g"),r2:new RegExp(globals.baseLocation().requirePath,"g")}),max=max==null?5:max;if(stack){var array=stack.split&&stack.split("\n")||stack,res;array.length>0&&array.forEach(function(l){var pos1=l.lastIndexOf(".js");if(pos1>0){var pos2=l.lastIndexOf("/",pos1);pos1>0&&(res||(res=[]),res.push(l.substring(pos2)))}else res||(res=[]),res.push(l)}),!res&&_stackRegexp?stack=_stackRegexp?stack.replace(_stackRegexp.r1,"").replace(_stackRegexp.r2,""):stack:stack=res.join("\n")}else stack="";return stack=stack.split("\n"),max&&(res=[],stack.forEach(function(l){l.indexOf(".js")>-1?max>0&&(res.push(l),max--):res.push(l)}),stack=res.join(html?"<br>&nbsp&nbsp&nbsp&nbsp&nbsp":"\n")),stack},_convertToDiagnoses=function(title,e){e==null&&(e=title,title=null),e==null&&(e="No error message");if(typeof e=="string")return{$diagnoses:[{$severity:"error",$message:e}]};if(_isError(e)||_isException(e))return{$diagnoses:[{$message:e.message,$stackTrace:_cleanStack(e.stack),$severity:"error"}]};if(e.$diagnoses&&Array.isArray(e.$diagnoses))return e;var res={$diagnoses:[{}]},diag=res.$diagnoses[0];diag.$message=e.message||e.$message||e.$title||title,diag.$severity="error";var detail=e.detail;return detail&&(_isError(detail)?(detail.message&&(diag.$stackTrace=(diag.$stackTrace?diag.$stackTrace+"\n":"")+detail.message),detail.stack&&(diag.$stackTrace=(diag.$stackTrace?diag.$stackTrace+"\n":"")+_cleanStack(detail.stack))):diag.$stackTrace=(diag.$stackTrace?diag.$stackTrace+"\n":"")+JSON.stringify(detail)),res},_getPropByPath=function(object,path,cache){if(path==null||object==null)return null;var pathStr,pathArray;if(Array.isArray(path)){if(path.length===0)return null;pathArray=path,pathStr=pathArray.join(".")}else pathArray=path.split("."),pathStr=path;if(cache&&cache[pathStr]!=null)return cache[pathStr];var data=object[pathArray[0]];for(var i=1;i<pathArray.length;i++){if(data==null)return null;if(!$.isPlainObject(data)==null)throw new Error("_getPropByPath - Unexpected non-plainobject");data=data[pathArray[i]]}return cache&&(cache[pathStr]=data),data};exports.concatArrays=function(){var args=[];for(var i=0;i<arguments.length;i++)arguments[i]!=null&&args.push(arguments[i]);return[].concat.apply([],args)},exports.getPropByPath=_getPropByPath,exports.addInheritanceInfo=_addInheritanceInfo,exports.isInstanceOf=_isInstanceOf,exports.isError=_isError,exports.cleanStack=_cleanStack,exports.convertToDiagnoses=_convertToDiagnoses,exports.bindFn=bindFn,exports.getCurrentUrl=_getCurrentUrl,exports.getOpenLinkUrl=_getOpenLinkUrl,exports.getUrlContext=_getUrlContext,exports.setUrlContext=_setUrlContext,exports.parseURL=_parseURL,exports.urlToString=_urlToString;var _userAgent=navigator.userAgent.toLowerCase();exports.checkBrowser=function(){for(var i=0;i<arguments.length;i++)if(!(new RegExp(arguments[i])).test(_userAgent))return!1;return!0};var _currentBrowser;exports.checkCurrentBrowser=function(name){return _currentBrowser||["chrome","safari","opera","msie","mozilla"].some(function(name){if(exports.checkBrowser(name))return _currentBrowser=name,!0}),name===_currentBrowser}}),define("syracuse-tablet/html/js/helpers/logger",["require","exports","module","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){function _getLogger(module,force){if(force!==!0)return null;var logger=function(){var text,errs;for(var i=0;i<arguments.length;i++)jsutils.isError(arguments[i])?(errs||(errs=[]),errs.push(arguments[i])):(text||(text=["["+module+"]: "]),text.push(arguments[i]));text&&text.length>1&&_log(text.join(" ")),errs&&errs.forEach(function(e){_log("["+module+"]: "+e.message),e.stack&&_log(jsutils.cleanStack(e.stack))})};return logger}var jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_log;window.smNativeLogger&&window.smNativeLogger.log?_log=function(){var args=[];for(var i=0;i<arguments.length;i++)args.push(arguments[i]);window.smNativeLogger.log(args.join(""))}:_log=function(){var text=[];for(var i=0;i<arguments.length;i++){var a=arguments[i];a!=null&&(jsutils.isError(a)?console&&console.log&&console.log(a.message,"\n",jsutils.cleanStack(a.stack)):text.push(a))}console&&console.log&&console.log(text.join(text," "))},window&&(window.logger=_log),exports.log=_log,exports.getLogger=_getLogger}),define("syracuse-tablet/html/js/helpers/uiSettings",["require","exports","module","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_cache={},_getProp=function(path,device,orientation){if(path==null||arguments.length===0)return null;var res=jsutils.getPropByPath(_settings.gen,path,_cache);return res==null?null:(device&&res[device]&&(res=res[device]),orientation&&res[orientation]&&(res=res[orientation]),typeof res=="function"&&(res=res.call(null,device,orientation),_cache[Array.isArray(path)?path.join("."):path]=res),res)},_settings={ios:null,android:null,windows:null,def:{hubLayout:{groupSpacing:55,landscapeMinHeigth:function(){return _getProp("hubGroup.landscapeBaseSize")*4+_getProp("hubGroup.landscapePadY")*5+40}},hubGroup:{landscapeBaseSize:66,landscapePadX:8,landscapePadY:8,portraitPadX:8,portraitPadY:8,portraitWideMinWidth:570},footer:{height:50},header:{height:50},breadcrumbs:{height:25},chartDetailToolbar:{height:40}}};exports.getProp=_getProp,exports.init=function(os){_cache={},_settings.gen=$.extend(!0,{},_settings.def,_settings[os])}}),define("syracuse-tablet/html/js/helpers/globals",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/uiSettings"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("globals"),uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),_metaData,_authoringActive,_emptyCacheCtx={$user:"none",$role:"none",$lang:"none"},_devOpts={showUnfoundFields:!1},_controllersMap={},_globals={tabletApplication:null,userCtx:null,isTestEnvironment:!1,baseLocation:null,isDvlpMode:!1,storage:null,cache:null,modal:null,cacheCtx:$.extend({},_emptyCacheCtx),lookAndFeel:"windows",userProfile:{}},_setUserCtx=function(userCtx){log&&log("Set user context");var ctx=userCtx==null?$.extend({},_emptyCacheCtx):userCtx;return _globals.cache.setContext(ctx),_globals.cacheCtx=ctx,_globals.userCtx=ctx},_setTabletApplication=function(appObj){if(!appObj)throw new Error("Null tabletApplication object");return log&&log("Set tablet Application object"),_globals.tabletApplication=appObj,appObj},_init=function(dvlpMode,storage,cache,utilsModule){_globals.isDvlpMode=dvlpMode;var bl=_globals.baseLocation={};bl.host=window.location.protocol+"//"+window.location.host;var path=window.location.pathname.split("/").splice(0,2).join("/");bl.withPath=bl.host+path,bl.requirePath=bl.host+"/requireJS"+path,bl.htmlRoot=bl.withPath+"/html",bl.url=bl.host+window.location.pathname,utilsModule&&(bl.query=utilsModule.parseQueryString()),_globals.isTestEnvironment=window.location.href.indexOf("/syracuse-tablet/test/index.html")>-1,_globals.storage=storage,_globals.cache=cache};exports.fallbackLocaleCode="en-US",exports.isLoggedIn=function(){return _globals.userCtx!=null&&_globals.userCtx.$user!=="none"},exports.getUserCtx=function(){return _globals.userCtx},exports.getGlobalCtx=function(){return _globals},exports.getStorage=function(){return _globals.storage},exports.getCache=function(){return _globals.cache},exports.getCacheCtx=function(){return _globals.cacheCtx},exports.getEmptyCacheCtx=function(){return _emptyCacheCtx},exports.getEndpoint=function(){var ep=_globals.endpoint;return ep},exports.setEndpoint=function(ep){_globals.endpoint=ep},exports.$config=function(prop){return _globals.tabletApplication.$config(prop)},exports.setUserProfile=function(up){_globals.userProfile=up},exports.getUserProfile=function(){return _globals.userProfile},exports.getUserName=function(){var up=_globals.userProfile;return up&&up.user&&(up.user.firstName?up.user.firstName+" ":"")+up.user.lastName||"unknown"},exports.getUserRole=function(){var up=_globals.userProfile;return up&&up.selectedRole&&up.selectedRole.description||""},exports.getUserPhotoUrl=function(){var up=_globals.userProfile,upPhoto=up&&up.user&&up.user.photo;return upPhoto&&up.user.$shortUrl?up.user.$shortUrl+"/photo":!1},exports.getCurrentPage=function(){return _globals.tabletApplication.currentPage},exports.getScrollingDirection=function(){var p=exports.getCurrentPage();return p.rootLayout&&p.rootLayout.$type==="hub"?p.rootLayout.scrollDirection:"v"},exports.getMainPageGestureMgr=function(){var p=exports.getCurrentPage();return p?p.getGestureMgr():null},exports.setTabletApplication=_setTabletApplication,exports.getApplication=function(){return _globals.tabletApplication},exports.setUserCtx=_setUserCtx,exports.setModal=function(m){_globals.modal=m},exports.getModal=function(){return _globals.modal},exports.baseLocation=function(){return _globals.baseLocation},exports.isDvlpMode=function(){return _globals.isDvlpMode},exports.getDvlpOpt=function(name){return _globals.isDvlpMode&&_devOpts[name]},exports.isTestEnvironment=function(){return _globals.isTestEnvironment},exports.setLookAndFeel=function(lookAndFeel){uiSettings.init(lookAndFeel),_globals.lookAndFeel=lookAndFeel},exports.getLookAndFeel=function(){return _globals.lookAndFeel},exports.getSiteLayout=function(){return _globals.siteLayout},exports.setSiteLayout=function(sl){_globals.siteLayout=sl},exports.isSmartphone=function(){return _globals.siteLayout.getDeviceType()==="smartphone"},exports.isTablet=function(){return _globals.siteLayout.getDeviceType()==="tablet"},exports.setMetaData=function(metaData){_metaData=metaData},exports.getMetaData=function(){return _metaData},exports.addController=function(c){if(!c)return;_controllersMap||(_controllersMap={});if(_controllersMap[c.id])throw new Error("Controller already exists ["+c.id+"]");return _controllersMap[c.id]=c,c},exports.removeController=function(c){if(!c||!_controllersMap)return;return delete _controllersMap[c.id],c},exports.getController=function(id){return!id||!_controllersMap?null:_controllersMap[id]},exports.setAuthoringActive=function(status){_authoringActive=status},exports.isAuthoringActive=function(){return _authoringActive},exports.ROWIDXPROP="~ROWIDX~",exports.SINGLEARRAYPROP="~data~",exports.ACTROWDETAIL="rowDetail",exports.ACTCHARTDETAIL="chartDetail",exports.ACTCARDDESIGN="cardDesign",exports.ACTROWDEL="rowDelete",exports.ACTROWSEL="rowSelect",exports.RECORDCLASS="s-m-record",exports.ACTMULTISEL="multiSelection",exports.PANELACTIONSREGULAR="panelactionregular",exports.PANELPAGESETTINGS="panelpagesetting",exports.PANELUSERSMARTPHONE="panelusersmartphone",exports.PANELFILTERSORT="panelfiltersort",exports.EXCLUDEFIELDS=["CREUSR","CREUSR_REF","UPDUSR","UPDUSR_REF"],exports.CELLDEFCOLOR="darkgrey",exports.TILEDEFCOLOR="darkgrey",exports.CARDARRAYDEFCOLOR="darkgrey",exports.CELLENABLEDCOLOR="green",exports.OFFLINEQUERYCOUNT=30,exports.init=_init,window&&(window.$sm=exports),exports.X3_SEVERITY_TO_BS={info:"success",warning:"warning",error:"error"},exports.isOnline=function(){return navigator.onLine},exports.getBuildTimeStamp=function(){return window.__sageBuildTimestamp?window.__sageBuildTimestamp():"dev mode"};var _globalSettings={};exports.setGlobalSettings=function(settings){_globalSettings=settings},exports.getGlobalSettings=function(){return _globalSettings};var _needToCheckAppsList=!0;exports.needToCheckAppsList=function(){return _needToCheckAppsList},exports.setNeedToCheckAppsList=function(state){_needToCheckAppsList=state}}),define("syracuse-tablet/html/js/helpers/utils",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_localeModule,_forceUseCache=function(){var url=jsutils.getCurrentUrl();return url.query&&url.query.forceUseCache==="true"},_forceDvlpMode=function(){var url=jsutils.getCurrentUrl();return url.query&&url.query.forceDvlpMode==="true"},_addClassMembers=function(klass,members){if(!klass||!members||!klass.prototype)return;var proto=klass.prototype;for(var name in members||{}){var member=members[name];typeof member.get=="function"||typeof member.set=="function"?Object.defineProperty(proto,name,member):proto[name]=member}};exports.init=function(locale){_localeModule=locale};var _defineClass=function(constructor,parent,members){return parent&&(constructor.prototype=Object.create(parent.prototype)),constructor.prototype.constructor=constructor,_addClassMembers(constructor,members),jsutils.addInheritanceInfo(constructor,parent),constructor},_UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})},_getCurISODateTime=function(){var currentdate=new Date,values=[currentdate.getFullYear(),4,currentdate.getMonth()+1,2,currentdate.getDate(),2,currentdate.getHours(),2,currentdate.getMinutes(),2,currentdate.getSeconds(),2],datetime;for(var i=0;i<values.length;i+=2){var val=""+values[i];while(val.length<values[i+1])val="0"+val;datetime?datetime+="-"+val:datetime=val}return datetime},_domIdCpt=0,_domId=function(id){return id.replace(/([^\w-_])/g,"_")},_uidCpt=0,_readableuid=function(){return _domId($.camelCase((arguments.length>0?Array.prototype.join.call(arguments,"-")+"-":"")+_uidCpt++))},_qsParser=/([^&=;]*)=?([^&;]*)/g,_parseQueryString=function(qs){qs=qs||window.location.search;var res={},qs=decodeURIComponent(qs),ii=qs.indexOf("?");return ii>=0&&(qs=qs.substring(ii+1)),qs.replace(_qsParser,function($0,$1,$2){$1&&$1.length>0&&(res[$1]=decodeURIComponent($2))}),res},_htmlEncode=function(value){return $("<div/>").text(value).html()},_htmlDecode=function(value){return $("<div/>").html(value).text()},_exprRegExp=/\{(.*?)\}/g,_execExpression=function(expression,dataset,prototype,searchInParent,level,keepPlaceholder){level=level||0,expression=(expression||"")+"";var prevProp=null,res=expression.replace(_exprRegExp,function(match,prop){var empty=keepPlaceholder?match:"",val=dataset==null?null:dataset.getValue?dataset.getValue(prop,undefined,searchInParent):dataset[prop];return val!=null?val:prototype?prop.smStartsWith("@")?prototype.localization(prop)||"":(val=prototype.data(prop,dataset,null,!0),val!=null&&val.indexOf("{")>=0&&level<4?_execExpression(val,dataset,prototype,searchInParent,level+1,keepPlaceholder):val==null?empty:val):empty});return res||""};exports.isDesktop=function(){var agt=navigator.userAgent,mobile=agt.match(/(iphone|ipod|ipad)/)||agt.match(/(android)/i)||agt.match(/(iemobile)/)||agt.match(/iphone/i)||agt.match(/ipad/i)||agt.match(/ipod/i)||agt.match(/blackberry/i)||agt.match(/bada/i);return!mobile};var _extractCode=function($expression){return $expression+="",$expression.indexOf("{")>=0?$expression.slice(1,$expression.length-1):$expression},_isExpression=function(value){return $.type(value)!=="string"?!1:/^{@.*}$/.test(value)},_sanitizeArticle=function(article){function _walk(value){if(value===null)return;Object.keys(value).some(function(key){key!="$title"&&key!=="$titleOrig"?$.type(value[key])!=="string"&&_walk(value[key]):value[key]!=""&&!_isExpression(value[key])&&delete value[key]})}if(!article)return article;var value=$.extend(!0,{},article);return _walk(value),value},_findParentVignette=function($$target,fail){var app=globals.getApplication();if(app.currentPage&&app.currentPage.isDashboard()){var $$v=$$target.closest(".s-m-control.s-m-vignette"),vignetteId=$$v.attr("id");if(!fail||vignetteId!=null&&vignetteId.length!==0){var vignette=app.currentPage.getControl(vignetteId);if(fail&&!vignette)throw new Error("Vignette not found - id["+vignetteId+"]");return vignette}throw new Error("Vignette DOM elmt not found")}if(fail)throw new Error("Current page is not a dashboard");return null},_findController=function($$elmt){var $$parent=$$elmt.closest("[data-controller-id]");if($$parent&&$$parent.length>0){var id=$$parent.attr("data-controller-id");return globals.getController(id)}return null},_findControl=function($$ctrl){var controller=_findController($$ctrl);return controller?controller.getStructElmt($$ctrl.attr("id")):null},_isEvtDirection=function(evt,dir,forceTrueIfNull){if(evt==null)return forceTrueIfNull===!0;if(evt.angle==null)throw new Error("this is not a hammer.js event");return evt.angle>45&&evt.angle<135||evt.angle<-45&&evt.angle>-135?dir=="v":dir=="h"},_stopClickEvent=function(e){return e.shiftKey!==!0&&e.altKey!==!0},refTime=(new Date).getTime(),_timeLineCfg={ajax:!1,page:!1,pageLoader:!1,cacheUpdate:!1},_TimeLine=_defineClass(function(type,id){this.type=type,this.id=id},null,{log:function(step){var time=(new Date).getTime(),delta=this._prevTime==null?0:time-this._prevTime;this._prevTime=time,console.log(time-refTime,this.type,this.id,step,"elasped="+(time-this._start),"delta="+delta)},start:function(step){this._start=(new Date).getTime(),this.log(step?"start "+step:"start")},step:function(step){this.log(step)},stop:function(step){this.log(step?"stop "+step:"stop")},reset:function(){return this._prevTime=null,this._start=null,this}}),_getTimeLine=function(type,id,forceEnable){try{if(forceEnable===!1)return;if(forceEnable!==!0&&_timeLineCfg[type]!==!0)return null;if(type.indexOf("page")===-1&&id!=null){id+="";var p=id.indexOf("representation=");if(p>=0)id=id.substr(p+15);else{var p=id.indexOf("x3/erp/");if(p>=0)id=id.substr(p+7);else{var p=id.indexOf("collaboration/syracuse/");id=id.substr(p+23)}}id=decodeURIComponent(id)}return new _TimeLine(type,id)}catch(e){console.log(e)}},_hasProp=function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)},_areEqual=function(obj1,obj2,strict){if(strict?obj1===obj2:obj1==obj2)return!0;if(obj1==null||obj2==null)return!1;if(Array.isArray(obj1)&&Array.isArray(obj2)){if(obj1.length!=obj2.length)return!1;for(var i=0;i<obj1.length;i++)if(!_areEqual(obj1[i],obj2[i]))return!1;return!0}if(typeof obj1!="object"||typeof obj2!="object")return!1;var combined=$.extend({},obj1);$.extend(combined,obj2);for(var i in combined)if(_hasProp(combined,i)){var val1=obj1[i],val2=obj2[i];if(!_areEqual(val1,val2))return!1}return!0},_typeNamesByMime={},_regExpMimeToType=/-|\//g;exports.getTypeName=function(mime){var type=_typeNamesByMime[mime];if(!type){var a=mime.split(_regExpMimeToType);type=_typeNamesByMime[mime]=a[a.length-1]}return type};var _authPageProps=["$pageActionSettings","$allowDownload"],_authCopyPageProperties=function(src,dst){if(!src||!dst)return;_authPageProps.forEach(function(p){if(src[p]!=null||dst[p]!=null&&src[p]==null)dst[p]=src[p]})};exports.arrayInt=function(min,max){return Array(max-min+2).join().split(",").map(function(e,i){return min+i})},exports.isPromise=function(o){return o==null?!1:typeof o=="object"&&typeof o.then=="function"&&typeof o.fail=="function"},exports.toPromise=function(o){return exports.isPromise(o)?o:$.smResolve(o)},exports.authCopyPageProperties=_authCopyPageProperties,exports.areEqual=_areEqual,exports.stopClickEvent=_stopClickEvent,exports.isEvtDirection=_isEvtDirection,exports.extractCode=_extractCode,exports.isExpression=_isExpression,exports.sanitizeArticle=_sanitizeArticle,exports.UUID=_UUID,exports.defineClass=_defineClass,exports.addClassMembers=_addClassMembers,exports.readableuid=_readableuid,exports.domId=_domId,exports.parseQueryString=_parseQueryString,exports.htmlEncode=_htmlEncode,exports.htmlDecode=_htmlDecode,exports.getCurISODateTime=_getCurISODateTime,exports.parseExpression=function(expression,dataset,prototype,searchInParent,keepPlaceholder){return _execExpression(expression,dataset,prototype,searchInParent,0,keepPlaceholder)},exports.getArticleLocalization=function(article){if(!article||!article.$localization)return null;var localization=$.extend(!0,{},article.$localization),loc=localization&&localization[_localeModule.getCurrentLocale()];return loc&&localization[globals.fallbackLocaleCode]?loc.$fallback=$.extend(!0,{},localization&&localization[globals.fallbackLocaleCode]):loc||localization&&localization[globals.fallbackLocaleCode]&&(loc=localization&&localization[globals.fallbackLocaleCode]),loc},exports.getCurrentPage=function(){return globals.getCurrentPage()},exports.getNavigatorLanguage=function(def){return navigator.language||navigator.userLanguage||def},exports.sameLanguage=function(l1,l2){return!l1||!l2?!1:(l1=l1.toLowerCase(),l2=l2.toLowerCase(),l2===l1?!0:(l1=l1.split("-"),l2=l2.split("-"),l1[0]===l2[0]))},exports.getPropByPath=jsutils.getPropByPath,exports.findParentVignette=_findParentVignette,exports.findController=_findController,exports.findControl=_findControl,exports.getTimeLine=_getTimeLine,exports.forceUseCache=_forceUseCache,exports.forceDvlpMode=_forceDvlpMode}),define("syracuse-tablet/html/js/ajax/ajaxInterface",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){function _AjaxInterface(){}function _handleHttp401(deferred,result){if(globals.isTestEnvironment()){deferred.reject("Please login before running this testcase");return}var responseJSON=result.responseJSON;if(!responseJSON)try{responseJSON=JSON.parse(result.responseText)}catch(e){}var diag=responseJSON&&responseJSON.$diagnoses&&responseJSON.$diagnoses[0],link=diag&&diag.$links&&diag.$links.$redirect;if(!link){deferred.resolve(result);return}var diag={$message:_locale.text("error.session.timeout"),$severity:"error",$links:{$redirect:link}};responseJSON=responseJSON||{},responseJSON.$diagnoses=[diag],responseJSON.$redirectPage="login",result.responseJSON=responseJSON,deferred.resolve(result)}function _handleHttp0(deferred,result){result.responseJSON={$noConnectionError:!0,$diagnoses:[{$message:(_locale?_locale.text("no.connection"):"No network connection")+" - HttpStatus=0",$severity:"error"}]},deferred.resolve(result)}var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("ajax"),utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),_locale,_httpStatus={200:"Ok",201:"Created",400:"Bad Request",401:"Unauthenticated",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request URI Too Long",415:"Unsupported Media Type",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"},_rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,_ajaxInterfaceClass=utils.defineClass(_AjaxInterface,null,{ajax:function(method,url,send,headers,options){var deferred=$.Deferred();try{method=method?method.toUpperCase():"GET",options=options||{};var doAjax=function(){try{var lang=_locale&&_locale.getCurrentLocale(),allHeaders={Accept:"application/json;vnd.sage=syracuse"};lang&&(allHeaders["Accept-Language"]=lang),headers&&$.extend(allHeaders,headers);var ajaxData={headers:allHeaders,type:method,url:url,timeout:options.timeout==null?0:options.timeout};if(["PUT","POST"].indexOf(method)>=0&&send!=null){ajaxData.contentType=options.contentType||"application/json;charset=utf-8";if(ajaxData.contentType.indexOf("application/json")>=0&&typeof send=="object")try{send=JSON.stringify(send)}catch(e){throw new Error("Error parsing send data\nurl: "+url)}ajaxData.data=send}var timeLine=utils.getTimeLine("ajax",url);timeLine&&timeLine.start("send");var parseJson=allHeaders.Accept.indexOf("application/json")>=0&&options.noJsonParsing!==!0;parseJson&&(ajaxData.dataType="json"),log&&log("'"+method+"':"+url);var ajax=$.ajax_original||$.ajax,promise=ajax(ajaxData);promise.complete(function(jqXHR,textStatus){try{timeLine&&timeLine.step("completed");var status=jqXHR.status!=null?jqXHR.status:textStatus=="success"?200:500,result={textStatus:textStatus,status:status,descrHttpStatus:_httpStatus[status]||"unknown: "+status,isSuccess:status>=200&&status<300||status===304,headers:{}};parseJson?result.responseJSON=jqXHR.responseJSON:result.responseText=jqXHR.responseText;var match,headerStr=jqXHR.getAllResponseHeaders();if(headerStr)while(match=_rheaders.exec(headerStr))result.headers[match[1].toLowerCase()]=match[2];status===0&&options.dontCatchHttp0!==!0&&_handleHttp0(deferred,result),status===401&&options.dontCatchHttp401!==!0?_handleHttp401(deferred,result):deferred.resolve(result)}catch(e){deferred.reject(e)}})}catch(e){deferred.reject(e)}return promise};doAjax()}catch(e){deferred.reject(e)}return deferred.promise()}});exports.AjaxInterfaceClass=_ajaxInterfaceClass,exports.init=function(config,locale){_locale=locale,config=config||{},$.ajaxSetup({timeout:config.timeout==null?2e4:config.timeout,async:!0})}}),define("syracuse-tablet/html/js/ajax/ajax",["require","exports","module","syracuse-tablet/html/js/ajax/ajaxInterface"],function(require,exports,module){var ajaxInterface=require("syracuse-tablet/html/js/ajax/ajaxInterface"),_ajax;exports.getAjax=function(){return _ajax||(_ajax=new ajaxInterface.AjaxInterfaceClass),_ajax},exports.init=function(config,locale){ajaxInterface.init(config,locale)}}),define("syracuse-tablet/html/js/helpers/locale",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ajax/ajax"],function(require,exports,module){function _getResourcesBasePath(){return document.location.href.indexOf("index_debug.html")<0?"/syracuse-tablet/dist/":"/syracuse-tablet/html/"}var globals=require("syracuse-tablet/html/js/helpers/globals"),ajax=require("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,_currentLocale=null,_resources={},_datetimeInformationKey="$datetimeInformation",_decimalInformationKey="$decimalInformation",_upLocalePreferences,_txtRegexp=/\{([\w-]+)\}/g,_localeHashUser="*",_userProfileSettings={},_userLocales={},_text=function(key,args){var resources=_resources&&_resources[_currentLocale];if(!resources)return;var text=resources[key]||"Resource key not found["+key+"]";return args&&(Array.isArray(args)||(args=Array.prototype.slice.call(arguments,1)),text=text.replace(_txtRegexp,function(match,p1){var idx=+p1;return idx>=0&&idx<args.length?args[idx]:"?"})),text},_textNoFail=function(key,args){var resources=_resources&&_resources[_currentLocale];if(!resources||!resources[key])return null;var text=resources[key];return args&&(Array.isArray(args)||(args=Array.prototype.slice.call(arguments,1)),text=text.replace(_txtRegexp,function(match,p1){var idx=+p1;return idx>=0&&idx<args.length?args[idx]:"?"})),text},_textOpt=function(key){var resources=_resources&&_resources[_currentLocale];if(!resources)return;return resources[key]},_getDatetimeInfo=function(){var resources=_resources&&_resources[_currentLocale];if(!resources)return;return resources[_datetimeInformationKey]},_getDecimalInfo=function(){var resources=_resources&&_resources[_currentLocale];if(!resources)return;return resources[_decimalInformationKey]},_setLocale=function(locale,upLocalePreferences){var deferred=new $.Deferred;_upLocalePreferences=upLocalePreferences;var ctx=globals.getUserCtx();_localeHashUser=ctx&&ctx.$user||"*",_userProfileSettings=_userLocales[locale]||{};var resources=_resources&&_resources[locale];return resources?(_currentLocale=locale,deferred.resolve()):locale===_currentLocale?deferred.resolve():_loadFile(_getResourcesBasePath()+"js/resources","strings",locale,"en").then(function(data){_currentLocale=locale,_resources[locale]=data}).then(function(){return _loadFile(_getResourcesBasePath()+"js/resources/locales","date",locale,"en-GB")}).then(function(data){_resources[locale][_datetimeInformationKey]=data}).then(function(){return _loadFile(_getResourcesBasePath()+"js/resources/locales","decimal",locale,"en-GB")}).then(function(data){_resources[locale][_decimalInformationKey]=data}).then(function(){deferred.resolve()}).fail(function(e){deferred.resolve()}),deferred.promise()},_loadFile=function(path,file,locale,defLocale){function _load(){if(segs.length===0){var url=path+"/"+file+"-"+defLocale+".json";ajax("GET",url,null,null).then(function(data){data&&data.responseJSON&&deferred.resolve(data.responseJSON),deferred.resolve({})}).fail(function(e){deferred.reject(e)})}else{var code=segs.join("-"),url=path+"/"+file+"-"+code+".json";ajax("GET",url,null,null).then(function(data){if(data&&data.responseJSON){if(code!==defLocale){url=path+"/"+file+"-"+defLocale+".json",ajax("GET",url,null,null).then(function(dataEn){if(dataEn&&dataEn.responseJSON){var mergedStrings=$.extend(!0,{},dataEn.responseJSON,data.responseJSON);deferred.resolve(mergedStrings)}else deferred.resolve(data.responseJSON)}).fail(function(e){deferred.resolve(data.responseJSON)});return}deferred.resolve(data.responseJSON)}else segs.pop(),_load()}).fail(function(e){segs.pop(),_load()})}}var deferred=new $.Deferred,segs=locale.split("-"),loadedLocale;return _load(),deferred.promise()},_isCurrent=function(locale,strict){return!locale||!_currentLocale?!1:_currentLocale===locale?!0:strict?!1:locale.split("-")[0]===_currentLocale};exports.getDateFormat=function(){var di=_getDatetimeInfo();return _userProfileSettings.shortDate||di&&di.formatPatterns&&di.formatPatterns.shortDate||"dd/MM/yyyy"},exports.getDateTimeFormat=function(){var di=_getDatetimeInfo(),date=_userProfileSettings.shortDate||di&&di.formatPatterns&&di.formatPatterns.shortDate||"dd/MM/yyyy",time=_userProfileSettings.shortTime||di&&di.formatPatterns&&di.formatPatterns.shortTime||"HH:mm:ss";return date+" "+time},exports.getTimeFormat=function(){var di=_getDatetimeInfo();return _userProfileSettings.longTime||di&&di.formatPatterns&&di.formatPatterns.longTime||"HH:mm:ss"},exports.getTimeFormatShort=function(){var di=_getDatetimeInfo();return _userProfileSettings.shortTime||di&&di.formatPatterns&&di.formatPatterns.shortTime||"HH:mm"},exports.getNumberFormat=function(type){return type==="application/x-integer"?"#,##0":"#,##0.##"},exports.getNumberGroupSeparator=function(){var di=_getDecimalInfo(),gs=_userProfileSettings.numberGroupSeparator||di&&di.numberGroupSeparator||",";return gs},exports.getNumberDecimalSeparator=function(){var di=_getDecimalInfo(),ds=_userProfileSettings.numberDecimalSeparator||di&&di.numberDecimalSeparator||".";return ds},exports.setLocale=_setLocale,exports.text=_text,exports.textNoFail=_textNoFail,exports.textOpt=_textOpt,exports.isCurrent=_isCurrent,exports.getDatetimeInfo=_getDatetimeInfo,exports.getCurrentLocale=function(){return _currentLocale},exports.getCurrentLocaleHash=function(){return _currentLocale+"#"+_localeHashUser},exports.setUserLocales=function(locales){_userLocales={},locales&&locales.forEach(function(locale){_userLocales[locale.code]={shortDate:locale.shortDate,shortTime:locale.shortTime,longTime:locale.longTime,numberDecimalSeparator:locale.numberDecimalSeparator,numberGroupSeparator:locale.numberGroupSeparator}})},exports.getProductLabels=function(){var data={};return data.brand=exports.text("global.label.brand"),data.product=exports.text("global.label.product"),data}}),define("syracuse-tablet/html/js/helpers/native/test/nativeTestShare",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativeShare"),globals=require("syracuse-tablet/html/js/helpers/globals"),_mailTo=' <a id ="testNativeShareMailto" href="mailto:?subject={{subject}}&body={{body}}" class="s-m-link">					<i class="fa fa-envelope">					</i>					<span>{{title}}</span>					</a>',_handleLink=' <a id ="testNativeShareHandleLink" href="#" class="s-m-link">					<i class="fa fa-hand-pointer-o">					</i>					<span>{{title}}</span>					</a>',_getMailto=function(ctx){return Handlebars.compile(_mailTo)(ctx)},_getHandleLink=function(ctx){return Handlebars.compile(_handleLink)(ctx)},_TestNativeWrapper=function(){this.supportsShare=function(){return!0},this.sharePageLink=function(data){var parsedData=data?JSON.parse(data):null;if(!parsedData)return;var $$parent=$(".s-m-footer-left");$(_getMailto({title:"Send email",subject:encodeURIComponent(parsedData.DeepLink.Title),body:encodeURIComponent(parsedData.DeepLink.Url)})).appendTo($$parent),$(_getHandleLink({title:"HandleLink"})).appendTo($$parent).click(function(){setTimeout(function(){globals.getApplication().gotoWelcomeApplication().then(function(){setTimeout(function(){window.smShareJS.handleLink(parsedData.DeepLink)})})})}),setTimeout(function(){$("#testNativeShareMailto").off().remove(),$("#testNativeShareHandleLink").off().remove()},5e3);if(!window.smShareJS)return;setTimeout(function(){window.smShareJS.shareFinished({action:"ok"})})}};exports.create=function(){return new _TestNativeWrapper}}),define("syracuse-tablet/html/js/helpers/native/nativeHelpers",["require","exports","module","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals");exports.callAppNativeInterface=function(moduleName,actionName){var app=globals.getApplication();return app?app.nativeWrapperJSInterface.apply(app,arguments):null}}),define("syracuse-tablet/html/js/helpers/native/nativeShare",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/native/test/nativeTestShare","syracuse-tablet/html/js/helpers/native/nativeHelpers"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativeShare"),utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),nativeTestShare=require("syracuse-tablet/html/js/helpers/native/test/nativeTestShare"),nativeHelpers=require("syracuse-tablet/html/js/helpers/native/nativeHelpers"),_currentShareDeferred;window.smShareJS||(window.smShareJS={shareFinished:function(data){if(_currentShareDeferred){var def=_currentShareDeferred;_currentShareDeferred=null,log&&log("Got share: "+JSON.stringify(data||{})),def.resolve(data)}},handleLink:function(data){log&&log("handleLink!"),log&&log("handleLink: "+JSON.stringify(data,null,2));if(!data||!data.Url)return;try{var url=jsutils.parseURL(data.Url);log&&log("url: "+JSON.stringify(url,null,2));if(!url||!url.query||!url.query.context)return;var context=JSON.parse(decodeURIComponent(url.query.context));log&&log("context: "+JSON.stringify(context,null,2)),nativeHelpers.callAppNativeInterface("share","handleLink",context)}catch(e){log&&log("handleLink: failed",e);return}}}),exports.supports=function(capability,testMode){if(capability==="share"){var supported=testMode||window&&window.smShare&&window.smShare.supportsShare&&window.smShare.supportsShare();return log&&log("Share support: "+supported),supported}return!1},exports.sharePageLink=function(options){var param={Title:options.pageData.Title,Description:options.pageData.Description,DeepLink:options.pageData.DeepLink},data=JSON.stringify(param);return log&&log("sharePageLink: ",data),window&&window.smShare&&window.smShare.sharePageLink?(_currentShareDeferred=$.Deferred(),window.smShare.sharePageLink(data),_currentShareDeferred.promise()):$.smResolve(null)},exports.init=function(testMode){if(window&&window.smShare)return;if(!testMode)return;log&&log("Creating native share test wrapper"),window.smShare=nativeTestShare.create()}}),define("syracuse-tablet/html/js/helpers/native/test/nativeTestLiveTile",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativeLiveTile"),globals=require("syracuse-tablet/html/js/helpers/globals"),_result=' <a id ="testNativeLiveTile" href="#" class="s-m-link">	<i class="fa fa-thumbs-o-{{#if ok}}up{{else}}down{{/if}}">	</i>	<span>{{title}}</span>	</a>',_showResult=function(ok,title){var $$result=$(Handlebars.compile(_result)({ok:ok,title:title})).appendTo($(".s-m-footer-left"));setTimeout(function(){$$result.remove()},3e3)},_liveTiles={},_TestNativeWrapper=function(){this.supportsLiveTile=function(){return!0},this.addLiveTile=function(options){if(!options)return;try{options=JSON.parse(options)}catch(e){return}var id=options.Id,title=options.Title;_liveTiles[id]=$.extend(!0,{},options),setTimeout(function(){log&&log("LIVE TILE ADD - Succeeded - "+title),_showResult(!0,"addLiveTile"),window.smLiveTileJS.addLiveTileFinished(null)},100)},this.getLiveTile=function(data){if(!data)return;try{data=JSON.parse(data)}catch(e){return}var liveTile=_liveTiles[data.Id];setTimeout(function(){log&&log("LIVE TILE GET "+(liveTile?"OK":"KO")+" - "+data.Id),window.smLiveTileJS.getLiveTileFinished({exists:liveTile!=null})},100)},this.removeLiveTile=function(data){if(!data)return;try{data=JSON.parse(data)}catch(e){return}var exist=_liveTiles[data.Id]?!0:!1;exist&&delete _liveTiles[data.Id],setTimeout(function(){log&&log("LIVE TILE REMOVE "+(exist?"Exist":"No exists")+" - "+data.Id),window.smLiveTileJS.removeLiveTileFinished(null)},100)}};exports.create=function(){return new _TestNativeWrapper}}),define("syracuse-tablet/html/js/helpers/native/nativeLiveTile",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/native/test/nativeTestLiveTile"],function(require,exports,module){function _getTileDataStruct(options){var param={Id:options.id,Title:options.Title,Description:options.Description,SdataUrl:options.sDataUrl,DeepLink:options.DeepLink};return param}function _getTileDataStruct(options){var param={Id:options.id,Title:options.Title,Description:options.Description,SdataUrl:options.sDataUrl,DeepLink:options.DeepLink};return param}var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativeLiveTile"),nativeTestLiveTile=require("syracuse-tablet/html/js/helpers/native/test/nativeTestLiveTile"),_currentDeferred;window.smLiveTileJS||(window.smLiveTileJS={addLiveTileFinished:function(data){if(_currentDeferred){var def=_currentDeferred;_currentDeferred=null,log&&log("Command live tile add finished: "+JSON.stringify(data||{})),def.resolve(data)}},getLiveTileFinished:function(data){if(_currentDeferred){var def=_currentDeferred;_currentDeferred=null,log&&log("Command live tile get finished: "+JSON.stringify(data||{})),def.resolve(data&&data.exists)}},removeLiveTileFinished:function(data){if(_currentDeferred){var def=_currentDeferred;_currentDeferred=null,log&&log("Command live tile remove finished: "+JSON.stringify(data||{})),def.resolve()}}}),exports.supports=function(capability,testMode){if(capability==="liveTile"){var supported=testMode||window&&window.smLiveTile&&window.smLiveTile.supportsLiveTile&&window.smLiveTile.supportsLiveTile()||!1;return log&&log("Live tile : "+supported),supported}return!1},exports.addLiveTile=function(options){if(window&&window.smLiveTile&&window.smLiveTile.addLiveTile){_currentDeferred=$.Deferred(),log&&log("addLiveTile:"+JSON.stringify(options));var data=JSON.stringify(_getTileDataStruct(options));return window.smLiveTile.addLiveTile(data),_currentDeferred.promise()}return $.smResolve()},exports.getLiveTile=function(id){if(window&&window.smLiveTile&&window.smLiveTile.getLiveTile){_currentDeferred=$.Deferred();var data=JSON.stringify(_getTileDataStruct({id:id}));return window.smLiveTile.getLiveTile(data),_currentDeferred.promise()}return $.smResolve()},exports.removeLiveTile=function(id){if(window&&window.smLiveTile&&window.smLiveTile.removeLiveTile){_currentDeferred=$.Deferred();var data=JSON.stringify(_getTileDataStruct({id:id}));return window.smLiveTile.removeLiveTile(data),_currentDeferred.promise()}return $.smResolve()},exports.init=function(testMode){if(window&&window.smLiveTile)return;if(!testMode)return;log&&log("Creating native Live Tile test wrapper"),window.smLiveTile=nativeTestLiveTile.create()}}),define("syracuse-tablet/html/js/helpers/native/nativeMessages",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativeMsg"),_currentDeferred;window.smMsgJS||(window.smMsgJS={listScheduledMsgsFinished:function(data){if(_currentDeferred){var def=_currentDeferred;_currentDeferred=null,log&&log("scheduled msgs listed: "+JSON.stringify(data||{})),def.resolve(data)}}}),exports.supports=function(capability,testMode){return capability==="toastMessages"?window&&window.smNativeMsg&&window.smNativeMsg.toastMsg:capability==="scheduleMessage"?testMode||window&&window.smNativeMsg&&window.smNativeMsg.scheduledMsg:!1},exports.showToastMessage=function(options){var data=JSON.stringify(options);window&&window.smNativeMsg&&window.smNativeMsg.toastMsg&&window.smNativeMsg.toastMsg(data)},exports.scheduledMsg=function(options){var data=JSON.stringify(options);window&&window.smNativeMsg&&window.smNativeMsg.scheduledMsg&&window.smNativeMsg.scheduledMsg(data)},exports.listScheduledMsgs=function(options){if(window&&window.smNativeMsg&&window.smNativeMsg.scheduledMsg){var data=JSON.stringify(options);return _currentDeferred=$.Deferred(),window.smNativeMsg.scheduledMsg(data),_currentDeferred.promise()}return $.smResolve()}}),define("syracuse-tablet/html/js/helpers/native/test/nativeTestPenInput",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativePenInput"),globals=require("syracuse-tablet/html/js/helpers/globals"),_TestNativeWrapper=function(){this.supportsPenInput=function(){return!0},this.getPenTextInput=function(){setTimeout(function(){log&&log("Pen Input GET "),window.smPenInputJS.penInputTextFinished({Action:"ok",Matches:["Pencil input..."]})},100)},this.getAnnotatedImage=function(options){var img="";setTimeout(function(){var data={Action:"ok",ImageData:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAAGklEQVR42mOYacxANmIY1TyqeVTzqOaB1QwApdw+0KHEWp0AAAAASUVORK5CYII="};log&&log("Annotated Image GET "),window.smPenInputJS.penAnnotateImageFinished(data)},100)},this.getSignatureImage=function(options){var img="";setTimeout(function(){var data={Action:"ok",ImageData:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAAGklEQVR42mOYacxANmIY1TyqeVTzqOaB1QwApdw+0KHEWp0AAAAASUVORK5CYII="};log&&log("Signature Image GET "),window.smPenInputJS.penSignatureImageFinished(data)},100)}};exports.create=function(){return new _TestNativeWrapper}}),define("syracuse-tablet/html/js/helpers/native/nativePenInput",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/native/test/nativeTestPenInput"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativePenInput",!1),nativeTestPenInput=require("syracuse-tablet/html/js/helpers/native/test/nativeTestPenInput"),_currentInputDeferred;window.smPenInputJS||(window.smPenInputJS={penInputTextFinished:function(data){if(_currentInputDeferred){var def=_currentInputDeferred;_currentInputDeferred=null,log&&log("Got pen input: "+JSON.stringify(data||{})),def.resolve({action:data.Action,matches:data.Matches})}},penAnnotateImageFinished:function(data){if(_currentInputDeferred){var def=_currentInputDeferred;_currentInputDeferred=null,def.resolve({action:data.Action,imageData:data.ImageData})}},penSignatureImageFinished:function(data){if(_currentInputDeferred){var def=_currentInputDeferred;_currentInputDeferred=null,def.resolve({action:data.Action,imageData:data.ImageData})}}}),exports.supports=function(capability){log&&log("Pen check support: "+capability);if(capability==="penTextInput"){var supported=window&&window.smPenInput&&window.smPenInput.getPenTextInput?!0:!1;return log&&log("Pen input support: "+supported),supported}if(capability==="penAnnotatedImage"){var supported=window&&window.smPenInput&&window.smPenInput.getAnnotatedImage?!0:!1;return log&&log("Pen annotate image support: "+supported),supported}if(capability==="penSignatureImage"){var supported=window&&window.smPenInput&&window.smPenInput.getSignatureImage?!0:!1;return log&&log("Pen signature image support: "+supported),supported}return!1},exports.getPenTextInput=function(options){options&&options.value!=null&&(options.value=""+options.value);var data=JSON.stringify({Title:options.title,Value:options.value});return window&&window.smPenInput&&window.smPenInput.getPenTextInput?(_currentInputDeferred=$.Deferred(),window.smPenInput.getPenTextInput(data),_currentInputDeferred.promise()):$.smResolve(null)},exports.getAnnotatedImage=function(options){var data=JSON.stringify({Title:options.title,ImageData:options.imageData});return log&&log("Send image: "+options.imageData.length+" bytes (base64)"),window&&window.smPenInput&&window.smPenInput.getAnnotatedImage?(_currentInputDeferred=$.Deferred(),window.smPenInput.getAnnotatedImage(data),_currentInputDeferred.promise()):$.smResolve(null)},exports.getSignatureImage=function(options){var data=JSON.stringify({Title:options.title,Watermark:options.watermark!=null?""+options.watermark:"",MaxWidth:options.maxWidth!=null?+options.maxWidth:640,MaxHeight:options.maxHeight!=null?+options.maxHeight:480,WatermarkSize:options.watermarkSize!=null?+options.watermarkSize:16});return log&&log("Get signature: "+data),window&&window.smPenInput&&window.smPenInput.getSignatureImage?(_currentInputDeferred=$.Deferred(),window.smPenInput.getSignatureImage(data),_currentInputDeferred.promise()):$.smResolve(null)},exports.init=function(testMode){if(window&&window.smPenInput)return;if(!testMode)return;log&&log("Creating native Pen Input test wrapper"),window.smPenInput=nativeTestPenInput.create()}}),define("syracuse-tablet/html/js/helpers/notifications",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("notifs"),globals=require("syracuse-tablet/html/js/helpers/globals"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_nameSpace="sm",_subscriptions={},_callCheck=function(object){return jsutils.isInstanceOf(object,"Page")&&!object.isActive()?!1:jsutils.isInstanceOf(object,"StructElmt")&&(object.controller==null||!object.controller.isActive())?!1:!0},_callHandler=function(callBack,object,args){if(!_callCheck(object))return;return setTimeout(function(){callBack.apply(object,args)},0)},_callHandlerSynch=function(callBack,object,args){if(!_callCheck(object))return;callBack.apply(object,args)},_publish=function(events){if(!events)throw new Error("No topic to publish");var events=typeof events=="string"?[events]:events;log&&log("Publish "+events.join(" - "));var args,subscription,subscription,res,count=0,array,objArgs,args=arguments,synch,callHandler;events.forEach(function(evt){synch=evt.smStartsWith("synch."),synch?(evt=evt.split("synch.")[1],callHandler=_callHandlerSynch):callHandler=_callHandler,array=_subscriptions[evt];if(array){array=array.slice();for(var i=0,l=array.length;i<l;i++)subscription=array[i],subscription.object?(objArgs||(objArgs=Array.prototype.slice.call(args,1)),res=callHandler(subscription.callBack,subscription.object,objArgs)):(args[0]=evt,res=callHandler(subscription.callBack,null,args)),count++}})},_publishEx=function(events,opts){if(!events)throw new Error("No topic to publish");var events=typeof events=="string"?[events]:events;log&&log("Publish "+events.join(" - "));var args,subscription,subscription,res,count=0,array,exclude=opts&&opts.exclude||[],objArgs,args=arguments,synch,callHandler;events.forEach(function(evt){synch=evt.smStartsWith("synch."),synch?(evt=evt.split("synch.")[1],callHandler=_callHandlerSynch):callHandler=_callHandler,array=_subscriptions[evt];if(array){array=array.slice();for(var i=0,l=array.length;i<l;i++)subscription=array[i],subscription.object?(!exclude||exclude.indexOf(subscription.object))<0&&(objArgs||(objArgs=Array.prototype.slice.call(args,2)),res=callHandler(subscription.callBack,subscription.object,objArgs)):(args[0]=evt,res=callHandler(subscription.callBack,null,args)),count++}})},_subscribe=function(object,events,priority){if(!events)throw new Error("Notification - No topic to publish");if(!object)throw new Error("Notification - Null object");priority=priority||10;var events=typeof events=="string"?[events]:events;log&&log("Subscribe "+events.join(" - ")+" - priority="+priority);var objectArray,removeIdx;events.forEach(function(evt){var callBackFct,callBackObj;if(typeof object=="function")callBackFct=object,callBackObj=null;else{callBackObj=object;var methodName=evt.split(".");if(methodName[0]!=_nameSpace)throw new Error("Notification - Bad event domain name");methodName=$.camelCase("notif-"+methodName.splice(1).join("-")),callBackFct=object[methodName];if(!callBackFct)throw new Error("Notification - Object must implement "+methodName)}var added=!1;objectArray=_subscriptions[evt];if(!objectArray)objectArray=_subscriptions[evt]=[];else{var removeIdx=-1;objectArray.some(function(o,idx){if(o&&(o.object===object||o.callBack===object))return removeIdx=idx,!0}),removeIdx>=0&&objectArray.splice(removeIdx,1)}var subscriptionInfo={callBack:callBackFct,object:callBackObj,priority:priority};for(var i=objectArray.length-1;i>=0;i--)if(objectArray[i].priority<=priority){objectArray.splice(i+1,0,subscriptionInfo),added=!0;break}added||objectArray.unshift(subscriptionInfo)})},_unsubscribe=function(object,events){events?typeof events=="string"&&(events=[events]):events=Object.keys(_subscriptions);var propToCheck=typeof object=="function"?"callBack":"object";events.forEach(function(evt){var array=_subscriptions[evt];if(array){var lg=array.length;for(var i=0,l=lg;i<l;i++)if(object==null||array[i][propToCheck]===object)array.splice(i,1),i--,l--}})},_reset=function(object,events){log&&log("Reset"),_unsubscribe(null,null)},_check=function(object){var res={};res.total=0;var propToCheck=typeof object=="function"?"callBack":"object";return Object.keys(_subscriptions).forEach(function(key){res.total+=_subscriptions[key].length;if(object==null)res[key]=_subscriptions[key].length;else{res[key]=0;var arr=_subscriptions[key];for(var i=0,l=arr.length;i<l;i++)arr[i][propToCheck]===object&&(res[key]=res[key]+1)}}),res},_notifyController=function(event,page){if(!event)throw new Error("_notifyController - Unexpected empty event");if(typeof event!="string")throw new Error("_notifyController - string event expected");log&&log("notifyController "+event);var args;page!==null?args=Array.prototype.slice.call(arguments,2):(page=globals.getCurrentPage(),args=Array.prototype.slice.call(arguments,1));if(!page)throw new Error("_notifyController - Unexpected null page");var synch=event.smStartsWith("synch."),callHandler;synch?(event=event.split("synch.")[1],callHandler=_callHandlerSynch):callHandler=_callHandler;var array=_subscriptions[event];if(array){for(var i=0,l=array.length;i<l;i++)if(array[i].object===page)return callHandler(array[i].callBack,page,args)}else console.log("_notifyController - No sunsciption for event "+event)};exports.check=_check,exports.reset=_reset,exports.subscribe=_subscribe,exports.unsubscribe=_unsubscribe,exports.publish=_publish,exports.publishEx=_publishEx,exports.notifyController=_notifyController}),define("syracuse-tablet/html/js/helpers/native/test/nativeTestVoiceCommands",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/utils"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativeVoice"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),utils=require("syracuse-tablet/html/js/helpers/utils"),_micCss={color:"#41a940","float":"right","padding-left":"8px","font-size":".7em",top:"8px",position:"relative"},_phraseListHtml='	<div id="phraseListId" title="Test voice commands">		<div class="dropdown">	  		<span class="dropdown-toggle fa fa-microphone" data-toggle="dropdown" aria-expanded="true">	  		</span>	  		<ul class="dropdown-menu dropdown-menu-left" role="menu">				{{#each list}}					<li><a style="" draggable="false" href="#">{{title}}</a></li>				{{/each}}			</ul>		</div>	</div>',_getPhraseListMenu=function(ctx){return Handlebars.compile(_phraseListHtml)(ctx)},_TestNativeWrapper=function(){this.notifHistoryPush=function(){this.updateTestMenu()},this.updateTestMenu=function(){$("#phraseListId").off().remove();if(!this.phraseList)return;$(_getPhraseListMenu({list:this.phraseList})).css(_micCss).prependTo($(".s-m-header-nav")),$("#phraseListId li").click(jsutils.bindFn(this.onClickPhrase,this))},this.onClickPhrase=function(event){var $$t=$(event.target),text=$$t.text();if(!text||text.trim().length===0)return;setTimeout(function(){window.smVoiceJS.executeVoiceCommand({command:"openBookmark",text:text})})},this.phraseList=null,this.setPhraseList=function(data){data=data?JSON.parse(data):null,this.phraseList=null;if(data&&data.phraseList&&data.phraseList.length>0){var self=this;this.phraseList=[],data.phraseList.forEach(function(item){self.phraseList.push({title:item})})}this.updateTestMenu()},notifications.subscribe(this,["sm.history.push"])};exports.create=function(){var url=jsutils.getCurrentUrl();if(window.smVoiceJS&&url.query&&url.query.voiceCommand)try{window.smVoiceJS.executeVoiceCommand({command:"openBookmark",text:url.query.voiceCommand})}catch(e){}return new _TestNativeWrapper}}),define("syracuse-tablet/html/js/helpers/native/nativeVoiceCommands",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/native/test/nativeTestVoiceCommands","syracuse-tablet/html/js/helpers/native/nativeHelpers","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativeVoice"),locale=require("syracuse-tablet/html/js/helpers/locale"),nativeTestVoiceCommands=require("syracuse-tablet/html/js/helpers/native/test/nativeTestVoiceCommands"),nativeHelpers=require("syracuse-tablet/html/js/helpers/native/nativeHelpers"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_VoiceCommandsMgr=function(bookmarks){this.isReady=!1,this.init=function(mobileCommands){notifications.subscribe(this,["sm.application.ready"]),this.availableCommands=[];if(!mobileCommands||mobileCommands.length===0)return!1;var self=this,ok=!1;return mobileCommands.forEach(function(b){ok=self.add(b)||ok}),ok},this.add=function(mobileCommand){return!mobileCommand||!mobileCommand.title?!1:this.getAvailableCommand(mobileCommand.title)?(log&&log("add voice command - Command already exists '"+mobileCommand.title+"'"),!1):(log&&log("add voice command - '"+mobileCommand.title+"'"),this.availableCommands.unshift(mobileCommand),!0)},this.remove=function(title){if(!title)return!1;var idx;return this.availableCommands.some(function(b,i){if(b.title===title)return idx=i,!0})?(this.availableCommands.splice(idx,1),log&&log("remove voice command - '"+title+"'"),!0):!1},this.getAvailableCommand=function(keyWord){var mobileCommand=null,self=this;return this.availableCommands.some(function(b,i){if(b.title===keyWord)return mobileCommand=self.availableCommands[i],!0}),mobileCommand},this.executeOperation=function(operation){if(!operation||!window||!window.smNativeVoice||!window.smNativeVoice.setPhraseList)return;var refresh=!1;switch(operation){case"set":refresh=this.init(arguments[1]);break;case"add":refresh=this.add(arguments[1]);break;case"remove":refresh=this.remove(arguments[1]);break;default:return}if(refresh){var phraseList=[];this.availableCommands.forEach(function(b){phraseList.push(b.title)});var data=JSON.stringify({phrase:"bookmark",phraseList:phraseList,language:locale.getCurrentLocale().toLowerCase()})}data&&(log&&log("Update voiceCommands: "+JSON.stringify(data,null,2)),window.smNativeVoice.setPhraseList(data))},this.notifApplicationReady=function(){this.isReady=!0;var cmd=this.getPendingCommand("openBookmark");cmd&&(log&&log("Execute pending command - '"+cmd.title+"'"),this.executeVoiceCommand(cmd)),this.pendingCommands=null},this.executeVoiceCommand=function(data){if(this.isReady){if(!data||!data.command||!data.text)return;var cmd=this.getAvailableCommand(data.text);if(!cmd||data.command!==cmd.type)return;log&&log("Execute voice command - '"+cmd.title+"'"),nativeHelpers.callAppNativeInterface("voiceCommands","executeVoiceCommand",cmd);return}this.pendingCommands||(this.pendingCommands=[]),log&&log("Stores pending voice command - '"+data.text+"'"),this.pendingCommands.push(data)},this.getPendingCommand=function(type){if(!this.pendingCommands)return null;var bmk=null;return this.pendingCommands.some(function(cmd){if(!cmd||cmd.command!==type)return;return bmk=cmd,!0}),bmk},this.hasPendingCommand=function(type){return this.getPendingCommand(type)!=null},this.init()},_voiceCommandsManager=new _VoiceCommandsMgr;window.smVoiceJS||(window.smVoiceJS={executeVoiceCommand:function(data){if(!_voiceCommandsManager)return;_voiceCommandsManager.executeVoiceCommand(data)}}),exports.supports=function(capability,testMode){return capability==="voiceCommands"?window&&window.smNativeVoice&&window.smNativeVoice.setPhraseList:!1},exports.setVoiceCommands=function(commands){_voiceCommandsManager.executeOperation.call(_voiceCommandsManager,"set",commands)},exports.addVoiceCommand=function(command){_voiceCommandsManager.executeOperation.call(_voiceCommandsManager,"add",command)},exports.removeVoiceCommand=function(title){_voiceCommandsManager.executeOperation.call(_voiceCommandsManager,"remove",title)},exports.hasPendingCommand=function(type){return _voiceCommandsManager.hasPendingCommand(type)},exports.createCommandFromPage=function(pinnedPage,alternativeTitle){return pinnedPage?pinnedPage.voiceCommandContext?!alternativeTitle&&!pinnedPage.title?null:{type:"openBookmark",title:alternativeTitle||pinnedPage.title,context:$.extend(!0,{},pinnedPage.voiceCommandContext)}:null:null},exports.createCommandFromAppli=function(title,appInfo){return!title||!appInfo||!appInfo.applicationName?null:{type:"openBookmark",title:title,context:{applicationName:appInfo.applicationName,endpoints:appInfo.endpoints}}},exports.init=function(testMode){if(window&&window.smNativeVoice)return;if(!testMode)return;log&&log("Creating native voice commands test wrapper"),window.smNativeVoice=nativeTestVoiceCommands.create()}}),define("syracuse-tablet/html/js/storage/storageInterface",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(require,exports,module){function _StorageInterface(){this.infoString="Interface only"}function buildResult(status,data,message,exception,metaData){var res={$status:status};return data&&(res.$data=data),metaData&&(res.$metaData=metaData),message&&(res.$message=message),exception&&(res.$exception=exception),res}function buildErrResult(message,exception){return buildResult(_statusCodes.ERROR,null,message,exception)}var utils=require("syracuse-tablet/html/js/helpers/utils"),_statusCodes={OK:1,NOT_FOUND:2,ERROR:3},storageInterfaceClass=utils.defineClass(_StorageInterface,null,{getInfo:function(){return this.infoString},init:function(){throw new Error("Not implemented!")},query:function(opts){throw new Error("Not implemented!")},put:function(opts){throw new Error("Not implemented!")},read:function(opts){throw new Error("Not implemented!")},remove:function(opts){throw new Error("Not implemented!")},clearCollection:function(){throw new Error("Not implemented!")},computeCollectionSize:function(){throw new Error("Not implemented!")}});exports.StorageInterface=storageInterfaceClass,exports.StatusCodes=_statusCodes,exports.buildResult=buildResult,exports.buildErrResult=buildErrResult,exports.databaseName="sage-tablet-db"}),define("syracuse-tablet/html/js/storage/storageWebSQL",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/helpers/logger"],function(require,exports,module){function _StorageInterfaceWebSQL(){this.infoString="WebSQL storage interface",this.databaseVersion=_databaseVersion,this.databaseName=storageInterface.databaseName,this.useTestDatabase=!1,this.databaseSize=2097152,this.db=null}function _errorToMessage(tx,error){return"CODE: "+error.code+" MESSAGE: "+error.message}var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),storageInterface=require("syracuse-tablet/html/js/storage/storageInterface"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("webSQL"),_databaseVersion=16,_tables=["DROP TABLE IF EXISTS sdata_meta","CREATE TABLE sdata_meta ( key text, collection text, endpoint text, context text, id text, etag text, last_read text, last_updated text)","DROP INDEX IF EXISTS sdata_meta_pk","CREATE UNIQUE INDEX sdata_meta_pk ON sdata_meta (key, collection, endpoint, context)","DROP INDEX IF EXISTS sdata_meta_id","CREATE UNIQUE INDEX sdata_meta_id ON sdata_meta (id)","DROP TABLE IF EXISTS sdata_objects","CREATE TABLE sdata_objects ( id text, data text )","DROP INDEX IF EXISTS sdata_objects_pk","CREATE UNIQUE INDEX sdata_objects_pk ON sdata_objects (id)","DROP TABLE IF EXISTS simple_storage","CREATE TABLE simple_storage ( id text, data text )","DROP INDEX IF EXISTS simple_storage_pk","CREATE UNIQUE INDEX simple_storage_pk ON simple_storage (id unique)"],_storageInterfaceWebSQLClass=utils.defineClass(_StorageInterfaceWebSQL,storageInterface.StorageInterface,{init:function(){var deferred=$.Deferred(),self=this,useTestDatabase=globals.isTestEnvironment();self.databaseName=storageInterface.databaseName+"-test",self.useTestDatabase=useTestDatabase;try{self._openDB().then(function(status){deferred.resolve(status)}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error initializing database",e))}finally{return deferred.promise()}},put:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("PUT: ",JSON.stringify(opts));if(!opts.$key||!opts.$collection||!opts.$endpoint||!opts.$context)throw new Error("Insufficient parameters");var context=JSON.stringify(opts.$context),params=[opts.$key,opts.$collection,opts.$endpoint,context],insertData=function(metaData){self._executeSql("INSERT INTO sdata_objects (data, id) values (?, ?)",[JSON.stringify(opts.$data),metaData.$id]).then(function(){deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,opts.$data))}).fail(function(status){deferred.reject(status)})},updateData=function(metaData){self._executeSql("UPDATE sdata_objects set data = ? where id = ?",[JSON.stringify(opts.$data),metaData.$id]).then(function(result){deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,opts.$data))}).fail(function(status){deferred.reject(status)})};self._readMetaData(context,params).then(function(metaData){metaData&&metaData.$etag===opts.$data.$etag?deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,opts.$data)):metaData?(metaData.$etag=opts.$data.$etag,metaData.$lastUpdated=utils.getCurISODateTime(),self._writeMetaData(metaData).then(function(){updateData(metaData)}).fail(function(status){deferred.reject(status)})):(metaData={$key:opts.$key,$collection:opts.$collection,$endpoint:opts.$endpoint,$context:opts.$context,$etag:opts.$data.$etag,$lastUpdated:utils.getCurISODateTime()},self._writeMetaData(metaData).then(function(metaData){insertData(metaData)}).fail(function(status){deferred.reject(status)}))}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error writing to database",e))}finally{return deferred.promise()}},read:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("READ: ",JSON.stringify(opts));if(!opts.$key||!opts.$collection||!opts.$endpoint||!opts.$context)throw new Error("Insufficient parameters");var context=JSON.stringify(opts.$context),params=[opts.$key,opts.$collection,opts.$endpoint,context];self._readMetaData(context,params).then(function(metaData){metaData?self._executeSql("SELECT * FROM sdata_objects where id = ?",[metaData.$id]).then(function(result){try{result.rows.length<=0?deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.NOT_FOUND)):deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,JSON.parse(result.rows.item(0).data),null,null,{$lastRead:metaData.$lastRead,$lastUpdated:metaData.$lastUpdated}))}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}}).fail(function(status){deferred.reject(status)}):deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.NOT_FOUND))}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},query:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("QUERY: ",JSON.stringify(opts));if(!opts.$collection||!opts.$endpoint||!opts.$context)throw new Error("Insufficient parameters");var context=JSON.stringify(opts.$context),params=[opts.$collection,opts.$endpoint,context];self._executeSql("SELECT o.*, m.last_read, m.last_updated FROM sdata_objects o INNER JOIN sdata_meta m ON (o.id = m.id and m.collection = ? and m.endpoint = ? and m.context = ?)",params).then(function(result){var ret=[],meta=[];try{for(var i=0;i<result.rows.length;i++){var item=result.rows.item(i);ret.push(JSON.parse(item.data)),meta.push({$lastRead:item.last_read,$lastUpdated:item.last_updated})}}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e));return}deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,ret,null,null,meta))}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},remove:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("REMOVE: ",JSON.stringify(opts));if(!opts.$key||!opts.$collection||!opts.$endpoint||!opts.$context)throw new Error("Insufficient parameters");var context=JSON.stringify(opts.$context),params=[opts.$key,opts.$collection,opts.$endpoint,context];self._removeMetaData(context,params).then(function(metaData){metaData?self._executeSql("DELETE FROM sdata_objects where id = ?",[metaData.$id]).then(function(){deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK))}).fail(function(status){deferred.reject(status)}):deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.NOT_FOUND))}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error writing to database",e))}finally{return deferred.promise()}},clearCollection:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("CLEAR: ",JSON.stringify(opts));if(!opts.$collection||!opts.$context)throw new Error("Insufficient parameters");var context=JSON.stringify(opts.$context),params=[context];self._executeSql("SELECT * FROM sdata_meta").then(function(result){var ret=[];try{for(var i=0;i<result.rows.length;i++){var item=result.rows.item(i);opts.$collection.test(item.collection)&&(!opts.$not_read_since||item.last_read<opts.$not_read_since)&&ret.push({$context:opts.$context,$collection:item.collection,$endpoint:item.endpoint,$key:item.key})}$.smForEachPromise(ret,function(item){return self.remove(item)}).then(function(){deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK))}).fail(function(e){deferred.reject(e)})}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},computeCollectionSize:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("CHECK SIZE: ",JSON.stringify(opts));if(!opts.$collection||!opts.$context)throw new Error("Insufficient parameters");var context=JSON.stringify(opts.$context),params=[context];self._executeSql("SELECT m.collection, m.endpoint, m.key, m.last_read, d.data FROM sdata_meta m INNER JOIN sdata_objects d ON (d.id = m.id)").then(function(result){var returnData={numRecords:0,sizeRecords:0},ret=[];try{for(var i=0;i<result.rows.length;i++){var item=result.rows.item(i);opts.$collection.test(item.collection)&&(!opts.$not_read_since||item.last_read<opts.$not_read_since)&&(returnData.numRecords++,returnData.sizeRecords+=item.data.length)}deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,returnData))}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},_readMetaData:function(context,params,noUpdate){var deferred=$.Deferred(),self=this;try{var db=self.db;self._executeSql("SELECT * FROM sdata_meta where key = ? and collection = ? and endpoint = ? and context = ?",params).then(function(result){try{if(result.rows.length<=0)deferred.resolve(null);else{var item=result.rows.item(0),metaData={$key:item.key,$collection:item.collection,$endpoint:item.endpoint,$context:item.context,$id:item.id,$etag:item.etag,$lastRead:item.last_read,$lastUpdated:item.last_updated};log&&log("Read meta data: "+JSON.stringify(metaData)),noUpdate===!0?deferred.resolve(metaData):self._writeMetaData(metaData).then(function(){deferred.resolve(metaData)}).fail(function(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))})}}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},_writeMetaData:function(metaData){var deferred=$.Deferred(),self=this;try{var db=self.db;metaData.$lastRead=utils.getCurISODateTime(),metaData.$id?self._executeSql("UPDATE sdata_meta set etag = ?, last_read = ?, last_updated = ? where id = ?",[metaData.$etag,metaData.$lastRead,metaData.$lastUpdated,metaData.$id]).then(function(result){deferred.resolve(metaData)}).fail(function(status){deferred.reject(status)}):(metaData.$id=utils.UUID(),self._executeSql("INSERT INTO sdata_meta (key, collection, endpoint, context, id, etag, last_read, last_updated) values (?, ?, ?, ?, ?, ?, ?, ?)",[metaData.$key,metaData.$collection,metaData.$endpoint,JSON.stringify(metaData.$context),metaData.$id,metaData.$etag,metaData.$lastRead,metaData.$lastUpdated]).then(function(){deferred.resolve(metaData)}).fail(function(status){deferred.reject(status)}))}catch(e){deferred.reject(storageInterface.buildErrResult("error writing meta data",e))}finally{return deferred.promise()}},_removeMetaData:function(context,params){var deferred=$.Deferred(),self=this;try{self._readMetaData(context,params,!0).then(function(metaData){metaData?self._executeSql("DELETE FROM sdata_meta where id = ?",[metaData.$id]).then(function(){deferred.resolve(metaData)}).fail(function(status){deferred.reject(status)}):deferred.resolve(null)}).fail(function(status){deferred.reject(status)})}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},_executeSql:function(sql,params){var deferred=$.Deferred(),self=this;try{self.db.transaction(function(tx){try{log&&log("SQL: "+sql),log&&log(params),tx.executeSql(sql,params,function(tx,result){deferred.resolve(result)},function(tx,error){deferred.reject(storageInterface.buildErrResult("error initializing database: "+_errorToMessage(tx,error)))})}catch(e){deferred.reject(storageInterface.buildErrResult("error running SQL statement",e))}})}catch(e){deferred.reject(storageInterface.buildErrResult("error running SQL statement",e))}return deferred.promise()},_openDB:function(){var deferred=$.Deferred(),self=this;self.useTestDatabase===!1&&self.db&&deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK));var request;try{log&&log("Open database, request version: "+self.databaseVersion),self.db=openDatabase(self.databaseName,7,"Database",self.databaseSize),self._readCurrentVersion().then(function(version){log&&log("Current version: "+version),version===self.databaseVersion&&self.useTestDatabase!==!0?deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK)):self._createTables().then(function(status){return self._writeCurrentVersion()}).then(function(status){deferred.resolve(status)}).fail(function(status){deferred.reject(status)})}).fail(function(status){deferred.reject(status)})}catch(e){log&&log("Open database, exception",e),self.db=null,deferred.reject(storageInterface.buildErrResult("error initializing database",e))}return deferred.promise()},_readCurrentVersion:function(){var deferred=$.Deferred(),self=this;return self._executeSql("SELECT version FROM version",null).then(function(result){try{var len=result.rows.length;if(len===1){var version=result.rows.item(0).version;log&&log("Read version: "+version),deferred.resolve(+version)}deferred.resolve(-1)}catch(e){deferred.reject(storageInterface.buildErrResult("error reading database version",e))}}).fail(function(status){log&&log("Creating version table"),self._executeSql("CREATE TABLE version (version TEXT)").then(function(status){deferred.resolve(-1)}).fail(function(status){globals.getModal().error("Error Creating version table",status,function(){deferred.reject(status)})})}),deferred.promise()},_writeCurrentVersion:function(){var deferred=$.Deferred(),self=this;return self._executeSql("DELETE FROM version",null).then(function(result){return self._executeSql("INSERT INTO version (version) values (?)",[_databaseVersion])}).then(function(status){deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK))}).fail(function(status){deferred.reject(status)}),deferred.promise()},_createTables:function(){var deferred=$.Deferred(),self=this,p=[];for(var i=0;i<_tables.length;i++)p.push(self._executeSql(_tables[i]));return $.when.apply($,p).then(function(){deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK))}).fail(function(status){deferred.reject(status)}),deferred.promise()}});exports.StorageInterface=_storageInterfaceWebSQLClass,exports.isAvailable=function(){return window.openDatabase!=null}}),define("syracuse-tablet/html/js/storage/storageIndexedDB",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/helpers/logger"],function(require,exports,module){function _StorageInterfaceIndexedDB(){this.infoString="IndexedDB storage interface",this.databaseVersion=_databaseVersion,this.databaseName=storageInterface.databaseName,this.useTestDatabase=!1,this.db=null}function _eventToMessage(event){return JSON.stringify(event)}var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),storageInterface=require("syracuse-tablet/html/js/storage/storageInterface"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("indexedDB",!1),_indexedDB=window.indexedDB||window.webkitIndexedDB,IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction,IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,IDBDatabaseException=window.IDBDatabaseException||window.webkitIDBDatabaseException,READ_ONLY=IDBTransaction&&IDBTransaction.READ_ONLY||"readonly",READ_WRITE=IDBTransaction&&IDBTransaction.READ_WRITE||"readwrite",_databaseVersion=12,_objectStores={sdata:{options:{autoIncrement:!0},indexes:{read_write_one:{key:"key_collection_endpoint_context",options:{unique:!0}},read_write_all:{key:"collection_endpoint_context",options:{unique:!1}},read_write_ctx:{key:"context",options:{unique:!1}}}}},_storageInterfaceIndexedDBClass=utils.defineClass(_StorageInterfaceIndexedDB,storageInterface.StorageInterface,{init:function(requester){requester=requester||"",log&&log("_INIT "+requester);var deferred=$.Deferred(),self=this,useTestDatabase=globals.isTestEnvironment();try{var _doInit=function(){log&&log("DATABASE INIT!"),self._openDB().then(function(status){log&&log("_openDB OK "+requester),deferred.resolve(status)}).fail(function(status){log&&log("_openDB KO "+requester),deferred.resolve(status)})};if(useTestDatabase===!0){self.db&&(self.db.close(),self.db=null),self.useTestDatabase=!0,self.databaseName=storageInterface.databaseName+"-test",log&&log("DATABASE IN TEST MODE! "+requester);var req=_indexedDB.deleteDatabase(self.databaseName);req.onsuccess=function(){_doInit()},req.onerror=function(e){log&&log("REQUEST ERROR! "+requester),deferred.reject(storageInterface.buildErrResult("error deleting database"))},req.onblocked=function(e){log&&log("REQUEST BLOCKED! "+requester),deferred.reject(storageInterface.buildErrResult("error deleting database (blocked)"))}}else self.db||_doInit()}catch(e){log&&log("init ERROR "+requester),deferred.reject(storageInterface.buildErrResult("error initializing database",e))}finally{return deferred.promise()}},put:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("PUT: ",JSON.stringify(opts));if(!opts.$key||!opts.$collection||!opts.$endpoint||!opts.$context)throw new Error("Insufficient parameters");var tx=db.transaction(["sdata"],READ_WRITE),objectStore=tx.objectStore("sdata"),context=JSON.stringify(opts.$context),key=[opts.$key,opts.$collection,opts.$endpoint,context].join("_"),index=objectStore.index("read_write_one"),keyRange=IDBKeyRange.only(key),request=index.openCursor(keyRange),mustInsert=!0,datetime=utils.getCurISODateTime(),doInsert=function(){var obj={context:context,collection:opts.$collection,endpoint:opts.$endpoint,key:opts.$key,last_updated:datetime,last_read:datetime,key_collection_endpoint_context:key,collection_endpoint_context:[opts.$collection,opts.$endpoint,context].join("_"),data:opts.$data},reqt=objectStore.add(obj);reqt.onerror=function(event){deferred.reject(storageInterface.buildErrResult("error writing to database: "+_eventToMessage(event)))},reqt.onsuccess=function(event){deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,opts.$data))}};request.onsuccess=function(event){try{var cr=event.target.result;if(cr){if(opts.$data.$etag){var etag=cr.value&&cr.value.data.$etag;if(etag===opts.$data.$etag){deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,opts.$data));return}}cr["delete"](),cr["continue"]()}else doInsert()}catch(e){deferred.reject(storageInterface.buildErrResult("error writing to database",e))}},request.onerror=function(event){event.target.errorCode==IDBDatabaseException.NOT_FOUND_ERR?doInsert():deferred.reject(storageInterface.buildErrResult("error writing to database: "+_eventToMessage(event)))}}catch(e){deferred.reject(storageInterface.buildErrResult("error writing to database",e))}finally{return deferred.promise()}},read:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("READ: ",JSON.stringify(opts));if(!opts.$key||!opts.$collection||!opts.$endpoint||!opts.$context)throw new Error("Insufficient parameters");var tx=db.transaction(["sdata"],READ_WRITE),objectStore=tx.objectStore("sdata"),context=JSON.stringify(opts.$context),key=[opts.$key,opts.$collection,opts.$endpoint,context].join("_"),index=objectStore.index("read_write_one"),keyRange=IDBKeyRange.only(key),request=index.openCursor(keyRange);request.onsuccess=function(event){try{var cr=event.target&&event.target.result&&event.target.result.value;cr?deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,cr.data,null,null,{$lastRead:cr.last_read,$lastUpdated:cr.last_updated})):deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.NOT_FOUND))}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}},request.onerror=function(event){event.target.errorCode==IDBDatabaseException.NOT_FOUND_ERR?deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.NOT_FOUND)):deferred.reject(storageInterface.buildErrResult("error reading from database: "+_eventToMessage(event)))}}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},query:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("QUERY: ",JSON.stringify(opts));if(!opts.$collection||!opts.$endpoint||!opts.$context)throw new Error("Insufficient parameters");var tx=db.transaction(["sdata"],READ_WRITE),objectStore=tx.objectStore("sdata"),context=JSON.stringify(opts.$context),key=[opts.$collection,opts.$endpoint,context].join("_"),index=objectStore.index("read_write_all"),keyRange=IDBKeyRange.only(key),request=index.openCursor(keyRange),results=[],meta=[];request.onsuccess=function(event){try{var cr=event.target.result;if(cr){var data=cr.value.data;results.push(data),meta.push({$lastRead:cr.last_read,$lastUpdated:cr.last_updated}),cr["continue"]()}else deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,results,null,null,meta))}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}},request.onerror=function(event){event.target.errorCode==IDBDatabaseException.NOT_FOUND_ERR?deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,results,null,null,meta)):deferred.reject(storageInterface.buildErrResult("error reading from database: "+_eventToMessage(event)))}}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},remove:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("REMOVE: ",JSON.stringify(opts));if(!opts.$key||!opts.$collection||!opts.$endpoint||!opts.$context)throw new Error("Insufficient parameters");var tx=db.transaction(["sdata"],READ_WRITE),objectStore=tx.objectStore("sdata"),context=JSON.stringify(opts.$context),key=[opts.$key,opts.$collection,opts.$endpoint,context].join("_"),index=objectStore.index("read_write_one"),keyRange=IDBKeyRange.only(key),request=index.openCursor(keyRange);request.onsuccess=function(event){try{var cr=event.target.result;cr?(cr["delete"](),deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK))):deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.NOT_FOUND))}catch(e){deferred.reject(storageInterface.buildErrResult("error deleting from database",e))}},request.onerror=function(event){event.target.errorCode==IDBDatabaseException.NOT_FOUND_ERR?deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.NOT_FOUND)):deferred.reject(storageInterface.buildErrResult("error reading from database: "+_eventToMessage(event)))}}catch(e){deferred.reject(storageInterface.buildErrResult("error deleting from database",e))}finally{return deferred.promise()}},clearCollection:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("CLEAR: ",JSON.stringify(opts));var tx=db.transaction(["sdata"],READ_WRITE),objectStore=tx.objectStore("sdata"),context=JSON.stringify(opts.$context),key=context,request=objectStore.openCursor(),records=[],deleteMatches=function(){$.smForEachPromise(records,function(rec){return self.remove({$context:opts.$context,$collection:rec.collection,$endpoint:rec.endpoint,$key:rec.key})}).then(function(){deferred.resolve()}).fail(function(e){deferred.reject(e)})};request.onsuccess=function(event){try{var cr=event.target.result;cr?(opts.$collection.test(cr.value.collection)&&(!opts.$not_read_since||cr.value.last_read<opts.$not_read_since)&&records.push(cr.value),cr["continue"]()):deleteMatches()}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}},request.onerror=function(event){event.target.errorCode==IDBDatabaseException.NOT_FOUND_ERR?deleteMatches():deferred.reject(storageInterface.buildErrResult("error reading from database: "+_eventToMessage(event)))}}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},computeCollectionSize:function(opts){var deferred=$.Deferred(),self=this;try{var db=self.db;log&&log("SIZE: ",JSON.stringify(opts));var tx=db.transaction(["sdata"],READ_WRITE),objectStore=tx.objectStore("sdata"),context=JSON.stringify(opts.$context),key=context,request=objectStore.openCursor(),returnData={numRecords:0,sizeRecords:0};request.onsuccess=function(event){try{var cr=event.target.result;cr?(opts.$collection.test(cr.value.collection)&&(!opts.$not_read_since||cr.value.last_read<opts.$not_read_since)&&(returnData.numRecords++,returnData.sizeRecords+=JSON.stringify(cr.value).length),cr["continue"]()):deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK,returnData))}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}},request.onerror=function(event){event.target.errorCode==IDBDatabaseException.NOT_FOUND_ERR?deferred.resolve():deferred.reject(storageInterface.buildErrResult("error reading from database: "+_eventToMessage(event)))}}catch(e){deferred.reject(storageInterface.buildErrResult("error reading from database",e))}finally{return deferred.promise()}},_openDB:function(){var deferred=$.Deferred(),self=this;self.useTestDatabase===!1&&self.db&&deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK));var request;try{log&&log("Open database, request version: "+self.databaseVersion),request=_indexedDB.open(self.databaseName,self.databaseVersion),request.onupgradeneeded=function(e){log&&log("Open database, need upgrade"),self.db=e.target.result||e.target.source,self._createObjectStore()},request.onsuccess=function(e){log&&log("Open database, success");var db=e.target.result||e.target.source;if(!db.setVersion&&self.databaseVersion!=db.version){log&&log("Open database, versions missmatch: "+self.DatabaseVersion+" != "+db.version);var sdv=db.setVersion(self.databaseVersion);sdv.onsuccess=function(e){log&&log("Open database, setting version, success"),self.db=db,self._createObjectStore(),log&&log("Open database, opened"),deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK))},sdv.onerror=function(e){log&&log("Open database, setting version, error",e),self.db=null,deferred.reject(storageInterface.buildErrResult("error initializing database: "+_eventToMessage(e)))}}else log&&log("Open database, opened"),self.db=db,deferred.resolve(storageInterface.buildResult(storageInterface.StatusCodes.OK))},request.onerror=function(e){log&&log("Open database, error",e),self.db=null,deferred.reject(storageInterface.buildErrResult("error initializing database: "+_eventToMessage(e)))}}catch(ex){log&&log("Open database, exception",ex),self.db=null,deferred.reject(storageInterface.buildErrResult("error initializing database",ex))}return deferred.promise()},_createObjectStore:function(){var self=this,db=self.db;log&&log("Updating database"),Object.keys(_objectStores).forEach(function(name){var os=_objectStores[name];db.objectStoreNames.contains(name)&&(log&&log("Deleting objectStore: "+name),db.deleteObjectStore(name)),log&&log("Creating objectStore: "+name);var obj=db.createObjectStore(name,os.options);Object.keys(os.indexes).forEach(function(iname){var idx=os.indexes[iname];log&&log("Creating index: "+iname),obj.createIndex(iname,idx.key,idx.options)})})}});exports.StorageInterface=_storageInterfaceIndexedDBClass,exports.isAvailable=function(){return _indexedDB!=null}}),define("syracuse-tablet/html/js/storage/storage",["require","exports","module","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/storage/storageWebSQL","syracuse-tablet/html/js/storage/storageIndexedDB"],function(require,exports,module){function _getStorageImpl(){return _storageImpl?_storageImpl:(_impls.some(function(impl){if(impl.isAvailable()){var ctor=impl.StorageInterface;return _storageImpl=new ctor,!0}return!1}),_storageImpl)}var storageInterface=require("syracuse-tablet/html/js/storage/storageInterface"),_impls=[require("syracuse-tablet/html/js/storage/storageWebSQL"),require("syracuse-tablet/html/js/storage/storageIndexedDB")],_storageImpl;exports.getStorage=_getStorageImpl,exports.StatusCodes=storageInterface.StatusCodes}),define("syracuse-tablet/html/js/storage/localStorage",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("sessstorage"),_available=null,_isAvailable=function(){if(_available!==null)return _available;_available=!1;try{window.localStorage.setItem("__test_availability__","__test_availability__"),_available=!0}catch(e){}return _available},_getItem=function(key,removeAfter){if(!_isAvailable()){log&&log("local.unsupported.getItem("+key+"):"+val);return}var val=window.localStorage.getItem(key);return log&&log("local.getItem("+key+"):"+val),!0===removeAfter&&_removeItem(key),val},_setItem=function(key,value){if(!_isAvailable()){log&&log("local.unsupported.setItem("+key+"):"+value);return}return log&&log("local.setItem("+key+"):"+value),window.localStorage.setItem(key,value)},_removeItem=function(key){if(!_isAvailable()){log&&log("local.unspported.removeItem("+key+")");return}return log&&log("local.removeItem("+key+")"),window.localStorage.removeItem(key)};exports.removeItem=_removeItem,exports.setItem=_setItem,exports.getItem=_getItem}),define("syracuse-tablet/html/js/helpers/native/test/nativeTestX3WUPApp",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/storage/localStorage"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("X3WUPApp"),localStorage=require("syracuse-tablet/html/js/storage/localStorage"),_TestNativeWrapper=function(){this.onWebappLoaded=function(){},this.onWebappUnloaded=function(){if(!window.smWrapperJS)return;try{this.setReconnectContext(window.smWrapperJS.applicationClosing())}catch(e){return e.message}},this.onWebappConfigServer=function(){},this.setReconnectContext=function(context){try{log&&log("setReconnectContext",context),localStorage.setItem("$reconnectContext",context)}catch(e){log&&log("setReconnectContext",JSON.stringify(e))}},this.getReconnectContext=function(){try{var context=localStorage.getItem("$reconnectContext");return log&&log("getReconnectContext",context),context}catch(e){return log&&log("getReconnectContext",JSON.stringify(e)),null}},this.getReconnectToken=function(){try{var token=localStorage.getItem("$reconnectToken");return log&&log("getReconnectToken",token),token}catch(e){return log&&log("getReconnectToken",JSON.stringify(e)),null}},this.setReconnectToken=function(token){try{log&&log("setReconnectToken",token),localStorage.setItem("$reconnectToken",token)}catch(e){log&&log("setReconnectToken",JSON.stringify(e))}}};exports.create=function(){return new _TestNativeWrapper}}),define("syracuse-tablet/html/js/helpers/native/nativeSageX3WUPApp",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/storage/localStorage","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/helpers/native/test/nativeTestX3WUPApp","syracuse-tablet/html/js/helpers/native/nativeHelpers"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("nativeWUPApp"),globals=require("syracuse-tablet/html/js/helpers/globals"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),utils=require("syracuse-tablet/html/js/helpers/utils"),storageModule=require("syracuse-tablet/html/js/storage/storage"),localStorage=require("syracuse-tablet/html/js/storage/localStorage"),ajax=require("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,nativeTestX3WUPApp=require("syracuse-tablet/html/js/helpers/native/test/nativeTestX3WUPApp"),nativeHelpers=require("syracuse-tablet/html/js/helpers/native/nativeHelpers");window.smWrapperJS||(window.smWrapperJS={backButtonPressed:function(){return nativeHelpers.callAppNativeInterface("X3WUPApp","backButtonPressed")?"true":"false"},applicationClosing:function(){var currentHistoryStack=nativeHelpers.callAppNativeInterface("X3WUPApp","applicationClosing");return currentHistoryStack}}),exports.supports=function(capability,testMode){return capability==="X3WUPApp"?testMode?!0:window?window.smNativeApp!=null:!1:!1},exports.getReconnectToken=function(){try{var token=window.smNativeApp&&window.smNativeApp.getReconnectToken&&window.smNativeApp.getReconnectToken();return log&&log("Get reconnect token: "+token),token?JSON.parse(token):null}catch(e){return null}},exports.setReconnectToken=function(token){try{token&&(token={SyracuseSidLogin:token}),window.smNativeApp&&window.smNativeApp.setReconnectToken&&window.smNativeApp.setReconnectToken(token?JSON.stringify(token,null,2):null)}catch(e){}},exports.getReconnectContext=function(){try{var ctx=window.smNativeApp&&window.smNativeApp.getReconnectContext&&window.smNativeApp.getReconnectContext();return ctx?JSON.parse(ctx):null}catch(e){return null}},exports.setReconnectContext=function(context){try{window.smNativeApp&&window.smNativeApp.setReconnectContext&&window.smNativeApp.setReconnectContext(context?JSON.stringify(context,null,2):null)}catch(e){}},exports.configServer=function(){return log&&log("OnWebappConfigServer"),window&&window.smNativeApp&&window.smNativeApp.onWebappConfigServer&&window.smNativeApp.onWebappConfigServer()},exports.selectServer=function(){return log&&log("OnWebappConfigServer"),window&&window.smNativeApp&&window.smNativeApp.onWebappConfigServer&&window.smNativeApp.onWebappSelectServer()},exports.notifLoaded=function(){return log&&log("OnWebappLoaded"),window&&window.smNativeApp&&window.smNativeApp.onWebappLoaded&&window.smNativeApp.onWebappLoaded()},exports.notifUnloaded=function(historyContext){log&&log("OnWebappUnloaded");if(window&&window.smNativeApp&&window.smNativeApp.onWebappUnloaded)return window.smNativeApp.onWebappUnloaded(historyContext?JSON.stringify(historyContext,null,2):null)},exports.notifStartFail=function(msg){return log&&log("OnWebappLoadFail"),window&&window.smNativeApp&&window.smNativeApp.onWebappLoadFail&&window.smNativeApp.onWebappLoadFail(msg)},exports.init=function(testMode){if(window&&window.smNativeApp)return;if(!testMode)return;log&&log("Creating native X3WUPApp test wrapper"),window.smNativeApp=nativeTestX3WUPApp.create()}}),define("syracuse-tablet/html/js/helpers/native/native",["require","exports","module","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/native/nativeShare","syracuse-tablet/html/js/helpers/native/nativeLiveTile","syracuse-tablet/html/js/helpers/native/nativeMessages","syracuse-tablet/html/js/helpers/native/nativeMessages","syracuse-tablet/html/js/helpers/native/nativePenInput","syracuse-tablet/html/js/helpers/native/nativePenInput","syracuse-tablet/html/js/helpers/native/nativePenInput","syracuse-tablet/html/js/helpers/native/nativeVoiceCommands","syracuse-tablet/html/js/helpers/native/nativeSageX3WUPApp"],function(require,exports,module){var jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_modules={share:require("syracuse-tablet/html/js/helpers/native/nativeShare"),liveTile:require("syracuse-tablet/html/js/helpers/native/nativeLiveTile"),scheduleMessage:require("syracuse-tablet/html/js/helpers/native/nativeMessages"),toastMessages:require("syracuse-tablet/html/js/helpers/native/nativeMessages"),penTextInput:require("syracuse-tablet/html/js/helpers/native/nativePenInput"),penAnnotatedImage:require("syracuse-tablet/html/js/helpers/native/nativePenInput"),penSignatureImage:require("syracuse-tablet/html/js/helpers/native/nativePenInput"),voiceCommands:require("syracuse-tablet/html/js/helpers/native/nativeVoiceCommands"),X3WUPApp:require("syracuse-tablet/html/js/helpers/native/nativeSageX3WUPApp")},_testMode=!1;try{var _url=jsutils.getCurrentUrl();_testMode=_url.query&&_url.query.testNativeWrapper==="true";for(var m in _modules)_modules[m].init&&_modules[m].init(_testMode)}catch(e){console.log("native initialization failed"),console.log(e)}exports.hasCapability=function(capability){return exports.getModule(capability)!=null},exports.getModule=function(capability){var module=_modules[capability];return module?module.supports(capability)?module:null:(console.log("Unknown native module "+capability),null)},exports.callModule=function(capability,functionName){var module=exports.getModule(capability);if(!module||!module[functionName])return null;var args=Array.prototype.slice.call(arguments,2);return module[functionName].apply(null,args)}}),define("syracuse-tablet/html/js/ui/rect",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),_Klass=utils.defineClass(function rect(top,left,height,width){this.top=top,this.left=left,this.setHeight(height),this.setWidth(width)},null,{isPointInside:function(x,y){return(x==null||x>=this.left&&x<=this.right)&&(y==null||y>=this.top&&y<=this.bottom)},isEvtInside:function(evt,rectOffset){if(evt.type.smStartsWith("touch"))if(evt.changedTouches&&evt.changedTouches.length===1)evt=evt.changedTouches[0];else{if(!evt.touches||evt.touches.length!==1)return!0;evt=evt.touches[0]}var y=rectOffset!=null&&rectOffset.top!=null?evt.pageY-rectOffset.top:evt.pageY,x=rectOffset!=null&&rectOffset.left!=null?evt.pageX-rectOffset.left:evt.pageX;return this.isPointInside(x,y)},intersectsWith:function(rect){return this.left<=rect.right&&rect.left<this.right&&this.top<rect.bottom&&rect.top<this.bottom},contains:function(rect){return rect==null?!0:this.isPointInside(rect.left,rect.top)&&this.isPointInside(rect.right,rect.bottom)},equals:function(rect,justSize){return rect.width===this.width&&rect.height===this.height?justSize===!0||rect.top===this.top&&rect.left===this.left:!1},intersectRect:function(rect,relative){if(!this.intersectsWith(rect))return null;var top=Math.max(this.top,rect.top),left=Math.max(this.left,rect.left),right=Math.min(this.right,rect.right),bottom=Math.min(this.bottom,rect.bottom);return new _Klass(relative?0:top,relative?0:left,bottom-top,right-left)},setHeight:function(h){this.height=Math.max(h,0),this.bottom=this.top+this.height},setWidth:function(w){this.width=Math.max(w,0),this.right=this.left+this.width},moveLeft:function(l){this.left=this.left+l,this.right=this.width+this.left},toString:function(){return"t:"+this.top+" l:"+this.left+" r:"+this.right+" b:"+this.bottom+" h:"+this.height+" w:"+this.width},toRelative:function(offet){return offet==null&&(offet={}),offet.top==null&&(offet.top=0),offet.left==null&&(offet.left=0),new _Klass(offet.top,offet.left,this.height,this.width)},showInDocument:function(options){options=options||{};var pos="fixed",$$parent=$(document.body),$$elmt=$('<div class = "s-m-rect">').appendTo($$parent).css({position:pos,top:this.top+"px",left:this.left+"px",height:this.height+"px",width:this.width+"px",backgroundColor:options.color,zIndex:options.zIndex!=null?options.zIndex:undefined});return options.timeout!=null&&setTimeout(function(){$$elmt.remove()},options.timeout),$$elmt},clone:function(){return new _Klass(this.top,this.left,this.height,this.width)},applyTransformScale:function(scale,clone){if(scale==null||scale<=0||typeof scale!="number")return;var res=clone===!0?this.clone():this;return res.width=res.width*scale,res.height=res.height*scale,res}}),_meths={outer:["outerWidth","outerHeight"],inner:["innerWidth","innerHeight"],computed:["width","height"],fixed:"position",relative:"offset"};exports.elmtRect=function($$elmt,typeRect,position){var o=$$elmt[_meths[position||"relative"]](),m=_meths[typeRect||"outer"];return new _Klass(o.top,o.left,$$elmt[m[1]](),$$elmt[m[0]]())},exports.newRect=function(top,left,height,width){return new _Klass(top,left,height,width)}}),function(window,document,exportName,undefined){function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){return Array.isArray(arg)?(each(arg,context[fn],context),!0):!1}function each(obj,iterator,context){var i;if(!obj)return;if(obj.forEach)obj.forEach(iterator,context);else if(obj.length!==undefined){i=0;while(i<obj.length)iterator.call(context,obj[i],i,obj),i++}else for(i in obj)obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}function extend(dest,src,merge){var keys=Object.keys(src),i=0;while(i<keys.length){if(!merge||merge&&dest[keys[i]]===undefined)dest[keys[i]]=src[keys[i]];i++}return dest}function merge(dest,src){return extend(dest,src,!0)}function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP),childP.constructor=child,childP._super=baseP,properties&&extend(childP,properties)}function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments)}}function boolOrFn(val,args){return typeof val==TYPE_FUNCTION?val.apply(args?args[0]||undefined:undefined,args):val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,!1)})}function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,!1)})}function hasParent(node,parent){while(node){if(node==parent)return!0;node=node.parentNode}return!1}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey)return src.indexOf(find);var i=0;while(i<src.length){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find)return i;i++}return-1}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){var results=[],values=[],i=0;while(i<src.length){var val=key?src[i][key]:src[i];inArray(values,val)<0&&results.push(src[i]),values[i]=val,i++}return sort&&(key?results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key]}):results=results.sort()),results}function prefixed(obj,property){var prefix,prop,camelProp=property[0].toUpperCase()+property.slice(1),i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i],prop=prefix?prefix+camelProp:property;if(prop in obj)return prop;i++}return undefined}function uniqueId(){return _uniqueId++}function getWindowForElement(element){var doc=element.ownerDocument;return doc.defaultView||doc.parentWindow}function Input(manager,callback){var self=this;this.manager=manager,this.callback=callback,this.element=manager.element,this.target=manager.options.inputTarget,this.domHandler=function(ev){boolOrFn(manager.options.enable,[manager])&&self.handler(ev)},this.init()}function createInputInstance(manager){var Type,inputClass=manager.options.inputClass;return inputClass?Type=inputClass:SUPPORT_POINTER_EVENTS?Type=PointerEventInput:SUPPORT_ONLY_TOUCH?Type=TouchInput:SUPPORT_TOUCH?Type=TouchMouseInput:Type=MouseInput,new Type(manager,inputHandler)}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length,changedPointersLen=input.changedPointers.length,isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen===0,isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen===0;input.isFirst=!!isFirst,input.isFinal=!!isFinal,isFirst&&(manager.session={}),input.eventType=eventType,computeInputData(manager,input),manager.emit("hammer.input",input),manager.recognize(input),manager.session.prevInput=input}function computeInputData(manager,input){var session=manager.session,pointers=input.pointers,pointersLength=pointers.length;session.firstInput||(session.firstInput=simpleCloneInputData(input)),pointersLength>1&&!session.firstMultiple?session.firstMultiple=simpleCloneInputData(input):pointersLength===1&&(session.firstMultiple=!1);var firstInput=session.firstInput,firstMultiple=session.firstMultiple,offsetCenter=firstMultiple?firstMultiple.center:firstInput.center,center=input.center=getCenter(pointers);input.timeStamp=now(),input.deltaTime=input.timeStamp-firstInput.timeStamp,input.angle=getAngle(offsetCenter,center),input.distance=getDistance(offsetCenter,center),computeDeltaXY(session,input),input.offsetDirection=getDirection(input.deltaX,input.deltaY),input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1,input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0,computeIntervalInputData(session,input);var target=manager.element;hasParent(input.srcEvent.target,target)&&(target=input.srcEvent.target),input.target=target}function computeDeltaXY(session,input){var center=input.center,offset=session.offsetDelta||{},prevDelta=session.prevDelta||{},prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END)prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0},offset=session.offsetDelta={x:center.x,y:center.y};input.deltaX=prevDelta.x+(center.x-offset.x),input.deltaY=prevDelta.y+(center.y-offset.y)}function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=last.deltaX-input.deltaX,deltaY=last.deltaY-input.deltaY,v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x,velocityY=v.y,velocity=abs(v.x)>abs(v.y)?v.x:v.y,direction=getDirection(deltaX,deltaY),session.lastInterval=input}else velocity=last.velocity,velocityX=last.velocityX,velocityY=last.velocityY,direction=last.direction;input.velocity=velocity,input.velocityX=velocityX,input.velocityY=velocityY,input.direction=direction}function simpleCloneInputData(input){var pointers=[],i=0;while(i<input.pointers.length)pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)},i++;return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1)return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};var x=0,y=0,i=0;while(i<pointersLength)x+=pointers[i].clientX,y+=pointers[i].clientY,i++;return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){return x===y?DIRECTION_NONE:abs(x)>=abs(y)?x>0?DIRECTION_LEFT:DIRECTION_RIGHT:y>0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI}function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)-getAngle(start[1],start[0],PROPS_CLIENT_XY)}function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS,this.evWin=MOUSE_WINDOW_EVENTS,this.allow=!0,this.pressed=!1,Input.apply(this,arguments)}function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS,this.evWin=POINTER_WINDOW_EVENTS,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS,this.evWin=SINGLE_TOUCH_WINDOW_EVENTS,this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(ev,type){var all=toArray(ev.touches),changed=toArray(ev.changedTouches);return type&(INPUT_END|INPUT_CANCEL)&&(all=uniqueArray(all.concat(changed),"identifier",!0)),[all,changed]}function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS,this.targetIds={},Input.apply(this,arguments)}function getTouches(ev,type){var allTouches=toArray(ev.touches),targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1)return targetIds[allTouches[0].identifier]=!0,[allTouches,allTouches];var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target)});if(type===INPUT_START){i=0;while(i<targetTouches.length)targetIds[targetTouches[i].identifier]=!0,i++}i=0;while(i<changedTouches.length)targetIds[changedTouches[i].identifier]&&changedTargetTouches.push(changedTouches[i]),type&(INPUT_END|INPUT_CANCEL)&&delete targetIds[changedTouches[i].identifier],i++;if(!changedTargetTouches.length)return;return[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",!0),changedTargetTouches]}function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler),this.mouse=new MouseInput(this.manager,handler)}function TouchAction(manager,value){this.manager=manager,this.set(value)}function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE))return TOUCH_ACTION_NONE;var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);return hasPanX&&hasPanY?TOUCH_ACTION_PAN_X+" "+TOUCH_ACTION_PAN_Y:hasPanX||hasPanY?hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y:inStr(actions,TOUCH_ACTION_MANIPULATION)?TOUCH_ACTION_MANIPULATION:TOUCH_ACTION_AUTO}function Recognizer(options){this.id=uniqueId(),this.manager=null,this.options=merge(options||{},this.defaults),this.options.enable=ifUndefined(this.options.enable,!0),this.state=STATE_POSSIBLE,this.simultaneous={},this.requireFail=[]}function stateStr(state){return state&STATE_CANCELLED?"cancel":state&STATE_ENDED?"end":state&STATE_CHANGED?"move":state&STATE_BEGAN?"start":""}function directionStr(direction){return direction==DIRECTION_DOWN?"down":direction==DIRECTION_UP?"up":direction==DIRECTION_LEFT?"left":direction==DIRECTION_RIGHT?"right":""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;return manager?manager.get(otherRecognizer):otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(element,options){return options=options||{},options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset),new Manager(element,options)}function Manager(element,options){options=options||{},this.options=merge(options,Hammer.defaults),this.options.inputTarget=this.options.inputTarget||element,this.handlers={},this.session={},this.recognizers=[],this.element=element,this.input=createInputInstance(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(options.recognizers,function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]),item[3]&&recognizer.requireFailure(item[3])},this)}function toggleCssProps(manager,add){var element=manager.element;each(manager.options.cssProps,function(value,name){element.style[prefixed(element.style,name)]=add?value:""})}function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,!0,!0),gestureEvent.gesture=data,data.target.dispatchEvent(gestureEvent)}var VENDOR_PREFIXES=["","webkit","moz","MS","ms","o"],TEST_ELEMENT=document.createElement("div"),TYPE_FUNCTION="function",round=Math.round,abs=Math.abs,now=Date.now,_uniqueId=1,MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,SUPPORT_TOUCH="ontouchstart"in window,SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined,SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent),INPUT_TYPE_TOUCH="touch",INPUT_TYPE_PEN="pen",INPUT_TYPE_MOUSE="mouse",INPUT_TYPE_KINECT="kinect",COMPUTE_INTERVAL=25,INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,INPUT_CANCEL=8,DIRECTION_NONE=1,DIRECTION_LEFT=2,DIRECTION_RIGHT=4,DIRECTION_UP=8,DIRECTION_DOWN=16,DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT,DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN,DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END},MOUSE_ELEMENT_EVENTS="mousedown",MOUSE_WINDOW_EVENTS="mousemove mouseup";inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&ev.button===0&&(this.pressed=!0),eventType&INPUT_MOVE&&ev.which!==1&&(eventType=INPUT_END);if(!this.pressed||!this.allow)return;eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev})}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL},IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";window.MSPointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store,removePointer=!1,eventTypeNormalized=ev.type.toLowerCase().replace("ms",""),eventType=POINTER_INPUT_MAP[eventTypeNormalized],pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType,isTouch=pointerType==INPUT_TYPE_TOUCH,storeIndex=inArray(store,ev.pointerId,"pointerId");eventType&INPUT_START&&(ev.button===0||isTouch)?storeIndex<0&&(store.push(ev),storeIndex=store.length-1):eventType&(INPUT_END|INPUT_CANCEL)&&(removePointer=!0);if(storeIndex<0)return;store[storeIndex]=ev,this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev}),removePointer&&store.splice(storeIndex,1)}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},SINGLE_TOUCH_TARGET_EVENTS="touchstart",SINGLE_TOUCH_WINDOW_EVENTS="touchstart touchmove touchend touchcancel";inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];type===INPUT_START&&(this.started=!0);if(!this.started)return;var touches=normalizeSingleTouches.call(this,ev,type);type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0&&(this.started=!1),this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}});var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type],touches=getTouches.call(this,ev,type);if(!touches)return;this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}}),inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=inputData.pointerType==INPUT_TYPE_TOUCH,isMouse=inputData.pointerType==INPUT_TYPE_MOUSE;if(isTouch)this.mouse.allow=!1;else if(isMouse&&!this.mouse.allow)return;inputEvent&(INPUT_END|INPUT_CANCEL)&&(this.mouse.allow=!0),this.callback(manager,inputEvent,inputData)},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined,TOUCH_ACTION_COMPUTE="compute",TOUCH_ACTION_AUTO="auto",TOUCH_ACTION_MANIPULATION="manipulation",TOUCH_ACTION_NONE="none",TOUCH_ACTION_PAN_X="pan-x",TOUCH_ACTION_PAN_Y="pan-y";TouchAction.prototype={set:function(value){value==TOUCH_ACTION_COMPUTE&&(value=this.compute()),NATIVE_TOUCH_ACTION&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=value),this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];return each(this.manager.recognizers,function(recognizer){boolOrFn(recognizer.options.enable,[recognizer])&&(actions=actions.concat(recognizer.getTouchAction()))}),cleanTouchActions(actions.join(" "))},preventDefaults:function(input){if(NATIVE_TOUCH_ACTION)return;var srcEvent=input.srcEvent,direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return}var actions=this.actions,hasNone=inStr(actions,TOUCH_ACTION_NONE),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y),hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);if(hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL)return this.preventSrc(srcEvent)},preventSrc:function(srcEvent){this.manager.session.prevented=!0,srcEvent.preventDefault()}};var STATE_POSSIBLE=1,STATE_BEGAN=2,STATE_CHANGED=4,STATE_ENDED=8,STATE_RECOGNIZED=STATE_ENDED,STATE_CANCELLED=16,STATE_FAILED=32;Recognizer.prototype={defaults:{},set:function(options){return extend(this.options,options),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this))return this;var simultaneous=this.simultaneous;return otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),simultaneous[otherRecognizer.id]||(simultaneous[otherRecognizer.id]=otherRecognizer,otherRecognizer.recognizeWith(this)),this},dropRecognizeWith:function(otherRecognizer){return invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)?this:(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),delete this.simultaneous[otherRecognizer.id],this)},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this))return this;var requireFail=this.requireFail;return otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),inArray(requireFail,otherRecognizer)===-1&&(requireFail.push(otherRecognizer),otherRecognizer.requireFailure(this)),this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this))return this;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);return index>-1&&this.requireFail.splice(index,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){function emit(withState){self.manager.emit(self.options.event+(withState?stateStr(state):""),input)}var self=this,state=this.state;state<STATE_ENDED&&emit(!0),emit(),state>=STATE_ENDED&&emit(!0)},tryEmit:function(input){if(this.canEmit())return this.emit(input);this.state=STATE_FAILED},canEmit:function(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE)))return!1;i++}return!0},recognize:function(inputData){var inputDataClone=extend({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset(),this.state=STATE_FAILED;return}this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)&&(this.state=STATE_POSSIBLE),this.state=this.process(inputDataClone),this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)&&this.tryEmit(inputDataClone)},process:function(inputData){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers},process:function(input){var state=this.state,eventType=input.eventType,isRecognized=state&(STATE_BEGAN|STATE_CHANGED),isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid))return state|STATE_CANCELLED;if(isRecognized||isValid)return eventType&INPUT_END?state|STATE_ENDED:state&STATE_BEGAN?state|STATE_CHANGED:STATE_BEGAN;return STATE_FAILED}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction,actions=[];return direction&DIRECTION_HORIZONTAL&&actions.push(TOUCH_ACTION_PAN_Y),direction&DIRECTION_VERTICAL&&actions.push(TOUCH_ACTION_PAN_X),actions},directionTest:function(input){var options=this.options,hasMoved=!0,distance=input.distance,direction=input.direction,x=input.deltaX,y=input.deltaY;return direction&options.direction||(options.direction&DIRECTION_HORIZONTAL?(direction=x===0?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT,hasMoved=x!=this.pX,distance=Math.abs(input.deltaX)):(direction=y===0?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN,hasMoved=y!=this.pY,distance=Math.abs(input.deltaY))),input.direction=direction,hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX,this.pY=input.deltaY;var direction=directionStr(input.direction);direction&&this.manager.emit(this.options.event+direction,input),this._super.emit.call(this,input)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},emit:function(input){this._super.emit.call(this,input);if(input.scale!==1){var inOut=input.scale<1?"in":"out";this.manager.emit(this.options.event+inOut,input)}}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[TOUCH_ACTION_AUTO]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)this.reset();else if(input.eventType&INPUT_START)this.reset(),this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.time,this);else if(input.eventType&INPUT_END)return STATE_RECOGNIZED;return STATE_FAILED},reset:function(){clearTimeout(this._timer)},emit:function(input){if(this.state!==STATE_RECOGNIZED)return;input&&input.eventType&INPUT_END?this.manager.emit(this.options.event+"up",input):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var direction=this.options.direction,velocity;return direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)?velocity=input.velocity:direction&DIRECTION_HORIZONTAL?velocity=input.velocityX:direction&DIRECTION_VERTICAL&&(velocity=input.velocityY),this._super.attrTest.call(this,input)&&direction&input.direction&&input.distance>this.options.threshold&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function(input){var direction=directionStr(input.direction);direction&&this.manager.emit(this.options.event+direction,input),this.manager.emit(this.options.event,input)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTouchTime=input.deltaTime<options.time;this.reset();if(input.eventType&INPUT_START&&this.count===0)return this.failTimeout();if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END)return this.failTimeout();var validInterval=this.pTime?input.timeStamp-this.pTime<options.interval:!0,validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp,this.pCenter=input.center,!validMultiTap||!validInterval?this.count=1:this.count+=1,this._input=input;var tapCount=this.count%options.taps;if(tapCount===0)return this.hasRequireFailures()?(this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.interval,this),STATE_BEGAN):STATE_RECOGNIZED}return STATE_FAILED},failTimeout:function(){return this._timer=setTimeoutContext(function(){this.state=STATE_FAILED},this.options.interval,this),STATE_FAILED},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==STATE_RECOGNIZED&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.4",Hammer.defaults={domEvents:!1,touchAction:TOUCH_ACTION_COMPUTE,enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var STOP=1,FORCED_STOP=2;Manager.prototype={set:function(options){return extend(this.options,options),options.touchAction&&this.touchAction.update(),options.inputTarget&&(this.input.destroy(),this.input.target=options.inputTarget,this.input.init()),this},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP},recognize:function(inputData){var session=this.session;if(session.stopped)return;this.touchAction.preventDefaults(inputData);var recognizer,recognizers=this.recognizers,curRecognizer=session.curRecognizer;if(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)curRecognizer=session.curRecognizer=null;var i=0;while(i<recognizers.length)recognizer=recognizers[i],session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))?recognizer.recognize(inputData):recognizer.reset(),!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)&&(curRecognizer=session.curRecognizer=recognizer),i++},get:function(recognizer){if(recognizer instanceof Recognizer)return recognizer;var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++)if(recognizers[i].options.event==recognizer)return recognizers[i];return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this))return this;var existing=this.get(recognizer.options.event);return existing&&this.remove(existing),this.recognizers.push(recognizer),recognizer.manager=this,this.touchAction.update(),recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this))return this;var recognizers=this.recognizers;return recognizer=this.get(recognizer),recognizers.splice(inArray(recognizers,recognizer),1),this.touchAction.update(),this},on:function(events,handler){var handlers=this.handlers;return each(splitStr(events),function(event){handlers[event]=handlers[event]||[],handlers[event].push(handler)}),this},off:function(events,handler){var handlers=this.handlers;return each(splitStr(events),function(event){handler?handlers[event].splice(inArray(handlers[event],handler),1):delete handlers[event]}),this},emit:function(event,data){this.options.domEvents&&triggerDomEvent(event,data);var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length)return;data.type=event,data.preventDefault=function(){data.srcEvent.preventDefault()};var i=0;while(i<handlers.length)handlers[i](data),i++},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},extend(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),typeof define==TYPE_FUNCTION&&define.amd?define("syracuse-tablet/html/deps/hammerjs-2.0.4/hammer",[],function(){return Hammer}):typeof module!="undefined"&&module.exports?module.exports=Hammer:window[exportName]=Hammer}(window,document,"Hammer"),define("syracuse-tablet/html/js/helpers/hammerScroller",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/deps/hammerjs-2.0.4/hammer"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("scroll",!1),utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),uiRect=require("syracuse-tablet/html/js/ui/rect"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),Hammer=require("syracuse-tablet/html/deps/hammerjs-2.0.4/hammer"),_scrollerId=1,_stopClickEvent=function(mgr,evt,reason){log&&log("Clicked canceled",reason,mgr.id),evt.stopPropagation(),evt.preventDefault(),evt.$stop=!0},_lastClickTO=400,_slowDown=!0,_slowDownTO=10,_velocityToDist=function(velocity){var v=Math.abs(Math.round(velocity*4));return Math.max(1,v*v/2)},_consts={pan:{v:"panup pandown panstart panend",h:"panleft panright panstart panend"},dir:{v:Hammer.DIRECTION_VERTICAL,h:Hammer.DIRECTION_HORIZONTAL},upEvt:{v:"panup",h:"panleft"}},_Klass=utils.defineClass(function hammerScroller($$elmt,options,parentMgr,$$nativeScroll){options=options||{},this.hammer=null,this.$$elmt=$$elmt,this.$$nativeScroll=$$nativeScroll||$$elmt;if($$elmt=="null")throw new Error("hammerScroller - null $$elmt");this.id=$$elmt.closest("[id]").attr("id"),this.valMax=options.valMax!=null?options.valMax:0,this.name=options.name||"scroller",this.parentMgr=parentMgr,this.callBack=options.callBack,this.isPageScroller=options.isPageScroller===!0,this.hammer=new Hammer(this.$$elmt.get(0)),options.direction&&this._initDir(options.direction),this._evtsEnabled=!1,notifications.subscribe(this,["sm.scroller.toggle"],1)},null,{_initDir:function(direction){this.dir=direction;if(this.dir!=="v"&&this.dir!=="h")throw new Error("hammerScroller - Unexpected direction ["+this.dir+"]");this.upEvtType=_consts.upEvt[this.dir]},resetScrolling:function(callBack){this.val!=null&&(this.setVal(this.valMax),this.refresh(),this.reset()),callBack&&callBack()},init:function(viewRect,dir,valMax,keepScrolling){if(viewRect==null)throw new Error("hammerScroller - Unexpected null viewRect");keepScrolling===!0&&this.val!=null&&(this.restoredVal=this.val),this.reset(!0),dir!=null&&this.dir!=dir&&this._initDir(dir);if(this.dir==null)throw new Error("hammerScroller - Unexpected null direction");globals.getSiteLayout().getTransformScale()!=1&&(viewRect=viewRect.applyTransformScale(globals.getSiteLayout().getTransformScale(),!0)),this.viewRect=viewRect,this.hammer.get("pan").set({threshold:0,direction:_consts.dir[this.dir]}),this.hammer.get("press").set({time:1}),this._panHandler=Hammer.bindFn(this.onPan,this),this._pressHandler=Hammer.bindFn(this.onPress,this),this._clickHandler=Hammer.bindFn(this.onClick,this),this.$$elmt.on("click",this._clickHandler),this._originalRect=uiRect.elmtRect(this.$$elmt),this._originalScrollOffset=this.isPageScroller||!globals.getCurrentPage()?null:globals.getCurrentPage().getScrollOffset(),this._enableEvents(!0),valMax!=null&&(this.valMax=valMax),this.setVal(this.restoredVal==null?this.valMax:this.restoredVal),keepScrolling===!0&&this.restoredVal!=null&&this.adjust(),this.restoredVal=null,this.refresh()},_enableEvents:function(yes){if(!this.viewRect)return;var wasDisabled=this._evtsEnabled===!1;yes===!0&&this._evtsEnabled!==!0&&(this._evtsEnabled=!0,this.hammer.on(_consts.pan[this.dir],this._panHandler),this.hammer.on("press",this._pressHandler),this.$$elmt.addClass("s-m-scroll"+this.dir));if(yes===!1&&this._evtsEnabled!==!1){if(this._evtsEnabled===!1)return;this._evtsEnabled=!1,this.hammer&&(this.hammer.off(_consts.pan[this.dir],this._panHandler),this.hammer.off("press",this._pressHandler)),this.$$elmt.removeClass("s-m-scroll"+this.dir)}wasDisabled||(this.panStart=!1,this.stopSlowingDown(),this.cancelClick=!1,this.lastClickAllowed=null)},reset:function(dontResetValue){dontResetValue!==!0&&this.viewRect!=null&&(this.setVal(this.valMax),this.refresh()),this._enableEvents(!1),this.$$elmt&&this.$$elmt.off("click",this._clickHandler),this.viewRect=null,this.panStart=!1,this.stopSlowingDown(),this.cancelClick=!1,this.lastClickAllowed=null,this.val=null,this.isLocked=!1},destroy:function(){this.reset(),this.hammer&&(this.hammer.destroy(),this.hammer=null),this.$$elmt=null,this.$$nativeScroll=null,this.callBack=null,this._panHandler=null,this._pressHandler=null,this._toggleRect(!1),this._clickHandler=null,notifications.unsubscribe(this)},refresh:function(){if(!this.$$elmt||!this.dir)return;this.dir=="v"?this.$$elmt.css({top:this.val+"px"}):this.$$elmt.css({left:this.val+"px"})},_getScrollOffset:function(){if(this.isPageScroller||this._originalScrollOffset==null)return null;var o=globals.getCurrentPage().getScrollOffset();return o==null?null:{top:o.top-this._originalScrollOffset.top,left:o.left-this._originalScrollOffset.left}},_toggleRect:function(remove){if(this._$$viewRect)this._$$viewRect.remove(),this._$$viewRect.off("click",this._clickHandler),this._$$viewRect=null;else if(remove!==!1){this._$$viewRect=this.viewRect.showInDocument();var o=this._getScrollOffset();o&&this._$$viewRect.css({marginTop:"+="+o.top,marginLeft:"+="+o.left}),this._$$viewRect.on("click",this._clickHandler)}},onClick:function(evt){log&&log("onClick Status","slowingDown:",this.slowingDown,"panStart:",this.panStart,"cancelClick:",this.cancelClick,"lastClickAllowed:",this.lastClickAllowed?(new Date).getTime()-this.lastClickAllowed:null),evt.$stop=!1;if(evt.shiftKey)return this._toggleRect(),_stopClickEvent(this,evt,"Show rectangle");if(this._evtsEnabled===!1)return;if(this.slowingDown)return _stopClickEvent(this,evt,"slowing down");if(this.cancelClick)return this.cancelClick=!1,_stopClickEvent(this,evt,"Click canceled");if(this.lastClickAllowed!=null&&(new Date).getTime()-this.lastClickAllowed<0)return this.lastClickAllowed=null,_stopClickEvent(this,evt,"Last click timeout");if(this.parentMgr&&this.parentMgr.dir!=this.dir){this.parentMgr.onClick(evt);if(evt.$stop===!0)return _stopClickEvent(this,evt,"Parent stopped click")}log&&log("onClick not stopped")},onPress:function(evt){this.lastPress=(new Date).getTime(),this.slowingDown&&(this.stopSlowingDown(),this.cancelClick=!0),this.parentMgr&&(this.parentMgr.isLocked=!1),log&&log(this.id,"onPress","slowingDown="+this.slowingDown,"panStart="+this.panStart,"cancelClick ="+this.cancelClick,"lastClickAllowed ="+this.lastClickAllowed)},onPan:function(evt){log&&log(this.id,evt.type,this.dir,utils.isEvtDirection(evt,this.dir),"isLocked",this.isLocked);if(!utils.isEvtDirection(evt,this.dir))return;if(this.isLocked===!0)return;try{if(evt.type==="panstart")log&&log(evt.type),this.panStart=!0,this.cancelClick=!0,this.stopSlowingDown(),this.parentMgr&&this.parentMgr.dir===this.dir&&(this.parentMgr.isLocked=!0);else if(evt.type==="panend"){log&&log(evt.type),this.panStart=!1,_slowDown&&this.lastVelocity!=null?(this.lastVelocity=Math.abs(this.lastVelocity),this.lastVelocity>.3&&this.lastVelocity<1?this.lastVelocity=1:this.lastVelocity=Math.min(this.lastVelocity,2),this.lastVelocity>=1?(this.slowingDown=!0,this.slowDown(this.lastVelocity,this.lastUp),this.lastVelocity=this.lastUp=null):this.parentMgr&&(this.parentMgr.isLocked=!1)):(this.lastClickAllowed=(new Date).getTime()+_lastClickTO,this.parentMgr&&(this.parentMgr.isLocked=!1));return}var up=evt.type===this.upEvtType||evt.type==="panstart"&&evt.deltaY<0;this.move(_velocityToDist(evt.velocity),up)?(this.lastVelocity=Math.abs(evt.velocity),this.lastUp=up):this.lastVelocity=this.lastUp=null}catch(e){return console.log(JSON.stringify(jsutils.convertToDiagnoses("hammerScroller exception - onPan",e),null,2)),!1}},stopSlowingDown:function(){this.slowingDown=!1,this.parentMgr&&(this.parentMgr.isLocked=!1)},slowDown:function(v,up){var self=this;if(self.panStart||!self.slowingDown){this.stopSlowingDown();return}if(v<1){this.stopSlowingDown();return}self.move(_velocityToDist(v),up)?setTimeout(function(){self.slowDown(v,up)},_slowDownTO):this.stopSlowingDown()},move:function(dist,up){try{if(dist==0)return;var val=up?this.val-dist:this.val+dist,valMin=this.getValMin();val=Math.max(Math.min(this.valMax,val),valMin);if(val===this.valMax||val===valMin){log&&log(this.id,"end scrolling"),this.lastClickAllowed=(new Date).getTime()+_lastClickTO,this.cancelClick=!1;if(this.val===val)return!1}return this.setVal(val),this.callBack?this.callBack(this.val):(this.refresh(),!0)}catch(e){return console.log(JSON.stringify(jsutils.convertToDiagnoses("hammerScroller exception - move",e),null,2)),!1}},savedCtxCreate:function(){return this.hammer?{val:this.val}:null},savedCtxRestore:function(ctx,refresh){if(ctx==null||ctx.val==null)return;this.restoredVal=ctx.val,refresh&&this.refresh()},getOffset:function(){return{top:this.dir=="v"?this.val:0,left:this.dir=="h"?this.val:0}},notifScrollerToggle:function(status){this._enableEvents(status==null?!this._evtsEnabled:status===!0,!0);var css={overflow:"hidden"},prop=this.dir==="h"?"width":"height";css[prop]=this._originalRect[prop]+"px",this.$$nativeScroll.css(css);var css={overflow:"hidden"};css[this.dir==="h"?"left":"top"]=this.valMax+"px",this.$$elmt.css(css),this.setVal(this.valMax)},makeVisible:function($$e){this.slowingDown&&(this.stopSlowingDown(),this.cancelClick=!0);if(!$$e||!$$e.jquery||$$e.length==0)return;$$e.is(":visible")||$$e.parents(".s-m-stack").map(function(stack){var stackLayout=globals.getCurrentPage().getLayout($(this).attr("id"));stackLayout&&stackLayout.setAuthState({collapsed:!1})});if(this.viewRect==null)return;if($$e.closest(this.$$elmt).length===0)return;if(!this._evtsEnabled)return;var prop=this.dir==="v"?"top":"left",size=this.dir==="v"?"height":"width",o=$$e.offset(),offset=globals.getSiteLayout().getTransformScale()*$$e[size]()/2;o[prop]=o[prop]+offset;if(o[prop]>this.viewRect[prop]&&o[prop]<this.viewRect[prop]+this.viewRect[size]-10)return;this.$$elmt.css("visibility","hidden");var f=o[prop]>this.viewRect[prop]?-1:1,stopPos=this.viewRect[prop]+this.viewRect[size]/2,stop=!$$e.is(":visible");while(!stop){var pos=$$e.offset()[prop]+offset;stop=f>0?pos>stopPos:pos<stopPos,stop||(this.setVal(this.val+50*f),this.refresh())}var valMin=this.getValMin();this.val<valMin&&(this.setVal(valMin),this.refresh()),this.val>this.valMax&&(this.setVal(this.valMax),this.refresh()),this.$$elmt.css("visibility","visible")},autoScroll:function(value){this.move(Math.abs(value),value<0)},getScrollValue:function(value){return this.val},getValMin:function(){var prop=this.dir=="v"?"height":"width",x=this.$$elmt[prop]();return Math.min(this.valMax-x+this.viewRect[prop]-30,this.valMax)},adjust:function(){if(this.viewRect==null)return;var newVal=null,elmtRect=uiRect.elmtRect(this.$$elmt);if(this.viewRect.contains(elmtRect))newVal=this.valMax;else{this.val>this.valMax&&(newVal=this.valMax);var prop=this.dir=="v"?"height":"width",valmin=this.valMax-elmtRect[prop]+this.viewRect[prop];this.val<valmin&&(newVal=this.getValMin())}newVal!=null&&(this.setVal(newVal),this.refresh())},scrollToBeginning:function(){this.setVal(this.valMax),this.refresh()},checkViewRect:function(viewRect,preserveScroll){var reset=!0;if(viewRect&&this.$$elmt){var val=this.val;this.scrollToBeginning(),preserveScroll&&this.setVal(val);var myRect=uiRect.elmtRect(this.$$elmt,"computed"),intersectRect=viewRect.intersectRect(myRect,!1);intersectRect!=null&&(this.init(intersectRect,null,null,preserveScroll),reset=!1,preserveScroll&&this.adjust())}return reset&&this.reset(),!reset},setVal:function(v){isNaN(v)&&(v=0),this.val=v}}),_createSimpleScroller=function($$elmt){var $$scrolls=$$elmt.find(".s-m-scroll-element"),i,scrollers={};for(i=0;i<$$scrolls.length;i++){_scrollerId++;var $$se=$($$scrolls[i]),$$wrapper=$$se.parent(),dir=$$wrapper.hasClass("s-m-scroll-wrapper-h")?"h":"v";$$wrapper.attr("data-scroller-id",_scrollerId);var parentScroller=null,$$parentScroller=$$wrapper.parent().closest(".s-m-scroll-wrapper");$$parentScroller.length>0&&(parentScroller=scrollers[$$parentScroller.attr("data-scroller-id")]);var css={};css["overflow-"+dir]="auto",$$wrapper.css(css);var gestureMgr=new _Klass($$se,{direction:dir,valMax:0,name:"_scroller_"+_scrollerId,isPageScroller:!1},parentScroller);scrollers[_scrollerId]=gestureMgr;var scrollRect=uiRect.elmtRect($$se,"outer"),wrapperRect=uiRect.elmtRect($$wrapper,"outer"),viewRect=wrapperRect.intersectRect(scrollRect);viewRect&&!viewRect.contains(scrollRect)?gestureMgr.init(viewRect):gestureMgr.reset()}return scrollers};exports.Klass=_Klass,exports.Hammer=Hammer,exports.createSimpleScroller=_createSimpleScroller}),define("syracuse-tablet/html/js/ui/modals/modalDialog",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/ui/rect"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller"),uiRect=require("syracuse-tablet/html/js/ui/rect"),_dialogTpl='	<div class="modal {{displayFlags.modalClass}}" id="modal-endpoint" tabindex="-1" role="dialog">	<div class="modal-dialog">	<div class="modal-content"> 		{{{header}}} 		<div class="modal-body">{{{content}}}</div> 		{{{footer}}} 	</div> 	</div>	</div>',_openModalsPromises=[],_Klass=utils.defineClass(function BaseModal(){var self=this,site=globals.getSiteLayout();self.deviceType=site.getDeviceType(),self.displayFlags={modalClass:""}},null,{destroy:function(){this.$$elmt&&(this.$$elmt.unbind(),this.$$elmt.remove()),this._checkShowNextModal()},_checkShowNextModal:function(){_openModalsPromises.shift(),_openModalsPromises.length>0&&_openModalsPromises[0].resolve()},_getTemplates:function(){return{std:{},tablet:{},smartphone:{}}},_getDataContext:function(){return{}},_onValidate:function(){},_onCancel:function(){},_getResult:function(){},_onAction:function(action,param){},_compileTpl:function(){var self=this,htmlTpls=self._getTemplates(),htmlTpl=htmlTpls[self.deviceType]||htmlTpls.std,tpl={header:Handlebars.compile(htmlTpl.header),content:Handlebars.compile(htmlTpl.content),footer:Handlebars.compile(htmlTpl.footer)};return tpl},_getWrapperTemplate:function(){return Handlebars.compile(_dialogTpl)},_ensureParent:function(){var self=this,parentName=globals.isAuthoringActive()?"s-m-modal-parent-auth":"s-m-modal-parent",$$parent=$("#"+parentName);$$parent.length<1&&($$parent=$("<div>"),$$parent.attr("id",parentName),globals.isAuthoringActive()?$("body").append($$parent):$("#s-m-app-id").append($$parent)),self.$$parent=$$parent},_createDOM:function(){var self=this;self.$$elmt=$(self.html)},getDisplayFlags:function(){var self=this;return self.displayFlags},_hookEvents:function(){var self=this;self.$$elmt.on("shown.bs.modal",self._onShow.bind(self)),self.$$elmt.on("hide.bs.modal",self._onHide.bind(self)),self.$$elmt.delegate("[data-action]","click",self._onButton.bind(self))},_attachDOM:function(){var self=this;self.$$parent.toggle(!0),self.$$parent.append(self.$$elmt),self.$$elmt.modal({keyboard:!1,backdrop:"static"})},_onShow:function(evt){var self=this;self.$$elmt.css("padding-left",""),self._calcSize();var app=globals.getApplication();app.notifModalOpen(),self._initScrollers()},_onHide:function(evt){var self=this,app=globals.getApplication();self.$$parent.toggle(!1),app.notifModalClose(),self.deferred.resolve(self._getResult()),self.destroy()},_onButton:function(evt){var self=this,$$t=$(evt.currentTarget),param=$$t.attr("data-params"),act=$$t.attr("data-action");if(act){evt.preventDefault(),evt.stopPropagation();var res;act==="$validate"?res=self._onValidate():act==="$cancel"?res=self._onCancel():res=self._onAction(act,param),utils.toPromise(res).then(function(res){res!==!1&&self.$$elmt.modal("hide")})}else self.$$elmt.modal("hide")},show:function(){var self=this,startShow=new $.Deferred;return _openModalsPromises.push(startShow),_openModalsPromises.length===1&&startShow.resolve(),self.deferred=new $.Deferred,startShow.then(function(){return self._getDataContext()}).then(function(data){self.data=data}).then(function(){self.template=self._compileTpl();var outerTpl=self._getWrapperTemplate(),header=self.template.header(self.data),footer=self.template.footer(self.data);header.length>0&&(header='<div class="modal-header">'+header+"</div>"),footer.length>0&&(footer='<div class="modal-footer">'+footer+"</div>"),self.html=outerTpl({header:header,content:self.template.content(self.data),footer:footer,displayFlags:self.getDisplayFlags()}),self._ensureParent(),self._createDOM(),self._hookEvents(),self._attachDOM()}),self.deferred.promise()},_initScrollers:function(){var self=this;HammerScroller.createSimpleScroller(self.$$elmt)},_calcSize:function(){var self=this,df=self.getDisplayFlags();if(df.modalClass.indexOf("half_center")>-1||df.modalClass.indexOf("half_right")>-1||df.modalClass.indexOf("full")>-1){var $$content=self.$$elmt.find(".modal-content"),$$header=self.$$elmt.find(".modal-header"),$$body=self.$$elmt.find(".modal-body"),$$footer=self.$$elmt.find(".modal-footer"),header=$$header.length>0?uiRect.elmtRect($$header,"outer").height:0,footer=$$footer.length>0?uiRect.elmtRect($$footer,"outer").height:0;$$body.css({top:header,height:$$content.height()-header-footer})}}});exports.ModalBase=_Klass}),define("syracuse-tablet/html/js/ui/modals/modalDiagnoses",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog","syracuse-tablet/html/deps/hammerjs-2.0.4/hammer","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/hammerScroller"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),Hammer=require("syracuse-tablet/html/deps/hammerjs-2.0.4/hammer"),uiRect=require("syracuse-tablet/html/js/ui/rect"),HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,_templateAll={header:'		<div class="modal-title {{severity}}">{{title}}</div>',content:'		<div class="s-m-modal-diag-content">			{{#each diags}} 				<message id="s-m-msg-block-{{id}}" role="alert" style="display:{{this.display}}"> 					<div style="white-space: pre-line;">{{this.message}}</div> 					{{#if stack}} 						<a id="s-m-msg-stack-{{id}}" draggable="false" name="more" href="#" data-action="more">{{../../stackShow}}</a> 						<section>							<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">								<stack name="s-m-scroll-element stack" class="s-m-msg-stack-content"> 									{{{this.stack}}} 								</stack> 							</div> 						</section>					{{/if}} 				</message> 			{{/each}}		</div>		<div class="s-m-modal-diag-goto">			{{#each diags}}				<a id="s-m-msg-goto-{{id}}" data-action="goto" data-params="{{id}}">					<i class="fa fa-circle-o" data-action="goto" data-params="{{id}}"></i>				</a>			{{/each}}		</div>',footer:'<div style="width:100%; display: inline-block;"></div><button type="button" class="btn btn-default" data-action="$cancel">{{close}}</button>'},_Klass=utils.defineClass(function ModalDiagnoses(title,diag){var self=this;modalDialog.ModalBase.call(self),self.title=title,self.diag=diag,self.diagId=0,self.curMsg=0},modalDialog.ModalBase,{destroy:function(){var self=this;this._destroySwiper(),this._gestureMgrMap&&!$.isEmptyObject(this._gestureMgrMap)&&($.each(this._gestureMgrMap,function(key,gestureMgr){gestureMgr.destroy()}),this._gestureMgrMap=null),modalDialog.ModalBase.prototype.destroy.call(self)},_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="diagnoses tablet":displayFlags.modalClass="diagnoses mobile",displayFlags},_getDataContext:function(){var self=this,ctx={close:locale.text("modal.btn.close")||"Close",stackShow:locale.text("modal.diagnoses.btnstack_show"),severity:"info",diags:[]};return self.diag.$diagnoses.forEach(function(d){var sev;d.$severity==="success"||d.$severity==="info"||d.$severity==="warning"?sev=d.$severity:(sev="danger",ctx.severity="error"),ctx.diags.push({id:self.diagId,display:self.diagId===0?"block":"none",message:d.$message,severity:sev,severityLabel:locale.text("severity."+sev),stack:d.$stackTrace&&d.$stackTrace.replace(/\n/g,"<BR/>")}),self.diagId++}),self.title=self.title||(ctx.severity==="error"?locale.text("modal.error.ttl"):locale.text("modal.info.ttl")),ctx.title=self.title,ctx},_onAction:function(action,param){var self=this;switch(action){case"next":self._next();break;case"prev":self._prev();break;case"more":self._more();break;case"goto":self._goTo(param)}return!1},_goTo:function(id){var self=this;for(var ii=0,jj=self.diagId;ii<jj;ii++)$("#s-m-msg-block-"+ii,self.$$elmt).css("display",ii==id?"block":"none");self.curMsg=parseInt(id,10),self._updateButtons()},_next:function(){var self=this;self.curMsg<self.diagId-1&&($("#s-m-msg-block-"+self.curMsg,self.$$elmt).css("display","none"),self.curMsg++,$("#s-m-msg-block-"+self.curMsg,self.$$elmt).css("display","block"),self._updateButtons())},_prev:function(){var self=this;self.curMsg>0&&($("#s-m-msg-block-"+self.curMsg,self.$$elmt).css("display","none"),self.curMsg--,$("#s-m-msg-block-"+self.curMsg,self.$$elmt).css("display","block"),self._updateButtons())},_more:function(){var self=this,$$btn=$("#s-m-msg-stack-"+self.curMsg,self.$$elmt),$$stackSection=$("section",$$btn.parent());$$stackSection.css("display")==="none"?($$stackSection.css("display","block"),$$btn.text(locale.text("modal.diagnoses.btnstack_hide")),self._handleGesture()):($$stackSection.css("display","none"),$$btn.text(locale.text("modal.diagnoses.btnstack_show")))},_updateButtons:function(){var self=this;for(var ii=0,jj=self.diagId;ii<jj;ii++){var $$navDot=$("a#s-m-msg-goto-"+ii+" i",self.$$elmt);$$navDot.toggleClass("fa-circle",ii==self.curMsg),$$navDot.toggleClass("fa-circle-o",ii!==self.curMsg)}self.diagId>1?$(".modal-title",self.$$elmt).text(self.title+" ("+(self.curMsg+1)+"/"+self.diagId+")"):$(".s-m-modal-diag-goto",self.$$elmt).css("display","none")},_onShow:function(evt){var self=this;modalDialog.ModalBase.prototype._onShow.call(self,evt),self._updateButtons(),self._checkSize(),self.diagId>1&&self._initSwiper()},_handleGesture:function(){var self=this;self._gestureMgrMap=self._gestureMgrMap||{};if(!self._gestureMgrMap["gestureMgr"+self.curMsg]){var $$scrollElmt=$(".s-m-msg-stack-content",$("#s-m-msg-block-"+self.curMsg,self.$$elmt)),$$wrapper=$(".s-m-scroll-wrapper",$("#s-m-msg-block-"+self.curMsg,self.$$elmt));self._gestureMgrMap["gestureMgr"+self.curMsg]=new HammerScroller($$scrollElmt,{direction:"v"});var scrollRect=uiRect.elmtRect($$wrapper,"outer");self._gestureMgrMap["gestureMgr"+self.curMsg].init(scrollRect)}},_onSwipe:function(evt){if(utils.isEvtDirection(evt,"v"))return;var self=this;setTimeout(function(){var next=evt?evt.type==="swipeleft":null;next?self._next():self._prev()})},_destroySwiper:function(){var self=this;self.hammer&&(self.hammer.destroy(),self.hammer=null)},_initSwiper:function(){var self=this;self._destroySwiper(),self.hammer=new Hammer($(".s-m-modal-diag-content",self.$$elmt).get(0)),self.hammer.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),this.hammer.on("swipeleft swiperight",Hammer.bindFn(self._onSwipe,self))},_checkSize:function(){var self=this,$$app=$("#s-m-app-id"),$$stacks=$("message > section",self.$$elmt);$$stacks.css({"max-height":$$app.height()-200+"px"})}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/ui/modals/modalConfirm",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/modals/modalDialog","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),locale=require("syracuse-tablet/html/js/helpers/locale"),_templateAll={header:'		<div class="modal-title">{{title}}</div>',content:'			<div class="s-m-modal-content">				{{message}}			</div>',footer:'		<button type="button" class="btn btn-default" data-action="yes">{{yes}}</button> 		<button type="button" class="btn btn-default" data-action="no">{{no}}</button>'},_checkMsg=function(msg){return msg?msg.replace(/\n/g,"<br>"):""},_Klass=utils.defineClass(function ModalConfirm(message,action,isSimpleConfirm){var self=this;modalDialog.ModalBase.call(self),self.message=message,self.action=action,self.isSimpleConfirm=isSimpleConfirm},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="confirm tablet":displayFlags.modalClass="confirm mobile",displayFlags},_getDataContext:function(){var self=this,ctx={};return ctx.title=self.isSimpleConfirm?null:locale.text("modal.confirm.ttl"),ctx.message=self.action?_checkMsg(locale.text("modal.confirm.msg",[self.action])):_checkMsg(self.message),ctx.yes=locale.text("yes"),ctx.no=locale.text("no"),ctx},_onAction:function(action,param){var self=this;return self.selectedAction=action,!0},_getResult:function(){var self=this;return self.selectedAction}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/ui/modals/modalField",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/modals/modalDialog","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),locale=require("syracuse-tablet/html/js/helpers/locale"),_templateAll={header:'		<buttons class="pull-right"> 			<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 		</buttons> 		<div class="modal-title">{{title}}</div>',content:"{{{domBody}}}",footer:""},_Klass=utils.defineClass(function ModalField(title,domBody,cb){var self=this;modalDialog.ModalBase.call(self),self.title=title||"Warning",self.domBody=domBody,self.cb=cb},modalDialog.ModalBase,{destroy:function(){modalDialog.ModalBase.prototype.destroy.call(this),this.domBody=null,this.cb=null},_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="field tablet":displayFlags.modalClass="field mobile",displayFlags},_getDataContext:function(){var self=this;return{title:self.title,domBody:self.domBody,close:locale.text("modal.btn.close")}},_onShow:function(evt){var self=this;modalDialog.ModalBase.prototype._onShow.call(self,evt),self._execCb(self.cb,"shown.bs.modal",self.$$elmt)},_onCancel:function(){return!0},_onHide:function(evt){var self=this;modalDialog.ModalBase.prototype._onHide.call(self,evt),self._execCb(self.cb,"hide.bs.modal",self.$$elmt)},_execCb:function(cb,msg,data){if(!cb||arguments.length==0)return;var cb=arguments[0],args=Array.prototype.slice.call(arguments,1);cb.apply(null,args)}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/ui/modals/modal",["require","exports","module","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/native/native","syracuse-tablet/html/js/ui/modals/modalDiagnoses","syracuse-tablet/html/js/ui/modals/modalConfirm","syracuse-tablet/html/js/ui/modals/modalField"],function(require,exports,module){var uiutils=require("syracuse-tablet/html/js/ui/uiUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),native=require("syracuse-tablet/html/js/helpers/native/native"),ModalDiagnoses=require("syracuse-tablet/html/js/ui/modals/modalDiagnoses").Modal,ModalConfirm=require("syracuse-tablet/html/js/ui/modals/modalConfirm").Modal,ModalField=require("syracuse-tablet/html/js/ui/modals/modalField").Modal,_checkMsg=function(msg){return msg?msg.replace(/\n/g,"<br>"):""},_templates={confirm:' 		<div class="modal fade" id="modal-confirm" tabindex="-1" role="dialog"> 			<div class="modal-dialog s-m-modal-layout">				<header>					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 				</header>				<section>					<div class="s-m-modal-content row">						<div class="col-md-4"></div>						<div class="col-md-4">							<header>{{title}}</header>							<section>{{message}}</section>							<footer>								<button type="button" class="btn btn-default" data-action="yes">{{yes}}</button> 				                <button type="button" class="btn btn-default" data-action="no">{{no}}</button> 							</footer>						</div>					<div class="col-md-4"></div>				</div>				</section>			</div> 		</div>',error:' 		<div class="modal fade" id="modal-error" tabindex="-1" role="dialog"> 			<div class="modal-dialog s-m-modal-layout">				<header>					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 				</header>				<section>					<div class="s-m-modal-content row">						<div class="col-md-4"></div>						<div class="col-md-4">							<header class="error">{{title}}</header>							<section>{{body}}</section>							<footer><button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button></footer>						</div>						<div class="col-md-4"></div>					</div>				</section>			</div> 		</div>',info:'		<div class="modal fade" id="modal-info" tabindex="-1" role="dialog"> 		    <div class="modal-dialog s-m-modal-layout">		    	<header>		    		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 		    	</header>		    	<section>		    		<div class="s-m-modal-content row">			    		<div class="col-md-4"></div>			    		<div class="col-md-4">			    			<header class="info">{{title}}</header>			    			<section>{{body}}</section>			    			<footer><button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button></footer>			    		</div>			    		<div class="col-md-4"></div>		    		</div>		    	</section>			</div> 		</div>',field:'		<div class="modal fade" id="modal-field" tabindex="-1" role="dialog"> 		    <div class="modal-dialog"> 				<div class="modal-content"> 				    <div class="modal-header"> 						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 						<h4 class="modal-title" id="myModalLabel">{{title}}</h4> 				    </div> 				    <div class="modal-body"> 				       {{{body}}} 				    </div> 				    <div class="modal-footer"> 				        <button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button> 					</div> 				</div> 			</div> 		</div>',actionMessage:'		<div class="s-m-act-msg {{severityClass}}">			<a draggable="false" href="#"><span class="glyphicon glyphicon-remove"></span></a>			<header>				<div>{{title}}</div>			</header>			<section>				<article>{{message}}</article>			</section>			<footer></footer>		</div>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_execCb=function(cb,msg,data){if(!cb||arguments.length==0)return;var cb=arguments[0],args=Array.prototype.slice.call(arguments,1);cb.apply(null,args)},_error=function(title,e,cb){var diag;return diag=jsutils.convertToDiagnoses(title,e),title==null&&e&&e.$title&&(title=e.$title),_diagnoses(title,diag,cb)},_diagnoses=function(title,diag,cb){var modal=new ModalDiagnoses(title,diag);modal.show().then(function(result){cb&&cb(result)})},_info=function(title,text,cb){var infoDiag={$diagnoses:[{$severity:"info",$message:text}]};_diagnoses(title,infoDiag,cb)},_confirm=function(action,cb){var modal=new ModalConfirm(null,action);modal.show().then(function(result){cb&&(result==="yes"||result==="no")&&cb(result,"yes"===result)})},_simpleConfirm=function(message,cb){var modal=new ModalConfirm(message,null,!0);modal.show().then(function(result){cb&&(result==="yes"||result==="no")&&cb(result,"yes"===result)})};exports.simpleConfirmPromise=function(options){var deferred=$.Deferred(),modal=new ModalConfirm(options.message,null,!0);return modal.show().then(function(result){(result==="yes"||result==="no")&&deferred.resolve({action:result})}),deferred.promise()};var _field=function(title,domBody,cb){var modal=new ModalField(title,domBody,cb);modal.show()},_actionResult=function(title,obj,forceToast){obj=jsutils.convertToDiagnoses(obj);if(!obj||!obj.$diagnoses||obj.$diagnoses.length==0)return;var hasStack=!1,hasError=!1,text=[];obj.$diagnoses.forEach(function(diag){text.push(diag.$message),diag.$severity=="error"&&(hasError=!0,hasStack=hasStack||diag.$stackTrace!=null)});if(!hasStack||forceToast===!0){var options={title:title,body:text.join("\n"),severityClass:hasError?"error":"success",$$parentSlot:globals.getApplication().getMessageSlot()};options.onlyWebapp===!1&&native.hasCapability("toastMessages")?native.getModule("toastMessages").showToastMessage({Text1:options.title,Text2:options.body,Severity:hasError?"error":"success"}):_notificationHandler(options)}else _diagnoses(title,obj)},_notificationHandler=function(options){function toggle(){$$actionModal.toggleClass("show")}function clear(){toggle(),setTimeout(function(){$$actionModal.remove(),options.$$parentSlot.children().length==0&&options.$$parentSlot.hide()},500)}var h=_getHtml("actionMessage",{title:options.title,message:options.body,severityClass:options.severityClass}),isClosing,$$actionModal=$(h);options.$$parentSlot.prepend($$actionModal),options.$$parentSlot.show();var $$closer=$$actionModal.find("a");$$closer.bind("click",function(){clear(),isClosing=!0}),setTimeout(function(){toggle()},50);var toggleTimeout=setTimeout(function(){isClosing||clear()},5e3)},_modal=function(html,cb){uiutils.waitWheelStop();var app=globals.getApplication();app&&app.currentPage&&app.currentPage.waitWheelStop();var h=$(html).modal({keyboard:!1,backdrop:"static"}),viewportHeight=$(window).height();$(".modal-body",h).css("max-height",viewportHeight*.7);var $$md=$(h),$$parent=$("#s-m-modal-parent")&&$("#s-m-modal-parent").length>0?$("#s-m-modal-parent"):$("<div>").attr("id","s-m-modal-parent");$$parent.append($$md),$("#s-m-app-id").append($$parent),$$parent.toggle(!0);var done=!1;return h.on("shown.bs.modal",function(evt){try{_execCb(cb,"shown.bs.modal",h)}catch(e){alert("Modal open - call back error"+e.stack)}app.notifModalOpen()}),app.notifModalClose(),h.on("hide.bs.modal",function(){$("#s-m-modal-parent").toggle(!1),app.notifModalClose();if(!done&&cb)try{_execCb(cb,"hide.bs.modal",h)}catch(e){alert("Modal close - call back error"+e.stack)}h.unbind(),h.remove()}),h.delegate("button[data-action]","click",function(evt){var t=$(evt.target),act=t.attr("data-action");act&&(done=!0,evt.preventDefault(),evt.stopPropagation(),_execCb(cb,act,h,t.attr("data-params"))),h.modal("hide")}),h};exports.notify=function(options){options.$$parentSlot=options.$$parentSlot||globals.getApplication()&&globals.getApplication().getMessageSlot();var supportsToast=native.hasCapability("toastMessages"),onlyWebapp=options&&options.onlyWebapp;onlyWebapp=onlyWebapp!=null?onlyWebapp:!0;if(onlyWebapp||!supportsToast){_notificationHandler(options);return}supportsToast&&native.getModule("toastMessages").showToastMessage({Text1:options.title,Text2:options.body,Severity:options.severityClass})};var _displayActionMsg=function(success,name,proto,data){var obj;data&&data.$diagnoses&&data.$diagnoses.length>0?obj=data:obj={$diagnoses:[{$message:locale.text("modal.action."+(success?"success":"fail")),$severity:success?"success":"error",$stackTrace:JSON.stringify(data)}]};var title=name;if(proto){var links=proto.data("$links"),link=links&&links[name];link&&link.$title&&(title=proto.resolveExpression(link.$title))}_actionResult(title,obj)};exports.error=_error,exports.info=_info,exports.diagnoses=_diagnoses,exports.field=_field,exports.confirm=_confirm,exports.simpleConfirm=_simpleConfirm,exports.modal=_modal,exports.actionResult=_actionResult,exports.displayActionMsg=_displayActionMsg}),define("syracuse-tablet/html/js/init/initStyles",["require","exports","module","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){function _loadCss(file){var ref=document.createElement("link");ref.setAttribute("rel","stylesheet"),ref.setAttribute("type","text/css"),ref.setAttribute("href",file),document.getElementsByTagName("head")[0].appendChild(ref)}function _getOS(){var mobile=/iphone|ipad|ipod|android|blackberry|mini|windows|palm/i.exec(),map={iphone:"ios",ipad:"ios",ipod:"ios",android:"android",windows:"windows"};return $.smUrlParam("forceLookAndFeel")||map[mobile||"windows"]||"windows"}function _isSurfaceTablet(){navigator.userAgent.toLowerCase().indexOf("tablet pc")>-1&&navigator.userAgent.toLowerCase().indexOf("windows")>-1}function _isReleaseVersion(){return document.location.href.indexOf("index_debug.html")<0&&document.location.href.indexOf("index_release.html")<0}var globals=require("syracuse-tablet/html/js/helpers/globals");exports.init=function(){var deferred=new $.Deferred,os=_getOS(),styles;styles=os;var cssPlatform="./css/gen/"+styles+(_isReleaseVersion()?".min":"")+".css";_loadCss(cssPlatform);var cssGeneral="./css/default"+(_isReleaseVersion()?".min":"")+".css";return _loadCss(cssGeneral),deferred.resolve(),globals.setLookAndFeel(styles),deferred.promise()}}),define("syracuse-tablet/html/js/init/initLocale",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var locale=require("syracuse-tablet/html/js/helpers/locale");exports.init=function(){var lang="en-GB";return locale.setLocale(lang)}}),define("syracuse-tablet/html/js/controls/ctrlFactory",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("factory"),globals=require("syracuse-tablet/html/js/helpers/globals"),_ctor={},_types={string:"application/x-string",password:"application/x-password",text:"text/plain",integer:"application/x-integer",real:"application/x-real",decimal:"application/x-decimal",quantity:"application/x-quantity",choice:"application/x-choice","boolean":"application/x-boolean",date:"application/x-date",time:"application/x-time",datetime:"application/x-datetime",reference:"application/x-reference",array:"application/x-array",image:"image",doc:"application/x-document",binary:"application/x-binary",soapObject:"application/x-object",textRtf:"text/rtf",textHtml:"text/html",textPlain:"text/plain",vignette:"tablet/x-vignette",layout:"tablet/x-layout",filter:"application/x-filter",breadcrumbs:"tablet/x-page-breadcrumbs",pageheader:"tablet/x-page-header",pagefooter:"tablet/x-page-footer",vignettefooter:"tablet/x-page-vignette-footer",vignetteheader:"tablet/x-page-vignette-header",panelactionregular:"tablet/x-page-panel-actionregular",panelusersmartphone:"tablet/x-page-panel-usersmartphone",panelfiltersort:"tablet/x-page-panel-filtersort",panelpagesettings:"tablet/x-page-panel-pagesettings",icon:"tablet/x-icon",button:"tablet/x-button",unfound:"tablet/x-unfound",rowStatus:"tablet/x-row-status",rowIndex:"tablet/x-row-index",chartDetailToolbar:"tablet/x-chartdetail-toolbar"},_createCellFieldCtrl=function($$parentCell,controller,ctrlArticle,ctrlProto,options){return options=options||{},options.displayCtx="table",_createControl(controller,null,ctrlArticle,ctrlProto,options)},_createControl=function(controller,parentStructElmt,article,prototype,options){if(!controller)throw new Error("createControl - null parent or controller");options=options||{};var c,type=prototype.data("$type");switch(type){case _types.string:case _types.password:switch(prototype.data("$format")){case"$phone":c=new _ctor.PhoneField(controller,article,prototype,options);break;case"$email":c=new _ctor.EmailField(controller,article,prototype,options);break;case"$url":c=new _ctor.UrlField(controller,article,prototype,options);break;default:c=new _ctor.Alphanum(controller,article,prototype,options)}break;case _types.integer:case _types.real:case _types.decimal:case _types.quantity:article.$numDisplay?(!article.$gauge&&article.$numDisplay==="gauge"&&(article.$gauge={}),article.$numDisplay==="normal"?type===_types.quantity?c=new _ctor.Quantity(controller,article,prototype,options):c=new _ctor.Numeric(controller,article,prototype,options):c=new _ctor.Gauge(controller,article,prototype,options)):article.$gauge?c=new _ctor.Gauge(controller,article,prototype,options):type===_types.quantity?c=new _ctor.Quantity(controller,article,prototype,options):c=new _ctor.Numeric(controller,article,prototype,options);break;case _types.choice:c=new _ctor.Combo(controller,article,prototype,options);break;case _types.boolean:switch(prototype.data("$format")){case"$switch":c=new _ctor.Switch(controller,article,prototype,options);break;default:c=new _ctor.CheckBox(controller,article,prototype,options)}break;case _types.date:case _types.time:case _types.datetime:c=new _ctor.Date(controller,article,prototype,options);break;case _types.reference:c=new _ctor.Reference(controller,article,prototype,options);break;case _types.array:prototype.data("$cube")?c=new _ctor.ArrayChart(controller,article,prototype,options):c=new _ctor.Array(controller,article,prototype,options);break;case _types.vignette:c=new _ctor.Vignette(controller,article,prototype,options);break;case _types.image:c=new _ctor.Image(controller,article,prototype,options);break;case _types.doc:c=new _ctor.Document(controller,article,prototype,options);break;case _types.binary:c=new _ctor.Binary(controller,article,prototype,options);break;case _types.icon:c=new _ctor.Icon(controller,article,prototype,options);break;case _types.button:c=new _ctor.Button(controller,article,prototype,options);break;case _types.textRtf:case _types.textHtml:case _types.textPlain:c=new _ctor.Text(controller,article,prototype,options);break;case _types.soapObject:throw new Error("not implemented");case _types.unfound:c=new _ctor.FieldUnfound(controller,article,prototype,options);break;case _types.rowStatus:c=new _ctor.FieldRowStatus(controller,article,prototype,options);break;case _types.rowIndex:c=new _ctor.FieldRowIndex(controller,article,prototype,options);break;case _types.filter:c=new _ctor.Filter(controller,article,prototype,options);break;default:if(!globals.isDvlpMode())return;c=new _ctor.TypeUnknown(controller,article,prototype,options)}if(options.displayCtx==="table")return c;if(!parentStructElmt)throw new Error("createControl - Parent's control is mandatory");return parentStructElmt.appendStructElmt(c),options.displayCtx!=="card"&&controller.addControl(c),c},_createLayout=function(controller,parentStructElmt,article,opts){var type=article.$layoutType||"stack",klass;if(type=="stack")klass=_ctor.LayoutStack;else if(type=="row")klass=_ctor.LayoutRow;else if(type=="tab")klass=_ctor.LayoutTab;else if(type=="hub")klass=_ctor.LayoutHub;else if(type=="hubGroup")klass=_ctor.LayoutHubGroup;else if(type=="tile")klass=_ctor.LayoutTile;else{if(type!="cell")return log&&log("layout type="+type+" is not implemented"),null;klass=_ctor.LayoutCell}var l=new klass(controller,type,article,opts);return parentStructElmt?parentStructElmt.appendStructElmt(l):l.parent=controller,controller.addLayout(l),l},_createPageControl=function(type,controller,options){options=options||{};var c;switch(type){case"breadcrumbs":c=new _ctor.BreadCrumbs(_types.breadcrumbs,controller,options);break;case"header":c=new _ctor.PageHeader(_types.pageheader,controller,options);break;case"footer":c=new _ctor.PageFooter(_types.pagefooter,controller,options);break;case"topToolbarChartDetail":c=new _ctor.ChartDetailToolbar(_types.chartDetailToolbar,controller,options);break;default:throw new Error("Unknown page control["+type+"]")}return controller.addControl(c),c},_createActionControl=function(type,vignette,options){if(type==="footer")return new _ctor.VignetteFooter(_types.vignettefooter,vignette,options);if(type==="header")return new _ctor.VignetteHeader(_types.vignetteheader,vignette,options);throw new Error("Unknown vignette action control["+type+"]")},_createPanel=function(controller,panelId,options){var deviceType=globals.getSiteLayout().getDeviceType();options=options||{deviceType:deviceType};switch(panelId){case globals.PANELACTIONSREGULAR:return new _ctor.PageActionPanelRegular(controller,_types.panelactionregular,panelId,options);case globals.PANELUSERSMARTPHONE:return new _ctor.UserPanelSmartphone(controller,_types.panelusersmartphone,panelId,options);case globals.PANELFILTERSORT:return new _ctor.FilterSortPanel(controller,_types.panelfiltersort,panelId,options);case globals.PANELPAGESETTINGS:return new _ctor.PageSettingsPanel(controller,_types.panelpagesettings,panelId,options);default:throw new Error("Unknown page control["+panelId+"]")}},_createBindControl=function(controller,parentStructElmt,article){if(!controller)throw new Error("Control - null parent or controller");var c=new _ctor.StructElmt(controller,"$dummyBind",article,{},{});if(!parentStructElmt)throw new Error("Parent's control is mandatory");return parentStructElmt.appendStructElmt(c),c};exports.createPanel=_createPanel,exports.createControl=_createControl,exports.createLayout=_createLayout,exports.createPageControl=_createPageControl,exports.createActionControl=_createActionControl,exports.createCellFieldCtrl=_createCellFieldCtrl,exports.createBindControl=_createBindControl,exports.type=function(name){return _types[name]},exports.setImpl=function(name,ctor){_ctor[name]=ctor}}),define("syracuse-tablet/html/js/helpers/articleParser",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("articleParser"),utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_isSingleArray=function(jsonArrayProto){return jsonArrayProto.$item.$properties==null||jsonArrayProto.$type=="application/x-reference"},_Parser=utils.defineClass(function(page){var self=this;self.page=page},null,{_doParse:function(article,prototype,parent,opts,unfounds){var self=this;if(article.$layoutType){var lyt=ctrlFactory.createLayout(self.page,parent,article,opts);return lyt&&article.$items&&article.$items.forEach(function($itm){self._doParse($itm,prototype,lyt,opts,unfounds)}),lyt}if(article.$bind){var fieldProto=prototype.getPrototype(article.$bind);fieldProto==null&&article.$isUnfound!==!0?unfounds.push(article):(article.$isUnfound&&(fieldProto=prototype.create({$type:"tablet/x-unfound"})),fieldProto.data("$isExcluded")||ctrlFactory.createControl(self.page,parent,article,fieldProto,opts))}else log&&log("$layoutType or $bind exspected")},parse:function(article,prototype,opts){var self=this;try{if(!article||!prototype)throw new Error("Not empty article and prototype are expected");article.$layoutType||(article.$layoutType="stack");var unfounds=[];opts.$localization=utils.getArticleLocalization(article);var root=self._doParse(article,prototype,null,opts,unfounds);if(unfounds.length>0&&globals.getDvlpOpt("showUnfoundFields")){var article={$layoutType:"stack",$items:[]};unfounds.forEach(function(f){article.$items.push($.extend(!0,f,{$isUnfound:!0}))}),self._doParse(article,prototype,root,opts,null)}return root}catch(e){throw log&&log("article parser error",e),new Error("Error parsing article ["+e.message+"]\n"+jsutils.cleanStack(e.stack))}}}),_article2Controls=function(page,article,prototype,opts){var p=new _Parser(page);return p.parse(article,prototype,opts)},_defOption={skipblock:!0,skipsection:!0,include:["$category","$layoutType","$title","$bind"],exclude:["$items","$widths"],protoExclude:["application/x-array","application/json"]},_convertWidth=function(widths){var r=[];widths=widths.split(",");if(widths.length===0)throw new Error("Number of cells/rows must be > 0");if(widths.length>12)throw new Error("Number of cells/rows must be <= 12");var sum=0;widths.forEach(function(w){w=parseInt(w,10),w=Math.ceil(w/12),sum+=w,r.push(w)});if(sum>12){var d=sum-12;r.sort();while(d>0)for(var i=r.length-1;i>=0;i--)d>0&&r[i]>1&&(r[i]=r[i]-1,d--)}else if(sum<12){var d=12-sum;r.sort();while(d>0)for(var i=0;i<r.length;i++)d>0&&(r[i]=r[i]+1,d--)}return r.join(",")},_scanDesktop=function(json,options){if(!json)return null;var res;json.$layout?res=_scanDesktop(json.$layout,options):res={};if(json.$layoutType){if(!json.$items)throw new Error("$items is missing");res.$items=[],json.$items.forEach(function(itm){res.$items.push(_scanDesktop(itm,options))})}for(var p in json)p==="$widths"?res[p]=_convertWidth(json[p]):options.exclude.indexOf(p)===-1&&options.include.indexOf(p)>=0&&(res[p]=json[p]);return res},_convertDesktop=function(article,prototype,options){return options=$.extend({},_defOption,options),_scanDesktop(article,options)},_coreLayout2DefaultLayout=function(coreLayout,article,props){var p=new _LayoutParser;p.parse(coreLayout,article,props)},_LayoutParser=utils.defineClass(function(){var self=this},null,{_doParse:function(coreLayout,article,props){var self=this;if(!coreLayout)return;var idx,idx1;coreLayout.$items.forEach(function($itm){switch($itm.$category){case"section":idx=article.$items.push({$title:$itm.$title,$layoutType:"stack",$items:[]}),self._doParse($itm.$layout,article.$items[idx-1],props);break;case"block":idx=article.$items.push({$title:$itm.$title,$layoutType:"stack",$items:[]}),idx1=article.$items[idx-1].$items.push({$layoutType:"row",$items:[]}),self._doParse($itm.$layout,article.$items[idx-1].$items[idx1-1],props);break;default:props[$itm.$bind]&&!props[$itm.$bind].$isExcluded&&(idx=article.$items.push({$layoutType:"cell",$bgColor:"",$items:[]}),article.$items[idx-1].$items.push({$bind:$itm.$bind}));return}})},parse:function(proto,article,props){this._doParse(proto.$article.$layout,article,props)}});exports.coreLayout2DefaultLayout=_coreLayout2DefaultLayout,exports.article2Controls=_article2Controls,exports.convertDesktop=_convertDesktop,exports.isSingleArray=_isSingleArray}),define("syracuse-tablet/html/js/helpers/prototype",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/articleParser"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),articleParser=require("syracuse-tablet/html/js/helpers/articleParser"),_getArrayJsonProto=function(proto){if(!proto)return null;var json;return $.isPlainObject(proto)?json=proto:proto.isArray()?json=proto.json:proto.parent&&(json=proto.parent.json),json==null||json.$type!=="application/x-array"?null:json},_testFacet=/representation=.*\.\$(\w+)[&]*/,_reg1=/{[^}]+}/g,_reg2=/[{}]/g,_Prototype=utils.defineClass(function(json,parent){var self=this;this.json=json||{},typeof this.json=="string"&&(this.json=JSON.parse(self.json)),parent&&(this.parent=parent),this.init()},null,{init:function(){var props=this.json.$properties;if(!props)return;for(var p in props)props[p].$type==="application/x-reference"&&this.initRefField(props[p],p)},destroy:function(){this.parent=null,this.json=null},data:function(prop,dataContext,ignoreParent,noResolve){if(!prop||prop.length==0)return null;var val=this.json[prop];if(val==null){ignoreParent==null&&["$title","$description"].indexOf(prop)>-1&&(ignoreParent=!0);var pVal=ignoreParent!==!0&&this.parent?this.parent.data(prop,dataContext,null,!0):val;return pVal!=null&&(this.json[prop]=pVal),pVal}return noResolve?val:this.resolveExpression(val,dataContext,!0)},property:function(name,prop,dataContext){if(!name||name.length===0)return null;var o=this.json.$properties?this.json.$properties[name]:this.parent?this.parent.property(name):null;return!o||!prop?o:this.resolveExpression(o[prop],dataContext)},isReference:function(propname){var res;if(this._cacheRef!=null){res=this._cacheRef[propname];if(res!=null)return res}var p=this.property(propname);return res=p!=null&&p.$type==="application/x-reference",this._cacheRef||(this._cacheRef={}),this._cacheRef[propname]=res,res},isArray:function(){return this.json.$type==="application/x-array"},isBlob:function(){var t=this.json.$type;return t==="image"||t==="application/x-document"||t==="application/x-array"},isHidden:function(){return this.json.$isHidden===!0||!1},resolveExpression:function(val,dataContext,searchInParent,keepPlaceholder){return val&&val.indexOf&&val.indexOf("{")>=0&&(val=utils.parseExpression(val,dataContext,this,searchInParent,keepPlaceholder)),val},localization:function(val){var self=this,loc=self.json.$localization||{};return loc[val]?loc[val]:self.parent?self.parent.localization(val):null},getPrototype:function(prop,override,facet){var json;if(prop.indexOf(".")>0)json=this.getDataByPath(prop);else if(prop==="$item"){json=this.data(prop);if(this.isSingleArray(!0)){var newJson={$properties:{},$type:"application/json"};newJson.$properties[globals.SINGLEARRAYPROP]=json,json=newJson}}else json=this.property(prop);if(!json)return null;override=$.extend(!0,{},json,override);var proto=exports.create(override,this);return proto.json.$links&&Object.keys(proto.json.$links).forEach(function(key){key.indexOf("$")!=0&&(proto.json.$links[key].$url&&proto.json.$links[key].$url.indexOf("http")==0||proto.json.$links[key].$url==="")&&(proto.json.$format=proto.json.$format||"$url",proto.json.$urlkey=key)}),facet&&(proto._facet=facet),proto},isCube:function(){return this.isFacet("cube")},isQuery:function(){return this.isFacet("query")},isLookup:function(){return this.isFacet("lookup")},isQueryLikeFacet:function(){return this.isQuery()||this.isLookup()||this.isCube()||this.isRequest()},isDetails:function(){return this.isFacet("details")},isRequest:function(){return this.json.codeRequest!=null&&this.json.codeRequest.length>0},isStatistics:function(){return this.json.codeStat!=null&&this.json.codeStat.length>0},acceptServerPagination:function(){return this.isQuery()||this.isLookup()||this.isRequest()},isFacet:function(){return Array.prototype.indexOf.call(arguments,this.getFacet())>=0},formatDisplay:function(prop,dataContext){var self=this,info=self.property(prop)},addProperty:function(name,descr){var self=this;descr&&self.json.$properties&&!self.json.$properties[name]&&(self.json.$properties[name]=descr)},getPropTitle:function(propName){var self=this,prop=self.property(propName);return prop&&prop.$title?self.resolveExpression(prop.$title):""},getUrlLink:function(propName){var prop=this.property(propName,"$links");return prop?prop[this.json.$urlkey]:null},getFacet:function(){if(this._facet==null){var p=this,t;while(p!=null&&t==null)p.json.$url!=null&&p.json.$url.trim().length!=0&&(t=_testFacet.exec(p.json.$url),t=t!=null&&t.length==2?t[1]:null),p=p.parent;this._facet=t||""}return this._facet},getFieldNameForValue:function(name){var protoField=this.property(name),item=protoField&&protoField.$item;return item&&item.$refValue?item.$refValue:name},getFieldTypeForValue:function(name){var protoField=this.property(name),item=protoField&&protoField.$item,type=item&&item.$refValueType?item.$refValueType:null,value=protoField&&protoField.$value;return type=value&&value.$type?value.$type:null,type?type:protoField.$type},initRefField:function(protoField,name){var self=this;if(!protoField)throw new Error("Field proto expected["+name+"]");var item=protoField.$item;if(!item||item.$refValue)return;item.$refValue=item.$lookupValue=name;if(item.$value&&typeof item.$value=="string"){var vals=item.$value.match(_reg1);if(!vals||vals.length!=1)throw new Error("Prototype.initRefField - Only one value is expected");var f1=vals[0].replace(_reg2,"").trim();item.$lookupValue=f1;if(item[f1]){var f2=item[f1].replace(_reg2,"").trim();self.property(f2)&&(item.$refValue=f2)}else item.$refValue=f1}if(item.$refValue){var p=self.property(item.$refValue);p&&p.$type&&(item.$refValueType=p.$type)}return item.$refValue},getDataByPath:function(path){return this._cahePath||(this._cahePath={}),utils.getPropByPath(this.json,path,this._cahePath)},getVignetteGadget:function(){return this.data("$gadget")},getUnitFieldInfo:function(){var self=this,res={};res.$unit=self.data("$unit");if(typeof res.$unit=="object")res.unitBindName="$unit",res.unitFieldProto=exports.create($.extend({},self.$unit));else if(typeof res.$unit=="string"){res.unitBindName=res.$unit;var parent=self.parent;while(parent){var unitProto=parent.property(res.$unit);if(unitProto){res.unitFieldProto=exports.create($.extend({},unitProto));break}parent=parent.parent}}return res},isSingleArray:function(noFail,field){var jsonArray;if(field!=null)jsonArray=this.property(field);else{if(this.$singleArray)return this.$singleArray;jsonArray=_getArrayJsonProto(this)}if(jsonArray==null&&noFail)return!1;if(jsonArray==null)throw new Error("Unexpected parent array");var res=articleParser.isSingleArray(jsonArray);return field!=null&&(this.$singleArray=res),res},getPropertyNames:function(){var props=this.json.$properties;return props?Object.keys(props):[]},getProperties:function(select){var props=this.json.$properties,$properties=[];return Object.keys(props).forEach(function(v){select(props[v],v)&&($properties[v]=$.extend(!0,{},props[v],{}))}),$properties},create:function(json,notChild){return exports.create($.extend(!0,{},json),notChild===!0?null:this)},arrayTableGetColInfo:function(){var base={$title:"",$titleOrig:"",$type:"",$bind:"",$widthType:"auto",$imgHeight:"small",$widthVal:0,$capabilities:""},res=[];if(this.isSingleArray()){var prop=this.getDataByPath("$item"),p=$.extend({},base,prop);p.$title=this.resolveExpression(this.$title),p.$titleOrig=this.$title,p.$bind=globals.SINGLEARRAYPROP,res.push(p)}else{var props=this.getDataByPath("$item.$properties");if(!props)return null;var prop,self=this,itemProto=this.getPrototype("$item");Object.keys(props).forEach(function(key){prop=props[key];if(prop.$isHidden!==!0&&prop.$isExcluded!==!0&&globals.EXCLUDEFIELDS.indexOf(key)<0){var p=$.extend({},base,prop);p.$title=self.resolveExpression(prop.$title),p.$titleOrig=prop.$title,p.$bind=key,p.$bindValue=itemProto.getFieldNameForValue(key),p.$bindType=itemProto.getFieldTypeForValue(key),res.push(p)}})}return res},chartGetMeasureInfo:function(){var res={},prop,props=this.getDataByPath("$item.$properties"),measures=this.getDataByPath("$cube.$measures");return Object.keys(measures).forEach(function(key){prop=props[key],prop.$bind=key,res[key]=prop}),res},chartGetNbMeasures:function(){var res=0,measures=this.getDataByPath("$cube.$measures");return Object.keys(measures).forEach(function(key){res++}),res},getRepDotFacet:function(){var self=this;return self.data("$type").split(".").slice(-2).join(".")},isValid:function(){return this.json!=null},getLayoutCategoriesTitle:function(){function _walk($layout){if(!$layout)return;return $layout.$items.forEach(function(item){var tit={};item.$title&&!uniqTitle[item.$title]&&(uniqTitle[item.$title]={},tit.value=item.$title,tit.title=self.resolveExpression(item.$title),title.push(tit)),_walk(item.$layout)}),title}var title=[],uniqTitle={},self=this;return _walk(this.getDataByPath("$article.$layout")),title},getAllX3Title:function(){var title=[],self=this,localization=self.json.$localization||{};return Object.keys(localization).forEach(function(key){var tit={};tit.value="{"+key+"}",tit.title=localization[key],title.push(tit)}),title.sort(function(a,b){var aTit=a.title.toLowerCase(),bTit=b.title.toLowerCase();return aTit<bTit?-1:aTit>bTit?1:0})}});exports.getRowIdxProto=function(){return exports.create({$type:"tablet/x-row-index"})},exports.create=function(json,parent){return new _Prototype(json,parent)}}),define("syracuse-tablet/html/js/authoring/authoringArticleGen",["require","exports","module","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/articleParser"],function(require,exports,module){function _generateRegularArticle(proto,orientation,tpl,synch){proto=$.isPlainObject(proto)?proto:proto.json,proto.$type==="application/x-array"&&(proto=proto.$item);var props=proto.$properties,$items,prop,forceNoTitle=_getFacet(proto.$url)==="query";if(orientation==="horizontal"){article={$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"",$items:[]}]};if(tpl===!1)return $.smResolve(article);var groupItems=article.$items[0].$items,maxItemsPerGroup=4,itemsPerGroup=maxItemsPerGroup,tileItems,singlePropTypes=["application/x-array","application/x-document","image"];for(var p in props){prop=props[p];if(prop.$isExcluded!==!0){if(singlePropTypes.indexOf(prop.$type)>-1){var tile={$layoutType:"tile",$size:"large",$items:[]};groupItems.push(tile),tileItems=tile.$items,itemsPerGroup=maxItemsPerGroup}else if(itemsPerGroup>=maxItemsPerGroup){itemsPerGroup=0;var tile={$layoutType:"tile",$size:"large",$items:[]};groupItems.push(tile),tileItems=tile.$items}itemsPerGroup+=1;var a={$bind:p};forceNoTitle?a.$isTitleHidden=forceNoTitle:a.$labelPosition="top",tileItems.push(a)}}}else{var article={$layoutType:"stack",$items:[]};if(tpl===!1)return $.smResolve(article);if(!proto||!proto.$article||!proto.$article.$layout){$items=article.$items;for(var p in props){prop=props[p];if(prop.$isExcluded!==!0){var a={$bind:p};forceNoTitle&&(a.$isTitleHidden=forceNoTitle),$items.push(a)}}}else articleParser.coreLayout2DefaultLayout(proto,article,props)}return synch===!0?article:$.smResolve(article)}var jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),articleParser=require("syracuse-tablet/html/js/helpers/articleParser"),_testFacet=/representation=.*\.\$(\w+)[&]*/,_getFacet=function($url){var t=_testFacet.exec($url||"");return t!=null&&t.length==2?t[1]:null};exports.genNewArticle=function(opts,synch){var proto;return proto=opts.page.prototype,jsutils.isInstanceOf(opts.page,"DashboardPage")?exports.generateDashboardArticle(proto,opts.orientation,opts.template,synch):_generateRegularArticle(proto,opts.orientation,opts.template,synch)},exports.generateDashboardArticle=function(proto,orientation,tpl,synch){var article;proto=$.isPlainObject(proto)?proto:proto.json;var props=proto.$properties;if(orientation==="horizontal"){article={$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"",$items:[]}]};if(tpl===!1)return $.smResolve(article);Object.keys(props).forEach(function(key){var prop=props[key];article.$items[0].$items.push({$layoutType:"tile",$size:"medium",$items:[{$bind:key}]})})}else{article={$layoutType:"stack",$items:[]};if(tpl===!1)return $.smResolve(article);var cellCount=4,row;Object.keys(props).forEach(function(key){cellCount===4&&(cellCount=0,row={$layoutType:"row",$items:[]},article.$items.push(row));var prop=props[key];row.$items.push({$layoutType:"cell",$widthXs:12,$widthSm:6,$widthMd:4,$widthLg:3,$items:[{$bind:key}]})})}return synch===!0?article:$.smResolve(article)}}),define("syracuse-tablet/html/js/helpers/dashboardUtils",["require","exports","module","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/authoring/authoringArticleGen"],function(require,exports,module){var prototype=require("syracuse-tablet/html/js/helpers/prototype"),authArticleGen=require("syracuse-tablet/html/js/authoring/authoringArticleGen"),_getDashboardProto=function(dash){var proto={$title:dash.$title,$description:dash.$description,$properties:{},$dashboardName:dash.$dashboardName},vignetteIds=Object.keys(dash.$vignettes||[]);for(var i=0;i<vignetteIds.length;i++){var vignetteId=vignetteIds[i],property=$.extend({},dash.$vignettes[vignetteId]),gadgetId=property.$uuid;property.$gadget=dash.$gadgets[gadgetId],property.$gadget?(property.$gadget=$.extend({},property.$gadget),property.$gadget.$uuid=gadgetId,property.$uuid=vignetteId,property.$type="tablet/x-vignette",property.$title=property.$gadget.$title):(property.$gadget={$uuid:gadgetId,$type:"$gadgetMissing"},property.$uuid=vignetteId,property.$type="tablet/x-vignette"),proto.$properties[vignetteId]=property}return prototype.create(proto)},_getDashboardArticle=function(proto){return authArticleGen.generateDashboardArticle(proto,"orientation")},_getDashboardInfo=function(dashboardMetaData){return $.smResolve().then(function(){var article=dashboardMetaData.$article,proto=_getDashboardProto(dashboardMetaData);return article?{article:$.extend({},article),prototype:proto}:_getDashboardArticle(proto).then(function(article){return dashboardMetaData.$article=article,{article:$.extend({},article),prototype:proto}})})};exports.getDashboardInfo=_getDashboardInfo,exports.getDashboardArticle=_getDashboardArticle,exports.getDashboardProto=_getDashboardProto}),define("syracuse-tablet/html/js/application/appFactory",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/dashboardUtils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),dashboardUtils=require("syracuse-tablet/html/js/helpers/dashboardUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_ctor={Application:function(){throw new Error("Not implemented")},DashoardPage:function(){throw new Error("Not implemented")},RegularPage:function(){throw new Error("Not implemented")},RequestPage:function(){throw new Error("Not implemented")},RowDetailPage:function(){throw new Error("Not implemented")},ChartDetailPage:function(){throw new Error("Not implemented")},LookupPage:function(){throw new Error("Not implemented")},LoginPage:function(){throw new Error("Not implemented")},DaoApp:function(){throw new Error("Not implemented")},DaoSdata:function(){throw new Error("Not implemented")}},_createApplication=function($$elmt){var res=new _ctor.Application($$elmt,exports);return res.init(),res},_createPage=function($parent,state,parentPage,$forceLinkArticle){var res=null,type=state.type,deferred=$.Deferred(),options={};try{switch(type){case"static":if(state.subtype!=="html")throw new Error("_createPage - unknown static subtype ["+state.subtype+"]");switch(state.name){case"login":res=new _ctor.LoginPage($parent,state,options);break;default:throw new Error("_createPage - unknown html page ["+state.name+"]")}break;case"dashboard":globals.getMetaData().getDashboard(state.dashboardName).then(function(dashboardMetaData){return dashboardMetaData?dashboardUtils.getDashboardInfo(dashboardMetaData):$.smReject({message:locale.text("error.page.not.found",[state.dashboardName])})}).then(function(dashboardInfo){state.isWelcomePage===!0?res=new _ctor.WelcomeDashoardPage($parent,state,dashboardInfo.prototype,dashboardInfo.article,options):res=new _ctor.DashoardPage($parent,state,dashboardInfo.prototype,dashboardInfo.article,options),deferred.resolve(res)}).fail(function(e){deferred.reject(e)});break;case"chartdetail":case"regular":case"rowdetail":case"carddesign":globals.getMetaData().getPageDetails(state).then(function(info){if(!info)return $.smReject({message:locale.text("error.page.not.found",[state.name])});info.prototype.isLookup()?res=new _ctor.LookupPage($parent,state,info.prototype,info.article,options):type==="rowdetail"?res=new _ctor.RowDetailPage($parent,state,info.prototype,info.article,parentPage,options):type==="regular"?($forceLinkArticle&&(state.forceLinkArticle=$forceLinkArticle),info.prototype&&(info.prototype.isRequest()||info.prototype.isStatistics())?res=new _ctor.RequestPage($parent,state,info.prototype,$forceLinkArticle?$forceLinkArticle:info.article,options):res=new _ctor.RegularPage($parent,state,info.prototype,$forceLinkArticle?$forceLinkArticle:info.article,options)):type==="carddesign"?res=new _ctor.CardDesignPage($parent,state,info.prototype,info.article,parentPage,options):type==="chartdetail"&&(res=new _ctor.ChartDetailPage($parent,state,info.prototype,info.article,parentPage,options)),deferred.resolve(res)}).fail(function(e){deferred.reject(e)});break;default:throw new Error("Unknown page type["+type+"]")}res&&deferred.resolve(res)}catch(e){deferred.reject(e)}finally{return deferred.promise()}},_createDaoApp=function(appli){return new _ctor.DaoApp(appli)},_createDaoSdata=function(data,prototype,options){return new _ctor.DaoSdata(data,prototype,options||{})};exports.setImpl=function(name,ctor){_ctor[name]=ctor},exports.createApplication=_createApplication,exports.createPage=_createPage,exports.createDaoApp=_createDaoApp,exports.createDaoSdata=_createDaoSdata}),define("syracuse-tablet/html/js/sdata/sdataUtils",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_fieldsMeta=["$isMandatory","$isReadOnly","$isHidden","$isExcluded","$isDisabled","$actions","$format"],_rID=/^(.*)\(\'(.*)\'\)$/i,_parseSDataURL=function(url,noFail){var res=jsutils.parseURL(url);if(res.query&&res.query.representation){res.representation=res.query.representation,res.facet=null;var p=res.representation.indexOf(".");p!=-1&&(res.facet=res.representation.substr(p+1),res.facet.charAt(0)=="$"&&(res.facet=res.facet.substr(1)),res.representation=res.representation.substr(0,p))}var a;if(res.directory){var idx=res.directory.indexOf("/$services/");idx>-1&&(res.$services=res.directory.substring(idx+11)),a=res.directory.split("/")}if(a==null||a.length<=4){if(noFail===!0)return null;throw new Error("Bad sdata url:"+url)}res.dispatch=a[1];if(res.dispatch!=="mobile1"&&res.dispatch!=="sdata"){if(noFail===!0)return null;throw new Error("Bad sdata url:"+url)}res.application=a[2],res.contract=a[3],res.dataset=a[4];if(a.length===4)return res;var match=_rID.exec(a[5]);return match&&match.length==3?(res.entity=match[1],res.id=match[2],res.id&&res.id.trim().Length===0&&(res.id=null)):(res.entity=a[5],res.id=null),a.length===5?res:res},_getLinkInfo=function(sDataUrl,dao,nofail){sDataUrl=dao?dao.parseExpression(sDataUrl):sDataUrl;var url=_parseSDataURL(sDataUrl,nofail);if(url==null)return null;if(url.entity==="$mobileDashboards"){var res={page:url.query.dashboard+".$mobileDashboard"};return url.query.parameters&&(res.parameters=utils.parseExpression(url.query.parameters,dao)),res}if(url.query.representation){var ep=url.application+"."+url.contract+"."+url.dataset,res={page:ep+(url.query.representation?"."+url.query.representation:""),sDataUrl:sDataUrl};return url.$services&&(res.$services=url.$services),res}if(nofail===!0)return null;throw new Error("getLinkInfo - Unexpected empty representaion in ul "+sDataUrl)},_getLinkAttrs=function(linkInfo,dao){typeof linkInfo=="string"&&(linkInfo=_getLinkInfo(linkInfo,dao));if(linkInfo.type==="navig")return'data-nav="'+linkInfo.page+'" data-sdata-url="'+encodeURIComponent(linkInfo.sDataUrl)+'"';if(linkInfo.type==="act")return'data-action="'+linkInfo.action+'" data-params="'+encodeURIComponent(linkInfo.params||"")+'"';throw new Error("_getLinkAttrs - unknonwn type\n"+linkInfo.type)},_clearSyracuseStack=function(d){return d.$stackTrace&&d.$stackTrace.indexOf("node_modulessyracuse-x3")>=0&&(d.$message&&d.$stackTrace.indexOf(d.$message)>=0?delete d.$stackTrace:d.$stackTrace=d.$stackTrace.split("\n")[0]),d},_scanDiagnoses=function(data){var result=[],done=[],_scan=function(o,prop,path){path||(path=[]);if(done.indexOf(o)>=0)return;if(Array.isArray(o))done.push(o),prop&&path.push(prop),o.forEach(function(e,idx){_scan(e,idx+"",path)}),prop&&path.pop(prop);else if($.isPlainObject(o)){done.push(o);for(var p in o)p==="$diagnoses"?o[p].forEach(function(d){var $path=[].concat(path);prop&&$path.push(prop),p&&$path.push(p),d=_clearSyracuseStack($.extend({},d)),d.$path=$path.join("."),result.push(d)}):(prop&&path.push(prop),_scan(o[p],p,path),prop&&path.pop(prop))}};return data!=null&&_scan(data),result},_addWhereClause=function(url,where,params){params=params||{};var allParamsSet=!0;where=where.value;var res=where.replace(/\{(\w*?)\}/g,function(m,p1){var value=params[p1];return value==null&&(allParamsSet=!1),value!=null?value:""});return allParamsSet&&(url=url+"&where="+res),url};exports.parseSDataURL=_parseSDataURL,exports.getLinkInfo=_getLinkInfo,exports.getLinkAttrs=_getLinkAttrs,exports.scanDiagnoses=_scanDiagnoses,exports.addWhereClause=_addWhereClause}),define("syracuse-tablet/html/js/sdata/sdataHttp",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("sDataHttp"),ajax=require("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,locale=require("syracuse-tablet/html/js/helpers/locale"),_forceOptions={noJsonParsing:!0},_send=function(params){var deferred=$.Deferred(),params=params||{};params.options=$.extend(params.options||{},_forceOptions),params.headers=params.headers||{},params.headers["Accept-Language"]=locale.getCurrentLocale();try{log&&log("_httpSend - Begin - Method:"+params.method+"\n	"+params.url),ajax(params.method,params.url,params.send,params.headers,params.options).then(function(result){log&&log("_httpSend - End - status="+result.status+" - "+result.textStatus);if(!result.responseJSON){var responseText=result.responseText?result.responseText.trim():"";responseText.length>0&&["{","["].indexOf(responseText.charAt(0))>=0?result.responseJSON=JSON.parse(responseText):result.responseJSON=null}result.status===404&&(result.responseJSON||(result.responseJSON={}),result.responseJSON.$diagnoses||(result.responseJSON.$diagnoses=[]),result.responseJSON.$diagnoses.unshift({$message:locale.text("http404"),$stackTrace:params.url,$severity:"error"})),deferred.resolve(result)}).fail(function(e){deferred.reject(e)})}catch(e){deferred.reject(e)}return deferred.promise()};exports.send=_send}),define("syracuse-tablet/html/js/sdata/sdataCommonResources",["require","exports","module","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/sdata/sdataHttp","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){function _generateReject(title,result,url){return result&&result.responseJSON&&result.responseJSON.$diagnoses?$.smReject({$noConnectionError:result.responseJSON.$noConnectionError,$title:title,$diagnoses:result.responseJSON.$diagnoses}):$.smReject({$title:title})}function _fetchAll(urlQuery,noFailIfNoConnection){function _fetchPage(url){var params={method:"GET",url:url};params.parsedUrl=sdataUtils.parseSDataURL(params.url),sdataHttp.send(params).then(function(result){var data=result&&result.responseJSON;if(data&&data.$noConnectionError===!0&&noFailIfNoConnection===!0){deferred.resolve([],!0);return}if(result&&result.status!==200){var message;result.status===401?message=locale.text("error.session.timeout"):data&&data.$diagnoses&&data.$diagnoses.length>0?message=data.$diagnoses[0].$message:message=locale.text("fetchurl.error",[params.parsedUrl.contract+"/"+params.parsedUrl.entity,result.status]),deferred.reject({$message:message,$redirectPage:"login"})}data&&data.$resources&&data.$resources.forEach(function(i){list.push(i)}),data&&data.$links&&data.$links.$next&&data.$links.$next.$url?_fetchPage(data.$links.$next.$url):deferred.resolve(list,!1)}).fail(function(e){deferred.reject(e)})}var deferred=$.Deferred(),list=[];return _fetchPage(urlQuery),deferred.promise()}var sdataUtils=require("syracuse-tablet/html/js/sdata/sdataUtils"),sdataHttp=require("syracuse-tablet/html/js/sdata/sdataHttp"),utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_appListUrl="/sdata/syracuse/collaboration/syracuse/mobileApplications/$service/availableApplications",_localePreferencesUrl="/sdata/syracuse/collaboration/syracuse/localePreferences?representation=localePreference.$bulk",_userProfileUrl="/sdata/syracuse/collaboration/syracuse/userProfiles/$service/current",_endpointListUrl="/sdata/syracuse/collaboration/syracuse/endPoints?representation=endPoint.$bulk",_roleListUrl="/sdata/syracuse/collaboration/syracuse/roles?representation=role.$bulk",_updtUserProfileUrl="/sdata/syracuse/collaboration/syracuse/userProfiles/$template/$workingCopies?representation=userProfile.$edit&role=&trackingId=";exports.queryAllApplications=function(){var params={method:"GET",url:_appListUrl};return params.parsedUrl=sdataUtils.parseSDataURL(params.url),sdataHttp.send(params).then(function(result){if(result.isSuccess&&result.responseJSON){var apps=result.responseJSON.$resources;return apps}return _generateReject(locale.text("err.load.applst"),result,params.url)})},exports.queryApplicationDetail=function(appHeader,endpoint){var params={method:"GET",url:appHeader.$metaDataUrl+"?endpoint="+endpoint};return params.parsedUrl=sdataUtils.parseSDataURL(params.url),sdataHttp.send(params).then(function(result){if(result.isSuccess&&result.responseJSON){var app=result.responseJSON;return app}return _generateReject(locale.text("err.load.appdetail",[appHeader.applicationName]),result,params.url)})},exports.getUserProfile=function(){var params={method:"GET",url:_userProfileUrl};return params.parsedUrl=sdataUtils.parseSDataURL(params.url),sdataHttp.send(params).then(function(result){if(result.isSuccess&&result.responseJSON){var profile=result.responseJSON;return profile}return _generateReject(locale.text("err.load.profile"),result,params.url)})},exports.queryLocalePreferences=function(noFailIfNoConnection){return _fetchAll(_localePreferencesUrl,noFailIfNoConnection).then(function(result){var locales=[];return result.forEach(function(locale){locales.push({$uuid:locale.$uuid,code:locale.code,description:locale.description})}),locales})},exports.queryEndpoints=function(noFailIfNoConnection){return _fetchAll(_endpointListUrl,noFailIfNoConnection)},exports.queryRoles=function(noFailIfNoConnection){return _fetchAll(_roleListUrl,noFailIfNoConnection)},exports.updateUserProfile=function(changes){function createWC(){return $.smResolve().then(function(){var trackingId=utils.UUID(),params={method:"POST",url:_updtUserProfileUrl+trackingId};return params.parsedUrl=sdataUtils.parseSDataURL(params.url),sdataHttp.send(params).then(function(result){return result.isSuccess&&result.responseJSON?$.smResolve(result.responseJSON):$.smReject()})})}function updateWC(up){return $.smResolve().then(function(){var upData=$.extend({},up,changes),params={method:"PUT",url:up.$url,send:upData};return params.parsedUrl=sdataUtils.parseSDataURL(params.url),sdataHttp.send(params).then(function(result){return result.isSuccess&&result.responseJSON?$.smResolve(result.responseJSON):$.smReject()})})}function deleteWC(up){return $.smResolve().then(function(){var params={method:"DELETE",url:up.$url};return params.parsedUrl=sdataUtils.parseSDataURL(params.url),sdataHttp.send(params).then(function(result){return $.smResolve()})})}return createWC().then(function(up){return updateWC(up)}).then(function(up){return deleteWC(up).always(function(){return $.smResolve()})})}}),define("syracuse-tablet/html/js/helpers/base64",["require","exports","module"],function(require,exports,module){var Base64=exports.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="",chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0;input=Base64._utf8_encode(input);while(i<input.length)chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(chr1&3)<<4|chr2>>4,enc3=(chr2&15)<<2|chr3>>6,enc4=chr3&63,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);return output},decode:function(input){var output="",chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length)enc1=this._keyStr.indexOf(input.charAt(i++)),enc2=this._keyStr.indexOf(input.charAt(i++)),enc3=this._keyStr.indexOf(input.charAt(i++)),enc4=this._keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(enc2&15)<<4|enc3>>2,chr3=(enc3&3)<<6|enc4,output+=String.fromCharCode(chr1),enc3!=64&&(output+=String.fromCharCode(chr2)),enc4!=64&&(output+=String.fromCharCode(chr3));return output=Base64._utf8_decode(output),output},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(c&63|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(c&63|128))}return utftext},_utf8_decode:function(utftext){var string="",i=0,c1,c2,c3,c=c1=c2=0;while(i<utftext.length)c=utftext.charCodeAt(i),c<128?(string+=String.fromCharCode(c),i++):c>191&&c<224?(c2=utftext.charCodeAt(i+1),string+=String.fromCharCode((c&31)<<6|c2&63),i+=2):(c2=utftext.charCodeAt(i+1),c3=utftext.charCodeAt(i+2),string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63),i+=3);return string},raw_decode:function(input){var output="",chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length)enc1=this._keyStr.indexOf(input.charAt(i++)),enc2=this._keyStr.indexOf(input.charAt(i++)),enc3=this._keyStr.indexOf(input.charAt(i++)),enc4=this._keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(enc2&15)<<4|enc3>>2,chr3=(enc3&3)<<6|enc4,output+=String.fromCharCode(chr1),enc3!=64&&(output+=String.fromCharCode(chr2)),enc4!=64&&(output+=String.fromCharCode(chr3));return output}};exports.encode=function(text){return Base64.encode(text)}}),define("syracuse-tablet/html/js/application/authentication",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/helpers/base64","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("app"),globals=require("syracuse-tablet/html/js/helpers/globals"),ajax=require("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,sdataCommonRes=require("syracuse-tablet/html/js/sdata/sdataCommonResources"),base64=require("syracuse-tablet/html/js/helpers/base64"),locale=null,_getText=function(id){return locale||(locale=require("syracuse-tablet/html/js/helpers/locale")),locale.text(id)},_config={svcLogin:"/auth/login/submit",svcLogout:"/logout",svcForgetMe:"/auth/forgetMe/submit",userProfile:"/sdata/syracuse/collaboration/syracuse/userProfiles/$service/current",svcReconnectGetToken:"/requireJS/reconnect?getToken",svcReconnectSetToken:"/requireJS/reconnect?setToken"},_check=function(){return ajax("GET",_config.userProfile,null,null,{dontCatchHttp401:!0}).then(function(result){return result&&result.status===200&&result.responseJSON?result.responseJSON:null})},_getLoginHeader=function(user,password){return{Authorization:"Basic "+base64.encode(user+":"+password),accept:"application/json"}},_getLoginData=function(rememberMe){var data={};return rememberMe===!0&&(data.keepConnected=!0),data},_login=function(user,password,rememberMe){var deferred=$.Deferred();return ajax("POST",_config.svcLogin,_getLoginData(rememberMe),_getLoginHeader(user,password),{dontCatchHttp401:!0}).then(function(result){result.status===0&&deferred.reject(_getText("no.connection"),!0);if(result.status!==200){var e=result.responseJSON&&result.responseJSON.$diagnoses&&result.responseJSON.$diagnoses.length>0?result.responseJSON:"Httpstatus: "+result.status;deferred.reject(e)}sdataCommonRes.getUserProfile().then(function(profile){profile?deferred.resolve(profile):deferred.reject("Unexpected null user profile")}).fail(function(e){deferred.reject(e)})}).fail(function(e){deferred.reject(e)}),deferred.promise()},_forgetme=function(){var deferred=$.Deferred();return ajax("POST",globals.baseLocation().host+_config.svcForgetMe,{forgetme:!0}).then(function(result){log&&log("_forgetme succeeded"),deferred.resolve(!0)}),deferred.promise()},_logout=function(forgetme){var deferred=$.Deferred();return log&&log("_logout forgetMe=",forgetme),ajax("POST",globals.baseLocation().host+_config.svcLogout).then(function(result){forgetme&&_forgetme();var msg,isSuccess=result.isSuccess||result.status===401||result.status===0;if(!isSuccess){msg="Httpstatus: "+result.status;var diag=result.responseJSON?result.responseJSON.$diagnoses:null;diag&&diag.forEach(function(d){msg+="\n"+d.$message})}deferred.resolve(isSuccess,msg)}),deferred.promise()},_reconnectGetToken=function(){var deferred=new $.Deferred;return ajax("GET",_config.svcReconnectGetToken,null,{accept:"application/json"}).always(function(result){if(result&&result.status===200&&result.headers){var token=result.headers["x-reconnect-token"];log&&log("_reconnectGetToken",token),deferred.resolve(token)}else deferred.resolve(null)}),deferred.promise()},_reconnectSetToken=function(reconnectToken){var deferred=new $.Deferred;return ajax("GET",_config.svcReconnectSetToken,null,{accept:"application/json","x-reconnect-token":reconnectToken||""}).then(function(result){log&&log("_reconnectSetToken succeeded",reconnectToken),deferred.resolve()}).fail(function(result){log&&log("_reconnectSetToken failed"),deferred.resolve()}),deferred.promise()},_sageidsigin=function(){window.location.href="/auth/sage-id/signOnStart"};exports.check=_check,exports.login=_login,exports.logout=_logout,exports.reconnectGetToken=_reconnectGetToken,exports.reconnectSetToken=_reconnectSetToken,exports.sageidsignin=_sageidsigin}),define("syracuse-tablet/html/js/application/eventListener",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("evts"),globals=require("syracuse-tablet/html/js/helpers/globals"),locale=require("syracuse-tablet/html/js/helpers/locale"),utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_findParentCtrlId=function($$target,selector){var p=$$target.closest(".s-m-control"+(selector||"")+"[id]");return p.length>0?_attr(p,"id"):null},_attr=function($$e,name,nullIfEmpty,decode){var a=$$e.attr(name);a==null?a="":typeof a!="string"&&(a=new String(a)),a=a.trim();if(decode===!0){a=decodeURIComponent(a);if(a.smStartsWith("{")&&a.smEndsWith("}"))try{var json=JSON.parse(a);return json}catch(e){log.console("Error reading JSON attribute "+name+"\n	"+a)}}return nullIfEmpty&&a.length===0?null:a},_parseParameters=function(params){var p=params.split("&"),res={};for(var i=0;i<p.length;i++){var v=p[i].split("=");res[v[0]]=v[1]}return res},_findControlById=function(app,ctrlId,$$target){if(!app.currentPage)throw new Error("No current page");var ctrl=app.currentPage.getControl(ctrlId);if(ctrl)return ctrl;var controller=$$target.closest("[data-controller-id]");controller.length===0&&(controller=$("#"+ctrlId).closest("[data-controller-id]"));if(controller.length>0){var id=controller.attr("data-controller-id");controller=globals.getController(id),controller&&(ctrl=controller.getStructElmt(ctrlId))}if(ctrl)return ctrl;throw new Error("Control not found - ctrlid["+ctrlId+"]")},_doAction=function($$target,act,params,controlId,evt){var app=globals.getApplication(),fail=function(e){var title=locale.text("actions.error");e=e||{},e.stack=e.stack?e.stack+"\n---\n":"",e.stack=e.stack+"Action: "+act+"\nControl: "+(controlId||"?"),modal.error(title,e)};try{var method="_act"+$.camelCase("-"+act),object;if($$target){controlId||(controlId=_findParentCtrlId($$target,".s-m-array"));if(controlId)object=_findControlById(app,controlId,$$target);else{var vignette=utils.findParentVignette($$target,!1);if(vignette)if(vignette[method])object=vignette;else{var p=vignette.getPage();p&&p[method]&&(object=p)}}}object==null&&app.currentPage[method]&&(object=app.currentPage),object==null&&(object=app);if(!object[method])throw new Error("Method ["+method+"] not found in object/application/current page)");var args=[];params&&typeof params=="string"?(params=params.split(","),params.forEach(function(p,idx){args.push(p.trim())})):args.push(params),args.push($$target),args.push(evt),$.when(object[method].apply(object,args)).then(function(todo){todo&&todo.page&&globals.getApplication().changePage(todo.page)}).fail(function(e){fail(e)})}catch(e){fail(e)}},_doNavigation=function(clickedElmt,$$target){var app=globals.getApplication(),options={},attr;attr=_attr(clickedElmt,"data-sdata-url"),attr.length>0&&(options["sdata-url"]=attr),attr=_attr(clickedElmt,"data-sdata-method"),attr.length>0&&(options["sdata-method"]=attr),attr=_attr(clickedElmt,"data-nav-type"),attr.length>0&&(options.type=attr),attr=_attr(clickedElmt,"data-parent-id"),attr.length>0&&(options.parentId=attr),attr=_attr(clickedElmt,"data-control-id"),attr.length>0&&(options.controlId=attr),attr=_attr(clickedElmt,"data-params",!1,!0),options.dataParams=attr||"",attr=_attr(clickedElmt,"data-nav-target");var navTarget;$$target&&(attr==="vignette"?navTarget=utils.findParentVignette($$target,!0):attr!=="application"&&app.$config("openLinkInVignette")&&(navTarget=utils.findParentVignette($$target,!1))),navTarget||(navTarget=app);var refreshPage=_attr(clickedElmt,"data-nav-refresh");if(refreshPage==="true"){navTarget.refreshPage(options);return}attr=_attr(clickedElmt,"data-application-name");var applicatioName;attr.length>0&&(applicatioName=attr);var pageName;attr=_attr(clickedElmt,"data-nav"),attr.length>0&&(pageName=attr);if(applicatioName&&!pageName){notifications.publish("sm.switch.app",applicatioName);return}applicatioName&&(options.applicationName=applicatioName),attr=_attr(clickedElmt,"data-gadget-id"),attr.length>0&&(options["gadget-id"]=attr),attr=_attr(clickedElmt,"data-link-article"),attr.length>0&&(options.linkArticle=attr),attr=_attr(clickedElmt,"data-sdata-parameters"),attr&&attr.length>0&&(options.sdataParameters=_parseParameters(attr)),attr=_attr(clickedElmt,"data-nav-noback"),options.noHistoryBack=attr==="true",navTarget.changePage(pageName,options)},_handleActionEvt=function(evt,app){var fail=function(e){var title="_bindActions error";log&&log(title,e),modal.error(title,e)};try{if(app.hasModalOpen()){log&&log("!!! Tries to execute an action data-action with a MODAL open.\nAction is skipped");return}var $$target=$(evt.target),$$actionElmt=$$target.closest("[data-nav], [data-nav-refresh]");if($$actionElmt.length>0){if($$actionElmt.attr("data-disabled")!=null)return;_doNavigation($$actionElmt,$$target),evt.stopPropagation();return}$$actionElmt=$$target.closest("[data-action]");if($$actionElmt.length>0){if($$actionElmt.is(".disabled"))return;if($$actionElmt.attr("data-disabled")!=null)return;var param,act=_attr($$actionElmt,"data-action");if($$actionElmt.is("select"))param=$(this).val();else{if(act===globals.ACTROWDETAIL||act===globals.ACTROWDEL||act===globals.ACTROWSEL||act===globals.ACTCARDDESIGN)$$actionElmt=$$actionElmt.closest("."+globals.RECORDCLASS);param=_attr($$actionElmt,"data-params",!1,!0)}var controlId=_attr($$actionElmt,"data-control-id",!0);_doAction($$target,act,param,controlId,evt);return}}catch(e){fail(e)}},_bindActions=function(app){if(!app.$$elmt)throw new Error("_bindActions - null $$elmt");var handler=jsutils.bindFn(_handleActionEvt,null,app);app.$$elmt.on("click",":not(select)[data-nav], :not(select)[data-nav-refresh], :not(select)[data-action]",handler),app.$$elmt.on("change","select[data-nav], select[data-nav-refresh], select[data-action]",handler)},_bindControlEvents=function(app){var fail=function(e){var title="_bindControlEvents error";log&&log(title,e),modal.error(title,e)},events=["click","blur","change","focus"];events.forEach(function(evtname){app.$$elmt.on(evtname,".ctrl-evt-"+evtname,function(event){event.preventDefault(),event.stopPropagation();try{var $$target=$(event.target),ctrlId;$$target.hasClass("s-m-control")?ctrlId=_attr($$target,"id"):(ctrlId=_attr($$target,"data-control-id",!0),ctrlId||(ctrlId=_findParentCtrlId($$target)));var ctrl=_findControlById(app,ctrlId,$$target),method="on"+evtname.smCapitalize(),controllerListener=ctrl.controller?ctrl.controller.getEventListener(evtname):null;if(controllerListener&&controllerListener("before",ctrl,$$target,event)===!0)return;if(!ctrl[method]){log&&log("!!! Method["+method+"] not found - ctrlid["+ctrlId+"]");return}ctrl[method](event),controllerListener&&controllerListener("after",ctrl,$$target,event)}catch(e){fail(e)}return})})},_bindEvents=function(app){$(window).bind("popstate",function(event){var state=event.originalEvent.state;(state||/Firefox/.test(navigator.userAgent))&&app.historyPop(event)}),_bindActions(app),_bindControlEvents(app),$(window).on("resize",globals.getSiteLayout().onWindowResize),utils.isDesktop()||($.event.special.orientationchange.setup(),$(window).on("orientationchange",globals.getSiteLayout().onWindowOrientation)),$(window).on("resizeInternal",globals.getSiteLayout().onWindowResizeInteral),$(window).on("unload",app.onUnload.bind(app)),$(window).on("beforeunload",app.onBeforeUnload.bind(app))},_triggerAction=function($$elmt,act,params,controlId){window.setTimeout(function(){_doAction($$elmt,act,params,controlId)})},_triggerNavigation=function($$elmt,attributes){var attrs=function(jsonAttrs){var _jsonAttrs=jsonAttrs;Object.keys(_jsonAttrs).forEach(function(key){$.isPlainObject(_jsonAttrs[key])&&(_jsonAttrs[key]=JSON.stringify(_jsonAttrs[key]))}),this.attr=function(name){return _jsonAttrs[name]}};_doNavigation(new attrs(attributes),$$elmt)},_triggerRefreshPage=function($$elmt,attributes){attributes=attributes||{},attributes["data-nav-refresh"]="true",_triggerNavigation($$elmt,attributes)};exports.bindEvents=_bindEvents,exports.triggerAction=_triggerAction,exports.triggerNavigation=_triggerNavigation,exports.triggerRefreshPage=_triggerRefreshPage}),define("syracuse-tablet/html/js/application/pageLoader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("pageLoader"),globals=require("syracuse-tablet/html/js/helpers/globals"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),locale=require("syracuse-tablet/html/js/helpers/locale"),_PageLoader=utils.defineClass(function PageLoader(callerInterface){this.callerInterface=callerInterface,this.factory=globals.getApplication().factory},null,{destroy:function(){this.callerInterface=null,this.factory=null},load:function(state,back,loadOptions){var deferred=$.Deferred(),pageToOpen=null,pageToClose=null;state.options=state.options||{},loadOptions=loadOptions||{};var self=this,_fail=function(e){self.loading=!1,!back&&(!e||!e.$redirectPage)&&(pageToOpen&&pageToOpen.destroy(),e.$redirectPage="current"),self.waitStop();if(self.callerInterface.loadingError)self.callerInterface.loadingError(deferred,state,e);else if(loadOptions.dontDisplayLoadErr!==!0)if(e&&e.$noConnectionError===!0){var notify={severityClass:"warning",title:locale.text("info.network.offline.title"),body:locale.text("error.network.offline.cache")};globals.getModal().notify(notify),deferred.reject(e)}else modal.error(locale.text("error.page.loading"),e,function(){deferred.reject(e)});else deferred.reject(e)},timeLine=utils.getTimeLine("pageLoader",state.name);timeLine&&timeLine.start();var _success=function(pageToOpen,pageToClose,parentNotifInfo){self.loading=!1,self.waitStop(),pageToOpen&&(back!==!0&&state.options.noHistoryBack!==!0&&(pageToOpen.prototype&&(pageToOpen.state.$title=pageToOpen.prototype.data("$title")),self.historyPush(pageToOpen.state)),self.succeeded(pageToOpen,pageToClose,parentNotifInfo,back,loadOptions),timeLine&&timeLine.stop(pageToOpen.isNew?"newPage":"existingPage"),pageToOpen.activated()),deferred.resolve(pageToOpen)};try{self.loading&&_success(null),self.loading=!0;if(state===null||typeof state!="object")throw new Error("Bad state object");log&&log("_gotoPage","start","page: "+state.uuid),pageToClose=self.getCurrentPage();if(pageToClose&&pageToClose.getProp("uuid")===state.uuid){log&&log("	Page is current -> Skip");return}var parentNotifInfo=null,childNotifInfo=null;pageToClose&&pageToClose.isChild&&(parentNotifInfo=pageToClose.getParentNotif()),self.waitStart(),pageToOpen=$("#"+state.uuid).smPageController();if(pageToOpen!=null){log&&log("	Page found in dom -> Activate");if(!pageToOpen)throw new Error("Unexpected null page data");return pageToOpen.isNew=!1,self._pageActivate(pageToOpen,function(){timeLine&&timeLine.step("activated"),pageToOpen.destroySiblings(),_success(pageToOpen,pageToClose,parentNotifInfo)},back),deferred.promise()}var parentPage=null;state.options.parentId&&(parentPage=globals.getController(state.options.parentId));var $forceLinkArticle;if(pageToClose){var ctrlId=state.options.linkArticle;$forceLinkArticle=back?state.forceLinkArticle:pageToClose.getLinkedPageArticle(ctrlId)}self.factory.createPage(self.getRootElmt(),state,parentPage,$forceLinkArticle).then(function(p){timeLine&&timeLine.step("created"),pageToOpen=p,pageToOpen.isNew=!0;var savedContext=state.savedContext;return state.savedContext=null,pageToOpen.isNew&&(!back&&pageToOpen.isVignette&&pageToClose==null?state.savedContext=self.getSavedCtxVignette():back&&(state.savedContext=savedContext)),pageToOpen.load(loadOptions)}).then(function(){timeLine&&timeLine.step("loaded"),self._pageActivate(pageToOpen,function(){timeLine&&timeLine.step("activated"),_success(pageToOpen,pageToClose,parentNotifInfo)},back)}).fail(function(e){_fail(e)})}catch(e){_fail(e)}return deferred.promise()},_pageActivate:function(pageToOpen,cb,back){var self=this,pageToClose=self.getCurrentPage(),destroy=pageToClose&&(back===!0||pageToClose.getProp("cached")!==!0&&pageToOpen.isChild!==!0);if(pageToClose){var clearCtx=!destroy||back;pageToClose.updateSavedContext(clearCtx)}pageToOpen.activate(pageToClose,function(){self.setCurrentPage(pageToClose,pageToOpen,destroy),cb&&cb()})},historyPush:function(state){this.callerInterface.historyPush(state)},waitStop:function(){this.callerInterface.waitStop()},waitStart:function(){this.callerInterface.waitStart()},getRootElmt:function(){return this.callerInterface.getRootElmt()},getCurrentPage:function(){return this.callerInterface.getCurrentPage()},getSavedCtxVignette:function(){var meth=this.callerInterface.getSavedCtxVignette;return meth?meth():null},setCurrentPage:function(pageToClose,pageToOpen,destroy){var self=this;pageToClose&&(destroy===!0?setTimeout(function(){pageToClose.destroy()}):pageToClose.deactivate()),self.callerInterface.setCurrentPage(pageToOpen)},succeeded:function(pageToOpen,pageToClose,parentNotifInfo,back,loadOptions){var self=this;notifications.publish("sm.page.loaded",self.getCurrentPage()),this.callerInterface.succeeded&&this.callerInterface.succeeded(pageToOpen,pageToClose,parentNotifInfo,back,loadOptions)}});exports.Klass=_PageLoader}),define("syracuse-tablet/html/js/application/settings",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/native/native","syracuse-tablet/html/js/helpers/native/native"],function(require,exports,module){function _getContext(){var ctx=globals.getUserCtx();return ctx?ctx:{$user:"none",$role:"none",$lang:"en-US"}}function _checkContextUserRole(){var ctx=_getContext();if(_currentContextUserRole.user!=ctx.$user||_currentContextUserRole.role!=ctx.$role)_currentContextUserRole.user=ctx.$user,_currentContextUserRole.role=ctx.$role,_currentContextUserRole.lang=ctx.$lang,_settingsUserRole=null}function _readSettingsUserRole(){var storage=globals.getStorage(),ctx={$user:_currentContextUserRole.user,$role:_currentContextUserRole.role,$lang:"none"};return storage.read({$context:ctx,$collection:"$settings",$endpoint:"$local",$key:"$user_and_role"}).then(function(result){return result.$status===storageModule.StatusCodes.OK?result.$data:{}})}function _checkContextUser(){var ctx=_getContext();if(_currentContextUser.user!=ctx.$user||_currentContextUser.role!=ctx.$role)_currentContextUser.user=ctx.$user,_currentContextUser.role=ctx.$role,_currentContextUser.lang=ctx.$lang,_settingsUser=null}function _readSettingsUser(){if(_settingsUser==null){var storage=globals.getStorage(),ctx={$user:_currentContextUser.user,$role:"none",$lang:"none"};return storage.read({$context:ctx,$collection:"$settings",$endpoint:"$local",$key:"$user"}).then(function(result){result.$status===storageModule.StatusCodes.OK?_settingsUser=result.$data:_settingsUser={},log&&log("Read user settings..."),log&&log(_settingsUser)})}return $.smResolve()}function _writeSettingsUser(){var storage=globals.getStorage(),ctx={$user:_currentContextUser.user,$role:"none",$lang:"none"};return log&&log("Writing user settings..."),log&&log(_settingsUser),storage.put({$context:ctx,$collection:"$settings",$endpoint:"$local",$key:"$user",$data:_settingsUser}).then(function(result){return result.$status===storageModule.StatusCodes.OK?result.$data:{}})}var globals=require("syracuse-tablet/html/js/helpers/globals"),storageModule=require("syracuse-tablet/html/js/storage/storage"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("settings"),nativeVoiceCommmands=require("syracuse-tablet/html/js/helpers/native/native").getModule("voiceCommands"),native=require("syracuse-tablet/html/js/helpers/native/native"),_currentContextUserRole={},_currentContextUser={},_settingsUserRole=null,_settingsUser=null;exports.getPinnedPages=function(){return _readSettingsUser().then(function(){return _settingsUser.pinnedPages=_settingsUser.pinnedPages||[],_settingsUser.pinnedPages})},exports.addPinnedPage=function(page){return exports.getPinnedPages().then(function(pinnedPages){return pinnedPages.some(function(p,idx){if(p.id===page.id)return pinnedPages[idx]=page,!0})||pinnedPages.push(page),nativeVoiceCommmands&&nativeVoiceCommmands.addVoiceCommand(nativeVoiceCommmands.createCommandFromPage(page)),_writeSettingsUser(),page})},exports.isPinnedPage=function(id){return exports.getPinnedPages().then(function(pinnedPages){return pinnedPages.some(function(p,idx){if(p.id===id)return!0})})},exports.removePinnedPage=function(id){return exports.getPinnedPages().then(function(pinnedPages){pinnedPages.some(function(p,idx){if(p.id===id)return nativeVoiceCommmands&&nativeVoiceCommmands.removeVoiceCommand(p.title),exports.removeTileConfig("pin-"+p.id),pinnedPages.splice(idx,1),!0})&&_writeSettingsUser()})},exports.getHiddenApplications=function(){return _readSettingsUser().then(function(){return _settingsUser.hiddenApplications=_settingsUser.hiddenApplications||[],_settingsUser.hiddenApplications})},exports.unhideApplication=function(applicationName){return exports.getHiddenApplications().then(function(apps){apps.some(function(app,idx){if(app===applicationName)return apps.splice(idx,1),!0})&&_writeSettingsUser()})},exports.hideApplication=function(applicationName){return exports.getHiddenApplications().then(function(apps){apps.some(function(app,idx){if(app===applicationName)return!0})||(apps.push(applicationName),_writeSettingsUser())})},exports.getTileConfigs=function(){return _readSettingsUser().then(function(){return _settingsUser.tileConfigs=_settingsUser.tileConfigs||{},_settingsUser.tileConfigs})},exports.setTileConfig=function(tile){return exports.getTileConfigs().then(function(configs){configs[tile.tileId]=tile,_writeSettingsUser()})},exports.removeTileConfig=function(id){return exports.getTileConfigs().then(function(configs){configs&&configs[id]&&(delete configs[id],_writeSettingsUser())})},exports.getLastUserProfile=function(profile){var ctx={$user:"none",$role:"none",$lang:"none"},storage=globals.getStorage();return storage.read({$context:ctx,$collection:"$settings",$endpoint:"$local",$key:"$last_user_profile"}).then(function(result){return result.$status===storageModule.StatusCodes.OK?result.$data:null})},exports.setLastUserProfile=function(profile){var ctx={$user:"none",$role:"none",$lang:"none"},storage=globals.getStorage();return storage.put({$context:ctx,$collection:"$settings",$endpoint:"$local",$key:"$last_user_profile",$data:profile}).then(function(result){return result.$status===storageModule.StatusCodes.OK?result.$data:{}})},exports.getGlobalSettings=function(){var storage=globals.getStorage(),ctx={$user:"none",$role:"none",$lang:"none"};return storage.read({$context:ctx,$collection:"$settings",$endpoint:"$local",$key:"$global_settings"}).then(function(result){var settings;return result.$status===storageModule.StatusCodes.OK?settings=result.$data:settings={"device-type":"auto"},globals.setGlobalSettings(settings),settings})},exports.setGlobalSettings=function(settings){var storage=globals.getStorage(),ctx={$user:"none",$role:"none",$lang:"none"};return storage.put({$context:ctx,$collection:"$settings",$endpoint:"$local",$key:"$global_settings",$data:settings}).then(function(){return globals.setGlobalSettings(settings),settings}).fail(function(e){return $.smResolve()})},exports.loginRememberMe=function(){return exports.getLoginRememberMe().then(function(val){var val=val||"nativeonly";return val==="always"?!0:val==="never"?!1:native.hasCapability("X3WUPApp")})},exports.logoutForgetMe=function(){return exports.getLoginRememberMe().then(function(rememberme){return rememberme==="always"?!1:rememberme==="never"?!0:rememberme==="nativeonly"?!native.hasCapability("X3WUPApp"):!0})},exports.getLoginRememberMe=function(){return _readSettingsUser().then(function(){return _settingsUser.loginRememberMe==null?"nativeonly":_settingsUser.loginRememberMe})},exports.setLoginRememberMe=function(value){return _readSettingsUser().then(function(apps){_settingsUser.loginRememberMe!==value&&(_settingsUser.loginRememberMe=value,_writeSettingsUser())})}}),define("syracuse-tablet/html/js/ui/modals/modalSelectContext",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/settings"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),globals=require("syracuse-tablet/html/js/helpers/globals"),settings=require("syracuse-tablet/html/js/application/settings"),_templateAll={header:'			<buttons class="pull-right"> 				{{#if allow_logout}} 					<button type="button" class="btn btn-default s-m-modal-btn-logout" data-action="logout"></button> 				{{/if}} 				{{#unless label_offline}} 				<button type="button" class="btn btn-default s-m-modal-btn-validate" data-action="$validate"></button> 				{{/unless}} 				<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 			</buttons> 			<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">			<div class="s-m-scroll-element"> 				{{#if label_warning}}					<div class="alert alert-warning" role="alert">						{{label_warning}}					</div>				{{/if}}				{{#if label_offline}}					<div class="alert alert-warning" role="alert">						{{label_offline}}					</div>				{{/if}}				{{#if showEndpoints}} 				<div class="form-group"> 					<label>{{label_endpoints}}</label>					<select class="form-control" id="login-select-endpoint"> 					{{#each endpoints}}						<option value="{{this.application}}.{{this.contract}}.{{this.dataset}}" {{#if this.selected}}selected{{/if}}>						{{this.description}}						</option>					{{/each}}					</select>				</div> 				{{/if}} 				{{#if showRoles}} 				<div class="form-group"> 					<label>{{label_roles}}</label>					<select class="form-control" id="login-select-role"> 					{{#each roles}}						<option value="{{this.code}}" {{#if this.selected}}selected{{/if}}>						{{this.description}}						</option>					{{/each}}					</select>				</div> 				{{/if}} 				{{#if showLanguages}} 				<div class="form-group"> 					<label>{{label_languages}}</label>					<select class="form-control" id="login-select-language"> 					{{#each languages}}						<option value="{{this.code}}" {{#if this.selected}}selected{{/if}}>						{{this.description}}						</option>					{{/each}}					</select>				</div> 				{{/if}} 				{{#if showRememberMe}} 				<div class="form-group"> 					<label>{{label_rememberme}}</label>					<select class="form-control" id="login-rememberme"> 					{{#each rememberme_opts}}						<option value="{{this.code}}" {{#if this.selected}}selected{{/if}}>						{{this.description}}						</option>					{{/each}}					</select>				</div> 				{{/if}} 			</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalSelectContext(context,endpoints,roles,languages,displayOpts){var self=this;self.displayOpts=displayOpts||{},modalDialog.ModalBase.call(self),self.initParam={context:context,endpoints:endpoints,roles:roles,languages:languages,warn:!0},self.result=null},modalDialog.ModalBase,{destroy:function(){modalDialog.ModalBase.prototype.destroy.call(this),this.initParam=null,this.result=null},_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="config-tile half_right":displayFlags.modalClass="config-tile full",displayFlags},_getDataContext:function(){var self=this;return settings.getLoginRememberMe().then(function(rememberMe){var showEndpoints=self.displayOpts.hideEndpoints!==!0&&self.initParam.endpoints.length>0,showRoles=self.displayOpts.hideRoles!==!0&&self.initParam.roles.length>0,showLanguages=self.initParam.languages.length>0,label_warning=self.initParam.warn&&locale.text("modal.context.warning"),label_offline=locale.text("modal.context.offline");showEndpoints+showLanguages+showRoles>0?label_offline=null:label_warning=null;var curApp=globals.getApplication(),curPage=curApp&&curApp.currentPage;curPage&&jsutils.isInstanceOf(curPage,"WelcomeDashboardPage")&&(label_warning=!1);var showRememberMe=!0,rememberme_opts=[];showRememberMe&&[{description:locale.text("login.rememberme.always"),code:"always"},{description:locale.text("login.rememberme.never"),code:"never"}].forEach(function(opt){rememberMe===opt.code&&(opt.selected=!0),rememberme_opts.push(opt)});var data={title:locale.text("modal.context.title"),label_endpoints:locale.text("modal.context.endpoints"),showEndpoints:showEndpoints,endpoints:self.initParam.endpoints,label_roles:locale.text("modal.context.roles"),showRoles:showRoles,roles:self.initParam.roles,label_languages:locale.text("modal.context.languages"),showLanguages:showLanguages,languages:self.initParam.languages,label_logout:locale.text("modal.context.logout"),label_ok:locale.text("modal.context.ok"),label_cancel:locale.text("modal.context.cancel"),label_warning:label_warning,label_offline:label_offline,allow_logout:self.initParam.context!=null,showRememberMe:showRememberMe,label_rememberme:locale.text("login.rememberme"),rememberme_opts:rememberme_opts};return self.initParam.context?(self.initParam.endpoints.forEach(function(ep){ep.application+"."+ep.contract+"."+ep.dataset===self.initParam.context.endpoint?ep.selected=!0:ep.selected=!1}),self.initParam.roles.forEach(function(role){role.code===self.initParam.context.role?role.selected=!0:role.selected=!1}),self.initParam.languages.forEach(function(lang){lang.code===self.initParam.context.language?lang.selected=!0:lang.selected=!1})):self.initParam.languages.some(function(lang){if(utils.sameLanguage(lang.code,utils.getNavigatorLanguage("en-US")))return lang.selected=!0,!0}),data})},_saveSettings:function(){return settings.setLoginRememberMe(this.$$elmt.find("#login-rememberme").val())},_onAction:function(action,param){var self=this;return self._saveSettings().then(function(){return action==="logout"?(self.result={action:"logout"},!0):!1})},_onValidate:function(){var self=this;return self._saveSettings().then(function(){var endpoint=self.$$elmt.find("#login-select-endpoint").val(),role=self.$$elmt.find("#login-select-role").val(),language=self.$$elmt.find("#login-select-language").val();self.result={action:"ok",endpoint:endpoint,role:role,language:language}})},_onCancel:function(){var self=this;self.initParam.context?self.result={action:"cancel"}:self.result={action:"logout"}},_getResult:function(){return this.result}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/init/initContext",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalSelectContext","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/storage/localStorage","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/helpers/logger"],function(require,exports,module){function _updateServerUserProfile(context,userName,endpoints,roles,languages){return sdataCommonResources.getUserProfile().then(function(up){var change=!1,upChanges={};return change=endpoints.some(function(ep){return ep.application+"."+ep.contract+"."+ep.dataset===context.endpoint&&ep.$uuid!==up.selectedEndpoint.$uuid?(upChanges.selectedEndpoint={$uuid:ep.$uuid},!0):!1})||change,change=roles.some(function(role){return role.code===context.role&&role.$uuid!==up.selectedRole.$uuid?(upChanges.selectedRole={$uuid:role.$uuid},!0):!1})||change,languages.some(function(lang){return lang.code===context.languages&&lang.$uuid!==up.selectedLocale.$uuid?(upChanges.selectedLocale={$uuid:lang.$uuid},!0):!1})||change,change?sdataCommonResources.updateUserProfile(upChanges).then(function(){return context}):$.smResolve(context)})}var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalSelectContext=require("syracuse-tablet/html/js/ui/modals/modalSelectContext"),sdataCommonResources=require("syracuse-tablet/html/js/sdata/sdataCommonResources"),localStorage=require("syracuse-tablet/html/js/storage/localStorage"),settings=require("syracuse-tablet/html/js/application/settings"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("initCtx");exports.getLastUsedContext=function(userName){var context;try{var settingsKey=userName+"_lastContext",contextString=localStorage.getItem(settingsKey);contextString&&contextString.length>0&&(context=JSON.parse(contextString))}catch(e){}return context},exports.setLastUsedContext=function(userName,context){try{var settingsKey=userName+"_lastContext",contextString=JSON.stringify(context);localStorage.setItem(settingsKey,contextString)}catch(e){}};var _checkContext=function(context){return context&&context.language&&context.role&&context.endpoint?context:null};exports.init=function(fromUserAction,contextToRestore,offlineLogin){contextToRestore&&(log&&log("Restore context"),log&&log(JSON.stringify(contextToRestore)));var endpoints=[],roles=[],languages=[],userName=globals.getUserCtx().$user,userProfile=globals.getUserProfile();log&&log("User profile"),log&&log(JSON.stringify(userProfile));var noFailIfNoNetwork=!0,connectionFailedError=!1;return settings.getGlobalSettings().then(function(){return offlineLogin?!0:$.smResolve().then(function(){return sdataCommonResources.queryEndpoints(noFailIfNoNetwork)}).then(function(rsrcEndpoints,connectionError){connectionFailedError=connectionFailedError||connectionError;if(connectionFailedError)return endpoints=[],$.smResolve([],!0);var urlEndpoint=null;if(contextToRestore&&contextToRestore.endpoint){var ar=contextToRestore.endpoint.split(".");urlEndpoint={ok:!1,protocol:ar[0],contract:ar[1],dataset:ar[2]}}return rsrcEndpoints.forEach(function(ep){userProfile.endpoints&&userProfile.endpoints.some(function(e){return e.$uuid===ep.$uuid})&&(urlEndpoint&&!urlEndpoint.ok&&ep.protocol==urlEndpoint.protocol&&ep.contract==urlEndpoint.contract&&ep.dataset==urlEndpoint.dataset&&(urlEndpoint.ok=!0),endpoints.push(ep))}),urlEndpoint&&!urlEndpoint.ok&&(globals.getModal().actionResult(locale.text("urlcontext.bad"),locale.text("urlcontext.badendpoint",[contextToRestore.endpoint])),contextToRestore=null),sdataCommonResources.queryLocalePreferences(noFailIfNoNetwork)}).then(function(rsrcLanguages,connectionError){return connectionFailedError=connectionFailedError||connectionError,connectionFailedError?(languages=[],$.smResolve([],!0)):(languages=rsrcLanguages,sdataCommonResources.queryRoles(noFailIfNoNetwork))}).then(function(rsrcRoles,connectionError){connectionFailedError=connectionFailedError||connectionError;if(connectionFailedError)return roles=[],!0;var urlRole=null;return rsrcRoles.forEach(function(rl){userProfile.roles&&userProfile.roles.some(function(r){return r.$uuid===rl.$uuid})&&(contextToRestore&&contextToRestore.role&&!urlRole&&rl.code===contextToRestore.role&&(urlRole=rl.code),roles.push(rl))}),contextToRestore&&(contextToRestore.role=urlRole),!1}).then(function(connectionError){connectionFailedError=connectionFailedError||connectionError;if(connectionFailedError)return!0;if(endpoints.length<1||roles.length<1){var err=new Error(locale.text("login.roleendpoint.error"));return err.$redirectPage="login",$.smReject(err)}return!1})}).then(function(connectionError){var currentContext=contextToRestore?_checkContext(contextToRestore):null;currentContext=currentContext?currentContext:_checkContext(exports.getLastUsedContext(userName));if(offlineLogin&&!currentContext)return $.smReject(new Error("offline.nocontext"));if(contextToRestore&&contextToRestore.endpoint&&contextToRestore.role&&languages){var navLang=utils.getNavigatorLanguage();if(navLang&&languages.some(function(l){if(utils.sameLanguage(l.code,navLang))return contextToRestore.language=l.code,!0}))return $.smResolve(contextToRestore)}var displayDialog=fromUserAction===!0||currentContext==null;if(displayDialog){var deferred=$.Deferred(),opts={hideEndpoints:contextToRestore!=null&&contextToRestore.endpoint!=null,hideRoles:contextToRestore!=null&&contextToRestore.role!=null};return(new modalSelectContext.Modal(currentContext,endpoints,roles,languages,opts)).show().then(function(selectContext){(selectContext==null||selectContext.action==="cancel")&&deferred.resolve(null),selectContext.action==="logout"?deferred.reject(new Error("$logout$")):(selectContext=selectContext.action==="ok"?selectContext:null,selectContext&&contextToRestore&&contextToRestore.endpoint&&(selectContext.endpoint=contextToRestore.endpoint,contextToRestore.role&&(selectContext.role=contextToRestore.role)),deferred.resolve(selectContext))}).fail(function(e){deferred.reject(e)}),deferred.promise()}return $.smResolve(currentContext)}).then(function(currentContext){return currentContext?(locale.setLocale(currentContext.language),globals.setEndpoint(currentContext.endpoint),globals.setUserCtx({$user:userName,$role:currentContext.role,$lang:currentContext.language}),currentContext):null}).then(function(currentContext){return currentContext==null||offlineLogin===!0||connectionFailedError===!0?null:(exports.setLastUsedContext(userName,currentContext),_updateServerUserProfile(currentContext,userName,endpoints,roles,languages))}).then(function(currentContext){return $.smResolve(currentContext,contextToRestore)})},exports.askNewContext=function(){return exports.init(!0)},exports.switchContext=function(context){if(!context)return;var context=$.extend(!0,{},context);context.endpoint||(context.endpoint=globals.getEndpoint());var userCtx=globals.getUserCtx();return context.language||(context.language=userCtx.$lang),context.role||(context.role=userCtx.$role),exports.init(!1,context)}}),define("syracuse-tablet/html/js/sdata/entities/clientContract",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataUtils"],function(require,exports,module){function _buildPageInfo(repr,facet,entity){var page={$page:{},$cache:{}};return _buildPage(repr,facet,entity,page.$page),page}function _buildPage(repr,facet,entity,page){if(facet.smStartsWith("$cube"))page.$prototype=entity.$createProto();else if(facet==="$query"||facet==="$lookup")page.$prototype={$properties:{$resources:{$type:"application/x-array",$item:_buildPrototype(repr,facet),$url:"{$baseUrl}/"+repr+"('{$key}')?representation="+repr+".$queryItem"}}},page.$prototype.$url="{$baseUrl}/"+repr+"?representation="+repr+"."+facet,page.$prototype.$properties.$resources.$item.$key="{$uuid}",page.$prototype.$properties.$resources.$item.$value=entity.$value,page.$prototype.$properties.$resources.$item.$links={$details:{$url:"{$baseUrl}/"+repr+"('{$key}')?representation="+repr+".$details",$title:"Details"},$edit:{$url:"{$baseUrl}/"+repr+"('{$key}')?representation="+repr+".$edit",$title:"Edit"}},page.$prototype.$links={$create:{$url:"{$baseUrl}/"+repr+"('{$key}')?representation="+repr+".$create",$title:"Create New"}},page.$prototype.$key="{$uuid}";else{page.$prototype=_buildPrototype(repr,facet),page.$prototype.$url="{$baseUrl}/"+repr+"('{$key}')?representation="+repr+"."+facet,page.$prototype.$key="{$uuid}",page.$prototype.$links={};var links={$edit:{$url:"{$baseUrl}/"+repr+"('{$key}')?representation="+repr+".$edit",$title:"Edit"},$query:{$url:"{$baseUrl}/"+repr+"?representation="+repr+".$query",$title:"List"},$save:{$url:"{$baseUrl}/"+repr+"('{$key}')?representation="+repr+".$save",$title:"Save"},$details:{$url:"{$baseUrl}/"+repr+"('{$key}')?representation="+repr+".$details",$title:"Detail"}};switch(facet){case"$create":page.$prototype.$links.$save=links.$save,page.$prototype.$links.$query=links.$query;break;case"$details":page.$prototype.$links.$edit=links.$edit,page.$prototype.$links.$query=links.$query;break;case"$edit":page.$prototype.$links.$save=links.$save,page.$prototype.$links.$details=links.$details,page.$prototype.$links.$query=links.$query;break;default:throw new Error(facet?"facet "+facet+" not handled yet":"No facet specified")}}var $article=entity.$articles&&entity.$articles[facet];$article&&(page.$article=$article),page.$prototype.$baseUrl=_LOCAL_ENTITIES_URL,page.$prototype.$isUnitTest=entity.$isUnitTest===!0,page.$prototype.$isUnitTest&&!page.$prototype.$title&&(page.$prototype.$title="Unit test "+entity.$entityName),entity.$prototype&&entity.$prototype(page.$prototype,repr,facet)}function _buildPrototype(repr,facet){var entity=_entities[repr];if(!entity)return null;var proto={$properties:{}};return Object.keys(entity.$properties).forEach(function(key){var prop=entity.$properties[key],$type=prop.$type||"application/x-string",propNew=proto.$properties[key]={$type:$type};for(var i=0;i<_propertiesToCopy.length;i++){var pname=_propertiesToCopy[i],p=prop[pname];p&&(propNew[pname]=p)}}),proto}var globals=require("syracuse-tablet/html/js/helpers/globals"),sdataUtils=require("syracuse-tablet/html/js/sdata/sdataUtils"),_LOCAL_ENTITIES_URL="http://localhost:8124/mobile1/x3/erp/local",_entities={},_propertiesToCopy=["$title","$isExcluded","$isHidden","$isMandatory","$isReadOnly","$isDisabled","$format","$x3Format","$unit","$value","$shortTitle","$capabilities","$item","$minimum","$maximum","$exclusiveMinimum","$exclusiveMaximum","$minItems","$maxItems","$isNullable","$isUnique","$pattern","$minLength","$maxLength","$precision","$scale","$enum","$format","$url"];exports.registerApp=function(app){globals.getMetaData().registerStaticApp(app)},exports.registerEntity=function(entity){_entities[entity.$entityName]=entity},exports.getEntity=function(entity){return _entities[entity]},exports.getPageInfo=function(name,options){var repr=name.split(".");repr.length===5&&(repr=repr.slice(3,5));if(repr[0].smStartsWith("QUERY~")||repr[0].smStartsWith("STATS~")){var p=repr[0].split("~");repr[0]=p[1]}var ent=_entities[repr[0]];if(!ent)return null;var state={home:!1,type:"regular",subtype:repr[1]?repr[1].substring(1):"unknown",cached:!1,refreshed:!1,changeHash:!1};return state.name=name,state},exports.getRegularPageInfo=function(pageId){var repr=pageId.split(".");repr.length===5&&(repr=repr.slice(3,5));if(repr[0].smStartsWith("QUERY~")||repr[0].smStartsWith("STATS~")){var p=repr[0].split("~");repr[0]=p[1]}var ent=_entities[repr[0]],pageInfo;return ent&&(pageInfo=_buildPageInfo(repr[0],repr[1],ent)),$.smResolve(pageInfo)},exports.getPrototype=function(repr,facet){return _buildPrototype(repr,facet)},exports.isLocalEntityUrl=function(url){return url?url.smStartsWith(_LOCAL_ENTITIES_URL):!1},exports.getLocalEntityUrl=function(entity,path){return _LOCAL_ENTITIES_URL+"/"+entity+(path?path:"")},exports.callLocalEntityUrl=function(url){var sdataUrl=sdataUtils.parseSDataURL(url);if(!sdataUrl||!sdataUrl.entity)return null;var entity=exports.getEntity(sdataUrl.entity);return!entity||!entity.$urlCall?null:entity.$urlCall(sdataUrl,sdataUrl.path.split("/").splice(6))}}),define("syracuse-tablet/html/js/application/pageRegistry",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/entities/clientContract"],function(require,exports,module){function _addOptions(pageName,pageInfo,options,currentPage){options=options||{},pageInfo.options=$.extend(!0,{},options),_addGadgetData(pageInfo,currentPage)}function _addGadgetData(pageInfo,currentPage){var gadgetId=pageInfo.options["gadget-id"];if(gadgetId){var $properties=currentPage&&currentPage.prototype&&currentPage.prototype.json&&currentPage.prototype.json.$properties;$properties&&Object.keys($properties).some(function(vignetteId){var vignette=$properties[vignetteId];if(vignette&&vignette.$gadget&&vignette.$gadget.$uuid===gadgetId){var json=vignette.$gadget;return pageInfo.options.gadget=json,!0}return!1})}}function _createDummyPageInfo(pageName){var pageInfo={name:pageName,home:!1,type:"regular",subtype:"",cached:!1,refreshed:!1,changeHash:!1};if(pageName){var x=pageName.split(".");x.length>0&&x[x.length-1].smStartsWith("$")&&(pageInfo.subtype=x[x.length-1].substring(1))}return pageInfo}function _addAuthoringInfo(pageInfo){if(!pageInfo.authoringName){var segs=pageInfo.name.split("."),authoringName;segs.length===5?authoringName=segs[0]+"."+segs[1]+"."+segs[3]+"."+segs[4]:authoringName=pageInfo.name,segs.length===2&&(authoringName="syracuse.collaboration."+authoringName),pageInfo.authoringName=authoringName}}function _registerStaticPages(){["login"].forEach(function(name){var info={name:name,type:"static",subtype:"html",cached:!1,refreshed:!1,changeHash:!1,home:!1,disableAuthoring:!0,isLogin:name==="login",$prototype:{$properties:{}},$article:{$layoutType:"stack",$items:[]}};_staticPages[name]=info})}var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),_staticPages={};exports.getPageInfo=function(pageName,options,currentPage){return options=options||{},$.smResolve().then(function(){var pageInfo=_staticPages[pageName];return pageInfo}).then(function(pageInfo){return pageInfo||(pageInfo=clientContract.getPageInfo(pageName,options)),pageInfo}).then(function(pageInfo){if(pageName==="rowdetail"||pageName==="carddesign"||pageName==="chartdetail"){if(!currentPage)throw new Error(pageName+" - Not null currentPage expected");var ctrl=currentPage.getControl?currentPage.getControl(options.controlId):null;if(!ctrl)throw new Error(pageName+" - Control not found - id:"+options.controlId);if(!ctrl.childPageGetPageInfo)throw new Error(pageName+" - Control must implement childPageGetPageInfo");return ctrl.childPageGetPageInfo(pageName)}return pageInfo||(pageInfo=globals.getMetaData().getPageInfo(pageName)),pageInfo}).then(function(pageInfo){return pageInfo||(pageInfo=_createDummyPageInfo(pageName)),_addAuthoringInfo(pageInfo),pageInfo}).then(function(pageInfo){return _addOptions(pageName,pageInfo,options,currentPage),pageInfo.uuid=utils.readableuid("page",pageInfo.type,pageInfo.name),pageInfo.applicationName=globals.getApplication().dao.getApplicationName(),$.extend(!0,{},pageInfo)})},_registerStaticPages()}),define("syracuse-tablet/html/js/authoring/authoringSData",["require","exports","module","syracuse-tablet/html/js/sdata/sdataHttp"],function(require,exports,module){function _extractDiag(data,diags){Object.keys(data).forEach(function(key){var value=data[key];key==="$diagnoses"?value.forEach(function(d){diags.push(d)}):value&&typeof value=="object"&&_extractDiag(value,diags)})}var sdataHttp=require("syracuse-tablet/html/js/sdata/sdataHttp"),_DEVICE_NAME="mobile";exports.getPageVariants=function(pageData){return $.smResolve().then(function(){pageData=$.extend(!0,{},{device:_DEVICE_NAME},pageData);if(!pageData.application||!pageData.contract||!pageData.representation||!pageData.facet||!pageData.device)return $.smReject("Not all mandatory parameters present: "+JSON.stringify(pageData));var code=[pageData.application,pageData.contract,pageData.representation,pageData.facet,pageData.device].join("."),req={url:"/sdata/syracuse/collaboration/syracuse/pageDefs(code%20eq%20'"+code+"')?representation=pageDef.$details"};return sdataHttp.send(req).then(function(response){return response&&response.isSuccess?response.responseJSON.variants||[]:response.status===404?[]:$.smReject("Unknown error")})})},exports.deletePageVariants=function(pageData){return $.smResolve().then(function(){pageData=$.extend(!0,{},{device:_DEVICE_NAME},pageData);if(!pageData.application||!pageData.contract||!pageData.representation||!pageData.facet||!pageData.device)return $.smReject("Not all mandatory parameters present: "+JSON.stringify(pageData));var code=[pageData.application,pageData.contract,pageData.representation,pageData.facet,pageData.device].join("."),req={url:"/sdata/syracuse/collaboration/syracuse/pageDefs(code%20eq%20'"+code+"')?representation=pageDef.$edit",method:"DELETE"};return sdataHttp.send(req).then(function(response){if(response&&response.isSuccess)return;return $.smReject("Unknown error")})})},exports.createPageDefinitionWC=function(opts){var params={pageContext:[opts.application,opts.contract,opts.representation,opts.facet].join("."),device:_DEVICE_NAME,representation:"pageAuth.$edit"},url="/sdata/syracuse/collaboration/syracuse/pageAuths"+(opts.variant!=null?"('"+opts.variant+"')":"/$template")+"/$workingCopies?"+Object.keys(params).map(function(key){return key+"="+params[key]}).join("&"),req={url:url,method:"POST"};return sdataHttp.send(req).then(function(response){return response&&response.isSuccess?response.responseJSON:$.smReject("Unknown error")})},exports.savePageDefinitionWC=function(opts,wc){var parameters={roles:opts.roles,users:opts.users,endpoints:opts.endpoints,saveAsOption:opts.saveAsOption,isFactory:!1,isModelRepresentation:!1,personalCopy:!1,variantCode:opts.variantCode,variantTitle:opts.variantTitle,variantDescription:opts.variantDescription};switch(opts.saveAsOption){case"factory_variant":parameters.isFactory=!0;break;case"personal_copy":parameters.personalCopy=!0;break;case"shared_copy":break;case"global_variant":}wc.$actions={};var save;opts.variant?(save=wc.$actions.$save={},delete parameters.saveAsOption):save=wc.$actions.saveAs={},save.$isRequested=!0,save.$parameters=parameters;var req={url:wc.$url,method:"PUT",send:wc};return sdataHttp.send(req).then(function(response){return response&&response.isSuccess?response.responseJSON:$.smReject("Unknown error")})},exports.savePageDefinition=function(opts){return exports.createPageDefinitionWC(opts).then(function(wc){var send=$.extend(!0,{},wc);return send.content=send.content||{},send.content.$article=opts.article,exports.savePageDefinitionWC(opts,send).then(function(wcSaved){var data=$.extend(!0,{},wc,wcSaved),diags=[];return _extractDiag(data,diags),{data:data,diags:diags}}).fail(function(e){return $.smReject({data:null,diags:[{$severity:"error",$message:""+e}]})})})}}),define("syracuse-tablet/html/js/authoring/authoringHtml",["require","exports","module"],function(require,exports,module){function _getCompiled(name){var c=_compiled[name];if(c)return c;var t=_templates[name];return c=Handlebars.compile(t),_compiled[name]=c,c}var _templates={authPanelHeader:'		<div style="display:table;table-layout:fixed;;width:100%;">			<div style="display:table-row;width:100%; ">				<div style="display:table-cell;width:300px;">					<div style="display:table;">						<div style="display:table-row;position:absolute;top:0;">							<div style="display:table-cell;">								<button class="btn btn-auth-header" id="s-m-auth-settings-id" type="button"><label class="glyphicon glyphicon-cog"></label>{{label_settings}}</button> 							</div>							<div style="display:table-cell;" >								<div class="btn-group" id="s-m-auth-orientation-id" data-toggle="buttons">									<button class="btn btn-auth-header active" id="s-m-auth-vertical-id" data-auth-orientation="portrait" title="{{label_preview_portrait}}"> 										<input type="radio" name="orientation" checked> 										<label class="glyphicon glyphicon-resize-vertical"></label> 									</button> 									<button class="btn btn-auth-header" id="s-m-auth-horizontal-id" data-auth-orientation="landscape" title="{{label_preview_landscape}}"> 										<input type="radio" name="orientation"> 										<label class="glyphicon glyphicon-resize-horizontal"></label> 									</button> 								</div>							</div>							<div style="display:table-cell;">								<button class="btn btn-auth-header" id="s-m-auth-scale-id" type="button" title="{{label_scale_to_fit}}"><label class="glyphicon glyphicon-fullscreen"></button> 							</div>						</div>					</div>				</div>				<div style="display:table-cell;" id="s-m-auth-header-actions-id">					<div style="display:table;">						<div style="display:table-row;position:absolute;top:0;">							<button style="display:table-cell;" class="btn btn-auth-header" id="s-m-auth-new-layout-id" type="button"><label class="glyphicon glyphicon-blackboard"></label><span>{{label_new_layout}}</span></button> 							<button style="display:table-cell;" class="btn btn-auth-header" id="s-m-auth-remove-all-id" type="button"><label class="glyphicon glyphicon-erase"></label><span>{{label_remove_all}}</span></button> 							<button style="display:table-cell;" class="btn btn-auth-header disabled" id="s-m-auth-remove-id" type="button"><label class="glyphicon glyphicon-trash"></label><span>{{label_remove}}</span></button> 							<button style="display:table-cell;" class="btn btn-auth-header disabled" id="s-m-auth-remove-cnt-id" type="button"><label class="glyphicon glyphicon-erase"></label><span>{{label_remove_container}}</span></button> 						</div>					</div>				</div>				<div style="display:table-cell;width:300px;">					<button id="auth-btn-undo-id"  class="btn btn-auth-header" type="button"><div class="icon-undo"></label>{{label_undo}}</button> 					<button id="auth-btn-undo-all-id"  class="btn btn-auth-header" type="button"><div class="icon-undoall"></label>{{label_undo_all}}</button> 					<button id="auth-btn-close-id" style="float:right;" class="btn btn-danger" type="button"><div class="glyphicon glyphicon-remove"></label></button> 					<button id="auth-btn-save-id" style="float:right;" class="btn btn-default" type="button"><div class="glyphicon glyphicon-ok"></label></button> 				</div>			</div>		</div>',authPanelFooter:'		<div class="btn-group"> 		</div>',authPanelRightStructure:'		<div class="s-m-site-auth-panel-content"> 			<header id="authPanelControlType">{{label_design}}</header> 			<p class="form-control-static" id="authPanelControlTitle"> </p> 			<div id="authPanelControl" class="tab-pane panel-body active"> 				<div id="authPanelControlSimple"> 				</div> 			</div> 		</div>',authPanelLeftStructure:'		<div class="s-m-site-auth-panel-content"> 			<ul class="nav nav-pills" role="tablist"> 				<li class="active"><a aria-expanded="true" href="#s-m-auth-tree-box" role="tab" data-toggle="tab">{{label_content}}</a></li> 				<li><a href="#s-m-auth-insert-box" role="tab" data-toggle="tab">{{label_insert}}</a></li> 			</ul> 			<div class="tab-content"> 				<div id="s-m-auth-tree-box" class="tab-pane active"> 					<ul class="s-m-auth-tree" id="auth-structure-root-id"></ul> 				</div> 				<div id="s-m-auth-insert-box" class="tab-pane"> 					<div class="panel panel-primary s-m-panel-auth-prop"> 						<div class="panel-heading" role="tab" id="auth-lp-cnt-containers-header"> 							<a data-toggle="collapse" data-parent="#accordion" href="#auth-lp-cnt-containers-clpse" 								aria-expanded="true" aria-controls="auth-lp-cnt-containers-clpse" 								<h4 class="panel-title"> 									{{label_containers}}								</h4> 							</a> 						</div> 						<div id="auth-lp-cnt-containers-clpse" class="panel-collapse collapse in" 							role="tabpanel" aria-labelledby="auth-lp-cnt-containers-header"> 							<label>{{lab_drag_to_add}}</label><br> 							<div class="s-m-auth-btn-container s-m-draggable fa fa-th" data-auth-bind="group" title="{{lab_group}}" data-auth-drag-action="add_layout"></div> 							<div class="s-m-auth-btn-container s-m-draggable fa fa-square-o" data-auth-bind="tile" title="{{lab_tile}}" data-auth-drag-action="add_layout"></div> 							<div class="s-m-auth-btn-container s-m-draggable fa fa-bars" data-auth-bind="stack" title="{{lab_stack}}" data-auth-drag-action="add_layout"></div> 						</div> 					</div> 					<div class="panel panel-primary s-m-panel-auth-prop"> 						<div class="panel-heading" role="tab" id="auth-lp-cnt-props-header"> 							<a data-toggle="collapse" data-parent="#accordion" href="#auth-lp-cnt-props-clpse" 								aria-expanded="true" aria-controls="auth-lp-cnt-props-clpse">								<h4 class="panel-title"> 									{{label_fields}}								</h4> 							</a> 						</div> 						<div id="auth-lp-cnt-props-clpse" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="auth-lp-cnt-props-header"> 						</div> 					</div> 				</div> 			</div> 		</div>',authPanelPropertyGroup:' 		<div class="panel panel-primary s-m-panel-auth-prop s-m-auth-prop-type-{{type}}"> 			<div class="panel-heading" role="tab" id="heading_{{id}}"> 				<a data-toggle="collapse" data-parent="#{{#if parentId}}{{parentId}}{{/if}}{{#unless parentId}}accordion{{/unless}}" href="#collapse_{{id}}" {{#if expanded}} aria-expanded="true"{{/if}} aria-controls="collapse_{{id}}" {{#unless expanded}}class="collapsed"{{/unless}}>					<h4 class="panel-title"> 						{{label}}					</h4> 				</a> 			</div> 			<div id="collapse_{{id}}" class="panel-collapse collapse {{#if expanded}}in{{/if}}" role="tabpanel" aria-labelledby="heading_{{id}}"> 			</div> 		</div>',authPanelPropertySeperator:' 		<div class="auth-group-seperator"></div> 		',authPanelPropertyRadio:' 		<div class="btn-group" data-toggle="buttons" style="width: 100%;"> 			{{#each options}} 				<div class="btn-group" style="width: 100%; display: {{this.display}};" id="{{this.id}}"> 					<label class="s-m-auth-btn-radio-icon s-m-auth-btn-block" id="{{this.id}}_lab" data-s-m-auth-value="{{this.value}}"> 						<input type="radio" name="{{group}}" id="{{this.id}}">{{this.label}} 					</label> 				</div> 			{{/each}} 		</div>',authPanelPropertyRadioIcon:' 		<div class="btn-group" data-toggle="buttons" style="width: 100%;"> 			{{#each options}} 				<div class="btn-group"> 					<label class="auth-btn-icon {{icon}}" id="{{this.id}}_lab" data-s-m-auth-value="{{this.value}}"> 						<input type="radio" name="{{group}}" id="{{this.id}}"> 					</label> 				</div> 			{{/each}} 		</div>',authPanelPropertyCheckbox:' 		<div class="btn-group" style="width: 100%;"> 			{{#each options}} 				<div class="btn-group" style="width: 100%; display: {{this.display}};" id="{{this.id}}"> 					<label class="s-m-auth-btn-checkbox-icon s-m-auth-btn-block" id="{{this.id}}_lab" data-s-m-auth-value="{{this.value}}"> 						<input type="checkbox" id="{{this.id}}" {{#if checked}}checked{{/if}}>{{this.label}} 					</label> 				</div> 			{{/each}} 		</div>',authPanelPropertyInput:' 			<div class="form-group"> 				<input class="form-control" id="{{id}}" value="{{value}}" /> 			</div>',authPanelPropertyInputLocale:' 		<div class="form-group"> 			<input class="form-control" id="{{id}}" value="{{value}}" data-old-value="{{oldValue}}" data-old-uuid="{{oldUUID}}"/> 		</div>',authPanelSliderStep:' 		<div class="form-group"> 			<section style="padding-left:10px;padding-right:10px;">				<input id="{{id}}" type="text" data-slider-min="{{min}}" data-slider-max="{{max}}" data-slider-step="{{step}}"  data-slider-value="{{value}}" data-slider-orientation="horizontal" data-slider-tooltip="hide">				{{#if displayValue}}<span class="s-m-slider-value">{{#if valText}}{{valText}}{{/if}}{{#unless valText}}{{value}}{{/unless}}</span>{{/if}}			</section>		</div>',authPanelGaugeSlider:'		<div class="form-group s-m-auth-g-slider"> 			<section>				<input id="{{id}}" type="text" data-slider-min="{{min}}" data-slider-max="{{max}}" data-slider-step="{{step}}"  data-slider-value="{{value}}" data-slider-orientation="horizontal" data-slider-tooltip="hide" class="s-m-auth-g-range">				<span id="{{id}}SliderVal">{{value}}</span>			</section>		</div>	',authPanelPropertyCellSize:' 		<section>			<label class="s-m-auth-btn-checkbox-icon s-m-auth-btn-block">				<input type="checkbox">				{{sameSize}}			</label>			{{#each sizes}} 				<section class = "{{prop}}">					<label class="{{class}} auth-size-device-header" style="width: 100%">{{this.label}}</label> 					<div class="btn-group" data-toggle="buttons" style="width: 100%;"> 						{{#each ../values}} 							<div class="btn-group"> 								<label class="auth-btn-size-sel" id="{{this.id}}_lab" data-s-m-auth-prop="{{../this.prop}}" data-s-m-auth-value="{{this}}"> 									<input type="radio" name="{{group}}" id="{{../this.prop}}={{this}}">{{this}} 								</label> 							</div> 						{{/each}} 					</div> 				</section>			{{/each}}		</section>',authPanelPropertyJSON:' 			<div class="form-group"> 				<textarea class="form-control" id="{{id}}" rows="10">{{value}}</textarea> 				<div class="btn-group btn-group-justified" role="group">					<a class="btn btn-default" data-action="jsonApply">{{label_apply}}</a> 					<a class="btn btn-default" data-action="openInNewTab">{{label_display}}</a> 				</div>			</div><div style="clear: both;"></div>',authPanelPropertyPROTOTYPE:' 			<div class="form-group"> 				<textarea readonly class="form-control" id="{{id}}" rows="10">{{value}}</textarea> 				<div class="btn-group btn-group-justified" role="group">					<a class="btn btn-default" data-action="openInNewTab">{{label_display}}</a> 				</div>			</div>',authPanelPropertyGBorderValues:'		<div class="form-group">			<p class="s-m-auth-g-borders-tip">{{label_tip}}</p>			<label>{{label_min}}</label>			{{{markupMin}}}			<label>{{label_max}}</label>			{{{markupMax}}}			<button class="btn btn-default btn-block" style="margin-top:5%;">{{label_apply}}</button> 		</div>	',authPanelPropertyGSegmentsNumber:'		<div class="form-group">			{{{value}}} 			<button class="btn btn-default btn-block" style="margin-top:5%;">{{label_apply}}</button> 		</div>	',gaugeBorderInput:'		<textarea class="form-control" id={{id}} rows="1">{{value}}</textarea>	',gaugeSelect:'		<select id={{id}} style="color:black;" class="form-control">			{{#each options}}				<option value="{{option_value}}" {{#if selected}}selected=true{{/if}}>{{option_value}}</option>			{{/each}}		</select>	',gaugeSegment:'		<div id="{{id}}" class="s-m-auth-seg-slot">			<div class="s-m-g-seg-info-block">				<div class="s-m-g-seg-label">					<label>{{label_valstart}}</label>				</div>				<div class="s-m-g-seg-value">					<input type="text" class="form-control" value="{{value_valstart}}" id="{{id}}-valstart">				</div>			</div>			<div class="s-m-g-seg-info-block">				<div class="s-m-g-seg-label">					<label>{{label_valend}}</label>				</div>				<div class="s-m-g-seg-value">					<input type="text" class="form-control" value="{{value_valend}}" id="{{id}}-valend">				</div>			</div>			<div class="s-m-g-seg-info-block">				<div class="s-m-g-seg-label">					<label>{{label_propstart}}</label>				</div>				<div class="s-m-g-seg-value">					{{{value_propstart}}}				</div>			</div>			<div class="s-m-g-seg-info-block">				<div class="s-m-g-seg-label">					<label>{{label_propend}}</label>				</div>				<div class="s-m-g-seg-value">					{{{value_propend}}}				</div>			</div>			<div class="s-m-g-seg-info-block">				<div class="s-m-g-seg-label">					<label>{{label_color}}</label>				</div>				<div class="s-m-g-seg-value">					<input type="text" class="form-control" value="{{value_color}}" id="{{id}}-color">				</div>			</div>		</div>	',authPanelButton:'		<div class="s-m-auth-g-apply-slot">			<button class="btn btn-default btn-block {{css}}" style="margin-top:5%;">{{label}}</button> 		</div>	'},_compiled={};exports.execute=function(name,ctx){var c=_getCompiled(name);return c(ctx)}}),define("syracuse-tablet/html/js/authoring/authoringVal",["require","exports","module","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/modals/modal"],function(require,exports,module){function getAuthoringPropertiesLayouts(){return _authProperties&&_authProperties.getPropertiesLayouts()}function _validate(fullPage,article,properties){var errors=[];try{_checkNode(fullPage,null,article,properties,errors)}catch(e){errors.push("javascriptException - validate\n"+jsutils.cleanStack(e.stack))}return errors}function _checkNode(fullPage,parent,node,properties,errors){Object.keys(_propertiesToCheck).some(function(key){node[key]!==undefined&&_propertiesToCheck[key](fullPage,parent,node,key,properties,errors)});var children;node.$items?children=node.$items:node.$article&&(children=[node.$article]),children&&children.forEach(function(child){_checkNode(fullPage,node,child,properties,errors)})}function _checkLayoutType(fullPage,parent,node,key,properties,errors){var type=node.$layoutType,ptype=parent&&parent.$layoutType,known=["stack","row","cell","hub","hubGroup","tile"];if(known.indexOf(type)<0){errors.push(locale.text("auth.err.unknown.layout",[type]));return}if(!fullPage)return;switch(type){case"hub":parent!=null&&errors.push(locale.text("auth.err.hub.notroot"));break;case"hubGroup":ptype!="hub"&&errors.push(locale.text("auth.err.hubgroup.nohub"));break;case"tile":ptype!="hubGroup"&&errors.push(locale.text("auth.err.tile.nohubgroup"))}}function _checkCellSize(fullPage,parent,node,key,properties,errors){var value=+node[key];value>=1&&value<=12||errors.push(locale.text("auth.err.cellSize",[key,value]))}function _checkTileSize(fullPage,parent,node,key,properties,errors){var value=node[key],valid=getAuthoringPropertiesLayouts().properties.tileSize.values.map(function(e){return e.value});valid.indexOf(value)<0&&errors.push(locale.text("auth.err.tileSize",[valid.join(", "),value]))}var locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),_authProperties;exports.setProperties=function(properties){_authProperties=properties},exports.validateJSON=function(fullPage,jsonText,properties){var obj;try{if($.isPlainObject(jsonText))obj=jsonText;else{if(!(jsonText!=null&&jsonText.length>0))throw new Error("Unexpected bad JSONtext");obj=JSON.parse(jsonText)}var errors=_validate(fullPage,obj,properties);if(!(errors.length>0))return obj;var text="\n"+errors.join("\n");modal.error(locale.text("auth.panel.save_error_title"),{message:locale.text("auth.panel.save_error_json"),detail:text})}catch(e){modal.error(locale.text("auth.panel.save_error_title"),{message:locale.text("auth.panel.save_error_json"),detail:e})}},exports.toSortedJSON=function(obj){var toJSON=function(){var self=this,that={},$items,$article;return Object.keys(self).forEach(function(key){self.hasOwnProperty(key)&&(key==="$items"?$items=self[key]:key==="$article"?$article=self[key]:key!=="toJSON"&&(that[key]=self[key]))}),$article&&(that.$article=$article),$items&&(that.$items=$items),self.toJSON&&delete self.toJSON,that.toJSON&&delete that.toJSON,that};JSON.stringify(obj,function replacer(key,value){return $.isPlainObject(value)&&(value.toJSON=toJSON),value});var str=JSON.stringify(obj,null," ");return str};var _propertiesToCheck={$layoutType:_checkLayoutType,$size:_checkTileSize,$widthXs:_checkCellSize,$widthSm:_checkCellSize,$widthMd:_checkCellSize,$widthLg:_checkCellSize}}),define("syracuse-tablet/html/js/authoring/authoringComponents",["require","exports","module","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_templates={genericSlider:'		<div class="form-group" {{#if margin}}style="margin-bottom:{{margin}}px;"{{/if}}> 			<section style="padding-left:10px;padding-right:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis">				<input id="{{id}}" type="text" data-slider-min="{{min}}" data-slider-max="{{max}}" data-slider-step="{{step}}"  data-slider-value="{{value}}" data-slider-orientation="horizontal" data-slider-tooltip="hide">				{{#if displayValue}}<p class="s-m-slider-value">{{#if valText}}{{valText}}{{/if}}{{#unless valText}}{{value}}{{/unless}}</p>{{/if}}			</section>		</div>',flatRadio:'		<div class="btn-group" style="margin-bottom:10px;" data-toggle="buttons">			{{#each btns}}				<label class="btn btn-primary">					<input type="radio" autocomplete="off" value="{{value}}">					{{title}}				</label>			{{/each}}		</div>',select:'		<div style="position:relative;{{#if margin}}margin-bottom:{{margin}}px;{{/if}}">		  <select class="selectpicker {{css}}"  data-width="100%" {{#if dataSize}}data-size="{{dataSize}}"{{/if}}>		  	{{#each options}}		     	<option value="{{value}}">{{title}}</option>			{{/each}}		  </select>		</div>',actionBtns:'		<div style="text-align:center;">			<div class="btn-group" role="group" style="margin-bottom:10px;">				{{#each btns}}					<button type="button" class="btn btn-default" value="{{value}}">{{title}}</button>				{{/each}}			</div>		</div>',colorPicker:'		<input type="text" {{#if id}}id="{{id}}"{{/if}} class="form-control {{css}}""></input>',editableList:'		<section class = "auth-editableList  {{css}}" {{#if id}}id="{{id}}"{{/if}} >			<ul class="list-group auth-editableList"></ul>			<div class="authMsg"></div>			<div class="btn-group btn-group-justified" role="group">				<a type="button" class="btn btn-default authLstAct" data-action="append">					<i class="fa fa-plus"></i>					<span>{{addTitle}}</span>				</a>				<a style="display:none" type="button" class="btn btn-default authLstAct" data-action="validate">					<i class="fa fa-check"></i>					<span>{{validateTitle}}</span>				</a>				<a style="display:none" type="button" class="btn btn-default authLstAct" data-action="cancel">					<i class="fa fa-times"></i>					<span>{{cancelTitle}}</span>				</a>			</div>		</section>',editableListItem:'		<li class="list-group-item {{css}}" data-params="{{id}}">			<span>				<span>{{#if title}}{{title}}{{/if}}{{#if titleHtml}}{{{titleHtml}}}{{/if}}</span>				<span class="fa fa-pencil" data-action="editItem"></span>				<span class="fa fa-times" data-action="deleteItem"></span>			</span>		</li>',colorPalettePicker:'		<section class="auth-colorPalettePicker {{dropDirection}}">			<div class="input-group" data-toggle="dropdown" aria-expanded="false">				<span class="form-control auth-paletteColor"></span>				<span class="input-group-addon"><div class="fa fa-times"></div></span>			</div>			<div class="dropdown-menu" style="width: 100%;width: 100%;padding-left: 5px;padding-right: 5px;">				<div class="auth-paletteRoot" data-toggle="buttons" style="width: 100%;white-space: normal;" >				</div>		  	</div>		</section>',colorPaletteItem:'		<div class="auth-paletteItem {{css}}" data-id="{{id}}" data-name="{{name}}" data-css="{{css}}">		</div>',iconPalettePicker:'		<section class="auth-iconPalettePicker {{dropDirection}}">			<div class="input-group" data-toggle="dropdown" aria-expanded="false">				<span class="form-control auth-paletteIcon"></span>				<span class="input-group-addon"><div class="fa fa-times"></div></span>			</div>			<div class="dropdown-menu">				<div class="auth-paletteRoot" data-toggle="buttons" style="width: 100%;white-space: normal;" >				</div>		  	</div>		</section>',iconPaletteItem:'		<div class="auth-paletteItem {{css}}" data-params="{{name}}" data-css="{{css}}">		</div>',switcher:'		 <input {{#if id}}id="{{id}}"{{/if}} type="checkbox">',checkboxList:' 		<section class="auth-checkboxList {{css}}" {{#if id}}id="{{id}}"{{/if}}/>',checkboxListContent:' 		<div class="btn-group s-m-list">			{{#each list}} 				<div class="s-m-item btn-group" data-id = "{{id}}"> 					<label> 						<input type="checkbox" {{#if checked}}checked{{/if}}>{{label}} 					</label> 				</div> 			{{/each}}		</div>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[name],tmpl=_templates[key]=Handlebars.compile(tmpl)),tmpl(ctx)},_components={editableList:function(options,name){options=options||{},this.options=options,this.name=name||"editableList",this.createMarkup=function($$parent){return this.$$panel=$(_getHtml("editableList",{id:options.id,css:options.css||"",addTitle:options.appendTitle||locale.text("append"),validateTitle:options.validateTitle||locale.text("validate"),cancelTitle:options.cancelTitle||locale.text("cancel")})).appendTo($$parent),options.isHidden===!0&&this.hide(),this.options.doAction&&this.$$panel.on("click","[data-action]",jsutils.bindFn(this.onClick,this)),this.$$list=this.$$panel.find("ul"),this.$$panel},this.onClick=function(event){var $$target=$(event.target).closest("[data-action]"),action=$$target.attr("data-action"),id;action==="append"||action==="cancel"?id="":action==="editItem"||action==="deleteItem"?id=$$target.closest("[data-params]").attr("data-params")||"":action==="validate"&&(id=$$target.attr("data-params")||"");var done=this.options.doAction(action,id,this);done==1&&(action==="deleteItem"?$$target.closest("li").off().remove():action==="editItem"||action==="append"?this.toggleEditStatus(!0,id):(action==="validate"||action==="cancel")&&this.toggleEditStatus(!1))},this.insertRecords=function(records){if(!records||!this.$$list)return;$.isPlainObject(records)&&(records=[records]);if(!Array.isArray(records))return;var self=this;records.forEach(function(record){if(!record||!record.id)return;var $$newRec=$(_getHtml("editableListItem",{id:record.id,css:record.css||"",titleHtml:record.titleHtml,title:record.title})),$$oldRec=self.$$list.find('[data-params="'+record.id+'"]');$$oldRec.length>0?($$oldRec.before($$newRec),$$oldRec.remove()):$$newRec.appendTo(self.$$list)})},this.destroyMarkup=function(){this.options=null,this.$$list&&(this.$$list.off(),this.$$list=null),this.$$panel=null},this.clear=function(){if(!this.$$list)return;this.$$list.find("li").remove()},this.toggleEditStatus=function(editMode,recordId){if(!this.$$panel)return;this.$$panel.find('[data-action="append"]').toggle(editMode!==!0),this.$$panel.find('[data-action="validate"]').toggle(editMode===!0).attr("data-params",editMode===!0?recordId:""),this.$$panel.find('[data-action="cancel"]').toggle(editMode===!0)},this.disableAppendBtn=function(disabled){this.$$panel.find('[data-action="append"]').attr("disabled",disabled===!0)},this.toggleMessage=function(msgText,type){if(!this.$$panel)return;var $$msg=this.$$panel.find(".authMsg");$$msg.empty().removeClass(),msgText&&msgText.trim().length>0&&($$msg.text(msgText),type&&$$msg.addClass("s-m-"+type)),$$msg.addClass("authMsg")}},colorPicker:function(options,name){options=options||{},this.options=options,this.name=name||"colorPicker",this.createMarkup=function($$parent){return this.$$picker=$(_getHtml("colorPicker",{id:options.id,css:options.css||""})).appendTo($$parent),options.isHidden===!0&&this.$$picker.hide(),this.$$picker.minicolors({control:options.control||"hue",defaultValue:options.value||"",inline:options.inline===!0,letterCase:options.letterCase||"lowercase",opacity:options.opacity===!0,position:options.position||"top left",theme:"bootstrap",change:options.onChange?jsutils.bindFn(this.onChange,this):null}),this.$$panel=this.$$picker,this.$$panel},this.onChange=function(event){this.options.onChange(event,this)},this.destroyMarkup=function(){this.options.onChange=null,this.options=null,this.$$picker&&(this.$$picker.minicolors("destroy"),this.$$picker=null)},this.getValue=function(type){if(!this.$$picker)return;var meth;return type==="rgbObject"||type==="rgbString"||type==="rgbaString"?meth=type:meth="value",this.$$picker.minicolors(meth)},this.setValue=function(valueHexa){if(!this.$$picker)return;return this.$$picker.minicolors("value",valueHexa)}},colorPalettePicker:function(options,name){options=options||{},this.options=options,this.name=name||"colorPalettePicker",this.createMarkup=function($$parent){var css=options.css||"";return this.$$panel=$(_getHtml("colorPalettePicker",{id:options.id,css:css,dropDirection:options.dropUp===!0?"dropup":"dropdown"})).appendTo($$parent),this.$$rootPalette=this.$$panel.find(".auth-paletteRoot"),this.$$input=this.$$panel.find(".auth-paletteColor"),this.$$clearBtn=this.$$panel.find(".input-group-addon").on("click",jsutils.bindFn(this.onClear,this)),this.$$rootPalette.on("click","[data-id]",jsutils.bindFn(this.onSelectColor,this)),options.isHidden===!0&&this.$$panel.hide(),options.palette&&this.updatePalette(options.palette),this.setValue(options.color),this.$$panel},this.updatePalette=function(palette){if(!palette)return;var html=[];palette.forEach(function(item){item.items?(item.title&&html.push('<div class ="authPaletteSection">'+item.title+"</div>"),item.items.forEach(function(subItem){subItem.name=subItem.name||subItem.id,html.push(_getHtml("colorPaletteItem",subItem))})):html.push(_getHtml("colorPaletteItem",item))}),this.$$rootPalette.html(html.join(""))},this.onClear=function(event){this.$$panel.is(".open")||(event.stopPropagation(),this.setValue(null),this.options.onSelectColor&&this.options.onSelectColor(null))},this.onSelectColor=function(event){var $$t=$(event.target),value={id:$$t.attr("data-id")||"",name:$$t.attr("data-name")||"",css:$$t.attr("data-css"),bgColor:$$t.css("background-color"),color:$$t.css("color")};this.setValue(value),this.options.onSelectColor&&this.options.onSelectColor(value)},this.destroyMarkup=function(){this.$$rootPalette&&(this.$$rootPalette.off(),this.$$rootPalette=null),this.options=null,this.$$clearBtn.off(),this.$$clearBtn=this.$$input=this.$$panel=null},this.getValue=function(){var $$selected=this.$$panel.find(".auth-paletteItem.current");return $$selected.length==0?null:{css:$$selected.attr("data-css")||"",name:$$selected.attr("data-name")||"",id:$$selected.attr("data-id")||"",bgColor:$$selected.css("background-color"),color:$$selected.css("color")}},this.setValue=function(color){this.$$panel.find(".auth-paletteItem.current").removeClass("current"),color&&this.$$panel.find('[data-id="'+color.id+'"]').addClass("current"),this.$$input.removeClass().addClass("form-control").text(color?color.name:locale.text("auth.components.palette.nocolor")),color&&this.$$input.addClass(color.css)}},iconPalettePicker:function(options,name){options=options||{},this.options=options,this.name=name||"iconPalettePicker",this.createMarkup=function($$parent){var css=options.css||"";return this.$$panel=$(_getHtml("iconPalettePicker",{id:options.id,css:css,dropDirection:options.dropUp===!0?"dropup":"dropdown"})).appendTo($$parent),this.$$rootPalette=this.$$panel.find(".auth-paletteRoot"),this.$$input=this.$$panel.find(".auth-paletteIcon"),this.$$clearBtn=this.$$panel.find(".input-group-addon").on("click",jsutils.bindFn(this.onClear,this)),this.$$rootPalette.on("click","[data-params]",jsutils.bindFn(this.onSelectIcon,this)),options.isHidden===!0&&this.$$panel.hide(),options.palette&&this.updatePalette(options.palette),this.setValue(options.icon),this.$$panel},this.updatePalette=function(palette){if(!palette)return;var html=[];palette.forEach(function(item){html.push(_getHtml("iconPaletteItem",item))}),this.$$rootPalette.html(html.join(""))},this.onClear=function(event){this.$$panel.is(".open")||(event.stopPropagation(),this.setValue(null))},this.onSelectIcon=function(event){var $$t=$(event.target),old=this.getValue(),value={name:$$t.attr("data-params"),css:$$t.attr("data-css")};if(old&&old.name==value.name&&old.css==value.css)return;this.setValue(value),this.options.onSelectIcon&&this.options.onSelectIcon(value)},this.destroyMarkup=function(){this.$$rootPalette&&(this.$$rootPalette.off(),this.$$rootPalette=null),this.options=null,this.$$clearBtn.off(),this.$$clearBtn=this.$$input=this.$$panel=null},this.getValue=function(){var $$selected=this.$$panel.find(".auth-paletteItem.current");return $$selected.length==0?null:{css:$$selected.attr("data-css")||"",name:$$selected.attr("data-params")||""}},this.setValue=function(icon){this.$$panel.find(".auth-paletteItem.current").removeClass("current"),icon&&this.$$panel.find('[data-params="'+icon.name+'"]').addClass("current"),this.$$input.removeClass().addClass("form-control").empty(),icon?this.$$input.html('<div class="iconIcon '+icon.css+'"></div><div class="iconName">'+icon.name+"</div>"):this.$$input.text(locale.text("auth.components.palette.noicon"))}},select:function(options,name){options=options||{};if(!options.onChange)throw new Error("select component - onChange is mandatory");options.options=options.options||[],options.value==null&&(options.value=Object.keys(options.options)[0]),this.name=name||"select",this.options=options;var optselect={options:options.options||[],css:options.css||""};options.dataSize&&(optselect.dataSize=options.dataSize),this.createMarkup=function($$parent){return this.$$panel=$(_getHtml("select",optselect)).appendTo($$parent),this.$$select=this.$$panel.find("select"),this.$$select.selectpicker(),this.$$select.selectpicker("val",options.value),this.$$select.on("change",jsutils.bindFn(this.onChange,this)),options.isHidden===!0&&this.$$select.selectpicker("hide"),this.$$panel},this.onChange=function(event){this.options.onChange(event,this)},this.destroyMarkup=function(){this.options.onChange=null,this.options=null,this.$$select&&(this.$$select.off(),this.$$select.selectpicker("destroy"),this.$$select=null)},this.getValue=function(){if(!this.$$select)return;return this.$$select.selectpicker("val")},this.setValue=function(value){if(!this.$$select)return;return this.$$select.selectpicker("val",value)},this.update=function(selectOpts,defValue){if(!this.$$select)return;selectOpts=selectOpts||[],this.$$select.find("option").remove();var self=this;selectOpts.forEach(function(v,idx){self.$$select.append('<option value="'+v.value+'">'+v.title+"</option>")}),defValue==null&&selectOpts.length>0&&(defValue=selectOpts[0].value),defValue!=null&&this.$$select.selectpicker("val",defValue),this.$$select.selectpicker("refresh")},this.clear=function(){this.update(null)}},flatRadio:function(options,name){this.name=name||"flatRadio",this.options=options,this.createMarkup=function($$parent){return this.$$panel=$(_getHtml("flatRadio",{btns:this.options.btns})).appendTo($$parent).on("change","input",this.options.onClick),this.$$panel.find('input[value="'+this.options.value+'"]').parent().button("toggle"),this.$$panel},this.destroyMarkup=function(){this.options.onClick=null,this.options=null,this.$$panel&&(this.$$panel.off(),this.$$panel=null)}},switcher:function(options,name){this.name=name||"switcher",this.options=options,this.createMarkup=function($$parent){return this.$$panel=$(_getHtml("switcher",{id:this.options.id})).appendTo($$parent),this.setValue(this.options.checked),this.$$panel.bootstrapSwitch("onText",this.options.onText||locale.text("auth.switcher.onText")),this.$$panel.bootstrapSwitch("offText",this.options.offText||locale.text("auth.switcher.offText")),this.$$panel.bootstrapSwitch("size",this.options.size||"small"),this.$$panel.bootstrapSwitch("onColor",this.options.onColor||"default"),this.$$panel.bootstrapSwitch("offColor",this.options.offColor||"default"),this.options.onSwitchChange&&this.$$panel.bootstrapSwitch("onSwitchChange",jsutils.bindFn(this.onSwitchChange,this)),this.$$panel},this.onSwitchChange=function(event,state){this.options.onSwitchChange(event,state)},this.destroyMarkup=function(){this.options=null,this.$$panel&&(this.$$panel.bootstrapSwitch("destroy"),this.$$panel=null)},this.getValue=function(value){if(!this.$$panel)return;return this.$$panel.bootstrapSwitch("state")},this.setValue=function(value){if(!this.$$panel)return;this.$$panel.bootstrapSwitch("state",value===!0,!0)}},actionBtns:function(options,name){this.name=name||"actionBtns",this.options=options,this.createMarkup=function($$parent){return this.$$panel=$(_getHtml("actionBtns",{btns:this.options.btns})).on("click",this.options.onClick).appendTo($$parent),this.$$panel},this.destroyMarkup=function(){this.options.onClick=null,this.options=null,this.$$panel&&(this.$$panel.off(),this.$$panel=null)}},genericSlider:function(options,name){this.name=name||"genericSlider",this.options=options,this.label=options.label,this.createMarkup=function($$parent){var displayValue=this.options.displayValue||this.options.slideHandler!=null;this.$$panel=$(_getHtml("genericSlider",{value:this.options.value,min:this.options.min,max:this.options.max,step:this.options.step||1,valText:this.options.value!=null?this.options.slideHandler?this.options.slideHandler(this.options.value,this):this.options.value:"",displayValue:displayValue,margin:this.options.margin+""})),$$parent.append(this.$$panel),this.$$textValue=$(".s-m-slider-value",this.$$panel),this.$$slider=$("input",this.$$panel).slider({}),displayValue&&this.$$slider.on("slide",jsutils.bindFn(this.onSlider,this,"slide")),this.options.stopHandler&&this.$$slider.on("slideStop",jsutils.bindFn(this.onSlider,this,"stop")),this.options.startHandler&&this.$$slider.on("slideStart",jsutils.bindFn(this.onSlider,this,"start")),displayValue==="above"&&this.$$panel.find(".s-m-slider-value").detach().prependTo(this.$$panel.find("section"))},this.destroyMarkup=function(){this.options.startHandler=null,this.options.stopHandler=null,this.options.slideHandler=null,this.options=null,this.$$slider&&(this.$$slider.off(),this.$$slider.slider("destroy"),this.$$slider=null),this.$$panel&&this.$$panel.remove()},this.onSlider=function(slideEvt,action){if(action==="start"){this.options.startHandler(slideEvt.value,this);return}if(action==="slide"){this.$$textValue.text(this.options.slideHandler?this.options.slideHandler(slideEvt.value,this):slideEvt.value);return}if(action==="stop"){this.options.value!=slideEvt.value&&(this.options.value=slideEvt.value,this.options.stopHandler(slideEvt.value,this));return}},this.update=function(opts){if(!opts)return;opts.min!=null&&this.$$slider.slider("setAttribute","min",opts.min),opts.max!=null&&this.$$slider.slider("setAttribute","max",opts.max),opts.step!=null&&this.$$slider.slider("setAttribute","step",opts.step),opts.value!=null&&(this.$$slider.slider("setValue",opts.value),this.$$textValue.text(this.options.slideHandler?this.options.slideHandler(opts.value):opts.value))}},checkboxList:function(options,name){options=options||{},this.options=options,this.name=name||"checkboxList",this.createMarkup=function($$parent){return this.$$panel=$(_getHtml("checkboxList",{id:options.id,css:options.css||""})).appendTo($$parent),options.isHidden===!0&&this.hide(),this.options.onClick&&this.$$panel.on("click",'input[type="checkbox"]',jsutils.bindFn(this.onClick,this)),this._createList(options.list),this.$$panel},this.destroyMarkup=function(){this.$$panel&&(this.$$panel.find('input[type="checkbox"]').off(),this.$$panel.off(),this.$$panel=null),this.options=null},this.onClick=function(evt){var $$input=$(evt.target);this.options.onClick($$input.closest(".s-m-item").attr("data-id"),$$input.is(":checked"))},this.getValue=function(format){if(!this._$$list)return null;var obj=format!=="array",res=obj?{}:[];return this._$$list.find(".s-m-item").each(function(){var $$this=$(this);if(!$$this.is(":visible"))return;var checked=$$this.find("input:checkbox").prop("checked")===!0,id=$$this.attr("data-id");obj?res[id]=checked:res.push({checked:checked,id:id})}),res},this.setValue=function(list){this.updateValue(list)},this.reset=function(){this.updateValue(null)},this.updateValue=function(list){if(!this.$$panel)return;var self=this;self._$$list.find("[data-id]").each(function(){$(this).val(!1)}),list=this._checkInputList(list);if(list.length===0)return;list.forEach(function(itm){if(!itm||!itm.id)return;var $$item=self._$$list.find('[data-id="'+itm.id+'"]');if($$item.length===0)return;itm.isHidden===!0&&$$item.hide();if(itm.checked!==!0)return;$$item.attr("data-id",itm.id),$$item.find("input:checkbox").prop("checked",itm.checked===!0),$$item.find("label").text(itm.label)})},this._createList=function(list){if(!this.$$panel)return;this._$$list&&this._$$list.remove(),list=this._checkInputList(list);var newList=[];list.forEach(function(itm){itm.id&&(itm.id=itm.id,itm.checked=itm.checked===!0,itm.label=itm.label||itm.id,newList.push(itm))}),this._$$list=$(_getHtml("checkboxListContent",{list:newList})).appendTo(this.$$panel)},this._arrayToPlainobject=function(){},this._checkInputList=function(list){if(!list)return[];if(Array.isArray(list))return list;if(!$.isPlainObject(list))return[];var res=[];for(var p in list)res.push({id:p,checked:list[p]===!0});return res}}};exports.newComponent=function(type,opts,name){var f=_components[type];if(!f)throw new Error("Unknown authoring component ["+type+"]");return new f(opts,name)}}),define("syracuse-tablet/html/js/ui/modals/modalTranslationPage",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/modals/modalDialog"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),_templateAll={header:'		<buttons class="pull-right"> 			<button type="button" class="btn btn-default s-m-modal-btn-validate" data-action="$validate"></button> 			<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 		</buttons> 		<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">				<div class="form-group"> 					<table class="s-m-translation" >					<tr>					<th>{{currentLang.title}}</th><th>{{translateLang.title}}</th>					</tr>					{{#each localizations}}					<tr>					<td>{{this.value}}</td><td><input type="text" id="{{this.key}}" value="{{this.valueTranslate}}"></td>					</tr>					{{/each}}					</table>				</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalTranslationPage(ctx){this.context=$.extend(!0,{},ctx),modalDialog.ModalBase.call(this),this.result=null},modalDialog.ModalBase,{_getTemplates:function(){return{std:_templateAll}},_getDataContext:function(){var localizations=[],$localization=this.context.$localization,currentLang=this.context.currentLang,translateLang=this.context.translateLang;if(!$localization[currentLang.value])return[];Object.keys($localization[currentLang.value]).forEach(function(key){$localization[currentLang.value][key]&&localizations.push({key:key,value:$localization[currentLang.value][key],valueTranslate:$localization[translateLang.value]&&$localization[translateLang.value][key]?$localization[translateLang.value][key]:""})});var data={};return data.localizations=localizations,data.currentLang=currentLang,data.translateLang=translateLang,data.title=this.context.pageTitle,data},_onShow:function(){modalDialog.ModalBase.prototype._onShow.call(this)},_onValidate:function(){var currentLang=this.context.currentLang.value,translateLang=this.context.translateLang.value,localization=this.context.$localization,value,res;Object.keys(localization[currentLang]).forEach(function(key){value=$("input[id='"+key+"'").val(),localization[translateLang]&&localization[translateLang][key]!==""&&(res||(res={}),res[key]=localization[translateLang][key]);if(!localization[translateLang]&&value!==""||localization[translateLang]&&(localization[translateLang][key]&&value!=localization[translateLang][key]||!localization[translateLang][key]&&value))res||(res={}),res[key]=value}),res&&(localization[translateLang]=res,this.result=localization)},_onCancel:function(){this.result=null},_getResult:function(){return this.result}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral",["require","exports","module","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/authoring/authoringVal","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/authoring/authoringComponents","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/ui/modals/modalTranslationPage"],function(require,exports,module){function _createMarkupJSON($$parent,prop,sel,data){var value=authVal.toSortedJSON(data.articlePage),html=authHtml.execute("authPanelPropertyJSON",{id:"auth_opt_"+prop.name,value:value,label_apply:locale.text("auth.panel.label_apply"),label_display:locale.text("auth.panel.label_display")}),$$panel=$(html),title=sel.$$elmt.text(),_getJson=function(validate){var val=$("textarea",$$panel).val(),articleParsed;if(validate)articleParsed=authVal.validateJSON(!0,$("textarea",$$panel).val(),_properties);else try{articleParsed=JSON.parse(val)}catch(e){return jsutils.convertToDiagnoses("Error validating JSON",e)}return articleParsed?authVal.toSortedJSON(articleParsed):null};$("a[data-action]",$$panel).click(function(){var act=$(this).attr("data-action");try{if(act==="jsonApply"){var articleString=_getJson(!0);articleString&&notifications.publish(["sm.auth.change.prop.ui"],articleString)}else if(act==="openInNewTab"){var title=globals.getApplication().currentPage.prototype;title&&(title=title.data("$title")),title=title&&title.length>0?locale.text("auth.panel.label_page")+": "+title:"",_openInNewTab("sageMobileJsonAuthoring",_getJson(!1),title)}}catch(e){throw console.log(e.stack),e}}),$$parent.append($$panel)}function _createMarkupPrototype($$parent,prop,sel,data){var json,isPage=sel.$$elmt&&sel.$$elmt.is(".s-m-page"),title;if(data.control)json=data.control.prototype&&data.control.prototype.json,title=data.control.$bind||data.control.id;else if(isPage){var controller=sel.$$elmt.smPageController();controller&&(title=controller.prototype.data("$title"),json=controller.prototype&&controller.prototype.json)}var value;json?value=JSON.stringify(json,null," "):value=locale.text("auth.PROTOTYPE_NONE");var html=authHtml.execute("authPanelPropertyPROTOTYPE",{id:"auth_opt_"+prop.name,value:value,label_display:locale.text("auth.panel.label_display")}),$$panel=$(html);$$parent.append($$panel),json&&!$.isEmptyObject(json)&&$("a[data-action]",$$panel).click(function(){var act=$(this).attr("data-action");act==="openInNewTab"&&(title=locale.text("auth.panel.label_"+(isPage?"page":"control"))+": "+title,_openInNewTab("sageMobilePrototype",authVal.toSortedJSON(json),title))})}function getLangDescription(lang,langList){var desc;return langList.forEach(function(v){v.value===lang&&(desc=v.title)}),desc}function _getValueOrDefault(prop,sel,data){var value=data.articleSelection&&data.articleSelection[prop.key];return value=value!=null?value:prop["default"],value}function _setValue(prop,sel,data,value){data.articleSelection[prop.key]=value,data.articleSelection.$isDirty=data.articleSelection.$isDirty||{},data.articleSelection.$isDirty[prop.key]=!0}function _notifyChangePropUI($$parent,sel,data){var $$json=$("textarea#auth_opt_JSON");$$json.val(authVal.toSortedJSON(data.articleSelection)),notifications.publish(["sm.auth.change.item.prop.ui"],data)}function _createMarkupRadio($$parent,prop,sel,data){var ctx={group:"auth_opt_"+prop.name,options:[]},value=_getValueOrDefault(prop,sel,data),allHidden=!0;prop.values.forEach(function(v){ctx.options.push({id:ctx.group+"_"+v.value,value:""+v.value,label:v.label,display:v.isHidden?"none":"block"}),allHidden=allHidden&&v.isHidden});var html=authHtml.execute("authPanelPropertyRadio",ctx),$$panel=$(html);$("label[data-s-m-auth-value='"+(""+value)+"']",$$panel).eq(0).button("toggle"),$("label",$$panel).on("click",function(e){var $$ct=$(e.currentTarget),value=$$ct.attr("data-s-m-auth-value");$$ct.eq(0).button("toggle"),value==="true"?value=!0:value==="false"&&(value=!1),_setValue(prop,sel,data,value),_notifyChangePropUI($$parent,sel,data)}),$$parent.append($$panel),allHidden?$$parent.parent(".s-m-panel-auth-prop").hide():$$parent.parent(".s-m-panel-auth-prop").show()}function _refreshMarkupRadio($$parent,prop,sel,data){var allHidden=!0;prop.values.forEach(function(v){var id="auth_opt_"+prop.name+"_"+v.value,$$btn=$("#"+id,$$parent),display=v.isHidden?"none":"block";$$btn.css("display",display),allHidden=allHidden&&v.isHidden}),allHidden?$$parent.parent(".s-m-panel-auth-prop").hide():$$parent.parent(".s-m-panel-auth-prop").show()}function _createMarkupCheckboxes($$parent,prop,sel,data){var ctx={group:"auth_opt_"+prop.name,options:[]},allHidden=!0,value=data.articleSelection&&data.articleSelection[prop.key]||{};prop.values.forEach(function(v){var cb=value[v.key]!=null?value[v.key]:v["default"];ctx.options.push({id:ctx.group+"_"+v.key,value:v.key,label:v.label,checked:cb,display:v.isHidden?"none":"block"}),allHidden=allHidden&&v.isHidden});var html=authHtml.execute("authPanelPropertyCheckbox",ctx),$$panel=$(html);$("label",$$panel).on("click",function(e){var $$ct=$(e.currentTarget),key=$$ct.attr("data-s-m-auth-value"),value=$("input:checked",$$ct).length>0,v=data.articleSelection[prop.key]=data.articleSelection[prop.key]||{};v[key]=value,_notifyChangePropUI($$parent,sel,data)}),$$parent.append($$panel),allHidden?$$parent.parent(".s-m-panel-auth-prop").hide():$$parent.parent(".s-m-panel-auth-prop").show()}function _refreshMarkupCheckboxes($$parent,prop,sel,data){var allHidden=!0;prop.values.forEach(function(v){var id="auth_opt_"+prop.name+"_"+v.key,$$btn=$("#"+id,$$parent),display=v.isHidden?"none":"block";$$btn.css("display",display),allHidden=allHidden&&v.isHidden}),allHidden?$$parent.parent(".s-m-panel-auth-prop").hide():$$parent.parent(".s-m-panel-auth-prop").show()}function _createMarkupIconPicker($$parent,prop,sel,data){var value=data.articleSelection&&data.articleSelection[prop.key]||null,opts={palette:prop.values||[],dropUp:prop.dropUp||!0,onSelectIcon:function(value){_setValue(prop,sel,data,value),_notifyChangePropUI($$parent,sel,data)}};prop._paletteIcon=authComponents.newComponent("iconPalettePicker",opts),prop._paletteIcon.createMarkup($$parent),prop._paletteIcon.setValue(data.articleSelection[prop.key]||prop["default"])}function _destroyMarkupIconPicker($$parent,prop,sel,data){prop._paletteIcon&&(prop._paletteIcon.destroyMarkup(),prop._paletteIcon=null)}var authHtml=require("syracuse-tablet/html/js/authoring/authoringHtml"),authVal=require("syracuse-tablet/html/js/authoring/authoringVal"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),globals=require("syracuse-tablet/html/js/helpers/globals"),authComponents=require("syracuse-tablet/html/js/authoring/authoringComponents"),sdataCommonResources=require("syracuse-tablet/html/js/sdata/sdataCommonResources"),modalTranslationPage=require("syracuse-tablet/html/js/ui/modals/modalTranslationPage"),_colorPalette=[{title:"primecolor",items:["sagegreen","green","blue","darkgrey","white","black"]},{title:"secondcolor",items:["lightgreen","grey","medium-grey","orange","purple","medium-purple","skyblue"]},{title:"notifcolors",items:["alert","warning"]}],_cachePalette={},_getColorPalette=function(){if(_cachePalette.colorPalette)return _cachePalette.colorPalette;_cachePalette.colorPalette=[];var _scan=function(items,array){return array=array||[],items.forEach(function(item){if(item.items){var items=_scan(item.items);array.push({title:item.title?locale.text("colorsPalette."+item.title):null,items:items})}else if(typeof item=="string"){var id=item.toLowerCase();array.push({id:id,name:locale.textNoFail("colorsPalette.colors."+id)||item.smCapitalize(),css:"s-m-color-"+id})}}),array};return _scan(_colorPalette,_cachePalette.colorPalette)},_getColorValues=function(){if(_cachePalette.colorValues)return _cachePalette.colorValues;_cachePalette.colorValues=[];var _scan=function(items){items.forEach(function(item){item.items?_scan(item.items):typeof item=="string"&&_cachePalette.colorValues.push({value:item.toLowerCase(),label:locale.textNoFail("colorsPalette.colors."+item)||item.smCapitalize()})})};return _scan(_colorPalette),_cachePalette.colorValues},_getColorInfo=function(id){return _cachePalette.colorInfos?_cachePalette.colorInfos[id]:(_cachePalette.colorInfos={},_getColorValues().forEach(function(color){_cachePalette.colorInfos[color.value]={id:color.value,name:color.label,css:"s-m-color-"+color.value}}),_cachePalette.colorInfos[id])},_openInNewTab=function(tabid,jsonString,title){if(!jsonString||jsonString.trim().length===0)return;var myWindow=window.open("about:blank",tabid,undefined,!0);setTimeout(function(){myWindow.document.write("<html><body><pre>"+(title?title+"\n":"")+locale.text("auth.panel.label_date")+": "+(new Date).toLocaleString()+"</pre><pre>"+jsonString+"</pre></body></html>")})},_properties={SEPARATOR:{isSeparatror:!0},JSON:{key:"$JSON",createMarkup:_createMarkupJSON,type:"expert"},PROTOTYPE:{key:"$PROTOYPE",createMarkup:_createMarkupPrototype,type:"expert"},translation:function(controller,sel,data){if(!data.articleSelection.$localization||$.isEmptyObject(data.articleSelection.$localization[globals.getUserCtx().$lang]))return null;this.name="translation",this.type="expert",this.createMarkup=function($$parent,prop,sel,data){var self=this;sdataCommonResources.queryLocalePreferences().then(function(ls){var selectOpts=[];ls.forEach(function(v){selectOpts.push({title:v.description,value:v.code})});var opts={options:selectOpts,onChange:self.onChange.bind(self,$$parent,data)};self.langList=authComponents.newComponent("select",opts,"selectLang"),self.langList.createMarkup($$parent)})},this.onChange=function($$parent,data,event,componentSelect){var context={};context.$localization=data.articleSelection.$localization,context.currentLang={value:globals.getUserCtx().$lang,title:getLangDescription(globals.getUserCtx().$lang,componentSelect.options.options)},context.translateLang={value:componentSelect.getValue(),title:getLangDescription(componentSelect.getValue(),componentSelect.options.options)},this.buildPanel($$parent,data,context)},this.buildPanel=function($$parent,data,context){if(this.$$panel==undefined){var html=authHtml.execute("authPanelButton",{label:locale.text("auth.translation.openPage"),css:"s-m-auth-translation-open"});this.$$panel=$(html),this.$$panel.attr("data-action","openTranslation"),$$parent.append(this.$$panel)}else this.$$panel.off("click");var eventData={};eventData.$$parent=$$parent,eventData.data=data,eventData.context=context,eventData.context.pageTitle=locale.text("auth.translation.page"),this.$$panel.click(eventData,function(){var modal=new modalTranslationPage.Modal(eventData.context);modal.show().then(function(result){result&&(eventData.data.articleSelection.$localization=result,_notifyChangePropUI(eventData.$$parent,null,eventData.data))}).fail(function(e){globals.getModal().error(e)})})}}},_initProperty=function(p){var pre="auth",lk=pre+"."+p.name;p.label==null&&(p.label=locale.text(lk)),p.values&&p.values.forEach(function(v,idx){if($.isPlainObject(v)){var vk=lk+"."+(""+(v.value!=null?v.value:v.key));v.label==null&&(v.label=locale.text(vk))}else p.values[idx]={label:v+"",valu:v}})},_initProperties=function(properties,dest){var pre="auth";Object.keys(properties).forEach(function(prop){var p=properties[prop];dest&&(dest[prop]=p);if(typeof p=="function")return;p.name=prop,_initProperty(p)})},_err=function(title,ee){return modal.error(title,ee),!0};exports.getColorValues=_getColorValues,exports.getColorPalette=_getColorPalette,exports.getColorInfo=_getColorInfo,exports.properties=_properties,exports.err=_err,exports.createMarkupIconPicker=_createMarkupIconPicker,exports.destroyMarkupIconPicker=_destroyMarkupIconPicker,exports.createMarkupRadio=_createMarkupRadio,exports.refreshMarkupRadio=_refreshMarkupRadio,exports.createMarkupCheckboxes=_createMarkupCheckboxes,exports.refreshMarkupCheckboxes=_refreshMarkupCheckboxes,exports.getValueOrDefault=_getValueOrDefault,exports.setValue=_setValue,exports.notifyChangePropUI=_notifyChangePropUI,exports.initProperties=_initProperties,exports.initProperty=_initProperty,exports.getModuleProperties=function($$elmt,controller,props,sel,data){props.push(_properties.SEPARATOR),$$elmt.is(".s-m-page")?(props.push(_properties.JSON),props.push(_properties.SEPARATOR),props.push(_properties.PROTOTYPE),props.push(_properties.SEPARATOR),props.push(_properties.translation)):data&&data.control&&data.control.prototype&&props.push(_properties.PROTOTYPE)},exports.initModuleProperties=function(dest){exports.initProperties(_properties,dest)}}),define("syracuse-tablet/html/js/authoring/arrays/authArrayGeneral",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_templates={subtitle:'		<section class="s-m-prop-subtitle" {{#if id}}id="{{id}}"{{/if}} style="{{#if notHidden}}overflow:hidden;{{/if}}white-space:nowrap;text-overflow:ellipsis;{{#if margin}}margin-bottom:{{margin}}px;{{/if}}">			{{#if title}}<p>{{title}}</p>{{/if}}			<div></div>		</section>',subPropTitle:' 		<div class="panel panel-primary s-m-panel-auth-prop s-m-auth-prop-type-{{type}}"> 			<div style="overflow:hidden;" class="panel-heading" role="tab" id="heading_{{id}}"> 				<a style="width:100%;display:table;" data-toggle="collapse" data-parent="#{{#if parentId}}{{parentId}}{{/if}}{{#unless parentId}}accordion{{/unless}}" href="#collapse_{{id}}" {{#if expanded}} aria-expanded="true"{{/if}} aria-controls="collapse_{{id}}" {{#unless expanded}}class="collapsed"{{/unless}}>					<div style="display:table-row;white-space: nowrap;">						<h4 class="panel-title" style="display:table-cell;"> 							{{label}}						</h4> 						{{#if info}}<span style="padding-left: 10px;font-size:x-small;display:table-cell;text-align: right;"><i>{{info}}</i></span>{{/if}}					</div>				</a> 			</div> 			<div id="collapse_{{id}}" class="panel-collapse collapse {{#if expanded}}in{{/if}}" role="tabpanel" aria-labelledby="heading_{{id}}"> 			</div> 		</div>',statusLine:'		<span style="display:table;table-layout:fixed;width:100%">			<span style="display:table-row;">				<span style="display:table-cell;overflow:hidden;text-overflow:ellipsis;white-space: nowrap;">{{field}} {{operator}} {{value}}</span>				<span class="{{css}}" style="{{style}}display:table-cell;width:{{sizeColor}}px;height:{{sizeColor}}px;margin-right:5px;"></span>			</span>		</span>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[name],tmpl=_templates[key]=Handlebars.compile(tmpl)),tmpl(ctx)},_properties={chartDetailButton:function(controller,sel,data){this.name=null,this.label=null,this.key=null,this.controller=controller,this.control=data.control,this.createButtonMarkup=function(){return this.$$OpenButton=$('<button id="auth_opt_chart_design" type="button" class="btn btn-default">'+locale.text("auth.chartDetail.openDesign")+"</button>"),this.$$OpenButton.on("click",jsutils.bindFn(this.onClickButton,this)),this.$$OpenButton},this.destroyButtonMarkup=function(context){this.control=null,this.controller=null,this.$$OpenButton&&(this.$$OpenButton.off("click"),this.$$OpenButton.remove(),this.$$OpenButton=null)},this.onClickButton=function(evt){this.control.triggerOpenChartDetail(),this.destroyButtonMarkup()}},arrayDisplay:function(controller,sel,data){this.name="arrayDisplay",this.label=null,this.key="$display",this["default"]="table",this.values=[{value:"table"}],data.control.prototype.isSingleArray()?this.values.push({value:"separator"}):this.values.push({value:"card"},{value:"carousel"}),data.control.isArrayChart()&&this.values.push({value:"chart"}),this.createMarkup=authPropsGeneral.createMarkupRadio,this.refreshMarkup=authPropsGeneral.refreshMarkupRadio},arraySeparator:{key:"$separator","default":"blank",values:[{value:"blank"},{value:"dash"},{value:"colon"},{value:"semicolon"}],createMarkup:authPropsGeneral.createMarkupRadio,refreshMarkup:authPropsGeneral.refreshMarkupRadio},arrayProtoFilters:function(controller,sel,data){this.name="arrayProtoFilters",this.label=null,this.key="$filters",this["default"]=controller.isVignette?"none":"list",this.values=[{value:"list"},{value:"tabs"},{value:"none"}],this.createMarkup=authPropsGeneral.createMarkupRadio,this.refreshMarkup=authPropsGeneral.refreshMarkupRadio},arrayQueryLink:function(controller,sel,data){this.name="arrayQueryLink",this.label=null,this.isHidden=!0,this.values=[],this.key="$detailsLink",this["default"]="$details",this.createMarkup=authPropsGeneral.createMarkupRadio,this.refreshMarkup=authPropsGeneral.refreshMarkupRadio,this.initMarkup=function(controller,sel,data){var links=data.control.prototype.getDataByPath("$item.$links");if(!links||links.length===0)return;controller.isVignette&&(this["default"]="$queryfullpage",this.values.push({value:"$queryfullpage",label:locale.text("auth.arrayQueryLink.queryfullpage")}));var self=this;$.each(links,function(key,link){var method=link&&link.$method||"GET";link&&method==="GET"&&(key.indexOf("$")!==0||["$edit","$details"].indexOf(key)>-1)&&self.values.push({value:key,label:link.$title?controller.prototype.resolveExpression(link.$title)+" - "+key:key})}),this.isHidden=this.values.length===1&&this.values[0].value==="$details"}},arrayOptions:function(controller,sel,data){this.name="arrayOptions",this.label=null,this.key="$arrayOptions";var ctrl=data.control;this.values=[],ctrl.$display==="card"&&ctrl.isCarouselDisplay()?this.values.push({key:"rowIndex","default":!0}):ctrl.isArrayChart()&&ctrl.isHighChart()?this.values.push({key:"showPagination","default":!1}):(ctrl.isArrayField()||(this.values.push({key:"showPagination","default":controller.isVignette?!1:!0}),ctrl.isArrayChart()||(this.values.push({key:"showSortFilter","default":controller.isVignette?!1:!0}),this.values.push({key:"showSearch","default":controller.isVignette?!1:!0}))),ctrl.$display==="table"&&!ctrl.prototype.isSingleArray()&&!ctrl.isArrayChart()&&this.values.push({key:"showRowDetailLink","default":!1}),this.values.push({key:"rowIndex","default":ctrl.$display==="card"}),ctrl.$display==="card"&&this.values.push({key:"hideEmptyRows","default":!1})),this.createMarkup=authPropsGeneral.createMarkupCheckboxes,this.refreshMarkup=authPropsGeneral.refreshMarkupCheckboxes}};exports.getHtml=_getHtml,exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){controller.state.type!=="chartdetail"&&data.control.isArrayChart()&&props.push(_properties.chartDetailButton),props.push(_properties.arrayDisplay),data.control.$display==="separator"?props.push(_properties.arraySeparator):(props.push(_properties.arrayOptions),sel.$$elmt.is(".s-m-control.s-m-chart")||(!data.control.isArrayField()&&controller.$filtersGet()&&controller.$filtersGet().length>1&&props.push(_properties.arrayProtoFilters),controller.prototype.isQuery()&&props.push(_properties.arrayQueryLink)))}}),define("syracuse-tablet/html/js/ui/fontUtils",["require","exports","module"],function(require,exports,module){var _paginBtns={$first:"glyphicon glyphicon-step-backward",$previous:"glyphicon glyphicon-chevron-left",$next:"glyphicon glyphicon-chevron-right",$last:"glyphicon glyphicon-step-forward"},_tileIcons=["adjust","adn","ambulance","anchor","android","angellist","apple","archive","asterisk","automobile","ban","bank","barcode","bell","bicycle","binoculars","bitbucket","bolt","book","bookmark","briefcase","building","bullhorn","bullseye","calculator","calendar","camera","certificate","chain","child","circle","clipboard","codepen","cog","cogs","columns","compass","dashboard","database","envelope","exclamation","eye","fax","file","flag","flash","folder","globe","heart","home","image","inbox","info","institution","key","laptop","leaf","legal","lock","magic","money","paperclip","phone","plane","rocket","search","shield","sitemap","sliders","star","steam","stethoscope","stop","suitcase","th","tumblr","twitch","twitter","umbrella","warning","wrench"],_getIconByName=function(name){switch(name){case"$multiSelection":return"glyphicon glyphicon-list-alt";case"$cancelMultiSel":case"$cancelEdit":return"fa fa-undo";case"$edit":return"fa fa-edit";case"$query":return"fa fa-list";case"$save":return"fa fa-save";case"$details":return"fa fa-level-down";case"$delete":return"fa fa-trash-o";case"$create":return"fa fa-plus-square";case"appUpdate":return"fa fa-history";case"appSetup":return"fa fa-download";case"gear":return"fa fa-gear"}return _tileIcons.indexOf(name)>-1?"fa fa-"+name:""};exports.getIconByName=_getIconByName,exports.checkBoxIcon=function(val){return["glyphicon",val?"glyphicon-ok":"glyphicon-remove"]},exports.dateFieldIcon=function($type){return $type.indexOf("date")!=-1?["glyphicon","glyphicon-calendar"]:["glyphicon","glyphicon-time"]},exports.refFieldIcon=function(){return["glyphicon","glyphicon-eye-open"]},exports.phoneFieldIcon=function(){return"fa fa-phone"},exports.emailFieldIcon=function(){return"fa fa-envelope-o"},exports.documentFieldIcon=function(){return"fa fa-file-text"},exports.binaryFieldIcon=function(){return"fa fa-file-0"},exports.emailFieldIcon=function(){return"fa fa-envelope-o"},exports.paginationIcon=function(linkName){return _paginBtns[linkName]},exports.layoutExpandCollapseIcon=function(collapse,advancedTheme){return collapse?advancedTheme?"fa fa-ellipsis-h":"fa fa-chevron-down":advancedTheme?"fa fa-times":"fa fa-chevron-up"},exports.penFieldIcon=function(){return"fa fa-pencil-square-o"},exports.pageIcon=function(name){if(name==="settings")return"fa fa-gear";if(name==="clearCache")return"fa fa-history";if(name==="switchContext")return"fa fa-user";if(name==="search")return"fa fa-search";if(name==="sidePanelL")return"fa fa-caret-square-o-left";if(name==="sidePanelR")return"fa fa-angle-double-right";if(name==="home")return"fa fa-home";if(name==="designPage")return"fa fa-paint-brush";if(name==="back")return"fa fa-arrow-circle-o-left";if(name==="developmentPage")return"fa fa-wrench";if(name==="bars")return"fa fa-bars";if(name==="backIphone")return"fa fa-angle-left";if(name==="about")return"fa fa-info-circle";if(name==="logout")return"fa fa-sign-out";if(name==="pinPage_1")return"fa fa-thumb-tack";if(name==="pinPage_2")return"fa fa-times";if(name==="pageConfig")return"fa fa-paint-brush";if(name==="nativeShare")return"fa fa-share-alt"},exports.ctrlIcon=function(name){if(name==="editrow")return"fa fa-pencil-square-o";if(name==="detailrow")return"fa fa-hand-o-right";if(name==="delrow")return"fa fa-remove";if(name==="addrow")return"fa fa-plus"},exports.vignetteIcons=function(name){if(name==="home")return"fa fa-home";if(name==="back")return"fa fa fa-arrow-circle-o-left";if(name==="refresh")return"fa fa-history"},exports.sortIcon=function(name){if(name==="asc")return"fa fa-long-arrow-up";if(name==="none")return"fa fa-times";if(name==="desc")return"fa fa-long-arrow-down"},exports.filterIcon=function(name){if(name==="panel")return"fa fa-bars";if(name==="filtered")return"fa fa-filter";if(name==="edit")return"fa fa-pencil";if(name==="delete")return"fa fa-times"},exports.getTileIconList=function(){return _tileIcons};var _arrayStatusIconNames=["thumbs-down","thumbs-o-down","thumbs-up","thumbs-o-up","hand-o-down","hand-o-up","lock","unlock","unlock-alt","smile-o","meh-o","check","check-circle","check-circle-o","check-square","check-square-o","square","square-o","circle","circle-thin","circle-o","close","comment","comment-o","comments","comments-o","photo","film","barcode","bars","plus","plus-circle","plus-square","plus-square-o","minus","minus-circle","minus-square","minus-square-o","question","question-circle","trash","trash-o","info","info-circle","flag","flag-checkered","flag-o","female","male","mars","venus","user","users","user-plus","user-times","user-secret","facebook-official","file","file-o","dollar","eur","gbp","yen","rub","rupee","shekel","cny","ils","inr","krw","money","turkish-lira","won","envelope-square","envelope-o","envelope","exclamation","exclamation-circle","exclamation-triangle"],_arrayStatusIcons=null,_getArrayStatusIconList=function(){return _arrayStatusIcons==null&&(_arrayStatusIcons=[],_arrayStatusIconNames.forEach(function(name){_arrayStatusIcons.push({css:"fa fa-"+name,name:name})})),_arrayStatusIcons};exports.getArrayStatusIconList=_getArrayStatusIconList,exports.getArrayStatusDefIcon=function(){return{name:"circle",css:"fa fa-circle"}};var _arrayActionsIconNames=_arrayStatusIconNames.slice(0),_arrayActionsIcons=null,_getPageActionIcon=function(){return _arrayActionsIcons==null&&(_arrayActionsIconNames=_arrayActionsIconNames.concat(["download","save","undo","edit","history","eraser","reply","refresh"]),_arrayActionsIcons=[],_arrayActionsIconNames.forEach(function(name){_arrayActionsIcons.push({css:"fa fa-"+name,name:name})})),_arrayActionsIcons};exports.getPageActionIcon=_getPageActionIcon;var _emptyImageIconNames=["image","user","users","warning","file-movie-o","file-image-o","paperclip","film"],_emptyImageIcons=null;exports.getEmptyImageIconList=function(){return _emptyImageIcons==null&&(_emptyImageIcons=[],_emptyImageIconNames.forEach(function(name){_emptyImageIcons.push({css:"fa fa-"+name,name:name})})),_emptyImageIcons},exports.getEmptyImageDefIcon=function(){return{name:"image",css:"fa fa-image"}},exports.getEmptyFileDefIcon=function(){return{name:"file",css:"fa fa-file"}};var _urlIconNames=["globe","map-marker","street-view","road","link","cloud","database","bed","cutlery","glass","train","subway","taxi","ship","plane"],_urlIcons=null;exports.getUrlIconList=function(){return _urlIcons==null&&(_urlIcons=[],_urlIconNames.forEach(function(name){_urlIcons.push({css:"fa fa-"+name,name:name})})),_urlIcons},exports.getUrlDefIcon=function(){return{name:"Url",css:"fa fa-globe"}};var _colImageIconNames=["image","user","users","warning","file-movie-o","file-image-o","paperclip","film"],_colImageIcons=null;exports.getColImageIconList=function(){return _colImageIcons==null&&(_colImageIcons=[],_colImageIconNames.forEach(function(name){_colImageIcons.push({css:"fa fa-"+name,name:name})})),_colImageIcons},exports.getColImageDefIcon=function(emptyImage){return{name:"image",css:emptyImage===!0?"fa fa-times":"fa fa-image"}},exports.getPinVignetteIcon=function(what){return what=="all"?"fa fa-toggle-on fa-toggle-off":what=="on"?"fa fa-toggle-on":"fa fa-toggle-off"},exports.getCarouselIcon=function(what){return what=="left"?"glyphicon glyphicon-chevron-left":what=="right"?"glyphicon glyphicon-chevron-right":""}}),define("syracuse-tablet/html/js/authoring/arrays/authArrayTable",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/authoring/arrays/authArrayGeneral","syracuse-tablet/html/js/authoring/authoringComponents","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),authArrayGeneral=require("syracuse-tablet/html/js/authoring/arrays/authArrayGeneral"),authComponents=require("syracuse-tablet/html/js/authoring/authoringComponents"),locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),utils=require("syracuse-tablet/html/js/helpers/utils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_maxCharWidth=50,_defCharWidth=20,_defPercentWidth=20,_tableConfigKeys=["$bind","$type","$titleOrig","$widthType","$widthVal","$refDescFormat","$refDescPosition","$imgIcon","$imgDisplayIcon","$imgHeight"],_TableColumnPanel=function(parent,colInfo){this.name="arrayTableColumn",this.label=colInfo.$title||colInfo.$bind,this.parent=parent,this.colInfo=colInfo;if(parent.isSingleArray||!this.colInfo.$widthType)this.colInfo.$widthType="auto";this._myProperties=[],this.createMarkup=function($$parent){this.$$parent=$$parent,parent.isSingleArray||(this.colNameChoiceAdd(),this.colWidthTypeAdd(),this.colWidthValAdd()),this.colXrefAdd(),this.colImageAdd(),this.colImgHeightAdd()},this._add2PropHeading=function(title,prop,$$forceParent){var $$root=$(authArrayGeneral.getHtml("subtitle",{title:title,margin:10,id:prop.name})).appendTo($$forceParent||this.$$parent).find("div");return prop.name==="selectName"&&$$root.css({textOverflow:"inherit"}),prop.createMarkup?(prop.createMarkup($$root),this._myProperties.push(prop)):prop.jquery&&$$root.append(prop),prop},this.colNameChoiceAdd=function(){var idx=this.parent.getFieldProto(this.colInfo.$bind).idx,selectOpts=[];this.parent._protoValue.forEach(function(v){selectOpts.push({title:v.$title,value:v.$bind})});var opts={value:this.colInfo.$bind,options:selectOpts,onChange:jsutils.bindFn(this.colNameSelect,this)};this._add2PropHeading(locale.text("auth.tableDesign.selColName"),authComponents.newComponent("select",opts,"selectName"))},this.colNameSelect=function(event,prop){this.colInfo=this.parent.getFieldProto($(event.target).val()).value;var $$title=prop.$$panel.closest(".panel-primary").find(".panel-title");$$title.text(this.colInfo.$title),$$title.next("span").find("i").text(this.colInfo?this.colInfo.$bind:""),this.$$xrefroot.toggle(this.colInfo.$type==="application/x-reference"),this.$$imageroot.toggle(this.colInfo.$type==="image")},this.colWidthTypeAdd=function(){this._add2PropHeading(locale.text("auth.tableDesign.width"),authComponents.newComponent("flatRadio",{btns:[{value:"auto",title:locale.text("auth.tableDesign.auto")},{value:"fixed",title:locale.text("auth.tableDesign.fixed")},{value:"percent",title:"%"}],onClick:jsutils.bindFn(this.colWidthTypeChanged,this),value:this.colInfo.$widthType||"auto"}))},this.colWidthTypeChanged=function(evt){$(evt.target).val()!==this.colInfo.$widthType&&(this.colInfo.$widthType=$(evt.target).val(),this.colWidthValUpdt())},this.colWidthValAdd=function(){var opts={slideHandler:jsutils.bindFn(this.colWidthValSlide,this),stopHandler:jsutils.bindFn(this.colWidthValChange,this),value:this.colInfo.$widthVal||0,min:0,max:this.colInfo.$widthType==="percent"?100:_maxCharWidth,margin:0};this.propWidthVal=this._add2PropHeading(locale.text("auth.tableDesign.selWidth"),authComponents.newComponent("genericSlider",opts)),this.colWidthValUpdt(opts.value)},this.colWidthValSlide=function(val,prop){return this.colInfo.$widthType==="percent"?val+"%":val+" "+locale.text("auth.tableDesign.characters")},this.colWidthValChange=function(val,prop){this.colInfo.$widthVal=val},this.colWidthValUpdt=function(forceValue){var show=this.colInfo.$widthType!=="auto";this._toggleProp(this.propWidthVal,show);if(!show)return;this.propWidthVal.update({value:forceValue||(this.colInfo.$widthType==="percent"?_defPercentWidth:_defCharWidth),max:this.colInfo.$widthType==="percent"?100:_maxCharWidth})},this.colXrefAdd=function(){var style=this.colInfo.$type!=="application/x-reference"?"display:none":"";this.$$xrefroot=$('<section class="xrefColumn" style="'+style+'" ></section>').appendTo(this.$$parent);var pos=this.colInfo.$refDescPosition||"none";this._xrefDescrPos=this._createXRefSelect("pos",["bottom","right","left","top","none"],pos),this._xrefDescrFmt=this._createXRefSelect("fmt",["desc","title","desctitle","titledesc"],this.colInfo.$refDescFormat||"desc"),this.$$xrefroot.find("#selectDescrfmt").toggle(pos!=="none")},this._createXRefSelect=function(type,codes,def){var selectOpts=[],defIdx=codes.indexOf(def);defIdx==-1&&(defIdx=0);var textRoot="auth."+(type=="fmt"?"refDescFormat":"refDescPosition");codes.forEach(function(code,idx){selectOpts.push({code:code,title:locale.text(textRoot+"."+code),value:idx})});var opts={value:defIdx,options:selectOpts,onChange:jsutils.bindFn(this.colXrefChange,this,type)};return this._add2PropHeading(locale.text(textRoot),authComponents.newComponent("select",opts,"selectDescr"+type),this.$$xrefroot),selectOpts},this.colXrefChange=function(event,prop,type){var idx=parseInt($(event.target).val(),10),ref=type==="fmt"?this._xrefDescrFmt:this._xrefDescrPos;ref=ref[idx].code,type=="pos"&&this.$$xrefroot.find("#selectDescrfmt").toggle(ref!=="none"),this.colInfo["$refDesc"+(type==="fmt"?"Format":"Position")]=ref},this.colImageAdd=function(){var style=this.colInfo.$type!=="image"?"display:none":"";this.$$imageroot=$('<section class="ximageColumn" style="'+style+'" ></section>').appendTo(this.$$parent);var displayIcon=this.colInfo.$imgDisplayIcon===!0,opts={checked:displayIcon,size:"small",onSwitchChange:this.onImgDisplayIconChanged.bind(this)};this._add2PropHeading(locale.text("auth.imgcol.displayIcon"),authComponents.newComponent("switcher",opts),this.$$imageroot),opts={palette:fontUtils.getColImageIconList(),dropUp:!0,icon:this.colInfo.$imgIcon||fontUtils.getColImageDefIcon(),onSelectIcon:this.onImgIconChanged.bind(this)},this.propImageIcon=this._add2PropHeading(locale.text("auth.imgcol.iconPicker"),authComponents.newComponent("iconPalettePicker",opts),this.$$imageroot),this._toggleProp(this.propImageIcon,displayIcon)},this.onImgIconChanged=function(icon){this.colInfo.$imgIcon=icon},this.onImgDisplayIconChanged=function(event,status){this.colInfo.$imgDisplayIcon=status,this._toggleProp(this.propImageIcon,status)},this.colImgHeightAdd=function(){var opts={value:this.colInfo.$imgHeight||"medium",options:[],onChange:jsutils.bindFn(this.imgHeightSelect,this)};["xsmall","small","medium","large","xlarge"].forEach(function(s){opts.options.push({title:locale.text("auth.imgHeight."+s),value:s})});var prop=this._add2PropHeading(locale.text("auth.imgHeight"),authComponents.newComponent("select",opts));this._toggleProp(prop,this.colInfo.$type==="image")},this.imgHeightSelect=function(event,prop,type){this.colInfo.$imgHeight=$(event.target).val()},this._toggleProp=function(prop,show){return prop.$$panel.closest("section.s-m-prop-subtitle").toggle(show)},this.destroyMarkup=function(){this.parent=null,this.colInfo=null,this._myProperties&&(this._myProperties.forEach(function(p){p.destroyMarkup&&p.destroyMarkup()}),this._myProperties=null),this.$$parent&&(this.$$parent.closest(".s-m-panel-auth-prop").remove(),this.$$parent=null)}},_properties={arrayTableHeader:{key:"$tableHeaderShow","default":!0,values:[{value:!0},{value:!1}],createMarkup:authPropsGeneral.createMarkupRadio,refreshMarkup:authPropsGeneral.refreshMarkupRadio},arrayTableDesign:function(controller,sel,data){this.isHidden=!1,this.name="arrayTableDesign",this.label=null,this.key="$table",this.controller=controller,this.ctrlArray=data.control,this._generalProperties=[],this._columnProperties=[],this._protoValue=[],this.initMarkup=function(controller,sel,data){this._protoValue=this.ctrlArray.prototype.arrayTableGetColInfo(),this.isSingleArray=this.ctrlArray.prototype.isSingleArray()||this._protoValue.length<=1,this._orginalValue=data.articleSelection.$table;var hasValue=this._orginalValue!=null&&this._orginalValue.length>0;hasValue||(this._orginalValue=null),this._initProps(hasValue?this._orginalValue:this._protoValue),this.isSingleArray?this.isHidden=this._protoValue.length===0||this._protoValue[0].$type!=="application/x-reference":this.addPropNbColumns(),this.isHidden||this.addPropActionButtons(sel,data)},this._initProps=function(props,createEntry){var self=this;self._columnProperties=[],props.forEach(function(prop){self._createColumnProperty(prop,createEntry)})},this.addPropNbColumns=function(){var opts={slideHandler:function(val){return val+" columns"},stopHandler:jsutils.bindFn(this.updateColumns,this),value:this._columnProperties.length,min:1,max:this._protoValue.length,displayValue:"above"};this._generalProperties.push(authComponents.newComponent("genericSlider",opts,"nbcolumns"))},this._updateNbCols=function(){var prop;this._generalProperties.some(function(p){if(p.name==="nbcolumns")return prop=p,!0}),prop.update({value:this._columnProperties.length})},this.addPropActionButtons=function(sel,data){var btns=[{value:"save",title:locale.text("auth.tableDesign.save")}];this._generalProperties.push(authComponents.newComponent("actionBtns",{btns:btns,onClick:jsutils.bindFn(this.onClickAction,this,sel,data)}))},this.onClickAction=function(evt,sel,data){var action=$(evt.target).val();if(action==="save"){var value=[],entry,self=this,conf;this._columnProperties.forEach(function(prop){if(!prop.colInfo)return;entry={},_tableConfigKeys.forEach(function(p){if(p!=="$titleOrig"||utils.isExpression(prop.colInfo[p]))conf=prop.colInfo[p],conf!=null&&(entry[p]=$.isPlainObject(conf)?$.extend(!0,{},conf):conf)}),value.push(entry)}),authPropsGeneral.setValue(this,sel,data,value),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data);return}if(action==="restore"){if(this._orginalValue){this._clearColumns(),this._initProps($.extend(!0,[],this._orginalValue),!0),this._updateNbCols();return}action="all"}if(action==="all"){this.updateColumns(null),this._updateNbCols();return}},this.createMarkup=function($$parent,prop,sel,data){this.$$parent=$$parent,this._accordionId=utils.UUID(),this.$$myAccordion=$('<div id="'+this._accordionId+'" ></div>'),$$parent.append(this.$$myAccordion);var self=this,$$entry;self._generalProperties.forEach(function(prop){$$entry=$(authArrayGeneral.getHtml("subtitle",{title:prop.label?prop.label||prop.name:null})),prop.createMarkup($$entry.find("div")),self.$$myAccordion.append($$entry)}),self._columnProperties.forEach(function(prop){self._createColEntry(prop)})},this._createColEntry=function(prop){var id=utils.UUID(),$$parent;if(!this.isSingleArray){var $$propGroup=$(authArrayGeneral.getHtml("subPropTitle",{id:id,type:"child columns",label:prop.label,info:prop.colInfo?prop.colInfo.$bind:null,expanded:!1,parentId:this._accordionId}));$$parent=$$propGroup.find("#collapse_"+id),this.$$myAccordion.append($$propGroup)}else this.$$myAccordion.append($$propGroup),$$parent=$('<div style="padding-left:10px;padding-right:10px;"></div>').appendTo(this.$$myAccordion);prop.createMarkup($$parent)},this.destroyMarkup=function(){this.$$parent=null,this.ctrlArray=null,this.controller=null,this._getAllProps().forEach(function(p){p.destroyMarkup()}),this._generalProperties=null,this._columnProperties=null},this._getAllProps=function(){return(this._generalProperties||[]).concat(this._columnProperties||[])},this.updateColumns=function(nbCols){this.$$myAccordion&&this.$$myAccordion.find(".collapse").collapse("hide");var init=nbCols==null;nbCols=init?this._protoValue.length:nbCols;var startFrom=0;if(init)this._clearColumns();else if(this._columnProperties.length>0){for(var i=this._columnProperties.length-1;i>=nbCols;i--)this._columnProperties[i].destroyMarkup(),this._columnProperties.splice(i,1);startFrom=this._columnProperties.length}for(var i=startFrom;i<nbCols;i++)this._createColumnProperty(this._protoValue[i],!0)},this._createColumnProperty=function(config,createEntry){var proto=this.getFieldProto(config.$bind,!0);if(!proto)return null;config.$title=this.controller.prototype.resolveExpression(proto.value.$title)||config.$bind,config.$type=proto.value.$type,config.$titleOrig=proto.value.$titleOrig;var prop=new _TableColumnPanel(this,config);return this._columnProperties.push(prop),createEntry&&this._createColEntry(prop),prop},this._clearColumns=function(){this._columnProperties&&this._columnProperties.forEach(function(p){p.destroyMarkup()}),this._columnProperties=[]},this.getProtoValByIdx=function(idx){if(idx<0||idx>=this._protoValue.length)throw new Error("unexpected bad index["+idx+"]");return this._protoValue[idx]},this.getFieldProto=function(bind,noFail){var res=null;this._protoValue.some(function(v,idx){if(v.$bind===bind)return res={idx:idx,value:v},!0});if(res==null&&noFail!==!0)throw new Error("unexpected null value - bind=["+bind+"]");return res}}};exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){data.control.prototype.isSingleArray()||props.push(_properties.arrayTableHeader),props.push(_properties.arrayTableDesign)}}),define("syracuse-tablet/html/js/authoring/arrays/authArrayCard",["require","exports","module","syracuse-tablet/html/js/authoring/authoringComponents","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var authComponents=require("syracuse-tablet/html/js/authoring/authoringComponents"),authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_properties={arrayCardsPerRow:{key:"$cardsPerRow","default":"2",values:[{value:"1"},{value:"2"},{value:"3"},{value:"4"}],createMarkup:authPropsGeneral.createMarkupRadio,refreshMarkup:authPropsGeneral.refreshMarkupRadio},arrayBgColor:{key:"$arrayBgColor","default":"",colorChange:function(value,sel,data,prop){authPropsGeneral.setValue(this,sel,data,value?value.id:""),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)},createMarkup:function($$parent,prop,sel,data){var opts={color:"",palette:authPropsGeneral.getColorPalette(),dropUp:!1,onSelectColor:jsutils.bindFn(this.colorChange,this,sel,data,prop)};this.paletteColor=authComponents.newComponent("colorPalettePicker",opts),this.paletteColor.createMarkup($$parent),this.paletteColor.setValue(authPropsGeneral.getColorInfo(data.control.article.$arrayBgColor))}},arrayCardsMinWidth:function(controller,sel,data){this.name="arrayCardsMinWidth",this.label=null,this.key="$minWidth",this["default"]=1,this.min=0,this.max=20,this.step=1,this.createMarkup=function($$parent,prop,sel,data){this.ctrl=data.control,this.$$parent=$$parent,this.originValue=authPropsGeneral.getValueOrDefault(this,sel,data);var opts={id:"auth_opt_"+this.name,value:this.originValue,min:this.min,max:this.max,step:this.step||1,slideHandler:jsutils.bindFn(this.onSlide,this,"slide"),startHandler:jsutils.bindFn(this.onSlide,this,"start"),stopHandler:jsutils.bindFn(this.onSlide,this,"stop",sel,data)};this._slider=authComponents.newComponent("genericSlider",opts),this._slider.createMarkup($$parent)},this.onSlide=function(value,prop,action,sel,data){var res=this.ctrl.authOnSlideMinSize(value,action);if(action==="slide")return res;action==="stop"&&this.originValue!=value&&(authPropsGeneral.setValue(this,sel,data,value),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data))},this.destroyMarkup=function(){this.ctrl=null,this.$$parent=null,this.$$slider&&(this.$$slider.slider("destroy"),this.$$slider=null)},this._sliderSetValue=function(slideEvt,$$parent,sel,data,originValue){this.ctrl.authOnSlideMinSize(slideEvt,"stop"),originValue!=slideEvt.value&&(authPropsGeneral.setValue(this,sel,data,slideEvt.value),authPropsGeneral.notifyChangePropUI($$parent,sel,data))}},arrayCardButton:function(controller,sel,data){this.name=null,this.label=null,this.key=null,this.controller=controller,this.control=data.control,this.createButtonMarkup=function(){return this.$$OpenButton=$('<button id="auth_opt_card_design" type="button" class="btn btn-default">'+locale.text("auth.tableDesign.openDesign")+"</button>"),this.$$OpenButton.on("click",jsutils.bindFn(this.onClickOpenButton,this)),this.$$OpenButton},this.destroyButtonMarkup=function(context){this.control=null,this.controller=null,this.$$OpenButton&&(this.$$OpenButton.off("click"),this.$$OpenButton.remove(),this.$$OpenButton=null)},this.onClickOpenButton=function(evt){if(!this.control)return;var attrs={"data-control-id":this.control.id,"data-parent-id":this.controller.id,"data-nav":"carddesign","data-nav-target":"application"};eventListener.triggerNavigation(this.control.$$elmt,attrs),this.destroyButtonMarkup()}},arrayCardsEmptyCells:{key:"$emptycell","default":"nodisplay",values:[{value:"filled"},{value:"withtitle"},{value:"nodisplay"}],createMarkup:authPropsGeneral.createMarkupRadio,refreshMarkup:authPropsGeneral.refreshMarkupRadio}};exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){data.control.prototype.isSingleArray()||props.push(_properties.arrayCardsPerRow,_properties.arrayCardsMinWidth,_properties.arrayCardsEmptyCells,_properties.arrayCardButton,_properties.arrayBgColor)},exports.getCardDesignButton=function(controller){return new _properties.arrayCardButton(controller)}}),define("syracuse-tablet/html/js/helpers/fieldOperators",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var locale=require("syracuse-tablet/html/js/helpers/locale"),_excludedTypes=["application/x-array","image","application/x-document","application/x-binary","application/x-object","text/rtf","text/html","application/x-password"],_numberOperators=["gt","ge","lt","le","eq","ne"],_stringOperators=["like","gt","ge","lt","le","eq","ne","like_s"],_defOperators=["eq","ne"],_DATE={type:"application/x-date",checkFieldValue:function(fieldValue){return String(fieldValue)},checkValue:function(value){return String(value)},operators:_numberOperators,defOperator:"eq"},_TIME={type:"application/x-time",checkFieldValue:function(fieldValue){return fieldValue},checkValue:function(value){return value},operators:_numberOperators,defOperator:"eq"},_DATETIME={type:"application/x-datetime",checkFieldValue:function(fieldValue){return fieldValue},checkValue:function(value){return value},operators:_numberOperators,defOperator:"eq"},_DEC={type:"application/x-decimal",checkFieldValue:function(fieldValue){return fieldValue},checkValue:function(value){return parseFloat(value)},operators:_numberOperators,defOperator:"eq"},_REAL={type:"application/x-real",checkFieldValue:function(fieldValue){return fieldValue},checkValue:function(value){return parseFloat(value)},operators:_numberOperators,defOperator:"eq"},_INT={type:"application/x-integer",checkFieldValue:function(fieldValue){return parseInt(fieldValue,10)},checkValue:function(value){return parseInt(value,10)},operators:_numberOperators,defOperator:"eq"},_QTY={type:"application/x-quantity",checkFieldValue:function(fieldValue){return parseFloat(fieldValue)},checkValue:function(value){return parseFloat(value)},operators:_numberOperators,defOperator:"eq"},_STR={type:"application/x-string",checkFieldValue:function(fieldValue){return String(fieldValue)},checkValue:function(value){return String(value)},operators:_stringOperators,defOperator:"like"},_TEXT={type:"text/plain",checkFieldValue:function(fieldValue){return String(fieldValue)},checkValue:function(value){return String(value)},operators:_stringOperators,defOperator:"like"},_REF={type:"application/x-reference",checkFieldValue:function(fieldValue){return fieldValue&&fieldValue.$value?String(fieldValue.$value).toUpperCase():null},checkValue:function(value){return value?String(value).toUpperCase():null},operators:_stringOperators,defOperator:"like"},_CHOICE={type:"application/x-choice",checkFieldValue:function(fieldValue){return parseInt(fieldValue,10)},checkValue:function(value){return parseInt(value,10)},operators:_numberOperators,defOperator:"eq"},_BOOL={type:"application/x-boolean",checkFieldValue:function(fieldValue){return fieldValue},checkValue:function(value){return value},operators:_defOperators,defOperator:"eq"},_types={};[_DATE,_TIME,_DATETIME,_DEC,_REAL,_INT,_QTY,_STR,_TEXT,_REF,_BOOL,_CHOICE].forEach(function(t){_types[t.type]=t});var _operatorsWithTitle={},_operatorsByType=function($type){var t=_types[$type];return t?t.operators:_defOperators},_getOperators=function($type,withTitle,exclude){var operators;if(withTitle===!0){if(_operatorsWithTitle[$type]==null){var ops=_operatorsByType($type),res=[];ops.forEach(function(op){res.push({title:locale.text("field.operator."+op),value:op})}),_operatorsWithTitle[$type]=res}operators=_operatorsWithTitle[$type]}else operators=_operatorsByType($type);if(exclude&&exclude.length>0){var tmp=operators;operators=[],tmp.forEach(function(o){exclude.indexOf(o)<0&&operators.push(o)})}return operators},_getDefaultOperator=function($type){var t=_types[$type];return t?t.defOperator:"eq"},_evaluateOperator=function($type,fieldValue,operator,value){var fieldType=_types[$type];return fieldType==null?(console.log("_evaluateOperator - Type ["+$type+"] not evaluated"),!1):fieldType.operators.indexOf(operator)<0?!1:(fieldValue=fieldType.checkFieldValue(fieldValue),value=fieldType.checkValue(value),fieldValue==null||value==null?!1:operator==="eq"?fieldValue==value:operator==="ne"?fieldValue!=value:operator==="like"?fieldValue.indexOf?fieldValue.indexOf(value)>=0:!1:operator==="like_s"?fieldValue.smStartsWith?fieldValue.smStartsWith(value):!1:operator==="gt"?fieldValue>value:operator==="ge"?fieldValue>=value:operator==="lt"?fieldValue<value:operator==="le"?fieldValue<=value:!1)};exports.getDefaultOperator=_getDefaultOperator,exports.getOperators=_getOperators,exports.evaluateOperator=_evaluateOperator,exports.acceptOperator=function($type){return _excludedTypes.indexOf($type)<0}}),define("syracuse-tablet/html/js/helpers/types/date",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){function _padLeft(str,len,ch){str=str?str.toString():"";if(!ch||ch.length==0)ch=" ";while(str.length<len)str=ch+str;return str}function DateObj(value){this._value=value}function _dayName(weekDay,abbrev){return abbrev?_dateInfo().abbreviatedDayNames[weekDay]:_dateInfo().dayNames[weekDay]}function _monthName(month,abbrev){return abbrev?_dateInfo().abbreviatedMonthNames[month-1]:_dateInfo().monthNames[month-1]}function _pad2(val){var s=val.toString();return s.length==1?"0"+s:s}function _toOffset(date){var year=date.year,month=date.month,day=date.day,y=month<=2?year-1:year,n4=Math.floor(y/4)-Math.floor(492.5),n100=Math.floor(y/100)-Math.floor(19.7),n400=Math.floor(y/400)-Math.floor(4.925),nLeap=n4-n100+n400;return(year-1970)*365+nLeap+_monthOffsets[month-1]+day-1}function _fromOffset(offset){var julian=2440588+offset,l=julian+68569,n=Math.floor(4*l/146097);l-=Math.floor((146097*n+3)/4);var i=Math.floor(4e3*(l+1)/1461001);l=l-Math.floor(1461*i/4)+31;var j=Math.floor(80*l/2447),day=l-Math.floor(2447*j/80);l=Math.floor(j/11);var month=j+2-12*l,year=100*(n-49)+i+l;return new DateObj(year*1e4+month*100+day)}function _make(year,month,day){return new DateObj(year*1e4+month*100+day)}function _isLeap(year){return year%4===0&&(year%100!==0||year%400===0)}function _daysInMonth(year,month){return month==2?_isLeap(year)?29:28:_monthLengths[month-1]}function _isWorkDay(weekDay){return weekDay!=0&&weekDay!=6}function _amDesignator(){return _dateInfo().amDesignator||"AM"}function _pmDesignator(){return _dateInfo().pmDesignator||"PM"}function _walkFormat(format,map){function count(i){var ch=format[i],k=1;while(format[i+k]===ch)k++;return k}var i=0,len=format.length;while(i<len){var c=format[i];switch(c){case"'":i++;var literal="";for(;i<len;i++)if(format[i]==="'"){i++;if(format[i]!=="'")break;literal+="'"}else literal+=format[i];map.literal(literal);break;case"d":case"M":case"y":var repeat=count(i);map[c](repeat),i+=repeat;break;default:map.literal(c),i++}}}function _parse(str,format){function parseInteger(max){if(!/\d/.test(str[j]))throw new Error(locale.text("date.notNumber",str.substring[j]));var beg=j++;while(j<beg+max&&/\d/.test(str[j]))j++;return parseInt(str.substring(beg,j),10)}function parseName(names){for(var k=0;k<names.length;k++){var name=names[k],len=name.length;if(str.substring(j,j+len).toUpperCase()==name.toUpperCase())return j+=len,k}throw new Error(locale.text("date.unknown",str.substring(j)))}var day,weekday,month,year,j=0;return _walkFormat(format,{literal:function(literal){if(str.substring(j,j+literal.length)!==literal)throw new Error(locale.text("date.wrongFormat",literal,str.substring(j)));j+=literal.length},d:function(arg){switch(arg){case 1:case 2:day=parseInteger(2);break;case 3:weekday=parseName(_dateInfo().abbreviatedDayNames);break;case 4:weekday=parseName(_dateInfo().dayNames);break;default:throw new Error(locale.text("date.badDay",format.substring(j)))}},M:function(arg){switch(arg){case 1:case 2:month=parseInteger(2);break;case 3:month=parseName(_dateInfo().abbreviatedMonthNames)+1;break;case 4:month=parseName(_dateInfo().monthNames)+1;break;default:throw new Error(locale.text("date.badDay",format.substring(j)))}},y:function(arg){switch(arg){case 2:year=parseInteger(2),year=year<40?2e3+year:1900+year;break;case 4:year=parseInteger(4),year=year>99?year:year<40?2e3+year:1900+year;break;default:throw new Error(locale.text("date.badYear",format.substring(j)))}}}),_make(year,month,day)}var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_dateInfo=locale.getDatetimeInfo;exports.validate=function(value,constraints,errors){if(value==null){if(constraints.$isMandatory)return errors.push(locale.text("date.valMan"));if(!constraints.$isNullable)return errors.push(locale.text("date.valNull"));return}if(!(value instanceof DateObj)){errors.push(locale.text("date.valDate"));return}if(!(value.month>=1&&value.month<=12)){errors.push(locale.text("date.invMonth"));return}if(!(value.day>=1&&value.day<=_daysInMonth(value.year,value.month))){errors.push(locale.text("date.invDay"));return}};var _monthOffsets=[0,31,59,90,120,151,181,212,243,273,304,334],_monthLengths=[31,28,31,30,31,30,31,31,30,31,30,31];exports.amDesignator=_amDesignator,exports.pmDesignator=_pmDesignator,utils.defineClass(DateObj,null,{year:{get:function(){return Math.floor(this._value/1e4)}},month:{get:function(){return Math.floor(this._value/100)%100}},day:{get:function(){return this._value%100}},weekDay:{get:function(){return(2440589+_toOffset(this))%7}},yearDay:{get:function(){var month=this.month,leap=month>2&&_isLeap(this.year)?1:0;return _monthOffsets[month-1]+leap+this.day}},week:{get:function(){var begOfWeek1=_make(this.year,1,4).begOfWeek(1);return Math.floor((7+_toOffset(this)-_toOffset(begOfWeek1))/7)}},valueOf:function(){return this.toString()},compare:function(date){return this._value-date._value},equals:function(date){return this._value===date._value},between:function(begin,end){return begin._value<=this._value&&this._value<=end._value},isLeapYear:function(){return _isLeap(this.year)},isWorkDay:function(){return _isWorkDay(this.weekDay)},daysInMonth:function(){return _daysInMonth(this.year,this.month)},begOfYear:function(){return _make(this.year,1,1)},endOfYear:function(){return _make(this.year,12,31)},begOfQuarter:function(){return _make(this.year,Math.floor((this.month-1)/3)*3+1,1)},endOfQuarter:function(){return this.begOfQuarter().addMonths(2).endOfMonth()},begOfMonth:function(){return _make(this.year,this.month,1)},endOfMonth:function(){return _make(this.year,this.month,this.daysInMonth())},sameMonth:function(day){return day=Math.min(day,this.daysInMonth()),_make(this.year,this.month,day)},pastDay:function(day,includeThis){var delta=day-this.day;return delta>0||delta==0&&!includeThis?this.addMonths(-1).sameMonth(day):this.sameMonth(day)},futureDay:function(day,includeThis){var delta=day-this.day;return delta<0||delta==0&&!includeThis?this.addMonths(1).sameMonth(day):this.sameMonth(day)},pastMonth:function(month,includeThis){var delta=this.month-month;return delta=delta==0?includeThis?0:12:delta>0?delta:delta+12,this.addMonths(-delta)},futureMonth:function(month,includeThis){var delta=month-this.month;return delta=delta==0?includeThis?0:12:delta>0?delta:delta+12,this.addMonths(delta)},begOfWeek:function(startDay){var delta=this.weekDay-(startDay||0);return delta==0?this:delta>0?this.addDays(-delta):this.addDays(-delta-7)},endOfWeek:function(startDay){return this.begOfWeek(startDay).addDays(6)},sameWeek:function(weekDay,startDay){return this.begOfWeek(startDay).futureWeekDay(weekDay,!0)},pastWeekDay:function(weekDay,includeThis){var result=this.begOfWeek(weekDay);return!includeThis&&result.equals(this)?this.addWeeks(-1):result},futureWeekDay:function(weekDay,includeThis){return this.pastWeekDay(weekDay,!includeThis).addWeeks(1)},addYears:function(years){if(years==0)return this;var year=this.year+years,month=this.month,day=Math.min(this.day,_daysInMonth(year,month));return _make(year,month,day)},addMonths:function(months){if(months==0)return this;var self=this,day=self.day,month0=self.month-1,year=self.year;month0+=months,year+=Math.floor(month0/12);var month=(month0+12e4)%12+1,monthLen=_daysInMonth(year,month);return day=day<monthLen?day:monthLen,_make(year,month,day)},addWeeks:function(weeks){return this.addDays(7*weeks)},addDays:function(days){return days==0?this:_fromOffset(_toOffset(this)+days)},daysDiff:function(date){return _toOffset(this)-_toOffset(date)},add:function(delta){return this.addYears(delta.years||0).addMonths(delta.months||0).addWeeks(delta.weeks||0).addDays(delta.days||0)},toString:function(format){var self=this;if(format==null){var str=self._value.toString();return str=_padLeft(str,8,"0"),str.substring(0,4)+"-"+str.substring(4,6)+"-"+str.substring(6,8)}var result="";return _walkFormat(format,{literal:function(lit){result+=lit},d:function(repeat){switch(repeat){case 1:result+=self.day.toString();break;case 2:result+=_pad2(self.day);break;case 3:result+=_dayName(self.weekDay,!0);break;case 4:result+=_dayName(self.weekDay);break;default:throw new Error(locale.text("date.formatd",repeat))}},M:function(repeat){switch(repeat){case 1:result+=self.month.toString();break;case 2:result+=_pad2(self.month);break;case 3:result+=_monthName(self.month,!0);break;case 4:result+=_monthName(self.month);break;default:throw new Error(locale.text("date.formatM",repeat))}},y:function(repeat){switch(repeat){case 2:result+=self.year.toString().substring(2,4);break;case 4:result+=self.year.toString();break;default:throw new Error(locale.text("date.formatM",repeat))}}}),result},at:function(time,millisecond){throw new Error(locale.text("date.notInstalled"))},toJsDate:function(utc){return utc?new Date(Date.UTC(this.year,this.month-1,this.day)):new Date(this.year,this.month-1,this.day)},isNull:function(){return this._value==0}}),exports.monthName=_monthName,exports.monthFromName=function(name){var n=_dateInfo().monthNames,m=_dateInfo().abbreviatedMonthNames,s=name.toLowerCase();for(var i=0;i<n.length;i++)if(n[i].toLowerCase()==s||m[i].toLowerCase()==s)return i+1;return-1},exports.dayName=_dayName,exports.weekDayFromName=function(name){var n=_dateInfo().dayNames,m=_dateInfo().abbreviatedDayNames,o=_dateInfo().shortestDayNames,s=name.toLowerCase();for(var i=0;i<n.length;i++)if(n[i].toLowerCase()==s||m[i].toLowerCase()==s)return i;return-1},exports.isLeap=_isLeap,exports.daysInMonth=_daysInMonth,exports.today=function(utc){return exports.fromJsDate(new Date,utc)},exports.parse=function(str,format){if(str==null)throw new Error(locale.text("date.dateNull"));if(format==null){if(str.length!=10)throw new Error(locale.text("date.badFormat",str));var value=parseInt(str.replace(/-/g,""),10);return new DateObj(value)}return _parse(str,format)},exports.walkFormat=_walkFormat,exports.fromJsDate=function(jsDate,utc){return utc?_make(jsDate.getUTCFullYear(),jsDate.getUTCMonth()+1,jsDate.getUTCDate()):_make(jsDate.getFullYear(),jsDate.getMonth()+1,jsDate.getDate())},exports.fromInternalValue=function(value){return new DateObj(value)},exports.makeInWeek=function(year,week,wday){var dday=wday?wday-1:6;return _make(year,1,4).begOfWeek(1).addDays(7*(week-1)+dday)},exports.isDate=function(obj){return obj instanceof DateObj},exports.sunday=0,exports.Sunday=0,exports.monday=1,exports.Monday=1,exports.tuesday=2,exports.Tuesday=2,exports.wednesday=3,exports.Wednesday=3,exports.thursday=4,exports.Thursday=4,exports.friday=5,exports.Friday=5,exports.saturday=6,exports.Saturday=6,exports.make=_make,exports.getLocalShortDate=function(dateISOString){if(!dateISOString||dateISOString.length<6)return"";var tmp=dateISOString.split("-"),d=_make(+tmp[0],+tmp[1],+tmp[2]);return d.toString(locale.getDateFormat())}}),define("syracuse-tablet/html/js/helpers/types/time",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){function Time(value){value=(value+31536e7)%86400,this._value=value}function _pad2(val){var s=val.toString();return s.length==1?"0"+s:s}function _parse2(str,beg,end){return parseInt(str.substring(beg,end),10)}function _make(hour,minute,second){return new Time(hour*3600+(minute||0)*60+(second||0))}function _amDesignator(){return _dateInfo().amDesignator||"AM"}function _pmDesignator(){return _dateInfo().pmDesignator||"AM"}function _walkFormat(format,map){function count(i){var ch=format[i],k=1;while(format[i+k]===ch)k++;return k}var i=0,len=format.length;while(i<len){var c=format[i];switch(c){case"'":i++;var literal="";for(;i<len;i++)if(format[i]==="'"){i++;if(format[i]!=="'")break;literal+="'"}else literal+=format[i];map.literal(literal);break;case"H":case"h":case"m":case"s":case"t":var repeat=count(i);map[c](repeat),i+=repeat;break;default:map.literal(c),i++}}}function _parse(str,format){function parseInteger(max){if(!/\d/.test(str[j]))throw new Error(locale.text("time.noNumber",str.substring[j]));var beg=j++;while(j<beg+max&&/\d/.test(str[j]))j++;return parseInt(str.substring(beg,j),10)}function parseName(names){for(var k=0;k<names.length;k++){var name=names[k],len=name.length;if(str.substring(j,j+len).toUpperCase()==name.toUpperCase())return j+=len,k}throw new Error(locale.text("time.unknown",str.substring(j)))}function from12to24(mode,index){switch(mode[index]){case mode[0]:hour=hour===12?0:hour;break;case mode[1]:hour>=1&&hour<=11&&(hour+=12)}}var hour,minute,second,timeMode,abbrTimeMode,timeModes=[_amDesignator(),_pmDesignator()],abbrTimeModes=[timeModes[0].substring(0,1),timeModes[1].substring(0,1)],j=0;_walkFormat(format,{literal:function(literal){if(str.substring(j,j+literal.length)!==literal)throw new Error(locale.text("time.wrongFormat",literal,str.substring(j)));j+=literal.length},H:function(arg){switch(arg){case 1:case 2:hour=parseInteger(2);break;default:throw new Error(locale.text("time.badHour",format.substring(j)))}},h:function(arg){switch(arg){case 1:case 2:hour=parseInteger(2);break;default:throw new Error(locale.text("time.badHour",format.substring(j)))}},m:function(arg){switch(arg){case 2:minute=parseInteger(2);break;default:throw new Error(locale.text("time.badMin",format.substring(j)))}},s:function(arg){switch(arg){case 2:second=parseInteger(2);break;default:throw new Error(locale.text("time.badSec",format.substring(j)))}},t:function(arg){switch(arg){case 1:abbrTimeMode=parseName(abbrTimeModes);break;case 2:timeMode=parseName(timeModes);break;default:throw new Error(locale.text("time.badMarker",format.substring(j)))}}});if(timeMode!=null||abbrTimeMode!=null){if(hour>12)throw new Error(locale.text("time.badHourVal",hour,timeMode));var mode=timeMode!=null?timeModes:abbrTimeModes,index=timeMode!=null?timeMode:abbrTimeMode;from12to24(mode,index)}return _make(hour,minute,second)}var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_dateInfo=locale.getDatetimeInfo;exports.validate=function(value,constraints,errors){if(value==null){if(constraints.$isMandatory)return errors.push(locale.text("time.valMan"));if(!constraints.$isNullable)return errors.push(locale.text("time.valNull"));return}if(!(value instanceof Time)){errors.push(locale.text("time.valTime"));return}},utils.defineClass(Time,null,{hour:{get:function(){return Math.floor(this._value/3600)}},minute:{get:function(){return Math.floor(this._value/60)%60}},second:{get:function(){return this._value%60}},value:{get:function(){return this._value}},valueOf:function(){return this.toString()},compare:function(time){return this._value-time._value},equals:function(time){return this._value===time._value},between:function(begin,end){return begin._value<=this._value&&this._value<=end._value},begOfDay:function(){return _make(0,0,0)},endOfDay:function(){return _make(23,59,59)},begOfHour:function(){return _make(this.hour,0,0)},endOfHour:function(){return _make(this.hour,59,59)},begOfMinute:function(){return _make(this.hour,this.minute,0)},endOfMinute:function(){return _make(this.hour,this.minute,59)},toString:function(format){var self=this;if(format==null)return _pad2(self.hour)+":"+_pad2(self.minute)+":"+_pad2(self.second);var result="";return _walkFormat(format,{literal:function(lit){result+=lit},H:function(repeat){switch(repeat){case 1:result+=self.hour;break;case 2:result+=_pad2(self.hour);break;default:throw new Error(locale.text("time.formatH",repeat))}},h:function(repeat){switch(repeat){case 1:var hour=self.hour;hour===0?result+=12:result+=hour>12?hour-12:hour;break;case 2:var hour=self.hour;hour===0?result+=12:result+=hour>12?_pad2(hour-12):_pad2(hour);break;default:throw new Error(locale.text("time.formath",repeat))}},m:function(repeat){switch(repeat){case 2:result+=_pad2(self.minute);break;default:throw new Error(locale.text("time.formatm",repeat))}},s:function(repeat){switch(repeat){case 2:result+=_pad2(self.second);break;default:throw new Error(locale.text("time.formats",repeat))}},t:function(repeat){switch(repeat){case 1:result+=self.hour<12?_amDesignator().substring(0,1):_pmDesignator().substring(0,1);break;case 2:result+=self.hour<12?_amDesignator():_pmDesignator();break;default:throw new Error(locale.text("time.formata",repeat))}}}),result},secondsDiff:function(t){return this._value-t._value},addHours:function(hours){return hours==0?this:new Time(this._value+hours*3600)},addMinutes:function(minutes){return minutes==0?this:new Time(this._value+minutes*60)},addSeconds:function(seconds){return seconds==0?this:new Time(this._value+seconds)},add:function(delta){return this.addHours(delta.hours||0).addMinutes(delta.minutes||0).addSeconds(delta.seconds||0)},isNull:function(){return this._value==0}}),exports.make=_make,exports.fromSeconds=function(seconds){return new Time(seconds)},exports.fromJsDate=function(js,utc){return utc?_make(js.getUTCHours(),js.getUTCMinutes(),js.getUTCSeconds()):_make(js.getHours(),js.getMinutes(),js.getSeconds())},exports.now=function(utc){return exports.fromJsDate(new Date,utc)},exports.parse=function(str,format){if(str==null)throw new Error(locale.text("time.isNull"));if(format==null){if(str.length!=5&&str.length!=8)throw new Error(locale.text("time.badFormat",str));var value=str.length==8?_parse2(str,0,2)*3600+_parse2(str,3,5)*60+_parse2(str,6,8):_parse2(str,0,2)*3600+_parse2(str,3,5)*60;return new Time(value)}return _parse(str,format)},exports.amDesignator=_amDesignator,exports.pmDesignator=_pmDesignator}),define("syracuse-tablet/html/js/helpers/types/datetime",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){function _pad2(val){var s=val.toString();return s.length==1?"0"+s:s}function _pad3(val){var s=val.toString();switch(s.length){case 1:return"00"+s;case 2:return"0"+s;default:return s}}function Datetime(value,tzOffset){this._value=value,tzOffset!=null&&(this._tzOffset=tzOffset)}function _ms(dt){return(dt._value+63072e9)%1e3}function _utc(dt){var utc=dt._utc;if(!utc){var d=new Date(dt._value);utc=d.getUTCFullYear()*1e4*1e5+(d.getUTCMonth()+1)*100*1e5+d.getUTCDate()*1e5+d.getUTCHours()*3600+d.getUTCMinutes()*60+d.getUTCSeconds(),d._utc=utc}return utc}function _local(dt){var local=dt._local;if(!local){var d=new Date(dt._value);local=d.getFullYear()*1e4*1e5+(d.getMonth()+1)*100*1e5+d.getDate()*1e5+d.getHours()*3600+d.getMinutes()*60+d.getSeconds(),d._local=local}return local}function _formatTzOffset(offset,len){var s="-";offset<0&&(s="+",offset=-offset);var hr=Math.round(offset/60),min=offset-hr*60;return s+=len>1?_pad2(hr):hr,s+=len>2||min?":"+(len>1?_pad2(min):min):"",s}function _parseIso(str){var year=0,month=0,day=0,hours=0,minutes=0,seconds=0,ms=0,offset=0,convertError=!0,d=/(\d{4})-(\d{2})-(\d{2})([T\s]?)(\d{2})?(:)?(\d{2})?(:)?(\d{2})?(\.(\d{3}))?(Z)?(([+-])(\d{2}))?(.*$)/.exec(str);if(d){convertError=!1,year=+d[1],month=d[2]-1,day=+d[3],hours=+(d[5]||0),minutes=+(d[7]||0),seconds=+(d[9]||0),ms=+(d[11]||0);if(d[12]==="Z"){d[14]==="-"?offset=(d[15]||0)*60:d[14]==="+"&&(offset=-(d[15]||0)*60);var utc=Date.UTC(year,month,day,hours,minutes+offset,seconds,ms);return new Datetime(utc)}var jsDate=new Date(year,month,day,hours,minutes+offset,seconds,ms);return new Datetime(jsDate.getTime(),jsDate.getTimezoneOffset())}if(convertError)throw new Error(locale.text("datetime.noParse",str))}function _make(year,month,day,hour,minute,second,millis){var jsDate=new Date(year,month-1,day,hour||0,minute||0,second||0,millis||0);return new Datetime(jsDate.getTime(),jsDate.getTimezoneOffset())}function _makeUtc(year,month,day,hour,minute,second,millis){var jsDate=new Date(Date.UTC(year,month-1,day,hour||0,minute||0,second||0,millis||0));return new Datetime(jsDate.getTime(),jsDate.getTimezoneOffset())}function _walkFormat(format,map){function count(i){var ch=format[i],k=1;while(format[i+k]===ch)k++;return k}var i=0,len=format.length;while(i<len){var c=format[i];switch(c){case"'":i++;var literal="";for(;i<len;i++)if(format[i]==="'"){i++;if(format[i]!=="'")break;literal+="'"}else literal+=format[i];map.literal(literal);break;case"H":case"h":case"m":case"s":case"S":case"t":case"d":case"M":case"y":var repeat=count(i);map[c](repeat),i+=repeat;break;default:map.literal(c),i++}}}function _parse(str,format){function parseInteger(max){if(!/\d/.test(str[j]))throw new Error(locale.text("datetime.noNumber",str.substring[j]));var beg=j++;while(j<beg+max&&/\d/.test(str[j]))j++;return parseInt(str.substring(beg,j),10)}function parseName(names){for(var k=0;k<names.length;k++){var name=names[k],len=name.length;if(str.substring(j,j+len).toUpperCase()==name.toUpperCase())return j+=len,k}throw new Error(locale.text("datetime.unknown",str.substring(j)))}function from12to24(mode,index){switch(mode[index]){case mode[0]:hour=hour===12?0:hour;break;case mode[1]:hour>=1&&hour<=11&&(hour+=12)}}var day,weekday,month,year,hour,minute,second,millis,timeMode,abbrTimeMode,timeModes=[date.amDesignator(),date.pmDesignator()],abbrTimeModes=[timeModes[0].substring(0,1),timeModes[1].substring(0,1)],j=0;_walkFormat(format,{literal:function(literal){if(str.substring(j,j+literal.length)!==literal)throw new Error(locale.text("datetime.formatMis",literal,str.substring(j)));j+=literal.length},d:function(arg){switch(arg){case 1:case 2:day=parseInteger(2);break;case 3:weekday=parseName(_dateInfo().abbreviatedDayNames);break;case 4:weekday=parseName(_dateInfo().dayNames);break;default:throw new Error(locale.text("datetime.badDay",format.substring(j)))}},M:function(arg){switch(arg){case 1:case 2:month=parseInteger(2);break;case 3:month=parseName(_dateInfo().abbreviatedMonthNames)+1;break;case 4:month=parseName(_dateInfo().monthNames)+1;break;default:throw new Error(locale.text("datetime.badDay",format.substring(j)))}},y:function(arg){switch(arg){case 2:year=parseInteger(2),year=year<40?2e3+year:1900+year;break;case 4:year=parseInteger(4),year=year>99?year:year<40?2e3+year:1900+year;break;default:throw new Error(locale.text("datetime.badYear",format.substring(j)))}},H:function(arg){switch(arg){case 1:case 2:hour=parseInteger(2);break;default:throw new Error(locale.text("datetime.badHour",format.substring(j)))}},h:function(arg){switch(arg){case 1:case 2:hour=parseInteger(2);break;default:throw new Error(locale.text("datetime.badHour",format.substring(j)))}},m:function(arg){switch(arg){case 2:minute=parseInteger(2);break;default:throw new Error(locale.text("datetime.badMin",format.substring(j)))}},s:function(arg){switch(arg){case 2:second=parseInteger(2);break;default:throw new Error(locale.text("datetime.badSec",format.substring(j)))}},t:function(arg){switch(arg){case 1:abbrTimeMode=parseName(abbrTimeModes);break;case 2:timeMode=parseName(timeModes);break;default:throw new Error(locale.text("datetime.badMarker",format.substring(j)))}}});if(timeMode!=null||abbrTimeMode!=null){if(hour>12)throw new Error(locale.text("datetime.badHourVal",hour,timeMode));var mode=timeMode!=null?timeModes:abbrTimeModes,index=timeMode!=null?timeMode:abbrTimeMode;from12to24(mode,index)}return _make(year,month,day,hour,minute,second,millis)}function _getIndexOfZ(format){function count(i){var ch=format[i],k=1;while(format[i+k]===ch)k++;return k}var i=0,len=format.length;while(i<len){var c=format[i];if(c==="'"){i++;var literal="";for(;i<len;i++)if(format[i]==="'"){i++;if(format[i]!=="'")break;literal+="'"}else literal+=format[i]}else{if(c==="Z")return i;i++}}}var utils=require("syracuse-tablet/html/js/helpers/utils"),date=require("syracuse-tablet/html/js/helpers/types/date"),time=require("syracuse-tablet/html/js/helpers/types/time"),locale=require("syracuse-tablet/html/js/helpers/locale"),_dateInfo=locale.getDatetimeInfo;exports.validate=function(value,constraints,errors){if(value==null){if(constraints.$isMandatory)return errors.push(locale.text("datetime.valMand"));if(!constraints.$isNullable)return errors.push(locale.text("datetime.valNull"));return}if(!(value instanceof Datetime)){errors.push(locale.text("datetime.valDT"));return}if(!(value.month>=1&&value.month<=12)){errors.push(locale.text("datetime.valMon"));return}if(!(value.day>=1&&value.day<=date.daysInMonth(value.year,value.month))){errors.push(locale.text("datetime.valDay"));return}},exports.Datetime=utils.defineClass(Datetime,null,{date:{get:function(){return date.fromInternalValue(Math.floor(_local(this)/1e5))}},time:{get:function(){return time.fromSeconds(_local(this)%1e5)}},year:{get:function(){return this.date.year}},month:{get:function(){return this.date.month}},day:{get:function(){return this.date.day}},weekDay:{get:function(){return this.date.weekDay}},yearDay:{get:function(){return this.date.yearDay}},hour:{get:function(){return this.time.hour}},minute:{get:function(){return this.time.minute}},second:{get:function(){return this.time.second}},millisecond:{get:function(){return _ms(this)}},utcDate:{get:function(){return date.fromInternalValue(Math.floor(_utc(this)/1e5))}},utcTime:{get:function(){return time.fromSeconds(_utc(this)%1e5)}},utcYear:{get:function(){return this.utcDate.year}},utcMonth:{get:function(){return this.utcDate.month}},utcDay:{get:function(){return this.utcDate.day}},utcWeekDay:{get:function(){return this.utcDate.weekDay}},utcYearDay:{get:function(){return this.utcDate.yearDay}},utcHour:{get:function(){return this.utcTime.hour}},utcMinute:{get:function(){return this.utcTime.minute}},utcSecond:{get:function(){return this.utcTime.second}},utcMillisecond:{get:function(){return _ms(this)}},value:{get:function(){return this._value}},timezoneOffset:{get:function(){return this._tzOffset==null&&(this._tzOffset=this.toJsDate().getTimezoneOffset()),this._tzOffset}},compare:function(dt){return this._value-dt._value},equals:function(dt){return this._value===dt._value},between:function(begin,end){return begin._value<=this._value&&this._value<=end._value},addYears:function(years){return this.date.addYears(years).at(this.time,this.millisecond)},addMonths:function(months){return this.date.addMonths(months).at(this.time,this.millisecond)},addWeeks:function(weeks){return this.date.addWeeks(weeks).at(this.time,this.millisecond)},addDays:function(days){return this.date.addDays(days).at(this.time,this.millisecond)},addHours:function(hours){return new Datetime(this._value+hours*3600*1e3)},addMinutes:function(minutes){return new Datetime(this._value+minutes*60*1e3)},addSeconds:function(seconds){return new Datetime(this._value+seconds*1e3)},addMilliseconds:function(millis){return new Datetime(this._value+millis)},addDayFractions:function(fraction){return new Datetime(this._value+fraction*86400*1e3)},millisDiff:function(dt){return this._value-dt._value},begOfMonth:function(){return _make(this.year,this.month,1)},begOfWeek:function(startDay){var delta=this.weekDay-(startDay||0);return delta==0?this:delta>0?this.addDays(-delta):this.addDays(-delta-7)},add:function(delta){return this.addYears(delta.years||0).addMonths(delta.months||0).addWeeks(delta.weeks||0).addDays(delta.days||0).addHours(delta.hours||0).addMinutes(delta.minutes||0).addSeconds(delta.seconds||0).addMillis(delta.millis||0)},toString:function(format){var self=this;if(format==null)return(new Date(this._value)).toISOString();var utc=_getIndexOfZ(format),_date=utc?self.utcDate:self.date,_time=utc?self.utcTime:self.time,result="";return _walkFormat(format,{literal:function(lit){result+=lit},H:function(repeat){switch(repeat){case 1:result+=_time.hour.toString();break;case 2:result+=_pad2(_time.hour);break;default:throw new Error(locale.text("datetime.formatH",repeat))}},h:function(repeat){switch(repeat){case 1:result+=_time.hour<13?_time.hour:_time.hour-12;break;case 2:result+=_pad2(_time.hour<13?_time.hour:_time.hour-12);break;default:throw new Error(locale.text("datetime.formath",repeat))}},m:function(repeat){switch(repeat){case 2:result+=_pad2(_time.minute);break;default:throw new Error(locale.text("datetime.formatm",repeat))}},s:function(repeat){switch(repeat){case 2:result+=_pad2(self.second);break;default:throw new Error(locale.text("datetime.formats",repeat))}},t:function(repeat){switch(repeat){case 1:result+=self.hour<12?_dateInfo().amDesignator.substring(0,1):_dateInfo().pmDesignator.substring(0,1);break;case 2:result+=self.hour<12?_dateInfo().amDesignator:_dateInfo().pmDesignator;break;default:throw new Error(locale.text("datetime.formata",repeat))}},d:function(repeat){switch(repeat){case 1:result+=_date.day.toString();break;case 2:result+=_pad2(_date.day);break;case 3:result+=date.dayName(_date.weekDay,!0);break;case 4:result+=date.dayName(_date.weekDay);break;default:throw new Error(locale.text("datetime.formatd",repeat))}},M:function(repeat){switch(repeat){case 1:result+=_date.month.toString();break;case 2:result+=_pad2(_date.month);break;case 3:result+=date.monthName(_date.month,!0);break;case 4:result+=date.monthName(_date.month);break;default:throw new Error(locale.text("datetime.formatM",repeat))}},y:function(repeat){switch(repeat){case 2:result+=_date.year.toString().substring(2,4);break;case 4:result+=_date.year.toString();break;default:throw new Error(locale.text("datetime.formaty",repeat))}},S:function(repeat){repeat===3?result+=_pad3(self.millisecond):new Error(locale.text("datetime.formatS",repeat))}}),result},toJsDate:function(){return new Date(this._value)},withoutTimezoneOffset:function(){return new Datetime(this._value)},isNull:function(){return this._value==0}}),exports.now=function(withMillis){var jsDate=new Date,millis=jsDate.getTime();return withMillis||(millis=Math.floor(millis/1e3)*1e3),new Datetime(millis,jsDate.getTimezoneOffset())},exports.parse=function(str,format){if(str==null)throw new Error(locale.text("datetime.isNull"));return format==null?_parseIso(str):_parse(str,format)},exports.fromJsDate=function(jsDate){return new Datetime(jsDate.getTime(),jsDate.getTimezoneOffset())},exports.isDatetime=function(obj){return obj instanceof Datetime},exports.fromInternalValue=function(value){return new Datetime(value)},exports.dayName=function(weekDay,abbrev){return abbrev?_dateInfo().abbreviatedDayNames[weekDay]:_dateInfo().dayNames[weekDay]},exports.monthName=function(month,abbrev){return abbrev?_dateInfo().abbreviatedMonthNames[month-1]:_dateInfo().monthNames[month-1]},exports.make=_make,exports.makeUtc=_makeUtc,date.make(1,1,1).constructor.prototype.at=function(time,millisecond){return exports.make(this.year,this.month,this.day,time.hour,time.minute,time.second,millisecond)},exports.sunday=0,exports.Sunday=0,exports.monday=1,exports.Monday=1,exports.tuesday=2,exports.Tuesday=2,exports.wednesday=3,exports.Wednesday=3,exports.thursday=4,exports.Thursday=4,exports.friday=5,exports.Friday=5,exports.saturday=6,exports.Saturday=6,exports.walkFormat=_walkFormat}),define("syracuse-tablet/html/js/helpers/types/numberFormat",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){function FormatObj(prefix,postfix,properties){this.prefix=prefix,this.postfix=postfix,this.properties=properties}function _processDirective(directive,fObj){var f=new FormatObj(fObj.prefix,fObj.postfix,fObj.properties),hasDecimalSeparator,hasGroupSeparator,dsIndex=directive.indexOf("."),gsIndex=directive.indexOf(",");f.properties.hasDecimalSeparator=hasDecimalSeparator=dsIndex>-1,f.properties.hasGroupSeparator=hasGroupSeparator=gsIndex>-1;if(hasDecimalSeparator){var decimal=directive.substring(dsIndex+1);f.properties.mandatoryAfter=decimal.indexOf("0")>-1?decimal.match(/0/g).length:0,f.properties.maxAfter=decimal.length}hasGroupSeparator&&(f.properties.groupSize=hasDecimalSeparator?dsIndex-gsIndex-1:directive.substring(gsIndex+1).length);var integer=hasDecimalSeparator?directive.substring(0,dsIndex):directive;return f.properties.mandatoryBefore=integer.indexOf("0")>-1?integer.match(/0/g).length:0,f.properties.directive=directive,f.properties.hasPercent=directive.indexOf("%")>-1,f.properties.hasPermil=directive.indexOf("")>-1,f.properties.hasSignFormat=directive.indexOf("+")>-1&&directive.indexOf("+")===0,f}function _walkFormat(format,map){function count(i){var ch=format[i],k=1;while(validDir.indexOf(format[i+k])>-1)k++;return k}var i=0,len=format.length,validDir="0#.,%+";while(i<len){var c=format[i];switch(c){case"'":i++;var literal="";for(;i<len;i++)if(format[i]==="'"){i++;if(format[i]!=="'")break;literal+="'"}else literal+=format[i];map.literal(literal);break;case"0":case"#":case".":case"%":case"":case"+":var directiveLength=count(i);map.directive(i,i+directiveLength),i+=directiveLength;break;case";":map.listSeparator(),i++;break;default:map.literal(c),i++}i===len&&map.listSeparator()}}function _addSeparator(num,gs,size){var result="",len=num.length,c="",count=0;for(var i=len-1;i>=0;i--)c=num[i],result+=c,++count,count%size===0&&i>0&&(result+=gs);return result.split("").reverse().join("")}function _format(val,format){var prefix,postfix,j=0,formatsList=[],directiveProcessed=!1,f=new FormatObj("","",{});_walkFormat(format,{literal:function(literal){directiveProcessed?f.postfix+=literal:f.prefix+=literal},directive:function(beg,end){var directive=format.substring(beg,end);f=_processDirective(directive,f),directiveProcessed=!0},listSeparator:function(){directiveProcessed=!1,formatsList.push(f),f=new FormatObj("","",{}),prefix="",postfix=""}});var flen=formatsList.length;switch(flen){case 1:return _formatNumber(val,formatsList[0]);case 2:case 3:return val===0?_formatZero(formatsList[2]):val<0?_formatNumber(val.toString().substring(1),formatsList[1]):_formatNumber(val,formatsList[0]);default:throw new Error(flen===0?locale.text("numberFormat.noFormat"):locale.text("numberFormat.manyFormat"))}}function _formatZero(fObj){return fObj.prefix}function _formatNumber(num,fObj){var res="",gs=locale.getNumberGroupSeparator(),ds=locale.getNumberDecimalSeparator(),directive=fObj.properties.directive;num=fObj.properties.hasPercent?num*100:num,num=fObj.properties.hasPermil?num*1e3:num;if(directive==null)return num;if(fObj.properties.hasDecimalSeparator){var decimalPart="",maxAfter=fObj.properties.maxAfter,decimalFormat=directive.substr(directive.indexOf(".")+1,maxAfter),decimalValue=num%1,decimalString=""+decimalValue.toFixed(maxAfter);decimalString=decimalString.substring(decimalString.indexOf(".")+1);for(var i=0;i<maxAfter;i++){var f=decimalFormat.charAt(i),n=decimalString.charAt(i);if(f==="0")decimalPart+=n;else if(f==="#"&&n!=="0")decimalPart+=n;else if(f==="#"&&n==="0"){var notParsed=decimalString.substring(i);if(!notParsed.match("[1-9]"))break;decimalPart+=n}}res=decimalPart?ds+decimalPart:res}else num=Math.round(num);var intPart=num<0?""+Math.ceil(num):""+Math.floor(num);intPart=intPart.replace(/[^\d]+/g,"");var intFormat=directive.indexOf(".")===-1?directive:directive.substring(0,directive.indexOf("."));if(intPart.length<fObj.properties.mandatoryBefore){var missing=fObj.properties.mandatoryBefore-intPart.length,toAdd="";for(var i=0;i<missing;i++)toAdd+="0";intPart=toAdd+intPart}return fObj.properties.hasGroupSeparator&&fObj.properties.groupSize<intPart.length&&(intPart=_addSeparator(intPart,gs,fObj.properties.groupSize)),intPart=parseInt(intPart,10)===0&&fObj.properties.mandatoryBefore===0?"":intPart,intPart=intPart&&num<0?"-"+intPart:intPart,res=intPart+res,res=fObj.properties.hasSignFormat&&num>0?"+"+res:res,res+=fObj.properties.hasPercent?"%":"",res+=fObj.properties.hasPermil?"":"",fObj.prefix+res+fObj.postfix}function _parse(str,format){var prefix,postfix,j=0,formatsList=[],directiveProcessed=!1,f=new FormatObj("","",{});return _walkFormat(format,{literal:function(literal){directiveProcessed?f.postfix+=literal:f.prefix+=literal},directive:function(beg,end){var directive=format.substring(beg,end);f=_processDirective(directive,f),directiveProcessed=!0},listSeparator:function(){directiveProcessed=!1,formatsList.push(f),f=new FormatObj("","",{}),prefix="",postfix=""}}),_parseFormats(str,formatsList)}function _parseFormats(str,formatsList,negative){var flen=formatsList.length,num,gs=locale.getNumberGroupSeparator(),ds=locale.getNumberDecimalSeparator();switch(flen){case 1:var fObj=formatsList[0],formatNumber=str,integerPart,decimalPart,prefix=fObj.prefix,postfix=fObj.postfix;formatNumber=prefix?formatNumber.substring(prefix.length):formatNumber,formatNumber=postfix?formatNumber.substring(0,formatNumber.length-postfix.length):formatNumber;var splitted=formatNumber.split(ds);if(splitted.length>2)throw new Error(locale.text("numberFormat.oneSep",formatNumber));integerPart=splitted[0]?splitted[0].match(/[0-9]/g).join(""):"0",decimalPart=splitted.length>1?splitted[1].match(/[0-9]/g).join(""):"",num=parseFloat(decimalPart?integerPart+"."+decimalPart:integerPart),num=formatNumber.charAt(0)==="-"?parseFloat("-"+num):num,num=fObj.properties.hasPercent?num/100:num,num=fObj.properties.hasPermil?num/1e3:num,num=negative?parseFloat("-"+num):num;break;case 2:case 3:var validFormat="1234567890"+ds+gs+"%-+",len=formatsList.length,slen=str.length;for(var i=0;i<len;i++){var f=formatsList[i],prefix=f.prefix,postfix=f.postfix,prefixDefined=prefix?!0:!1,postfixDefined=postfix?!0:!1,pre,post;pre=prefixDefined?str.substring(0,prefix.length):"",post=postfixDefined?str.substring(slen-postfix.length):"";if(prefixDefined&&!postfixDefined&&pre.indexOf(prefix)>-1||prefixDefined&&postfixDefined&&pre.indexOf(prefix)>-1&&post.indexOf(postfix)>-1||!prefixDefined&&postfixDefined&&post.indexOf(postfix)>-1||!prefixDefined&&!postfixDefined&&validFormat.indexOf(str.charAt(0))>-1&&validFormat.indexOf(str.charAt(slen-1))>-1)break}var flist=[];flist.push(formatsList[i]);switch(i){case 0:num=_parseFormats(str,flist);break;case 1:num=_parseFormats(str,flist,!0);break;case 2:num=0;break;default:throw new Error(locale.text("numberFormat.cannotParse"))}break;default:throw new Error(flen===0?locale.text("numberFormat.noFormat"):locale.text("numberFormat.manyFormats"))}return num}var locale=require("syracuse-tablet/html/js/helpers/locale");exports.format=function(val,format){if(isNaN(val))throw new Error(locale.text("numberFormat.notNumber",val));if(format==null){val=val.toString();var dsIndex=val.indexOf("."),hasDecimal=dsIndex>-1,intPart=hasDecimal?val.substring(0,dsIndex):val,decimalPart=hasDecimal?val.substring(dsIndex+1):"",gs=locale.getNumberGroupSeparator()||"",ds=hasDecimal?locale.getNumberDecimalSeparator()||".":"";return _addSeparator(intPart,gs,3)+ds+decimalPart}return _format(val,format)},exports.parse=function(str,format){return str?format==null?parseFloat(str):_parse(str,format):0}}),define("syracuse-tablet/html/js/helpers/formatApi",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/helpers/types/datetime","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/types/numberFormat"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),date=require("syracuse-tablet/html/js/helpers/types/date"),datetime=require("syracuse-tablet/html/js/helpers/types/datetime"),time=require("syracuse-tablet/html/js/helpers/types/time"),numberFormat=require("syracuse-tablet/html/js/helpers/types/numberFormat"),_cache={},_cacheLocaleHash;exports.getFormatter=function($type,$format){if($format=="$url")return null;var ctor=_formatters[$type];if(!ctor)return null;var curLocaleHash=locale.getCurrentLocaleHash();curLocaleHash!==_cacheLocaleHash&&(_cacheLocaleHash=curLocaleHash,_cache={});var cache=_cache[$type];cache||(cache=_cache[$type]={});var key=$format||"noformat",fmt=cache[key];return fmt?fmt:(fmt=new ctor($type,$format),cache[key]=fmt,fmt)};var Formatter=utils.defineClass(function($type,$format){this.$format=$format,this.$type=$type},null,{_isEmpty:function(value){return value==null?!0:(value=""+value,value=value.trim(),value===""?!0:!1)},formatValue:function(value,editMode){return value},formatValueEdit:function(value){return this.formatValue(value,!0)},parseValue:function(value,errors){errors.push("No parser for this type, return this dummy error to not override value by null")},getFormat:function(){return this.format}}),DateFormatter=utils.defineClass(function($type,$format){Formatter.call(this,$type,$format),this.format=locale.getDateFormat(),this.twoDigitYearSwitch=40},Formatter,{_isEmpty:function(value){return value==null?!0:(value=""+value,value=value.trim(),value===""?!0:value==="0000-00-00"?!0:!1)},_checkShortYear:function(year){if(year.year){var y=year.year;y<100&&year.add({years:y<this.twoDigitYearSwitch?2e3:1900})}else year=year>99?year:year<this.twoDigitYearSwitch?2e3+year:1900+year;return year},formatValue:function(value,editMode){if(this._isEmpty(value))return"";var p=value.split(/[^\d]+/),format;if(p.length>=3){p[0]=this._checkShortYear(+p[0]);var d=date.make(+p[0],+p[1],+p[2]);format=d.toString(this.format)}else format=value;return format},parseValue:function(value,errors){var fmt;if(this._isEmpty(value))return"";try{fmt=date.parse(value,this.format),fmt=this._checkShortYear(fmt)}catch(e){return errors.push(locale.text("field.invalidInput",[this.format])),value}return fmt.toString("yyyy-MM-dd")}}),DateTimeFormatter=utils.defineClass(function($type,$format){DateFormatter.call(this,$type,$format),this.format=locale.getDateTimeFormat()},DateFormatter,{_isEmpty:function(value){return value==null?!0:(value=""+value,value=value.trim(),value===""?!0:value==="0000-00-00T00:00:00Z"?!0:!1)},formatValue:function(value,editMode){if(this._isEmpty(value))return editMode===!0?datetime.now().toString(this.format):"";var p=value.split(/[^\d]+/),format;if(p.length>=6){p[0]=this._checkShortYear(+p[0]);var d=datetime.make(+p[0],+p[1],+p[2],+p[3],+p[4],+p[5]);format=d.toString(this.format)}else format=value;return format},parseValue:function(value,errors){var fmt;if(this._isEmpty(value))return"";try{fmt=datetime.parse(value,this.format),fmt=this._checkShortYear(fmt)}catch(e){return errors.push(locale.text("field.invalidInput",[this.format])),value}return fmt.toString("yyyy-MM-ddTHH:mm:ss.SSS")+"Z"}}),TimeFormatter=utils.defineClass(function($type,$format){Formatter.call(this,$type,$format),this.$format==="TT"?this.format=locale.getTimeFormat():this.format=locale.getTimeFormatShort()},Formatter,{formatValue:function(value,editMode){if(this._isEmpty(value))return"";var p=value.split(/[^\d]+/),format;if(p.length>=2){var t=time.make(+p[0],+p[1],+p[2]);format=t.toString(this.format)}else format=value;return format},parseValue:function(value,errors){if(this._isEmpty(value))return"";var p=value.split(/[^\d]+/);if(p.length>=1){var t=time.make(+p[0],+p[1],+p[2]);return t.toString("HH:mm:ss")}}}),NumberFormatter=utils.defineClass(function($type,$format){Formatter.call(this,$type,$format),this.format=this.$format||locale.getNumberFormat(this.$type)},Formatter,{formatValue:function(value,editMode){if(this._isEmpty(value))return"";var format=numberFormat.format(value,this.format);return format},parseValue:function(value,errors){if(this._isEmpty(value))return"";try{var fmt=numberFormat.parse(value,this.format)}catch(e){return errors.push(locale.text("field.invalidInput",[this.format])),value}return fmt}}),_formatters={"application/x-integer":NumberFormatter,"application/x-decimal":NumberFormatter,"application/x-real":NumberFormatter,"application/x-date":DateFormatter,"application/x-time":TimeFormatter,"application/x-datetime":DateTimeFormatter}}),define("syracuse-tablet/html/js/authoring/arrays/authArrayStatus",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/authoring/arrays/authArrayGeneral","syracuse-tablet/html/js/authoring/authoringComponents","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/fieldOperators","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),authArrayGeneral=require("syracuse-tablet/html/js/authoring/arrays/authArrayGeneral"),authComponents=require("syracuse-tablet/html/js/authoring/authoringComponents"),locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),utils=require("syracuse-tablet/html/js/helpers/utils"),fieldOperators=require("syracuse-tablet/html/js/helpers/fieldOperators"),formatApi=require("syracuse-tablet/html/js/helpers/formatApi"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_noValue="$$novalue$$",_properties={arrayStatusEnabled:function(controller,sel,data){this.key="$statusEnabled",this.name="arrayStatusEnabled",this["default"]="none",this.values=[{value:"none"},{value:"mono"}],data.control.$display==="card"&&this.values.push({value:"multi"}),this.createMarkup=authPropsGeneral.createMarkupRadio,this.refreshMarkup=authPropsGeneral.refreshMarkupRadio},arrayStatus:function(controller,sel,data){this.name="arrayStatus",this.label=null,this["default"]=null,this.key="$status",this.ctrlArray=data.control,this.isTable=(this.ctrlArray.article.$display||"table")==="table",this._myProperties=[],this.initMarkup=function(controller,sel,data){this._protoValue=this.ctrlArray.prototype.arrayTableGetColInfo();var authStatus=data.articleSelection[this.key]||[];this.statusList=[];var self=this,proto;authStatus.forEach(function(c){proto=self.getFieldProto(c.field),proto!=null&&(c=$.extend({},!0,c),c.id=utils.UUID(),self.statusList.push(c))})},this.getFieldProto=function(bind){var res=null;return this._protoValue.some(function(v,idx){if(v.$bind===bind)return res=v,!0}),res},this.getRecordInfo=function(id){if(!id)return null;var idx=-1,rec=null;return this.statusList.some(function(c,i){if(c.id===id)return rec=c,idx=i,!0}),idx===-1?null:{record:rec,idx:idx}},this.destroyMarkup=function(){this.ctrl=null,this.$$parent=null,this._protoValue=null,this.ctrlArray=null,this._myProperties&&(this._myProperties.forEach(function(p){p.destroyMarkup&&p.destroyMarkup()}),this._myProperties=null)},this.createMarkup=function($$parent,prop,sel,data){this.ctrl=data.control,this.$$parent=$$parent,this.statusListAdd(sel,data),this.editSectionAdd()},this.statusListAdd=function(sel,data){var opts={css:"statuslist",doAction:jsutils.bindFn(this.listCallBackAction,this,sel,data),appendTitle:locale.text("auth.arrayStatus.append")};this.listStatusDisplayer=authComponents.newComponent("editableList",opts),this._addParam("statuslist",this.listStatusDisplayer,!0),this.updateStatusList()},this.editSectionAdd=function(){this.editStatusSection=this._addSubSection("editstatus"),this.editStatusSection.$$panel.hide(),this.editStatusSection.$$content.css("padding-left","7px"),this.editStatusSection.$$title.css("font-weight","bold");var $$rootComponents=this.editStatusSection.$$content;this.paramFieldAdd($$rootComponents),this.paramOperatorAdd($$rootComponents),this.paramValueAdd($$rootComponents),this.paramColorAdd($$rootComponents),this.paramIconAdd($$rootComponents)},this.listCallBackAction=function(action,recordId,listStatusDisplayer,sel,data){if(action==="append")return this._updateParams(null),!0;if(action==="cancel")return this._resetParams(),this.editStatusSection.$$panel.hide(),!0;var recInfo=this.getRecordInfo(recordId);if(action==="validate"){var newRecord=this.validateRecord(!0);return newRecord?(recInfo==null?this.statusList.push(newRecord):(this.statusList.splice(recInfo.idx,1),this.statusList.splice(recInfo.idx,0,newRecord)),this.updateStatusList(!0,sel,data),this._resetParams(),!0):!1}if(action==="deleteItem")return recInfo?(this.statusList.splice(recInfo.idx,1),this.updateStatusList(!0,sel,data),!0):!1;if(action==="editItem")return recInfo?(this._updateParams(recInfo.record),!0):!1},this.validateRecord=function(errorMsg){var self=this,_fail=function(msg){if(errorMsg===!0){var text=msg||locale.text("auth.arrayStatus.invalid");self.listStatusDisplayer.toggleMessage(text,"error"),setTimeout(function(){self.listStatusDisplayer.toggleMessage(null)},2500)}return null},rec={};rec.field=this.fieldSelector.getValue(),rec.operator=this.operatorSelector.getValue();var proto=this.getFieldProto(rec.field);if(!proto)return _fail();rec.$type=proto.$type,rec.$format=proto.$format,rec.$type==="application/x-boolean"?rec.value=this.componentBoolVal.getValue():rec.value=this.$$valueElmt.val()||"";var formatter=formatApi.getFormatter(rec.$type,proto.$format);if(formatter){var errors=[];rec.value=formatter.parseValue(rec.value,errors);if(errors.length>0)return _fail(errors.join(""));rec.value!=null&&rec.value!=this.$$valueElmt.val()&&this.$$valueElmt.val(formatter.formatValueEdit(rec.value))}return rec.$type=="application/x-reference"&&(rec.value=(rec.value||"").toUpperCase()),this.paletteColor&&(rec.color=this.paletteColor.getValue()),this.paletteIcon&&(rec.icon=this.paletteIcon.getValue()),rec.id=utils.UUID(),rec.field==_noValue||rec.operator==_noValue||rec.color==null?_fail():rec},this._updateParams=function(record){var edit=record!=null;record=record||{},this.editStatusSection.$$panel.show(),this.fieldSelector.setValue(record.field||_noValue),this.updateOperators(record.$type,record.operator||_noValue),this.paletteColor&&this.paletteColor.setValue(record.color),this.paletteIcon&&this.paletteIcon.setValue(record.icon);var val=record.value;if(val!=null){var formatter=formatApi.getFormatter(record.$type,record.$format);val=formatter?formatter.formatValueEdit(val):val}var isBool=record.$type==="application/x-boolean";this.$$valSection.toggle(!isBool),this.$$boolValSection.toggle(isBool),this.componentBoolVal.setValue(isBool&&val===!0),this.$$valueElmt.val(isBool||val==null?"":val)},this._resetParams=function(){this.editStatusSection.$$panel.hide(),this.fieldSelector.setValue(_noValue),this.operatorSelector.clear(),this.paletteColor.setValue(""),this.$$valueElmt.val("")},this.updateStatusList=function(updateAuthoring,sel,data){var clearBefore=!0;clearBefore&&this.listStatusDisplayer.clear();var records=[],style,css;this.statusList.forEach(function(c){c.icon?(css=c.icon.css,style="color:"+c.color.bgColor+";font-size:1.4em;"):(css=c.color?c.color.css:"",style=""),records.push({titleHtml:authArrayGeneral.getHtml("statusLine",{field:c.field,operator:c.operator,value:c.value,css:css,style:style,sizeColor:15}),id:c.id})}),this.listStatusDisplayer.insertRecords(records);if(updateAuthoring==1){var value=[];this.statusList.forEach(function(c){c=$.extend({},!0,c),delete c.id,value.push(c)}),authPropsGeneral.setValue(this,sel,data,value),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data);return}},this.paramFieldAdd=function($$root){var selectOpts=[{title:locale.text("auth.arrayStatus.novalue"),value:_noValue}];this._protoValue.forEach(function(v,idx){fieldOperators.acceptOperator(v.$type)&&selectOpts.push({title:v.$title,value:v.$bind})});var opts={value:_noValue,options:selectOpts,css:"statusField",onChange:jsutils.bindFn(this.onParamFieldSelect,this),isHidden:!1};this.fieldSelector=authComponents.newComponent("select",opts),this._addParam("field",this.fieldSelector,!0,$$root,!0)},this.paramOperatorAdd=function($$root){var opts={value:_noValue,options:[{title:locale.text("auth.arrayStatus.novalue"),value:_noValue}],css:"statusOperator",onChange:jsutils.bindFn(this.onParamOperatorSelect,this),isHidden:!1};this.operatorSelector=authComponents.newComponent("select",opts),this._addParam("operator",this.operatorSelector,!0,$$root,!0),this.updateOperators()},this.paramValueAdd=function($$root){this.$$valueElmt=$('<input class="form-control statusValue"></input>');var opts={size:"small",onText:"True",offText:"False"};this.$$valSection=this._addParam("value",this.$$valueElmt,!0,$$root).hide(),this.componentBoolVal=authComponents.newComponent("switcher",opts),this.$$boolValSection=this._addParam("value",this.componentBoolVal,!0,$$root).hide()},this.paramColorAdd=function($$root){var opts={palette:authPropsGeneral.getColorPalette(),dropUp:!0};this.paletteColor=authComponents.newComponent("colorPalettePicker",opts),this._addParam("color",this.paletteColor,!0,$$root,!0)},this.paramIconAdd=function($$root){var opts={palette:fontUtils.getArrayStatusIconList(),dropUp:!0};this.paletteIcon=authComponents.newComponent("iconPalettePicker",opts),this._addParam("icon",this.paletteIcon,!0,$$root,!1)},this.onParamFieldSelect=function(event,prop){var field=this.getFieldProto($(event.target).val());this.updateOperators(field.$type,"eq"),this.$$valSection.toggle(!this.$$boolValSection.toggle(field.$type==="application/x-boolean").is(":visible"))},this.updateOperators=function(typeField,defValue){defValue=defValue==null?_noValue:defValue;var selectOpts=[{title:locale.text("auth.arrayStatus.novalue"),value:_noValue}],ops=fieldOperators.getOperators(typeField,!0);ops&&ops.forEach(function(v,idx){selectOpts.push({title:v.title,value:v.value})}),this.operatorSelector.update(selectOpts,defValue)},this.onParamOperatorSelect=function(event,prop){},this._addParam=function(prop,component,title,$$parent,mandatory){var $$parent=$$parent||this.$$parent,$$title,$$root;if(title){var res=this._addSubSection(prop,$$parent,mandatory);$$root=res.$$content,$$title=res.$$panel}else $$root=$$parent;if(component==null)throw new Error("unexpected null component");var $$panel;return component.createMarkup?(component.createMarkup($$root),this._myProperties.push(component),$$panel=component.$$panel):component.jquery&&($$root.append(component),$$panel=component),$$title?$$title:$$panel},this._addSubSection=function(textId,$$parent,mandatory){var $$panel=$(authArrayGeneral.getHtml("subtitle",{title:locale.text("auth.arrayStatus."+textId)+(mandatory===!0?"*":""),margin:10,id:"arrayStatus"+textId.smCapitalize()})).appendTo($$parent||this.$$parent);return{$$panel:$$panel,$$content:$$panel.children("div"),$$title:$$panel.children("p")}}}};exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){if(!controller.prototype.isLookup()){props.push(_properties.arrayStatusEnabled);var status=data.control.getAuthoring("$statusEnabled");(status==="mono"||status==="multi")&&props.push(_properties.arrayStatus)}}}),define("syracuse-tablet/html/js/authoring/arrays/authArrayCarousel",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"],function(require,exports,module){var authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),_properties={arrayCarouselPeriod:{key:"$carouselPeriod","default":"none",values:[{value:"none"},{value:"slow"},{value:"normal"},{value:"fast"}],createMarkup:authPropsGeneral.createMarkupRadio,refreshMarkup:authPropsGeneral.refreshMarkupRadio}};exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){props.push(_properties.arrayCarouselPeriod)}}),define("syracuse-tablet/html/js/authoring/arrays/authoringPropertiesChart",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/authoring/authoringComponents","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),authComponents=require("syracuse-tablet/html/js/authoring/authoringComponents"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_err=authPropsGeneral.err,_noValue="$$novalue$$",_templates={subtitle:'		<section {{#if id}}id="{{id}}"{{/if}} style="{{#if notHidden}}overflow:hidden;{{/if}}white-space:nowrap;text-overflow:ellipsis;{{#if margin}}margin-bottom:{{margin}}px;{{/if}}">			{{#if title}}<p>{{title}}</p>{{/if}}			<div></div>		</section>',serieTitle:' 		<div class="panel panel-primary s-m-panel-auth-prop s-m-auth-prop-type-{{type}}"> 			<div style="overflow:hidden;" class="panel-heading" role="tab" id="heading_{{id}}"> 				<a id="serie_{{id}}" style="width:100%;display:table;" data-toggle="collapse" data-parent="#{{#if parentId}}{{parentId}}{{/if}}{{#unless parentId}}accordion{{/unless}}" href="#collapse_{{id}}" {{#if expanded}} aria-expanded="true"{{/if}} aria-controls="collapse_{{id}}" {{#unless expanded}}class="collapsed"{{/unless}}>					<div style="display:table-row;white-space: nowrap;">						<h4 class="panel-title" style="display:table-cell;"> 							{{label}}						</h4> 					</div>				</a> 			</div> 			<div id="collapse_{{id}}" class="panel-collapse collapse {{#if expanded}}in{{/if}}" role="seriepanel" aria-labelledby="heading_{{id}}"> 			</div> 		</div>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[name],tmpl=_templates[key]=Handlebars.compile(tmpl)),tmpl(ctx)},_SeriePanel=function(parent,serieInfo){this.name=serieInfo.name,this.label=serieInfo.$title,this.parent=parent,this.bind=serieInfo.$bind,this.color=serieInfo.color,this.isHidden=serieInfo.isHidden},_properties={chartHeight:{key:"$chartHeight","default":"medium",values:[{value:"xsmall"},{value:"small"},{value:"medium"},{value:"large"},{value:"xlarge"}],createMarkup:authPropsGeneral.createMarkupRadio},chartStyle:function(controller,sel,data){this.name="chartStyle",this.key="$style",this["default"]="line",this._chartGetMeasureCountVisible=function(){var count=data.control.prototype.chartGetNbMeasures();return data.articleSelection.$seriesOptions&&Object.keys(data.articleSelection.$seriesOptions).forEach(function(key){data.articleSelection.$seriesOptions[key].isHidden&&count--}),count},this.values=[{value:"line"},{value:"bar"},{value:"column"}],this._chartGetMeasureCountVisible()===1&&this.values.push({value:"pie"}),this.createMarkup=authPropsGeneral.createMarkupRadio},chartOptions:function(controller,sel,data){var values=[{key:"isTitleHidden","default":!1}],valuesPie=[{key:"isLabelsHidden","default":!1}],valueslineBarColumn=[{key:"isLegendHidden","default":!1},{key:"isGridLineHidden","default":!1},{key:"isXLabelHidden","default":!1},{key:"isXLabelsHidden","default":!1},{key:"isYLabelHidden","default":!1},{key:"isYLabelsHidden","default":!1}];this.name="chartOptions",this.key="$chartOptions",this.values=values.concat(data.articleSelection.$style==="pie"?valuesPie:valueslineBarColumn),this.createMarkup=authPropsGeneral.createMarkupCheckboxes},chartInverted:{key:"$inverted","default":!1,values:[{value:!1},{value:!0}],createMarkup:authPropsGeneral.createMarkupRadio},seriesOptions:function(controller,sel,data){this.name="seriesOptions",this.key="$seriesOptions",this._serieProperties=[],this.initMarkup=function(controller,sel,data){this._protoValue=data.control.prototype.chartGetMeasureInfo(),this._orginalValue=data.articleSelection[this.key];var hasValue=this._orginalValue!=null;this._initProps(hasValue?this._mergeValue():this._protoValue)},this.createMarkup=function($$parent,prop,sel,data){this.$$parent=$$parent,this._accordionId=utils.UUID(),this.$$myAccordion=$('<div id="'+this._accordionId+'" ></div>'),$$parent.append(this.$$myAccordion);var self=this;self._serieProperties.forEach(function(prop){self._createSerieEntry(prop,sel,data)})},this.destroyMarkup=function(){this._serieProperties&&this._serieProperties.forEach(function(prop){prop.destroyMarkup&&prop.destroyMarkup()}),this._serieProperties=null,this.$$parent&&(this.$$parent.closest(".s-m-panel-auth-prop").remove(),this.$$parent=null),this.$$parent&&(this.$$myAccordion=null)},this._mergeValue=function(){var res={},self=this;return Object.keys(self._protoValue).forEach(function(key){res[key]=$.extend(!0,{},self._protoValue[key]),Object.keys(self._orginalValue&&self._orginalValue[key]||{}).forEach(function(prop){res[key][prop]=self._orginalValue[key][prop]})}),res},this._initProps=function(props,createEntry){var self=this;self._serieProperties=[],Object.keys(props).forEach(function(key){self._createSerieProperty(props[key],createEntry)})},this._createSerieProperty=function(prop,createEntry){var prop=new _SeriePanel(this,prop);this._serieProperties.push(prop),createEntry&&this._createSerieEntry(prop)},this._createSerieEntry=function(prop,sel,data){var id=prop.bind,$$parent,$$propGroup=$(_getHtml("serieTitle",{id:id,type:"child",label:prop.label,expanded:!1,parentId:this._accordionId}));$$parent=$$propGroup.find("#collapse_"+id),this.$$myAccordion.append($$propGroup),this.paramHiddenAdd($$parent,sel,data,prop),data.articleSelection.$style!=="pie"&&this.paramColorAdd($$parent,sel,data,prop)},this.paramHiddenAdd=function($$root,sel,data,prop){var opts={size:"small",onText:"True",offText:"False",onSwitchChange:this.onSwitchChange.bind(this,sel,data,prop)};this.componentBoolVal=authComponents.newComponent("switcher",opts),this._addParam(prop,"isHidden",this.componentBoolVal,!0,$$root,!1);var value=this._getPropValue(prop.bind,"isHidden")||!1;this.componentBoolVal.setValue(!value)},this.onSwitchChange=function(sel,data,prop,event,value){var seriesOptions=$.extend(!0,{},data.articleSelection[this.key]);seriesOptions[prop.bind]=seriesOptions[prop.bind]||{},seriesOptions[prop.bind].isHidden=!value,authPropsGeneral.setValue(this,sel,data,seriesOptions),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)},this.paramColorAdd=function($$root,sel,data,prop){var opts={color:"",palette:authPropsGeneral.getColorPalette(),dropUp:!0,onSelectColor:jsutils.bindFn(this.colorChange,this,sel,data,prop)};this.paletteColor=authComponents.newComponent("colorPalettePicker",opts);var param=this._addParam(prop,"color",this.paletteColor,!0,$$root,!1);this._getPropValue(prop.bind,"isHidden")&&param.hide(),this.paletteColor.setValue(this._getPropValue(prop.bind,"color"))},this._getPropValue=function(bind,property){var res=null;return this._serieProperties.forEach(function(prop){prop.bind===bind&&(res=prop[property])}),res},this.colorChange=function(value,sel,data,prop){var seriesOptions=$.extend(!0,{},data.articleSelection[this.key]);seriesOptions[prop.bind]=seriesOptions[prop.bind]||{},seriesOptions[prop.bind].color=value,authPropsGeneral.setValue(this,sel,data,seriesOptions),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)},this._addParam=function(prop,textId,component,title,$$parent,mandatory){var $$parent=$$parent||this.$$parent,$$title,$$root;if(title){var res=this._addSubSection(prop,textId,$$parent,mandatory);$$root=res.$$content,$$title=res.$$panel}else $$root=$$parent;if(component==null)throw new Error("unexpected null component");var $$panel;return component.createMarkup?(component.createMarkup($$root),this._serieProperties.push(component),$$panel=component.$$panel):component.jquery&&($$root.append(component),$$panel=component),$$title?$$title:$$panel},this._addSubSection=function(prop,textId,$$parent,mandatory){var $$panel=$(_getHtml("subtitle",{title:locale.text("auth.seriesOptions."+textId)+(mandatory===!0?"*":""),margin:10,id:"seriesColor"+prop.bind.smCapitalize()})).appendTo($$parent||this.$$parent);return{$$panel:$$panel,$$content:$$panel.children("div"),$$title:$$panel.children("p")}}},axisLabels:function(controller,sel,data){this.name="axisLabels",this.key="$axisLabels",this.labels=data.control.chartGetCurrentDrillLevel(),this.selectOpts=_getSelectOptions(data.control);if(this.selectOpts.length<=1)return null;this.createMarkup=function($$parent,prop,sel,data){var opts={value:_noValue,options:[{title:"",value:_noValue}].concat(this.selectOpts),onChange:this.onChange.bind(this,$$parent,data)};this.fieldLabelList=authComponents.newComponent("select",opts,"selectLabel"),this.fieldLabelList.createMarkup($$parent),data.articleSelection&&data.articleSelection[this.key]&&data.articleSelection[this.key][this.labels]&&this.fieldLabelList.setValue(data.articleSelection[this.key][this.labels])},this.onChange=function($$parent,data,event,componentSelect){var axisOptions=$.extend(!0,{},data.articleSelection[this.key]);componentSelect.getValue()===_noValue&&axisOptions[this.labels]?delete axisOptions[this.labels]:axisOptions[this.labels]=componentSelect.getValue(),authPropsGeneral.setValue(this,sel,data,axisOptions),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)}}},_getSelectOptions=function(control){var selectOpts=[],measures=control.prototype.chartGetMeasureInfo(),dataset=control.builder.getDataSet(),$properties=control.prototype.getProperties(function(prop,$bind){return dataset&&dataset.length>0?dataset[0][$bind]!==undefined&&measures[$bind]===undefined:!1});return Object.keys($properties).forEach(function(v){if(!$properties[v].$title){var ids=v.split("_");ids.lenght>=2&&ids[0]==="C"&&($properties[v].$title=($properties[v.substr(2)]?$properties[v.substr(2)].$title:"")+" ("+v+")")}$properties[v].$title&&selectOpts.push({title:$properties[v].$title,value:v})}),selectOpts};exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){data.control.chartNeedsHeight&&data.control.chartNeedsHeight()&&props.push(_properties.chartHeight),props.push(_properties.chartStyle,_properties.chartOptions,_properties.seriesOptions,_properties.axisLabels)}}),define("syracuse-tablet/html/js/authoring/arrays/authoringPropertiesArrays",["require","exports","module","syracuse-tablet/html/js/authoring/arrays/authArrayGeneral","syracuse-tablet/html/js/authoring/arrays/authArrayTable","syracuse-tablet/html/js/authoring/arrays/authArrayCard","syracuse-tablet/html/js/authoring/arrays/authArrayStatus","syracuse-tablet/html/js/authoring/arrays/authArrayCarousel","syracuse-tablet/html/js/authoring/arrays/authoringPropertiesChart"],function(require,exports,module){var authArrayGeneral=require("syracuse-tablet/html/js/authoring/arrays/authArrayGeneral"),authArrayTable=require("syracuse-tablet/html/js/authoring/arrays/authArrayTable"),authArrayCard=require("syracuse-tablet/html/js/authoring/arrays/authArrayCard"),authArrayStatus=require("syracuse-tablet/html/js/authoring/arrays/authArrayStatus"),authArrayCarousel=require("syracuse-tablet/html/js/authoring/arrays/authArrayCarousel"),authoringPropertiesChart=require("syracuse-tablet/html/js/authoring/arrays/authoringPropertiesChart");exports.initModuleProperties=function(dest){authArrayGeneral.initModuleProperties(dest),authArrayCard.initModuleProperties(dest),authArrayTable.initModuleProperties(dest),authArrayStatus.initModuleProperties(dest),authArrayCarousel.initModuleProperties(dest),authoringPropertiesChart.initModuleProperties(dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){sel.$$elmt.is(".s-m-control.s-m-chart")?(authArrayGeneral.getModuleProperties($$elmt,controller,props,sel,data),authoringPropertiesChart.getModuleProperties($$elmt,controller,props,sel,data)):(authArrayGeneral.getModuleProperties($$elmt,controller,props,sel,data),data.control.$display!=="separator"&&(data.control.$display==="card"?(data.control.isCarouselDisplay()&&authArrayCarousel.getModuleProperties($$elmt,controller,props,sel,data),authArrayCard.getModuleProperties($$elmt,controller,props,sel,data)):data.control.$display==="table"&&(data.control.prototype.isSingleArray()||authArrayTable.getModuleProperties($$elmt,controller,props,sel,data)),authArrayStatus.getModuleProperties($$elmt,controller,props,sel,data)))}}),define("syracuse-tablet/html/js/authoring/authoringPropertiesGauge",["require","exports","module","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"],function(require,exports,module){function _createMarkupGBorderValues($$parent,prop,sel,data){var ctx={};ctx.label_apply=locale.text("auth.g.label_apply");var idMin="s-m-auth-g-borders-min",idMax="s-m-auth-g-borders-max",isProperty=data.articleSelection.$gSetBorderValues==="bind"?!0:!1;if(isProperty){var valMin=data.articleSelection.$gauge.$bindMin,valMax=data.articleSelection.$gauge.$bindMax;ctx.label_tip=locale.text("auth.gBorderValues.label_tip.property"),ctx.label_min=locale.text("auth.gBorderValues.label_min.property"),ctx.label_max=locale.text("auth.gBorderValues.label_max.property");var optionsMin=[],optionsMax=[];optionsMin.push({option_value:"0",selected:valMin==="0"});if(!(data.control.controller.prototype&&data.control.controller.prototype.json&&data.control.controller.prototype.json.$properties)){_err(locale.text("auth.gBorderValues.err.prototype.title"),locale.text("auth.gBorderValues.err.prototype.msg"));return}$.each(data.control.controller.prototype.json.$properties,function(bind,value){_isGaugeValuePropertyType(value.$type)&&bind!==data.control.$bind&&bind!==data.articleSelection.$bind&&(optionsMin.push({option_value:bind,selected:valMin===bind}),optionsMax.push({option_value:bind,selected:valMax===bind}))}),ctx.markupMin=authHtml.execute("gaugeSelect",{id:idMin,options:optionsMin}),ctx.markupMax=authHtml.execute("gaugeSelect",{id:idMax,options:optionsMax})}else{var valMin,valMax;data.articleSelection.$gauge.$bindMin&&typeof data.articleSelection.$gauge.$bindMin=="string"?valMin=data.control.controller.dao.data[data.articleSelection.$gauge.$bindMin]:valMin=data.articleSelection.$gauge.$bindMin,data.articleSelection.$gauge.$bindMax&&typeof data.articleSelection.$gauge.$bindMax=="string"?valMax=data.control.controller.dao.data[data.articleSelection.$gauge.$bindMax]:valMax=data.articleSelection.$gauge.$bindMax,ctx.label_tip=locale.text("auth.gBorderValues.label_tip.input"),ctx.label_min=locale.text("auth.gBorderValues.label_min.input"),ctx.label_max=locale.text("auth.gBorderValues.label_max.input"),ctx.markupMin=authHtml.execute("gaugeBorderInput",{id:idMin,value:valMin}),ctx.markupMax=authHtml.execute("gaugeBorderInput",{id:idMax,value:valMax})}var html=authHtml.execute("authPanelPropertyGBorderValues",ctx),$$panel=$(html);$("button",$$panel).on("click",function(e){var err=!1,vvMin=$(e.target).parent().find("#"+idMin).val(),vvMax=$(e.target).parent().find("#"+idMax).val(),errTitle=locale.text("auth.gBorderValues.err.title");if(!isNaN(parseInt(vvMin),10)&&!isNaN(parseInt(vvMax),10))vvMax<vvMin&&(err=_err(errTitle,locale.text("auth.gBorderValues.err.msg.lowerMax",[vvMax,vvMin])));else{if(typeof vvMin!="string"||typeof vvMax!="string")err=_err(errTitle,locale.text("auth.gBorderValues.err.msg.bothString",[vvMin,vvMax]));vvMin===vvMax&&(err=_err(errTitle,locale.text("auth.gBorderValues.err.msg.samebind")))}err||(data.articleSelection.$gauge.$bindMin=vvMin,data.articleSelection.$gauge.$bindMax=vvMax,authPropsGeneral.notifyChangePropUI($$parent,sel,data))}),$$parent.append($$panel)}function _createMarkupGSegmentsNumbers($$parent,prop,sel,data){var value=data.articleSelection.$gauge.segments?data.articleSelection.$gauge.segments.length:"",options=[];for(var ii=0,jj=maxSegments+1;ii<jj;ii++){var opt={};ii==0?(opt.option_value=locale.text("auth.gSegmentsNumber.default"),opt.selected=value?!0:!1):(opt.option_value=ii,opt.selected=value==ii),options.push(opt)}var ctx={value:authHtml.execute("gaugeSelect",{id:"s-m-auth-g-segnumbers-txt",options:options}),label_apply:locale.text("auth.g.label_apply")},html=authHtml.execute("authPanelPropertyGSegmentsNumber",ctx),$$panel=$(html);$("button",$$panel).on("click",function(e){var vv=$(e.target).prev().val();if(value!=vv)if(vv&&isNaN(parseInt(vv,10)))_err(locale.text("auth.gSegmentsNumber.err.title"),locale.text("auth.gSegmentsNumber.err.msg.expectedNumber",[vv]));else{if(vv){data.articleSelection.$gauge.segments=data.articleSelection.$gauge.segments||[],data.articleSelection.$gauge.segments.length>vv&&data.articleSelection.$gauge.segments.splice(vv);for(var ii=0,jj=vv;ii<jj;ii++)data.articleSelection.$gauge.segments[ii]=data.articleSelection.$gauge.segments[ii]||{}}else data.articleSelection.$gauge.segments=null;authPropsGeneral.notifyChangePropUI($$parent,sel,data)}}),$$parent.append($$panel)}function _createMarkupGSegmentsConfig($$parent,prop,sel,data){var seg=data.articleSelection.$gauge.segments[prop.segIdx],idRoot="s-m-auth-seg-",idx=prop.segIdx,segInfo={};segInfo.id=idRoot+idx,segInfo.label_valstart=locale.text("auth.gSegmentsConfig.label_valstart"),segInfo.value_valstart=seg.valStart,segInfo.label_valend=locale.text("auth.gSegmentsConfig.label_valend"),segInfo.value_valend=seg.valEnd,segInfo.label_propstart=locale.text("auth.gSegmentsConfig.label_propstart"),segInfo.value_propstart=authHtml.execute("authPanelGaugeSlider",{id:segInfo.id+"-propstart",min:0,max:1,step:.1,value:seg.propStart}),segInfo.label_propend=locale.text("auth.gSegmentsConfig.label_propend"),segInfo.value_propend=authHtml.execute("authPanelGaugeSlider",{id:segInfo.id+"-propend",min:0,max:1,step:.1,value:seg.propEnd}),segInfo.label_color=locale.text("auth.gSegmentsConfig.label_color"),segInfo.value_color=seg.color,segInfo.label_apply=locale.text("auth.g.label_apply");var html=authHtml.execute("gaugeSegment",segInfo),$$panel=$(html),$$rangeInputArr=$("input.s-m-auth-g-range",$$panel);$$rangeInputArr.slider(),$$rangeInputArr.on("slide",function(slideEvt){var $$input=$(slideEvt.target),$$output=$$input.next();$$output.text(slideEvt.value)}),$$parent.append($$panel)}function _createMarkupApply($$parent,prop,sel,data){var html=authHtml.execute("authPanelButton",{label:locale.text("auth.gSegmentsConfigApply.label"),css:"s-m-auth-g-apply"}),$$panel=$(html);$("button",$$panel).on("click",function(e){var segs=[],$$segments=$(e.target).parent().parent().find(".s-m-auth-seg-slot");for(var ii=0,jj=$$segments.length;ii<jj;ii++){var $$seg=$($$segments[ii]),id=$$seg.attr("id"),segInfo={};segInfo.valStart=$("#"+id+"-valstart",$$seg).val(),segInfo.valEnd=$("#"+id+"-valend",$$seg).val(),segInfo.propStart=$("#"+id+"-propstart",$$seg).val(),segInfo.propEnd=$("#"+id+"-propend",$$seg).val(),segInfo.color=$("#"+id+"-color",$$seg).val(),segInfo.valStart=segInfo.valStart===""?null:segInfo.valStart,segInfo.valEnd=segInfo.valEnd===""?null:segInfo.valEnd,segInfo.propStart=segInfo.propStart===""?null:segInfo.propStart,segInfo.propEnd=segInfo.propEnd===""?null:segInfo.propEnd,segInfo.color=segInfo.color===""?null:segInfo.color;var vStart=segInfo.valStart,vEnd=segInfo.valEnd;if(vStart&&isNaN(parseInt(vStart.replace(".","").replace(",",""),10))){_err(locale.text("auth.gSegmentsConfig.err.title"),locale.text("auth.gSegmentsConfig.err.msg.expectedNumber",[locale.text("auth.gSegmentsConfig.label_valstart"),vStart]));return}if(vEnd&&isNaN(parseInt(vEnd.replace(".","").replace(",",""),10))){_err(locale.text("auth.gSegmentsConfig.err.title"),locale.text("auth.gSegmentsConfig.err.msg.expectedNumber",[locale.text("auth.gSegmentsConfig.label_valend"),vEnd]));return}segs.push(segInfo)}data.articleSelection.$gauge.segments=segs,authPropsGeneral.notifyChangePropUI($$parent,sel,data)}),$$parent.append($$panel)}function _destroySlider($$parent,prop){var $$slider=$$parent.find("input.s-m-auth-g-range");$$slider.length>0&&$$slider.slider&&$$slider.slider("destroy")}function _getModuleProperties($$elmt,controller,props,sel,data){if(_isGaugeValuePropertyType(data.type)){var isGauge;data.articleSelection.$numDisplay?isGauge=data.articleSelection.$numDisplay==="gauge":(isGauge=data.articleSelection.$gauge?!0:!1,data.articleSelection.$numDisplay=isGauge?"gauge":"normal"),props.push(_properties.numDisplay);if(isGauge){data.articleSelection.$gSetBorderValues||(data.articleSelection.$gauge.$bindMax?data.articleSelection.$gSetBorderValues=typeof data.articleSelection.$gauge.$bindMax=="string"?"bind":"value":data.articleSelection.$gSetBorderValues="default"),props.push(_properties.gSetBorderValues),data.articleSelection.$gSetBorderValues!=="default"&&props.push(_properties.gBorderValues),props.push(_properties.gSegmentsNumber);if(data.articleSelection.$gauge.segments&&data.articleSelection.$gauge.segments.length>0){for(var ii=0,jj=data.articleSelection.$gauge.segments.length;ii<jj;ii++){var name="gSegmentsConfig"+ii;_properties[name]={"default":"",createMarkup:_createMarkupGSegmentsConfig,type:"child-child",destroyMarkup:_destroySlider,label:locale.text("auth.gSegmentsConfig",[ii+1]),segIdx:ii,name:name},props.push(_properties[name])}props.push(_properties.gSegmentsConfigApply)}}}}function _isGaugeValuePropertyType(type){return type.indexOf("integer")>=0||type.indexOf("real")>=0||type.indexOf("decimal")>=0||type.indexOf("quantity")>=0?!0:!1}var locale=require("syracuse-tablet/html/js/helpers/locale"),authHtml=require("syracuse-tablet/html/js/authoring/authoringHtml"),authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),_err=authPropsGeneral.err,maxSegments=5,_properties={numDisplay:{key:"$numDisplay","default":"normal",values:[{value:"normal"},{value:"gauge"}],createMarkup:authPropsGeneral.createMarkupRadio,refreshMarkup:authPropsGeneral.refreshMarkupRadio},gSetBorderValues:{key:"$gSetBorderValues","default":"default",values:[{value:"default"},{value:"value"},{value:"bind"}],createMarkup:authPropsGeneral.createMarkupRadio,refreshMarkup:authPropsGeneral.refreshMarkupRadio,type:"child"},gBorderValues:{"default":"",createMarkup:_createMarkupGBorderValues,type:"child"},gSegmentsNumber:{"default":"",createMarkup:_createMarkupGSegmentsNumbers,type:"child"},gSegmentsConfig:{"default":"",createMarkup:_createMarkupGSegmentsConfig,type:"child",destroyMarkup:_destroySlider},gSegmentsConfigApply:{applyMarkup:_createMarkupApply}};exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=_getModuleProperties}),define("syracuse-tablet/html/js/authoring/authoringPropertiesCtrls",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/authoring/arrays/authoringPropertiesArrays","syracuse-tablet/html/js/authoring/authoringPropertiesGauge","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var authUtils=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),authoringPropertiesArrays=require("syracuse-tablet/html/js/authoring/arrays/authoringPropertiesArrays"),authoringPropertiesGauge=require("syracuse-tablet/html/js/authoring/authoringPropertiesGauge"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_modules=[authoringPropertiesArrays,authoringPropertiesGauge],_canBeEmpty=function(typ){switch(typ){case"integer":case"real":case"decimal":case"quantity":case"boolean":return!1;default:return!0}},_ctrlFieldsProperties={checkBoxDisplayAs:{key:"$displayAs","default":"icon",values:[{value:"icon"},{value:"text"}],createMarkup:authUtils.createMarkupRadio},isTitleHidden:{key:"$isTitleHidden","default":!1,values:[{value:!0},{value:!1}],createMarkup:authUtils.createMarkupRadio,type:"default"},hideIfEmpty:{key:"$hideIfEmpty","default":!1,values:[{value:!0},{value:!1}],createMarkup:authUtils.createMarkupRadio},isSignature:{key:"$isSignature","default":!1,values:[{value:!0},{value:!1}],createMarkup:authUtils.createMarkupRadio},labelPosition:{key:"$labelPosition","default":"left",values:[{value:"left"},{value:"top"}],createMarkup:authUtils.createMarkupRadio},labelAlign:{key:"$labelAlign","default":"left",values:[{value:"left"},{value:"center"},{value:"right"}],createMarkup:authUtils.createMarkupRadio,refreshMarkup:authUtils.refreshMarkupRadio},theme:{key:"$theme","default":"none",values:[{value:"none"},{value:"largetitle"}],createMarkup:authUtils.createMarkupRadio,toggleTheme:function($$elmt,theme){this.removeTheme($$elmt,theme),this.addTheme($$elmt,theme)},removeTheme:function($$elmt,theme){var e=$$elmt.get(0);if(!e.className||e.className.indexOf("s-m-theme")===-1)return;var newClassName=[];e.className.split(" ").forEach(function(c){c&&!c.smStartsWith("s-m-theme")&&newClassName.push(c)});if(e.className.length===0)return;e.className=newClassName.join(" ")},addTheme:function($$elmt,theme){if(!theme||theme==="none")return;$$elmt.addClass("s-m-theme-"+theme)}},refDescPosition:{key:"$refDescPosition","default":"right",values:[{value:"bottom"},{value:"right"},{value:"left"},{value:"top"},{value:"none"}],createMarkup:authUtils.createMarkupRadio},refDescFormat:{key:"$refDescFormat","default":"desc",values:[{value:"desc"},{value:"title"},{value:"desctitle"},{value:"titledesc"}],createMarkup:authUtils.createMarkupRadio},textHeight:{key:"$textHeight","default":"medium",values:[{value:"small"},{value:"medium"},{value:"large"},{value:"xlarge"}],createMarkup:authUtils.createMarkupRadio,refreshMarkup:authUtils.refreshMarkupRadio},emptyImageIcon:{key:"$emptyImageIcon","default":fontUtils.getEmptyImageDefIcon(),values:fontUtils.getEmptyImageIconList(),createMarkup:authUtils.createMarkupIconPicker,destroyMarkup:authUtils.destroyMarkupIconPicker},emptyIconSize:{key:"$emptyIconSize","default":"small",values:[{value:"small"},{value:"medium"},{value:"large"},{value:"xlarge"}],createMarkup:authUtils.createMarkupRadio,refreshMarkup:authUtils.refreshMarkupRadio},urlIcon:{key:"$urlIcon","default":fontUtils.getUrlDefIcon(),values:fontUtils.getUrlIconList(),createMarkup:authUtils.createMarkupIconPicker,destroyMarkup:authUtils.destroyMarkupIconPicker},urlIconSize:{key:"$urlIconSize","default":"small",values:[{value:"small"},{value:"medium"},{value:"large"},{value:"xlarge"}],createMarkup:authUtils.createMarkupRadio,refreshMarkup:authUtils.refreshMarkupRadio},imgHeight:{key:"$imgHeight","default":"small",values:[{value:"xsmall"},{value:"small"},{value:"medium"},{value:"large"},{value:"xlarge"}],createMarkup:authUtils.createMarkupRadio,refreshMarkup:authUtils.refreshMarkupRadio}};exports.initModuleProperties=function(dest){authUtils.initProperties(_ctrlFieldsProperties,dest),_modules.forEach(function(module){module.initModuleProperties(dest)})},exports.getModuleProperties=function($$elmt,controller,props,sel,data){var isField=sel.$$elmt.is(".s-m-control.s-m-field"),isArray=sel.$$elmt.is(".s-m-control.s-m-array");if(isField||isArray&&!controller.prototype.isQueryLikeFacet()){props.push(_ctrlFieldsProperties.isTitleHidden);var labelPosition=!0,alignment=!0;authUtils.getValueOrDefault(_ctrlFieldsProperties.isTitleHidden,sel,data)?labelPosition=!1:authUtils.getValueOrDefault(_ctrlFieldsProperties.labelPosition,sel,data)!=="top"&&(alignment=!1),labelPosition&&props.push(_ctrlFieldsProperties.labelPosition),alignment&&props.push(_ctrlFieldsProperties.labelAlign)}else sel.$$elmt.is(".s-m-control.s-m-chart-array")&&props.push(_ctrlFieldsProperties.isTitleHidden);isField?(_canBeEmpty(data.type)&&props.push(_ctrlFieldsProperties.hideIfEmpty),props.push(_ctrlFieldsProperties.theme),data.type==="boolean"&&props.push(_ctrlFieldsProperties.checkBoxDisplayAs),data.type==="reference"&&(props.push(_ctrlFieldsProperties.refDescFormat),props.push(_ctrlFieldsProperties.refDescPosition)),(data.type==="rtf"||data.type==="html"||data.type==="plain")&&props.push(_ctrlFieldsProperties.textHeight),data.type==="image"&&(props.push(_ctrlFieldsProperties.emptyImageIcon,_ctrlFieldsProperties.emptyIconSize,_ctrlFieldsProperties.imgHeight),props.push(_ctrlFieldsProperties.isSignature)),data.type==="string"&&data.control&&data.control.cssType==="s-m-url"&&props.push(_ctrlFieldsProperties.urlIcon,_ctrlFieldsProperties.urlIconSize),authoringPropertiesGauge.getModuleProperties($$elmt,controller,props,sel,data)):isArray&&(data.control.$display==="separator"&&props.push(_ctrlFieldsProperties.theme),authoringPropertiesArrays.getModuleProperties($$elmt,controller,props,sel,data))},exports.toggleTheme=function($$elmt,theme){if(!$$elmt)return;return _ctrlFieldsProperties.theme.toggleTheme($$elmt,theme)}}),define("syracuse-tablet/html/js/authoring/authoringPropertiesLayouts",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/authoring/authoringComponents","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/modals/modal"],function(require,exports,module){function _createMarkupInput($$parent,prop,sel,data){var value=authPropsGeneral.getValueOrDefault(prop,sel,data),html=authHtml.execute("authPanelPropertyInput",{id:"auth_opt_"+prop.name,value:value}),$$panel=$(html);$("input",$$panel).blur(function(){var value=$(this).val();authPropsGeneral.setValue(prop,sel,data,value),authPropsGeneral.notifyChangePropUI($$parent,sel,data)}),$$parent.append($$panel)}function _createMarkupInputLocale($$parent,prop,sel,data){var oldUUID=authPropsGeneral.getValueOrDefault(prop,sel,data),value;oldUUID=oldUUID||"";if(oldUUID.indexOf("{@")<0)value=oldUUID,oldUUID="";else{var loc=data.articlePage.$localization&&data.articlePage.$localization[locale.getCurrentLocale()];value=oldUUID.replace(/\{\@(\S+)\}/g,function(m,g){return loc&&loc[g]||m}),value===oldUUID&&(value=data.control.controller.prototype.resolveExpression(oldUUID,null,!0))}var html=authHtml.execute("authPanelPropertyInputLocale",{id:"auth_opt_"+prop.name,value:value,oldValue:value,oldUUID:oldUUID}),$$panel=$(html);$("input",$$panel).blur(function(){var value=$(this).val(),oldValue=$(this).attr("data-old-value"),oldUUID=$(this).attr("data-old-uuid");value===oldValue?(oldUUID.length>0&&(value=oldUUID),_setValue($$parent,prop,sel,data,value)):oldValue&&value&&_isLocalizationExits(data.articlePage.$localization,oldUUID)?modal.simpleConfirmPromise({message:locale.text("auth.msg.keepTranslation")}).then(function(result){result.action==="yes"&&(data.articleSelection.keepKey=oldUUID),_setValue($$parent,prop,sel,data,value)}):_setValue($$parent,prop,sel,data,value)}),$$parent.append($$panel)}function _setValue($$parent,prop,sel,data,value){authPropsGeneral.setValue(prop,sel,data,value),authPropsGeneral.notifyChangePropUI($$parent,sel,data)}function _isLocalizationExits($localization,uiId){if(!$localization||!uiId)return!1;var uuid=uiId.match(/\{\@(\S+)\}/),count=0;return Object.keys($localization).forEach(function(key){$localization[key][uuid[1]]&&$localization[key][uuid[1]]!==""&&count++}),count>1}function _createMarkupIcon($$parent,prop,sel,data){var ctx={group:"auth_opt_"+prop.name,options:[]},value=authPropsGeneral.getValueOrDefault(prop,sel,data);ctx.options.push({id:ctx.group+"_none",value:"",icon:"fa fa-remove"}),fontUtils.getTileIconList().forEach(function(v){var css=fontUtils.getIconByName(v);ctx.options.push({id:ctx.group+"_"+v,value:v,icon:css})});var html=authHtml.execute("authPanelPropertyRadioIcon",ctx),$$panel=$(html);$("label[data-s-m-auth-value='"+(""+value)+"']",$$panel).eq(0).button("toggle"),$("label",$$panel).on("click",function(e){var $$ct=$(e.currentTarget),value=$$ct.attr("data-s-m-auth-value");$$ct.eq(0).button("toggle"),authPropsGeneral.setValue(prop,sel,data,value),authPropsGeneral.notifyChangePropUI($$parent,sel,data)}),$$parent.append($$panel)}var authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),authHtml=require("syracuse-tablet/html/js/authoring/authoringHtml"),locale=require("syracuse-tablet/html/js/helpers/locale"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),authComponents=require("syracuse-tablet/html/js/authoring/authoringComponents"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),_properties={tileColor:{key:"$bgColor","default":"",values:authPropsGeneral.getColorValues(),colorChange:function(value,sel,data,prop){authPropsGeneral.setValue(this,sel,data,value?value.id:""),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)},createMarkup:function($$parent,prop,sel,data){var opts={color:"",palette:authPropsGeneral.getColorPalette(),dropUp:!1,onSelectColor:jsutils.bindFn(this.colorChange,this,sel,data,prop)};this.paletteColor=authComponents.newComponent("colorPalettePicker",opts),this.paletteColor.createMarkup($$parent),this.paletteColor.setValue(authPropsGeneral.getColorInfo(data.articleSelection.$bgColor))}},tileSize:{key:"$size","default":"medium",values:[{value:"small"},{value:"medium"},{value:"wide"},{value:"large"},{value:"full"},{value:"all"}],createMarkup:authPropsGeneral.createMarkupRadio},layoutTitle:function(controller,sel,data){this.name="layoutTitle",this.key="$title";var titleList=controller.prototype.getAllX3Title();if(!titleList||!titleList.length){this["default"]="",this.createMarkup=_createMarkupInputLocale;return}this.values=titleList,this.createMarkup=function($$parent,prop,sel,data){var opts={value:"",options:titleList,onChange:jsutils.bindFn(this.valueChange,this,sel,data,prop),dataSize:20};this.titleSelect=authComponents.newComponent("select",opts),this.titleSelect.createMarkup($$parent),data.articleSelection&&data.articleSelection.$title&&this.titleSelect.setValue(data.articleSelection.$title)},this.valueChange=function(event,titleSelect,sel,data,prop){authPropsGeneral.setValue(this,sel,data,titleSelect.getValue()),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)}},layoutCollapsible:{key:"$collapsible","default":"notcollapsible",values:[{value:"notcollapsible"},{value:"expanded"},{value:"collapsed"}],createMarkup:authPropsGeneral.createMarkupRadio},tileIcon:{key:"$icon","default":"",createMarkup:_createMarkupIcon},cellSize:function(controller,sel,data){this["default"]=4,this.name="cellSize",this.destroyMarkup=function(){this.$$parent=null,this._$$panel&&(this._$$panel.off(),this._$$panel=null)},this.createMarkup=function($$parent,prop,sel,data){var self=this;self.$$parent=$$parent;var values=["1","2","3","4","5","6","7","8","9","10","11","12"];self._sizes=[{prop:"widthAll",label:locale.text("auth.cellSize.widthAll"),"class":"s-m-auth-highlight-all"},{prop:"widthXs",label:locale.text("auth.cellSize.$widthXs"),"class":"s-m-auth-highlight-xs"},{prop:"widthSm",label:locale.text("auth.cellSize.$widthSm"),"class":"s-m-auth-highlight-sm"},{prop:"widthMd",label:locale.text("auth.cellSize.$widthMd"),"class":"s-m-auth-highlight-md"},{prop:"widthLg",label:locale.text("auth.cellSize.$widthLg"),"class":"s-m-auth-highlight-lg"}],self._$$panel=$(authHtml.execute("authPanelPropertyCellSize",{id:"auth_opt_"+prop.name,sizes:self._sizes,values:values,sameSize:locale.text("auth.cellSize.sameSize")}));var last="12";self._sizes.forEach(function(size){var value=data.articleSelection&&data.articleSelection["$"+size.prop];value=value||last,last=value,$("label[data-s-m-auth-prop='"+size.prop+"'][data-s-m-auth-value='"+value+"']",self._$$panel).button("toggle")}),self._$$panel.on("click","label.auth-btn-size-sel",jsutils.bindFn(self.onClickSize,this,sel,data)),self._$$panel.on("click",'input[type="checkbox"]',jsutils.bindFn(self.onClickSameSize,this,sel,data)),self._$$panel.appendTo($$parent),self.toggleSameSize($$parent,data.articleSelection.$sameSize)},this.onClickSize=function(e,sel,data){var self=this,$$ct=$(e.currentTarget);$$ct.eq(0).button("toggle"),self._sizes.forEach(function(size){$$ct=self._$$panel.find("label.active[data-s-m-auth-prop='"+size.prop+"']");if($$ct.length>0){var value=$$ct.attr("data-s-m-auth-value");data.articleSelection["$"+size.prop]=value}}),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)},this.onClickSameSize=function(e,sel,data){data.articleSelection.$sameSize=$(e.currentTarget).prop("checked"),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)},this.toggleSameSize=function($$parent,yes){yes=yes===!0,this._$$panel.find("section.widthAll").toggle(yes),this._$$panel.find("section:not(.widthAll)").toggle(!yes),this._$$panel.find('input[type="checkbox"]').prop("checked",yes)}},layoutTheme:function(controller,sel,data){if(data.articleSelection.$collapsible===undefined||data.articleSelection.$collapsible==="notcollapsible")return null;var level=data.control.$$elmt.parents(".s-m-stack").length;this.name="layoutTheme",this.key="$theme",this["default"]=String.fromCharCode(96+level),this.values=[],this.values.push({value:String.fromCharCode(96+level)}),this.values.push({value:"advanced"}),this.createMarkup=authPropsGeneral.createMarkupRadio}},_layoutProps={stack:[_properties.tileColor,_properties.layoutTitle,_properties.layoutCollapsible,_properties.layoutTheme],row:[_properties.tileColor],"hub-group":[_properties.layoutTitle],tile:[_properties.layoutTitle,_properties.tileColor,_properties.tileSize,,_properties.tileIcon],cell:[_properties.tileColor,_properties.cellSize]};exports.properties=_properties,exports.getModuleProperties=function($$elmt,controller,props,sel,data){Object.keys(_layoutProps).some(function(key){var cls="s-m-"+key;$$elmt.hasClass(cls)&&_layoutProps[key].forEach(function(p){props.push(p)})})},exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)}}),define("syracuse-tablet/html/js/authoring/page/authoringActions",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/authoring/authoringComponents","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),authComponents=require("syracuse-tablet/html/js/authoring/authoringComponents"),locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_templates={subtitle:'		<section class="s-m-prop-subtitle" {{#if id}}id="{{id}}"{{/if}} style="{{#if notHidden}}overflow:hidden;{{/if}}white-space:nowrap;text-overflow:ellipsis;{{#if margin}}margin-bottom:{{margin}}px;{{/if}}">			{{#if title}}<p>{{title}}</p>{{/if}}			<div></div>		</section>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[name],tmpl=_templates[key]=Handlebars.compile(tmpl)),tmpl(ctx)},_optionsProperties=["footerHeader","refreshPage","multiselection"],_noValue="$$novalue$$",_properties={actionSettings:function(controller,sel,data){this.name="actionSettings",this.label=null,this["default"]=null,this.key="$pageActionSettings",this._myProperties=[],this._page=data.page,this.controller=controller,this.initMarkup=function(controller,sel,data){if(!this._page)return;var $links=this._page.getProtoLinks();this._$links=[];if($links)for(var l in $links){var entry=$.extend({},!0,$links[l]);entry.name=l,entry.$title=this._page.prototype.resolveExpression(entry.$title)||entry.name,this._$links.push(entry)}var baseArticle=data.articleSelection||{};baseArticle=baseArticle[this.key]||[],this._actionList=[];var self=this;baseArticle.forEach(function(act){self.getActionProto(act.name)&&(act.$title=self._page.prototype.resolveExpression(act.$title)||entry.name,act.options=act.options||{},self._actionList.push($.extend({},!0,act)))})},this.getActionProto=function(name){var res=null;return this._$links.some(function(v,idx){if(v.name===name)return res=v,!0}),res},this.getActionInfo=function(actName){if(!actName)return null;var idx=-1,rec=null;return this._actionList.some(function(c,i){if(c.name===actName)return rec=c,idx=i,!0}),idx===-1?null:{record:rec,idx:idx}},this.destroyMarkup=function(){this._page=null,this.$$parent=null,this.controller=null,this._$links=null,this._myProperties&&(this._myProperties.forEach(function(p){p.destroyMarkup&&p.destroyMarkup()}),this._myProperties=null)},this.createMarkup=function($$parent,prop,sel,data){if(!this._page)return;this.$$parent=$$parent,this._page.prototype.isQuery()&&this.downloadOptAdd(sel,data),this.actionListAdd(sel,data),this.editSectionAdd(),this.checkAppendButton()},this.downloadOptAdd=function(sel,data){var value=authPropsGeneral.getValueOrDefault({key:"$allowDownload","default":!1},sel,data),opts={size:"small",onText:"True",offText:"False",onSwitchChange:this.onAllowDownloadChanged.bind(this,sel,data)};this.allowDownload=authComponents.newComponent("switcher",opts),this.$$allowDownload=this._addParam("allowDownload",this.allowDownload,!0),this.allowDownload.setValue(value)},this.onAllowDownloadChanged=function(sel,data,event,value){authPropsGeneral.setValue({key:"$allowDownload"},sel,data,value),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data)},this.actionListAdd=function(sel,data){var opts={css:"actionlist",doAction:jsutils.bindFn(this.listCallBackAction,this,sel,data),appendTitle:locale.text("auth.actionSettings.append")};this.listActionDisplayer=authComponents.newComponent("editableList",opts),this._addParam("actionlist",this.listActionDisplayer,!0),this.updateActionList()},this.editSectionAdd=function(){this.editActionSection=this._addSubSection("editaction"),this.editActionSection.$$panel.hide(),this.editActionSection.$$content.css("padding-left","7px"),this.editActionSection.$$title.css("font-weight","bold");var $$rootComponents=this.editActionSection.$$content;this.paramActionAdd($$rootComponents),this.paramOptionsAdd($$rootComponents),this.paramIconAdd($$rootComponents)},this.checkAppendButton=function(){if(!this.listActionDisplayer)return;this.listActionDisplayer.disableAppendBtn(this._actionList.length>=this._$links.length)},this.listCallBackAction=function(action,recordId,listActionDisplayer,sel,data){if(action==="append")return this._updateParams(null),!0;if(action==="cancel")return this._resetEditParams(),this.editActionSection.$$panel.hide(),this.checkAppendButton(),!0;var recInfo=this.getActionInfo(recordId);if(action==="validate"){var newRecord=this.validateRecord(!0);return newRecord?(recInfo==null?this._actionList.push(newRecord):(this._actionList.splice(recInfo.idx,1),this._actionList.splice(recInfo.idx,0,newRecord)),this.updateActionList(!0,sel,data),this._resetEditParams(),this.checkAppendButton(),!0):!1}if(action==="deleteItem")return recInfo?(this._actionList.splice(recInfo.idx,1),this.checkAppendButton(),this.updateActionList(!0,sel,data),!0):!1;if(action==="editItem")return recInfo?(this._updateParams(recInfo.record),!0):!1},this.validateRecord=function(errorMsg){var self=this,rec={},_fail=function(msg,params){if(errorMsg===!0){var text=locale.text("auth.actionSettings.invalid"+(msg||""),params);self.listActionDisplayer.toggleMessage(text,"error"),setTimeout(function(){self.listActionDisplayer.toggleMessage(null)},2500)}return null};rec.name=this.actionSelector.getValue();if(!rec.name||rec.name==_noValue)return _fail();rec.icon=this.paletteIcon.getValue();var info=this.getActionProto(rec.name);if(!info)return _fail(".action",[rec.name]);rec.$title=info.$title,rec.options=this.optionsList.getValue();var nbChecked=0;for(var p in rec.options)rec.options[p]===!0&&nbChecked++;return nbChecked===0&&!rec.icon?_fail(".empty"):rec.options.footerHeader&&!rec.icon?_fail(".icon"):rec},this._updateParams=function(record){var edit=record!=null;record=record||{},this.editActionSection.$$panel.show(),this.paramActionUpdate(record.name||_noValue,!0,record.options),this.optionsList.updateValue(record.options),this.paletteIcon.setValue(record.icon)},this._resetEditParams=function(){this.editActionSection.$$panel.hide(),this.actionSelector.setValue(_noValue)},this.updateActionList=function(updateAuthoring,sel,data){var clearBefore=!0;clearBefore&&this.listActionDisplayer.clear();var records=[];this._actionList.forEach(function(c){records.push({titleHtml:"<span>"+(c.$title||c.name)+"</span>",id:c.name})}),this.listActionDisplayer.insertRecords(records);if(updateAuthoring==1){var value=[];this._actionList.forEach(function(c){c=$.extend({},!0,c),value.push(c)}),authPropsGeneral.setValue(this,sel,data,value),authPropsGeneral.notifyChangePropUI(this.$$parent,sel,data);return}},this.paramActionAdd=function($$root){var opts={css:"actionName",onChange:jsutils.bindFn(this.onParamActionSelect,this),isHidden:!1};this.actionSelector=authComponents.newComponent("select",opts),this._addParam("action",this.actionSelector,!0,$$root,!0),this.paramActionUpdate(_noValue)},this.onParamActionSelect=function(event,prop){},this.paramActionUpdate=function(value,forceAddValue,options){var selectOpts=[{title:locale.text("auth.actionSettings.novalue"),value:_noValue}],self=this;this._$links.forEach(function(v,idx){if(options&&options.multiselection===!0&&v.name.smStartsWith("$"))return;(forceAddValue===!0&&value===v.name||!self.getActionInfo(v.name))&&selectOpts.push({title:v.$title,value:v.name})}),this.actionSelector.update(selectOpts,value||_noValue)},this.paramOptionsAdd=function($$root){var opts={list:[],onClick:jsutils.bindFn(this.onClickOptions,this)},self=this;_optionsProperties.forEach(function(x){if(x==="multiselection"&&!self._page.prototype.isQuery())return;opts.list.push({id:x,label:locale.text("auth.actionSettings."+x)})}),this.optionsList=authComponents.newComponent("checkboxList",opts),this._addParam("options",this.optionsList,!0,$$root,!1)},this.onClickOptions=function(id,checked){this.paramActionUpdate(this.actionSelector.getValue(),!0,this.optionsList.getValue())},this.paramIconAdd=function($$root){var opts={palette:fontUtils.getPageActionIcon(),dropUp:!0};this.paletteIcon=authComponents.newComponent("iconPalettePicker",opts),this._addParam("icon",this.paletteIcon,!0,$$root,!1)},this._addParam=function(prop,component,title,$$parent,mandatory){var $$parent=$$parent||this.$$parent,$$title,$$root;if(title){var res=this._addSubSection(prop,$$parent,mandatory);$$root=res.$$content,$$title=res.$$panel}else $$root=$$parent;if(component==null)throw new Error("unexpected null component ["+prop+"]");var $$panel;return component.createMarkup?(component.createMarkup($$root),this._myProperties.push(component),$$panel=component.$$panel):component.jquery&&($$root.append(component),$$panel=component),$$title?$$title:$$panel},this._addSubSection=function(textId,$$parent,mandatory){var $$panel=$(_getHtml("subtitle",{title:locale.text("auth.actionSettings."+textId)+(mandatory===!0?"*":""),margin:10,id:"actionSettings"+textId.smCapitalize()})).appendTo($$parent||this.$$parent);return{$$panel:$$panel,$$content:$$panel.children("div"),$$title:$$panel.children("p")}}}};exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){props.push(_properties.actionSettings)}}),define("syracuse-tablet/html/js/authoring/page/authoringChartDetail",["require","exports","module","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"],function(require,exports,module){var authPropsGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),_properties={chartDetailDisplay:{key:"$display","default":"bothSideToSide",values:[{value:"chartOnly"},{value:"arrayOnly"},{value:"bothSideToSide"}],createMarkup:authPropsGeneral.createMarkupRadio}};exports.initModuleProperties=function(dest){authPropsGeneral.initProperties(_properties,dest)},exports.getModuleProperties=function($$elmt,controller,props,sel,data){props.push(_properties.chartDetailDisplay)}}),define("syracuse-tablet/html/js/authoring/authoringPropertiesPages",["require","exports","module","syracuse-tablet/html/js/authoring/page/authoringActions","syracuse-tablet/html/js/authoring/page/authoringChartDetail"],function(require,exports,module){var authoringActions=require("syracuse-tablet/html/js/authoring/page/authoringActions"),authoringChartDetail=require("syracuse-tablet/html/js/authoring/page/authoringChartDetail"),_getPage=function($$elmt,control){return control&&control.isVignette()?control.getPage():$$elmt&&$$elmt.is(".s-m-page")?$$elmt.smPageController():null},_modules=[authoringActions,authoringChartDetail];exports.initModuleProperties=function(dest){_modules.forEach(function(module){module.initModuleProperties(dest)})},exports.getModuleProperties=function($$elmt,controller,props,sel,data){data.page=_getPage($$elmt,data.control);if(data.page==null)return;data.page.state.type==="chartdetail"&&authoringChartDetail.getModuleProperties($$elmt,controller,props,sel,data),authoringActions.getModuleProperties($$elmt,controller,props,sel,data)}}),define("syracuse-tablet/html/js/authoring/authoringProperties",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/authoring/authoringPropertiesGeneral","syracuse-tablet/html/js/authoring/authoringPropertiesCtrls","syracuse-tablet/html/js/authoring/authoringPropertiesLayouts","syracuse-tablet/html/js/authoring/authoringPropertiesPages"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),authoringPropertiesGeneral=require("syracuse-tablet/html/js/authoring/authoringPropertiesGeneral"),authoringPropertiesCtrls=require("syracuse-tablet/html/js/authoring/authoringPropertiesCtrls"),authoringPropertiesLayouts=require("syracuse-tablet/html/js/authoring/authoringPropertiesLayouts"),authoringPropertiesPages=require("syracuse-tablet/html/js/authoring/authoringPropertiesPages"),_propsModules=[authoringPropertiesPages,authoringPropertiesLayouts,authoringPropertiesCtrls,authoringPropertiesGeneral],_properties;exports.initProperties=function(force){if(_properties!=null&&force!=1)return;_properties={},_propsModules.forEach(function(module){module.initModuleProperties(_properties)})},exports.getAllProperties=function(){return _properties},exports.getProperties=function(sel,data){var $$elmt=sel.$$elmt,props=[],controller=$$elmt.is(".s-m-page")?$$elmt.smPageController():utils.findController($$elmt);return _propsModules.forEach(function(module){module.getModuleProperties($$elmt,controller,props,sel,data)}),props.forEach(function(p,idx){if(typeof p=="function"){var prop=props[idx]=new p(controller,sel,data);prop.initMarkup&&prop.initMarkup(controller,sel,data),authoringPropertiesGeneral.initProperty(prop)}}),props},exports.getPropertiesLayouts=function(){return authoringPropertiesLayouts}}),define("syracuse-tablet/html/js/authoring/authoringHelpers",["require","exports","module","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/authoring/authoringSData","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/authoring/authoringProperties","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/authoring/authoringVal","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/ui/uiUtils"],function(require,exports,module){var jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),locale=require("syracuse-tablet/html/js/helpers/locale"),authoringSData=require("syracuse-tablet/html/js/authoring/authoringSData"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),authProps=require("syracuse-tablet/html/js/authoring/authoringProperties"),authHtml=require("syracuse-tablet/html/js/authoring/authoringHtml"),authVal=require("syracuse-tablet/html/js/authoring/authoringVal"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),uiutils=require("syracuse-tablet/html/js/ui/uiUtils"),_openPanels=[];exports.triggerResizeInternal=function(opts){uiutils.triggerResizeInternal(opts)},exports.selectElement=function(sel){$(".s-m-auth-selected").removeClass("s-m-auth-selected");var $$elmt=$("#"+sel.id,$("#s-m-app-id")),domItem=$$elmt[0]},exports.findControl=function($$ctrl){return utils.findControl($$ctrl)},exports.getSelectionById=function(id){var $$item=$("#s-m-app-id #"+id);return $$item.length<=0?null:{$$elmt:$$item,id:id}},exports.getSelectionData=function(sel){if(!sel||!sel.id)return null;var app=globals.getApplication(),article=$.extend(!0,{},app.currentPage.article),title,type,control=exports.findControl(sel.$$elmt);control&&control.isControl()?(title=control.prototype&&control.prototype.data("$title"),title?title+=" ("+control.$bind+")":title=control.$bind,type=control.typeName):(title=locale.text("auth.label_layout"),type=sel.$$elmt.attr("id"),type=type.replace(/\d/g,""));var articleSelection=control&&control.getArticle()||app.currentPage.article;return{articlePage:article,articleSelection:articleSelection,title:title,type:type,control:control}};var _PropertyPanel=function($$parent){this.$$parent=$$parent,this.destroyHandlers=[],this.propInstances=[],this.destroy=function(){this.destroyHandlers.forEach(function(h){h&&h()}),this.propInstances.forEach(function(p){p.destroyMarkup&&p.destroyMarkup()}),this.destroyHandlers=this.propInstances=null,this.$$parent&&this.$$parent.empty()},this.addDestroyHandler=function($$content,prop){this.destroyHandlers.push(jsutils.bindFn(prop.destroyMarkup,null,$$content,prop))},this.addPropInstance=function(prop){this.propInstances.push(prop)}};exports.createPropertyPanel=function($$parent,sel,data){var props=authProps.getProperties(sel,data);if(!props)return;var propertyPanel=new _PropertyPanel($$parent),$$accord=$('<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">'),id,num=0,toDestroy=[],article=sel.articleSelection,topButtons=[];return props.forEach(function(prop){id="auth_prop_"+prop.name;var expanded=!1;if(prop.createMarkup){var $$block=$(authHtml.execute("authPanelPropertyGroup",{id:id,expanded:expanded,label:prop.label,type:prop.type||"default"})),$$content=$("#collapse_"+id,$$block);prop.createMarkup($$content,prop,sel,data),$.isPlainObject(prop)&&prop.destroyMarkup?propertyPanel.addDestroyHandler($$content,prop):prop.constructor&&propertyPanel.addPropInstance(prop),prop.isHidden===!0&&$$block.hide()}else if(prop.createButtonMarkup)topButtons.unshift(prop);else if(prop.applyMarkup)prop.applyMarkup($$accord,prop,sel,data);else if(prop.isSeparatror)var $$block=$(authHtml.execute("authPanelPropertySeperator",{id:id,expanded:expanded,label:prop.label,type:prop.type||"default"}));$$accord.append($$block),num++}),topButtons.forEach(function(prop){notifications.publish("sm.auth.top.button","add",prop)}),$$parent.append($$accord),_openPanels.forEach(function(id){$$parent.find("#"+id).collapse({toggle:!0})}),propertyPanel},exports.refreshPropertyPanels=function(sel,data){var props=authProps.getProperties(sel,data);if(!props)return;props.forEach(function(prop){if(prop.refreshMarkup){var id="#collapse_auth_prop_"+prop.name,$$panel=$(id);prop.refreshMarkup($$panel,prop,sel,data)}})},exports.savePanelStates=function(){_openPanels=[],$(".collapse.in","#authPanelControlSimple").each(function(){_openPanels.push($(this).attr("id"))})},exports.saveAuthoring=function(page,opts){var segs=page.split("."),pageData={application:segs[0],contract:segs[1],representation:segs[2],facet:segs[3],roles:[],users:[],endpoints:[],saveAsOption:opts.saveAs,variantCode:opts.code,variantTitle:opts.title,variantDescription:opts.description,article:opts.article};return authoringSData.getPageVariants({application:segs[0],contract:segs[1],representation:segs[2],facet:segs[3]}).then(function(variants){variants&&variants.some(function(v){var match=v.title===opts.title&&v.code===opts.code&&v.description===opts.description;opts.saveAs==="factory_variant"&&v.$factory!==!0?match=!1:opts.saveAs==="global_variant"&&v.$factory===!0?match=!1:opts.saveAs==="personal_copy"&&v.$factory===!0&&(match=!1),match&&(pageData.variant=v.$uuid)})}).then(function(){return authoringSData.savePageDefinition(pageData)}).then(function(data){modal.diagnoses(locale.text("auth.panel.save_ok_title"),{$diagnoses:data.diags})}).fail(function(e){modal.diagnoses(locale.text("auth.panel.save_error_title"),e)})},exports.rebuildArticleByPageStruct=function(page,states){function _copyLocNode(uuid){Object.keys($localization).forEach(function(lang){var texts=$localizationNew[lang]=$localizationNew[lang]||{};texts[uuid]=$localization[lang][uuid]})}function _findLocMatch(text){var oldTexts=$localization[curLang]||{},match;return Object.keys(oldTexts).some(function(uuid){return oldTexts[uuid]===text?(match=uuid,!0):!1}),match}function _checkLocalization(nodeArticle){var propsPerNode=["$title"];propsPerNode.forEach(function(key){var text=nodeArticle[key];nodeArticle.$theme==="advanced"&&(text="",nodeArticle[key]="");if(text){var uuid=text.match(/\{\@(\S+)\}/);if(uuid&&uuid[1])_copyLocNode(uuid[1]);else{uuid=_findLocMatch(text);if(!uuid){var keepKey=nodeArticle.keepKey?nodeArticle.keepKey.match(/\{\@(\S+)\}/):null;uuid=keepKey?keepKey[1]:utils.UUID(),keepKey&&(_copyLocNode(uuid),delete nodeArticle.keepKey);var texts=$localizationNew[curLang]=$localizationNew[curLang]||{};texts[uuid]=text}else _copyLocNode(uuid);nodeArticle[key]="{@"+uuid+"}"}}})}function _walkNode(article,node){var nodeArticle=node.getAuthArticle();_checkLocalization(nodeArticle);if(states){var state=node.getAuthState(nodeArticle.$isDirty||{});if(state){var path=node.getPathInTree();path=path.join("."),states[path]=state}}delete nodeArticle.$isDirty,Object.keys(nodeArticle).forEach(function(key){article[key]=nodeArticle[key]});if(node.isVignette()){var page=node.getPage();if(page){var rootLayout=page.rootLayout;article.$article={},_walkNode(article.$article,rootLayout)}}else node.children&&node.children.length>0&&(article.$items=[],node.children.forEach(function(child){var childArticle={};article.$items.push(childArticle),_walkNode(childArticle,child)}))}var curLang=locale.getCurrentLocale(),rootLayout=page.rootLayout,$localization=page.article&&page.article.$localization||{},$localizationNew={},jsonArticlePage={};utils.authCopyPageProperties(page.article,jsonArticlePage),_walkNode(jsonArticlePage,rootLayout),jsonArticlePage.$localization=$localizationNew;var articleJSON=authVal.toSortedJSON(jsonArticlePage);return articleJSON}}),define("syracuse-tablet/html/js/authoring/authoringPanelRight",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/authoring/authoringHtml"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),authHelpers=require("syracuse-tablet/html/js/authoring/authoringHelpers"),authHtml=require("syracuse-tablet/html/js/authoring/authoringHtml");exports.Panel=utils.defineClass(function AuthoringPanelRight(){var self=this;self.$$panel=null,self.topButtons=[]},null,{show:function(){var self=this;self._ensurePanel(),self._subscribe(),self.$$panel.show(),self.$$splitter.show(),self._minWidth=4*globals.getSiteLayout().splitterWidth,self._initDefaults(),$(".btn",self.$$panelSave).eq(0).button("toggle"),$('.nav-pills a[href="#authPanelControl"]').tab("show")},hide:function(){var self=this;self._ensurePanel(),self.$$panel.hide(),self.$$splitter.hide(),self._unscribe()},_subscribe:function(){var self=this;notifications.subscribe(self,["sm.main.layout.changed"]),notifications.subscribe(self,["sm.auth.set.page"]),notifications.subscribe(self,["sm.auth.set.selection"]),notifications.subscribe(self,["sm.auth.change.prop.ui"]),notifications.subscribe(self,["sm.auth.top.button"])},_unscribe:function(){var self=this;notifications.unsubscribe(self,["sm.main.layout.changed"]),notifications.unsubscribe(self,["sm.auth.set.page"]),notifications.unsubscribe(self,["sm.auth.set.selection"]),notifications.unsubscribe(self,["sm.auth.change.prop.ui"]),notifications.unsubscribe(self,["sm.auth.top.button"])},notifMainLayoutChanged:function(){var self=this;self.$$panel.find(".tab-content").css({height:self.$$panel.height()-100})},_ensurePanel:function(){var self=this;if(this.$$panel)return;var ctx={label_design:locale.text("auth.panel.label_design")};self.$$panel=$("#s-m-auth-panel-right-id"),$(authHtml.execute("authPanelRightStructure",ctx)).appendTo(self.$$panel),self.$$panelRightStruct=self.$$panel.find("#authPanelControlTitle"),self._getDomObjects(),self._initSplitter(),self._initDomEvents()},_getDomObjects:function(){var self=this;self.$$panelControlSimple=$("#authPanelControlSimple"),self.$$panelControlExpert=$("#authPanelControlExpert"),self.$$authPageName=$("#authPageName"),self.$$panelControlTitle=$("#authPanelControlTitle"),self.$$panelControlType=$("#authPanelControlType"),self.$$panelEdit=$("#authPanelEdit")},_initDomEvents:function(){var self=this},_initDefaults:function(){var self=this;self.$$panelControlTitle.text(""),self.$$panelControlType.text(locale.text("auth.panel.label_design")),self.destroyPropertyPanel()},destroyPropertyPanel:function(context){if(this.topButtons){var preserveButtons=[];this.topButtons.forEach(function(prop){prop.destroyButtonMarkup&&prop.destroyButtonMarkup(context)===!1&&preserveButtons.push(prop)}),this.topButtons=preserveButtons}this._propertyPanel&&(this._propertyPanel.destroy(),this._propertyPanel=null)},notifAuthSetPage:function(page){var self=this;self.currentPageName=page.state.authoringName,self.currentPageId=page.id,self.$$authPageName.text(self.currentPageName),self._initDefaults();var saveAttr;page.state.type=="carddesign"?saveAttr="saveCardDesign":page.state.type=="chartdetail"&&(saveAttr="saveChartDetail"),saveAttr?$("#auth-btn-save-id").attr("data-save-type",saveAttr):$("#auth-btn-save-id").removeAttr("data-save-type")},notifAuthChangePropUi:function(articlePage){var self=this},notifAuthSetSelection:function(id){var self=this;self.$$panelControlTitle.text(""),self.$$panelControlType.text(locale.text("auth.panel.label_design"));var sel=id?authHelpers.getSelectionById(id):null;authHelpers.savePanelStates(),self.destroyPropertyPanel({origin:"selection"});if(!sel)return;var data=authHelpers.getSelectionData(sel);if(data){self.$$panelControlTitle.text(data.title||""),self.$$panelControlType.text(locale.text("auth.panel.label_design")+" "+data.type||"");var article=data.articleSelection;article&&(this._propertyPanel=authHelpers.createPropertyPanel(self.$$panelControlSimple,sel,data))}},getPageArticle:function(){return this.getPage().article},getPage:function(){var page=$("#s-m-app-id").find("#"+this.currentPageId).smPageController();if(!page)throw new Error("Page not found "+this.currentPageId);if(!page.isActive())throw new Error("Page not active "+this.currentPageId);return page},_initSplitter:function(){var self=this;self.$$splitter=$("#s-m-auth-splitter-right-id"),self.$$splitter.draggable({axis:"x",stop:function(e,ui){var $$splitter=$(this),pos=$$splitter.position(),width=$$splitter.width(),panelRightSize=Math.max(self._minWidth,$(window).width()-pos.left-width);$$splitter.css({left:$(window).width()-panelRightSize-width+"px"}),authHelpers.triggerResizeInternal({layout:{authPanelRight:{width:panelRightSize}}})}})},notifAuthTopButton:function(action,prop){if(!this.$$panelRightStruct||!prop.createButtonMarkup)return;this.topButtons.push(prop),this.$$panelRightStruct.after(prop.createButtonMarkup(this.getPage()))}})}),define("syracuse-tablet/html/js/authoring/authoringDrag",["require","exports","module","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){function _updateHoverStack(){var newList=[];$.each(_$$lastElements,function(idx,$$last){$$last.removeClass("s-m-top-stack"),$$last.hasClass("s-m-auth-hover-droptarget")&&newList.push($$last)});var $$last=newList[newList.length-1];return $$last&&$$last.addClass("s-m-top-stack"),_$$lastElements=newList,$$last}function _updateDragHelper($$drop,$$helper,$$draggable){var data=_getDropData($$drop,$$draggable),allowed=_isDropAllowed(data);$$helper.removeClass("drop_move"),$$helper.removeClass("drop_add"),$$helper.removeClass("drop_disabled");if(!allowed){$$helper.addClass("drop_disabled"),$("#s-m-auth-drag-helper-desc-id",$$helper).text("");return}var desc="",title;data.moveBeforeCtrl?title=_controlTitle(data.moveBeforeCtrl):title=_controlTitle(data.toContainer);switch(data.action){case"add_layout":data.moveBeforeCtrl?desc=locale.text("auth.drag.add.before",[title]):desc=locale.text("auth.drag.add.intoend",[title]),$$helper.addClass("drop_add");break;case"add_bind":data.moveBeforeCtrl?desc=locale.text("auth.drag.add.before",[title]):desc=locale.text("auth.drag.add.intoend",[title]),$$helper.addClass("drop_add");break;case"move_ctrl":data.moveBeforeCtrl?desc=locale.text("auth.drag.move.before",[title]):desc=locale.text("auth.drag.move.intoend",[title]),$$helper.addClass("drop_move");break;case"move_layout":data.moveBeforeCtrl?desc=locale.text("auth.drag.move.before",[title]):desc=locale.text("auth.drag.move.intoend",[title]),$$helper.addClass("drop_move")}$("#s-m-auth-drag-helper-desc-id",$$helper).text(desc)}function _isDropAllowed(data){if(!data.toType)return!1;var targetLayout,container;data.ctrl&&(data.container=data.ctrl.parent),data.toCtrl&&data.toCtrl.isLayout()?(container=data.toCtrl,targetLayout=data.toType):data.toCtrl&&(container=data.toCtrl.parent,targetLayout=container.$type,data.moveBeforeCtrl=data.toCtrl),data.toContainer=container;if(data.action==="add_layout"){if(data.bind=="stack"){if(targetLayout!=="stack"&&targetLayout!=="cell"&&targetLayout!=="tile")return!1}else if(data.bind=="group"){if(targetLayout!=="stack"&&targetLayout!=="hub")return!1}else if(data.bind=="tile"&&targetLayout!=="row"&&targetLayout!=="hubGroup"&&targetLayout!=="stack"&&targetLayout!=="hub")return!1;return!0}if(data.action==="add_bind"){if(data.parent!=data.toParent)return!1;if(targetLayout==="stack"||targetLayout==="tile"||targetLayout==="cell"||targetLayout==="hubGroup")return!0}if(data.action==="move")if(data.ctrl&&!data.ctrl.isLayout()){data.action="move_ctrl";if(data.parent!=data.toParent)return!1;if(targetLayout==="stack"||targetLayout==="tile"||targetLayout==="cell"||targetLayout==="hubGroup")return!0}else if(data.ctrl&&data.ctrl.isLayout()){data.action="move_layout";if(data.type=="stack"){if(targetLayout!=="stack"&&targetLayout!=="cell"&&targetLayout!=="tile")return!1}else if(data.type=="tile"){if(targetLayout!=="hubGroup")return!1}else if(data.type=="cell"){if(targetLayout!=="row")return!1}else if(data.type=="row"){if(targetLayout!=="stack"&&targetLayout!=="cell"&&targetLayout!=="tile")return!1}else if(data.type=="hubGroup"&&targetLayout!=="hub")return!1;var $$dropToChildren=data.toCtrl.$$elmt.closest("#"+data.ctrl.id);if($$dropToChildren.length>0)return!1;var vignetteScopeOk=!0,$$fromVignette=data.ctrl.$$elmt.closest(".s-m-control.s-m-vignette"),$$toVignette=data.toCtrl.$$elmt.closest(".s-m-control.s-m-vignette");return $$fromVignette.length!==$$toVignette.length?vignetteScopeOk=!1:$$toVignette.length===0?vignetteScopeOk=!0:$$fromVignette.length===1&&$$toVignette.length===1&&($$fromVignette.attr("id")===$$toVignette.attr("id")?vignetteScopeOk=!0:vignetteScopeOk=!1),vignetteScopeOk}return!1}function _getDropData($$drop,$$draggable){var action,fromId,toId,bind,parent;action=$$draggable.attr("data-auth-drag-action");switch(action){case"move":fromId=$$draggable.attr("data-ctrl-id");break;case"add_bind":bind=$$draggable.attr("data-auth-bind"),parent=$$draggable.attr("data-auth-bind-parent"),parent=parent===""?null:parent;break;case"add_layout":bind=$$draggable.attr("data-auth-bind");break;default:action="move",fromId=$$draggable.attr("id")}var ctrl,$$ctrl;if(fromId&&fromId.length>0){$$ctrl=$("#"+fromId),ctrl=authHelpers.findControl($$ctrl);var v=ctrl&&ctrl.controller.getParentVignette();v&&(parent=v.$bind)}toId=$$drop.attr("data-ctrl-id"),toId&&toId.length>0?$$ctrl=$("#"+toId):(toId=$$drop.attr("id"),$$ctrl=$$drop);var toParent,toCtrl=authHelpers.findControl($$ctrl);if(toCtrl&&toCtrl.controller.isVignette){var v=toCtrl.controller.getParentVignette();v&&(toParent=v.$bind)}return!toCtrl&&$$ctrl.is(".s-m-page,.s-m-full")&&(toCtrl=globals.getApplication().currentPage.rootLayout),{action:action,bind:bind,ctrl:ctrl,type:ctrl&&ctrl.$type,parent:parent,fromId:fromId,toId:toId,toType:toCtrl&&toCtrl.$type,toCtrl:toCtrl,toParent:toParent}}function _addLayout(data){var layoutType="stack",toContainer=data.toContainer,parent;switch(data.bind){case"group":data.toType=="hub"?layoutType="hubGroup":layoutType="row";break;case"tile":data.toType=="hubGroup"?layoutType="tile":data.toType=="row"?layoutType="cell":data.toType=="stack"?(parent=ctrlFactory.createLayout(data.toCtrl.controller,toContainer,{$layoutType:"row"},{}),layoutType="cell",toContainer=parent):data.toType=="hub"&&(parent=ctrlFactory.createLayout(data.toCtrl.controller,toContainer,{$layoutType:"hubGroup"},{}),layoutType="tile",toContainer=parent);break;case"stack":layoutType="stack"}var article={$layoutType:layoutType},ctrl=ctrlFactory.createLayout(data.toCtrl.controller,toContainer,article,{});data.moveBeforeCtrl&&(parent?(data.toContainer.removeChildRef(parent),data.toContainer.addChildBefore(parent,data.moveBeforeCtrl)):(toContainer.removeChildRef(ctrl),toContainer.addChildBefore(ctrl,data.moveBeforeCtrl))),notifications.publish(["sm.auth.change.item.prop.ui"])}function _addBind(data){var article={$bind:data.bind},toContainer=data.toContainer;if(data.toType=="hubGroup"){var parent=ctrlFactory.createLayout(data.toCtrl.controller,toContainer,{$layoutType:"tile"},{});toContainer=parent}var ctrl=ctrlFactory.createBindControl(data.toCtrl.controller,toContainer,article,{});data.moveBeforeCtrl&&(data.toContainer.removeChildRef(ctrl),data.toContainer.addChildBefore(ctrl,data.moveBeforeCtrl)),notifications.publish(["sm.auth.change.item.prop.ui"])}function _moveControl(data){data.container.removeChildRef(data.ctrl);var toContainer=data.toContainer;if(data.toType=="hubGroup"){var parent=ctrlFactory.createLayout(data.toCtrl.controller,toContainer,{$layoutType:"tile"},{});toContainer.removeChildRef(parent),toContainer.addChildBefore(parent,data.moveBeforeCtrl),parent.addChildBefore(data.ctrl,null)}else toContainer.addChildBefore(data.ctrl,data.moveBeforeCtrl);notifications.publish(["sm.auth.change.item.prop.ui"])}function _moveLayout(data){data.container.removeChildRef(data.ctrl),data.toContainer.addChildBefore(data.ctrl,data.moveBeforeCtrl),notifications.publish(["sm.auth.change.item.prop.ui"])}function _controlTitle(ctrl){var title=ctrl.prototype&&ctrl.prototype.data("$title");return title?ctrl.$bind&&(title=title+" ("+ctrl.$bind+")"):title=ctrl.$bind,title||(title=ctrl.$type),title}var authHelpers=require("syracuse-tablet/html/js/authoring/authoringHelpers"),ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),_$$lastElements=[];exports.getClosestDragElement=function($$source){var $$draggable=$$source.closest(".ui-draggable");return $$draggable},exports.dropDrop=function($$drop,$$helper,$$draggable){$$drop=_$$lastElements.length>0&&_$$lastElements[_$$lastElements.length-1],_$$lastElements=[];if(!$$drop)return;var data=_getDropData($$drop,$$draggable);if(!_isDropAllowed(data))return;data.action==="add_layout"?_addLayout(data):data.action=="add_bind"?_addBind(data):data.action=="move_ctrl"?_moveControl(data):data.action=="move_layout"&&_moveLayout(data)},exports.dropAccept=function($$drop,$$draggable){var data=_getDropData($$drop,$$draggable);return!0},exports.dropOut=function($$drop,$$helper,$$draggable){$$drop.removeClass("s-m-top-stack");var $$top=_updateHoverStack();$$top&&_updateDragHelper($$top,$$helper,$$draggable)},exports.dropOver=function($$drop,$$helper,$$draggable){_$$lastElements.push($$drop),_updateHoverStack(),_updateDragHelper($$drop,$$helper,$$draggable)}}),define("syracuse-tablet/html/js/authoring/authoringPanelLeft",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/authoring/authoringDrag"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),authHelpers=require("syracuse-tablet/html/js/authoring/authoringHelpers"),authHtml=require("syracuse-tablet/html/js/authoring/authoringHtml"),authDrag=require("syracuse-tablet/html/js/authoring/authoringDrag"),$$lastHoverList;exports.Panel=utils.defineClass(function AuthoringPanelLeft(){var self=this;self.$$panel=null,self.$$page=$("#s-m-app-id"),self._bindsOnPage=[]},null,{show:function(){var self=this;self._ensurePanel(),self._subscribe(),self.$$panel.show(),self.$$splitter.show(),self._minWidth=2*globals.getSiteLayout().splitterWidth,self.$$panel.find(".s-m-site-auth-panel-content > ul.nav.nav-pills > li").each(function(){self._minWidth+=$(this).outerWidth()})},hide:function(){var self=this;self._ensurePanel(),self.$$panel.hide(),self.$$splitter.hide(),self._unscribe()},_subscribe:function(){var self=this;notifications.subscribe(self,["sm.main.layout.changed"]),notifications.subscribe(self,["sm.auth.set.page"]),notifications.subscribe(self,["sm.auth.change.prop.ui"]),notifications.subscribe(self,["sm.auth.set.selection"]),notifications.subscribe(self,["sm.auth.remove.selection"]),notifications.subscribe(self,["sm.auth.hover.in"]),notifications.subscribe(self,["sm.auth.hover.out"]),notifications.subscribe(self,["sm.page.loaded"])},_unscribe:function(){var self=this;notifications.unsubscribe(self,["sm.main.layout.changed"]),notifications.unsubscribe(self,["sm.auth.set.page"]),notifications.unsubscribe(self,["sm.auth.change.prop.ui"]),notifications.unsubscribe(self,["sm.auth.set.selection"]),notifications.unsubscribe(self,["sm.auth.remove.selection"]),notifications.unsubscribe(self,["sm.auth.hover.in"]),notifications.unsubscribe(self,["sm.auth.hover.out"]),notifications.unsubscribe(self,["sm.page.loaded"])},notifMainLayoutChanged:function(){var self=this;$("#s-m-auth-tree-box",self.$$panel).css({height:self.$$panel.height()-45}),$("#s-m-auth-insert-box",self.$$panel).css({height:self.$$panel.height()-40})},_ensurePanel:function(){var self=this;if(this.$$panel)return;var ctx={label_content:locale.text("auth.panel.label_content"),label_insert:locale.text("auth.panel.label_insert"),label_containers:locale.text("auth.panel.label_containers"),label_fields:locale.text("auth.panel.label_fields"),lab_drag_to_add:locale.text("auth.label_layout.drag"),lab_group:locale.text("auth.label_layout.group"),lab_tile:locale.text("auth.label_layout.tile"),lab_stack:locale.text("auth.label_layout.stack")};self.$$panel=$("#s-m-auth-panel-left-id"),self.$$panel.append($(authHtml.execute("authPanelLeftStructure",ctx))),self._getDomObjects(),self._initSplitter()},_getDomObjects:function(){var self=this;self.$$structureRoot=$("#auth-structure-root-id",self.$$panel),self.$$prototypeRoot=$("#auth-lp-cnt-props-clpse",self.$$panel)},_initSplitter:function(){var self=this;self.$$splitter=$("#s-m-auth-splitter-left-id"),self.$$splitter.draggable({axis:"x",stop:function(e,ui){var $$splitter=$(this),pos=$$splitter.position(),width=$$splitter.width(),panelLeftSize=Math.max(self._minWidth,pos.left);$$splitter.css({left:panelLeftSize+"px"}),authHelpers.triggerResizeInternal({layout:{authPanelLeft:{width:panelLeftSize}}})}})},notifAuthSetPage:function(page){var self=this;self._resetContent(page.article)},notifAuthChangePropUi:function(articlePage){var self=this,article=JSON.parse(articlePage);self._resetContent(article)},notifPageLoaded:function(page){var self=this;globals.getCurrentPage().isDashboard()&&self._resetContent(globals.getCurrentPage().article)},_resetContent:function(article){var self=this;self._buildPageStructTree(),self._buildProtoStructTree(),self._initDomEvents(),self._initDrag()},notifAuthSetSelection:function(id){var self=this,$$item=self._getItemById(id);if($$item.length>0){$$item.addClass("s-m-auth-selected");var $$tb=$("#s-m-auth-tree-box",self.$$panel),o1=$$tb.offset(),o2=$$item.offset();if(o2.top<o1.top||o2.top>o1.top+$$tb.height()){var scroll=o2.top-(o1.top+$$tb.height()/2);$("#s-m-auth-tree-box",self.$$panel).animate({scrollTop:scroll},500)}}},notifAuthRemoveSelection:function(id){var self=this,$$item=self._getItemById(id);$$item.removeClass("s-m-auth-selected")},notifAuthHoverIn:function(id){var self=this,$$item=self._getItemById(id);$$item.addClass("s-m-auth-hover")},notifAuthHoverOut:function(id){var self=this,$$item=self._getItemById(id);$$item.removeClass("s-m-auth-hover")},_getItemById:function(id){var self=this;return $('[data-ctrl-id="'+id+'"]',self.$$panel)},_buildPageStructTree:function(){function _walkNode(node,$$parent,bindParent,level){var nodeArticle=node.getArticle(),id=node.id,typeClass,label;if(level===1){node.children&&node.children.length>0&&node.children.forEach(function(child){if(child.article.$noAuthoring)return;var $$ul=$('<ul class="s-m-auth-tree">').appendTo($$parent);_walkNode(child,$$ul,bindParent,level+1)});return}if(node.isControl()){var title=node.prototype&&node.prototype.data("$title");typeClass=node.typeName,label=title?title:nodeArticle.$bind;var bind=bindParent!=null?bindParent+"."+node.$bind:node.$bind;self._bindsOnPage.push(bind)}else typeClass=nodeArticle.$layoutType||node.typeName,label=nodeArticle.$title?node.getArticleText("$title")+" ("+typeClass+")":typeClass;var $$item=$('<li class="s-m-auth-tree s-m-auth-tree-'+typeClass+'">').appendTo($$parent),$$p=$('<p title="'+nodeArticle.$bind+'" data-ctrl-id="'+id+'" class="s-m-draggable s-m-droppable" data-auth-drag-action="move">'+label+"</p>");$$item.append($$p);if(node.isVignette()){self._bindsOnPage.push(node.$bind);var page=node.getPage();if(page){var rootLayout=page.rootLayout,$$ul=$('<ul class="s-m-auth-tree">').appendTo($$item),$$li=_walkNode(rootLayout,$$ul,node.$bind,level+1);$(">p",$$li).removeClass("s-m-draggable")}}else node.children&&node.children.length>0&&node.children.forEach(function(child){if(child.article.$noAuthoring)return;var $$ul=$('<ul class="s-m-auth-tree">').appendTo($$item);_walkNode(child,$$ul,bindParent,level+1)});return $$item}var self=this;self._bindsOnPage=[];var page=globals.getApplication().currentPage,rootLayout=page.rootLayout,label=page.prototype.data("$title")||locale.text("page");self.$$structureRoot.empty();var $$item=$('<li class="s-m-auth-tree s-m-auth-tree-page">').appendTo(self.$$structureRoot);$$item.append('<p data-ctrl-id="'+page.id+'">'+label+"</p>");var $$ul=$('<ul class="s-m-auth-tree">').appendTo($$item),$$li=_walkNode(rootLayout,$$ul,null,1);$(">p",$$li).removeClass("s-m-draggable")},_buildProtoStructTree:function(){var self=this,page=globals.getApplication().currentPage,label=page.prototype.data("$title");self.$$prototypeRoot.empty();var $$item=$('<li class="s-m-auth-tree s-m-auth-tree-page">').appendTo(self.$$prototypeRoot);$$item.append('<p data-ctrl-id="'+page.id+'">'+label+"</p>");var $$ul=$('<ul class="s-m-auth-tree">').appendTo($$item);if(jsutils.isInstanceOf(page,"DashboardPage")){var props=page.prototype.getPropertyNames();props.forEach(function(key){self._addVignette(page,key,$$ul)})}else self._addPage(page,$$ul)},_addVignette:function(page,vignette,$$parent){var self=this,proto=page.prototype,prop=proto.property(vignette),title=proto.property(vignette,"$title"),label=title?title+" ("+vignette+")":vignette,$$item=$('<li class="s-m-auth-tree s-m-auth-tree-vignette">').appendTo($$parent);$$item.append('<p class="s-m-draggable" data-auth-bind="'+vignette+'"  data-auth-drag-action="add_bind">'+label+"</p>");var ctrlVignette=page.getControlByBind(vignette);if(ctrlVignette){$$item.removeClass("s-m-draggable"),$$item.addClass("disabled"),page=ctrlVignette.getPage();if(page){var $$ul=$('<ul class="s-m-auth-tree">').appendTo($$item);self._addPage(page,$$ul,vignette);var $$children=$("li",$$ul);self._bindsOnPage.indexOf(vignette)>-1&&$$children.length<=0&&$$item.remove(),$$children.length<=0&&$$ul.remove()}else self._bindsOnPage.indexOf(vignette)>-1&&$$item.remove()}},_addPage:function(page,$$parent,bindParent){var self=this,label="?",proto=page.prototype,props=proto.getPropertyNames();props.forEach(function(key){if(proto.property(key,"$isExcluded")!==!0){var bind=bindParent!=null?bindParent+"."+key:key;if(self._bindsOnPage.indexOf(bind)<0){var title=proto.property(key,"$title"),type=proto.property(key,"$type"),typeClass=utils.getTypeName(type),label=title?title+" ("+key+")":key,$$item=$('<li class="s-m-auth-tree s-m-auth-tree-'+typeClass+'">').appendTo($$parent);$$item.append('<p class="s-m-draggable" data-auth-bind="'+key+'" data-auth-bind-parent="'+(bindParent||"")+'" data-auth-drag-action="add_bind">'+label+"</p>")}}})},_initDomEvents:function(){var self=this;$("li.s-m-auth-tree > p",$("#auth-structure-root-id")).not("li.s-m-auth-hidden > p").mouseover(function(e){var $$o=$(e.currentTarget);if($$lastHoverList){$$lastHoverList.removeClass("s-m-auth-hover");var id=$$lastHoverList.attr("id");notifications.publishEx(["sm.auth.hover.out"],{exclude:[self]},id)}$$o.addClass("s-m-auth-hover"),$$lastHoverList=$$o;var id=$$o.attr("data-ctrl-id");return notifications.publishEx(["sm.auth.hover.in"],{exclude:[self]},id),!1}),$("li.s-m-auth-tree > p",$("#auth-structure-root-id")).not("li.s-m-auth-hidden > p").mouseout(function(e){var $$o=$(e.currentTarget);$$o.removeClass("s-m-auth-hover");var id=$$o.attr("data-ctrl-id");notifications.publishEx(["sm.auth.hover.out"],{exclude:[self]},id)}),$("li.s-m-auth-tree > p",$("#auth-structure-root-id")).not("li.s-m-auth-hidden > p").click(function(e){return self.setSelection($(e.currentTarget),!1),!1}),$("li.s-m-auth-tree > p",$("#auth-structure-root-id")).not("li.s-m-auth-hidden > p").dblclick(function(e){return self.makeVisibleInPage($(e.currentTarget)),!1})},setSelection:function($$newSel,noScroll){var self=this,$$old=$(".s-m-auth-selected",self.$$panel);$$old.removeClass("s-m-auth-selected");var id=$$old.attr("data-ctrl-id");notifications.publishEx(["sm.auth.remove.selection"],{exclude:[self]},id),$$newSel?($$newSel.addClass("s-m-auth-selected"),id=$$newSel.attr("data-ctrl-id")):id=null,notifications.publishEx(["sm.auth.set.selection"],{exclude:[self]},id,noScroll==null?!0:noScroll)},makeVisibleInPage:function($$sel){var self=this;self.setSelection($$sel,!1)},_initDrag:function(){var self=this,dragParam={scroll:!1,containment:$("body"),helper:function(event){var $$source=$(event.target);return self._createDragHelper($$source)},appendTo:"body"};$(".s-m-draggable",self.$$panel).draggable(dragParam),$(".s-m-droppable",self.$$structureRoot).droppable({greedy:!0,hoverClass:"s-m-auth-hover-droptarget",tolerance:"pointer",drop:function(event,ui){var $$helper=ui.helper,$$draggable=ui.draggable;return authDrag.dropDrop($(this),$$helper,$$draggable)},accept:function($$draggable){return authDrag.dropAccept($(this),$$draggable)},over:function(event,ui){var $$helper=ui.helper,$$draggable=ui.draggable;return authDrag.dropOver($(this),$$helper,$$draggable)}})},_createDragHelper:function($$source){var $$dragSource=authDrag.getClosestDragElement($$source),text;if($$dragSource.attr("data-auth-drag-action")==="add_layout"){var name=$$dragSource.attr("data-auth-bind");text=locale.text("auth.drag."+name)}else text=$$dragSource.text();var $$helper=$('<div class="s-m-auth-drag-helper"><p id="s-m-auth-drag-helper-label-id">&nbsp;</p><p id="s-m-auth-drag-helper-desc-id">&nbsp;</p><div style="clear:both;"></div></div>');return $("#s-m-auth-drag-helper-label-id",$$helper).text(text),$$helper[0]}})}),define("syracuse-tablet/html/js/authoring/authoringPage",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/authoring/authoringDrag"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),authHelpers=require("syracuse-tablet/html/js/authoring/authoringHelpers"),authDrag=require("syracuse-tablet/html/js/authoring/authoringDrag"),_selectedRecord="s-m-auth-rec-selected",$$lastHoverElement,_elementsNoAuthoring=[".s-m-array .s-m-control",".s-m-array .s-m-layout",".s-m-control.header",".s-m-control.footer",".s-m-control.navigationpanel",".s-m-control.pageactionpanelregular",".s-m-control.breadcrumbs",".s-m-control.toolbar",".s-m-control.s-m-field > .s-m-value.edit > .s-m-control.s-m-unit",".s-m-layout.s-m-hub",".s-m-main-content > .s-m-scroll-wrapper > .s-m-stack",".s-m-main-content > .s-m-stack"];exports.AuthPage=utils.defineClass(function AuthPage(){var self=this;self.__onElementClick=self._onElementClick.bind(self),self.__onElementMouseOver=self._onElementMouseOver.bind(self),self.__onElementMouseOut=self._onElementMouseOut.bind(self),self.$$page=$("#s-m-app-id")},null,{enable:function(){var self=this;self._subscribe()},disable:function(){var self=this;self._unscribe()},enableAuthCss:function(){var self=this;self.disableAuthCss(),$(".s-m-control").addClass("s-m-auth"),$(".s-m-layout").addClass("s-m-auth"),$(".s-m-layout").addClass("s-m-auth"),$(".s-m-page").addClass("s-m-auth"),$("section.s-m-card").addClass("s-m-auth"),_elementsNoAuthoring.forEach(function(e){$(e).removeClass("s-m-auth")}),$(".s-m-auth",self.$$page).on("click",self.__onElementClick),$(".s-m-auth",self.$$page).on("mouseover",self.__onElementMouseOver),$(".s-m-auth",self.$$page).on("mouseout",self.__onElementMouseOut),self._enableDrop()},disableAuthCss:function(){var self=this;self._disableDrop();var $$smAuth=$(".s-m-auth",self.$$page);$$smAuth.off("click",self.__onElementClick),$$smAuth.off("mouseover",self.__onElementMouseOver),$$smAuth.off("mouseout",self.__onElementMouseOut),$$smAuth.removeClass("s-m-auth"),$(".s-m-record."+_selectedRecord,self.$$page).removeClass(_selectedRecord)},_subscribe:function(){var self=this;notifications.subscribe(self,["sm.auth.hover.in"]),notifications.subscribe(self,["sm.auth.hover.out"]),notifications.subscribe(self,["sm.auth.set.selection"]),notifications.subscribe(self,["sm.auth.remove.selection"])},_unscribe:function(){var self=this;notifications.unsubscribe(self,["sm.auth.hover.in"]),notifications.unsubscribe(self,["sm.auth.hover.out"]),notifications.unsubscribe(self,["sm.auth.set.selection"]),notifications.unsubscribe(self,["sm.auth.remove.selection"])},_enableDrop:function(){var self=this,dragParam={scroll:!1,containment:$("body"),tolerance:"pointer",helper:function(event){var $$source=$(event.target);return self._createDragHelper($$source)},appendTo:"body",revert:function($$drop){return"invalid"},start:function(){},stop:function(){}};$(".s-m-auth").droppable({greedy:!1,hoverClass:"s-m-auth-hover-droptarget",tolerance:"pointer",drop:function(event,ui){var $$helper=ui.helper,$$draggable=ui.draggable;return authDrag.dropDrop($(this),$$helper,$$draggable)},accept:function($$draggable){return authDrag.dropAccept($(this),$$draggable)},over:function(event,ui){var $$helper=ui.helper,$$draggable=ui.draggable;return authDrag.dropOver($(this),$$helper,$$draggable)},out:function(event,ui){var $$helper=ui.helper,$$draggable=ui.draggable;return authDrag.dropOut($(this),$$helper,$$draggable)}})},_disableDrop:function(){$(".s-m-auth.ui-droppable").droppable("destroy")},_createDragHelper:function($$source){var $$dragSource=authDrag.getClosestDragElement($$source),control=authHelpers.findControl($$dragSource);if(!control)return;var $$helper=$('<p class="s-m-auth-drag-helper">'),text;return control.prototype?(text=control.prototype.data("$title"),text?text=text+"("+control.$bind+")":text=control.$bind):(text=control.title,text?text=text+" ("+control.typeName+")":text=control.typeName),$$helper.text(text),$$helper[0]},_onElementClick:function(e){var self=this,$$o=$(e.currentTarget);if($$o.is("section.s-m-card")){$$o.closest("table").find(".s-m-record."+_selectedRecord).removeClass(_selectedRecord),$$o.closest(".s-m-record").addClass(_selectedRecord);return}var id=this.getCurrentSelected().removeClass("s-m-auth-selected").attr("id");id&&notifications.publishEx(["synch.sm.auth.remove.selection"],{exclude:[self]},id),id=$$o.addClass("s-m-auth-selected").attr("id"),notifications.publishEx(["synch.sm.auth.set.selection"],{exclude:[self]},id);if(utils.stopClickEvent(e))return!1},_onElementMouseOver:function(e){var self=this,$$o=$(e.currentTarget);return $$lastHoverElement&&($$lastHoverElement.removeClass("s-m-auth-hover"),notifications.publishEx(["sm.auth.hover.out"],{exclude:[self]},$$lastHoverElement.attr("id"))),notifications.publishEx(["sm.auth.hover.in"],{exclude:[self]},$$o.attr("id")),$$o.addClass("s-m-auth-hover"),$$lastHoverElement=$$o,!1},_onElementMouseOut:function(e){var self=this,$$o=$(e.currentTarget);$$o.removeClass("s-m-auth-hover"),notifications.publishEx(["sm.auth.hover.out"],{exclude:[self]},$$o.attr("id"))},notifAuthHoverIn:function(id){var self=this,$$pageItem=self._getItemById(id);$$pageItem.addClass("s-m-auth-hover")},notifAuthHoverOut:function(id){var self=this,$$pageItem=self._getItemById(id);$$pageItem.removeClass("s-m-auth-hover")},notifAuthSetSelection:function(id,noScroll){var self=this,$$item=self._getItemById(id);$$item&&$$item.length>0&&($$item.addClass("s-m-auth-selected"),noScroll!==!0&&self._scrollToVisibleArea($$item))},notifAuthRemoveSelection:function(id){var self=this,$$item=self._getItemById(id);$$item.removeClass("s-m-auth-selected")},_getItemById:function(id){return $("#"+id,this.$$page)},getCurrentSelectionId:function(){return this.getCurrentSelected().attr("id")},getCurrentSelected:function(){return $(".s-m-auth-selected:visible",this.$$page)},_scrollToVisibleArea:function($$item){var self=this,page=globals.getApplication().currentPage,scroller=page&&page._gestureMgr||page&&page.rootLayout&&page.rootLayout._gestureMgr;scroller&&scroller.makeVisible($$item)}})}),define("syracuse-tablet/html/js/ui/modals/modalChooseDevice",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),_templateAll={header:'			<buttons class="pull-right"> 				<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 			</buttons> 			<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">				<div class="form-group s-m-scroll-element"> 					<div class="list-group" id="modal-device-select-list-id"> 						{{#each devices}} 							<a draggable="false" href="#" class="list-group-item" data-action="clickDevice" data-params="{{name}}">{{label}}</a> 						{{/each}} 					</div> 				</div> 		    </div>',footer:""},_Klass=utils.defineClass(function ModalChooseDevice(device){var self=this;modalDialog.ModalBase.call(self),self.selectedDevice=device},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="config-tile half_right":displayFlags.modalClass="config-tile full",displayFlags},_getDataContext:function(){var self=this,devices=[],site=globals.getSiteLayout(),devs=site.getDeviceTemplates();for(var dev in devs)devices.push({name:dev,label:locale.textOpt("auth.device."+dev+".title")||dev});var data={title:locale.text("auth.device.title"),devices:devices};return data},_onShow:function(){var self=this;modalDialog.ModalBase.prototype._onShow.call(self),$('a[data-params="'+self.selectedDevice+'"]').addClass("active")},_onValidate:function(){},_onCancel:function(){var self=this;self.selectedApps={}},_onAction:function(action,param){var self=this;return action==="clickDevice"?(self.selectedDevice=param,!0):!1},_getResult:function(){var self=this;return self.selectedDevice}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/ui/modals/modalNewLayout",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),_templateAll={header:'		<buttons class="pull-right"> 			<button type="button" class="btn btn-default s-m-modal-btn-validate" data-action="$validate"></button> 			<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 		</buttons> 		<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">				<div class="alert alert-warning" role="alert"> 					{{warning}} 				</div> 				<div class="form-group" id="dir"> 					<label>{{lab_dir}}</label>         			<div class="btn-group btn-group-vertical btn-group-justified" data-toggle="buttons"> 						<label class="btn btn-default {{#if horizontal}}active{{/if}}"> 							<input type="radio" id="horizontal" name="scroll" value="horizontal" {{#if horizontal}}checked{{/if}}/>{{lab_horizontal}}						</label> 						<label class="btn btn-default {{#unless horizontal}}active{{/unless}}"> 							<input type="radio" id="vertical" name="scroll" value="vertical" {{#unless horizontal}}checked{{/unless}}/>{{lab_vertical}}						</label> 					</div> 				</div> 				<div class="form-group" id="tpl"> 					<label>{{lab_tpl}}</label> 					<div class="btn-group btn-group-vertical btn-group-justified" data-toggle="buttons"> 						<label class="btn btn-default {{#if template}}active{{/if}}"> 							<input type="radio" id="template" name="empty" value="true" {{#if template}}checked{{/if}}/>{{lab_template}}						</label> 						<label class="btn btn-default {{#unless template}}active{{/unless}}"> 							<input type="radio" id="empty" name="empty" value="false" {{#unless template}}checked{{/unless}}/>{{lab_empty}}						</label> 					</div> 				</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalNewLayout(_defaults){var self=this;modalDialog.ModalBase.call(self),self._defaults=_defaults,self.result=null},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="half_right":displayFlags.modalClass="full",displayFlags},_getDataContext:function(){var self=this,data={label_validate:locale.text("modal.ok"),label_cancel:locale.text("modal.cancel"),title:locale.text("modal.newlayout.title"),warning:locale.text("modal.newLayout.warning"),lab_horizontal:locale.text("modal.newLayout.horizontal"),lab_vertical:locale.text("modal.newLayout.vertical"),lab_template:locale.text("modal.newLayout.template"),lab_empty:locale.text("modal.newLayout.empty"),lab_dir:locale.text("modal.newLayout.dir"),lab_tpl:locale.text("modal.newLayout.tpl"),horizontal:self._defaults.scroll==="horizontal",template:self._defaults.template};return data},_onValidate:function(){var self=this,dir=self.$$elmt.find("#dir label.active input").val(),tpl=self.$$elmt.find("#tpl label.active input").val();self.result={scroll:dir,template:tpl==="true"}},_onCancel:function(){var self=this;self.result=null},_getResult:function(){var self=this;return self.result}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/authoring/authoringHeader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modals/modalChooseDevice","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/ui/modals/modalNewLayout"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),locale=require("syracuse-tablet/html/js/helpers/locale"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),authHtml=require("syracuse-tablet/html/js/authoring/authoringHtml"),globals=require("syracuse-tablet/html/js/helpers/globals"),modalChooseDevice=require("syracuse-tablet/html/js/ui/modals/modalChooseDevice"),authHelpers=require("syracuse-tablet/html/js/authoring/authoringHelpers"),modalNewLayout=require("syracuse-tablet/html/js/ui/modals/modalNewLayout");exports.Panel=utils.defineClass(function AuthoringPanelHeader(){var self=this;self.$$panel=null},null,{show:function(){var self=this;self._ensurePanel(),self._subscribe(),self.$$panel.show(),self._initDefaults()},hide:function(){var self=this;self._ensurePanel(),self.$$panel.hide(),self._unscribe()},_ensurePanel:function(){var self=this;if(this.$$panel)return;var ctx={label_settings:locale.text("auth.device.settings"),label_save:locale.text("auth.panel.label_save"),label_remove:locale.text("auth.panel.label_remove"),label_remove_container:locale.text("auth.panel.label_remove_container"),label_remove_all:locale.text("auth.panel.label_remove_all"),label_new_layout:locale.text("auth.panel.label_new_layout"),label_preview_portrait:locale.text("auth.panel.label_preview_portrait"),label_preview_landscape:locale.text("auth.panel.label_preview_landscape"),label_scale_to_fit:locale.text("auth.panel.label_scale_to_fit"),label_undo:locale.text("auth.label_undo"),label_undo_all:locale.text("auth.label_undo_all")};self.$$panel=$("#s-m-auth-panel-header-id"),self.$$panel.append($(authHtml.execute("authPanelHeader",ctx))),self._getDomObjects(),self._initDomEvents()},_getDomObjects:function(){var self=this;self.$$orientation=$("#s-m-auth-orientation-id",self.$$panel),self.$$removeItem=$("#s-m-auth-remove-id",self.$$panel),self.$$removeCnt=$("#s-m-auth-remove-cnt-id",self.$$panel),self.$$removeAllItems=$("#s-m-auth-remove-all-id",self.$$panel),self.$$newLayout=$("#s-m-auth-new-layout-id",self.$$panel),self.$$undo=$("#auth-btn-undo-id",self.$$panel),self.$$undoAll=$("#auth-btn-undo-all-id",self.$$panel)},_initDomEvents:function(){var self=this;$("#s-m-auth-settings-id").on("click",self._onChooseDevice.bind(self)),$("#s-m-auth-scale-id").on("click",self._onScaleDevice.bind(self)),$("#s-m-auth-vertical-id").on("click",self._onOrientation.bind(self)),$("#s-m-auth-horizontal-id").on("click",self._onOrientation.bind(self)),self.$$removeItem.on("click",self._onRemoveItem.bind(self)),self.$$removeCnt.on("click",self._onRemoveCnt.bind(self)),self.$$removeAllItems.on("click",self._onRemoveAllItems.bind(self)),self.$$newLayout.on("click",self._onNewLayout.bind(self)),self.$$undo.on("click",self._onUndo.bind(self)),self.$$undoAll.on("click",self._onUndoAll.bind(self)),$("#auth-btn-save-id").on("click",self._onSave.bind(self)),$("#auth-btn-close-id").on("click",self._onClose.bind(self))},_initDefaults:function(){var self=this},_subscribe:function(){var self=this;notifications.subscribe(self,["sm.main.layout.changed"]),notifications.subscribe(self,["sm.auth.set.selection"]),notifications.subscribe(self,["sm.auth.change.prop.ui"]),notifications.subscribe(self,["sm.auth.history.change"])},_unscribe:function(){var self=this;notifications.unsubscribe(self,["sm.main.layout.changed"]),notifications.unsubscribe(self,["sm.auth.set.selection"]),notifications.unsubscribe(self,["sm.auth.change.prop.ui"]),notifications.unsubscribe(self,["sm.auth.history.change"])},notifMainLayoutChanged:function(){var self=this,site=globals.getSiteLayout(),cur=site.getCurrentLayoutSettings();cur.pageParameters.forceAutoScale===!0?$("#s-m-auth-scale-id").addClass("active"):$("#s-m-auth-scale-id").removeClass("active"),cur.pageParameters.orientation==="landscape"?($("#s-m-auth-horizontal-id").addClass("active"),$("#s-m-auth-vertical-id").removeClass("active")):($("#s-m-auth-horizontal-id").removeClass("active"),$("#s-m-auth-vertical-id").addClass("active"))},notifAuthChangePropUi:function(articlePage){var self=this},notifAuthSetSelection:function(id){var self=this;self._currentSelectionId=id,self._enableRemoveBtn()},notifAuthHistoryChange:function(pageHistory){var self=this;pageHistory.length>0?(self.$$undo.removeClass("disabled"),self.$$undoAll.removeClass("disabled")):(self.$$undo.addClass("disabled"),self.$$undoAll.addClass("disabled"))},_enableRemoveBtn:function(){var self=this,stateRemove=!1,stateRemoveCnt=!1,sel,data,parent;self._currentSelectionId&&(sel=authHelpers.getSelectionById(self._currentSelectionId),data=sel&&authHelpers.getSelectionData(sel),!data||!data.control?stateRemove=!1:stateRemove=!0),data&&data.control&&data.control&&(data.control.isRoot()&&(stateRemove=!1),data.control.isLayout()&&(stateRemoveCnt=!0)),stateRemove!==!1?self.$$removeItem.removeClass("disabled"):self.$$removeItem.addClass("disabled"),stateRemoveCnt!==!1?self.$$removeCnt.removeClass("disabled"):self.$$removeCnt.addClass("disabled")},_setDeviceSize:function(size,orientation){var params={layout:{pageParameters:{}}};size&&(params.layout.pageParameters.device=size),orientation&&(params.layout.pageParameters.orientation=orientation),authHelpers.triggerResizeInternal(params)},_onRemoveItem:function(){if(!this._currentSelectionId)return;var sel=authHelpers.getSelectionById(this._currentSelectionId),data=sel&&authHelpers.getSelectionData(sel);if(!data||!data.control||data.control.isRoot())return;this._enableRemoveBtn(!1),data.control.parent.removeChild(data.control),notifications.publish(["sm.auth.change.item.prop.ui"])},_onRemoveCnt:function(){if(!this._currentSelectionId)return;var sel=authHelpers.getSelectionById(this._currentSelectionId),data=sel&&authHelpers.getSelectionData(sel);if(!data||!data.control)return;data.control.removeChildren(),notifications.publish(["sm.auth.change.item.prop.ui"])},_onRemoveAllItems:function(){var page=globals.getApplication().currentPage;page.rootLayout.removeChildren(),notifications.publish(["sm.auth.change.item.prop.ui"])},_onClose:function(){notifications.publish(["sm.auth.close"])},_onSave:function(evt){notifications.publish(["sm.auth.save"],$("#auth-btn-save-id").attr("data-save-type"))},_onChooseDevice:function(elmt){var self=this,site=globals.getSiteLayout(),cur=site.getCurrentLayoutSettings(),modal=new modalChooseDevice.Modal(cur.pageParameters.device);modal.show().then(function(result){result!=null&&(self._setDeviceSize(result),notifications.publish(["sm.auth.display.changed"],"device"))})},_onScaleDevice:function(elmt){var site=globals.getSiteLayout(),cur=site.getCurrentLayoutSettings(),params={layout:{pageParameters:{forceAutoScale:cur.pageParameters.forceAutoScale===!1}}};authHelpers.triggerResizeInternal(params),notifications.publish(["sm.auth.display.changed"],"scale")},_onOrientation:function(elmt){var self=this,orient=$(elmt.currentTarget).attr("data-auth-orientation");orient&&(self._setDeviceSize(null,orient),notifications.publish(["sm.auth.display.changed"],"orientation"))},_onNewLayout:function(){var self=this,page=globals.getApplication().currentPage,data={scroll:jsutils.isInstanceOf(page,"DashboardPage")?"horizontal":"vertical",template:!0},modal=new modalNewLayout.Modal(data);modal.show().then(function(result){result!=null&&notifications.publish(["sm.auth.new.layout"],result.scroll,result.template)})},_onUndo:function(){notifications.publish(["sm.auth.undo"],!1)},_onUndoAll:function(){notifications.publish(["sm.auth.undo"],!0)}})}),define("syracuse-tablet/html/js/authoring/authoringFooter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHtml"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),authHtml=require("syracuse-tablet/html/js/authoring/authoringHtml");exports.Panel=utils.defineClass(function AuthoringPanelFooter(){var self=this;self.$$panel=null},null,{show:function(){var self=this;self._ensurePanel(),self._subscribe(),self.$$panel.show(),self._initDefaults()},hide:function(){var self=this;self._ensurePanel(),self.$$panel.hide(),self._unscribe()},_ensurePanel:function(){var self=this;if(this.$$panel)return;var ctx={};self.$$panel=$("#s-m-auth-panel-footer-id"),self.$$panel.append($(authHtml.execute("authPanelFooter",ctx))),self._getDomObjects(),self._initDomEvents()},_getDomObjects:function(){var self=this},_initDomEvents:function(){var self=this},_initDefaults:function(){var self=this},_subscribe:function(){var self=this;notifications.subscribe(self,["sm.main.layout.changed"]),notifications.subscribe(self,["sm.auth.set.selection"]),notifications.subscribe(self,["sm.auth.change.prop.ui"])},_unscribe:function(){var self=this;notifications.unsubscribe(self,["sm.main.layout.changed"]),notifications.unsubscribe(self,["sm.auth.set.selection"]),notifications.unsubscribe(self,["sm.auth.change.prop.ui"])},notifMainLayoutChanged:function(){var self=this},notifAuthChangePropUi:function(articlePage){var self=this},notifAuthSetSelection:function(id){var self=this}})}),define("syracuse-tablet/html/js/ui/modals/modalSaveAuth",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),_templateAll={header:'			<buttons class="pull-right"> 				<button type="button" class="btn btn-default s-m-modal-btn-validate" data-action="$validate"></button> 				<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 			</buttons> 			<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">			<div class="s-m-scroll-element"> 				<div class="form-group"> 					<label>{{label_code}}</label> 					<input class="form-control" id="authCode" value="{{authCodeDefault}}" /> 				</div> 				<div class="form-group"> 					<label>{{label_title}}</label> 					<input class="form-control" id="authTitle" value="{{authTitleDefault}}" /> 				</div> 				<div class="form-group"> 					<label>{{label_description}}</label> 					<input class="form-control" id="authDescription" value="{{authDescriptionDefault}}"  /> 				</div> 				<div class="form-group"> 					<label>{{label_comment}}</label> 					<input class="form-control" id="authComment" value="{{comment}}"  /> 				</div> 				<label>{{label_saveas_option}}</label> 				<div class="btn-group btn-group-justified" data-toggle="buttons"> 					<div class="btn-group"> 						<label class="btn btn-primary active"> 							<input type="radio" name="options" id="personal_copy" checked>{{label_personal}} 						</label> 					</div> 					<div class="btn-group"> 						<label class="btn btn-primary"> 							<input type="radio" name="options" id="global_variant"> {{label_global}} 						</label> 					</div> 					<div class="btn-group"> 						<label class="btn btn-primary"> 							<input type="radio" name="options" id="factory_variant">{{label_factory}} 						</label> 					</div> 				</div> 			</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalSaveAuth(saveContext){var self=this;modalDialog.ModalBase.call(self),self.saveContext=saveContext,self.result=null},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="config-tile half_right":displayFlags.modalClass="config-tile full",displayFlags},_getDataContext:function(){var self=this,data={title:locale.text("auth.save.title"),page:self.saveContext.pageName,authCodeDefault:self.saveContext.code,authTitleDefault:self.saveContext.title,authDescriptionDefault:self.saveContext.description,label_code:locale.text("auth.panel.label_code"),label_title:locale.text("auth.panel.label_title"),label_description:locale.text("auth.panel.label_description"),label_saveas_option:locale.text("auth.panel.label_saveas_option"),label_personal:locale.text("auth.panel.label_personal"),label_global:locale.text("auth.panel.label_global"),label_factory:locale.text("auth.panel.label_factory"),label_save:locale.text("auth.panel.label_save"),label_cancel:locale.text("auth.panel.label_cancel"),label_comment:locale.text("auth.panel.label_comment"),comment:self.saveContext.comment};return data},_onValidate:function(){var self=this,code=self.$$elmt.find("#authCode").val(),title=self.$$elmt.find("#authTitle").val(),description=self.$$elmt.find("#authDescription").val(),comment=self.$$elmt.find("#authComment").val();self.result={code:code,title:title,description:description,comment:comment,saveAs:$("input:radio:checked",self.$$elmt)[0].id}},_onCancel:function(){var self=this;self.result=null},_getResult:function(){var self=this;return self.result}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/authoring/authoring",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/authoring/authoringPanelRight","syracuse-tablet/html/js/authoring/authoringPanelLeft","syracuse-tablet/html/js/authoring/authoringPage","syracuse-tablet/html/js/authoring/authoringHeader","syracuse-tablet/html/js/authoring/authoringFooter","syracuse-tablet/html/js/authoring/authoringArticleGen","syracuse-tablet/html/js/authoring/authoringVal","syracuse-tablet/html/js/ui/modals/modalSaveAuth","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/authoring/authoringProperties","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),authHelpers=require("syracuse-tablet/html/js/authoring/authoringHelpers"),authoringPanelRight=require("syracuse-tablet/html/js/authoring/authoringPanelRight"),authoringPanelLeft=require("syracuse-tablet/html/js/authoring/authoringPanelLeft"),authoringPage=require("syracuse-tablet/html/js/authoring/authoringPage"),authoringHeader=require("syracuse-tablet/html/js/authoring/authoringHeader"),authoringFooter=require("syracuse-tablet/html/js/authoring/authoringFooter"),authoringArticleGen=require("syracuse-tablet/html/js/authoring/authoringArticleGen"),authVal=require("syracuse-tablet/html/js/authoring/authoringVal"),modalSaveAuth=require("syracuse-tablet/html/js/ui/modals/modalSaveAuth"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),authProps=require("syracuse-tablet/html/js/authoring/authoringProperties"),locale=require("syracuse-tablet/html/js/helpers/locale"),_authInterface,_saveContext;exports.toggleDesignPage=function(){_authInterface||(_authInterface=new AuthInterface),_authInterface.toggleDesignPage()},exports.isEnabled=function(){return _authInterface&&_authInterface.isActive},exports.checkBack=function(){return exports.isEnabled()?_authInterface.checkBack():!0},exports.destroy=function(){if(!_authInterface)return;_authInterface.destroy(),_authInterface=null};var AuthInterface=utils.defineClass(function AuthoringInterface(){var self=this;self.$$authPanel=null,self.isActive=!1,self.undoPageHistory={},self.isDirty=!1,self.rightPanel=new authoringPanelRight.Panel,self.leftPanel=new authoringPanelLeft.Panel,self.headerPanel=new authoringHeader.Panel,self.footerPanel=new authoringFooter.Panel,self.authPage=new authoringPage.AuthPage,authProps.initProperties(authHelpers),authVal.setProperties(authProps)},null,{destroy:function(){var self=this;["rightPanel","leftPanel","headerPanel","authPage"].forEach(function(p){self[p]&&self[p].destroy&&self[p].destroy(),self[p]=null})},toggleDesignPage:function(forceStatus){this.isActive||forceStatus===!1?this.disable():this.enable()},enable:function(){var self=this;self._subscribe(),self.authPage.enable(),self.rightPanel.show(),self.leftPanel.show(),self.headerPanel.show(),self.footerPanel.show();var page=globals.getApplication().currentPage;notifications.publish(["sm.auth.set.page"],page),authHelpers.triggerResizeInternal({preserveScroll:!0,layout:{authPanelLeft:{visible:!0},authPanelRight:{visible:!0},authPanelHeader:{visible:!0},authPanelFooter:{visible:!0},pageParameters:{forcePreview:!0}}}),self.authPage.enableAuthCss(),self.isActive=!0,self.isDirty=!1,globals.setAuthoringActive(!0)},disable:function(){var self=this;self.authPage.disable(),self.rightPanel.hide(),self.leftPanel.hide(),self.headerPanel.hide(),self.footerPanel.hide(),self.isActive=!1,self.authPage.disableAuthCss(),authHelpers.triggerResizeInternal({preserveScroll:!0,layout:{authPanelLeft:{visible:!1},authPanelRight:{visible:!1},authPanelHeader:{visible:!1},authPanelFooter:{visible:!1},pageParameters:{forcePreview:!1}}}),self.isActive=!1,self._unscribe(),globals.setAuthoringActive(!1)},_subscribe:function(){var self=this;notifications.subscribe(self,["sm.page.loaded"]),notifications.subscribe(self,["sm.auth.change.item.prop.ui"]),notifications.subscribe(self,["sm.auth.change.prop.ui"]),notifications.subscribe(self,["sm.auth.close"]),notifications.subscribe(self,["sm.auth.save"]),notifications.subscribe(self,["sm.auth.new.layout"]),notifications.subscribe(self,["sm.auth.set.page"]),notifications.subscribe(self,["sm.auth.display.changed"]),notifications.subscribe(self,["sm.auth.undo"])},_unscribe:function(){var self=this;notifications.unsubscribe(self,["sm.page.loaded"]),notifications.unsubscribe(self,["sm.auth.change.item.prop.ui"]),notifications.unsubscribe(self,["sm.auth.change.prop.ui"]),notifications.unsubscribe(self,["sm.auth.close"]),notifications.unsubscribe(self,["sm.auth.save"]),notifications.unsubscribe(self,["sm.auth.new.layout"]),notifications.unsubscribe(self,["sm.auth.set.page"]),notifications.unsubscribe(self,["sm.auth.display.changed"]),notifications.unsubscribe(self,["sm.auth.undo"])},notifPageLoaded:function(page){var self=this;if(!self.isActive)return;if(page&&page.state&&page.state.disableAuthoring){self.authPage.disableAuthCss(),self.toggleDesignPage();return}page&&!page.isVignette&&notifications.publish(["sm.auth.set.page"],page),self.authPage.enableAuthCss()},notifAuthSetPage:function(page){var self=this,parentAuthoringName=self.currentPageName;self.currentPageName=page.state.authoringName,self.displayedArticle=JSON.stringify(page.article),self.undoPageHistory[self.currentPageName]||(self.undoPageHistory[self.currentPageName]={parentPageName:parentAuthoringName,articles:[]}),notifications.publish(["sm.auth.history.change"],self.undoPageHistory[self.currentPageName].articles)},notifAuthChangePropUi:function(articlePage,states,vignetteToUpdt){var self=this;self.displayedArticle!=null&&(self.isDirty=!0,self.undoPageHistory[self.currentPageName].articles.push(self.displayedArticle),notifications.publish(["sm.auth.history.change"],self.undoPageHistory[self.currentPageName].articles),self.displayedArticle=null),self._updateLayoutPage(articlePage,states,vignetteToUpdt)},notifAuthChangeItemPropUi:function(data){var self=this,page=globals.getApplication().currentPage,states={},articleJSON=authHelpers.rebuildArticleByPageStruct(page,states),vignetteToUpdt=null;data&&data.control&&data.control.controller&&(vignetteToUpdt=data.control.controller.getParentVignette()),notifications.publish(["sm.auth.change.prop.ui"],articleJSON,states,vignetteToUpdt)},notifAuthClose:function(articlePage){var self=this,pageType=globals.getApplication().currentPage.state.type;pageType==="carddesign"||pageType==="chartdetail"?self._authGoBackAuthoring(articlePage):self._authCloseAuthoring(articlePage)},_authCloseAuthoring:function(articlePage){var self=this,_end=function(){self.undoPageHistory={},notifications.publish(["sm.auth.history.change"],[]),self.disable()};self.isDirty===!0?modal.simpleConfirmPromise({message:locale.text("auth.msg.close")}).then(function(result){result.action==="yes"&&_end()}):_end()},_authGoBackAuthoring:function(articlePage){var self=this;this._isArticleChange(this.displayedArticle)?modal.simpleConfirmPromise({message:locale.text("auth.msg.close")}).then(function(result){if(result.action==="yes"){var article=self.undoPageHistory[self.currentPageName].articles.shift();self.undoPageHistory[self.currentPageName].articles=[],notifications.publish(["sm.auth.history.change"],self.undoPageHistory[self.currentPageName].articles),notifications.publishEx(["sm.auth.change.prop.ui"],{exclude:[self]},article),globals.getApplication().goBack()}}):globals.getApplication().goBack()},notifAuthDisplayChanged:function(type){this.leftPanel.setSelection(null)},notifAuthSave:function(typeSave){var self=this;if(typeSave){if(this._isArticleChange(this.displayedArticle)){self.undoPageHistory[self.currentPageName].articles=[];var parentPageName=self.undoPageHistory[self.currentPageName].parentPageName;parentPageName&&notifications.publish(["sm.auth.history.change"],self.undoPageHistory[parentPageName].articles)}eventListener.triggerAction(globals.getApplication().currentPage.$$elmt,typeSave);return}var article=self.rightPanel.getPageArticle(),articleParsed=authVal.validateJSON(!0,article,authProps.getAllProperties());if(!articleParsed)return;var comment=articleParsed&&articleParsed.$comment;_saveContext=_saveContext||{code:locale.text("auth.panel.authCodeDefault"),title:locale.text("auth.panel.authTitleDefault"),description:locale.text("auth.panel.authDescriptionDefault"),saveAs:"personal_copy",comment:comment},_saveContext.pageName=self.currentPageName;var modal=new modalSaveAuth.Modal(_saveContext);modal.show().then(function(ctx){if(ctx!=null){_saveContext=ctx,articleParsed.$comment=ctx.comment;var params={code:ctx.code,title:ctx.title,description:ctx.description,saveAs:ctx.saveAs,article:articleParsed};params.article=utils.sanitizeArticle(params.article),authHelpers.saveAuthoring(self.currentPageName,params),self.isDirty=!1}}).fail(function(e){globals.getModal().error(e)})},notifAuthNewLayout:function(type,template){var page=globals.getApplication().currentPage;authoringArticleGen.genNewArticle({page:page,orientation:type,template:template}).then(function(article){var articleJSON=authVal.toSortedJSON(article);notifications.publish(["sm.auth.change.prop.ui"],articleJSON)}).fail(function(e){modal.error(e)})},notifAuthUndo:function(all){var self=this,article;all?(article=self.undoPageHistory[self.currentPageName].articles.shift(),self.undoPageHistory[self.currentPageName].articles=[]):article=self.undoPageHistory[self.currentPageName].articles.pop(),notifications.publish(["sm.auth.history.change"],self.undoPageHistory[self.currentPageName].articles),notifications.publishEx(["sm.auth.change.prop.ui"],{exclude:[self]},article),self._updateLayoutPage(article)},_updateLayoutPage:function(articlePage,states,vignetteToUpdt){var self=this,page=globals.getApplication().currentPage;try{var articleParsed=JSON.parse(articlePage)}catch(e){}if(!articleParsed)return;var path=self._findSelectionPath();authHelpers.savePanelStates(),self.displayedArticle=articlePage,self.authPage.disableAuthCss(),page.authUpdateLayout(articleParsed,vignetteToUpdt).then(function(){self.authPage.enableAuthCss(),states&&self._applyPreviousStates(states),self._selectByPath(path)})},_applyPreviousStates:function(states){var self=this,page=globals.getApplication().currentPage;for(var statePath in states){statePath=statePath.length>0?statePath.split("."):[];var node=page.rootLayout.findChildByPath(statePath);node&&node.setAuthState(states[statePath])}},_findSelectionPath:function(){var id=this.authPage.getCurrentSelectionId();if(id===globals.getApplication().currentPage.id)return"$$currentpage$$";var sel=id&&authHelpers.getSelectionById(id),data=sel&&authHelpers.getSelectionData(sel);if(!data||!data.control)return null;var path=data.control.getPathInTree();return path},_selectByPath:function(path){var page=globals.getApplication().currentPage;if(!path||!page)return;if(path==="$$currentpage$$")path=page.id;else{var node=page.rootLayout.findChildByPath(path);path=node?node.id:null}path&&notifications.publishEx(["sm.auth.set.selection"],{exclude:[this]},path)},_isArticleChange:function(articleBefore){var article=JSON.stringify(globals.getApplication().currentPage.article);return articleBefore!==article},checkBack:function(){var pageType=globals.getApplication().currentPage.state.type;return pageType==="carddesign"||pageType==="chartdetail"?!0:(notifications.publish(["sm.auth.close"]),!1)}})}),define("syracuse-tablet/html/js/ui/developmentPage",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/storage/localStorage"],function(require,exports,module){function _setActive(flag){localStorage.setItem("devPanelOpen",flag?"true":"false")}var globals=require("syracuse-tablet/html/js/helpers/globals"),uiutils=require("syracuse-tablet/html/js/ui/uiUtils"),localStorage=require("syracuse-tablet/html/js/storage/localStorage"),_template='	<div id="page_dev_mode" style="margin: 0; width: auto; position: absolute; z-index: 9999">     <div class="modal-dialog" style="margin: 0; width: auto;"> 		<div class="modal-content" style="width: 230px;"> 		    <div class="modal-header"> 				<h4 class="modal-title">{{title}}</h4> 		    </div> 		    <div class="modal-body"> 				<div class="form-group"> 					<label>{{label_device}}</label>					<select class="form-control" id="dev-select-device"> 					{{#each devices}}						<option value="{{this.device}}.{{this.orientation}}" {{#if this.selected}}selected{{/if}}>						{{this.description}}						</option>					{{/each}}					</select>					<span class="input-group"> 						<input id="dev-device-scale" type="checkbox" {{#if scaleChecked}}checked{{/if}}>{{label_scale}} 					</span> 				</div> 				<div class="form-group"> 					<span class="input-group"> 						<input id="dev-cache" type="checkbox" {{#if cacheChecked}}checked{{/if}}>{{label_cache}} 	  				</span> 				</div> 			</div> 		    <div class="modal-footer"> 				<button type="button" class="btn" id="btn_dev_close">{{label_close}}</button> 				<button type="button" class="btn btn-default" id="btn_dev_apply">{{label_apply}}</button>     			<button type="button" class="btn" id="btn_dev_ok">{{label_ok}}</button> 			</div> 		</div> 	</div> 	</div>',_show=function(){_setActive(!0);if($("#page_dev_mode").is(":visible"))return;var modalHtml=Handlebars.compile(_template),cache=globals.getCache(),site=globals.getSiteLayout(),devs=site.getDeviceTemplates(),cur=site.getCurrentLayoutSettings(),lastDev=localStorage.getItem("devPanelDevice"),ctx={title:"Development settings",label_device:"Device",devices:[],label_scale:"Scale if needed",label_cache:"Disable caching",label_close:"Cancel",label_ok:"Ok",label_apply:"Apply",scaleChecked:localStorage.getItem("devPanelScale")==="true",cacheChecked:localStorage.getItem("devPanelCache")==="true"};ctx.devices.push({device:"<No emulation>",orientation:"landscape",description:"<No emulation>",selected:lastDev==="<No emulation>.landscape"});for(var dev in devs)devs[dev].orientations.forEach(function(o){var devName=dev,orientName=o,opt={device:dev,orientation:o,description:devName+" ("+o+")"};opt.selected=lastDev===opt.device+"."+opt.orientation,ctx.devices.push(opt)});modalHtml=modalHtml(ctx),$("body").append($(modalHtml));var $$page=$("#page_dev_mode");$$page.draggable(),$("#btn_dev_ok",$$page).on("click",function(){apply(),$$page.remove()}),$("#btn_dev_apply",$$page).on("click",function(){apply()}),$("#btn_dev_close",$$page).on("click",function(){_setActive(!1),$$page.remove()});var apply=function(){var device=$$page.find("#dev-select-device").val(),dev=device.split("."),params={layout:{pageParameters:{}}};localStorage.setItem("devPanelDevice",device),device==="<No emulation>.landscape"?(params.layout.pageParameters.forcePreview=!1,params.layout.pageParameters.forceAutoScale=!1):(params.layout.pageParameters.device=dev[0],params.layout.pageParameters.orientation=dev[1],params.layout.pageParameters.forcePreview=!0,$("#dev-device-scale",$$page).is(":checked")===!0?(params.layout.pageParameters.forceAutoScale=!0,localStorage.setItem("devPanelScale","true")):(params.layout.pageParameters.forceAutoScale=!1,localStorage.setItem("devPanelScale","false"))),$("#dev-cache",$$page).is(":checked")===!0?(localStorage.setItem("devPanelCache","true"),cache.disableCache(!0)):(localStorage.setItem("devPanelCache","false"),cache.disableCache(!1)),uiutils.triggerResizeInternal(params)};apply()};exports.wasActive=function(){return localStorage.getItem("devPanelOpen")==="true"},exports.show=_show}),define("syracuse-tablet/html/js/ui/modals/modalShowLegal",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog","syracuse-tablet/html/js/sdata/sdataHttp","syracuse-tablet/html/js/helpers/types/date"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),sdataHttp=require("syracuse-tablet/html/js/sdata/sdataHttp"),date=require("syracuse-tablet/html/js/helpers/types/date"),_templateAll={header:'			<buttons class="pull-right"> 				<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 			</buttons> 			<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">			<div class="s-m-scroll-element"> 				<div class="form-group"> 					<div class="s-m-header-brand"> 						<span class="s-m-brand">{{label_brand}}</span> 						<span class="s-m-product">{{label_product}}</span> 					</div> 					<span class="s-m-product-update-label">{{label_update}}</span><span class="s-m-product-update-value">{{update}}</span> 				</div> 				<div class="form-group"> 					<h3>{{label_legal}}</h3> 					<label>{{text1}}</label> 					<label>{{text2}}</label> 					<label>{{text3}}</label> 					<label>{{text4}}</label> 					<label>{{text5}}</label> 					<label>{{text6}}</label> 				</div> 				{{#if licenses}} 				<div class="form-group"> 					<h3>{{label_license}}</h3> 					{{#each licenses}} 						<div class="s-m-field"><div class="s-m-title">{{../label_registrationNumber}}</div><div class="s-m-value">{{toRegNum}}</div></div> 						<div class="s-m-field"><div class="s-m-title">{{../label_licensedTo}}</div><div class="s-m-value">{{toName}}</div></div> 						<div class="s-m-field"><div class="s-m-title">{{../label_reference}}</div><div class="s-m-value">{{toRefNum}}</div></div> 						<div class="s-m-field"><div class="s-m-title">{{../label_installedBy}}</div><div class="s-m-value">{{installedBy}}</div></div> 						<div class="s-m-field"><div class="s-m-title">{{../label_expiryDate}}</div><div class="s-m-value">{{expiryDate}}</div></div> 					{{/each}} 				</div> 				{{/if}} 				{{#if userAgent}} 					<h3>{{label_user_agent}}</h3> 					<div class="form-group"> 						<label>{{userAgent}}</label> 						<label>{{lookAndFeel}}</label> 					</div> 				{{/if}} 				{{#if builddate}} 					<div class="form-group"> 						<label>{{builddate}}</label> 					</div> 				{{/if}} 			</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalShowLegal(){var self=this;modalDialog.ModalBase.call(self)},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="show-legal half_right":displayFlags.modalClass="show-legal full",displayFlags},_getDataContext:function(){var self=this;return sdataHttp.send({method:"GET",url:"/sdata/syracuse/collaboration/syracuse/licenses/$service/current"}).then(function(data){var version=null,licenses=[];if(data&&data.isSuccess&&data.responseJSON)return data.responseJSON.forEach(function(lic){var l={};l.expiryDate=locale.text("modal.legal.license.expiryDateValue",[date.getLocalShortDate(lic.validFrom),date.getLocalShortDate(lic.expiryDate)]),l.toName=lic.licensedTo.name,l.toRegNum=lic.licensedTo.registrationNumber,l.toRefNum=lic.licensedTo.reference,l.installedBy=lic.reseller.name,licenses.push(l),version||(version=lic.productVersion)}),{version:version,licenses:licenses}}).then(function(licData){var labels=locale.getProductLabels(),showBuildDate=window.location.href.indexOf("SHOW_VERSION_NUMBER")>-1,data={title:locale.text("modal.legal.title"),label_brand:labels.brand,label_product:labels.product,label_update:locale.text("modal.legal.update"),label_license:locale.text("modal.legal.about.license"),label_legal:locale.text("modal.legal.about.legal"),label_user_agent:locale.text("modal.legal.about.user_agent"),update:licData&&licData.version||"?",licenses:licData&&licData.licenses,builddate:showBuildDate&&locale.text("modal.legal.builddate",[globals.getBuildTimeStamp()]),text1:locale.text("modal.legal.text1"),text2:locale.text("modal.legal.text2"),text3:locale.text("modal.legal.text3"),text4:locale.text("modal.legal.text4"),text5:locale.text("modal.legal.text5"),text6:locale.text("modal.legal.text6"),label_registrationNumber:locale.text("modal.legal.license.registrationNumber"),label_licensedTo:locale.text("modal.legal.license.licensedTo"),label_reference:locale.text("modal.legal.license.reference"),label_userLicense:locale.text("modal.legal.license.userLicense"),label_installedBy:locale.text("modal.legal.license.installedBy"),label_server:locale.text("modal.legal.license.server"),label_expiryDate:locale.text("modal.legal.license.expiryDate"),userAgent:globals.isDvlpMode()?navigator.userAgent:"",lookAndFeel:globals.isDvlpMode()?globals.getLookAndFeel():""};return data})},_onValidate:function(){},_onCancel:function(){},_getResult:function(){}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/ui/modals/modalSettings",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/native/native"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),globals=require("syracuse-tablet/html/js/helpers/globals"),native=require("syracuse-tablet/html/js/helpers/native/native"),_cacheOptions={"1week":{days:7},"2week":{days:14},month:{days:30},all:{days:null}},_templateAll={header:'		<buttons class="pull-right"> 			<button type="button" class="btn btn-default s-m-modal-btn-validate" data-action="$validate"></button> 		</buttons> 		<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">				<div class="form-group s-m-scroll-element"> 					<header>{{label_device}}</header> 					<div class="btn-group btn-group-justified" data-toggle="buttons" id="s-m-radio-type-id"> 						<div class="btn-group"> 							<label class="btn btn-primary" data-action="clickType" data-params="auto"> 								<input type="radio" name="s-m-radio-type">{{label_auto}} 							</label> 						</div> 						<div class="btn-group"> 							<label class="btn btn-primary" data-action="clickType" data-params="smartphone"> 								<input type="radio" name="s-m-radio-type">{{label_smartphone}} 							</label> 						</div> 						<div class="btn-group"> 							<label class="btn btn-primary" data-action="clickType" data-params="tablet"> 								<input type="radio" name="s-m-radio-type">{{label_tablet}} 							</label> 						</div> 					</div> 					{{#if showConfigServers}} 						<header>{{label_servers}}</header> 						<div class="btn-group btn-group-justified"> 							<div class="btn-group"> 								<label class="btn btn-primary" data-action="selectServer" data-params="">{{label_switch_server}}</label> 							</div> 						</div> 					{{/if}} 					<header id="s-m-cache-id">{{label_cache}}</header> 					<span id="s-m-cache-explain">{{label_cache_clear}} 					<div id="s-m-cache-btns-id" class="btn-group btn-group-justified"> 						<label id="s-m-cache-clear-all-id" class="btn btn-primary s-m-cache-btn" data-action="clearCache" data-params="clear,all">{{label_cache_all}}<div></div></label> 						<label id="s-m-cache-clear-1week-id" class="btn btn-primary s-m-cache-btn" data-action="clearCache" data-params="clear,1week">{{label_cache_week1}}<div></div></label> 						<label id="s-m-cache-clear-2week-id" class="btn btn-primary s-m-cache-btn" data-action="clearCache" data-params="clear,2week">{{label_cache_week2}}<div></div></label> 						<label id="s-m-cache-clear-month-id" class="btn btn-primary s-m-cache-btn" data-action="clearCache" data-params="clear,month">{{label_cache_month}}<div></div></label> 					</div> 					<div style="display:table-row;"> 					<label id="s-m-cache-confirm-id" class="btn btn-primary s-m-confirm" data-action="clearCache" data-params="confirm,all" style="display: none;">{{label_cache_confirm}}</label> 					<label id="s-m-cache-cancel-id" class="btn btn-warning s-m-cancel" data-action="clearCache" data-params="cancel" style="display: none;">{{label_cancel}}</label> 					</div> 					<div id="s-m-cache-progress-id" class="progress" style="display: none;"> 						<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%">{{label_clearing}}</div> 					</div> 										<div id="s-m-cache-ok-id" class="alert alert-success" role="alert" style="display: none">{{label_clearing_ok}}</div> 					<div style="width:100%; display: inline-block;"></div> 				</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalSettings(settings){var self=this;modalDialog.ModalBase.call(self),self.settings=settings&&$.extend(!0,{},settings)||{},self.settings["device-type"]=self.settings["device-type"]||"auto",self.result=null},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll,smartphone:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="settings half_right":displayFlags.modalClass="settings full",displayFlags},_getDataContext:function(){var self=this,data={title:locale.text("settings.title"),label_device:locale.text("settings.device.label"),label_auto:locale.text("settings.device.auto"),label_smartphone:locale.text("settings.device.smartphone"),label_tablet:locale.text("settings.device.tablet"),label_cache:locale.text("settings.cache.label"),label_cache_clear:locale.text("settings.cache.clear"),label_cache_week1:locale.text("settings.cache.week1"),label_cache_week2:locale.text("settings.cache.week2"),label_cache_month:locale.text("settings.cache.month"),label_cache_all:locale.text("settings.cache.all"),label_cache_confirm:locale.text("settings.cache.confirm"),label_clearing:locale.text("settings.cache.clearing"),label_clearing_ok:locale.text("settings.cache.clearing_ok"),label_apps:locale.text("settings.apps.label"),label_apps_update:locale.text("settings.apps.update"),label_apps_confirm:locale.text("settings.apps.confirm"),label_apps_wait:locale.text("settings.apps.wait"),label_apps_ok:locale.text("settings.apps.ok"),label_cancel:""};return native.hasCapability("X3WUPApp")&&(data.showConfigServers=!0,data.label_servers=locale.text("settings.servers.servers"),data.label_switch_server=locale.text("settings.servers.switch")),data},_onShow:function(){var self=this;modalDialog.ModalBase.prototype._onShow.call(self),$("label[data-params='"+self.settings["device-type"]+"']",self.$$elmt).eq(0).button("toggle"),self._computeCacheSize()},_onValidate:function(){var self=this,$$active=$("#s-m-radio-type-id .active ",this.$$elmt),deviceType=$$active.length<1?"auto":$$active.attr("data-params")||"auto";self.settings["device-type"]=deviceType,self.result=self.settings},_onCancel:function(){var self=this;self.result=null},_onAction:function(action,param){var self=this;switch(action){case"clickType":$("label[data-params='"+param+"']",self.$$elmt).eq(0).button("toggle");break;case"clearCache":self._clearCache(param);break;case"clearApps":self._clearApps(param);break;case"selectServer":return native.hasCapability("X3WUPApp")&&native.getModule("X3WUPApp").selectServer(),!0}return!1},_clearApps:function(param){var self=this,p=param.split(","),action=p[0],data=p[1];self._setButtons("clearApps","apps",action,data);if(action==="confirm")return globals.getMetaData().removeApplications().always(function(){globals.setNeedToCheckAppsList(!0),self._setButtons("clearApps","apps","ok","")})},_clearCache:function(param){var self=this,p=param.split(","),action=p[0],data=p[1];self._setButtons("clearCache","cache",action,data);if(action==="confirm"){var dt=self._getDateBefore(_cacheOptions[data].days);return globals.getCache().clearCache({$not_read_since:dt}).always(function(){self._setButtons("clearCache","cache","ok",""),self._computeCacheSize()})}},_setButtons:function(action,prefix,state,data){var self=this;switch(state){case"confirm":$("#s-m-"+prefix+"-progress-id",self.$$elmt).show(),$("#s-m-"+prefix+"-confirm-id",self.$$elmt).hide(),$("#s-m-"+prefix+"-cancel-id",self.$$elmt).hide();break;case"cancel":$("#s-m-"+prefix+"-btns-id",self.$$elmt).show(),$("#s-m-"+prefix+"-confirm-id",self.$$elmt).hide(),$("#s-m-"+prefix+"-cancel-id",self.$$elmt).hide();break;case"clear":$("#s-m-"+prefix+"-confirm-id",self.$$elmt).show(),$("#s-m-"+prefix+"-cancel-id",self.$$elmt).show(),$("#s-m-"+prefix+"-btns-id",self.$$elmt).hide(),$("#s-m-"+prefix+"-confirm-id",self.$$elmt).attr("data-params","confirm,"+(data||""));break;case"ok":$("#s-m-"+prefix+"-progress-id",self.$$elmt).hide(),$("#s-m-"+prefix+"-ok-id",self.$$elmt).show(),setTimeout(function(){$("#s-m-"+prefix+"-ok-id",self.$$elmt).hide(),$("#s-m-"+prefix+"-btns-id",self.$$elmt).show()},3e3)}},_getDateBefore:function(days){if(!days)return"9999-99-99-00-00-00";var today=new Date,dt=new Date(today);return dt.setDate(today.getDate()-days),dt=dt.toJSON().slice(0,10)+"-00-00-00",dt},_computeCacheSize:function(){var self=this;Object.keys(_cacheOptions).forEach(function(co){var dt=self._getDateBefore(_cacheOptions[co].days);return globals.getCache().computeCacheSize({$not_read_since:dt}).always(function(result){self._updateCacheSize(co,result)})})},_updateCacheSize:function(key,result){var self=this,$$div=$("#s-m-cache-clear-"+key+"-id > div",self.$$elmt),units=[locale.text("global.units.kilobytes"),locale.text("global.units.megabytes")];$$div.empty();if(result&&result.$data){var size=result.$data.sizeRecords,sizeUnit=locale.text("global.units.bytes");while(size>=1024&&units.length>0)size=(size+1023)/1024,sizeUnit=units.shift();var sizeText=Math.round(size)+" "+sizeUnit;$$div.append($("<span>"+result.$data.numRecords+" "+locale.text("global.units.files")+"</span><span>"+sizeText+"</span>"))}},_getResult:function(){var self=this;return self.result}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/application/application",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/application/pageLoader","syracuse-tablet/html/js/init/initContext","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/application/pageRegistry","syracuse-tablet/html/js/authoring/authoring","syracuse-tablet/html/js/ui/developmentPage","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/ui/modals/modalShowLegal","syracuse-tablet/html/js/ui/modals/modalSettings","syracuse-tablet/html/js/ui/modals/modalConfirm","syracuse-tablet/html/js/helpers/native/native"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("app"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),globals=require("syracuse-tablet/html/js/helpers/globals"),auth=require("syracuse-tablet/html/js/application/authentication"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),pageLoader=require("syracuse-tablet/html/js/application/pageLoader"),initContext=require("syracuse-tablet/html/js/init/initContext"),uiutils=require("syracuse-tablet/html/js/ui/uiUtils"),pageRegistry=require("syracuse-tablet/html/js/application/pageRegistry"),authoring=require("syracuse-tablet/html/js/authoring/authoring"),developmentPage=require("syracuse-tablet/html/js/ui/developmentPage"),locale=require("syracuse-tablet/html/js/helpers/locale"),settings=require("syracuse-tablet/html/js/application/settings"),modalShowLegal=require("syracuse-tablet/html/js/ui/modals/modalShowLegal"),modalSettings=require("syracuse-tablet/html/js/ui/modals/modalSettings"),modalConfirm=require("syracuse-tablet/html/js/ui/modals/modalConfirm"),native=require("syracuse-tablet/html/js/helpers/native/native"),_appConfig={transition:null,openLinkInVignette:!1,loadUserImage:!0},_subscribe=function(self){notifications.subscribe(self,["sm.switch.app","sm.modal.open","sm.modal.close","sm.main.layout.changed","sm.user.logged.in","sm.page.settings.changed"],1)},_Application=utils.defineClass(function($$elmt,factory){this.$$elmt=$$elmt,this.currentPage=null,this._$config=$.extend(!0,{},_appConfig),this.factory=factory,this._pageLoader=null,this._nbModals=0,this._wait=uiutils.waitWheelCreate($$elmt),this.homePageId=null,this.uuid="root",this.history=[],this.pushState=!0},null,{init:function(){eventListener.bindEvents(this),this.dao=this.factory.createDaoApp(this),_subscribe(this),this.$$elmt.show()},destroy:function(){authoring.destroy(),this._wait&&(uiutils.waitWheelDestroy(this._wait),this._wait=null),this.currentPage&&(this.currentPage.destroy(),this.currentPage=null),this.$$elmt&&(this.removeAllChildPages(this.$$elmt),this.$$elmt.unbind(),this.$$elmt.remove(),this.$$elmt=null),this.dao&&(this.dao.destroy(),this.dao=null),this._pageLoader&&(this._pageLoader.destroy(),this._pageLoader=null),notifications.unsubscribe(),$(window).unbind()},onUnload:function(){this.destroy()},onBeforeUnload:function(){if(native.hasCapability("X3WUPApp"))return native.getModule("X3WUPApp").notifUnloaded()},isWelcomeApplication:function(){return this.uuid==="$welcomeApplication"},getTitle:function(){return this.dao.getApplicationTitle()},gotoHome:function(){var self=this,deferred=$.Deferred();return setTimeout(function(){self.changePage(self.homePageId).then(function(){deferred.resolve()}).fail(function(e){deferred.reject(e)})}),deferred.promise()},$config:function(id){return utils.getPropByPath(this._$config,id)},notifModalOpen:function(){this._nbModals++,log&&log("notifModalOpen nbModals="+this._nbModals)},notifModalClose:function(){this._nbModals=Math.max(this._nbModals-1,0),log&&log("notifModalClose nbModals="+this._nbModals)},notifMainLayoutChanged:function(info,orientation,deviceClass){var self=this;self.$$elmt.width(info.application.width),self.$$elmt.height(info.application.height),self.currentPage&&self.currentPage.onMainPageResize(info,orientation,deviceClass)},getScrollOffset:function(){return{top:this.$$elmt.scrollTop(),left:this.$$elmt.scrollLeft()}},hasModalOpen:function(){return log&&log("_nbModals="+this._nbModals),this._nbModals>0},_actGotoWelcomeApplication:function(){return this.gotoWelcomeApplication()},_actLogout:function(actionName){this.logout()},_actHistoryBack:function(){window.history.back()},_actSwitchContext:function(){var self=this;initContext.askNewContext().then(function(profile){if(!profile)return;self.gotoWelcomeApplication()}).fail(function(e){e!=null&&e.message==="$logout$"?self.logout():globals.getModal().error(locale.text("user.context.error"),e)})},_actDevelopmentPage:function(){developmentPage.show()},_actSettings:function(){var self=this;return settings.getGlobalSettings().then(function(set){var modal=new modalSettings.Modal(set);return modal.show()}).then(function(result){if(result)return settings.setGlobalSettings(result)})},_actDesignPage:function(){authoring.toggleDesignPage()},_actPageSettings:function(){var self=this,page=self.currentPage,unpin=!1,removeliveTile=!1;settings.isPinnedPage(page.getPinPageId()).then(function(isPinned){var message;isPinned&&(unpin=!0);if(native.hasCapability("liveTile"))return native.getModule("liveTile").getLiveTile(page.getPinPageId()).then(function(isliveTile){removeliveTile=isliveTile;var opt=$.extend(!0,page.nativeCapabilities,{pinWelcome:!0});page.panelAttachPageSettings({pageTitle:page.state.$title,pinWelcome:isPinned,liveTile:isliveTile},opt)})})},notifPageSettingsChanged:function(data){this._addRemovePinPage(data.pinWelcome),this._addRemoveLiveTile(data.liveTile),this._scheduleMessage(data.schedule)},_addRemovePinPage:function(add){if(add===undefined)return;var self=this,pageData=self.currentPage.getPinPageData();add?(pageData.dashboardName&&pageData.applicationName===self.dao.getApplicationName()&&pageData.dashboardName===self.dao.getHomeDashboardName()&&(pageData.icon=self.dao.getApplicationIcon()),settings.addPinnedPage(pageData).then(function(){var notify={severityClass:"success",title:"",body:locale.text("pin.page.add.ok",[pageData.title]),onlyWebapp:!0};globals.getModal().notify(notify),notifications.publish("sm.page.pin.state.change",2)})):settings.removePinnedPage(pageData.id).then(function(){var notify={severityClass:"success",title:"",body:locale.text("pin.page.remove.ok",[pageData.title]),onlyWebapp:!0};globals.getModal().notify(notify),notifications.publish("sm.page.pin.state.change",1)})},_addRemoveLiveTile:function(add){if(add===undefined)return;var options={},provider,self=this,action,pageData=self.currentPage.getPinPageData();add?(options=$.extend(!0,pageData,self.currentPage.getTileLinkContext()),options.applicationName=self.dao.getApplicationName(),options.endpoint=pageData.endpoint||globals.getEndpoint(),provider=native.getModule("liveTile").addLiveTile,action="add"):(options=pageData.id,provider=native.getModule("liveTile").removeLiveTile,action="remove"),provider(options).then(function(result){var notify={};result&&result.error?notify={severityClass:"warning",body:result.error.text,onlyWebapp:!1}:notify={severityClass:"success",title:"",body:locale.text("liveTile.page."+action+".ok"),onlyWebapp:!1},globals.getModal().notify(notify)})},_scheduleMessage:function(data){if(data===undefined)return;data.DeepLink=this.currentPage.getTileLinkContext().DeepLink,native.getModule("scheduleMessage").scheduledMsg(data)},_actAbout:function(){var modal=new modalShowLegal.Modal;modal.show()},notifSwitchApp:function(appName){this.switchToApplication(appName)},switchToApplication:function(appName,options){var self=this;return globals.getMetaData().checkApplicationUpdate(appName).then(function(update){if(update!==!0)return!1;var modal=new modalConfirm.Modal(locale.text("modal.confirm.update"),null,!0);return modal.show().then(function(result){return result==="yes"})}).then(function(forceUpdate){return globals.getMetaData().getApplication(appName,!1,forceUpdate)}).then(function(appDetails){return self._setCurrentApplication(appDetails,options)}).fail(function(e){globals.getModal().error(null,e)})},gotoWelcomeApplication:function(){var self=this,step;return globals.isLoggedIn()?step=globals.getMetaData().getApplication("$welcomeApplication").then(function(appDetails){return self._setCurrentApplication(appDetails)}):step=this.gotoLogin(),step},gotoLogin:function(reason){var self=this,deferred=$.Deferred();return setTimeout(function(){self.changePage("login",{reason:reason||locale.text("login.authentication")}).then(function(){deferred.resolve()}).fail(function(e){deferred.reject(e)})},0),deferred.promise()},_setCurrentApplication:function(appInfo,options){var self=this,deferred=$.Deferred();options=options||{};try{if(!appInfo)throw new Error("Null appInfo");log&&log("Switch to Syracuse Mobile Application "+appInfo.applicationName),self.currentPage&&self.currentPage.deactivate();if(!appInfo.$application.$uuid)throw new Error("No application $uuid - "+appInfo.applicationName);self.uuid!==appInfo.$application.$uuid&&(self.dao.setApplication(appInfo),self.homePageId=globals.getMetaData().getDashboardPageName(self.dao.getHomeDashboardName()),self.uuid=appInfo.$application.$uuid,self.applicationName=appInfo.$application.applicationName||self.uuid),options.noPageChange!==!0?self.gotoHome().then(function(){deferred.resolve()}).fail(function(e){deferred.reject(e)}):deferred.resolve()}catch(e){self.currentPage&&self.currentPage.activate(),options.dontDiplayErrors===!0?deferred.reject(e):modal.error("Error switching application",e,function(){deferred.reject(e)})}return deferred.promise()},_gotoPage:function(state,back,loadOptions){var self=this;return self._pageLoader||(self._pageLoader=self._createPageLoader()),state.isLogin===!1&&!globals.isLoggedIn()?(self.gotoLogin("Authentication is required"),$.smResolve()):self._pageLoader.loading?$.smResolve():self._pageLoader.load(state,back,loadOptions).then(function(page){return notifications.publish(["sm.history.push"],self.history),page})},_createPageLoader:function(){var self=this,loader=new pageLoader.Klass({waitStop:function(){self.waitWheelStop()},getRootElmt:function(){return self.$$elmt},waitStart:function(){self.waitWheelStart()},getCurrentPage:function(){return self.currentPage},setCurrentPage:function(page){self.currentPage=page,page.state.isLogin===!0?self.historyReset(page):page.state.name===self.homePageId&&(log&&log("Home page "+self.homePageId+" - Destroy all pages except current"),self.removeAllChildPages(self.$$elmt,page))},historyPush:function(state){self.history.push(state),notifications.publish(["sm.history.push"],self.history),self.pushState?window.history.pushState({x:new Date},utils.UUID(),null):window.history.replaceState({x:new Date},utils.UUID(),null)},succeeded:function(dstPage,pageToClose,parentNotifInfo,back,loadOptions){log&&log("succeeded - win="+window.history.length+" - app="+self.history.length),(dstPage.isNew||back&&pageToClose&&pageToClose.isChild&&pageToClose.sizeModified)&&uiutils.triggerResizeInternal();if(parentNotifInfo&&parentNotifInfo.notifId){var controllerToNotify=globals.getController(parentNotifInfo.parentId);controllerToNotify?notifications.notifyController(parentNotifInfo.notifId,controllerToNotify,parentNotifInfo.notifData,parentNotifInfo.controlId):notifications.publish(parentNotifInfo.notifId,parentNotifInfo.notifData)}}});return loader},historyReset:function(page){this.removeAllChildPages(this.$$elmt,page),this.history=[]},historyScan:function(cb){for(var i=this.history.length-1;i>=0;i--)if(cb(this.history[i])===!0)break},historyLog:function(title){this.historyScan(function(state){console.log("	",state.name)})},historyPop:function(event,cb,pageFilter){try{if(!authoring.checkBack())return!1;var self=this;log&&log("History pop before - win="+window.history.length+" - app="+self.history.length);if(self._nbModals>0)return event&&event.preventDefault(),!1;if(self.uuid==="root"||self.history.length===0)return window.history.back(),!1;if(pageFilter&&self.history.length>0){var selectedIdx=-1;for(var i=self.history.length-1;i>=0;i--)if(pageFilter(self.history[i])){selectedIdx=i;break}if(selectedIdx<0)return event&&event.preventDefault(),!1;while(self.history.length>selectedIdx+2){var state=self.history.pop(),pageToRemove=$("#"+state.uuid).smPageController();pageToRemove&&pageToRemove.destroy()}}var state=self.history.length>0?self.history.pop():null;if(state&&(state.isWelcomePage||state.isLogin))return!1;state=self.history.length>0?self.history[self.history.length-1]:null,event&&event.preventDefault(),notifications.publish(["sm.history.pop"],self.history),self.pushState=!0;if(state)return setTimeout(function(){var promise;state.isWelcomePage?promise=self.gotoWelcomeApplication():promise=self._gotoPage(state,!0),cb&&cb(promise)},0),!0}catch(e){modal.error("historyPop error",e,function(){cb&&cb($.smReject(e))})}return!1},goBack:function(pageFilter){var deferred=$.Deferred();return this.historyPop(null,function(promise){promise?promise.then(function(newPage){deferred.resolve(newPage)}).fail(function(e){deferred.reject(e)}):deferred.resolve()},pageFilter),deferred.promise()},changePage:function(pageName,pageOptions,changePageOpts){var self=this;changePageOpts=changePageOpts||{};var changeApp;if(pageOptions&&pageOptions.applicationName){var curApp=self.dao&&self.dao.getApplicationName();curApp!==pageOptions.applicationName&&(changeApp=globals.getMetaData().getApplication(pageOptions.applicationName).then(function(appDetails){return self._setCurrentApplication(appDetails,{noPageChange:!0})}))}return changeApp||(changeApp=$.smResolve()),changeApp.then(function(){var curPage;if(pageOptions&&pageOptions.parentId&&pageOptions.parentId.length>0){curPage=globals.getController(pageOptions.parentId);if(!curPage)throw new Error("changePage - Can't find parent page - "+pageOptions.parentId)}else curPage=self.currentPage;return pageRegistry.getPageInfo(pageName,pageOptions,curPage)}).then(function(pageInfo){return self._gotoPage(pageInfo,!1,{dontDisplayLoadErr:changePageOpts.callerhandlesErrors})}).fail(function(e){var next=e&&e.$redirectPage||"welcomePage";return next==="current"&&self.currentPage?self.refreshPage():next==="login"?self.gotoLogin(locale.text("login.timeout.message")):changePageOpts.callerhandlesErrors!==!0&&self.gotoWelcomeApplication(),e})},logout:function(msgId){var deferred=$.Deferred(),self=this,_loggedOut=function(){log&&log("User Logged out"),globals.setUserCtx(null),deferred.resolve(),self.gotoLogin(locale.text(msgId||"logout.msg"))};return self.waitWheelStart(),settings.logoutForgetMe().then(function(forgetMe){return auth.logout(forgetMe)}).then(function(ok,message){self.waitWheelStop(),ok?_loggedOut():modal.error(message,function(){_loggedOut()})}).fail(function(e){self.waitWheelStop(),modal.error("Logout error",e,function(){_loggedOut()})}),deferred.promise()},refreshPage:function(options){var self=this;if(!self.currentPage)throw new Error("No current page");self.currentPage.refresh(options).then(function(){}).fail(function(e){self.modalError(locale.text("err.load.main"),e,function(){var next=e&&e.$redirectPage;next==="login"&&self.gotoLogin(locale.text("login.timeout.message"))})})},waitWheelStart:function(){uiutils.waitWheelStart(this._wait)},waitWheelStop:function(){uiutils.waitWheelStop(this._wait)},modalError:function(title,e,cb){modal.error(title,e,cb)},getMessageSlot:function(){this._$$actMsgSlot||(this._$$actMsgSlot={});var deviceType=globals.getSiteLayout().getDeviceType();if(this._$$actMsgSlot[deviceType])return this._$$actMsgSlot[deviceType];var $$slot=this._$$actMsgSlot[deviceType]=$("<div>").addClass("s-m-act-msg-slot").addClass(deviceType);return(deviceType!=="tablet"&&this.currentPage?this.currentPage.$$contentElmt:this.$$elmt).prepend($$slot),$$slot},_actPinPage:function(){var self=this,pin=!1,liveTileRemove=!1,nativeLiveTile=self.currentPage.nativeCapabilities.liveTile?native.getModule("liveTile"):null;settings.isPinnedPage(self.currentPage.getPinPageId()).then(function(isPinned){pin=!isPinned;var message=locale.text("pin.page."+(pin?"add":"remove")+".confirm");return globals.getModal().simpleConfirmPromise({message:message})}).then(function(result){if(result.action!=="yes")return;self._addRemovePinPage(pin)}).fail(function(e){globals.getModal().error(e)})},_actNativeShare:function(){var options={pageData:this.currentPage.getTileLinkContext()};native.getModule("share").sharePageLink(options).then(function(result){var notify={};result&&result.action?notify={severityClass:result.action==="ok"?"success":"warning",title:"",body:locale.text("share.page."+result.action)}:notify={severityClass:"warning",title:"",body:locale.text("share.page.error")}})},removeAllChildPages:function($$elmt){if(!$$elmt)return;$$elmt.jquery||($$elmt=$($$elmt));var exclude=Array.prototype.slice.call(arguments,1);$$elmt.children(".s-m-page").each(function(idx){var page=$(this).smPageController();page&&Array.prototype.indexOf.call(exclude,page)==-1&&page.destroy()})},getHistory:function(){return this.history},_getSavedContext:function(){var self=this;if(!self.currentPage||self.currentPage.state.isLogin||self.currentPage.state.isWelcomePage)return null;var history=null,start=self.history&&self.history.length>0?self.history.length-2:-1,state;for(var i=start;i>=0;i--){state=self.history[i];if(state.isLogin||state.isWelcomePage)break;history||(history=[]),history.unshift(state);if(state.name===self.homePageId)break}var context=self.currentPage.getRestoreContext();if(!context)return;return context.history=history,context},notifUserLoggedIn:function(fromInitProcess,restoredContext){var self=this;self._restoreHistoryContext(restoredContext).then(function(){fromInitProcess===!0&&notifications.publish(["sm.application.ready"])})},_restoreHistoryContext:function(restoredContext){var self=this;return self.gotoWelcomeApplication().then(function(){if(!restoredContext||restoredContext.applicationName==null)return;var step,appName=restoredContext.applicationName;return appName!==self.applicationName||appName!==self.uuid?globals.getMetaData().getApplication(appName).then(function(app){var def=$.Deferred();return app?def.resolve(restoredContext):(globals.getModal().actionResult(locale.text("restorecontext.bad"),locale.text("restorecontext.badapp",[appName])),restoredContext=null,def.resolve()),def.promise()}):$.smResolve(restoredContext)}).then(function(){if(!restoredContext||!restoredContext.currentState)return null;restoredContext.history&&restoredContext.history.length>0&&restoredContext.history.forEach(function(state){self.history.push(state)});var opts=$.extend(!0,{},restoredContext.currentState.options);return opts.applicationName=restoredContext.applicationName,self.changePage(restoredContext.currentState.name,opts)})},nativeWrapperJSInterface:function(moduleName,action){var self=this;if(moduleName==="X3WUPApp"&&action==="applicationClosing"){var ctx=self._getSavedContext(!0);return ctx?JSON.stringify(ctx,null,2):null}if(moduleName==="X3WUPApp"&&action==="backButtonPressed")return!self.currentPage||self.currentPage.state.isLogin||self.currentPage.state.isWelcomePage?!1:self.historyPop();if(moduleName==="voiceCommands"&&action==="executeVoiceCommand"){var cmd=arguments[2];if(!cmd)return;if(cmd.type==="openBookmark"){if(!cmd.context)return;log&&log("Bookmark: "+JSON.stringify(cmd||{})),self._swicthToContext(cmd.context);return}}if(moduleName==="share"&&action==="handleLink"){var historyContext=arguments[2];self.gotoWelcomeApplication().then(function(){historyContext&&self._restoreHistoryContext(historyContext)});return}},_swicthToContext:function(context){var self=this;if(!context)return;var step,context;context.endpoint&&context.endpoint!==globals.getEndpoint()?step=initContext.switchContext(context).then(function(currentContext,contextToRestore){return $.smResolve(contextToRestore&&contextToRestore.applicationName,!0)}):step=$.smResolve(context.applicationName,!self.currentPage.state.isWelcomePage),step.then(function(applicationName,forceGotoWelcomeApp){var step=forceGotoWelcomeApp===!0?self.gotoWelcomeApplication():$.smResolve();return step.then(function(){if(applicationName)return self.switchToApplication(applicationName,{noPageChange:!0})})}).then(function(){if(!context.currentState)return self.gotoHome();var opts=$.extend(!0,{},context.currentState.options);return self.changePage(context.currentState.name,opts)}).fail(function(e){globals.getModal().error(e)})}});exports.Application=_Application}),define("syracuse-tablet/html/js/helpers/controller",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/articleParser","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),globals=require("syracuse-tablet/html/js/helpers/globals"),articleParser=require("syracuse-tablet/html/js/helpers/articleParser"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_Klass=utils.defineClass(function(id,prototype,article,options){this.options=options||{},this.id=id||utils.UUID(),this.prototype=prototype,this.article=article,this.rootLayout=null,this.dao=null,this._evtListener=null,this.isVignette=!1,this._controlsMap={},this._layoutsMap={},this.$activity="read",globals.addController(this),notifications.subscribe(this,["sm.lookup.selection"],1),this.destroyed=!1,this.isUnitTest=prototype.data("$isUnitTest")===!0},null,{resetMaps:function(){this._controlsMap={},this._layoutsMap={}},destroy:function(){if(this.destoyed)return;globals.removeController(this),this._controlsMap=null,this._layoutsMap=null,this.dao&&(this.dao.destroy(),this.dao=null),this.rootLayout&&(this.rootLayout.destroy(),this.rootLayout=null),this.prototype&&(this.prototype.destroy(),this.prototype=null),this.removeEventListener(),notifications.unsubscribe(this),this.article=null,this.prototype=null,this.destroyed=!0},addControl:function(c){if(!c||!this._controlsMap)return;this._controlsMap[c.id]=c},removeControl:function(c){if(!c||!this._controlsMap)return;delete this._controlsMap[c.id]},addLayout:function(c){if(!c||!this._layoutsMap)return;this._layoutsMap[c.id]=c},getControl:function(id){return this._controlsMap&&this._controlsMap[id]},getLayout:function(id){return this._layoutsMap&&this._layoutsMap[id]},getStructElmt:function(id){return this.getControl(id)||this.getLayout(id)},forEachControl:function(callBack){if(!callBack)return;var c=null;for(var id in this._controlsMap)if(callBack(id,this._controlsMap[id])){c=this._controlsMap[id];break}return c},getControlByBind:function($bind){for(var p in this._controlsMap)if(this._controlsMap[p].$bind===$bind)return this._controlsMap[p];return null},setDao:function(dao){this.dao&&this.dao.destroy&&this.dao.destroy(),this.dao=dao},isEditMode:function(){return this.$activity==="edit"||this.$activity==="create"},setActivity:function(activity){this.$activity=activity||"read"},buildControlsTree:function(opts){return this.rootLayout&&this.rootLayout.destroy(),this.rootLayout=articleParser.article2Controls(this,this.article,this.prototype,opts||{}),this.rootLayout},render:function($$parent,buildOpts){if(!this.rootLayout)return;this.rootLayout.buildHtml($$parent,this.dao,buildOpts),this.rootLayout.$$elmt.attr("data-controller-id",this.id)},refresh:function(options,callBackInterface){throw new Error("Not implemeneted")},refreshControls:function(ids,options){var self=this,errors=[],_refresh=function(ctrl){if(!ctrl)return;ctrl.refresh(self.dao,options),ctrl.hasError()&&errors.push(ctrl)};return ids&&ids.length>0?ids.forEach(function(id){_refresh(self._controlsMap[id])}):Object.keys(self._controlsMap).forEach(function(key){_refresh(self._controlsMap[key])}),errors},notifActionLink:function(success,link,result,options){throw new Error("not implemented")},notifLookupSelection:function(rowData,controlId){try{var ctrl=this.getControl(controlId);if(!ctrl)throw new Error("Control not found '"+controlId+"'");if(!ctrl.setLookupValue)throw new Error("Control must implement setLookupValue '"+controlId+"'");ctrl.setLookupValue(rowData)}catch(e){globals.getModal().error("notifLookupSelection failed",e)}},checkControlsData:function(){if(!this.isEditMode())return!0;var self=this,ok=!0,firstError,c;return Object.keys(self._controlsMap).forEach(function(key){c=self._controlsMap[key],c&&c.checkData&&(ok=ok&&c.checkData(),!ok&&firstError==null&&(firstError=c))}),firstError&&firstError.setFocus(),ok},makeVisible:function(c){},applyChange:function(newData){if(!newData||!this.dao)return;this.dao.applyChange(newData),this.refreshControls(null,{refreshValue:!0})},replaceData:function(newData){if(!newData||!this.dao)return;this.dao.replaceData(newData),this.refreshControls(null,{refreshValue:!0})},addEventListener:function(eventName,method){if(!method||typeof method!="function")return;this._evtListener||(this._evtListener={}),this._evtListener[eventName]=jsutils.bindFn(method,this)},removeEventListener:function(eventName){if(!this._evtListener)return;if(eventName)this._evtListener[eventName]=null;else for(var p in this._evtListener)this._evtListener=null},getEventListener:function(eventName){return this._evtListener?this._evtListener[eventName]:null}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/pages/page",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/uiSettings","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/controller","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/native/native"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),locale=require("syracuse-tablet/html/js/helpers/locale"),uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/helpers/controller").Klass,log=require("syracuse-tablet/html/js/helpers/logger").getLogger("page"),uiutils=require("syracuse-tablet/html/js/ui/uiUtils"),uiRect=require("syracuse-tablet/html/js/ui/rect"),ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory"),HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,settings=require("syracuse-tablet/html/js/application/settings"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),native=require("syracuse-tablet/html/js/helpers/native/native"),_insidePageControls=["header","breadcrumbs","topToolbar","footer"],_topPageControls=["header","breadcrumbs","topToolbar"],_templates={fullpage:'		<section class="s-m-page s-m-full {{type}} {{subtype}}" id="{{pageid}}" {{#if parentId}}data-parent-id="{{parentId}}"{{/if}} class="ctrl-event-click" style=""> 			<header></header> 			<section class="s-m-breadcrumbs" style="display:none"></section> 			<section class="s-m-topToolbar"  style="display:none"></section> 			<section class="s-m-main-content"></section> 			<footer class="s-m-color-footer" style="display:none"></footer> 		</section> 	',vignette:'<section class= "s-m-page s-m-nested {{type}} {{subtype}}" id="{{pageid}}"></section>',panels:'		<div class="s-m-side-panel-dismiss" data-action="toggleSidePanel" data-params="close,all"></div> 		<aside class="s-m-panel s-m-left"></aside> 		<aside class="s-m-panel s-m-right"></aside>'},_nativeCapabilities={liveTile:{regular:{query:!0}},scheduleMessage:{regular:{query:!0,details:!0,edit:!1},dashboard:{std:!0,welcome:!1}},share:{regular:{query:!0,details:!0},dashboard:{std:!1,welcome:!1}}},_getNativeCapabilities=function(type,subtype){var result={};return["liveTile","scheduleMessage","share"].forEach(function(capability){var pageCapability=_nativeCapabilities[capability];result[capability]=pageCapability&&native.hasCapability(capability),result[capability]&&(result[capability]=pageCapability[type]!=null&&pageCapability[type][subtype]===!0)}),result},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx||{})},PanelManager=function(page){this.page=page,page.isVignette||(page.$$elmt.append($(_getHtml("panels"))),page.$$dismissPanel=page.$$elmt.children(".s-m-side-panel-dismiss")),this.destroy=function(){this.page=null},this.mainPage=function(){return this.page.isVignette?globals.getCurrentPage():this.page},this.panelAttach=function(where,panel,action){var controller=this.mainPage();if(!controller.$$dismissPanel||!panel||where!="right"&&where!="left")return;var currentPanel=controller.getPageControl(where);currentPanel&&currentPanel!=panel&&this.panelDetach(where);if(!panel.isAttached(where)){var $$parent=controller.$$elmt.children("aside.s-m-panel.s-m-"+where);if($$parent.length!=1)return;controller.addControl(panel),controller._pageControls.add(where,panel).attach($$parent,where)}return this.panelToggle(where,panel,action)},this.panelToggle=function(where,panel,action){var controller=this.mainPage();panel||(panel=controller.getPageControl(where));if(!panel||!panel.$$elmt)return null;panel.$$elmt.toggle(action==="close"?!1:undefined);var visible=panel.$$elmt.is(":visible")===!0,newWidth=visible?panel.$$elmt.width():0;panel.closeBox!=1&&(controller.$$dismissPanel[visible?"addClass":"removeClass"](where),controller.$$dismissPanel.css(where,newWidth));if(panel.overlap!=1){var self=this,shiftElmts=[controller.$$contentElmt];_insidePageControls.forEach(function(id){var c=controller.getPageControl(id);c&&shiftElmts.push(c.$$elmt.parent())}),shiftElmts.forEach(function($$elmt){$$elmt.css("left",(visible?(where==="right"?-1:1)*newWidth:0)+"px")})}return panel.notifyToggled(where,action,visible),panel},this.panelDetach=function(where){var controller=this.mainPage();if(!controller.$$dismissPanel)return;var p=controller.getPageControl(where);if(!p)return;this.panelToggle(where,p,"close"),controller.removeControl(p)},this.panelCreate=function(panelId,options){return ctrlFactory.createPanel(this.page,panelId,options)},this.panelResize=function(context){var controller=this.mainPage();["right","left"].forEach(function(w){var p=controller.getPageControl(w);p&&p.onResize&&p.onResize(context)})}},PageControls=function(page){this.page=page,this.map={},this.statics={},this.add=function(id,ctrl){if(!ctrl)return;return this.map[id]&&console.log("Page Control "+id+" already exists"),this.map[id]=ctrl,_insidePageControls.indexOf(id)>=0&&(this.statics[id]=ctrl),ctrl},this.get=function(id){return this.map[id]},this.remove=function(ctrl){if(!ctrl)return;var ctrlType=null;for(var id in this.map)if(this.map[id]===ctrl){ctrlType=id;break}return ctrlType&&(delete this.map[ctrlType],delete this.statics[ctrlType]),ctrl.detach?ctrl.detach():ctrl.$$elmt&&ctrl.$$elmt.detach(),ctrl},this.destroyControls=function(){if(!this.map)return;for(var id in this.map)this.map[id]&&this.map[id].destroy();this.map={},this.statics={}},this.status=function(){var x=[];for(var id in this.map)x.push(id+"="+this.map[id].id);return x.join("/")},this.destroy=function(){this.page=null,this.destroyControls()},this.buildHtml=function(dao,buildOptions){for(var id in this.statics){var $$parent=this.page.$$elmt.children(id);$$parent.length<1&&($$parent=this.page.$$elmt.children(".s-m-"+id)),this.statics[id].buildHtml($$parent,dao,buildOptions)}},this.afterRender=function(buildOpts){for(var id in this.statics)this.statics[id].afterRender&&this.statics[id].afterRender(buildOpts)},this.forAllCtrls=function(cb){for(var id in this.map)cb(id,this.map[id])},this.closeSidePanel=function(){},this.doAfterPageReload=function(addToControlMap){var c;for(var id in this.map){var c=this.map[id];addToControlMap&&this.page.addControl(c),c.refresh&&c.refresh()}}},_defOpts={header:!0,footer:!0,breadcrumbs:!1,topToolbar:!1},_pageSettingPanelId=globals.PANELPAGESETTINGS,_Page=utils.defineClass(function Page($$parent,state,prototype,article,options){Base.call(this,state.uuid,prototype,article,$.extend({},_defOpts,options)),this._pageControls=null,this._panelsManager=null,this._$$parent=$$parent,this.state=state,this.state.options=state.options||{},this.ctrlAfterRenderCalls=[],this.ctrlSaveCtxCalls=[],this.isVignette=state.options.vignette===!0,this.isChild=state.options.parentId!=null,this.nativeCapabilities=_getNativeCapabilities(this.state.type,this.state.subtype),this.isChild&&(this.state.cached=!0),this._initRootElmt($$parent),this.isNew=!1,this.lastSelectedRow=null,this.nbCharts=0,this._pageSettingsPanel=this.panelCreate(_pageSettingPanelId),notifications.subscribe(this,["sm.select.row","sm.updt.card.article","sm.updt.chart.detail.article","sm.scroller.update"],1)},Base,{resetMaps:function(){Base.prototype.resetMaps.call(this),this.ctrlAfterRenderCalls=[],this.ctrlSaveCtxCalls=[]},_initRootElmt:function($$parent){var self=this,type=self.state.type,root,ctx={pageid:self.id,type:type,subtype:self.state.subtype,parentId:self.getParentId()};if(self.isVignette)self.$$contentElmt=self.$$elmt=$(_getHtml("vignette",ctx));else{self.$$elmt=$(_getHtml("fullpage",ctx)),self.$$contentElmt=self.$$elmt.children("section.s-m-main-content"),self._pageControls=new PageControls(self);var shift=0;_topPageControls.forEach(function(id){self.options[id]===!0&&(shift+=uiSettings.getProp(id+".height"))}),shift>0&&self.$$contentElmt.css({top:shift})}self._panelsManager=new PanelManager(self),self.scrollAllowed()?(self.$$scrollWrapper=$('<div class="s-m-scroll-wrapper"/>').appendTo(self.$$contentElmt),self.$$scrollWrapper.css({height:"auto"}),self.$$ctrlsRootElmt=self.$$scrollWrapper,self._gestureMgr=new HammerScroller(self.$$scrollWrapper,{isPageScroller:!self.isVignette})):self.$$ctrlsRootElmt=self.$$contentElmt,self.$$elmt.hide(),self.$$elmt.appendTo($$parent),self.$$elmt.smPageController(self)},destroy:function(){if(this.destoyed)return;Base.prototype.destroy.call(this),this._$$parent=null,this._pageControls&&(this._pageControls.destroy(),this._pageControls=null),this._panelsManager&&(this._panelsManager.destroy(),this._panelsManager=null),this._waiting&&(uiutils.waitWheelDestroy(this._waiting),this._waiting=null),this.ctrlAfterRenderCalls=null,this.ctrlSaveCtxCalls=null,this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null),this.$$elmt&&(this.$$elmt.smPageRemoveController(this),this.$$elmt.unbind(),this.$$elmt.remove(),this.$$elmt=null),this._pageSettingsPanel=null},destroySiblings:function(){if(this.$$elmt){log&&log("Page destroySiblings","destroySiblings");var next=this.$$elmt.siblings(function(idx){var ctrl=$(this).smPageController();ctrl&&ctrl.destroy()})}},isSamePage:function(pageName,pageOptions){return!this.destropyed&&this.isActive()&&this.state.name===pageName},panelAttachPageSettings:function(ctx,opt){this.pageSettings={ctx:ctx,opt:opt},this.panelAttach("right",this._pageSettingsPanel,"toggle")},getType:function(){return this.state.type},getProp:function(prop){return utils.getPropByPath(this.state,prop)},getPageControl:function(typeControl){return this._pageControls?this._pageControls.get(typeControl):!1},openLinkInVignette:function(){return this.state.options.openLinkInVignette===!0},load:function(loadOptions){var self=this;loadOptions=loadOptions||{};var timeLine=utils.getTimeLine("page",self.state.name);return timeLine&&timeLine.start(),$.smResolve().then(function(){return self.initOnLoad()}).then(function(){return self.buildHtmlOption(loadOptions)}).then(function(opts){return self.buildOpts=opts,self.loadStructure(loadOptions)}).then(function(){timeLine&&timeLine.step("loadStructure");if(self.destroyed)return;return self.loadData(loadOptions)}).then(function(){timeLine&&timeLine.step("loadData");if(self.destroyed)return;return self.render(loadOptions,self.buildOpts)}).then(function(){timeLine&&timeLine.step("render");if(self.destroyed)return;return self.afterRender(loadOptions,self.buildOpts)}).then(function(){timeLine&&timeLine.stop()})},loadStructure:function(loadOptions){var self=this;return $.smResolve().then(function(){if(!self.article||!self.prototype)throw new Error("loadStructure - NULL article or prototype");if(self._pageControls&&loadOptions.skipPageControls!==!0){var top=0;_insidePageControls.forEach(function(id){if(self.options[id]===!0){var ctrl=self.createPageControl(id);ctrl&&(self["_page"+id.smCapitalize()]=self._pageControls.add(id,ctrl),_topPageControls.indexOf(id)>=0&&(self["_$$"+id]=self.$$elmt.children("section.s-m-"+id).show().css("top",top),top+=uiSettings.getProp(id+".height")))}})}var opts={notifyFocus:self.isVignette&&(self.$activity==="edit"||self.$activity==="create")};self.buildControlsTree(opts)})},createPageControl:function(id){return ctrlFactory.createPageControl(id,this)},loadData:function(loadOptions){var self=this;return $.smResolve().then(function(){self.setDao(null)})},render:function(loadOptions,buildOpts){var self=this;return $.smResolve().then(function(){if(!self.rootLayout)throw new Error("buildHtml - NULL rootLayout");self._pageControls&&loadOptions.skipPageControls!==!0&&self._pageControls.buildHtml(self.dao,buildOpts),self.$$ctrlsRootElmt&&(self.beforeAddContent(),Base.prototype.render.call(self,self.$$ctrlsRootElmt,buildOpts))})},initOnLoad:function(){return $.smResolve()},buildHtmlOption:function(loadOptions){var self=this,resultOpts={authoringUpdate:loadOptions.authoringUpdate===!0,updateLayout:loadOptions.updateLayout===!0,makeFullHeight:self.isVignette,toolBars:{showAuthoring:self.state.disableAuthoring!==!0,showUserMenuLinks:!self.isChild,showHome:!self.isChild&&!this.state.isWelcomePage,showActions:!0,showNativeShare:self.nativeCapabilities.share,showPageSettings:self.showPageSettings()}};return settings.isPinnedPage(self.getPinPageId()).then(function(isPinned){resultOpts.toolBars.statusPinPage=self.isChild?0:isPinned?2:1}).then(function(){self.isChild&&(self.$facet==="lookup"?resultOpts.showAuthoring=resultOpts.showAuthoring&&!0:resultOpts.showAuthoring=!1)}).then(function(){return resultOpts})},authUpdateLayout:function(article,options){return this.article=article,options=options||{},options.authoringUpdate=!0,this.reload(options)},refresh:function(options,callBackInterface){return this.reload()},reload:function(options){var self=this;self.waitWheelStart(),self.resetMaps(),self.rootLayout.destroy();var updatePageControls=(self.article.$allowDownload!=null||self.article.$pageActionSettings!=null)&&self._pageControls!=null;return updatePageControls&&self._pageControls.destroyControls(),self.$$ctrlsRootElmt.empty(),options=options||{},options.updateLayout==null&&(options.updateLayout=!0),options.reload=!0,options.skipPageControls=updatePageControls===!1,self.load(options).then(function(){self._pageControls&&self._pageControls.doAfterPageReload(options.skipPageControls),uiutils.triggerResizeInternal(options)}).then(function(){self.waitWheelStop()}).fail(function(e){self.waitWheelStop(),globals.getModal().error("Error",e)})},onMainPageResize:function(info,orientation,deviceClass){var self=this;if(!this.isVignette){info.deviceChanged&&(this.toggleHeaderFooter("header",null,!0),this.toggleHeaderFooter("footer",null,!0)),this._deviceType&&this.$$elmt.removeClass(this._deviceType),this._deviceType=globals.getSiteLayout().getDeviceType(),this.$$elmt.addClass(this._deviceType);var top=0,left=0,contentHeight=info.application.height,contentWidth=info.application.width;if(self._pageControls){info.contentWidth=contentWidth,info.contentHeight=contentHeight,self._pageControls.forAllCtrls(function(id,ctrl){ctrl.onMainPageResize&&ctrl.onMainPageResize(info,orientation,deviceClass)});var ctrl;_insidePageControls.forEach(function(id){ctrl=self.getPageControl(id);if(ctrl&&ctrl.isVisible()){var ch=ctrl.getHeight();contentHeight-=ch;if(_topPageControls.indexOf(id)>=0){var $$root=self["_$$"+id];$$root&&($$root.css({top:top}),top+=ch)}}})}self.$$contentElmt.css({top:top+"px",left:left+"px",width:contentWidth+"px",height:contentHeight+"px"})}self._mainContentRect=uiRect.elmtRect(self.$$contentElmt,"computed"),self._mainContentRect.moveLeft(parseInt(self.$$contentElmt.css("padding-left"),10)),self._initScroll(info&&info.preserveScroll),self.onResize(info)},getMainContentRect:function(){return this._mainContentRect},onResize:function(context){this.sizeModified!=1&&(this._resizeContext&&context?this.sizeModified=this._resizeContext.contentHeight!=context.contentHeight||this._resizeContext.contentWidth!=context.contentWidth:this.sizeModified=!1),this._resizeContext=$.extend({},context),this.rootLayout&&this.rootLayout.onResize&&this.rootLayout.onResize(context),this._panelsManager&&this._panelsManager.panelResize(context)},afterRender:function(loadOptions,buildOpts){var self=this;return $.smResolve().then(function(){self.ctrlAfterRenderCalls.forEach(function(c){c.afterRender(buildOpts)}),self._pageControls&&loadOptions.skipPageControls!==!0&&self._pageControls.afterRender(buildOpts)})},beforeAddContent:function(){},addTitle:function(title,description){var html="";title&&(html='<header class="s-m-page-title">'+title+"</header>"),description&&(html+="<p>"+description+"<p>"),html.length>0&&$(html).prependTo(this.$$ctrlsRootElmt)},addControl:function(c){Base.prototype.addControl.call(this,c),c.isPageControl()||(c.afterRender&&this.ctrlAfterRenderCalls.push(c),c.savedCtxCreate&&c.savedCtxRestore&&this.ctrlSaveCtxCalls.push(c)),c.$type==="application/x-array"&&jsutils.isInstanceOf(c,"CtrlArrayChart")&&c.isHighChart()&&this.nbCharts++},removeControl:function(c){if(!c)return;return Base.prototype.removeControl.call(this,c),this._pageControls&&c.isPageControl()&&this._pageControls.remove(c),c},activate:function(pageToClose,cb){var self=this;self._show(pageToClose,function(){self._getSavedContext()?self.savedCtxRestore(self._getSavedContext()):self.lastSelectedRow&&self._hilightLastSelectedRow(self.lastSelectedRow),cb&&cb()})},activated:function(){},deactivate:function(cb){this._hide(cb)},savedCtxCreate:function(){var self=this,ctx={pageName:this.state.name,lastSelectedRow:self.lastSelectedRow};return self._gestureMgr&&(ctx.scroll=self._gestureMgr.savedCtxCreate()),self.ctrlSaveCtxCalls&&self.ctrlSaveCtxCalls.length>0&&(ctx.ctxCtrls={},self.ctrlSaveCtxCalls.forEach(function(c){var ctrlCtx=c.savedCtxCreate();ctrlCtx&&(ctx.ctxCtrls[c.$bind]=ctrlCtx)})),ctx},savedCtxRestore:function(ctx){var self=this;if(!ctx)return;if(ctx.pageName!=this.state.name)return;self._gestureMgr&&ctx.scroll&&self._gestureMgr.savedCtxRestore(ctx.scroll,!0);if(ctx.ctxCtrls)for(var bind in ctx.ctxCtrls){var c=self.getControlByBind(bind),ctrlCtx=self.getCtrlSavedContext(bind);c&&c.savedCtxRestore&&ctrlCtx&&c.savedCtxRestore(ctrlCtx)}},_getSavedContext:function(propName){var ctx=this.state.savedContext;return!propName||!ctx?ctx:ctx[propName]},updateSavedContext:function(clear){this.state.savedContext=clear?null:this.savedCtxCreate()},getCtrlSavedContext:function(bind){var ctx=this._getSavedContext("ctxCtrls");return ctx&&bind?ctx[bind]:null},_hilightLastSelectedRow:function(lastSelectedRow,old){var self=this,toggle=function(rowInfo,show){var c=self.getControlByBind(rowInfo.array$Bind);c&&c.selectLastSelectedRow&&c.selectLastSelectedRow(rowInfo.rowId,show)};return old&&toggle(old,!1),lastSelectedRow?(toggle(lastSelectedRow,!0),!0):!1},_show:function(currentPage,cb){var self=this,transition=self.getProp("transition");if(currentPage){currentPage._hide(function(){self.$$elmt.show(transition||0,function(){cb&&cb()})});return}self.$$elmt.show(transition==null?0:transition,cb)},_hide:function(cb){if(!this.$$elmt){cb&&cb();return}this._pageControls&&this._pageControls.closeSidePanel("all");var transition=this.getProp("transition");this.$$elmt.hide(transition==null?0:transition,cb)},isActive:function(){return this.$$elmt&&this.$$elmt.is(":visible")},isLookup:function(){return this.prototype&&this.prototype.isLookup()},isAppHomePage:function(){return this.state.name===globals.getApplication().homePageId},getParentNotif:function(){throw new Error("not implemented")},getParentId:function(){return this.isChild?this.state.options.parentId:null},getOpenLinkAttrs:function(){return{"data-nav":this.state.name}},_actTest:function(params){var e=$('<h5 style="color:red">Action test succeeded</h5>').prependTo(this.$$elmt);window.setTimeout(function(){e.remove()},2e3)},_actHome:function(){globals.getApplication().gotoWelcomeApplication()},waitWheelStart:function(controlId){if(controlId){var c=this.getControl(controlId);c&&c.waitStart&&c.waitStart();return}if(this.getParentVignette()){this.getParentVignette().waitStart();return}this._waiting||(this._waiting=uiutils.waitWheelCreate(this.$$elmt)),uiutils.waitWheelStart(this._waiting)},waitWheelStop:function(controlId){if(controlId){var c=this.getControl(controlId);c&&c.waitStop&&c.waitStop();return}if(this.getParentVignette()){this.getParentVignette().waitStop();return}this._waiting&&uiutils.waitWheelStop(this._waiting)},notifSelectRow:function(arrayId,rowId,rowdata){var c=this.getControl(arrayId);if(!c)return;var old=this.lastSelectedRow;this.lastSelectedRow={array$Bind:c.$bind,rowId:rowId},this._hilightLastSelectedRow(this.lastSelectedRow,old)},goBack:function(){return this.isVignette?this.getParentVignette().goBack():globals.getApplication().goBack()},initVignetteScroll:function(back){if(!this._gestureMgr)return;var viewRect=this.getParentVignette().getScrollViewRect(),keepOldScrolling=back===!0;this._gestureMgr.init(viewRect,"v",0,keepOldScrolling)},_initScroll:function(preserveScroll){if(!this._gestureMgr)return;if(this.scrollAllowed()){var viewRect=this.isVignette?this.getParentVignette().getScrollViewRect():this._mainContentRect;if(viewRect&&viewRect.height<this.$$scrollWrapper.height()){var valMax=0;preserveScroll=preserveScroll===!0||this.isNew!==!0,this._gestureMgr.init(viewRect,"v",valMax,preserveScroll);var autoScroll=this.state.options["auto-scroll"];autoScroll!=null&&(this.autoScroll(autoScroll),this.state.options["auto-scroll"]=undefined)}else this._gestureMgr.reset()}else this._gestureMgr.reset()},notifScrollerUpdate:function(){if(!this._gestureMgr)return;if(this._gestureMgr.viewRect&&this._mainContentRect.equals(this._gestureMgr.viewRect,!0))return;this._initScroll(!0)},autoScroll:function(value){this._gestureMgr&&this._gestureMgr.autoScroll(value)},scrollAllowed:function(){return!this.isVignette&&!this.isDashboard("hub")},isDashboard:function(typeDashboard){return!1},isNestedInDashboard:function(typeDashboard){return this.isVignette?this.getParentVignette()?this.getParentVignette().controller.isDashboard(typeDashboard):!1:!1},getScrollOffset:function(){return globals.getApplication().getScrollOffset()},getScrollValue:function(){return this._gestureMgr?this._gestureMgr.getScrollValue():0},setParentVignette:function(v){this._parentVignette=v},getParentVignette:function(){return this._parentVignette},getParentDashboardType:function(){return!this.isVignette||!this.getParentVignette()?null:jsutils.isInstanceOf(this.getParentVignette().parent,"LayoutTile")?"hub":"stack"},getGestureMgr:function(){return this._gestureMgr},makeVisible:function(c){if(!c||!this.getGestureMgr()||!c.$$elmt)return;this.getGestureMgr().makeVisible(c.$$elmt)},panelAttach:function(where,panel,action){return this._panelsManager?this._panelsManager.panelAttach(where,panel,action):null},panelDetach:function(where){return this._panelsManager?this._panelsManager.panelDetach(where):null},panelCreate:function(panelId,options){return this._panelsManager?this._panelsManager.panelCreate(panelId,options):null},_actToggleSidePanel:function(action,side){if(!this._panelsManager)return;var self=this,side=side==null||side==="all"?["left","right"]:[side];side.forEach(function(where){self._panelsManager.panelToggle(where,null,action)})},externalLink:function(param){window.open(param)},_actExternalLink:function(param){this.externalLink(param)},getPinPageId:function(){},getPinPageData:function(){return{name:this.state.name,title:this.prototype.data("$title")||locale.text("no.title"),id:this.getPinPageId(),icon:"star",applicationName:this.state.applicationName,voiceCommandContext:this.getRestoreContext()}},getRestoreContext:function(){var self=this,ctx={endpoint:globals.getEndpoint(),applicationName:self.state.applicationName,role:globals.getUserRole(),currentState:{name:self.state.name,options:{}}};return self.state.options&&["dataParams"].forEach(function(p){ctx.currentState.options[p]=self.state.options[p]}),ctx},getTileLinkContext:function(){return{Title:this.state.$title,Description:"",DeepLink:{Title:this.state.$title,Url:jsutils.getOpenLinkUrl(this.getRestoreContext())}}},getAuthoring:function(path,defValue){var val=utils.getPropByPath(this.article,path);return val!=null?val:defValue},notifUpdtCardArticle:function(notifData,controlId){var array=this.getControl(controlId);if(!array||!notifData)return;array.setCardAuthoring(notifData.article)},notifUpdtChartDetailArticle:function(notifData,controlId){var chart=this.getControl(controlId);if(!chart||!notifData)return;chart.setChartDetailAuthoring(notifData.article)},getLinkedPageArticle:function(ctrlId){if(!ctrlId)return;var ctrl=utils.findControl($("#"+ctrlId,this.$$elmt));if(!ctrl||!ctrl.getLinkedPageArticle)return;return ctrl.getLinkedPageArticle()},getToolbarLinks:function(){return null},getProtoLinks:function(){return null},getMultiSelectionLinks:function(){return null},actionGetSettings:function(actName,prop){var $actionsSettings=this.getAuthoring("$pageActionSettings");if(!$actionsSettings)return null;var res;return $actionsSettings.some(function(setting){return setting.name===actName?(res=setting,!0):!1}),res==null?null:prop==null?res:res[prop]},isMultiSelectionEnabled:function(){return this.getAuthoring("$allowDownload")===!0||this.getMultiSelectionLinks()!=null},hasFooterHeaderActions:function(){return!1},toggleHeaderFooter:function(typeControl,newControl,show){var currentControl=this.getPageControl(typeControl);newControl==null&&(newControl=this["_page"+typeControl.smCapitalize()],show=undefined);if(show===!0&&newControl===currentControl)return currentControl;if(show===!1&&newControl!==currentControl)return currentControl;currentControl&&(this.removeControl(currentControl),newControl===currentControl&&show===!1&&(newControl=this["_page"+typeControl.smCapitalize()])),this._pageControls.add(typeControl,newControl),this.addControl(newControl);var $$root=this.$$elmt.children(typeControl);return newControl.$$elmt?($$root.append(newControl.$$elmt),newControl.$$elmt.find("a").css("display","inline-block")):newControl.buildHtml($$root,this.dao),newControl.notifToggled(!0),currentControl},showPageSettings:function(){return this.nativeCapabilities&&(this.nativeCapabilities.liveTile||this.nativeCapabilities.scheduleMsg||this.nativeCapabilities.share)}});exports.Page=_Page}),define("syracuse-tablet/html/js/pages/pageDashboard",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/pages/page","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modals/modal"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),Base=require("syracuse-tablet/html/js/pages/page").Page,locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),_Page=utils.defineClass(function DashboardPage($parent,state,prototype,article,options){options.breadcrumbs==null&&(options.breadcrumbs=!0),Base.call(this,$parent,state,prototype,article,options),this.vignettes=[],this._vignettesLoaderStates=[],this.cacheNotify=!0;var app=globals.getApplication();app.dao.isSageApplication()&&this.state.dashboardName===app.dao.getHomeDashboardName()&&this.$$contentElmt.addClass(app.dao.getAppBackGroundClass()),this._nbCharts=0},Base,{destroy:function(){if(this.destoyed)return;Base.prototype.destroy.call(this),this.vignettes=null,this._vignettesLoaderStates=null},loadData:function(loadOptions){return this.cacheNotify=!0,null},reload:function(options){return this.vignettes=[],Base.prototype.reload.call(this,options)},beforeAddContent:function(){},addControl:function(c){Base.prototype.addControl.call(this,c),c&&c.isVignette&&c.isVignette()&&this.vignettes.push(c)},afterRender:function(loadOptions,buildOpts){var self=this;return Base.prototype.afterRender.call(self,loadOptions,buildOpts).then(function(){if(self.vignettes==null||self.vignettes.length==0)return;var vignetteNum=0,dashName=self.prototype.data("$dashboardName"),join=$.Deferred();return loadOptions.forceSynchroVignettes=globals.isAuthoringActive()||loadOptions.forceSynchroVignettes,setTimeout(function(){if(self.destroyed||!self.vignettes)return;self.vignettes.forEach(function(v){var pageOptions={sdataParameters:self.state.options&&self.state.options.sdataParameters||{},vignetteName:dashName+"#"+vignetteNum},vLoadOptions={updateLayout:loadOptions.updateLayout===!0};v.load(null,pageOptions,vLoadOptions).then(function(page,error){return self._checkVignetteLoadError(error),vignetteNum++,vignetteNum===self.vignettes.length&&join.resolve(),page&&page.nbCharts!=null&&(self.nbCharts+=page.nbCharts),page})})}),loadOptions.forceSynchroVignettes===!0?join.promise():$.smResolve()})},_checkVignetteLoadError:function(error){var self=this;if(!self.vignettes||!self._vignettesLoaderStates)return;self._vignettesLoaderStates.push({error:error});if(self._vignettesLoaderStates.length===this.vignettes.length){var goLogin=!1,e;self._vignettesLoaderStates.some(function(s){if(s.error&&s.error.$redirectPage==="login")return e=s.error,!0}),self._vignettesLoaderStates=[],e&&modal.error(locale.text("error.page.loading"),e,function(){globals.getApplication().gotoLogin(locale.text("login.timeout.message"))})}},onMainPageResize:function(info,orientation,deviceClass){Base.prototype.onMainPageResize.call(this,info,orientation,deviceClass),this._chartsCounter=0,this.vignettes.forEach(function(v){v.onMainPageResize(info,orientation,deviceClass)})},countChartLoaded:function(chart){if(this._chartsCounter==null||!globals.getCurrentPage().isDashboard("hub")||!jsutils.checkCurrentBrowser("chrome"))return;this._chartsCounter++,this._chartsCounter===this.nbCharts&&(this._$$fakeLink||(this._$$fakeLink=$('<link rel="stylesheet" type="text/css">')),this._$$fakeLink.appendTo($("head")).detach(),this._chartsCounter=null)},authUpdateLayout:function(article,vignetteToUpdt){return this.article=article,vignetteToUpdt?vignetteToUpdt.reloadPage({updateLayout:!0,authoringUpdate:!0}):(this.vignettes=[],Base.prototype.authUpdateLayout.call(this,article))},savedCtxCreate:function(){var ctx=Base.prototype.savedCtxCreate.call(this);ctx.vignettes=[];var p;return this.vignettes&&this.vignettes.forEach(function(v){p=v.getPage(),ctx.vignettes.push(p?p.savedCtxCreate():null)}),this.isDashboard("hub")&&(ctx.hubCtx=this.rootLayout.savedCtxCreate()),ctx},savedCtxRestore:function(ctx){Base.prototype.savedCtxRestore.call(this,ctx),this._savedVignetteContext=ctx.vignettes,ctx.hubCtx&&this.isDashboard("hub")&&this.rootLayout.savedCtxRestore(ctx.hubCtx)},getSavedCtxVignette:function(v){if(v==null||this._savedVignetteContext==null)return null;var idx=this.vignettes.indexOf(v);return idx==-1||idx>this._savedVignetteContext.length-1?null:this._savedVignetteContext[idx]},getPinPageId:function(){var self=this;return self.state.dashboardName+"_"+JSON.stringify(self.state.options.sdataParameters)},_sdataParam:function(){var self=this,params;return self.state.options.sdataParameters&&Object.keys(self.state.options.sdataParameters).forEach(function(key){var opt=key+"="+self.state.options.sdataParameters[key];params?params+="&"+opt:params=opt}),params},getPinPageData:function(){var pageData=Base.prototype.getPinPageData.call(this);return pageData.dashboardName=this.state.dashboardName,pageData.$type=this.state.options&&this.isAppHomePage()===!0?"$application":"$dashboard",pageData.sdataParameters=this._sdataParam(),pageData.endpoint=globals.getEndpoint(),pageData},getRestoreContext:function(){var ctx=Base.prototype.getRestoreContext.call(this),params=this._sdataParam();return params&&(ctx.currentState.options.sdataParameters=params),ctx},cachedDataNotification:function(message){this.cacheNotify===!0&&(globals.getModal().notify(message),this.cacheNotify=!1)},isDashboard:function(typeDashboard){return typeDashboard?this.rootLayout&&this.rootLayout.$type===typeDashboard:!0},getGestureMgr:function(){return this.isDashboard("hub")?this.rootLayout.getGestureMgr():Base.prototype.getGestureMgr.call(this)},getScrollOffset:function(){var offset=globals.getApplication().getScrollOffset();if(this.isDashboard("hub")&&this.getGestureMgr()){var o=this.getGestureMgr().getOffset();return offset.top+=o.top,offset.left+=o.left,o}return offset}});exports.Page=_Page}),define("syracuse-tablet/html/js/sdata/entities/welcomeApplication",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/native/native"],function(require,exports,module){function _buildGadget(page){return page.dashboardName?_buildDashboardGadget(page):_buildRepresentationGadget(page)}function _buildRepresentationGadget(page){return{$type:"$representation",$title:page.title,entity:page.entity,action:page.action,representation:page.representation,facet:page.facet,keyParameter:page.key,endpoint:page.endpoint,applicationName:page.applicationName,icon:page.icon}}function _buildDashboardGadget(page){return{$type:page.$type||"$dashboard",$title:page.title,dashboardName:page.dashboardName,applicationName:page.applicationName,sdataParameters:page.sdataParameters,endpoint:page.endpoint,icon:page.icon}}function _addPinnedPages(dashboard,apps,voiceBookmarks){var grp,pageId=1,tileConfigs,endpoint=globals.getEndpoint(),appNames;return appNames=apps.map(function(a){return a.applicationName}),settings.getTileConfigs().then(function(tc){tileConfigs=tc}).then(function(){return settings.getPinnedPages()}).then(function(pp){if(pp.length<=0)return;grp={$layoutType:"hubGroup",$title:locale.text("welcome.myquicklinks"),$items:[]},pp.forEach(function(page){if(appNames.indexOf(page.applicationName)>=0){var config=tileConfigs["pin-"+page.id];config=config||{};var gadgetName="$$$"+pageId;pageId++;var vignetteName=gadgetName,gadget=_buildGadget(page);if(nativeVoiceCommmands){var voiceCmd=nativeVoiceCommmands.createCommandFromPage(page,config.title);voiceCmd&&voiceBookmarks.push(voiceCmd)}gadget.endpoint===endpoint&&(gadget.$title=config.title||gadget.$title,gadget.icon=config.icon||gadget.icon,gadget.pinPageId=page.id,dashboard.$gadgets[gadgetName]=gadget,dashboard.$vignettes[vignetteName]={$uuid:gadgetName,$displayStyle:"$link"},grp.$items.push({$layoutType:"tile",$bgColor:config.color||"darkgrey",$items:[{$bind:vignetteName}],$size:config.size||"medium"}))}})}).then(function(){grp&&grp.$items&&grp.$items.length>0&&dashboard.$article.$items.push(grp)})}function _addApps(dashboard,apps,voiceBookmarks){var apps,hiddenApps,groups={sageAppli:{$layoutType:"hubGroup",$title:locale.text("welcome.sageapp"),$items:[]},byDefault:{$layoutType:"hubGroup",$title:locale.text("welcome.myapps"),$items:[]}},tileConfigs;return settings.getTileConfigs().then(function(tc){tileConfigs=tc}).then(function(){return settings.getHiddenApplications()}).then(function(hiddenAppsList){hiddenApps=hiddenAppsList,_appList.hidden=[],_appList.visible=[],hiddenApps.forEach(function(name){apps.forEach(function(appInfo){name===appInfo.applicationName&&_appList.hidden.push(appInfo)})}),apps.forEach(function(appInfo){var name=appInfo.applicationName;if(appInfo.applicationName!==_welcomeApplication.$application.applicationName&&hiddenApps.indexOf(name)<0){_appList.visible.push(name);var config=tileConfigs["app-"+name];config=config||{};var name="$welcome_"+appInfo.applicationName,gadget={$type:"$application",$title:config.title||appInfo.title,applicationName:appInfo.applicationName,icon:config.icon||appInfo.iconName},vignette={$uuid:name};if(nativeVoiceCommmands){var voiceCmd=nativeVoiceCommmands.createCommandFromAppli(gadget.$title,appInfo);voiceCmd&&voiceBookmarks.push(voiceCmd)}dashboard.$gadgets[name]=gadget,dashboard.$vignettes[name]=vignette;var appTile={$layoutType:"tile",$bgColor:config.color,$items:[{$bind:name}],$size:config.size||"medium"};_checkTileStatus(appInfo,appTile),groups[appInfo.isSageApplication?"sageAppli":"byDefault"].$items.push(appTile)}});for(var p in groups)(globals.isDvlpMode()||p!=="sageAppli")&&groups[p].$items.length>0&&dashboard.$article.$items.push(groups[p])})}function _checkTileStatus(app,appTile){if(app.versionNumber==null)return;app.localVersionNumber!=null&&app.localVersionNumber!=app.versionNumber&&(appTile.$icon="appUpdate")}function _updateWelcomeDashboard(dashboard){var meta=globals.getMetaData(),appList;dashboard.$gadgets={},dashboard.$vignettes={},dashboard.$article={$layoutType:"hub",$linksOnly:!0,$items:[]};var voiceBookmarks=nativeVoiceCommmands?[]:null;return dashboard.$title=locale.text("welcome.title.home"),$.smResolve().then(function(){var forceReadApps=globals.needToCheckAppsList();return globals.setNeedToCheckAppsList(!1),forceReadApps=forceReadApps&&globals.isOnline(),meta.getApplications(forceReadApps)}).then(function(apps){appList=apps}).then(function(){return _addPinnedPages(dashboard,appList,voiceBookmarks)}).then(function(){return _addApps(dashboard,appList,voiceBookmarks)}).then(function(){return voiceBookmarks&&nativeVoiceCommmands.setVoiceCommands(voiceBookmarks),dashboard}).fail(function(e){return console.log(e),$.smReject(e)})}var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),globals=require("syracuse-tablet/html/js/helpers/globals"),settings=require("syracuse-tablet/html/js/application/settings"),locale=require("syracuse-tablet/html/js/helpers/locale"),nativeVoiceCommmands=require("syracuse-tablet/html/js/helpers/native/native").getModule("voiceCommands"),_appList={hidden:[],visible:[]},_welcomeApplication={$application:{$uuid:"$welcomeApplication",applicationName:"$welcomeApplication",title:"",description:"",iconName:"gears",$homeDashboard:{$uuid:"$welcomeDashboard",dashboardName:"$welcomeDashboard"}},$dashboards:{$welcomeDashboard:{$pageInfo:{isWelcomePage:!0,disableAuthoring:!0},$update:function(dashboard){return _updateWelcomeDashboard(dashboard)},$dashboardName:"$welcomeDashboard",$title:"",$description:""}}};exports.register=function(){clientContract.registerApp(_welcomeApplication)},exports.getApplicationLists=function(){return _appList}}),define("syracuse-tablet/html/js/ui/modals/modalChooseApps",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),_templateAll={header:'			<buttons class="pull-right"> 				<button type="button" class="btn btn-default s-m-modal-btn-validate" data-action="$validate"></button> 				<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 			</buttons> 			<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">				<div class="form-group s-m-scroll-element"> 					<div class="list-group">						{{#each appList}} 							<a draggable="false" href="#" class="list-group-item" data-action="clickApp" data-params="{{applicationName}}">								<h4 class="list-group-item-heading">{{title}}</h4>								<p class="list-group-item-text">{{description}}</p>							</a>						{{/each}} 					</div> 				</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalChooseApps(appList){var self=this;modalDialog.ModalBase.call(self),self.appList=[],appList.forEach(function(a){self.appList.push(a)}),self.selectedApps={}},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="half_right":displayFlags.modalClass="full",displayFlags},_getDataContext:function(){var self=this;return{label_validate:locale.text("welcome.select.app.add"),label_cancel:locale.text("welcome.select.app.cancel"),title:locale.text("welcome.select.app.title"),appList:self.appList}},_onValidate:function(){},_onCancel:function(){var self=this;self.selectedApps={}},_onAction:function(action,param){var self=this;if(action==="clickApp"){var $$app=self.$$elmt.find('[data-params="'+param+'"]');self.selectedApps[param]?($$app.removeClass("active"),delete self.selectedApps[param]):($$app.addClass("active"),self.selectedApps[param]=!0)}return!1},_getResult:function(){var self=this;return Object.keys(self.selectedApps)}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/ui/modals/modalConfigTile",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/authoring/authoringProperties"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),authoringProperties=require("syracuse-tablet/html/js/authoring/authoringProperties"),_templateAll={header:'		<buttons class="pull-right"> 			<button type="button" class="btn btn-default s-m-modal-btn-validate" data-action="$validate"></button> 			<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 		</buttons> 		<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">				<div class="form-group s-m-scroll-element"> 					<label>{{lab_title}}</label> 					<input id="tile_title" value="{{tileTitle}}"> 					<label>{{lab_color}}</label> 					<div class="s-m-list-colors">						{{#each colors}} 							<a draggable="false" href="#" {{#if active}}class="active"{{/if}} data-action="clickColor" data-params="{{value}}">								<div class="s-m-bg s-m-color-{{value}}"> 								</div> 							</a>						{{/each}} 					</div> 					<label>{{lab_size}}</label> 					<div class="s-m-list-sizes">						{{#each sizes}} 							<a draggable="false" href="#" {{#if active}}class="active"{{/if}} data-action="clickSize" data-params="{{value}}">{{label}}</a>						{{/each}} 					</div> 					<label>{{lab_icon}}</label> 					<div class="s-m-list-icons">						{{#each icons}} 							<a draggable="false" href="#" {{#if active}}class="active"{{/if}} data-action="clickIcon" data-params="{{value}}"> 								<i class="{{label}}"/> 							</a>						{{/each}} 					</div> 					<div style="width:100%; display: inline-block;"></div> 				</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalConfigTile(tile){var self=this;modalDialog.ModalBase.call(self),self.tile=tile,self.result=null},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="config-tile half_right":displayFlags.modalClass="config-tile full",displayFlags},_getDataContext:function(){var self=this;authoringProperties.initProperties();var properties=authoringProperties.getAllProperties(),data={label_validate:locale.text("welcome.tile.cfg.ok"),label_cancel:locale.text("welcome.tile.cfg.cancel"),title:locale.text("welcome.tile.cfg.title"),lab_title:locale.text("welcome.tile.cfg.lab_title"),lab_color:locale.text("welcome.tile.cfg.lab_color"),lab_size:locale.text("welcome.tile.cfg.lab_size"),lab_icon:locale.text("welcome.tile.cfg.lab_icon")};return data.colors=properties.tileColor.values.map(function(e){return{active:self.tile.color===e.value,value:e.value,label:e.label}}),data.sizes=properties.tileSize.values.map(function(e){return{active:self.tile.size===e.value,value:e.value,label:e.label}}),data.icons=fontUtils.getTileIconList().map(function(e){var cls=fontUtils.getIconByName(e);return{active:self.tile.icon===e,value:e,label:cls}}),data.tileTitle=self.tile.title,data},_onValidate:function(){var self=this,$$selected=self.$$elmt.find("a.active"),i,tile=$.extend(!0,{},self.tile);tile.title=self.$$elmt.find("#tile_title").val();for(i=0;i<$$selected.length;i++){var action=$($$selected[i]).attr("data-action"),param=$($$selected[i]).attr("data-params");switch(action){case"clickColor":tile.color=param;break;case"clickSize":tile.size=param;break;case"clickIcon":tile.icon=param}}self.result=tile},_onCancel:function(){var self=this;self.result=null},_onAction:function(action,param){var self=this;switch(action){case"clickColor":case"clickSize":case"clickIcon":var $$old=self.$$elmt.find('a.active[data-action="'+action+'"]'),$$new=self.$$elmt.find('a[data-action="'+action+'"][data-params="'+param+'"]');$$old.removeClass("active"),$$new.addClass("active")}return!1},_getResult:function(){var self=this;return self.result}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/pages/pageWelcomeDashboard",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageDashboard","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/sdata/entities/welcomeApplication","syracuse-tablet/html/js/ui/modals/modalChooseApps","syracuse-tablet/html/js/ui/modals/modalConfigTile"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/pages/pageDashboard").Page,locale=require("syracuse-tablet/html/js/helpers/locale"),settings=require("syracuse-tablet/html/js/application/settings"),welcomeApplication=require("syracuse-tablet/html/js/sdata/entities/welcomeApplication"),modalChooseApps=require("syracuse-tablet/html/js/ui/modals/modalChooseApps"),modalConfigTile=require("syracuse-tablet/html/js/ui/modals/modalConfigTile"),_initConfigPage=!1,_Page=utils.defineClass(function WelcomeDashboardPage($parent,state,prototype,article){Base.call(this,$parent,state,prototype,article,{breadcrumbs:!1}),this.vignettes=[]},Base,{destroy:function(){Base.prototype.destroy.call(this)},beforeAddContent:function(){this.$$elmt.addClass("s-m-page-welcome-background")},buildHtmlOption:function(loadOptions){var self=this;return Base.prototype.buildHtmlOption.call(self,loadOptions).then(function(opts){return opts.makeFullHeight=!1,opts.toolBars={showAuthoring:!1,showUserMenuLinks:!0,showHome:!1,showPageConfig:!0,statusPinPage:0},opts})},afterRender:function(loadOptions,buildOpts){var self=this;return loadOptions.forceSynchroVignettes=!0,Base.prototype.afterRender.call(self,loadOptions,buildOpts).then(function(){_initConfigPage&&self._initConfigUI(),_initConfigPage=!1})},_actPageConfig:function(){var self=this;self._initConfigUI()},_actCancelPageConfig:function(){var self=this;self._destroyConfigUI()},_actRemoveTile:function(vignetteId){var self=this,tile=self._getTileInfo(vignetteId),first;tile.gadget.pinPageId?first=settings.removePinnedPage(tile.gadget.pinPageId):first=settings.hideApplication(tile.gadget.applicationName),first.then(function(){return self._afterChangePage()})},_actAddWelcomeApp:function(){var self=this,modal=new modalChooseApps.Modal(self._appList.hidden);modal.show().then(function(result){result&&result.length>0&&$.smForEachPromise(result,function(app){return settings.unhideApplication(app)}).then(function(){return self._afterChangePage()})})},_afterChangePage:function(){var self=this;_initConfigPage=!0,globals.getApplication().gotoWelcomeApplication(null,!0)},_actConfigTile:function(vignetteId){var self=this,ti=self._getTileInfo(vignetteId),classes=ti.$$tile.attr("class"),size="medium",cls=classes.split(" "),validSizes=["small","medium","wide","large","full","all"];cls&&cls.some(function(c){return validSizes.indexOf(c)>-1?(size=c,!0):!1});var color=/s-m-color-(\w+)/.exec(classes);color=color&&color.length>1&&color[1]||"darkgrey";var tile={title:ti.gadget.$title,color:color,size:size,icon:ti.gadget.icon},modal=new modalConfigTile.Modal(tile);modal.show().then(function(result){result!=null&&self._applyTileChanges(ti,result)})},_applyTileChanges:function(tileInfo,tile){var self=this,tileId;tileInfo.gadget.pinPageId?tileId="pin-"+tileInfo.gadget.pinPageId:tileId="app-"+tileInfo.gadget.applicationName,tile.tileId=tileId,settings.setTileConfig(tile).then(function(){self._afterChangePage()})},_initConfigUI:function(){var self=this;self._appList=welcomeApplication.getApplicationLists();var $$header=$(".s-m-control.header",self.$elmt);self.$$pageConfigHeader=$('<div class="s-m-page-config-header">					<div class="pull-left">						<btn class="hidden addapp btn fa fa-cubes" data-action="addWelcomeApp">'+locale.text("page.configure.add.app")+'						</btn>					</div>			  	<div class="pull-right">					<btn class="cancel btn glyphicon glyphicon-remove" data-action="cancelPageConfig"></btn>				</div>			</div>'),$$header.append(self.$$pageConfigHeader),self._appList.hidden.length>0&&$("[data-action=addWelcomeApp]",$$header).removeClass("hidden");var $$tiles=$(".s-m-tile",self.$$elmt);$$tiles.addClass("s-m-tile-edit");for(var i=0;i<$$tiles.length;i++){var $$tile=$($$tiles[i]);$$tile.attr("data-tile-config-id",i);var $$vignette=$(".s-m-vignette",$$tile);$$tile.append($('<btn class="cfg config fa fa-pencil" data-action="configTile" data-params="'+$$vignette.attr("id")+'">')),$$tile.append($('<btn class="cfg remove fa fa-trash-o" data-action="removeTile" data-params="'+$$vignette.attr("id")+'">'))}$(".s-m-control.footer",self.$elmt).css({display:"none"})},_destroyConfigUI:function(){var self=this;self.$$pageConfigHeader&&(self.$$pageConfigHeader.remove(),self.$$pageConfigHeader=null),$(".s-m-control.footer",self.$elmt).css({display:"block"}),$(".s-m-tile-edit").removeClass("s-m-tile-edit"),$(".s-m-tile btn.remove",self.$elmt).remove(),$(".s-m-tile btn.config",self.$elmt).remove()},_getTileInfo:function(vignetteId){var ctrl=this.getControl(vignetteId);if(!ctrl)return;var $$vignette=$("#"+vignetteId),$$tile=$$vignette.closest(".s-m-tile");return{$$tile:$$tile,$$vignette:$$vignette,$$remove:$(".s-m-tile btn.remove",$$tile),ctrl:ctrl,gadget:ctrl.prototype.data("$gadget")}}});exports.Page=_Page}),define("syracuse-tablet/html/js/sdata/sdatawhere/operator",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(require,exports,module){var helpers=require("syracuse-tablet/html/js/helpers/utils");exports.Operator=function(code,text,precedence,isPrefix,isInfix,isAssociative,isPredicate){var self=this;self.code=code,self.text=text,self.precedence=precedence,self.isPrefix=isPrefix,self.isInfix=isInfix,self.isAssociative=isAssociative,self.isPredicate=isPredicate},helpers.defineClass(exports.Operator,null,{toString:function(){return this.text}}),exports.operators=new function(){function createOp(code,text,precedence,isPrefix,isInfix,isAssociative,isPredicate){var op=new exports.Operator(code||text,text,precedence,isPrefix,isInfix,isAssociative,isPredicate);self.operators[op.text]=op}function init(){createOp(null,".",1,!1,!0,!0,!1),createOp(null,"not",2,!0,!1,!1,!1),createOp("*","mul",3,!1,!0,!0,!1),createOp("/","div",3,!1,!0,!0,!1),createOp("%","mod",3,!1,!0,!0,!1),createOp(null,"+",4,!1,!0,!0,!1),createOp(null,"-",4,!0,!0,!0,!1),createOp("=","eq",5,!1,!0,!1,!0),createOp("<>","ne",5,!1,!0,!1,!0),createOp("<","lt",5,!1,!0,!1,!0),createOp("<=","le",5,!1,!0,!1,!0),createOp(">","gt",5,!1,!0,!1,!0),createOp(">=","ge",5,!1,!0,!1,!0),createOp(null,"between",5,!1,!0,!1,!0),createOp(null,"in",5,!1,!0,!1,!0),createOp(null,"like",5,!1,!0,!1,!0),createOp(null,"and",6,!1,!0,!0,!0),createOp(null,"or",7,!1,!0,!0,!0),createOp(null,"(",8,!0,!1,!1,!1),createOp(null,")",8,!1,!1,!1,!1),createOp(null,",",8,!1,!1,!1,!1)}var self=this;return self.operators={},init(),self}}),define("syracuse-tablet/html/js/sdata/sdatawhere/token",["require","exports","module","syracuse-tablet/html/js/helpers/utils","./operator"],function(require,exports,module){var helpers=require("syracuse-tablet/html/js/helpers/utils"),operators=require("./operator");exports.tokenType={identifier:"identifier",operator:"operator",literal:"literal"},exports.Token=function(type,line,offset,length,val){var self=this;self.type=type,self.value=val;var _line=line,_offset=offset,_length=length;self.getRemainingText=function(){return _line.substring(_offset,_line.length)}},helpers.defineClass(exports.Token,null,{matches:function(code){return this.value instanceof operators.Operator&&this.value.code==code}})}),define("syracuse-tablet/html/js/sdata/sdatawhere/tokenizer",["require","exports","module","./token","./operator"],function(require,exports,module){var token=require("./token"),operators=require("./operator");exports.Tokenizer=new function(){function _skipSpaces(chars,i){while(i<chars.length&&chars[i]===" ")i++;return i}function _isDigit(str){return(new RegExp("[0-9]")).test(str)}function _isLetter(str){return(new RegExp("[$a-zA-Z%']")).test(str)}function _isWordChar(str){return(new RegExp("[$a-zA-Z0-9_%']")).test(str)}function _parseNumber(line,chars,i,tokens){var end=i+1;while(end<chars.length&&_isDigit(chars[end]))end++;var val;if(end<chars.length&&chars[end]==="."){end++;while(end<chars.length&&_isDigit(chars[end]))end++;val=parseFloat(line.substring(i,end))}else val=parseInt(line.substring(i,end),10);return tokens.push(new token.Token(token.tokenType.literal,line,i,end-i,val)),end}function _parseWord(line,chars,i,tokens){var end=i+1;while(end<chars.length&&_isWordChar(chars[end]))end++;var word=chars.substr(i,end-i),op=operators.operators.operators[word.toLowerCase()];if(op!=null)tokens.push(new token.Token(token.tokenType.operator,line,i,end-i,op));else{var lit;(lit=_literals[word])!==undefined?tokens.push(new token.Token(token.tokenType.literal,line,i,end-i,lit)):tokens.push(new token.Token(token.tokenType.identifier,line,i,end-i,word))}return end}function _parseQuotedString(line,chars,i,tokens){var quote=chars[i],end=i+1,dest=0,res="";while(end<chars.length){if(chars[end]===quote){end++;if(end===chars.length||chars[end]!==quote)return tokens.push(new token.Token(token.tokenType.literal,line,i,end-i,res)),end}res+=chars[end++]}throw new Error("quoted string not terminated: "+line.substring(i))}function _parseOperator(line,ch,i,tokens){var op=operators.operators.operators[ch];return tokens.push(new token.Token(token.tokenType.operator,line,i,1,op)),i+1}function _parseDateTime(line,chars,i,tokens){var end=i+1,len=chars.length;while(end<len){if(chars[end]=="@")break;end++}if(end===chars.length)throw new Error("Where parser: date constant not terminated:"+line.substring(i,line.length));var str=chars.substr(i+1,end-i-1),dt=new Date(str);if(dt!=null){var nt=new token.Token(token.tokenType.literal,line,i,end+1-i,dt);nt.dataType="datetime",nt.svalue=str,tokens.push(nt)}return end+1}var self=this,_literals={"true":!0,"false":!1,"null":null};return self.tokenize=function(line){var tokens=[],i=0;while(i<line.length){i=_skipSpaces(line,i);var ch=line[i];switch(ch){case"@":i=_parseDateTime(line,line,i,tokens);break;case'"':case"'":i=_parseQuotedString(line,line,i,tokens);break;case".":case"-":case"+":case"(":case")":case",":i=_parseOperator(line,ch,i,tokens);break;default:if(_isLetter(ch))i=_parseWord(line,line,i,tokens);else{if(!_isDigit(ch))throw new Error("invalid character: "+line.substring(i));i=_parseNumber(line,line,i,tokens)}}}return tokens},self}}),define("syracuse-tablet/html/js/sdata/sdatawhere/expression",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(require,exports,module){var helpers=require("syracuse-tablet/html/js/helpers/utils");exports.Expression=function(config){var self=this;self.children=null,config.operator?(self.type="operator",self.value=config.operator,self.children=[],config.expression1&&self.children.push(config.expression1),config.expression2&&self.children.push(config.expression2)):config.expressionType&&(self.type=config.expressionType,self.value=config.value,self.svalue=config.svalue,self.dataType=config.dataType,self.type==="function"&&(self.children=[]))},helpers.defineClass(exports.Expression,null,{isPredicate:function(){switch(this.type){case"operator":return this.value.isPredicate;case"identifier":return!0;case"function":return!0;case"literal":return!1;default:throw new Error("invalid expression type: "+this.type)}},toString:function(){if(this.children==null)return this.value.toString();var sb=[];sb.push("["+this.value.toString());for(var i=0;i<this.children.length;i++)sb.push(" "+this.children[i].toString());return sb.push("]"),sb.join("")}})}),define("syracuse-tablet/html/js/sdata/sdatawhere/parser",["require","exports","module","./token","./operator","./tokenizer","./expression"],function(require,exports,module){var token=require("./token"),operators=require("./operator"),tokenizer=require("./tokenizer"),expression=require("./expression");exports.Parser=new function(){function _finishBetween(tokens,tokenIndex,exp,precedence){if(tokenIndex[0]==tokens.length||!tokens[tokenIndex[0]].matches("and"))throw new Error("invalid expression: expected 'and' after "+tokens[tokenIndex[0]-1].getRemainingText());tokenIndex[0]++;var arg=_parseExpression(tokens,tokenIndex,precedence);exp.children.push(arg)}function _parseExpression(tokens,tokenIndex,precedence){var exp=_parseTerm(tokens,tokenIndex);while(tokenIndex[0]<tokens.length){var tk=tokens[tokenIndex[0]],op=tk.value instanceof operators.Operator?tk.value:null;if(op==null||!op.isInfix||op.precedence>precedence)break;tokenIndex[0]++;if(op.code=="in"){if(tokenIndex[0]===tokens.length||!tokens[tokenIndex[0]].matches("("))throw new Error("invalid expression: '(' expected after "+tk.getRemainingText());tokenIndex[0]++,exp=new expression.Expression({operator:op,expression1:exp}),_parseArguments(tokens,tk,tokenIndex,exp.children)}else{var arg=_parseExpression(tokens,tokenIndex,op.precedence-1);exp=new expression.Expression({operator:op,expression1:exp,expression2:arg}),op.code=="between"&&_finishBetween(tokens,tokenIndex,exp,op.precedence)}if(!op.isAssociative&&op.precedence==precedence)return exp}return exp}function _parseTerm(tokens,tokenIndex){if(tokenIndex[0]==tokens.length)throw new Error("premature end of expression");var tk=tokens[tokenIndex[0]];switch(tk.type){case token.tokenType.identifier:return tokenIndex[0]++,tokenIndex[0]<tokens.length&&tokens[tokenIndex[0]].matches("(")?_parseFunctionCall(tokens,tk,tokenIndex):new expression.Expression({expressionType:"identifier",value:tk.value});case token.tokenType.literal:return tokenIndex[0]++,new expression.Expression({expressionType:"literal",value:tk.value,svalue:tk.svalue,dataType:tk.dataType});case token.tokenType.operator:var op=tk.value;if(!op.isPrefix)throw new Error("invalid expression: expected beginning of term at "+tk.getRemainingText());return tokenIndex[0]++,_parsePrefixOperator(tokens,op,tokenIndex);default:throw new Error("internal error: bad token type "+tk.type)}}function _parseArguments(tokens,tk,tokenIndex,arguments0){if(tokenIndex[0]<tokens.length&&tokens[tokenIndex[0]].matches(")")){tokenIndex[0]++;return}while(tokenIndex[0]<tokens.length){var arg=_parseExpression(tokens,tokenIndex,_maxPrecedence);arguments0.push(arg);if(tokenIndex[0]<tokens.length&&tokens[tokenIndex[0]].matches(")")){tokenIndex[0]++;return}if(tokenIndex[0]==tokens.length||!tokens[tokenIndex[0]].matches(","))throw new Error("invalid expression: expected ',' or ')' at "+tokens[tokenIndex[0]].getRemainingText());tokenIndex[0]++}throw new Error("invalid function call syntax: argument missing after "+tk.getRemainingText())}function _parsePrefixOperator(tokens,op,tokenIndex){var arg1;switch(op.code){case"-":case"not":return arg1=_parseExpression(tokens,tokenIndex,1),new expression.Expression({operator:op,expression1:arg1});case"(":arg1=_parseExpression(tokens,tokenIndex,op.precedence);if(tokenIndex[0]==tokens.length||!tokens[tokenIndex[0]].matches(")"))throw new Error("invalid expression: expected ')' after "+tokens[tokenIndex[0]-1].getRemainingText());return tokenIndex[0]++,arg1;default:throw new Error("internal error: bad prefix operator "+op.code)}}function _parseFunctionCall(tokens,tk,tokenIndex){tokenIndex[0]++;var exp=new expression.Expression({expressionType:"function",value:tk.value});return _parseArguments(tokens,tk,tokenIndex,exp.children),exp}var self=this,_maxPrecedence=8;return self.parse=function(str){if(str==null||str.length==0)return null;var tokens=tokenizer.Tokenizer.tokenize(str),tokenIndex=[];tokenIndex[0]=0;var exp=_parseExpression(tokens,tokenIndex,_maxPrecedence);if(tokenIndex[0]!=tokens.length)throw new Error("invalid expression: unexpected token at "+tokens[tokenIndex[0]].getRemainingText());return exp},self}}),define("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils",["require","exports","module"],function(require,exports,module){function _exec(data,exp,proto){if(exp.type=="identifier"){exp.property=data[exp.value];var item=proto&&proto.$properties&&proto.$properties.$resources?proto.$properties.$resources.$item:null;item&&item.$properties&&item.$properties[exp.value]&&item.$properties[exp.value].$type==="application/x-boolean"&&(exp.property=exp.property===!0?2:1)}else if(exp.type=="literal")exp.property=exp.dataType=="datetime"?exp.svalue:exp.value;else if(exp.children){var property=null;if(exp.type=="operator")switch(exp.value.code){case"and":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.property=exp.children[0].property&&exp.children[1].property;break;case"or":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.property=exp.children[0].property||exp.children[1].property;break;case"between":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.property=exp.children[0].property>=exp.children[1].property&&exp.children[0].property<=exp.children[2].property;break;case">=":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.property=exp.children[0].property>=exp.children[1].property;break;case">":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.property=exp.children[0].property>exp.children[1].property;break;case"<=":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.property=exp.children[0].property<=exp.children[1].property;break;case"<":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.property=exp.children[0].property<exp.children[1].property;break;case"like_s":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.property=exp.children[0].property.toUpperCase().indexOf(exp.children[1].property.toUpperCase())===0;break;case"like":exp.children.forEach(function(child){_exec(data,child,proto)});var val=exp.children[1].property.toUpperCase().replace(/%/g,"");exp.property=exp.children[0].property.toUpperCase().indexOf(val)>=0;break;case"=":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.children[0].property=="0000-00-00"&&exp.children[1].dataType==="datetime"&&(exp.children[0].property=""),exp.children[1].property=="0000-00-00"&&exp.children[0].dataType==="datetime"&&(exp.children[1].property=""),exp.property=exp.children[0].property==exp.children[1].property;break;case"<>":exp.children.forEach(function(child){_exec(data,child,proto)}),exp.children[0].property=="0000-00-00"&&exp.children[1].dataType==="datetime"&&(exp.children[0].property=""),exp.children[1].property=="0000-00-00"&&exp.children[0].dataType==="datetime"&&(exp.children[1].property=""),exp.property=exp.children[0].property!=exp.children[1].property;break;case".":_exec(data,exp.children[0],proto),_exec(exp.children[0].property,exp.children[1],proto),exp.property=exp.children[1].property;break;default:exp.property=property,exp.children.forEach(function(child){_exec(data,child,proto),child.type=="literal"&&(child.property=property)})}else if(exp.type=="function")throw new Error("exp.type == 'function' not implemented")}}exports.execWhere=function(dataContext,exp,proto){return exp==null?!0:(_exec(dataContext,exp,proto),exp.property)}}),define("syracuse-tablet/html/js/sdata/sdataDispatcherLocal",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/sdata/sdatawhere/parser","syracuse-tablet/html/js/sdata/sdatawhere/whereUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),parser=require("syracuse-tablet/html/js/sdata/sdatawhere/parser").Parser,whereUtils=require("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils");exports.Dispatcher=utils.defineClass(function(){},null,{getEntity:function($representation){var repr=$representation&&$representation.split(".");return repr&&repr[0]&&repr[0].smStartsWith("QUERY~")?repr=repr[0].split("~")[1]:repr&&repr[0]&&repr[0].smStartsWith("STATS~")?repr=repr[0].split("~")[1]:repr=repr&&repr[0],repr&&clientContract.getEntity(repr)},accept:function(op,data){var self=this,deferred=$.Deferred();return deferred.resolve(self.getEntity(op.$representation)!=null),deferred.promise()},prototype:function(op,data){var deferred=$.Deferred();return deferred.reject("Dispatcher should never request for prototypes since they are cached in the application model on client side"),deferred.promise()},"new":function(op,data){var self=this,ent=self.getEntity(op.$representation);return ent.$services.$new(op,data)},read:function(op,data){var self=this,ent=self.getEntity(op.$representation);return ent.$services.$read(op,data)},query:function(op,data){var self=this,ent=self.getEntity(op.$representation),list=ent.$services.$query(op,data);if(op.$where){var deferred=$.Deferred();return list.then(function(resources){var list=resources.$resources,exp=parser.parse(op.$where),repr=op.$representation&&op.$representation.split("."),$proto=clientContract.getPrototype(repr[0],repr[1]),res=[];list.forEach(function(item,i){whereUtils.execWhere(item,exp,$proto)&&res.push(item)}),deferred.resolve({$resources:res})}).fail(function(e){deferred.reject(e)}),deferred.promise()}return list},save:function(op,data){var self=this,ent=self.getEntity(op.$representation);return ent.$services.$save(op,data)},"delete":function(op,data){var self=this,ent=self.getEntity(op.$representation);return ent.$services.$delete(op,data)},service:function(op,data){var self=this,ent=self.getEntity(op.$representation);return ent.$services[op.$service](op,data)}})}),define("syracuse-tablet/html/js/sdata/sdataDispatcherHttp",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/sdata/sdataHttp"],function(require,exports,module){function _returnSyncAsync(promise,result,sync){if(sync){var timeLine=utils.getTimeLine("cacheUpdate",utils.UUID());return timeLine&&timeLine.start("Start writing to cache"),promise.then(function(){return timeLine&&timeLine.step("completed"),result})}return result}var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("sdataDispatcher"),sdataHttp=require("syracuse-tablet/html/js/sdata/sdataHttp"),_authQueryCache={},_writeCacheModeSync={query:!1,read:!1};exports.Dispatcher=utils.defineClass(function(){notifications.subscribe(this,"sm.authcache.destroy")},null,{notifAuthcacheDestroy:function(pageId){if(!pageId)return;_authQueryCache[pageId]=null},accept:function(){var deferred=$.Deferred();return deferred.resolve(!0),deferred.promise()},_isOnline:function(){return globals.isOnline()},_isOfflineError:function(result){return result&&result.status<100?!0:!1},_networkError:function(title,result){return result&&result.responseJSON&&result.responseJSON.$diagnoses?(result.responseJSON.$title=title,$.smReject(result.responseJSON)):$.smReject({$title:title})},_offlineNoCachedDataMessage:function(){return $.smReject({$noConnectionError:!0,$diagnoses:[{$message:locale.text("error.network.offline.cache"),$severity:"error"}]})},_useCache:function(op,action){var cache=globals.getCache();if(cache.isDisabled())return!1;var nocache=op.$parsedUrl&&op.$parsedUrl.query&&op.$parsedUrl.query.nocache;return nocache&&action==="read"?!1:op.$representation.indexOf(".$edit")>0&&action==="read"?!1:!0},prototype:function(op,data,options){var deferred=$.Deferred();return deferred.reject("Dispatcher should never request for prototypes since they are cached in the application model on client side"),deferred.promise()},"new":function(op,data,options){var self=this,cacheRead,usedCache;return self._isOnline()?(cacheRead=$.smResolve(),usedCache=!1):(cacheRead=self._newGetCache(op,data),usedCache=!0),cacheRead.then(function(result){return result?(log&&log("Read template from cache: "+op.$representation),result.$uuid=utils.UUID(),result):self._newDoHttp(op,data).then(function(result){if(result.isSuccess){var data=result.responseJSON;return self._newPutCache(op,data).then(function(){return data})}var netResult=result;return usedCache?self._networkError("Error reading $template",netResult):self._newGetCache(op,data).then(function(result){return result?(log&&log("Read template from cache fallback: "+op.$representation),result.$uuid=utils.UUID(),result):self._networkError("Error reading $template",netResult)})})})},_newGetCache:function(op){var self=this;if(self._useCache(op,"read")){var cache=globals.getCache();return log&&log("Reading template from cache: "+op.$representation),cache.read({$representation:"$templates",$endpoint:op.$endpoint,$key:op.$representation})}return log&&log("Disabled reading template from cache : "+op.$representation),$.smResolve()},_newDoHttp:function(op,data){var send={method:"GET",url:op.$link.$url};return sdataHttp.send(send)},_newPutCache:function(op,data){var self=this;if(self._useCache(op,"write")){log&&log("Writing template to cache: "+op.$representation);var cache=globals.getCache();return cache.put({$representation:"$templates",$key:op.$representation,$endpoint:op.$endpoint,$data:data})}return log&&log("Disabled writing template to cache : "+op.$representation),$.smResolve()},read:function(op,data,options){var self=this,cacheRead,forceUseCache=options.forceUseCache,usedCache;return self._isOnline()&&forceUseCache!==!0?(cacheRead=$.smResolve(),usedCache=!1):(cacheRead=self._readGetCache(op,data),usedCache=!0),cacheRead.then(function(result){return result?(log&&log("Read data from cache: "+op.$representation),result.$cacheHint={},result):self._readDoHttp(op,data).then(function(result){if(result.isSuccess){var data=result.responseJSON,prom=self._readPutCache(op,data).then(function(){return data});return _returnSyncAsync(prom,data,_writeCacheModeSync.read)}return self._isOfflineError(result)?usedCache?forceUseCache===!0?null:self._offlineNoCachedDataMessage():self._readGetCache(op,data).then(function(data){return data?(data.$cacheHint={},data):forceUseCache===!0?null:self._offlineNoCachedDataMessage()}):self._networkError("Error reading data",result)})})},_readGetCache:function(op){var self=this;if(self._useCache(op,"read")){var cache=globals.getCache();return log&&log("Reading data from cache: "+op.$representation),cache.read({$representation:op.$representation,$endpoint:op.$endpoint,$key:op.$key})}return log&&log("Disabled reading data from cache : "+op.$representation),$.smResolve()},_readDoHttp:function(op,data){var send={method:"GET",url:op.$link.$url};return sdataHttp.send(send)},_readPutCache:function(op,data){var self=this;if(self._useCache(op,"write")){log&&log("Writing data to cache: "+op.$representation);var cache=globals.getCache();return cache.put({$representation:op.$representation,$key:op.$key,$endpoint:op.$endpoint,$data:data})}return log&&log("Disabled writing data to cache : "+op.$representation),$.smResolve()},query:function(op,dataToSend,options){var self=this,cacheRead,usedCache,forceUseCache=options.forceUseCache,isStatsRequest=op.$isRequest===!0||op.$isStats===!0;return self._useCache(op,"read")!==!0||self._isOnline()&&forceUseCache!==!0?(cacheRead=$.smResolve(null),usedCache=!1):(cacheRead=self._queryReadCache(op,options),usedCache=!0),cacheRead.then(function(cacheResult,isAuthCache){var step;if(cacheResult!=null){log&&log("Queried data from cache: "+op.$representation);if(isStatsRequest){var response=cacheResult;response||(response={}),response.$resources||(response.$resources=[]),step=$.smResolve(response)}else if(isAuthCache===!0)step=$.smResolve(cacheResult);else{var response={};step=self._queryCutAndAddLinks(op,cacheResult,response).then(function(){return response.$resources||(response.$resources=[]),response.$resources.length>0&&(response.$cacheHint={}),response})}}else step=$.smResolve(null);return step.then(function(cacheResponse){return cacheResponse&&cacheResponse.$resources&&cacheResponse.$resources.length>0?cacheResponse:self._queryDoHttp(op).then(function(httpResult){if(httpResult.isSuccess){var data=httpResult.responseJSON||{};data.$resources=data.$resources||[];var prom;if(self._useCache(op,"write"))var prom=self._queryPutCache(op,data,options).then(function(){return data});else{log&&log("Disabled writing data to cache : "+op.$representation);var prom=$.smResolve(data)}return _returnSyncAsync(prom,data,_writeCacheModeSync.query)}return self._isOfflineError(httpResult)?usedCache?forceUseCache===!0?null:self._offlineNoCachedDataMessage():self._queryReadCache(op,options).then(function(cacheResult){if(!cacheResult)return forceUseCache===!0?null:self._offlineNoCachedDataMessage();log&&log("Queried data from cache: "+op.$representation);if(isStatsRequest){var response=cacheResult;return response||(response={}),response.$resources||(response.$resources=[]),$.smResolve(response)}var response={};return self._queryCutAndAddLinks(op,cacheResult,response).then(function(){response.$resources||(response.$resources=[]);if(response.$resources.length>0)return response.$cacheHint={},response})}):self._networkError("Error reading data",httpResult)})})})},_queryCutAndAddLinks:function(op,result,response){result=result||[];var self=this,baseUrl=op.$parsedUrl.source.split("?")[0],query="",key,max=globals.OFFLINEQUERYCOUNT,orderBy="";op.$parsedUrl.query&&op.$parsedUrl.query.where&&(query+="&where="+op.$parsedUrl.query.where),key=op.$parsedUrl.query&&op.$parsedUrl.query.key;var firstKeyRead,lastKeyRead,resources=response.$resources=[],hasNextPage=!1,hasPreviousPage=!1,i,pageName=op.$endpoint+"."+op.$representation;return globals.getMetaData().getPrototype(pageName).then(function(proto){var val,kv,orderBy="";proto=proto.$properties&&proto.$properties.$resources&&proto.$properties.$resources.$item||proto;var keyField;proto.$key?keyField=proto.$key.replace(/{/g,"").replace(/}/g,""):keyField="$uuid",op.$parsedUrl.query&&op.$parsedUrl.query.orderBy&&(orderBy=self._buildOrderBy(op,keyField,op.$parsedUrl.query.orderBy),query+="&orderBy="+orderBy);var keyType=proto.$properties[keyField],isNumericKey=keyType&&keyType.$type&&keyType.$type!=="application/x-string",gotMatch=!1;if(key&&key.smStartsWith("gt")){val=key.substr(3),val=isNumericKey?+val:val;for(i=0;i<result.length;i++){gotMatch||(kv=self._calculateKey(proto,result[i]),kv=isNumericKey?+kv:""+kv);if(kv==val&&!gotMatch)gotMatch=!0;else if(gotMatch){resources.push(result[i]);if(resources.length>max)break}else hasPreviousPage=!0}resources.length>0&&(resources.length>max&&(resources.pop(),hasNextPage=!0),firstKeyRead=self._calculateKey(proto,resources[0]),lastKeyRead=self._calculateKey(proto,resources[resources.length-1]))}else if(key&&key.smStartsWith("lt")){if(key.length>3){val=isNumericKey?+key.substr(3):""+key.substr(3);for(i=result.length-1;i>=0;i--){gotMatch||(kv=self._calculateKey(proto,result[i]),kv=isNumericKey?0+kv:""+kv);if(kv==val&&!gotMatch)gotMatch=!0;else if(gotMatch){resources.push(result[i]);if(resources.length>max)break}else hasNextPage=!0}resources.length>max&&(hasPreviousPage=!0,resources.pop())}else for(i=result.length-1;i>=0;i--){resources.push(result[i]);if(resources.length>max)break}resources.length>0&&(resources.length>max&&(hasPreviousPage=!0,resources.pop()),response.$resources=resources=resources.reverse(),firstKeyRead=self._calculateKey(proto,resources[0]),lastKeyRead=self._calculateKey(proto,resources[resources.length-1]))}else{for(i=0;i<result.length;i++){resources.push(result[i]);if(resources.length>max)break}resources.length>0&&(resources.length>max&&(hasNextPage=!0,resources.pop()),firstKeyRead=self._calculateKey(proto,resources[0]),lastKeyRead=self._calculateKey(proto,resources[resources.length-1]))}var links=response.$links={};key&&(links.$first={$url:baseUrl+"?representation="+op.$representation+query}),key&&firstKeyRead&&hasPreviousPage&&key!=="gt"&&(links.$previous={$url:baseUrl+"?representation="+op.$representation+query+"&key=lt."+firstKeyRead}),key!=="lt"&&lastKeyRead&&hasNextPage&&(links.$next={$url:baseUrl+"?representation="+op.$representation+query+"&key=gt."+lastKeyRead}),key!=="lt"&&hasNextPage&&(links.$last={$url:baseUrl+"?representation="+op.$representation+query+"&key=lt"})})},_reqStatsGetCacheOpts:function(op,data){var key=op.$representation,q=op.$parsedUrl.query;q&&q.count!==null&&(key+="~"+q.count),q&&op.$isRequest===!0&&q.startRecord!==null&&(key+="~"+q.startRecord);var opts={$representation:op.$representation,$endpoint:op.$endpoint,$key:key};return data!=null&&(opts.$data=data),opts},_queryReadCache:function(op,options){var self=this,cache=globals.getCache();log&&log("Querying data from cache: "+op.$representation);var p=op.$endpoint+"."+op.$representation;return globals.getMetaData().getPrototype(p).then(function(proto){self._checkQueryPrototype(op,proto);if(op.$isRequest===!0||op.$isStats===!0)return cache.read(self._reqStatsGetCacheOpts(op)).fail(function(e){return $.smReject(e)});if(globals.isAuthoringActive()&&options.$authCacheId&&_authQueryCache[options.$authCacheId])return $.smResolve(_authQueryCache[options.$authCacheId],!0);var filters=proto.$filters,where=self._extendWhereWithFilter(op,filters),proto=proto.$properties&&proto.$properties.$resources&&proto.$properties.$resources.$item||proto,keyField;proto.$key?keyField=proto.$key.replace(/{/g,"").replace(/}/g,""):keyField="$uuid";var orderBy=self._parseOrderBy(op.$orderBy,keyField);return cache.query({$proto:proto,$endpoint:op.$endpoint,$where:where,$orderBy:orderBy}).fail(function(e){return $.smReject(e)})})},_queryDoHttp:function(op){var send={method:"GET",url:op.$link.$url};return sdataHttp.send(send)},_queryPutCache:function(op,data,options){var self=this;log&&log("Writing data to cache: "+op.$representation);var cache=globals.getCache(),pageName=op.$endpoint+"."+op.$representation;return data||(data={}),data.$resources||(data.$resources=[]),globals.getMetaData().getPrototype(pageName).then(function(proto){return op.$isRequest===!0||op.$isStats===!0?cache.put(self._reqStatsGetCacheOpts(op,data)):(options.$authCacheId&&(_authQueryCache[options.$authCacheId]=data),proto=proto.$properties&&proto.$properties.$resources&&proto.$properties.$resources.$item||proto,$.smForEachPromise(data.$resources,function(item){var key=self._calculateKey(proto,item);return key||(key=item.$uuid),cache.put({$representation:op.$representation,$key:key,$endpoint:op.$endpoint,$data:item})}))})},save:function(op,data,options){var self=this;return self._saveDoHttp(op,data).then(function(result){if(result.isSuccess){var data=result.responseJSON;return self._savePutCache(op,data).then(function(){return data})}return $.smReject(result)})},_saveDoHttp:function(op,data){var send={method:op.$link.$method,url:op.$link.$url,send:data};return sdataHttp.send(send)},_savePutCache:function(op,data){var self=this;try{if(self._useCache(op,"write")){log&&log("Writing data to cache: "+op.$representation);var cache=globals.getCache(),key=op.$key,step;if(!key){var pageName=op.$endpoint+"."+op.$representation;step=globals.getMetaData().getPrototype(pageName).then(function(proto){return proto=proto.$properties&&proto.$properties.$resources&&proto.$properties.$resources.$item||proto,key=self._calculateKey(proto,data),key})}else step=$.smResolve(key);step.then(function(key){self._removeFromCache({$representation:op.$representation,$key:key,$endpoint:op.$endpoint}).then(function(){return cache.put({$representation:op.$representation,$key:key,$endpoint:op.$endpoint,$data:data})})})}return log&&log("Disabled writing data to cache : "+op.$representation),$.smResolve()}catch(e){return $.smReject(e)}},"delete":function(op,data,options){var self=this,deferred=$.Deferred();try{self._deleteDoHttp(op,data).then(function(result){if(result.isSuccess){var data=result.responseJSON;return self._deleteRemoveCache(op,data).then(function(){return data})}return $.smReject(result)}).then(function(result){deferred.resolve(result)}).fail(function(e){deferred.reject(e)})}catch(e){deferred.reject(e)}return deferred.promise()},_deleteDoHttp:function(op,data){var send={method:op.$link.$method,url:op.$link.$url};return sdataHttp.send(send)},_deleteRemoveCache:function(op,data){var self=this;if(self._useCache(op,"write")){log&&log("Deleting data from cache: "+op.$representation);var cache=globals.getCache();self._removeFromCache({$representation:op.$representation,$key:op.$key,$endpoint:op.$endpoint}).then(function(){return cache.remove({$representation:op.$representation,$key:op.$key,$endpoint:op.$endpoint})})}return log&&log("Disabled deleting data from cache : "+op.$representation),$.smResolve()},service:function(op,data,options){if(this._isOnline()){var send={method:op.$link.$method,url:op.$link.$url,send:data};return sdataHttp.send(send)}return $.smResolve({$diagnoses:[{$severity:"error",$message:locale.text("error.service.offline")}]})},_calculateKey:function(proto,item){var key;return proto.$key?key=proto.$key.replace(/\{(.*?)\}/g,function(match,prop){return item[prop]}):key=item.$uuid,key},_getKeyFields:function(proto){var key=proto.$key||proto.$properties&&proto.$properties.$resources&&proto.$properties.$resources.$item&&proto.$properties.$resources.$item.$key;if(key){var list=[];return key.replace(/\{(.*?)\}/g,function(match,prop){list.push(prop)}),list.length<1?["$uuid"]:list}return["$uuid"]},_checkQueryPrototype:function(op,proto){proto.$properties&&proto.$properties.$resources&&proto.$properties.$resources.$item&&(proto.$properties.$resources.$item.$type="{$baseType}."+op.$representation)},_removeFromCache:function(op){var self=this,cache=globals.getCache(),facets=["$edit","$create","$details","$query","$lookup"],rep=op.$representation.split(".")[0];return $.smForEachPromise(facets,function(facet){return op.$representation.indexOf("."+facet)>0?$.smResolve():cache.remove({$representation:rep+"."+facet,$key:op.$key,$endpoint:op.$endpoint})})},_parseOrderBy:function(orderBy,keyField){if(!orderBy)return[{property:keyField,sort:"ASC"}];var o=[];return orderBy.split(",").map(function(field){field=field.trim();var d=field.split(" "),f=d[0].trim();if(f.length>0){var dir="ASC";d.length>1&&(dir=d[1].toUpperCase(),dir=dir!=="DESC"?"ASC":"DESC"),o.push({property:f,sort:dir})}}),o},_buildOrderBy:function(op,keyField,orderBy){return orderBy?(orderBy===keyField||orderBy.indexOf(keyField+" ")>-1||orderBy.indexOf(keyField+",")>-1||(orderBy.indexOf(" DESC")>-1?orderBy+=", "+keyField+" DESC":orderBy+=", "+keyField+" ASC"),orderBy):keyField},_extendWhereWithFilter:function(op,filters){var self=this,where=op.$where;if(!filters)return where;var filterName=op.$parsedUrl&&op.$parsedUrl.query&&op.$parsedUrl.query.filter;if(!filterName)return where;var filter=filters&&filters[filterName];if(!filter)return where;var fw=self._checkFilterWhere(filterName,filter.$where);return fw?(where?where="("+where+") and ("+fw+")":where="("+fw+")",where):where},_checkFilterWhere:function(filterName,where){var invalid=where.match(/(\[F\:\w+\]?)/g);return invalid?(globals.getModal().error(locale.text("sdata.error.filter.screenFieldTitle"),locale.text("sdata.error.filter.screenFieldDetails",[filterName,invalid.join(","),where])),null):where}})}),define("syracuse-tablet/html/js/sdata/sdataDispatcher",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/sdata/sdataDispatcherLocal","syracuse-tablet/html/js/sdata/sdataDispatcherHttp"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("sdataDispatcher"),globals=require("syracuse-tablet/html/js/helpers/globals"),sdataUtils=require("syracuse-tablet/html/js/sdata/sdataUtils"),dispLocal=require("syracuse-tablet/html/js/sdata/sdataDispatcherLocal").Dispatcher,dispHttp=require("syracuse-tablet/html/js/sdata/sdataDispatcherHttp").Dispatcher,_dispatchers=[new dispLocal,new dispHttp];exports.dispatch=function(link,data,options){var deferred=$.Deferred();try{log&&log("Dispatch: "+link.$method+": "+link.$url),options=options||{};var op=exports.parseLink(link),dispatcher;$.smForEachPromise(_dispatchers,function(disp){return disp.accept(op,data)},function(disp,result){return result===!0?(dispatcher=disp,!0):!1});var cacheStatus;options.forceUseCache&&(cacheStatus=globals.getCache().isDisabled(),globals.getCache().disableCache(!1));var prom=dispatcher[op.$operation](op,data,options);if(!prom)throw new Error("Could not dispatch: "+link.$method+": "+link.$url+" ("+op.$operation+")");prom.then(function(result){options.forceUseCache&&globals.getCache().disableCache(cacheStatus),deferred.resolve(result)}).fail(function(e){options.forceUseCache&&globals.getCache().disableCache(cacheStatus),deferred.reject(e)})}catch(e){deferred.reject(e)}return deferred.promise()};var _repExp=/\$prototypes\('(.*?)'\)/,_keyExp=/\('(.*?)'\)/;exports.parseLink=function(link){var url=link.$url,result={$link:link,$parsedUrl:sdataUtils.parseSDataURL(link.$url)};result.$endpoint=result.$parsedUrl.application+"."+result.$parsedUrl.contract+"."+result.$parsedUrl.dataset;var dir=result.$parsedUrl.directory,idx;if(link.$method==="GET"){if(url.indexOf("$prototypes")>-1)result.$operation="prototype",result.$representation=_repExp.exec(url)[1];else if(dir.indexOf("$template")>-1)result.$operation="new",result.$representation=result.$parsedUrl.query&&result.$parsedUrl.query.representation;else if(result.$parsedUrl.$services)result.$operation="service",result.$service=result.$parsedUrl.$services,result.$representation=result.$parsedUrl.query&&result.$parsedUrl.query.representation;else{var key=_keyExp.exec(dir);result.$isStats=dir.indexOf("/STATS(")>-1,result.$isRequest=dir.indexOf("/QUERY(")>-1,result.$representation=result.$parsedUrl.query&&result.$parsedUrl.query.representation,key&&!result.$isStats&&!result.$isRequest?(result.$operation="read",result.$key=key[1]):result.$operation="query"}result.$parsedUrl.query&&result.$parsedUrl.query.where&&(result.$where=result.$parsedUrl.query.where),result.$parsedUrl.query&&result.$parsedUrl.query.orderBy&&(result.$orderBy=result.$parsedUrl.query.orderBy)}else if(result.$parsedUrl.$services)result.$operation="service",result.$service=result.$parsedUrl.$services,result.$representation=result.$parsedUrl.query&&result.$parsedUrl.query.representation;else if(link.$method==="DELETE"){var key=_keyExp.exec(dir);result.$operation="delete",result.$key=key[1],result.$representation=result.$parsedUrl.query&&result.$parsedUrl.query.representation}else{var key=_keyExp.exec(dir);key?(result.$operation="save",result.$key=key[1],result.$representation=result.$parsedUrl.query&&result.$parsedUrl.query.representation):(result.$operation="save",result.$representation=result.$parsedUrl.query&&result.$parsedUrl.query.representation)}return result}}),define("syracuse-tablet/html/js/helpers/deltaManager",["require","exports","module"],function(require,exports,module){function _isVariantArray(list){var first=list&&list.length>0?list[0]:null;return first&&first.$uuid==undefined&&typeof first=="object"&&Object.keys(first).length==1?!0:!1}function _ensureServerIndex(list){if(_isVariantArray(list))for(var ii=0,jj=list.length;ii<jj;ii++){var record=list[ii];typeof record=="object"&&(record[Object.keys(record)[0]].$serverIndex=ii)}else if(list.length&&typeof list[0]=="object"&&list[0].$uuid!==undefined)for(var ii=0,jj=list.length;ii<jj;ii++)list[ii].$serverIndex=ii}function _applyPageRecordDelta(options,record,subRecord,targetMap,targetList,variantKey){if(subRecord.$uuid!==undefined){if(!subRecord.$isDeleted)if(subRecord.$uuid!==undefined&&targetMap[subRecord.$uuid])if(variantKey){var newNecord=_applyObjectDelta(options,targetMap[subRecord.$uuid],subRecord);record={},record[variantKey]=newNecord,targetList.push(record)}else targetList.push(_applyObjectDelta(options,targetMap[subRecord.$uuid],subRecord));else targetList.push(record)}else targetList.push(record)}function _applyObjectArrayDelta(options,targetList,sourceList){if(sourceList)if(targetList.length==sourceList.length)for(var ii=0,jj=sourceList.length;ii<jj;ii++)_applyObjectDelta(options,targetList[ii],sourceList[ii]);else{targetList.splice(0,targetList.length);for(var ii=0,jj=sourceList.length;ii<jj;ii++)targetList.push(sourceList[ii])}return targetList}function _applyObjectDelta(options,target,source,isObjectDelta){options=options||{};if(source){var properties=Object.keys(source),isData;for(var ii=0,jj=properties.length;ii<jj;ii++){var property=properties[ii];isData=property.charAt(0)!="$";var targetValue=target[property],sourceValue=source[property];if(typeof sourceValue=="object"){if(targetValue!=null&&sourceValue!==null)if(Array.isArray(sourceValue)){if(isObjectDelta||!isData)sourceValue=_applyObjectArrayDelta(options,targetValue,sourceValue);else if(options.$isEditMode||options.$isPartialDelta)sourceValue=exports.applyPageArrayDelta(options,targetValue,sourceValue)}else sourceValue=_applyObjectDelta(options,targetValue,sourceValue,isObjectDelta);Array.isArray(sourceValue)&&isData&&_ensureServerIndex(sourceValue)}target[property]=sourceValue}}return target}exports.cleanServerIndex=function(source){if(source&&typeof source=="object")if(Array.isArray(source))for(var ii=0,jj=source.length;ii<jj;ii++)exports.cleanServerIndex(source[ii]);else{delete source.$serverIndex;var properties=Object.keys(source);for(var ii=0,jj=properties.length;ii<jj;ii++)exports.cleanServerIndex(source[properties[ii]])}return source},exports.applyObjectDelta=_applyObjectDelta,exports.applyPageArrayDelta=function(options,targetList,sourceList){options=options||{};if(sourceList){var targetMap={},isVariant=_isVariantArray(sourceList);if(options.$isPartialDelta||sourceList.length==1&&sourceList[0].$index!==undefined){var found,foundIndex;for(var ii=0,jj=sourceList.length;ii<jj;ii++){found=null;var sourceRecord=sourceList[ii];foundIndex=0;for(var mm=targetList.length;foundIndex<mm;foundIndex++){found=targetList[foundIndex];if(found.$uuid==sourceRecord.$uuid)break;found=null}found?sourceRecord.$isDeleted?targetList.splice(foundIndex,1):(_applyObjectDelta(options,found,sourceRecord),sourceRecord.$index!==undefined&&sourceRecord.$index!=foundIndex&&(targetList.splice(foundIndex,1),targetList.splice(sourceRecord.$index,0,found),delete found.$index)):sourceRecord.$isDeleted||(sourceRecord.$index!==undefined?targetList.splice(sourceRecord.$index,0,sourceRecord):targetList.push(sourceRecord))}}else{for(var ii=0,jj=targetList.length;ii<jj;ii++){var record=targetList[ii];record&&(record.$uuid!==undefined?targetMap[record.$uuid]=record:isVariant&&(record=record[Object.keys(record)[0]],record.$uuid!==undefined&&(targetMap[record.$uuid]=record)))}targetList=[];for(var ii=0,jj=sourceList.length;ii<jj;ii++){var record=sourceList[ii];if(isVariant){var variantKey=Object.keys(record)[0];_applyPageRecordDelta(options,record,record[variantKey],targetMap,targetList,variantKey)}else _applyPageRecordDelta(options,record,record,targetMap,targetList)}}}return targetList}}),define("syracuse-tablet/html/js/application/daoSdata",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/articleParser","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/deltaManager"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),articleParser=require("syracuse-tablet/html/js/helpers/articleParser"),locale=require("syracuse-tablet/html/js/helpers/locale"),deltaManager=require("syracuse-tablet/html/js/helpers/deltaManager"),_defMetaData={$properties:{$isExcluded:!1,$isHidden:!1,$isMandatory:!1,$isReadOnly:!1,$isDisabled:!1,$diagnoses:null,$x3Format:null,$value:null,$format:null,$capabilities:null},$links:{$isDisabled:!1,$isHidden:!1,$style:!1,$isRequested:!1}},_updt=function(src,dst){var m={},j;for(var p in _defMetaData)j=src[p],j&&!$.isEmptyObject(j)&&(m[p]=j);return $.isEmptyObject(m)?null:($.extend(dst,m),m)},_updateMeta=function(fromData,toData,properties,isRowData){if(!fromData||!toData)return!1;var meta=_updt(fromData,toData);if(isRowData==1&&meta&&meta.$properties)for(var p in meta.$properties)if(meta.$properties[p].$diagnoses!=null){toData.$arrayUpdateError=!0;break}var done=meta!=null;if(properties)for(var name in properties){var proto=properties[name];if(proto&&proto.$type==="application/x-array"&&fromData[name])if(!articleParser.isSingleArray(proto)){var arrSrc=fromData[name],arrDst=toData[name];if(!arrDst)throw new Error("Unexpected empty data array - "+name);for(var idx=0;idx<arrSrc.length&&idx<arrDst.length;idx++){var rowData=arrDst[idx];meta=_updateMeta(arrSrc[idx],rowData,proto.$item.$properties,!0),rowData.$arrayUpdateError&&isRowData&&(toData.$arrayUpdateError=!0),done=meta!=null||done}}else if(proto.$item.$type==="application/x-reference"){var arrSrc=fromData[name],arrDst=toData[name],dst,src;for(var idx=0;idx<arrSrc.length&&idx<arrDst.length;idx++){dst=arrDst[idx],src=arrSrc[idx];for(var p in _defMetaData.$properties)src&&src[p]!=null?dst[p]=src[p]:proto.$item[p]!=null?dst[p]=proto.$item[p]:dst[p]=_defMetaData.$properties[p]}}}return done},_typeDefValue=function(prop){switch(prop.$type){case"application/x-password":case"application/x-string":return"";case"application/x-quantity":return 0;case"application/x-decimal":case"application/x-real":return 0;case"application/x-integer":return 0;case"application/x-boolean":return!1;case"application/x-date":return"";case"application/x-datetime":return"";case"application/x-time":return"";case"application/x-choice":return prop.$value.$enum[0].$value;case"application/x-reference":return{$value:"",$description:"",$title:""};case"application/x-array":return[];default:return null}},_dataProps=["$isMandatory","$isReadOnly","$isHidden","$isExcluded","$isDisabled","$actions","$format"],_proto2Instance=function(protoArray){var res;if(protoArray.isSingleArray())res={$properties:{"~data~":""}};else{res={$properties:{}};var props=protoArray.getDataByPath("$item.$properties");for(var propName in props)if(!propName.smStartsWith("$")){var prop=props[propName];res[propName]=_typeDefValue(prop);var $properties=res.$properties[propName]={};_dataProps.forEach(function(p){prop[p]!=null&&($properties[p]=prop[p])})}}return res},_getArrayEmptyRow=function(controller,proto,bind,parentDao){var rsrc=_proto2Instance(proto);return rsrc.$uuid=utils.UUID(),new _Dao(rsrc,_getProtoRowDetail(controller,proto),{parent:parentDao,$bind:bind})},_getProtoRowDetail=function(controller,proto){var protoJson={$url:"",$typ:"rowdetail",$links:{}};controller.isEditMode()&&(protoJson.$links.$save={$title:locale.text("array.links.save")},protoJson.$links.$delete={$title:locale.text("array.links.delete"),$confirm:locale.text("actions.del.confirm")}),protoJson.$title=proto.data("$title");if(proto.isSingleArray()){var p=$.extend({},proto.getDataByPath("$item"));return p.$isMandatory=!0,p.$isReadOnly=p.$isHidden=p.$isDisabled=!1,protoJson.$properties={"~data~":p},proto.create(protoJson)}return proto.getPrototype("$item",protoJson,controller.$activity==="read"?"details":"edit")},_getDaoRowDetail=function(parentDao,controller,protoArray){var prototype=_getProtoRowDetail(controller,protoArray);return new _Dao($.extend({},!0,parentDao.data),prototype,{parent:parentDao.parent,$bind:parentDao.$bind})},_getProtoCardDesign=function(array){var proto=array.prototype,protoJson={$url:"",$typ:"carddesign",$title:array.$bind,$links:{}};if(proto.isSingleArray())throw new Error("No card design for single array");proto=proto.getPrototype("$item",protoJson,"details");var props=proto.data("$properties");return Object.keys(props).forEach(function(key){props[key].$isHidden=!1}),proto},_Dao=utils.defineClass(function(data,prototype,options){options=options||{};if(!prototype)throw new Error("Prototype is mandatory");this.prototype=prototype,this.data=data||{},this.$bind=options.$bind||"",this.parent=options.parent,this.parent||(this._creationDate=new Date),this.resetCache()},null,{destroy:function(destroyProto){this.parent=null,this.data=null,destroyProto===!0&&this.prototype&&this.prototype.destroy(),this.prototype=null},resetCache:function(){this._cache={metaData:{},queryData:null}},setValue:function(name,value,notify){var done=!1,curVal=this.data[name];if(this.prototype.isReference(name)){var valName=this.prototype.getFieldNameForValue(name);if(valName!==name){var strVal;typeof value=="object"?strVal=value.$value||"":strVal=value+"";if(strVal!=this.data[valName]){this.data[name]=curVal={},this.data[valName]=strVal;if(strVal===value)curVal.$value=strVal;else for(var p in value)curVal[p]=value[p];curVal[valName]=strVal,done=!0}}else if(curVal==null||curVal.$value!=value)throw new Error("Syracuse entities - x-refrence setValue not implemented")}else if(curVal==null||curVal!==value)this.data[name]=value,done=!0;return done&&notify===!0&&notifications.publish("sm.dao.updated",this,name,value),done},getValue:function(name,defValue,searchInParents){if(!name||name.length===0)return defValue;var val=this.data[name];if(val!=null&&this.prototype.isReference(name)&&typeof val=="object"&&val.$value==null){var nameValue=this.prototype.getFieldNameForValue(name);return nameValue!=name?val.$value=this.getValue(nameValue,defValue):val.$value=val,val}if(val!=null)return val;if(searchInParents&&val==null&&this.parent){var pVal=this.parent.getValue(name,defValue,searchInParents);val=pVal}return val!=null?val:defValue},getMetaData:function(type,propName){if(!type)throw new Error("getMetaData - type expected");if(propName==null)return;var protoPropName=propName;type==="$properties"&&this.prototype.isReference(propName)&&(propName=this.prototype.getFieldNameForValue(propName));var meta=this._cache.metaData[type];if(meta){if(propName==null)return meta;if(propName!=null&&meta[propName]!=null)return meta[propName];meta=meta[propName]={}}else meta=this._cache.metaData[type]={},propName!=null&&(meta=meta[propName]={});var proto=this.prototype.data(type);proto&&propName!=null&&(proto=proto[protoPropName]);var data=this.data[type];data&&propName!=null&&(data=data[propName]);var props=_defMetaData[type];if(!props)throw new Error("getMetaData - unexpected type["+type+"]");for(var p in props){if(data&&data[p]!=null){meta[p]=data[p];continue}proto&&proto[p]!=null?meta[p]=proto[p]:meta[p]=props[p]}return meta},removeMetaDiagnoses:function(fieldName){this.prototype.isReference(fieldName)&&(fieldName=this.prototype.getFieldNameForValue(fieldName)),[this.data,this._cache.metaData].forEach(function(data){var meta=data.$properties;meta&&meta[fieldName]&&(meta[fieldName].$diagnoses=undefined)})},getFieldInfo:function(name){return{meta:this.getMetaData(),value:this.getValue()}},getArrayData:function($bind,protoArray,localPaginator){if(!protoArray)throw new Error("getArrayData - Prototype Array is mandatory");var arrayData;if(protoArray.isSingleArray()){arrayData=[];var rsrcs=this.getValue($bind)||[],meta=this.data.$properties&&this.data.$properties[$bind];meta=meta?meta.$items:null;var proto=protoArray.getPrototype("$item"),self=this;rsrcs.forEach(function(rsrc,idx){var data={};data[globals.SINGLEARRAYPROP]=rsrc,data.$uuid=utils.UUID();var diag=null,errEntry;if(proto.property(globals.SINGLEARRAYPROP).$type==="application/x-reference"){var valFld=proto.getFieldNameForValue(globals.SINGLEARRAYPROP);valFld&&(data[valFld]=rsrc[valFld]),rsrc.$diagnoses&&(diag=rsrc.$diagnoses,errEntry=valFld)}else meta&&meta[idx]&&(diag=meta[idx].$diagnoses),errEntry=globals.SINGLEARRAYPROP;diag&&diag.length>0&&(data.$arrayUpdateError=!0,data.$properties={},data.$properties[errEntry]={$diagnoses:diag}),arrayData.push(new _Dao(data,proto,{parent:self,$bind:$bind}))})}else arrayData=this._createArrayData($bind,protoArray,localPaginator);return{$resources:arrayData||[]}},_createArrayData:function($bind,protoArray,localPaginator){var res=[],rsrcs=this.getValue($bind);if(rsrcs&&rsrcs.length>0){var startIdx=localPaginator?Math.max(0,localPaginator.currentIdx):0,length=localPaginator?Math.min(rsrcs.length,startIdx+localPaginator.count):rsrcs.length,protoRow=protoArray.getPrototype("$item");for(var i=startIdx;i<length;i++)res.push(new _Dao(rsrcs[i],protoRow,{parent:this,$bind:$bind}))}return res},getQueryData:function(protoArray,localPaginator){if(!protoArray)throw new Error("getQueryData - Prototype Array is mandatory");var res={$itemsPerPage:this.getValue("$itemsPerPage"),$links:this.getValue("$links")};return res.$resources=this._createArrayData("$resources",protoArray,localPaginator),res},getLookupData:function(protoArray,localPaginator){return this.getQueryData(protoArray,localPaginator)},getQueryResources:function(){return this.getValue("$resources")||[]},parseExpression:function(expression){return utils.parseExpression(expression,this,this.prototype)},setRowIndex:function(value){this.setValue(globals.ROWIDXPROP,value,!1)},getActionPayload:function(link,controller){var operations={test:!1,removeprop:{regExp:/^\$/,exclude:["$parameters","$uuid","$index","$serverIndex","$etag","$trackingId"]}},result=this._processData(operations);operations.test&&(console.log("getActionPayload - operations - Elsaped=",(new Date).getTime()-operations.startTime),console.log("Result: ",JSON.stringify(result,null,2)));if(!link)return;var payload;(link.$method==="PUT"||link.$method==="POST")&&controller&&controller.isEditMode()?payload=$.extend({},this.data):payload={},payload.$parameters=payload.$parameters||{};var self=this;return $.each(link.$parameters||[],function(name,value){payload.$parameters[name]=self.parseExpression(value)}),payload},clone:function(){return new _Dao($.extend(!0,{},this.data),this.prototype,{parent:this.parent,$bind:this.$bind})},updateMeta:function(src){if(!src)return;this.resetCache();var res=_updateMeta(src,this.data,this.prototype.data("$properties"));return res},updateParentRow:function(create,singleArrayRowIdx){if(!this.parent||!this.data||$.isEmptyObject(this.data))return!1;var id=this.data.$uuid,grid=this.parent.data[this.$bind];if(!grid){if(!create)return!1;grid=this.parent.data[this.$bind]=[]}var single=this.prototype.isSingleArray();if(create){var newdata=single?this.data[globals.SINGLEARRAYPROP]:this.data;grid.push($.isPlainObject(newdata)?$.extend({},newdata):newdata)}else{var idx=-1,newdata=this.data;if(single){grid.length>singleArrayRowIdx&&(idx=singleArrayRowIdx);if(idx<0)return!1;newdata=this.data[globals.SINGLEARRAYPROP]}else{grid.some(function(r,i){if(r.$uuid==id)return idx=i,!0});if(idx<0)return!1}if(utils.areEqual(newdata,grid[idx]))return!1;grid[idx]=$.isPlainObject(newdata)?$.extend({},newdata):newdata}return!0},deleteRow:function(field,rowidoridx){var grid=this.data[field];if(!grid)return!1;var idx=-1;return this.prototype.isSingleArray(!1,field)?(rowidoridx=parseInt(rowidoridx,10),grid.length>rowidoridx&&(idx=rowidoridx)):grid.some(function(r,i){if(r.$uuid==rowidoridx)return idx=i,!0}),idx<0?!1:(grid.splice(idx,1),!0)},checkArrayUpdateError:function(){var d=this.data,errors=!1;if(d.$properties)for(var p in d.$properties)if(p.$diagnoses&&p.$diagnoses.length>0){errors=!0;break}if(!errors){var props=this.prototype.data("$properties")||{};for(var p in props)if(props[p].$type==="application/x-array"&&this.data[p]&&this.data[p].some(function(r){if(r.$arrayUpdateError)return!0})){errors=!0;break}}errors||(d.$arrayUpdateError=!1)},applyChange:function(newData,opts){newData||(newData={}),this.resetCache(),opts||(opts={}),opts.$isPartialDelta==null&&(opts.$isPartialDelta=!0),opts.$isEditMode==null&&(opts.$isEditMode=!0),deltaManager.applyObjectDelta(opts,this.data,newData)},replaceData:function(newData){newData||(newData={}),this.resetCache(),this.data=newData},isValid:function(){return this.prototype!=null&&this.data!=null&&this.prototype.isValid()},expired:function(timeout){var creDate,dao=this;while(dao!=null&&(creDate=dao._creationDate)!=null)dao=this.parent;return creDate?(new Date).getTime()-creDate.getTime()>timeout:!1},_walkArray:function(o,operation,result){if(!o)return;var self=this;o.forEach(function(e){typeof e=="object"&&self._walk(e,operation,result)})},_walkPlainObject:function(o,operation,result){if(!o)return;var p=Object.keys(o),e,name,match;for(var ii=0,jj=p.length;ii<jj;ii++)name=p[ii],e=o[name],operation.removeprop&&(operation.removeprop.exclude==null||operation.removeprop.exclude.indexOf(name)===-1)&&(match=!1,!match&&operation.removeprop.regExp&&(match=operation.removeprop.regExp.test(name)),!match&&operation.removeprop.props&&(match=operation.removeprop.props.indexOf(name)>=0),match&&(delete o[name],operation.test&&(result.removeprop==null&&(result.removeprop={_nbRemoved:0}),result.removeprop[name]==null&&(result.removeprop[name]=0),result.removeprop[name]++,result.removeprop._nbRemoved++))),typeof e=="object"&&this._walk(e,operation,result)},_walk:function(o,operation,result){if(!o||!operation||!result)return;typeof o=="object"&&(Array.isArray(o)?this._walkArray(o,operation,result):$.isPlainObject(o)&&this._walkPlainObject(o,operation,result))},_processData:function(operation){operation.test&&(operation.startTime=(new Date).getTime());var result={};return this._walk(this.data,operation,result),result}});exports.Dao=_Dao,exports.emptyDao=function(prototype){return new _Dao({$properties:{}},prototype)},exports.getArrayEmptyRow=_getArrayEmptyRow,exports.getDaoRowDetail=_getDaoRowDetail,exports.getProtoCardDesign=_getProtoCardDesign}),define("syracuse-tablet/html/js/storage/sessionStorage",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("sessstorage"),_available=null,_backupMap={},_isAvailable=function(){if(_available!==null)return _available;_available=!1;try{window.sessionStorage.setItem("__test_availability_session__","__test_availability_session__"),_available=!0}catch(e){}return _available},_getItem=function(key){if(!_isAvailable())return log&&log("session.fallback.getItem("+key+"):"+val),_backupMap[key];var val=window.sessionStorage.getItem(key);return log&&log("session.getItem("+key+"):"+val),val},_setItem=function(key,value){if(!_isAvailable()){log&&log("session.fallback.setItem("+key+"):"+value),_backupMap[key]=value;return}return log&&log("session.setItem("+key+"):"+value),window.sessionStorage.setItem(key,value)},_removeItem=function(key){if(!_isAvailable()){log&&log("session.fallback.removeItem("+key+")"),delete _backupMap[key];return}return log&&log("session.removeItem("+key+")"),window.sessionStorage.removeItem(key)};exports.removeItem=_removeItem,exports.setItem=_setItem,exports.getItem=_getItem}),define("syracuse-tablet/html/js/application/gadget",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),_Gadget=utils.defineClass(function(jsonData){var self=this;self._data=jsonData},null,{destroy:function(){var self=this;self._data=null},isRequest:function(){return this._data.$type==="$request"},isStatistics:function(){return this._data.$type==="$stats"},data:function(prop){return this._data?this._data[prop]:null},getEndPoint:function(){return this._data.endpoint||globals.getEndpoint()},isDefaultEndpoint:function(){return!this._data.endpoint},getPageName:function(){var self=this;if(!self.isValid())return null;var rep;if(self.isRequest())rep=self.getRequestRepresentation();else if(self.isStatistics())var rep=self.getStatsRepresentation();else var rep=self._data.representation;return self.getEndPoint()+"."+rep+"."+self._data.facet},getSDataUrl:function(proto){var self=this,url;switch(self._data.$type){case"$representation":["$details","$edit"].indexOf(self._data.action)>-1?url=proto.data("$url",{$key:self._data.keyParameter}):["$create"].indexOf(self._data.action)>-1?(url=proto.data("$url"),url=url.replace(/\((.*?)\)/,"/$template")):url=proto.data("$url");break;case"$request":url=proto.data("$baseUrl"),url=url+"/QUERY('"+self._data.requestName+"')?representation="+self.getRequestRepresentation()+".$query",self._data.parameters&&Object.keys(self._data.parameters).forEach(function(name){var value=self._data.parameters[name].value;if(!value)return;if(name==="where"&&/{\S+}/.test(value))return;url=url+"&"+name+"="+value});break;case"$stats":url=proto.data("$baseUrl"),url=url+"/STATS('"+self._data.statName+"')?representation="+self.getStatsRepresentation()+".$cube",self._data.parameters&&Object.keys(self._data.parameters).forEach(function(name){var value=self._data.parameters[name].value;if(!value)return;if(name==="where"&&/{\S+}/.test(value))return;url=url+"&"+name+"="+value})}return url},getRequestRepresentation:function(){return"QUERY~"+this._data.requestName+"~"+this._data.requestLevel},getStatsRepresentation:function(){return"STATS~"+this._data.statName},getJSON:function(){return $.extend(!0,{},this._data)},isValid:function(){return this.getInvalidReason()==null},getInvalidReason:function(){var t=this._data.$type;return t==="$representation"||t==="$stats"||t==="$request"?this._data.$uuid.smStartsWith("test")?null:(this.getEndPoint()||"").trim().length==0?"No endpoint":null:null},getParameters:function(){return this._data.parameters||{}}});exports.Klass=_Gadget}),define("syracuse-tablet/html/js/pages/pageRegular",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/pages/page","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/application/appFactory","syracuse-tablet/html/js/application/daoSdata","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/storage/sessionStorage","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/application/gadget"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("page"),Base=require("syracuse-tablet/html/js/pages/page").Page,globals=require("syracuse-tablet/html/js/helpers/globals"),dispatcher=require("syracuse-tablet/html/js/sdata/sdataDispatcher"),factory=require("syracuse-tablet/html/js/application/appFactory"),daoSdata=require("syracuse-tablet/html/js/application/daoSdata"),sdataUtils=require("syracuse-tablet/html/js/sdata/sdataUtils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),sessStorage=require("syracuse-tablet/html/js/storage/sessionStorage"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),locale=require("syracuse-tablet/html/js/helpers/locale"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),Gadget=require("syracuse-tablet/html/js/application/gadget").Klass,_notInPanel=["$edit","$create","$delete","$details","$query","$save","$canceledit"],_excludeFromPanel=function(name,forceFooterHeader){return _notInPanel.indexOf(name)>=0?!0:forceFooterHeader===!0},_isOfficeLink=function(name,info){return name.smStartsWith("$word")||name.smStartsWith("$excel")||info.$type!=null&&info.$type.indexOf("openxml")>=0},_isPaginLink=function(name){return name==="$first"||name==="$previous"||name==="$next"||name==="$last"},_checkLink=function(name,info){return info==null||info.$isExcluded===!0?!1:_isPaginLink(name)?!1:name.smStartsWith("$")&&_isOfficeLink(name,info)?!1:!0},_linksMap={header:{smartphone:{details:{$edit:!0,$delete:!0},edit:{$canceledit:!0,$save:!0},query:{$create:!0},create:{$save:!0,$canceledit:!0}},tablet:{}},footer:{smartphone:{},tablet:{details:{$edit:!0,$delete:!0,$query:!0},edit:{$save:!0,$canceledit:!0},query:{$create:!0},create:{$save:!0,$canceledit:!0}}},actionpanel:{}},_getLinkMap=function(toolbar,deviceType,facet){var lMap=_linksMap[toolbar];if(!lMap)throw new Error("Unexpected toolbar parameter ["+toolbar+"]. Expected 'header', 'footer' or 'actionpanel'");if(toolbar==="actionpanel")return lMap;lMap=lMap[deviceType||"tablet"];if(!lMap)throw new Error("Unexpected deviceType parameter ["+deviceType+"]. Expected 'tablet', 'smartphone'");facet==="lookup"&&(facet="query"),facet==="summary"&&(facet="details"),lMap=lMap[facet];if(!lMap)throw new Error("Unexpected facet parameter ["+facet+"]");return lMap},_setFilterRightValue=function(filter){var cp=filter.prop,cv,value=(filter.originalValue||filter.value)==null?"":filter.originalValue||filter.value;switch(cp.$type){case"application/x-password":case"application/x-string":return cv=value.replace(/'/g,"\\'"),filter.operator==="like"?cv="%"+cv+"%":filter.operator==="like_s"&&(cv+="%"),cv="'"+cv+"'",cv;case"application/x-integer":case"application/x-real":case"application/x-decimal":case"application/x-quantity":return value;case"application/x-date":if(!value)return null;return"@"+value+"@";case"application/x-datetime":return"@"+value+"@";case"application/x-time":return null;case"application/x-boolean":return value?"true":"false";case"application/x-choice":return cp.$value&&cp.$value.$type==="application/x-string"?"'"+value.replace(/'/g,"\\'")+"'":value+"";case"application/x-reference":return typeof value!="string"&&(value=filter.value),cv=(value||"").replace(/'/g,"\\'"),cv="'"+cv+"'",cv;default:}return null},_Page=utils.defineClass(function RegularPage($parent,state,prototype,article,options){options.breadcrumbs==null&&(options.breadcrumbs=!0),Base.call(this,$parent,state,prototype,article,options),this.gadget=this.state.options.gadget?new Gadget(this.state.options.gadget):null,this.openedFromDashboard=this.gadget!=null,this._originalSdataUrl=this.state.options["sdata-url"],this._originalSdataUrl||(this.gadget?this._originalSdataUrl=this.gadget.getSDataUrl(this.prototype):this._originalSdataUrl=this.prototype.data("$url")),this._init$Filters(),this._initSdataInfo(),notifications.subscribe(this,["sm.rowdetail.update","sm.rowdetail.delete","sm.action.link"],1),this.prototype.data("$url")&&(this.$facet=sdataUtils.parseSDataURL(this.prototype.data("$url")).facet,this.setActivity(this.$facet==="edit"?"edit":this.$facet==="create"?"create":"read"))},Base,{_init$Filters:function(){this._$filters=[{id:"nofilter",$title:locale.text("nofilter")}];var auth=this.$filtersGetAuthoring(),filters=this.prototype.data("$filters");if(auth==="none"||!filters){this._$filtersDisabled=!0;return}var def=!1;for(var p in filters){var ttl=this.prototype.resolveExpression(filters[p].$title);if(ttl){var f=$.extend(!0,{},filters[p]);f.$title=ttl,f.id=p,def=def||f.$isDefault===!0,this._$filters.push(f)}}if(this._$filters.length==0)return;def||(this._$filters[0].$isDefault=!0)},_initSdataInfo:function(sdataUrl){sdataUrl||(sdataUrl=this._originalSdataUrl);if(this.gadget){var params=this.gadget.getParameters();params.where&&(sdataUrl=sdataUtils.addWhereClause(sdataUrl,params.where,this.state.options.sdataParameters))}if(!sdataUrl)throw new Error("$url (sDataUrl) is expected");this.state.options["sdata-url"]=this.sDataUrl=sdataUrl,this.sDataMethod=this.state.options["sdata-method"]||"GET"},getOriginalSdataUrl:function(){return this._originalSdataUrl},destroy:function(){if(this.destoyed)return;this.prototype&&this.prototype.acceptServerPagination()&&!globals.isAuthoringActive()&&notifications.publish("sm.authcache.destroy",this.id),Base.prototype.destroy.call(this),this.gadget=null},isSamePage:function(pageName,pageOptions){return Base.prototype.isSamePage.call(this,pageName,pageOptions)?!this.state.options||!pageOptions?!0:pageOptions["sdata-url"]===this.state.options["sdata-url"]:!1},initOnLoad:function(){},beforeAddContent:function(){},afterRender:function(loadOptions,buildOpts){var self=this;return Base.prototype.afterRender.call(self,loadOptions,buildOpts).then(function(){if(!self.isVignette){var diags=self.dao&&self.dao.data&&self.dao.data.$diagnoses;diags&&diags.length>0&&diags.forEach(function(diag){var notify={severityClass:globals.X3_SEVERITY_TO_BS[diag.$severity]||diag.$severity||"error",title:diag.$message};globals.getModal().notify(notify)})}})},getOpenLinkAttrs:function(){var res=Base.prototype.getOpenLinkAttrs.call(this);return res["data-sdata-url"]=this.sDataUrl,res["data-sdata-method"]=this.sDataMethod,res["data-gadget-id"]=this.gadget.data("$uuid"),res},refresh:function(options,callBackInterface){var self=this;options=options||{};var deferred=$.Deferred(),url=options["sdata-url"],controlId=options.controlId,type=options.type||"",force=type==="filtersort"||options.forceRefresh===!0,_wait=function(status){var suffix=self["wait"+status.smCapitalize()];if(callBackInterface){var meth=self["wait"+suffix];meth&&callBackInterface[meth].call(null,controlId)}else{var meth=self["waitWheel"+suffix];meth&&meth.call(self,controlId)}};try{var _succeeded=function(){_wait("stop"),self.refreshControls(controlId?[controlId]:null,options),deferred.resolve()};!url&&force!==!0?_succeeded():(_wait("start"),url&&self._initSdataInfo(url),self.loadData({}).then(function(){_succeeded()}).fail(function(e){_wait("stop"),deferred.reject(e)}))}catch(e){deferred.reject(e)}finally{return deferred.promise()}},_getFullSdataUrl:function(){return this._filterSortAllowed()?this._filterSortUpdateUrl():this.sDataUrl},getRestoreContext:function(){var ctx=Base.prototype.getRestoreContext.call(this);return ctx?(this.state.options.sdataParameters&&(ctx.currentState.options.sdataParameters=this.state.options.sdataParameters),ctx.currentState.options["sdata-url"]=this.sDataUrl,ctx):ctx},loadData:function(loadOptions){loadOptions=loadOptions||{};var deferred=$.Deferred(),self=this;self.offLine=!1;var _rejectError=function(e){log&&log("loadData failed",e),deferred.reject(e)},forceUseCache=loadOptions.updateLayout||utils.forceUseCache();try{var dispatchOptions={forceUseCache:forceUseCache};this.prototype.acceptServerPagination()&&(dispatchOptions.$authCacheId=this.id),dispatcher.dispatch({$url:self._getFullSdataUrl(),$method:self.sDataMethod},null,dispatchOptions).then(function(data){if(self.destroyed)return;data||(data=self.getEmptyDao(self.prototype)),self.setDao(factory.createDaoSdata(data,self.prototype,{}));if(data.$cacheHint&&!forceUseCache){var notify={severityClass:"warning",title:locale.text("info.network.offline.title"),body:locale.text("info.network.offline.outdated")};self.offLine=!0;if(!self.isVignette)globals.getModal().notify(notify);else{var dashboardPage=globals.getApplication().currentPage;dashboardPage&&dashboardPage.cachedDataNotification?dashboardPage.cachedDataNotification(notify):globals.getModal().notify(notify)}}return deferred.resolve()}).fail(function(e){_rejectError(e)})}catch(e){_rejectError(e)}finally{return deferred.promise()}},notifLookupSelection:function(rowData,controlId){if(!this.isActive())return;Base.prototype.notifLookupSelection.call(this,rowData,controlId)},notifActionLink:function(success,link,result,options){var self=this;if(!this.isActive())return;try{var responseJSON=result?result.responseJSON||{}:{},_displayMessage=function(thereIsFieldErrors){if(thereIsFieldErrors===!0&&success===!0)return;globals.getModal().displayActionMsg(success,link.name,self.prototype,responseJSON)};switch(link.name){case"$save":this._doActSave(success,link,responseJSON,options);break;case"$delete":this.goBack().always(function(){_displayMessage()});break;case"$canceledit":if(this.$activity==="create")this.reload();else{var autoScroll=this.getScrollValue();this.goBack().then(function(newPage){newPage&&setTimeout(function(){newPage.autoScroll(autoScroll*.8)})})}break;default:var thereIsFieldErrors=!1;link.$isAction===!0&&responseJSON&&(thereIsFieldErrors=this._myApplyChange(responseJSON));var settings=this.actionGetSettings(link.name,"options");settings&&settings.refreshPage===!0?this.refresh({forceRefresh:!0}).then(function(){_displayMessage(thereIsFieldErrors)}):_displayMessage(thereIsFieldErrors)}}catch(e){globals.getModal().error("notifActionLink failed",e)}},_myApplyChange:function(responseJSON){this.dao.applyChange(responseJSON,{$isPartialDelta:!1,$isEditMode:this.isEditMode()});var errors=this.refreshControls(null,{refreshValue:!0});return errors.length>0&&errors[0].setFocus(),this._gestureMgr&&this._gestureMgr.adjust(),errors.length>0},validateBeforeActionLink:function(link){return link?link.$method!=="POST"&&link.$method!=="PUT"?!0:this.checkControlsData():!0},_triggerRepresentationUpdated:function(){if(!globals.isOnline()||this.isChild||!this.isVignette)return;var rep=this.prototype.data("$representation"),baseUrl=this.prototype.data("$baseUrl");if(!rep||!baseUrl)return;notifications.publish("sm.representation.updated",rep,baseUrl)},_doActSave:function(success,link,responseJSON,options){var self=this;if(success)self.openedFromDashboard&&self.$activity==="create"?(globals.getModal().displayActionMsg(success,link.title||link.name,self.prototype,responseJSON),self.reload()):self.goBack().always(function(dstPage){globals.getModal().displayActionMsg(success,link.title||link.name,self.prototype,responseJSON),dstPage&&dstPage.$activity==="create"&&dstPage.reload()});else{if(self.dao.updateMeta(responseJSON)){var errors=self.refreshControls(null,{});errors.length>0&&errors[0].setFocus(),self._gestureMgr&&self._gestureMgr.adjust()}!success&&(responseJSON==null||!responseJSON.$diagnoses||responseJSON.$diagnoses.length==0)&&(responseJSON.$diagnoses=[{$message:"Save action failed without any message",$severity:"error"}]),globals.getModal().actionResult("Action: "+link.name,responseJSON)}},scrollAllowed:function(){return this.prototype.isQueryLikeFacet()?!1:!0},notifRowdetailUpdate:function(info,arrayId){if(!info)return;var childDao=info.dao;if(!childDao)return;var array=this.getControl(arrayId);if(!array)return;var create=info.activity==="create",singleArrayRowIdx;!create&&array.prototype.isSingleArray()&&(singleArrayRowIdx=array.rowId2Idx(childDao.getValue("$uuid")));if(childDao.updateParentRow(create,singleArrayRowIdx)){var errors=this.refreshControls([arrayId],{});errors.length>0&&errors[0].setFocus()}childDao.destroy(!0)},notifRowdetailDelete:function(data,arrayId){if(!data||!data.uuid)return;var array=this.getControl(arrayId);if(!array)return;var rowidOrIdx=data.uuid;array.prototype.isSingleArray()&&(rowidOrIdx=array.rowId2Idx(data.uuid)),this.dao.deleteRow(array.$bind,rowidOrIdx),array.removeRow(data.uuid)},getPinPageId:function(){var self=this;return self.state.name+"_"+self.sDataUrl},getPinPageData:function(){var self=this,pageData=Base.prototype.getPinPageData.call(self);pageData.sDataUrl=self.sDataUrl,pageData.key=self.prototype.data("$key",self.dao);var pu=jsutils.parseURL(pageData.sDataUrl),repr=pu.query.representation.split(".");pageData.representation=repr[0],pageData.facet=repr[1],pageData.action=repr[1];var ps=pu.path.split("/");pageData.entity=ps[5],pageData.endpoint=pu.path.split("/").slice(2,5).join(".");var value=self.prototype.data("$value",self.dao);return value&&(pageData.title=self.prototype.data("$title")+" - "+value),pageData},filterSortRead:function(type,ctrl){if(!this._filterSortAllowed())return;var id=this._filterInfoSaveId(type,ctrl);this._filterSortInfo||(this._filterSortInfo={});var info=this._filterSortInfo[id];if(info)return info;info=sessStorage.getItem(id);if(info)try{return info=JSON.parse(info),info}catch(e){}return null},filterSortWrite:function(type,info,ctrl,refresh){if(!this._filterSortAllowed())return;var id=this._filterInfoSaveId(type,ctrl),save=!1;if(info&&info.length>0){var old=this.filterSortRead(type,ctrl);if(old==null||!this._filterSortEquals(type,info,old))save=!0}else save=info!=this._filterSortInfo[id];save&&(sessStorage.setItem(id,info?JSON.stringify(info):null),this._filterSortInfo[id]=info,refresh===!0&&this._filterSortRefresh(ctrl))},searchRefresh:function(ctrlArray){this._filterSortRefresh(ctrlArray)},searchInfoRead:function(){if(!this._filterSortAllowed())return;var field=this.getControlByBind("$resources");if(!field||!field.searchInfoGet)return null;var info=field.searchInfoGet();return info==null||info.length==0?null:info},_filterSortRefresh:function(ctrlArray){var attrs={"data-control-id":ctrlArray.id,"data-nav-target":this.isVignette?"vignette":"application","data-nav-type":"filtersort"};this._initSdataInfo(null),setTimeout(function(){eventListener.triggerRefreshPage(ctrlArray.$$elmt,attrs)})},_filterSortAllowed:function(){return this.prototype.isLookup()||this.prototype.isQuery()},_filterInfoSaveId:function(type,ctrl){this._filtersortUrlId||(this._filtersortUrlId=this._originalSdataUrl);var id=this._filtersortUrlId+"#"+type;if(this.isVignette){var vid=this.state&&this.state.options&&this.state.options.vignetteName;vid&&(id=vid+"#"+id)}return this.prototype.isLookup()||this.prototype.isQuery()?id:id+"_"+ctrl.$bind},_filterSortEquals:function(type,info,old){if(info==null||old==null)return!0;if(type=="sort"){if(old.length!=info.length)return!1;for(var i=0;i<info.length;i++){if(info[i].sort!==old[i].sort)return!1;if(info[i].field!==old[i].field)return!1}return!0}if(type=="filter")return!1},_filterSortUpdateUrl:function(){var self=this,sdataUrl=jsutils.parseURL(self.sDataUrl);if(this.$filtersGet().length>0&&this._$filtersDisabled!=1){var f=null;this.$filtersGet().some(function(x){if(x.$isDefault===!0)return f=x,!0}),f&&(sdataUrl.query||(sdataUrl.query={}),f.id==="nofilter"?delete sdataUrl.query.filter:sdataUrl.query.filter=f.id)}if(!self._filterSortAllowed())return jsutils.urlToString(sdataUrl);var sortClause=null,info=self.filterSortRead("sort");info!=null&&info.length!=0&&info.some(function(i){if(i.sort!="none")return sortClause={order:i.sort,field:i.id},!0});var filterClause="";info=self.filterSortRead("filter"),info!=null&&info.length!=0&&$.each(info,function(idx,filter){var cf="("+filter.id+" "+(filter.operator==="like_s"?"like":filter.operator)+" "+_setFilterRightValue(filter)+")";filterClause=filterClause.length==0?cf:filterClause+" and "+cf});var searchClause="",searchInfo=self.searchInfoRead();searchInfo&&($.each(searchInfo,function(idx,search){var cf="("+search.id+" "+search.operator+" "+_setFilterRightValue(search)+")";searchClause=searchClause.length==0?cf:searchClause+" or "+cf}),searchClause&&(searchClause="("+searchClause+")"));if(!sortClause&&!filterClause&&!searchClause)return jsutils.urlToString(sdataUrl);if(sortClause&&sdataUrl.query.key==null){var old=sdataUrl.query.orderBy;sdataUrl.query.orderBy=sortClause.field+" "+sortClause.order,old&&(sdataUrl.query.orderBy=", "+old)}if(filterClause&&sdataUrl.query.key==null){var old=sdataUrl.query.where;sdataUrl.query.where=filterClause,old&&(sdataUrl.query.where=old+" and "+sdataUrl.query.where)}if(searchClause&&sdataUrl.query.key==null){var old=sdataUrl.query.where;sdataUrl.query.where=searchClause,old&&(sdataUrl.query.where=old+" and "+sdataUrl.query.where)}return jsutils.urlToString(sdataUrl)},$filtersGet:function(){return this._$filters},$filtersSelect:function(filterId,ctrlArray){if(!this._$filters)return;this._$filtersDisabled=!1,this._$filters.forEach(function(f){f.$isDefault=!1,filterId===f.id&&(f.$isDefault=!0)}),this._filterSortRefresh(ctrlArray)},$filtersGetAuthoring:function(){var c=this.getControlByBind("$resources");return c&&c.$filtersGetAuthoring?c.$filtersGetAuthoring():null},setDao:function(dao){Base.prototype.setDao.call(this,dao),this._multiSelectionLinks=this._protoLinks=this._toolbarLinks=null},getMultiSelectionLinks:function(){var self=this;if(!self.prototype.isQuery())return null;if(self._multiSelectionLinks==null){self._multiSelectionLinks=[];var $links=self.getProtoLinks(),info,link;if($links){var actSettings;$.each($links,function(name,value){if(!_checkLink(name,value)||value.$url==null||value.$url.length==0)return;actSettings=self.actionGetSettings(name);if(actSettings==null||actSettings.options!=null&&actSettings.options.multiselection!==!0)return;info=$.extend({},link,value),info.css=(info.css||"")+" s-m-ismultisel",actSettings&&actSettings.icon!=null&&(info.icon=actSettings.icon.css),self._multiSelectionLinks.push(info)})}}return self._multiSelectionLinks.length==0?null:self._multiSelectionLinks},hasFooterHeaderActions:function(onlyFooterHeader){var tl=this.getToolbarLinks(globals.getSiteLayout().getDeviceType()==="smartphone"?"header":"footer");if(tl.length===0)return!1;if(onlyFooterHeader===!0){for(var i=0;i<tl.length;i++)if(tl[i].footerHeader===!0)return!0;return!1}return tl.length>0},getProtoLinks:function(){var self=this;if(self._protoLinks==null){var $links=$.extend(!0,{},self.prototype.data("$links",null,!0),self.dao?self.dao.getValue("$links"):null);self._protoLinks={};var info,sdataInfo;if(this.prototype.isQuery()){var queryLinks=this.prototype.getDataByPath("$properties.$resources.$item.$links");queryLinks&&$.extend(!0,$links,queryLinks)}$.each($links,function(name,info){if(!_checkLink(name,info))return;info.name=name,info.title=info.$title?self.prototype.resolveExpression(info.$title):"",info.icon=fontUtils.getIconByName(name);if(info.$type==null||info.$type.length!==0||info.$type==="application/json;vnd.sage=syracuse"){if(info.$url){info.$parameters&&$.each(info.$parameters,function(paramName,paramValue){if(paramValue.indexOf("{")>-1&&self.dao){var pv2=self.prototype.resolveExpression(paramValue,self.dao);pv2&&pv2.length>0?paramValue=encodeURIComponent(pv2):paramValue=encodeURIComponent(paramValue)}info.$url=info.$url.replace("{"+paramName+"}",paramValue)});var urlParsed=self.prototype.resolveExpression(info.$url,self.dao,!1,!0);if(urlParsed.indexOf("/mobile1/")>-1){sdataInfo=sdataUtils.getLinkInfo(info.$url,self.dao,!0);if(!sdataInfo)return;$.extend(info,sdataInfo),info.$services&&(info.$isAction=!0)}else info.externalUrl=info.$url}else info.$isAction=!0;info.$uuid==null&&(info.$uuid=utils.UUID()),info.css=info.css||[],info.$isHidden===!0&&info.css.push("hidden"),info.$isDisabled===!0&&info.css.push("disabled"),info.css=info.css.join(" "),self._protoLinks[name]=info;return}})}if(arguments.length==0)return $.isEmptyObject(self._protoLinks)?null:self._protoLinks;var res;for(var i=0;i<arguments.length;i++)self._protoLinks[arguments[i]]&&(res==null&&(res={}),res[arguments[i]]=self._protoLinks[arguments[i]]);return res},getToolbarLinks:function(toolbar,options){var self=this;options=options||{};if(!self.dao)return[];self._toolbarLinks==null&&(self._toolbarLinks={});var device=globals.getSiteLayout().getDeviceType(),facet=self.prototype.getFacet(),key=toolbar+device+facet;if(self._toolbarLinks[key])return self._toolbarLinks[key];var links=self._toolbarLinks[key]=[],$links=self.getProtoLinks();if($links){var lMap=_getLinkMap(toolbar,device,facet),authSettings,forceFooterHeader;$.each($links,function(name,value){authSettings=self.actionGetSettings(name)||{},$.isEmptyObject(authSettings)||(value=$.extend({},!0,value),authSettings.icon!=null&&(value.icon=authSettings.icon.css),value.footerHeader=authSettings.options!=null&&authSettings.options.footerHeader===!0);if(authSettings.options&&authSettings.options.multiselection===!0)return;forceFooterHeader=value.footerHeader&&device!=="smartphone";if(forceFooterHeader!==!0&&toolbar!=="actionpanel"&&!lMap[name])return;if(toolbar==="actionpanel"&&_excludeFromPanel(name,forceFooterHeader))return;links.push(value)})}return links},getEmptyDao:function(proto){return daoSdata.emptyDao(proto)}});exports.isOfficeLink=_isOfficeLink,exports.Page=_Page}),define("syracuse-tablet/html/js/pages/pageRequest",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageRegular"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/pages/pageRegular").Page,_hideUnusedFields=function(proto){var props=proto.data("$properties");if(!props)return proto;for(var p in props)props[p].$isExcluded=p!=="$resources";return proto},_Klass=utils.defineClass(function RequestPage($parent,state,prototype,article,options){Base.call(this,$parent,state,_hideUnusedFields(prototype),article,options)},Base,{destroy:function(){Base.prototype.destroy.call(this)}});exports.Page=_Klass}),define("syracuse-tablet/html/js/pages/pageRowDetail",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/pages/pageRegular"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/pages/pageRegular").Page,_Page=utils.defineClass(function RowDetailPage($parent,state,prototype,article,parentPage,options){this.parentPage=parentPage,this.parentPage.state.type==="rowdetail"?this.mainPageId=this.parentPage.mainPageId:this.mainPageId=this.parentPage.state.uuid;if(!this.parentPage)throw new Error("rowdetail page - Unexpected empty parent page");Base.call(this,$parent,state,prototype,article,options),this.setActivity(this.parentPage.$activity)},Base,{_initSdataInfo:function(sdataUrl,sdataMethod){},destroy:function(){if(this.destoyed)return;Base.prototype.destroy.call(this),this.parentPage=null,this._notifData=null,this._originalDao&&(this._originalDao.destroy(),this._originalDao=null)},isEditMode:function(){return this.parentPage&&this.parentPage.isEditMode()},buildHtmlOption:function(loadOptions){return Base.prototype.buildHtmlOption.call(this,loadOptions).then(function(opts){return opts.toolBars.showHome=!0,opts})},_actHome:function(){if(!this.parentPage)return;if(this.isVignette)this.getParentVignette().goHome();else{var self=this;globals.getApplication().goBack(function(state){return state.uuid===self.mainPageId})}},loadData:function(loadOptions){if(loadOptions.reload){if(!this._originalDao)return;return this.setDao(this._originalDao.clone()),$.smResolve()}var ctrl=this.parentPage.getControl(this.state.options.controlId);if(!ctrl)throw new Error("rowdetail page - Array datasource not found");var info=ctrl.rowDetailGetInfo();if(!info.dao)throw new Error("rowdetail page - Row data not found");return this.setActivity(info.activity),this.$activity!=="read"?(this._originalDao=info.dao,this.setDao(info.dao.clone())):this.setDao(info.dao),this.singleArrayRowIdx=info.singleArrayRowIdx,$.smResolve()},notifActionLink:function(success,link,result,options){switch(link.name){case"$save":this._doActSave(success,link,options);break;case"$delete":this._doActDelete(success,link,options);break;case"$canceledit":this.goBack();break;default:Base.prototype.notifActionLink.call(this,success,link,result,options)}},_doActSave:function(success,link,responseJSON,options){success&&(this.dao.checkArrayUpdateError(),this._notifData={notifId:"sm.rowdetail.update",notifData:{dao:this.dao,activity:this.$activity,singleArrayRowIdx:this.singleArrayRowIdx}},this.dao=null,this.prototype=null,this.goBack())},_doActDelete:function(success,link,responseJSON,options){this._notifData={notifId:"sm.rowdetail.delete",notifData:{uuid:this.dao.getValue("$uuid")}},this.goBack()},getParentNotif:function(){if(this._notifData)return this._notifData.parentId=this.state.options.parentId,this._notifData.controlId=this.state.options.controlId,this._notifData}});exports.Page=_Page}),define("syracuse-tablet/html/js/controls/chart/chartUserPrefs",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/storage/sessionStorage"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),sessStorage=require("syracuse-tablet/html/js/storage/sessionStorage"),_Klass=utils.defineClass(function ChartDetailPrefs(id){this._id=id},null,{destroy:function(){},_toolbarWrite:function(type,info){sessStorage.setItem(this._getStorageId(type),info?JSON.stringify(info):null)},_toolbarRead:function(type){var info=sessStorage.getItem(this._getStorageId(type));if(!info)return null;try{return JSON.parse(info)}catch(e){}return null},_getStorageId:function(type){return this._id+type},getPrefs:function(){return this._toolbarRead("toolbar",this)||{}},savePrefs:function(opts){var prefs=null;if(opts!==null){var prefs=this.getPrefs();for(var p in opts)prefs[p]=opts[p]}this._toolbarWrite("toolbar",prefs)},reset:function(opts){this.savePrefs(null)}});exports.createChartDetailPrefs=function(id){return new _Klass(id)}}),define("syracuse-tablet/html/js/controls/chart/chartsUtils",["require","exports","module"],function(require,exports,module){var _getChartDetailArticle=function(opt,$bind,chartArticle,arrayArticle){opt=opt||{},opt.display=opt.display||"bothSideToSide",opt.style=opt.style||(chartArticle?chartArticle.$style:"bar"),chartArticle?chartArticle=$.extend({},!0,chartArticle):chartArticle={$bind:$bind,$isTitleHidden:!0,$arrayOptions:{}},chartArticle.$display||(chartArticle.$display="chart"),chartArticle.$arrayOptions.showPagination=opt.display==="chartOnly",arrayArticle?arrayArticle=$.extend({},!0,arrayArticle):arrayArticle={$bind:$bind,$isTitleHidden:!0,$arrayOptions:{}},arrayArticle.$arrayOptions=arrayArticle.$arrayOptions||{},arrayArticle.$display||(arrayArticle.$display="table"),arrayArticle.$arrayOptions.showPagination=!0;var res;chartArticle.$isHidden=arrayArticle.$isHidden=!1;switch(opt.display){case"chartOnly":arrayArticle.$isHidden=!0,res={$layoutType:"stack",$items:[{$layoutType:"row",$items:[chartArticle,arrayArticle]}]};break;case"arrayOnly":chartArticle.$isHidden=!0,res={$layoutType:"stack",$items:[{$layoutType:"row",$items:[arrayArticle,chartArticle]}]};break;case"bothStacked":res={$layoutType:"stack",$items:[{$layoutType:"row",$items:[chartArticle,arrayArticle]}]};break;default:res={$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthAll:"6",$sameSize:!0,$bgColor:"transparent",$items:[chartArticle]},{$layoutType:"cell",$widthAll:"6",$sameSize:!0,$bgColor:"transparent",$items:[arrayArticle]}]}]}}return chartArticle.$style=opt.style,res.$display=opt.display,res};exports.getChartDetailArticle=_getChartDetailArticle}),define("syracuse-tablet/html/js/pages/pageChartDetail",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageRegular","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/controls/chart/chartUserPrefs","syracuse-tablet/html/js/controls/chart/chartsUtils","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/pages/pageRegular").Page,ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),chartUserPrefs=require("syracuse-tablet/html/js/controls/chart/chartUserPrefs"),chartsUtils=require("syracuse-tablet/html/js/controls/chart/chartsUtils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_Page=utils.defineClass(function ChartDetailPage($parent,state,prototype,article,parentPage,options){globals.isAuthoringActive()&&(options.header=!1,options.footer=!1,options.breadcrumbs=!1),options.topToolbar=!0,this.isChartDetailPage=!0,article.$display||(article.$display="bothSideToSide"),this.parentPage=parentPage;if(!this.parentPage)throw new Error("chartdetail page - Unexpected empty parent page");Base.call(this,$parent,state,prototype,article,options),this._userPrefs=chartUserPrefs.createChartDetailPrefs(state.options.dataParams)},Base,{destroy:function(){if(this.destoyed)return;Base.prototype.destroy.call(this),this.parentPage=null,this._notifData=null,this._userPrefs&&(this._userPrefs.destroy(),this._userPrefs=null)},createPageControl:function(id){return id==="topToolbar"?globals.isAuthoringActive()?null:ctrlFactory.createPageControl("topToolbarChartDetail",this):ctrlFactory.createPageControl(id,this)},buildHtmlOption:function(loadOptions){return loadOptions&&(loadOptions.updateLayout=!0),Base.prototype.buildHtmlOption.call(this,loadOptions).then(function(opts){return opts.toolBars.showAuthoring=!0,opts.toolBars.showUserMenuLinks=!0,opts.toolBars.showHome=!0,opts.toolBars.showActions=!1,opts.toolBars.statusPinPage=!1,opts})},afterRender:function(loadOptions,buildOpts){var self=this;return Base.prototype.afterRender.call(this,loadOptions,buildOpts).then(function(){var chart=self.getChart(),array=self.getArray();chart&&chart.article.$isHidden===!1&&array&&array.article.$isHidden===!1&&array.paginAddSynchro(chart)})},activated:function(){var opts={display:this.article.$display,style:this.getChart().article.$style};notifications.publish("sm.chartdetail.updt.toolbar",opts)},getParentNotif:function(){return this._notifData?{parentId:this.state.options.parentId,controlId:this.state.options.controlId,notifId:"sm.updt.chart.detail.article",notifData:this._notifData}:this.parentPage&&this.parentPage.isVignette?{notifId:"sm.updt.chart.dashboard",notifData:this.state.options.parentId}:null},scrollAllowed:function(){return!0},getChart:function(){return this._findArrayCtrl(!0)},getArray:function(){return this._findArrayCtrl(!1)},_findArrayCtrl:function(chartDisplay){var self=this,res;return this.forEachControl(function(id,ctrl){if(jsutils.isInstanceOf(ctrl,"CtrlArrayChart")&&(chartDisplay?ctrl.isHighChart():!ctrl.isHighChart()))return res=ctrl,!0}),res},_actSaveChartDetail:function(){this._notifData={},this._notifData.article=$.extend(!0,{},this.article),globals.getApplication().goBack()},authUpdateLayout:function(article,vignetteToUpdt){return this._userPrefs.savePrefs(null),Base.prototype.authUpdateLayout.call(this,article)},_setDisplay:function(){var chart=this.getChart(),array=this.getArray();if(!chart||!array)return!1;var prefs=this._userPrefs.getPrefs(),opts={display:prefs?prefs.display:null,style:prefs?prefs.style:null},article=chartsUtils.getChartDetailArticle(opts,chart.$bind,chart?chart.article:null,array?array.article:null);for(var p in this.article)p!="$layoutType"&&p!="$items"&&(article[p]=this.article[p]);var self=this,pagingInfo;return array&&array.article.$isHidden===!0?pagingInfo=chart.paginGetInfo():pagingInfo=array.paginGetInfo(),Base.prototype.authUpdateLayout.call(this,article).then(function(){notifications.publish("sm.chartdetail.updt.toolbar",opts),pagingInfo&&pagingInfo.currentIdx>0&&(self.getChart().paginSetInfo(pagingInfo),self.getArray().paginSetInfo(pagingInfo))}),!0},actToolbarSetDisplay:function(opts){if(globals.isAuthoringActive())return;this._userPrefs.savePrefs(opts),this._setDisplay()}});exports.Page=_Page}),define("syracuse-tablet/html/js/pages/pageCardDesign",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/pages/pageRegular","syracuse-tablet/html/js/application/daoSdata"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/pages/pageRegular").Page,daoSdata=require("syracuse-tablet/html/js/application/daoSdata"),_Page=utils.defineClass(function CardDesignPage($parent,state,prototype,article,parentPage,options){options.header=!1,options.footer=!1,options.breadcrumbs=!1;if(!parentPage)throw new Error("carddesign page - Unexpected empty parent page");this.parentPage=parentPage,Base.call(this,$parent,state,prototype,article,options)},Base,{_initSdataInfo:function(sdataUrl,sdataMethod){},destroy:function(){if(this.destoyed)return;Base.prototype.destroy.call(this),this.parentPage=null,this._notifData=null,this._row=null},buildHtmlOption:function(loadOptions){return Base.prototype.buildHtmlOption.call(this,loadOptions).then(function(opts){return opts.toolBars.showHome=!0,opts.cardDesign=!0,opts})},isEditMode:function(){return!1},loadData:function(loadOptions){var ctrl=this.parentPage.getControl(this.state.options.controlId);if(!ctrl)throw new Error("cardDesign page - Array datasource not found");var dao;return ctrl.getArrayData()&&ctrl.getArrayData().$resources.length>0?(this._row||(this._row=ctrl.getRowById(ctrl.$$elmt.find(".s-m-record.s-m-auth-rec-selected").attr("data-params")),this._row=this._row?this._row.row:ctrl.getArrayData().$resources[0],this._row=$.extend(!0,{},this._row.data)),dao=new daoSdata.Dao(this._row,this.prototype,{parent:null,$bind:"carddesign"})):dao=daoSdata.getArrayEmptyRow(this,this.prototype,"carddesign",ctrl.getDao()),this.setDao(dao),$.smResolve()},getParentNotif:function(){return this._notifData?{parentId:this.state.options.parentId,controlId:this.state.options.controlId,notifId:"sm.updt.card.article",notifData:this._notifData}:null},_actSaveCardDesign:function(){this._notifData={},this._notifData.article=$.extend(!0,{},this.article),globals.getApplication().goBack()}});exports.Page=_Page}),define("syracuse-tablet/html/js/pages/pageLookup",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageRegular"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/pages/pageRegular").Page,_noDataHtml='	<br><br><br>					<h3 class="alert alert-info" style= "text-align:center" role="alert">					No data					</h3>					<br>					<div  style= "font-size:xx-large;text-align:center">					<a draggable="false" href="#" data-action="lookupBack" class="fa fa fa-arrow-circle-o-left" style="display: inline-block;"/>					</div>',_Page=utils.defineClass(function LookupPage($parent,state,prototype,article,options){options.footer=!1,Base.call(this,$parent,state,prototype,article,options),this.selectedRowJson=null},Base,{destroy:function(){if(this.destoyed)return;Base.prototype.destroy.call(this),this.selectedRowJson=null},buildHtmlOption:function(loadOptions){return Base.prototype.buildHtmlOption.call(this,loadOptions).then(function(opts){return opts.toolBars.showBack=!0,opts})},notifSelectRow:function(arrayId,rowId,data){if(!data)return;this.selectedRowJson=data,this._actLookupBack()},afterRender:function(loadOptions,buildOpts){var self=this;return Base.prototype.afterRender.call(self,loadOptions,buildOpts).then(function(){var c=self.forEachControl(function(id,c){return c.$type==="application/x-array"});c&&c.isEmpty==1&&self.$$elmt.html(_noDataHtml)})},getParentNotif:function(){return this.selectedRowJson?{parentId:this.state.options.parentId,controlId:this.state.options.controlId,notifId:"sm.lookup.selection",notifData:this.selectedRowJson}:null},_actLookupBack:function(){this.goBack()}});exports.Page=_Page}),define("syracuse-tablet/html/js/pages/pageHtml",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/pages/page"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),prototype=require("syracuse-tablet/html/js/helpers/prototype"),Base=require("syracuse-tablet/html/js/pages/page").Page,_Page=utils.defineClass(function HtmlPage($$parent,state,options){Base.call(this,$$parent,state,prototype.create(state.$prototype),state.$article,options)},Base,{afterRender:function(loadOptions,buildOpts){var self=this;return Base.prototype.afterRender.call(self,loadOptions,buildOpts).then(function(){self.$$htmlRoot=self.rootLayout.$$elmt,self.appendHtml(self.$$htmlRoot,buildOpts)})},appendHtml:function($$parent,buildOpts){}});exports.Page=_Page}),define("syracuse-tablet/html/js/init/initLogin",["require","exports","module","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/init/initContext","syracuse-tablet/html/js/helpers/native/native","syracuse-tablet/html/js/helpers/logger"],function(require,exports,module){var auth=require("syracuse-tablet/html/js/application/authentication"),locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),globals=require("syracuse-tablet/html/js/helpers/globals"),settings=require("syracuse-tablet/html/js/application/settings"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),initContext=require("syracuse-tablet/html/js/init/initContext"),native=require("syracuse-tablet/html/js/helpers/native/native"),nativeX3WUPApp=native.getModule("X3WUPApp"),nativeVoiceCommands=native.getModule("voiceCommands"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("initLogin"),_notifLoggedIn=function(userProfile,offlineLogin,fromInitProcess){if(!userProfile)return $.smResolve(!1,null);var contextToRestore;fromInitProcess&&nativeVoiceCommands&&nativeVoiceCommands.hasPendingCommand("openBookmark")||(contextToRestore=jsutils.getUrlContext(),contextToRestore?contextToRestore.type="url":nativeX3WUPApp&&(contextToRestore=nativeX3WUPApp.getReconnectContext(),contextToRestore&&(contextToRestore.type="native")));var step;return fromInitProcess!==!0&&nativeX3WUPApp?(log&&log("Getting reconnect token"),step=auth.reconnectGetToken().then(function(token){return log&&log("Getting reconnect token: "+token),nativeX3WUPApp.setReconnectToken(token),$.smResolve()})):step=$.smResolve(),step.then(function(){var userCtx={$user:userProfile.user.$value,$role:userProfile.selectedRole.code,$lang:userProfile.selectedLocale.code};globals.setUserCtx(userCtx),globals.setUserProfile(userProfile),locale.setUserLocales(userProfile&&userProfile.user&&userProfile.user.locales)}).then(function(){return globals.setNeedToCheckAppsList(!0),initContext.init(!1,contextToRestore,offlineLogin)}).then(function(userContext,context){return contextToRestore=context,settings.setLastUserProfile(userProfile)}).then(function(profile){return notifications.publish("sm.user.logged.in",fromInitProcess,contextToRestore),!0})};exports.init=function(){var step,reconnectToken=nativeX3WUPApp?nativeX3WUPApp.getReconnectToken():null;return reconnectToken?step=auth.reconnectSetToken(reconnectToken):step=$.smResolve(),step.then(function(){return auth.check()}).then(function(profile){return _notifLoggedIn(profile,!1,!0)})},exports.notifLoggedIn=_notifLoggedIn}),define("syracuse-tablet/html/js/pages/pageLogin",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageHtml","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/init/initLogin"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/pages/pageHtml").Page,auth=require("syracuse-tablet/html/js/application/authentication"),locale=require("syracuse-tablet/html/js/helpers/locale"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),uiRect=require("syracuse-tablet/html/js/ui/rect"),settings=require("syracuse-tablet/html/js/application/settings"),HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,initLogin=require("syracuse-tablet/html/js/init/initLogin"),_pageTemplate='		<div class="s-m-scroll-wrapper">			<div class="s-m-loginform" style="display:none;position: relative;">				<div class="row s-m-login-info">					<div class="col-xs-offset-1 col-xs-10 col-sm-offset-3 col-sm-6 col-md-offset-4 col-md-4 col-lg-offset-4 col-lg-4">						<div id="login-reason" style="display: none" class="alert alert-info" role="alert"></div>						<div id="login-success" style="display: none" class="alert alert-success" role="alert"></div>						<div id="login-fail" style="display:none;max-height:100px;overflow:hidden;" class="alert alert-danger" role="alert"></div>					</div>				</div>				<div id="s-m-login-online" class="row">					<div class="col-xs-offset-1 col-xs-10 col-sm-offset-3 col-sm-6 col-md-offset-4 col-md-4 col-lg-offset-4 col-lg-4">						<div class="panel panel-default">							<div class="s-m-login-header"><span class="s-m-signin">{{label_signin}} </span> <span class="s-m-brand">{{label_brand}}</span> <span class="s-m-product">{{label_product}}</span></div>							<div class="panel-body s-m-login-body">								<br>								<div class="form-group">									<input type="text" value="" class="form-control s-m-login-form-input" placeholder="{{label_user}}"	id="login-user">								</div>								<br>								<div class="form-group">									<input type="password" class="form-control s-m-login-form-input" placeholder="{{label_password}}" id="login-password">								</div>								<br>								<button id="login-login" data-action="login" type="button" class="btn btn-primary s-m-signin-btn">{{act_login}}</button>							</div>							<div class="s-m-login-header" id="s-m-sageid-header">								<span class="s-m-signin">{{sageid_label_header}}</span>							</div>							<div class="panel-body s-m-login-body" id="s-m-sageid-body">								<button id="s-m-sageid-signin" data-action="sageidsignin" type="button" class="btn btn-primary s-m-signin-btn">{{sageid_label_signin}}</button>							</div>						</div>					</div>				</div>				<div id="s-m-login-offline" class="row" style="display: none;">					<div class="col-xs-offset-1 col-xs-10 col-sm-offset-3 col-sm-6 col-md-offset-4 col-md-4 col-lg-offset-4 col-lg-4">						<div class="panel panel-default">							<div class="s-m-login-header"><span class="s-m-signin">{{label_signin}} </span> <span class="s-m-brand">{{label_brand}}</span> <span class="s-m-product">{{label_product}}</span></div>							<div class="s-m-login-header" id="s-m-offline-header">								<span class="s-m-signin">{{offline_label_header}}</span>							</div>							<div class="panel-body s-m-login-body" id="s-m-sageid-body">								<button id="s-m-offline-signin" data-action="offlinesignin" type="button" class="btn btn-primary s-m-signin-btn"> 									<div id="s-m-offline-label">{{offline_label_signin_as}}</div> 									<div id="s-m-offline-user"></div> 								</button>							</div>						</div>					</div>				</div>				<div id="s-m-login-nooffline" class="row" style="display: none;">						<div class="col-xs-offset-1 col-xs-10 col-sm-offset-3 col-sm-6 col-md-offset-4 col-md-4 col-lg-offset-4 col-lg-4">						<div class="panel panel-default">							<div class="s-m-login-header" id="s-m-offline-header">									{{offline_notavail}}							</div>							<div class="panel-body s-m-login-body" id="s-m-sageid-body">								<div>{{offline_emptydb}}</div> 							</div>						</div>					</div>				</div>			</div>		</div>	',lang,_Page=utils.defineClass(function LoginPage($parent,state,options){options.header=!1,options.footer=!1,this.offline=!1,this.message=null,this.stack=null,Base.call(this,$parent,state,options)},Base,{appendHtml:function($$parent,loadOpts){var self=this;self.$$elmt.addClass("login");var labels=locale.getProductLabels(),_pageContext={label_user:locale.text("login.label.user"),label_password:locale.text("login.label.password"),act_login:locale.text("login.label.signinaction"),label_signin:locale.text("login.label.signin"),label_brand:labels.brand,label_product:labels.product,sageid_label_header:locale.text("sageid.label.header"),sageid_label_signin:locale.text("sageid.label.signin"),offline_label_header:locale.text("login.label.offline"),offline_label_signin_as:locale.text("login.label.login_as"),offline_notavail:locale.text("login.offline.notavail"),offline_emptydb:locale.text("login.offline.emptydb")},template=Handlebars.compile(_pageTemplate);$$parent.html(template(_pageContext)),self.state.options.reason&&$$parent.find("#login-reason").text(self.state.options.reason).show(),globals.isOnline()||(self.offline=!0,self._updateStatus()),self._gestureMgr=new HammerScroller($(".s-m-loginform",self.$$elmt),{direction:"v"})},_actLogin:function(){var self=this;self.$$elmt.find("#login-reason").hide();var usr=self.$$elmt.find("#login-user").val(),pwd=self.$$elmt.find("#login-password").val();return self.waitWheelStart(),settings.loginRememberMe().then(function(rememberMe){return auth.login(usr,pwd,rememberMe)}).then(function(userProfile){return initLogin.notifLoggedIn(userProfile)}).then(function(loggedIn){self.waitWheelStop(),loggedIn||(self._checkMessage(locale.text("login.issue")),self._updateStatus())}).fail(function(e,offline){self.waitWheelStop(),self.offline=offline,self._checkMessage(e),self._updateStatus(offline)})},_checkMessage:function(e){var self=this;self.message=null,self.stack=null;if(e&&e.message==="$logout$"){self.$$elmt.find("#login-reason").show().text(locale.text("login.authentication"));return}var diag=jsutils.convertToDiagnoses(e);diag&&diag.$diagnoses&&diag.$diagnoses.length>0&&(diag=diag.$diagnoses[0]),diag?(self.message=diag.$message,self.stack=diag.$stackTrace):self.message="Unexpected empty error message"},_updateStatus:function(offline){var self=this,$$fail=$("#login-fail");self.message?$$fail.show().html(locale.text("login.failed")+"<p>"+self.message+"</p>"+(self.stack?self.stack:"")):$$fail.empty().hide(),settings.getLastUserProfile().then(function(profile){self.profile=profile,self.profile?$("#s-m-offline-user").text((self.profile.user.firstName||"")+" "+(self.profile.user.lastName||"")):offline?self.offline=!0:self.offline=!1,self.offline?($("#s-m-login-online").hide(),self.profile?($("#s-m-login-offline").show(),$("#s-m-login-nooffline").hide()):($("#s-m-login-offline").hide(),$("#s-m-login-nooffline").show())):($("#s-m-login-online").show(),$("#s-m-login-offline").hide())}).fail(function(e){self.offline=offline,self._checkMessage(e),self._updateStatus()})},_actSageidsignin:function(){this.$$elmt.find("#login-reason").hide(),auth.sageidsignin()},_actOfflinesignin:function(){var self=this;self.$$elmt.find("#login-reason").hide(),initLogin.notifLoggedIn(self.profile,!0).then(function(loggedIn){loggedIn||(self._checkMessage(locale.text("login.issue")),self._updateStatus())}).fail(function(e){self._checkMessage(e),self._updateStatus()})},onMainPageResize:function(info,orientation,deviceClass){var self=this;if(self.destoyed)return;Base.prototype.onMainPageResize.call(self,info,orientation,deviceClass);var $$form=self.$$htmlRoot.find("div.s-m-loginform");$$form.show(),setTimeout(function(){if(self.destoyed)return;if(self._gestureMgr){var $$scrollWrapper=$(".s-m-scroll-wrapper",self.$$elmt),scrollRect=uiRect.elmtRect($$scrollWrapper,"outer"),hScroll=self._gestureMgr.$$elmt.height();scrollRect.height<hScroll?self._gestureMgr.init(scrollRect,null,null,info&&info.preserveScroll):self._gestureMgr.reset()}})},scrollAllowed:function(){return!1},destroy:function(){Base.prototype.destroy.call(this),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)}});exports.Page=_Page}),define("syracuse-tablet/html/js/application/daoApp",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_Dao=utils.defineClass(function(appli){var self=this;self._appli=appli,self.appMetaData=null},null,{destroy:function(){var self=this;self._appli=null},isApplicationLoaded:function(){var self=this;return self.appMetaData!=null},setApplication:function(appMetaData){var self=this;appMetaData&&(self.appMetaData=$.extend(!0,{},appMetaData))},getApplicationName:function(){var self=this;return self.appMetaData&&self.appMetaData.$application.applicationName||""},getApplicationTitle:function(){var self=this;return self.appMetaData&&(self.appMetaData.$application.title||self.appMetaData.$application.applicationName)||""},getApplicationIcon:function(){return this.appMetaData&&this.appMetaData.$application.iconName},isSageApplication:function(){return this.appMetaData!=null&&this.appMetaData.$application.isSageApplication===!0},getAppBackGroundClass:function(){return""},getHomeDashboardName:function(){var self=this,homeDash=(self.appMetaData.$application.$homeDashboard.dashboardName||"").trim();homeDash.length==0&&new Error(locale.text("error.page.homenotdefined",[self.getApplicationName()]));if(self.appMetaData&&self.appMetaData.$dashboards)for(var p in self.appMetaData.$dashboards){var data=self.appMetaData.$dashboards[p];if(data.$dashboardName===homeDash)return data.$dashboardName}throw new Error(locale.text("error.page.homenotfound",[self.getApplicationName(),homeDash]))}});exports.Dao=_Dao}),define("syracuse-tablet/html/js/application/appFactoryDeps",["require","exports","module","syracuse-tablet/html/js/application/application","syracuse-tablet/html/js/pages/pageDashboard","syracuse-tablet/html/js/pages/pageWelcomeDashboard","syracuse-tablet/html/js/pages/pageRegular","syracuse-tablet/html/js/pages/pageRequest","syracuse-tablet/html/js/pages/pageRowDetail","syracuse-tablet/html/js/pages/pageChartDetail","syracuse-tablet/html/js/pages/pageCardDesign","syracuse-tablet/html/js/pages/pageLookup","syracuse-tablet/html/js/pages/pageLogin","syracuse-tablet/html/js/application/daoApp","syracuse-tablet/html/js/application/daoSdata","syracuse-tablet/html/js/application/appFactory"],function(require,exports,module){var Application=require("syracuse-tablet/html/js/application/application").Application,DashoardPage=require("syracuse-tablet/html/js/pages/pageDashboard").Page,WelcomeDashoardPage=require("syracuse-tablet/html/js/pages/pageWelcomeDashboard").Page,RegularPage=require("syracuse-tablet/html/js/pages/pageRegular").Page,RequestPage=require("syracuse-tablet/html/js/pages/pageRequest").Page,RowDetailPage=require("syracuse-tablet/html/js/pages/pageRowDetail").Page,ChartDetailPage=require("syracuse-tablet/html/js/pages/pageChartDetail").Page,CardDesignPage=require("syracuse-tablet/html/js/pages/pageCardDesign").Page,LookupPage=require("syracuse-tablet/html/js/pages/pageLookup").Page,LoginPage=require("syracuse-tablet/html/js/pages/pageLogin").Page,DaoApp=require("syracuse-tablet/html/js/application/daoApp").Dao,DaoSdata=require("syracuse-tablet/html/js/application/daoSdata").Dao,factory=require("syracuse-tablet/html/js/application/appFactory");exports.init=function(){factory.setImpl("Application",Application),factory.setImpl("DashoardPage",DashoardPage),factory.setImpl("WelcomeDashoardPage",WelcomeDashoardPage),factory.setImpl("RegularPage",RegularPage),factory.setImpl("RequestPage",RequestPage),factory.setImpl("RowDetailPage",RowDetailPage),factory.setImpl("ChartDetailPage",ChartDetailPage),factory.setImpl("CardDesignPage",CardDesignPage),factory.setImpl("LookupPage",LookupPage),factory.setImpl("LoginPage",LoginPage),factory.setImpl("DaoApp",DaoApp),factory.setImpl("DaoSdata",DaoSdata)}}),define("syracuse-tablet/html/js/controls/structElmt",["require","exports","module","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),utils=require("syracuse-tablet/html/js/helpers/utils"),uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_Klass=utils.defineClass(function StructElmt(controller,$type,article,options){this.options=options||{},this.controller=controller,this.$type=$type,this.typeName=utils.getTypeName($type),this.article=article||{},this.children=null,this.parent=null,this._dao=null,this.initReuseProperties(),this.destroyed=!1,this.isEmpty=!1},null,{initReuseProperties:function(){this.$$elmt=null,this.id=this.createId(this.typeName)},destroy:function(){this.children&&(this.children.forEach(function(child){child&&child.destroy()}),this.children=null),this._htmlGeneratorContexts&&this.destroyHtmlGeneratorContexts(),notifications.unsubscribe(this),this.$$elmt&&(this.$$elmt.unbind(),this.$$elmt.remove(),this.$$elmt=null),this.controller=null,this._dao=null,this.parent=null,this.destroyed=!0},isRoot:function(){return this.parent==null||this.parent===this.controller},generateHtml:function($$parent,controllerDao,htmlRootCtrl,updateLayout){var opts=this.options;return this.isEmpty=!1,htmlRootCtrl&&(opts.htmlRootCtrl=htmlRootCtrl),opts.isHtmlGenerator=!0,opts.updateLayout=updateLayout===!0,this.buildHtml($$parent,controllerDao,opts),this.afterRender&&this.afterRender(opts),this.$$elmt},applyMetaData:function(metaData,buildOptions){},getDao:function(){return this._dao&&!this._dao.isValid()&&(this._dao=null),this._dao?this._dao:this.controller.dao},buildHtml:function($$parent,controllerDao,buildOptions){this._dao=controllerDao,this.isEmpty=!1,buildOptions&&buildOptions.isHtmlGenerator===!0&&(this._needReuse?this.initReuseProperties():this._needReuse=!0)},getMetaData:function(metaProp){return null},getAuthoring:function(path,defValue){var val=utils.getPropByPath(this.article,path);return val!=null?val:defValue},appendStyleAuthoring:function(classArray,pathOrData){classArray=classArray||[];if(!pathOrData)return classArray;if($.isPlainObject(pathOrData))var data=pathOrData;else var data=this.getAuthoring(pathOrData);if(!data)return classArray;for(var p in data)["$theme","$fontStyle","$fontSize"].indexOf(p)>=0&&classArray.push(data[p]);return classArray},empty:function(){this.children&&this.children.forEach(function(child){child&&child.empty()}),this.$$elmt&&this.$$elmt.empty()},isLayout:function(){return!1},isVignette:function(){return!1},isControl:function(){return!1},createId:function(typeName){return utils.readableuid(typeName)},appendStructElmt:function(c){if(!c)return;this.children||(this.children=[]),c.parent=this,this.children.push(c)},getNbChilds:function(){return this.children&&this.children.length>0},createRootElement:function(css,$$parent){var e=this.setRootElement(uiUtils.createDomElement("div",css,null,this.options.isHtmlGenerator===!0?null:{id:this.id}),$$parent);return e},setRootElement:function(e,$$parent){return e?(e.jquery||(e=$(e)),this.$$elmt=e,$$parent&&($$parent.jquery||($$parent=$($$parent)),e.appendTo($$parent)),e):null},isVisible:function(){return this.$$elmt&&this.$$elmt.is(":visible")},isHidden:function(){return!this.isVisible()},show:function(){this.$$elmt&&this.$$elmt.show()},hide:function(){this.$$elmt&&this.$$elmt.hide()},setFocus:function(){},getArticle:function(){return this.article},removeChild:function(structElmt){var _children=[];this.children.forEach(function(child){child&&child.id===structElmt.id?child.destroy():_children.push(child)}),this.children=_children},removeChildren:function(){this.children&&this.children.forEach(function(child){child.destroy()}),this.children=[]},getIndexOfChild:function(child){var idx=-1;return this.children&&this.children.some(function(c){return idx+=1,c===child?!0:!1}),idx},getChildByIndex:function(idx){return this.children&&this.children[idx]},addChildBefore:function(ctrl,nextChild){var added=!1,_children=[];this.children&&this.children.forEach(function(c){nextChild&&c.id===nextChild.id&&(_children.push(ctrl),added=!0),c.id!==ctrl.id&&_children.push(c)}),added||_children.push(ctrl),this.children=_children},removeChildRef:function(c){var _children=[];this.children&&this.children.forEach(function(child){child.id!==c.id&&_children.push(child)}),this.children=_children},getPathInTree:function(){var ctrl=this,parent,path=[];parent=this.parent;while(parent){var idx;if(jsutils.isInstanceOf(parent,"Page")){if(!parent.isVignette)break;var vgnt=parent.getParentVignette();idx=0,parent=vgnt.parent}else idx=parent.getIndexOfChild(ctrl);path.push(idx),ctrl=parent,parent=parent.parent}return path.reverse(),path},findChildByPath:function(path){if(!path)return;var node=this;return path.some(function(idx){if(jsutils.isInstanceOf(node,"VignetteBase")){if(!node.getPage())return node=null,!0;node=node.getPage().rootLayout}node=node.getChildByIndex(+idx)}),node},getAuthArticle:function(){var authArticle={},nodeArticle=this.getArticle();return Object.keys(nodeArticle).forEach(function(key){key!=="$items"&&(authArticle[key]=nodeArticle[key])}),authArticle},getAuthState:function(dirtyKeys){return null},setAuthState:function(state){},getArticleText:function(property){if(!this.article[property])return"";var self=this,text=self.article[property]&&self.article[property].replace(/\{\@(\S+)\}/g,function(m,g){var localization=self.options.$localization;return self.isVignette&&!localization&&(localization=utils.getArticleLocalization(utils.getCurrentPage().article)),localization&&localization[g]||localization&&localization.$fallback&&localization.$fallback[g]||m});return text&&this.article[property]===text&&(text=this.controller.prototype.resolveExpression(text,null,!0)),text||""},addHtmlGeneratorContext:function(ctx){if(!ctx)return;this._htmlGeneratorContexts||(this._htmlGeneratorContexts=[]),this._htmlGeneratorContexts.push(ctx)},destroyHtmlGeneratorContexts:function(){if(!this._htmlGeneratorContexts)return;this._htmlGeneratorContexts.forEach(function(ctx){ctx.handler&&ctx.data&&ctx.handler(ctx.data)}),this._htmlGeneratorContexts=null},getUnitTestMsg:function(){return this.article&&this.article.$unitTest?this.article.$unitTest.message:null},displayUnitTestMsg:function($$parent){if(!this.controller.isUnitTest||!$$parent)return;var msg=this.getUnitTestMsg();if(!msg)return;$$parent.find(".s-m-unitest-msg").remove(),$('<div class="s-m-unitest-msg"/>').text(msg).appendTo($$parent)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/ctrlBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/structElmt"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/controls/structElmt").Klass,_genHtmlCtrlLink=function(proto,dao,options,cb){var self=this;options=options||{};var html=[],url=proto.data("$url"),tag=options.tag||"a",css=options.css||"a";if(url&&url.length)html.push("<"),html.push(tag),html.push(' href="'+url+'"'),css&&html.push(' class="'+css+'"'),html.push(">");else{var action=proto.data("$action")||self.prototype.data("$navigation");if(action){html.push("<"),html.push(tag),html.push(' href="#"');for(var p in action)html.push(" "+p+'="'+encodeURIComponent(dao?dao.parseExpression(action[p]):action[p])+'"');css&&html.push(' class="'+css+'"'),html.push(">")}}return cb&&cb(html),html.length>1&&(html.push("</"),html.push(tag),html.push(">")),html.join("")},_Klass=utils.defineClass(function CtrlBase(controller,article,prototype,options){var self=this;options=options||{},self.prototype=prototype,self.$bind=article.$bind,Base.call(self,controller,prototype.data("$type"),article,options),self.$isEditMode=controller.isEditMode(),options.displayCtx==="table"&&(self.$isEditMode=!1)},Base,{destroy:function(){var self=this;Base.prototype.destroy.call(self),self.prototype&&(self.prototype.destroy(),self.prototype=null)},createId:function(typeName){return utils.readableuid(this.$bind,typeName.substr(0,3))},isPageControl:function(){return this.$type.smStartsWith("tablet/x-page-")},buildHtml:function($$parent,controllerDao,buildOptions,classes){Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions);var css=["s-m-control"],$theme=this.getAuthoring("$theme");$theme&&$theme!=="none"&&css.push("s-m-theme-"+$theme),classes&&css.push(classes.join(" ")),this.createRootElement(css,$$parent),this._oldValue=this.getValue()},afterRender:function(buildOpts){this.applyMetaData(this.getMetaData(),buildOpts)},refresh:function(controllerDao,options){if(options&&options.refreshValue){var newValue=this.getValue();utils.areEqual(newValue,this._oldValue)||(this.refreshValue(newValue),this._oldValue=newValue)}this.applyMetaData(this.getMetaData(),options)},refreshValue:function(value){},getMetaData:function(metaProp){var dao=this.getDao(),meta=dao?dao.getMetaData("$properties",this.$bind):null;return metaProp?meta?meta[metaProp]:null:meta},getTitle:function(){var ttl=this.article&&this.article.$title||this.prototype.data("$title")||this.prototype.getPropTitle(this.$bind);return(!ttl||ttl.length===0)&&globals.isAuthoringActive()&&this.prototype.isFacet("details","edit")&&(ttl=this.$bind),ttl},applyMetaData:function(metaData,buildOptions){if(metaData==null)return;if(this.$isEditMode){var e=this.$$elmt.find(".s-m-meta");e.length>0&&(e.is("input")&&!e.is(".btn")?(e[metaData.$isReadOnly===!0?"attr":"removeAttr"]("readonly",""),e[metaData.$isDisabled===!0?"attr":"removeAttr"]("disabled","")):e[metaData.$isReadOnly===!0||metaData.$isDisabled===!0?"attr":"removeAttr"]("disabled",""))}(this.article.$isHidden!=null||metaData.$isHidden!=null)&&this.$$elmt.toggleClass("s-m-hidden",this.article.$isHidden===!0||metaData.$isHidden===!0)},getValue:function(){var dao=this.getDao();return dao?dao.getValue(this.$bind):null},setValue:function(value){this.getDao().setValue(this.$bind,value)},checkData:function(){return!0},setErrorStatus:function(yes){if(!this.$$elmt)return;this.$$elmt[yes===!0?"addClass":"removeClass"]("error")},hasError:function(){return this.$$elmt&&this.$$elmt.hasClass("error")},setFocus:function(){if(!this.controller)return;this.controller.makeVisible(this)},isControl:function(){return!0}});exports.genHtmlCtrlLink=_genHtmlCtrlLink,exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/validator",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var locale=require("syracuse-tablet/html/js/helpers/locale"),_validator={validate:function(ctrl,value,errors,constraints){var proto=ctrl.prototype,ok=!0;for(var i=0;i<constraints.length;i++){var c=constraints[i],prop=null;ctrl&&ctrl.getMetaData&&(prop=ctrl.getMetaData(c)),prop==null&&(prop=proto&&proto.data(c));if(prop!=null){var fn=_validator[c];fn?ok=fn(value,errors,prop)&&ok:(errors.push(locale.text("field.unknownConstraint",[c])),ok=!1)}}return ok},$isMandatory:function(value,errors,constraint){return!constraint||value!=null&&value!==""?!0:(errors.push(locale.text("field.valMand")),!1)},$pattern:function(value,errors,constraint){var self=this;if(value&&constraint){var re=new RegExp(constraint);if(!re.test(value))return errors.push(locale.text("field.patternError",[constraint])),!1}return!0},$minimum:function(value,errors,constraint){var self=this;return value!=null&&value<constraint?(errors.push(locale.text("field.minimum",[constraint])),!1):!0},$maximum:function(value,errors,constraint){var self=this;return value!=null&&value>constraint?(errors.push(locale.text("field.maximum",[constraint])),!1):!0},$exclusiveMinimum:function(value,errors,constraint){var self=this;return value!=null&&value<=constraint?(errors.push(locale.text("field.exclusiveMinimum",[constraint])),!1):!0},$exclusiveMaximum:function(value,errors,constraint){var self=this;return value!=null&&value>=constraint?(errors.push(locale.text("field.exclusiveMaximum",[constraint])),!1):!0},$minLength:function(value,errors,constraint){var self=this;return!value||value.length<constraint?(errors.push(locale.text("field.minLength",[constraint])),!1):!0},$maxLength:function(value,errors,constraint){var self=this;return value&&value.length>constraint?(errors.push(locale.text("field.maxLength",[constraint])),!1):!0},$precision:function(value,errors,constraint){var self=this;if(value){var txt=(""+value).split(".").join("");if(txt.length>constraint)return errors.push(locale.text("field.precision",[constraint])),!1}return!0},$scale:function(value,errors,constraint){var self=this;if(value){var txt=(""+value).split(".");txt=txt&&txt[1]||"";if(txt.length>constraint)return errors.push(locale.text("field.scale",[constraint])),!1}return!0}};exports.Validator=_validator}),define("syracuse-tablet/html/js/controls/field/ctrlFieldBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/controls/validator","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/native/native"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),formatApi=require("syracuse-tablet/html/js/helpers/formatApi"),validator=require("syracuse-tablet/html/js/controls/validator").Validator,fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),native=require("syracuse-tablet/html/js/helpers/native/native"),_label_pos=["top","left"],_texr_align=["right","left","center"],_Klass=utils.defineClass(function CtrlFieldBase(controller,article,prototype,options){Base.call(this,controller,article,prototype,options),this.nativePenTextInput=native.hasCapability("penTextInput"),this.formatter=this.initFormatter(),this.cssType=null},Base,{initFormatter:function(){return formatApi.getFormatter(this.$type,this.prototype.data("$format"))},initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.domInput=null,this.$$message=null,this.$$value=null},destroy:function(){Base.prototype.destroy.call(this),this.formatter=null},buildHtml:function($$parent,controllerDao,buildOptions){var classes=["s-m-field"];this.cssType&&classes.push(this.cssType),this.getAuthoring("$value.$valueFirst",!1)&&classes.push("s-m-valueFirst"),Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions,classes);var fieldSlot=this.$$elmt.get(0);this.buildFieldTitle(fieldSlot,buildOptions),this.buildFieldValue(fieldSlot,buildOptions),this._applyLabelAuthoring(),this.checkDiagnoses(buildOptions),this.checkEmptyValue(),this.controller.isUnitTest&&this.displayUnitTestMsg(this.isEmpty?this.$$elmt.parent():this.$$elmt)},refreshValue:function(buildOptions){if(!this.$$value)return;this.buildFieldValue(this.$$elmt.get(0),buildOptions),this.checkEmptyValue()},checkEmptyValue:function(forceEmpty){if(this.$isEditMode)return;this.$$elmt.css("display",""),this.isEmpty=forceEmpty===!0||this.$$value==null||this.$$value.is(":empty"),this.$$elmt.toggleClass("s-m-empty",this.isEmpty);if(!this.isEmpty)return;if(this.getAuthoring("$hideIfEmpty")===!0){this.$$elmt.css("display","none");return}this.getAuthoring("$labelPosition")==="top"&&(this.$$value||(this.$$value=this._create$$value()),this.$$value.html("&nbsp;"))},_applyLabelAuthoring:function(){var val=this.getAuthoring("$labelPosition");this.$$elmt.removeClass("s-m-top"),val=="top"&&this.$$elmt.addClass("s-m-top"),this.$$elmt.removeClass("s-m-left s-m-right s-m-center"),val==="top"&&(val=this.getAuthoring("$labelAlign"),val!=null&&_texr_align.indexOf(val)>=0&&this.$$elmt.addClass("s-m-"+val))},createMainInput:function(parent,value,type){type=type||"text";var checkBox="checkbox"===type,pen=this.nativePenTextInput&&!checkBox&&!$(parent).hasClass("input-group"),contener=pen?uiUtils.createDomElement("div",["input-group"],null,null,parent):parent,css=["s-m-meta"],attrs={type:type};return"text"===type?(css.push("form-control"),css.push("ctrl-evt-blur"),attrs.value=value):checkBox&&css.push("ctrl-evt-click"),this.options.notifyFocus===!0&&css.push("ctrl-evt-focus"),this.domInput=uiUtils.createDomElement("input",css,null,attrs,contener),checkBox&&(this.domInput.checked=value),pen&&this._createPenInput(contener),this.domInput},onFocus:function(justCheck){notifications.publish("sm.field.focus",this)},buildFieldTitle:function(fieldSlot,buildOptions){this.$$elmt.removeClass("s-m-title-hidden");if(this.getAuthoring("$isTitleHidden")){this.$$elmt.addClass("s-m-title-hidden");return}if(buildOptions&&buildOptions.displayCtx==="table")return;var ttl=(this.getTitle()||"").trim();ttl.length>0&&(this.getMetaData("$isMandatory")===!0&&(ttl+="*"),this.$$title=$(uiUtils.createDomElement("div",["s-m-title"],ttl,null,fieldSlot))),ttl.length||this.$$elmt.addClass("s-m-title-hidden")},buildFieldValue:function(fieldSlot,buildOptions){return this.$$value?(this.$$value.empty(),this.clearInputErrors(),this.$$message=null):this._create$$value(fieldSlot),this.$$value.get(0)},_create$$value:function(fieldSlot){return this.$$value?this.$$value.empty():this.$$value=$(uiUtils.createDomElement("div",["s-m-value",this.$isEditMode?"edit":""],null,null,fieldSlot||this.$$elmt)),this.$$value},appendTextValue:function(valueSlot,value){if(valueSlot==null||value==null)return;typeof value!="string"&&(value=value.toString?value.toString():"??Can't display??"),value=value.trim(),value.length>0&&uiUtils.appendTextNode(valueSlot,value)},validateValue:function(value,errors){return validator.validate(this,value,errors,["$isMandatory"])},parseValue:function(value,errors){return this.formatter?this.formatter.parseValue(value,errors):value},applyMetaData:function(metaData,buildOptions){Base.prototype.applyMetaData.call(this,metaData,buildOptions);if(buildOptions&&buildOptions.displayCtx==="table")return;if(metaData&&metaData.$diagnoses){var errors=[];metaData.$diagnoses.forEach(function(d){errors.push(d.$message)}),this.showInputErrors(errors)}},showInputErrors:function(errors){if(!this.$$elmt)return;this.$$elmt.removeClass("error"),this.$$message&&this.$$message.empty(),typeof errors=="string"&&(errors=[errors]);if(!errors||errors.length===0)return;this.$$message||(this.$$message=$('<span class="s-m-error"/>').appendTo(this.$$elmt)),this.$$elmt.addClass("error");var self=this;errors.forEach(function(error){error!=null&&(error+"").trim().length>0&&self.$$message.append($("<p>").text(error))})},clearInputErrors:function(){this.showInputErrors(null)},getFormattedValue:function(value){if(!this.formatter)return value||"";try{return this.$isEditMode===!0?this.formatter.formatValueEdit(value):this.formatter.formatValue(value)}catch(e){return this.showInputErrors([e.message]),""}},setValue:function(value,forceSetFocus){Base.prototype.setValue.call(this,value),forceSetFocus===!0&&this.setFocus()},setFieldValue:function(value,forceSetFocus){this.setDisplayValue(this.getFormattedValue(value)),this.setValue(value,forceSetFocus)},setFieldValueFromSelector:function(value){this.setFieldValue(value,!0)},onBlur:function(justCheck){this.clearInputErrors();if(!this.domInput)return!0;var value=this.domInput.value,errors=[];return value=this.parseValue(value,errors),errors.length===0&&(this.validateValue(value,errors),justCheck!==!0&&(this.setDisplayValue(this.getFormattedValue(value)),errors.length===0&&this.setValue(value))),errors.length>0&&this.showInputErrors(errors),errors.length==0},setDisplayValue:function(value){this.domInput&&(this.domInput.value=value),this.clearInputErrors(),this.removeDiagnoses()},refresh:function(controllerDao,options){Base.prototype.refresh.call(this,controllerDao,options)},checkDiagnoses:function(options){var errors=[],diags=this.getMetaData("$diagnoses");return diags&&diags.length>0&&diags.forEach(function(d){d.$severity==="error"&&errors.push(d.$message)}),errors.length>0&&(options&&options.displayCtx==="table"?this.$$elmt.addClass("error"):this.showInputErrors(errors)),errors.length===0},checkData:function(){this.clearInputErrors();var meta=this.getMetaData();if(!meta||meta.$isDisabled!==!0&&meta.$isReadOnly!==!0&&meta.$isHidden!==!0){if(!this.onBlur(!0))return!1;var errors=[],value=this.getValue();return this.validateValue(value,errors),errors.length>0&&this.showInputErrors(errors),errors.length===0}return!0},removeDiagnoses:function(){this.getDao()&&this.getDao().removeMetaDiagnoses(this.$bind)},setFocus:function(){Base.prototype.setFocus.call(this),this.acceptFocus()&&(this.getFocusElmt().is("input, select")?this.getFocusElmt().focus():notifications.publish("sm.field.focus",this))},getFocusElmt:function(){return $(this.domInput)},acceptFocus:function(){return this.getFocusElmt()!=null},_createPenInput:function(parent){var self=this;if(!this.picker){var span=uiUtils.createDomElement("span",["input-group-btn"],null,null,parent);this.picker=uiUtils.createDomElement("button",["btn","btn-default","s-m-meta"],null,null,span),uiUtils.createDomElement("span",fontUtils.penFieldIcon(),null,null,this.picker),$(this.picker).click(function(){native.getModule("penTextInput").getPenTextInput({title:self.getTitle(),value:self.getValue()}).then(function(data){data.action==="ok"&&data.matches&&data.matches.length&&self.setFieldValue(data.matches[0],!0)})})}}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlAlphanum",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/validator","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),validator=require("syracuse-tablet/html/js/controls/validator").Validator,fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_AlphaNum=utils.defineClass(function CtrlAlphaNum(controller,article,prototype,options){var self=this;Base.call(self,controller,article,prototype,options)},Base,{validateValue:function(value,errors){var self=this,ok=Base.prototype.validateValue.call(self,value,errors);return ok&&validator.validate(self,value,errors,["$pattern","$minLength","$maxLength"])},buildFieldValue:function(fieldSlot,buildOptions){var self=this,valueSlot=Base.prototype.buildFieldValue.call(self,fieldSlot,buildOptions),value=self.getFormattedValue(self.getValue());return self.$isEditMode?self.createMainInput(valueSlot,value):self.appendTextValue(valueSlot,value),valueSlot}}),_PhoneField=utils.defineClass(function CtrlPhoneField(controller,article,prototype,options){var self=this;_AlphaNum.call(self,controller,article,prototype,options),self.cssType="s-m-phone"},_AlphaNum,{buildFieldValue:function(fieldSlot,buildOptions){var self=this;if(self.$isEditMode)_AlphaNum.prototype.buildFieldValue.call(self,fieldSlot,buildOptions);else{var value=self.getFormattedValue(self.getValue()),link=uiUtils.createDomElement("span",[],"",{"data-action":"externalLink","data-params":"tel:"+value});value&&(link.appendChild(uiUtils.createDomElement("span",fontUtils.phoneFieldIcon())),$(link).append(value)),fieldSlot.appendChild(link)}}}),_EmailField=utils.defineClass(function CtrlEmailField(controller,article,prototype,options){var self=this;_AlphaNum.call(self,controller,article,prototype,options),self.cssType="s-m-email"},_AlphaNum,{buildFieldValue:function(fieldSlot,buildOptions){var self=this;if(self.$isEditMode)_AlphaNum.prototype.buildFieldValue.call(self,fieldSlot,buildOptions);else{var value=self.getFormattedValue(self.getValue()),link=uiUtils.createDomElement("span",[],"",{"data-action":"externalLink","data-params":"mailto:"+value});value&&(link.appendChild(uiUtils.createDomElement("span",fontUtils.emailFieldIcon())),$(link).append(value)),fieldSlot.appendChild(link)}}}),_UrlField=utils.defineClass(function CtrlUrlField(controller,article,prototype,options){_AlphaNum.call(this,controller,article,prototype,options),this.cssType="s-m-url"},_AlphaNum,{buildFieldValue:function(fieldSlot,buildOptions){if(this.$isEditMode)_AlphaNum.prototype.buildFieldValue.call(this,fieldSlot,buildOptions);else{var value,link,asValue,$urlLink=this.prototype.getUrlLink(this.$bind),valueSlot;if($urlLink.$url){asValue=this.getValue()?!0:!1,asValue&&(valueSlot=_AlphaNum.prototype.buildFieldValue.call(this,fieldSlot,buildOptions));if($urlLink.$url.indexOf("{"+this.$bind+"}")<0||asValue)value=this.prototype.resolveExpression($urlLink.$url,this._dao.data,!0)}else value=this.getFormattedValue(this.getValue());link=value?uiUtils.createDomElement("span",[],"",{"class":"s-m-icon-link","data-action":"externalLink","data-params":value}):null,link&&(link.appendChild(uiUtils.createDomElement("span",[])),$(link).addClass(this._getDefaultIcon()),valueSlot?valueSlot.appendChild(link):fieldSlot.appendChild(link))}},_getDefaultIcon:function(){var css="s-m-icon-"+(this.article.$urlIconSize||"small")+" ";return css+(this.article.$urlIcon||fontUtils.getUrlDefIcon()).css}});exports.Klass=_AlphaNum,exports.PhoneField=_PhoneField,exports.EmailField=_EmailField,exports.UrlField=_UrlField}),define("syracuse-tablet/html/js/controls/field/ctrlFilter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,_Filter=utils.defineClass(function CtrlFilter(controller,article,prototype,options){Base.call(this,controller,article,prototype,options)},Base,{buildFieldValue:function(fieldSlot,buildOptions){var valueSlot=Base.prototype.buildFieldValue.call(this,fieldSlot,buildOptions);this.appendTextValue(valueSlot,this.getValue()||"")}});exports.Klass=_Filter}),define("syracuse-tablet/html/js/controls/field/ctrlProgress",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,defaultValues={$valueMin:0,$valueMax:100},_Klass=utils.defineClass(function CtrlProgress(controller,article,prototype){var self=this;Base.call(self,controller,article,prototype)},Base,{buildFieldValue:function(fieldSlot,buildOptions){var self=this,valueSlot=Base.prototype.buildFieldValue.call(self,fieldSlot,buildOptions),value=self.getValue(),progressContainer=uiUtils.createDomElement("div",["progress"]),progressBar=uiUtils.createDomElement("div",["progress-bar"],value,{role:"progressbar","aria-valuenow":value,"aria-valuemin":self.article.$valueMin||defaultValues.$valueMin,"aria-valuemax":self.article.$valueMax||defaultValues.$valueMax,style:"width:"+value+"%;"})}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlNumeric",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/controls/validator","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,validator=require("syracuse-tablet/html/js/controls/validator").Validator,locale=require("syracuse-tablet/html/js/helpers/locale"),_Klass=utils.defineClass(function CtrlNumeric(controller,article,prototype,options){var self=this;Base.call(self,controller,article,prototype,options)},Base,{buildFieldValue:function(fieldSlot,buildOptions){var self=this,valueSlot=Base.prototype.buildFieldValue.call(self,fieldSlot,buildOptions),value=self.getFormattedValue(self.getValue());self.$isEditMode?self.createMainInput(valueSlot,value):self.appendTextValue(valueSlot,value)},parseValue:function(value,errors){var self=this;if(self.formatter){var format=self.formatter.getFormat();if(format){var gs=locale.getNumberGroupSeparator(),ds=locale.getNumberDecimalSeparator();format.indexOf(",")<0&&gs&&gs.length>0&&(value=value.replace(new RegExp("\\"+gs,"g"),ds)),format.indexOf(",")>0&&format.indexOf(".")>0&&gs&&gs.length>0&&value.indexOf(gs)>-1&&value.indexOf(ds)<0&&(value=value.replace(new RegExp(gs,"g"),ds))}}return Base.prototype.parseValue.call(self,value,errors)},validateValue:function(value,errors){var self=this,ok=Base.prototype.validateValue.call(self,value,errors);return ok=validator.validate(self,value,errors,["$minimum","$maximum","$exclusiveMinimum","$exclusiveMaximum","$precision"])&&ok,self.$type!=="application/x-integer"&&(ok=validator.validate(self,value,errors,["$scale"])&&ok),ok}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlQuantity",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/controls/ctrlFactory"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,formatApi=require("syracuse-tablet/html/js/helpers/formatApi"),ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory"),_Klass=utils.defineClass(function CtrlQuantity(controller,article,prototype,options){Base.call(this,controller,article,prototype,options),this.unitFieldInfo=prototype.getUnitFieldInfo(),this.displayUnit=!1,this.unitFieldInfo&&this.unitFieldInfo.unitFieldProto&&!this.unitFieldInfo.unitFieldProto.data("$isExcluded")&&(this.displayUnit=options&&options.displayCtx!=="table"),this.unitCtrl=null},Base,{initFormatter:function(){var valueProto=this.prototype.data("$value");return valueProto?formatApi.getFormatter(valueProto.$type,valueProto.$format):null},destroy:function(){Base.prototype.destroy.call(this),this.unitCtrl&&(this.unitCtrl.destroy(),this.unitCtrl=null)},buildHtml:function($$parent,controllerDao,buildOptions){Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions),this.$$elmt.addClass("s-m-qty"),this.displayUnit&&(this.unitCtrl=ctrlFactory.createControl(this.controller,this,{$bind:this.unitFieldInfo.unitBindName,$noAuthoring:!0},this.unitFieldInfo.unitFieldProto,{isUnit:!0}),this.unitCtrl.buildHtml(this.$$value,controllerDao,buildOptions))},buildFieldValue:function(fieldSlot,buildOptions){var valueSlot=Base.prototype.buildFieldValue.call(this,fieldSlot,buildOptions),value=this.getFormattedValue(this.getValue());this.$isEditMode?this.createMainInput(valueSlot,value):this.appendTextValue(valueSlot,value)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlCheckBox",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_Klass=utils.defineClass(function CtrlCheckbox(controller,article,prototype,options){var self=this;Base.call(self,controller,article,prototype,options)},Base,{buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions)},buildFieldValue:function(fieldSlot,buildOptions){var valueSlot=Base.prototype.buildFieldValue.call(this,fieldSlot,buildOptions),val=this.getValue();if(val==null)return;val=val===!0,this.$isEditMode?this.createMainInput(valueSlot,val,"checkbox"):this.getAuthoring("$displayAs")==="text"?this.$$value.text(locale.text(val===!0?"yes":"no")):valueSlot.appendChild(uiUtils.createDomElement("span",fontUtils.checkBoxIcon(val)))},onClick:function(evt){var self=this;setTimeout(function(){self.domInput.checked=!self.domInput.checked,self.setValue(self.domInput.checked)},50)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlSwitch",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_Klass=utils.defineClass(function CtrlSwitch(controller,article,prototype,options){var self=this;Base.call(self,controller,article,prototype,options)},Base,{buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions)},destroy:function(){this.$$panel&&(this.$$panel.bootstrapSwitch("destroy"),this.$$panel=null),Base.prototype.destroy.call(this)},buildFieldValue:function(fieldSlot,buildOptions){var self=this,valueSlot=Base.prototype.buildFieldValue.call(self,fieldSlot,buildOptions),val=self.getValue();if(val==null)return;val=val===!0;if(self.$isEditMode){var attrs={type:"checkbox"};this.$$panel=$(uiUtils.createDomElement("input","",null,attrs,valueSlot)),this.$$panel.bootstrapSwitch("state",val===!0,!0),this.$$panel.bootstrapSwitch("onText",locale.text("auth.switcher.onText")),this.$$panel.bootstrapSwitch("offText",locale.text("auth.switcher.offText")),this.$$panel.bootstrapSwitch("size","small"),this.$$panel.bootstrapSwitch("onColor","default"),this.$$panel.bootstrapSwitch("offColor","default"),this.$$panel.bootstrapSwitch("onSwitchChange",jsutils.bindFn(this.onSwitchChange,this))}else valueSlot.appendChild(uiUtils.createDomElement("span",fontUtils.checkBoxIcon(val)))},onSwitchChange:function(){this.setValue(this.$$panel.bootstrapSwitch("state"))}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlCombo",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,_compareEnum=function(enum1,enum2){if(!enum1||!enum2)return!1;if(enum1.length!=enum2.length)return!1;for(var i=0,l=enum1.length;i<l;i++){if(enum1.$value!=enum2.$value)return!1;if(enum1.$title!=enum2.$title)return!1}return!0},_Klass=utils.defineClass(function CtrlCombo(controller,article,prototype,options){Base.call(this,controller,article,prototype,options)},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.radioItemList=null,this._choiceList=null,this.valueSlot=null},buildFieldValue:function(fieldSlot,buildOptions){this.valueSlot=Base.prototype.buildFieldValue.call(this,fieldSlot,buildOptions),this._updateList(this.getMetaData(),!1)},refreshValue:function(buildOptions){this._updateList(this.getMetaData(),!0)},_updateList:function(metaData,valueChanged){var self=this;if(!self.valueSlot)return;var newList=metaData&&metaData.$value?metaData.$value.$enum:null;if(valueChanged!==!0&&_compareEnum(newList,self._choiceList))return;$(self.valueSlot).empty(),self._choiceList=$.extend(!0,[],newList);if(self.$isEditMode){var $format=metaData?metaData.$format:null;$format||($format=self.prototype.data("$format")),$format&&$format!="$radios"&&$format!="$combo"&&($format="$combo");var value=self.currentValue=self.getValue(),domValue;if(self._choiceList.length>0)if($format=="$radios")self.radioItemList=[],$.each(self._choiceList,function(index,choiceItem){var choiceItemDom=uiUtils.createDomElement("div",["s-m-field-radio-item"]),inputDom=uiUtils.createDomElement("input",["s-m-field-choice-radio","ctrl-evt-click","s-m-meta"],null,{type:"radio",value:index,name:"s-m-radio-"+self.id});value&&choiceItem.$value==value&&inputDom.setAttribute("checked",!0);var titleDom=uiUtils.createDomElement("div",["s-m-field-choice-radio-title"],choiceItem.$title);self.radioItemList.push({inputDom:inputDom,titleDom:titleDom}),self.valueSlot.appendChild(inputDom),self.valueSlot.appendChild(titleDom)});else{var selectDom=uiUtils.createDomElement("select",["form-control ctrl-evt-change","s-m-meta"]),selected=!1,opts=[],optDom;$.each(self._choiceList,function(index,choiceItem){var parsedTitle=self.prototype.resolveExpression(choiceItem.$title);optDom=uiUtils.createDomElement("option",null,parsedTitle,{value:choiceItem.$value},null),choiceItem.$value==value&&(optDom.setAttribute("selected",!0),selected=!0),opts.push(optDom)}),self.valueSlot.appendChild(selectDom),metaData.$isReadOnly||metaData.$isDisabled?selectDom.setAttribute("disabled",!0):selectDom.removeAttribute("disabled"),selected||(opts.length>0&&(opts.push(uiUtils.createDomElement("option",["empty"],"",{value:"",selected:!0},null)),metaData&&metaData.$isMandatory&&$(selectDom).addClass("removeEmptyOption")),value!=null&&(this.showInputErrors(locale.text("unexpected.value",[" ("+value+")"])),$(selectDom).addClass("ctrl-evt-click",!0))),opts.forEach(function(opt){selectDom.appendChild(opt)})}}else if(self._choiceList.length>0){var value=self.currentValue=self.getValue();value=self._getChoiceTitle(value),value=self.prototype.resolveExpression(value),self.appendTextValue(self.valueSlot,value)}},_getChoiceTitle:function(value){var res;return $.each(this._choiceList,function(index,choice){res=choice.$value==value?choice.$title:res;if(res)return!1}),res},getChoiceTitles:function(){var res=[],self=this;return $.each(this._choiceList,function(index,choice){res.push({$value:choice.$value,title:self.prototype.resolveExpression(choice.$title)})}),res},_getChoiceValue:function(title){var res;return $.each(this._choiceList,function(index,choice){res=choice.$title==title?choice.$value:res;if(res)return!1}),res},setDisplayValue:function(value,index){var self=this;self.$isEditMode&&self.prototype.data("$format")=="$radios"&&value!=self.currentValue&&$.each(self.radioItemList,function(idx,radioItem){setTimeout(function(){index?radioItem.inputDom.checked=index==idx:radioItem.inputDom.checked=self._choiceList[idx].$value==value},5)})},setFieldValue:function(value,index){this.setDisplayValue(value,index),this.currentValue=value,this.setValue(value)},onClick:function(evt){var $$t=$(evt.target);this.prototype.data("$format")=="$radios"?this.setFieldValue(this._getChoiceValue(evt.target.nextElementSibling.textContent),$(evt.target.parentNode).index()):$$t.is("select")&&(this.clearInputErrors(),$$t.removeClass("ctrl-evt-click"))},onChange:function(evt){var $$t=$(evt.target);$$t.is("select")&&$$t.is(".removeEmptyOption")&&$$t.removeClass("removeEmptyOption").find("option.empty").remove(),this.setFieldValue(evt.target.value,evt.target.selectedIndex)},applyMetaData:function(metaData,buildOptions){Base.prototype.applyMetaData.call(this,metaData,buildOptions),this._updateList(metaData)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),_dateApi=require("syracuse-tablet/html/js/helpers/types/date"),_Klass=utils.defineClass(function(){},null,{create:function(parentSlot,dateValue,handler){this.parent=parentSlot,this.handler=handler,this.domItem=document.createElement("nav"),this.domItem.className="s-calendar-quick-list",this._dateValue=dateValue;var table=document.createElement("table");table.className="s-calendar-month-choice";var tbody=document.createElement("tbody");for(var ii=0;ii<6;ii++){var row=document.createElement("tr");row.appendChild(this.drawCell(ii+1,_dateApi.monthName(ii+1,!0),this._dateValue.month)),row.appendChild(this.drawCell(ii+7,_dateApi.monthName(ii+7,!0),this._dateValue.month)),tbody.appendChild(row)}table.appendChild(tbody),this.domItem.appendChild(table),this.parent.appendChild(this.domItem),this.bindEvents(!0)},drawCell:function(value,text,selValue){var td=document.createElement("td");return td.className="s-calendar-my-item",td.syraOnClick="onMonthClick",td.syraValue=value,td.textContent=text,value==selValue&&(td.className+=" s-calendar-select",this.selectedCell=td),td},toggle:function(show){show?this.domItem.style.display="":this.domItem.style.display="none"},onMonthClick:function(picker){this.selectedCell&&(this.selectedCell.className="s-calendar-my-item"),(this.selectedCell=picker).className="s-calendar-my-item s-calendar-select",this._selectedMonth=picker.syraValue;var month=this._selectedMonth?this._selectedMonth:this._dateValue.month;this._currentDate=this._dateValue=_dateApi.fromJsDate(new Date(this._dateValue.year,month-1,this._dateValue.day)),this.handler.onEvent("onCalendarUpdate",this)},bindEvents:function(bind){var self=this;bind?$(self.domItem).delegate("td","click",function(evt){self.onClick(evt),evt.preventDefault(),evt.stopPropagation()}):$(self.domItem).undelegate()},onClick:function(evt){var self=this;while(evt.target){if(evt.target.syraOnClick){this[evt.target.syraOnClick](evt.target,evt);return}evt.target=evt.target.parentNode}},destroy:function(){this.bindEvents(!1),this.domItem=this._dateValue=this.selectedCell=null}});exports.MonthChoice=_Klass}),define("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_dateApi=require("syracuse-tablet/html/js/helpers/types/date"),_Klass=utils.defineClass(function(){},null,{create:function(parentSlot,dateValue,handler){this.parent=parentSlot,this.domItem=document.createElement("nav"),this.domItem.className="s-calendar-quick-list",this.handler=handler,this._dateValue=dateValue,this._selectedYear=this._dateValue.year;var table=document.createElement("table");table.className="s-calendar-year-choice";var tbody=document.createElement("tbody");this.rows=[];for(var ii=0;ii<6;ii++){var row=document.createElement("tr");if(ii==0)this.addPrevNextCell(row,!0),this.addPrevNextCell(row,!1);else{var cuYear=this._dateValue.year+ii-4;row.appendChild(this.drawCell(cuYear,cuYear)),row.appendChild(this.drawCell(cuYear+5,cuYear+5))}tbody.appendChild(row),this.rows.push(row)}table.appendChild(tbody),this.domItem.appendChild(table),this.parent.appendChild(this.domItem),this.bindEvents(!0)},addPrevNextCell:function(row,isPrev){var td=document.createElement("td");td.className="s-calendar-my-link-cell";var link=document.createElement("a");link.className=(link.syraIsPrev=isPrev)?"s-calendar-prev-year":"s-calendar-next-year",link.textContent=(link.syraIsPrev=isPrev)?locale.text("date.month.label.prev"):locale.text("date.month.label.next"),link.syraOnClick="onChangeYear",td.appendChild(link),row.appendChild(td)},drawCell:function(value,text){var td=document.createElement("td");return td.className="s-calendar-my-item",td.syraOnClick="onSelectYear",td.syraValue=value,td.textContent=text,value==this._selectedYear&&(td.className+=" s-calendar-select",this.selectedCell=td),td},toggle:function(show){show?this.domItem.style.display="":this.domItem.style.display="none"},_refreshYearCell:function(td,step){td.syraValue+=step,td.textContent=td.syraValue,td.syraValue==this._selectedYear&&(td.className+=" s-calendar-select",this.selectedCell=td)},onChangeYear:function(picker){var step=picker.syraIsPrev?-10:10;for(var ii=1,jj=this.rows.length;ii<jj;ii++){var nodes=this.rows[ii].childNodes;this._refreshYearCell(nodes[0],step),this._refreshYearCell(nodes[1],step)}},onSelectYear:function(picker){this.selectedCell&&(this.selectedCell.className="s-calendar-my-item"),(this.selectedCell=picker).className="s-calendar-my-item s-calendar-select",this._selectedYear=picker.syraValue;var year=this._selectedYear?this._selectedYear:this._dateValue.year;this._currentDate=this._dateValue=_dateApi.fromJsDate(new Date(year,this._dateValue.month,this._dateValue.day)),this.handler.onEvent("onCalendarUpdate",this)},bindEvents:function(bind){var self=this;bind?$(self.domItem).delegate("td","click",function(evt){self.onClick(evt),evt.preventDefault(),evt.stopPropagation()}):$(self.domItem).undelegate()},onClick:function(evt){var self=this;while(evt.target){if(evt.target.syraOnClick){this[evt.target.syraOnClick](evt.target,evt);return}evt.target=evt.target.parentNode}},destroy:function(){this.bindEvents(!1),this.rows=this.domItem=this._dateValue=this.selectedCell=null}});exports.YearChoice=_Klass}),define("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice","syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_dateApi=require("syracuse-tablet/html/js/helpers/types/date"),MonthChoice=require("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice").MonthChoice,YearChoice=require("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice").YearChoice,_Klass=utils.defineClass(function(){},null,{onClick:function(evt){var self=this,close;while(evt.target&&evt.target!=self.handler.parentSlot){if(evt.target.getAttribute("data-s-syraOnClick")){close=this[evt.target.getAttribute("data-s-syraOnClick")](evt.target,evt),close&&this.handler.closeContainer();return}evt.target=evt.target.parentNode}},onTodayClick:function(){return this._currentDate=_dateApi.today(),this.field.setFieldValueFromSelector(_dateApi.fromInternalValue(this._currentDate._value).toString()),!0},onDayClick:function(picker){return this.field.setFieldValueFromSelector(_dateApi.fromInternalValue(picker.getAttribute("data-s-syraValue")).toString()),!0},onChangePeriode:function(picker){picker.getAttribute("data-s-syraPeriod")=="month"?this._currentDate=this._currentDate.addMonths(picker.getAttribute("data-s-syraIsPrev")?-1:1):picker.getAttribute("data-s-syraPeriod")=="year"?this._currentDate=this._currentDate.addYears(picker.getAttribute("data-s-syraIsPrev")?-1:1):this._currentDate=this._currentDate.addDays(picker.getAttribute("data-s-syraIsPrev")?-7:7),this.handler.onEvent("onCalendarUpdate",this)},onMonthClick:function(){this.handler.onEvent("onMonthClick",this)},onYearClick:function(){this.handler.onEvent("onYearClick",this)},getValueForSelector:function(field){return field.getValue()&&field.getValue().slice(0,10)},create:function(field,handler){this.domItem=document.createElement("div"),this.domItem.className="s-calendar";var value=this.getValueForSelector(field)||"";return this._selectedDate=value?_dateApi.parse(value):_dateApi.today(),this._selectedDate=this._selectedDate._value==0?_dateApi.today():this._selectedDate,this._currentDate=handler._currentDate||_dateApi.fromInternalValue(this._selectedDate._value),this.field=field,this.handler=handler,this._table=document.createElement("table"),this._table.setAttribute("cellspacing",0),this._table.className="s-calendar-content",this._table.appendChild(this._appendHead()),this._table.appendChild(this.body=document.createElement("tbody")),this._table.appendChild(this._appendFoot()),this.domItem.appendChild(this._table),this._drawBody(),this.domItem},_appendHead:function(){var head=document.createElement("thead"),row=document.createElement("tr"),cell=document.createElement("th");cell.setAttribute("colspan",8),cell.className="s-calendar-month-year";var slot=document.createElement("div");slot.className="s-calendar-month-year-slot",cell.appendChild(slot);var link=document.createElement("a");link.setAttribute("data-s-syraOnClick","onChangePeriode"),link.setAttribute("data-s-syraIsPrev",!0),link.setAttribute("data-s-syraPeriod","year"),link.className="s-calendar-prev s-calendar-prev-year glyphicon glyphicon-fast-backward",slot.appendChild(link),link=document.createElement("a"),link.setAttribute("data-s-syraOnClick","onChangePeriode"),link.setAttribute("data-s-syraIsPrev",!0),link.setAttribute("data-s-syraPeriod","month"),link.className="s-calendar-prev s-calendar-prev-month glyphicon glyphicon-step-backward",slot.appendChild(link),this._monthLink=document.createElement("a"),this._monthLink.className="s-month s-calendar-month-year-link",slot.appendChild(this._monthLink).setAttribute("data-s-syraOnClick","onMonthClick"),this._yearLink=document.createElement("a"),this._yearLink.className="s-year s-calendar-month-year-link",slot.appendChild(this._yearLink).setAttribute("data-s-syraOnClick","onYearClick"),link=document.createElement("a"),link.setAttribute("data-s-syraOnClick","onChangePeriode"),link.setAttribute("data-s-syraPeriod","month"),link.className="s-calendar-next s-calendar-next-month glyphicon glyphicon-step-forward",slot.appendChild(link),link=document.createElement("a"),link.setAttribute("data-s-syraOnClick","onChangePeriode"),link.setAttribute("data-s-syraPeriod","year"),link.className="s-calendar-next s-calendar-next-year glyphicon glyphicon-fast-forward",slot.appendChild(link),row.appendChild(cell),head.appendChild(row),row=document.createElement("tr");var cell=document.createElement("th");cell.className="s-calendar-week-day",row.appendChild(cell);var days=[1,2,3,4,5,6,0];for(var ii=0,jj=days.length;ii<jj;ii++){var cell=document.createElement("th");cell.className="s-calendar-week-day",cell.title=_dateApi.dayName(days[ii]),cell.textContent=_dateApi.dayName(days[ii],!0),row.appendChild(cell)}return head.appendChild(row),head},_appendFoot:function(){var row=document.createElement("tr"),cell=document.createElement("td");cell.setAttribute("colspan",3),cell.className="s-calendar-foot-week";var link=document.createElement("a");link.setAttribute("data-s-syraOnClick","onChangePeriode"),link.setAttribute("data-s-syraPeriod","week"),link.className="s-calendar-prev s-calendar-prev-week glyphicon glyphicon-chevron-left",link.setAttribute("data-s-syraIsPrev",!0),cell.appendChild(link);var label=document.createElement("label");label.className="s-calendar-foot-week-title",label.textContent=locale.text("date.label.week"),cell.appendChild(label),this._weekNumber=document.createElement("label"),this._weekNumber.className="s-calendar-foot-week-title-num",cell.appendChild(this._weekNumber),link=document.createElement("a"),link.setAttribute("data-s-syraOnClick","onChangePeriode"),link.setAttribute("data-s-syraPeriod","week"),link.className="s-calendar-next s-calendar-next-week glyphicon glyphicon-chevron-right",cell.appendChild(link),row.appendChild(cell),cell=document.createElement("td"),cell.setAttribute("colspan",3),cell.className="s-calendar-foot-today",link=document.createElement("a"),link.className="s-calendar-today-link",link.setAttribute("data-s-syraOnClick","onTodayClick"),link.textContent=locale.text("date.label.today"),cell.appendChild(link),row.appendChild(cell),cell=document.createElement("td"),cell.setAttribute("colspan",2),row.appendChild(cell);var foot=document.createElement("tfoot");return foot.appendChild(row),foot},_drawBody:function(){var curMonth=this._currentDate.month||9,month=_dateApi.monthName(curMonth);this._monthLink.textContent=month,this._yearLink.textContent=this._currentDate.year||2014,uiUtils.empty(this.body);var curDate=_dateApi.fromInternalValue(this._currentDate._value),begOfMonth=curDate=curDate.begOfMonth();curDate=curDate.begOfWeek(1);for(var weekRow=0;weekRow<6;weekRow++){var row=document.createElement("tr"),weekDay=weekRow==0?begOfMonth:curDate,cell=document.createElement("td");cell.className="s-calendar-week-num",row.appendChild(cell),cell.textContent=weekDay.week;for(var day=0;day<7;day++){var cell=document.createElement("td");cell.className="s-calendar-day-link",cell.setAttribute("data-s-syraOnClick","onDayClick"),cell.setAttribute("data-s-syraValue",curDate._value);var link=document.createElement("a");link.textContent=curDate.day,curMonth!=curDate.month&&(cell.className+=" s-calendar-other-month"),this._currentDate.equals(curDate)&&(cell.className+=" s-calendar-select",link.className="s-calendar-select"),cell.appendChild(link),row.appendChild(cell),curDate=curDate.addDays(1)}this.body.appendChild(row)}this._weekNumber.textContent=this._currentDate.week},bindEvents:function(bind){var self=this,parentSlot=self.handler.getParentSlot();bind?$(parentSlot).delegate("td, a","click",function(evt){self.onClick(evt),evt.preventDefault(),evt.stopPropagation()}):($(parentSlot).undelegate(),self._month&&self._month.bindEvents(!1),self._year&&self._year.bindEvents(!1))},destroy:function(){this.bindEvents(!1),this._currentDate=this.field=this._currentDate=this.quickList=this._month=this._year=this._selectedDate=this._monthLink=this._yearLink=this._weekNumber=this._quick=this.body=this.domItem=null}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),_timeApi=require("syracuse-tablet/html/js/helpers/types/time"),locale=require("syracuse-tablet/html/js/helpers/locale"),_Klass=utils.defineClass(function(){},null,{onClick:function(evt){var self=this,close;while(evt.target){if(evt.target.getAttribute("data-s-syraOnClick")){close=this[evt.target.getAttribute("data-s-syraOnClick")](evt.target,evt),close&&this.handler.closeContainer();return}evt.target=evt.target.parentNode}},setContainer:function($$modalElmt){this.$$modalElmt=$$modalElmt},create:function(field,handler,cb){this.domItem=document.createElement("div"),this.domItem.className="s-time-choice";var options=options||{};this.columns=options.columns||2,this.interval=options.interval||60,this.field=field,this.handler=handler,this.cb=cb,this.curTime=_timeApi.now();var cellCount=1440/this.interval,rowCount=cellCount/this.columns,table=document.createElement("table");table.className="s-time-choice-table",table.setAttribute("cellspacing","0"),table.setAttribute("cellpadding","0");var row,cell,cellIndex=0,timeHour=_timeApi.parse("00:00:00");for(var rr=0;rr<rowCount;rr++){row=document.createElement("tr");for(var col=0;col<this.columns;col++){cell=document.createElement("td"),cell.className="s-time-choice-td";if(cellIndex<cellCount){var link=document.createElement("a");link.className="s-time-choice-a",link.setAttribute("data-s-syraOnClick","onTimeClick"),timeHour.hour==this.curTime.hour&&(link.className+=" s-time-select"),link.textContent=timeHour.toString(locale.getTimeFormat()),cell.appendChild(link)}row.appendChild(cell),timeHour=timeHour.addMinutes(this.interval),cellIndex++}table.appendChild(row)}return this.domItem.appendChild(table),this.domItem},onTimeClick:function(picker){var self=this,fieldVal=_timeApi.parse(picker.textContent,locale.getTimeFormat()).toString();if(!this.cb)return self.field.setFieldValueFromSelector(fieldVal),!0;self.cb(fieldVal,self.handler)},bindEvents:function(bind){var self=this,parentSlot=self.handler.getParentSlot();bind?$(parentSlot).delegate("a","click",function(evt){self.onClick(evt),evt.preventDefault(),evt.stopPropagation()}):$(parentSlot).undelegate()},destroy:function(){this.bindEvents(!1),this.domItem=this.field=this.selectedLink=null}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice","syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector","syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),MonthChoice=require("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice").MonthChoice,YearChoice=require("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice").YearChoice,DateSelector=require("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass,TimeSelector=require("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector").Klass,_Klass=utils.defineClass(function(field){this.field=field},null,{onEvent:function(evt,selector){this[evt](selector)},setContainer:function($$container){this.$$container=$$container},setParentSlot:function(parentSlot){this.parentSlot=parentSlot},getParentSlot:function(){return this.parentSlot},onMonthClick:function(selector){var self=this,date=selector._currentDate;uiUtils.empty(self.parentSlot),selector.destroy();var monthChoice=new MonthChoice;monthChoice.create(this.parentSlot,date,self)},onYearClick:function(selector){var self=this,date=selector._currentDate;uiUtils.empty(self.parentSlot),selector.destroy();var yearChoice=new YearChoice;yearChoice.create(self.parentSlot,date,self)},onOpenTime:function(selector){var self=this;self.dateValue=selector.dateValue,uiUtils.empty(self.parentSlot),selector.destroy();var timeSelector=new TimeSelector,sDom=timeSelector.create(self.field,self,self.onSelectTime);self.parentSlot.appendChild(sDom),timeSelector.bindEvents(!0)},onCalendarUpdate:function(selector){var self=this;self._currentDate=selector._currentDate,uiUtils.empty(self.parentSlot),selector.destroy();var dateSelector=new DateSelector,sDom=dateSelector.create(self.field,self);self.parentSlot.appendChild(sDom),dateSelector.bindEvents(!0)},onSelectTime:function(timeVal,handler){var self=handler;self.field.setFieldValueFromSelector(self.dateValue+" "+timeVal),self.closeContainer()},closeContainer:function(){this.$$container.modal("hide")}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),_dateApi=require("syracuse-tablet/html/js/helpers/types/date"),Base=require("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass,_Klass=utils.defineClass(function(){},Base,{onTodayClick:function(){this._currentDate=_dateApi.today(),this.dateValue=_dateApi.fromInternalValue(this._currentDate._value).toString(),this.handler.onEvent("onOpenTime",this)},onDayClick:function(picker){this.dateValue=_dateApi.fromInternalValue(picker.getAttribute("data-s-syraValue")).toString(),this.handler.onEvent("onOpenTime",this)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector","syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector","syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),SelectorHandler=require("syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler").Klass,_selectors={date:{windows:null,android:null,ios:null,"default":require("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass},datetime:{windows:null,android:null,ios:null,"default":require("syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector").Klass},time:{windows:null,android:null,ios:null,"default":require("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector").Klass}},getSelector=function(propertyType){var type;switch(propertyType){case"application/x-date":type="date";break;case"application/x-datetime":type="datetime";break;case"application/x-time":type="time";break;default:throw new Error("Expected date/time/datetime type. Got "+propertyType)}var laf=globals.getLookAndFeel(),selector=_selectors[type];selector&&(selector=selector[laf]||selector["default"]);if(!selector)throw new Error("Expected date/time/datetime type. Got "+propertyType);return new selector},_createSelector=function(field){if(!field||!field.setFieldValueFromSelector)throw new Error("_createSelector - Field must implement setFieldValueFromSelector");var sHandler=new SelectorHandler(field),ctrlSelector=getSelector(field.$type),selectorDom=ctrlSelector.create(field,sHandler),$$selectorModal=modal.field(field.getTitle(),selectorDom.outerHTML,function(modalEvent,$$modalElmt){modalEvent=="shown.bs.modal"?(sHandler.setContainer($$modalElmt),sHandler.setParentSlot($$modalElmt.find(".modal-body")[0]),ctrlSelector.bindEvents(!0)):ctrlSelector.destroy()})};exports.createSelector=_createSelector}),define("syracuse-tablet/html/js/controls/field/ctrlDate",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),selectorFactory=require("syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_Klass=utils.defineClass(function CtrlBase(controller,article,prototype,options){var self=this;Base.call(self,controller,article,prototype,options)},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.picker=null},buildFieldValue:function(fieldSlot,buildOptions){var self=this,valueSlot=Base.prototype.buildFieldValue.call(self,fieldSlot,buildOptions),value=self.getFormattedValue(self.getValue());if(self.$isEditMode){var inputGroup=uiUtils.createDomElement("div",["input-group"],null,null,valueSlot);self.createMainInput(inputGroup,value);var span=uiUtils.createDomElement("span",["input-group-btn"],null,null,inputGroup);self.picker=uiUtils.createDomElement("button",["btn","btn-default","s-m-meta"],null,null,span),uiUtils.createDomElement("span",fontUtils.dateFieldIcon(self.$type),null,null,self.picker),$(self.picker).click(function(){selectorFactory.createSelector(self)})}else self.appendTextValue(valueSlot,value)},setFieldValue:function(value,forceSetFocus){this.$type.indexOf("datetime")>-1&&value.length<=10&&(value+="T00:00:00.0Z"),Base.prototype.setFieldValue.call(this,value,forceSetFocus)},getFieldFormat:function(){return this.formatter.format}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/searchArray",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/fieldOperators"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),formatApi=require("syracuse-tablet/html/js/helpers/formatApi"),locale=require("syracuse-tablet/html/js/helpers/locale"),fieldOperators=require("syracuse-tablet/html/js/helpers/fieldOperators"),_templates={basicSearch:'		<nav class="s-m-search">            <div class="input-group stylish-input-group">                <input type="text" class="form-control"  placeholder="Search"  value="{{searchValue}}" >                <span class="input-group-addon">                    <span style="visibility:{{visibleRemove}}" class="glyphicon glyphicon-remove" data-action="actionArray" data-params="removeSearch"></span>					<span class="glyphicon glyphicon-search" data-action="actionArray" data-params="search"></span>                </span>            </div>		</nav>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_exclude=["application/x-boolean"],_Klass=utils.defineClass(function(savedContext){this.searchValue=savedContext?savedContext.searchValue||"":"",this.searchInfos=this.searchValue?savedContext.searchInfos||[]:[],this.maxCrit=13},null,{destroy:function(){this.searchValue=null,this.$$search=null,this.searchInfos=null},getHtml:function(){var self=this;return self.$$search=$(_getHtml("basicSearch",{searchValue:self.searchValue,visibleRemove:self.searchValue!==""?"visible":"hidden"})),self.$$search},removeSearch:function(ctrl){this.searchValue="",this.searchInfos=[]},search:function(ctrl){this.searchValue=$(":input",this.$$search).val(),this.searchInfos=this.searchValue!=""?this._filterInfosGet(ctrl):[]},_filterInfosGet:function(ctrl){var columnInfo=ctrl.builder.getColumnsInfo(!0),proto=ctrl.prototype.create(ctrl.prototype.getDataByPath("$item")),props=proto.data("$properties"),control,$bind,$type,$capabilities,self=this,formatter,criteria=[],errors,val,$isReference;return columnInfo.forEach(function(column){control=column.control,$bind=column.$bindValue,$type=column.$type!="application/x-choice"?column.$bindType:column.$type,$isReference=column.$type.indexOf("x-reference")>=0,$capabilities=column.$capabilities||"";if($capabilities.indexOf("filter")>=0&&criteria.length<self.maxCrit&&_exclude.indexOf($type)<0&&self._hackFormat(props[$bind]))if($type!=="application/x-choice")errors=[],val=null,formatter=formatApi.getFormatter($type,props[$bind].$format),formatter?val=formatter.parseValue(self.searchValue,errors):val=self.searchValue,$isReference&&val&&(val=val.toUpperCase()),errors.length===0&&val!==undefined&&criteria.push({operator:fieldOperators.getDefaultOperator($type),id:$bind,value:val,prop:props[$bind],isReference:$isReference});else{var valueList=self._getChoiceTitles(column.$value,proto);valueList.forEach(function(val){val.title.indexOf(self.searchValue)>-1&&criteria.length<self.maxCrit&&criteria.push({operator:fieldOperators.getDefaultOperator($type),id:$bind,value:val.$value,prop:props[$bind],isReference:$isReference})})}}),criteria},_getChoiceTitles:function($value,proto){var res=[],self=this;return $.each($value.$enum,function(index,choice){res.push({$value:choice.$value,title:proto.resolveExpression(choice.$title)})}),res},_hackFormat:function(proto){var searchable=!0;switch(proto.$type){case"application/x-integer":var gs=locale.getNumberGroupSeparator(),ds=locale.getNumberDecimalSeparator();searchable=!isNaN(gs&&gs.length>0?this.searchValue.replace(new RegExp("\\"+gs+"|\\s","g"),""):this.searchValue),searchable=searchable&&(ds&&ds.length>0?this.searchValue.indexOf(ds)<0:!0);break;case"application/x-decimal":case"application/x-real":case"application/x-integer":case"application/x-quantity":searchable=!isNaN(this.searchValue.replace(new RegExp("\\.|,|\\s","g"),""));break;default:searchable=proto.$maxLength?this.searchValue.length<=proto.$maxLength:!0}return searchable},getSearchInfos:function(){return this.searchInfos},savedCtxCreate:function(){return{searchValue:this.searchValue,searchInfos:this.searchInfos}},savedCtxRestore:function(ctx){}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/builderBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,notifications=require("syracuse-tablet/html/js/helpers/notifications"),_filterSortPanelId=globals.PANELFILTERSORT,_templates={pagin:'			<nav class="s-m-pagin"> 				<ul class="pagination"> 					{{#each links}}						<li>							<a class="s-m-link {{css}}"								href = "#"								data-action="pagination"								data-params="{{type}}"								data-control-id="{{id}}"								draggable="false">							</a>						</li>					{{/each}}				</ul> 			</nav> 		',filterSort:'		<div class="s-m-filterSort" data-action="actionArray" data-params="{{panelId}}">			<i class="s-m-sorted" style="display:none"></i>			<i class="s-m-filtered '+fontUtils.filterIcon("filtered")+'" style="display:none"></i>			<i class="'+fontUtils.filterIcon("panel")+'"></i>		</div>',$filtersList:'		<nav class="s-m-filterslist">			<select	class="form-control" data-action="actionArray">				{{#each filters}}					<option value="filterSelected,{{id}}" {{#if $isDefault}}selected=""{{/if}}>{{$title}}</option>				{{/each}}			</select>		</nav>',$filterstabs:'		<nav class="s-m-filtertabs">			<ul class="nav nav-pills nav-justified">				{{#each filters}}					<li role="presentation" role="tab" data-toggle="tab" data-action="actionArray" data-params="filterSelected,{{id}}" class="{{#if $isDefault}}active{{/if}}"><a href="#">{{$title}}</a></li>				{{/each}}			</ul>		</nav>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl||alert("template "+name+" not found"),tmpl(ctx)},_isExcluded=["application/x-password"],_paginLinks=["$first","$previous","$next","$last"],_Klass=utils.defineClass(function(control,disp,options){this.$display=disp,this.options=options||{};if(control==null)throw new Error("Null control");this.control=control,this.$articleArray=control.article,this.$arrayOptions=this.$articleArray.$arrayOptions,this.$itemProto=control.prototype.getPrototype("$item"),this._gestureMgr=null,this._lastSelectedRow=null},null,{initReuseProperties:function(){this.destroyScroller(),this._$$stdHeader=null,this._lastSelectedRow=null},destroy:function(){this.control=null,this.$itemProto&&(this.$itemProto.destroy(),this.$itemProto=null),this.destroyScroller()},refresh:function(arrayData,buildOptions){buildOptions=buildOptions||{},buildOptions.refresh=!0,this.buildHtml(arrayData,buildOptions)},buildHtml:function(arrayData,buildOptions,classes){},isRefreshContext:function(buildOpts){return buildOpts&&(buildOpts.refresh===!0||buildOpts.cardDesign===!0)||this.options&&this.options.displayCtx==="card"},checkEmptyArray:function(){return this.control._displayArray()?!0:(this.control.$$value.empty(),this.control.isEmpty&&(this.refreshHeaderAndGesture(),this.control.setEmptyArrayMsg()),!1)},notifClearContent:function(refresh){},notifyArrayDataChanged:function(refresh,arrayData,isEmpty){this.destroyScroller()},onResize:function(context){this.refreshHeaderAndGesture(context)},doAfterBuild:function(resizeContext,refreshHeaderGesture){(refreshHeaderGesture||this._needToBuildHeader())&&this.refreshHeaderAndGesture(resizeContext),this.control.controller.prototype.isFacet("details","edit","create")&&notifications.notifyController("sm.scroller.update",this.control.controller)},_needToBuildHeader:function(){if(this._arrayHeaderWasCreated===!0)return!1;var $filtersAuth=null,headerOpts=this.getHeaderOptions();return headerOpts&&headerOpts.$filters&&headerOpts.$filters.length>1&&($filtersAuth=this.control.controller.$filtersGetAuthoring?this.control.controller.$filtersGetAuthoring():null),this._isHeaderVisible($filtersAuth)},refreshHeaderAndGesture:function(resizeContext){var scrollOnly=resizeContext!=null&&resizeContext.scrollOnly,preserveScroll=resizeContext!=null&&resizeContext.preserveScroll,justRefresh=resizeContext!=null&&resizeContext.resizeEvent&&resizeContext.resizeEvent.type==="resize";scrollOnly!==!0&&this._refreshHeader(justRefresh),this._initGestureMgr(preserveScroll),this._lastSelectedRow&&this.selectLastSelectedRow(this._lastSelectedRow,!0)},_initGestureMgr:function(preserveScroll){this._gestureMgr&&(this.isScrollable()?this._gestureMgr.checkViewRect(this.control.getScrollViewRect(),preserveScroll):this._gestureMgr.reset());if(this._restoreSelectedRowId){var $$row=this.selectLastSelectedRow(this._restoreSelectedRowId,!0);$$row&&this._gestureMgr&&this._gestureMgr.makeVisible($$row),this._restoreSelectedRowId=null}},isScrollable:function(){return this.control.getArrayData().$resources.length>0},insertError:function(html){$(['<span class="s-m-error">',html,"</span>"].join("")).prependTo(this.control.$$elmt)},getHeaderOptions:function(){var queryOrLookup=!this.control.isArrayField(),controller=this.control.controller,opts={};opts.filterEnabled=opts.sortEnabled=opts.searchEnabled=queryOrLookup,opts.paginEnabled=opts.searchEnabled=queryOrLookup||this.control.hasLocalPagination(),opts.searchEnabled=opts.searchEnabled&&!controller.offLine,opts.$filters=queryOrLookup&&controller.$filtersGet?controller.$filtersGet():null;if(controller.prototype.isRequest()||controller.prototype.isStatistics())opts.sortEnabled=opts.searchEnabled=opts.filterEnabled=!1,opts.$filters=null;return opts},_refreshHeader:function(justRefresh){var $filtersAuth=null,headerOpts=this.getHeaderOptions();headerOpts&&headerOpts.$filters&&headerOpts.$filters.length>1&&($filtersAuth=this.control.controller.$filtersGetAuthoring?this.control.controller.$filtersGetAuthoring():null),justRefresh!==!0&&this._isHeaderVisible($filtersAuth)&&(this.control.$$header.children(".s-m-stdheader").remove(),this._buildArrayHeader(this.control.getArrayData(),$filtersAuth)),$filtersAuth==="tabs"&&(this.control.$$header.find(".s-m-filtertabs").remove(),this._build$Filters(headerOpts.$filters,$filtersAuth))},_isHeaderVisible:function($filtersAuth){return this.$arrayOptions.showPagination||this.$arrayOptions.showSortFilter||this.$arrayOptions.showSearch||$filtersAuth==="list"},_buildArrayHeader:function(arrayData,$filtersAuth){var headerOpts=this.getHeaderOptions()||{},empty=!0;this._arrayHeaderWasCreated=!0,this._$$stdHeader=$('<nav class="s-m-stdheader"/>').prependTo(this.control.$$header),headerOpts.paginEnabled===!0&&this.$arrayOptions.showPagination===!0&&!this.control.isCarouselDisplay()&&((this.control.isEmpty!==!0||globals.isAuthoringActive())&&this._buildPagin(this._$$stdHeader,arrayData),empty=!1),headerOpts.searchEnabled===!0&&this.$arrayOptions.showSearch===!0&&(this._$$stdHeader.append(this.control.getSearcher().getHtml()),empty=!1),(headerOpts.filterEnabled===!0||headerOpts.sortEnabled===!0)&&this.$arrayOptions.showSortFilter===!0&&(this._buildSortFilter(this._$$stdHeader),empty=!1),$filtersAuth==="list"&&(this._build$Filters(headerOpts.$filters,$filtersAuth),empty=!1),this._$$stdHeader.toggle(!this._$$stdHeader.is(":empty"))},_build$Filters:function(filters,$filtersAuth){if(!$filtersAuth||$filtersAuth=="none")return;if($filtersAuth=="list"){$(_getHtml("$filtersList",{filters:filters})).appendTo(this._$$stdHeader);return}if($filtersAuth=="tabs"){var filtersWithoutAll=[];for(var i=1;i<filters.length;i++)filtersWithoutAll.push(filters[i]);filtersWithoutAll.length>1&&$(_getHtml("$filterstabs",{filters:filtersWithoutAll})).appendTo(this.control.$$header);return}},_buildPagin:function($$parent,arrayData){var self=this,ctxLinks={links:[]},designMode=globals.isAuthoringActive(),noPagin=!1;if(designMode&&self.control.getLocalPaginator()!=null||self.control.hasLocalPagination()){noPagin=!self.control.hasLocalPagination();var paginator=self.control.getLocalPaginator();_paginLinks.forEach(function(linkName){var ctx={css:fontUtils.paginationIcon(linkName)};!noPagin&&paginator.isActionEnabled(linkName)?(ctx.type=linkName,ctx.id=self.control.id):ctx.css+=" disabled",ctxLinks.links.push(ctx)})}else if(designMode||arrayData.$links&&!$.isEmptyObject(arrayData.$links))noPagin=arrayData.$links==null||$.isEmptyObject(arrayData.$links),_paginLinks.forEach(function(linkName){var ctx={css:fontUtils.paginationIcon(linkName)};!noPagin&&arrayData.$links&&arrayData.$links[linkName]!=null?(ctx.type=linkName,ctx.id=self.control.id):ctx.css+=" disabled",ctxLinks.links.push(ctx)});ctxLinks.links.length>0&&$(_getHtml("pagin",ctxLinks)).prependTo($$parent)},_buildSortFilter:function($$parent){this._$$sortFilter=$(_getHtml("filterSort",{ctrlId:this.control.id,panelId:_filterSortPanelId})),$$parent.append(this._$$sortFilter);var sortOrder=null,sortField=null,hasFilter=!1,info=this.control.sortInfoGet();info&&info.some(function(i){if(i.sort!="none")return sortOrder=i.sort,sortField=i.id,!0});var info=this.control.filterInfoGet();hasFilter=info&&info.length>0,this.filterSortUpdate(sortOrder,sortField,hasFilter)},filterSortUpdate:function(sortOrder,sortField,hasFilter){if(!this._$$stdHeader)return;var $$icon=this._$$stdHeader.find(".s-m-sorted").toggle(sortOrder!=null).removeClass();sortOrder!=null&&$$icon.addClass("s-m-sorted "+fontUtils.sortIcon(sortOrder)),this._$$stdHeader.find(".s-m-filtered").toggle(hasFilter===!0)},buildRecordMainElmt:function(rowData,options,idx){if(!options||!options.tag)throw new Error("buildRecordMainElmt - Bad options");return options.css=options.css||[],options.css.unshift(globals.RECORDCLASS),this.options.acceptRowSelectAction===!0&&rowData&&this._addRowSelAction(options,rowData.getValue("$uuid")),uiUtils.createDomElement(options.tag,options.css,options.title,options.attrs,options.parent)},_addRowSelAction:function(options,rowId){if(rowId==null||rowId.length===0)return;options.attrs=options.attrs||{},options.attrs["data-params"]=encodeURIComponent(rowId);var hasLink=this.control.prototype.isLookup();if(!hasLink){var links=this.$itemProto.data("$links");if(links){var forceLink=this.control.getAuthoring("$detailsLink");hasLink=forceLink&&links[forceLink]!=null||links.$details!=null}}hasLink&&(options.tag==="a"&&(options.attrs.href="#"),options.attrs["data-action"]=globals.ACTROWSEL)},isExcluded:function(proto){return proto==null||proto.$isExcluded===!0||_isExcluded.indexOf(proto.$type)>=0},getId:function(){var self=this;return arguments.length>0?self.control.id+" - "+Array.prototype.join.call(arguments,"-"):self.control.id},_getRowById:function(rowId){return this.control.$$elmt.find("tbody ."+globals.RECORDCLASS+'[data-params="'+rowId+'"]')},removeRowById:function(rowId){return this._getRowById(rowId).remove()},selectLastSelectedRow:function(rowId,show){this._lastSelectedRow=rowId?rowId:null;if(rowId!=null)return this._getRowById(rowId)[show?"addClass":"removeClass"]("s-m-last-selected");this.control.$$value.find(".s-m-last-selected").removeClass("s-m-last-selected")},getSelectedRowId:function(){return this.control.$$elmt.find("."+globals.RECORDCLASS+".s-m-last-selected").attr("data-params")},callGenerateHtml:function(ctrlToGenerate,$$parent,rowData,destroyAfter,buildOptions,idx){buildOptions=buildOptions||{};var htmlRootCtrl=buildOptions.htmlRootCtrl||this.control,$$elmt=ctrlToGenerate.generateHtml($$parent,rowData,htmlRootCtrl,buildOptions.updateLayout);if(this.control.prototype.isSingleArray()&&idx!=null){var meta=ctrlToGenerate.getMetaData(),d;ctrlToGenerate.$type==="application/x-reference"?d=rowData.getValue(globals.SINGLEARRAYPROP):rowData.parent&&rowData.parent.data.$properties&&(d=rowData.parent.data.$properties,d&&d[rowData.$bind]&&(d=d[rowData.$bind].$items[idx])),d&&(meta||(meta={}),["$isHidden","$isReadOnly","$isDisabled"].forEach(function(p){d[p]!=null&&(meta[p]=d[p])})),(meta.$isHidden===!0||meta.$isReadOnly)&&$$elmt.closest(".s-m-record").addClass(meta.$isHidden?"hidden":"readonly"),ctrlToGenerate.applyMetaData(meta,buildOptions)}return ctrlToGenerate.$$elmt=null,destroyAfter===!0&&ctrlToGenerate.destroy(),$$elmt},addEmptyCells:function(rootLayout,$$row,nb,buildOptions,$$wrapper){var self=this;if(nb<1)return;var dispEmpty=self.$articleArray.$emptycell;if(dispEmpty==="withtitle"||dispEmpty==="filled"){var $$td=$('<td class="s-m-empty s-m-'+dispEmpty+' nohover">');$$wrapper&&($$parent=$$wrapper.appendTo($$td));var $$parent;for(var i=0;i<nb;i++)$$parent=$$td.clone().appendTo($$row),$$wrapper&&($$parent=$$parent.children().first()),this.callGenerateHtml(rootLayout,$$parent,null,!1,buildOptions)}return $$row.children("td.s-m-empty")},savedCtxCreate:function(){return{$display:this.$display,gestureMgr:this._gestureMgr?this._gestureMgr.savedCtxCreate():null,lastSelectedRow:this._lastSelectedRow}},savedCtxRestore:function(ctx){this._gestureMgr&&ctx.gestureMgr&&this.$display===ctx.$display&&this._gestureMgr.savedCtxRestore(ctx.gestureMgr,!0),ctx.lastSelectedRow&&(this._restoreSelectedRowId=ctx.lastSelectedRow)},newScroller:function(type,$$elmt,valMax){return this.destroyScroller(),this._gestureMgr=new HammerScroller($$elmt,{direction:type,valMax:valMax==null?0:valMax,name:this.control.$bind,isPageScroller:!1},globals.getMainPageGestureMgr()),this._gestureMgr},destroyScroller:function(){this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},hasScroller:function(){return this._gestureMgr!=null},isEmptySingleArray:function(){return!this.control||!this.control.getArrayData()?!1:this.control.getArrayData().length>0?!1:this.control.prototype.isSingleArray()&&this.control.$$value.find(".s-m-record.hidden").length===this.control.getArrayData().$resources.length},isColumnDisplayed:function($bind){var cols=this.getColumnsInfo(!0);return cols?cols.some(function(c){return c.$bind===$bind}):!1},getColumnsInfo:function(onlyVisible){throw new Error("Not implemented")}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/builderTable",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/ctrlFactory"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),builderBase=require("syracuse-tablet/html/js/controls/array/builderBase"),locale=require("syracuse-tablet/html/js/helpers/locale"),Base=builderBase.Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),reqProto=require("syracuse-tablet/html/js/helpers/prototype"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory"),_fixedSzInfo={},_getFixedSizeInfo=function($$table){var dev=globals.getSiteLayout().getDeviceType(),r=_fixedSzInfo[dev];if(r)return r;var $$body=$("<tbody></body>").appendTo($$table),$$tr=$('<tr class="s-m-record"><td><div class="s-m-control s-m-field" style="width:100%"><div class="s-m-value" style="width:100%" ><span style="width:100%" id="text">MMMMMMMMMM</span></div></div></td><td class="s-m-icon"><div class="s-m-control s-m-icon"><a href="#" class="a"><span class="fa fa-hand-o-right"></span></a></div></td></tr>');$$tr.appendTo($$body);var tdWidth=$$tr.find("td").outerWidth(),valWidth=$$tr.find(".s-m-value").outerWidth(),textWidth=$$tr.find("#toto").width();return r={cellPadding:tdWidth-valWidth,charWidth:Math.ceil($$tr.find("#text").width()/10),iconWidth:$$tr.find("td.s-m-icon").outerWidth()},$$body.remove(),_fixedSzInfo[dev]=r,r},_createCellControl=function(arrayCtrl,$$parent,colInfo,fieldProto){var article={$bind:colInfo.$bind};return ctrlFactory.createCellFieldCtrl($$parent,arrayCtrl.controller,colInfo.article||colInfo,fieldProto)},_isExcluded=["application/json","application/x-array","application/x-document","application/x-binary"],_ADDROW="$ADDROW",_addRowBtn={$activity:"create",$type:"tablet/x-button",$icon:"addrow",$bind:_ADDROW,$text:"grid.addrow.label",$action:"rowCreate",$capabilities:["append"]},_additionalCols=[{$type:"tablet/x-icon",css:["s-m-icon"],$activity:"edit",$icon:"editrow",$bind:"$EDITROW",$action:globals.ACTROWDETAIL},{$type:"tablet/x-icon",css:["s-m-icon"],$activity:"edit",$icon:"delrow",$bind:"$DELETEROW",$action:globals.ACTROWDEL,$capabilities:"delete"},{$type:"tablet/x-icon",css:["s-m-icon"],$activity:"read",$icon:"detailrow",$bind:"$DETAILROW",$action:globals.ACTROWDETAIL}],_templates={sortedHeader:'<div><span>{{title}}</span><i class="{{css}}"></i></div>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_Klass=utils.defineClass(function(control,disp,options){Base.call(this,control,disp,options),control.controller.state.type==="chartdetail"?this.$arrayOptions.showRowDetailLink=!1:control.controller.state.type==="rowdetail"?this.$arrayOptions.showRowDetailLink=!0:this.$arrayOptions.showRowDetailLink==null&&(this.$arrayOptions.showRowDetailLink=!1),this._columnInfo=null},Base,{destroy:function(){Base.prototype.destroy.call(this),this._columnInfo&&(this._columnInfo.forEach(function(col){col.control&&col.control.destroy()}),this._columnInfo=null)},buildHtml:function(arrayData,buildOpts){buildOpts=buildOpts||{},Base.prototype.buildHtml.call(this,arrayData,buildOpts),this._createColumnInfo(buildOpts).length>0?this.isRefreshContext(buildOpts)&&this._build(buildOpts):this.control.$$value.addClass("empty")},notifyArrayDataChanged:function(refresh,arrayData,isEmpty){Base.prototype.notifyArrayDataChanged.call(this,refresh,arrayData,isEmpty)},onResize:function(context){if(this.destroyed)return;var scrollOnly=context!=null&&context.scrollOnly===!0;if(scrollOnly!=1&&this._columnInfo&&this._columnInfo.length>0){var buildOpts={updateLayout:context&&context.updateLayout};this._build(buildOpts,context)}else Base.prototype.onResize.call(this,context)},_build:function(buildOpts,resizeContext){if(!this.checkEmptyArray())return;buildOpts=buildOpts||{};var self=this,initScroll=buildOpts.refresh===!0||resizeContext;self.control.$$value.empty();var arrayData=self.control.getArrayData();if(!arrayData)return;var $$table=$('<table class="table table-condensed"/>').appendTo(self.control.$$value);self._calulateWidths($$table,arrayData);var $$headerScroll=self._buildTableHead($$table,buildOpts);if(arrayData.$resources.length>0||self.control.controller.isEditMode){var scrollable=this.isScrollable();scrollable&&($$table=$('<table class="table table-condensed"/>').appendTo(self.control.$$value),$$headerScroll.css({fontSize:"0px",visibility:"hidden"}).appendTo($$table));var $$body=$(uiUtils.createDomElement("tbody",null,null,null,$$table)),size=_getFixedSizeInfo($$body);for(var i=0;i<arrayData.$resources.length;i++)self._buildTableRow($$body,arrayData.$resources[i],i,buildOpts);self._buildTableFoot($$table,arrayData,buildOpts),scrollable&&self.newScroller("v",$$table.wrap('<div class="s-m-scroll-wrapper"/>'),-1*$$headerScroll.height())}this.doAfterBuild(resizeContext,!0)},isScrollable:function(){return this.control.$type===ctrlFactory.type("arrayChart")||!this.control.isArrayField()&&!this.control.controller.isNestedInDashboard("stack")},_calulateWidths:function($$table,arrayData){var self=this,size=_getFixedSizeInfo($$table),maxWidth=self.control.$$value.width()-self._nbAdditionalCols*size.iconWidth,fixedWidth=0,width;self._columnInfo.forEach(function(i){var art=i.article;i.fixedWidth=0,art&&art.$widthType==="fixed"&&art.$widthVal>0&&(width=size.charWidth*art.$widthVal+size.cellPadding,width>0&&fixedWidth+width<maxWidth&&(i.fixedWidth=width,fixedWidth+=width))});var remainingWidth=maxWidth-fixedWidth,percentWidth=0;self._columnInfo.forEach(function(i){var art=i.article;art&&art.$widthType==="percent"&&art.$widthVal>0&&(width=art.$widthVal*remainingWidth/100+size.cellPadding,width>0&&percentWidth+width<remainingWidth&&(i.fixedWidth=width,percentWidth+=width))})},_createColumnInfo:function(buildOpts){var self=this;if(self._columnInfo)return self._columnInfo;self._nbAdditionalCols=0,self._columnInfo=[];var nonDataCol=0;self.$arrayOptions.rowIndex&&(self._columnInfo.push({$bind:globals.ROWIDXPROP,proto:reqProto.getRowIdxProto(),cssHeader:"s-m-rowidx"}),nonDataCol++),this._statusList=this.control.getRowStatusInfo(),this._statusList!=null&&(self._columnInfo.push({$bind:"$ROWSTATUS",css:"s-m-row-status",proto:reqProto.create({$type:"tablet/x-row-status"})}),nonDataCol++);var proto,unfound=[],col,items=self.$articleArray.$table,protocols=self.control.prototype.arrayTableGetColInfo();items||(items=protocols),items.forEach(function(item,idx){if(item.$isHidden)return;item.$widthType=item.$widthType?item.$widthType:"auto",item.$widthVal=parseInt(item.$widthType==="auto"?0:item.$widthVal,10),item.$imgHeight=item.$imgHeight||"small",isNaN(item.$widthVal)&&(item.$widthVal=0),proto=self.$itemProto.property(item.$bind),proto?self.isExcluded(item,proto)||(col={$bind:item.$bind,proto:self.$itemProto.create(proto),article:item},col.css=[self.$itemProto.getFieldNameForValue(item.$bind)],col.article.$isTitleHidden===!0?col.title="":col.article.$title!=null&&col.article.$title!=item.$bind&&col.article.$titleOrig.indexOf("{@")>=0?col.title=self.$itemProto.resolveExpression(col.article.$titleOrig||col.article.$title)||"":col.title=col.proto.data("$title")||"",self._columnInfo.push(col)):unfound.push(item)});var edit=self.control.controller.isEditMode(),overflow=!this.control.prototype.isSingleArray()&&self._columnInfo.length-nonDataCol!=protocols.length;this.$arrayOptions.showRowDetailLink===!1&&(overflow=!1);var c;_additionalCols.forEach(function(col){(edit&&col.$activity==="edit"||!edit&&overflow&&col.$activity==="read")&&self.control.checkCapabilities(col.$capabilities)&&(c=$.extend(!0,{},col),c.$widthType="auto",self._columnInfo.push(c),self._nbAdditionalCols++)});if(unfound.length>0&&globals.getDvlpOpt("showUnfoundFields")){var html=["Field(s) not found<ul>"];unfound.forEach(function(x){html.push("<li><b>"+x.$bind+"</b></li>")}),html.push("</ul>"),self.insertError(html.join(""))}return self._columnInfo},getColumnInfo:function(){return this._columnInfo},isExcluded:function(item,proto){var self=this;return Base.prototype.isExcluded.call(self,proto)?!0:_isExcluded.indexOf(proto.$type)>=0||item.$isAdvanced===!0},_buildTableHead:function($$table,buildOpts){var self=this,$$tabHead=$(uiUtils.createDomElement("thead",null,null,null)),tr=uiUtils.createDomElement("tr",null,null,null,$$tabHead),th;self._columnInfo.forEach(function(col){th=uiUtils.createDomElement("th",col.cssHeader||col.css,col.title,null,tr),col.fixedWidth!=null&&col.fixedWidth>0&&$(th).width(col.fixedWidth)});var $$headerScroll;return this.control.getAuthoring("$tableHeaderShow")!==!1?($$headerScroll=$$tabHead.clone(),this.$$tabHead=$$tabHead.appendTo($$table)):$$headerScroll=$$tabHead,$$headerScroll},_buildTableFoot:function($$table,arrayData,buildOpts){var self=this;if(self.control.controller.isEditMode()&&this.control.checkCapabilities(_addRowBtn.$capabilities)){var $$cell=$('<tfoot><tr><td colspan="'+self._columnInfo.length+'"></td></tr></tfoot>').appendTo($$table).find("td"),fieldProto=self._getOtherColProto(_addRowBtn,""),ctrl=_createCellControl(self.control,$$cell,_addRowBtn,fieldProto);self.callGenerateHtml(ctrl,$$cell,self.control.controller.getEmptyDao(fieldProto),!0,buildOpts)}},_buildTableRow:function($$body,rowData,idx,buildOpts){var self=this,cssRowIdx;self.$arrayOptions.rowIndex&&rowData.setRowIndex(idx+1);var css=[],error=rowData.data.$arrayUpdateError;error===!0&&css.push("error"),idx%2===0&&css.push("s-m-even");var tr=self.buildRecordMainElmt(rowData,{tag:"tr",parent:$$body,css:css},idx),$$cell,fieldProto;return self._columnInfo.forEach(function(col,idx){$$cell=$(uiUtils.createDomElement("td",col.css||"",null,null,tr)),fieldProto=col.$activity!=null?self._getOtherColProto(col,rowData.data.$uuid,rowData,buildOpts):col.proto,col.control||(col.control=_createCellControl(self.control,$$cell,col,fieldProto)),self.callGenerateHtml(col.control,$$cell,rowData,!1,buildOpts,idx)}),tr},_getOtherColProto:function(colInfo,rowId,rowData,buildOpts){var self=this,mainArrayCtrl=buildOpts&&buildOpts.htmlRootCtrl?buildOpts.htmlRootCtrl:self.control,action=colInfo.$action,rowInfo={pathBind:[],pathId:[],activity:colInfo.$activity},create=colInfo.$activity==="create";if(create)rowId=utils.UUID(),rowInfo.pathId.unshift(rowId),rowInfo.pathBind.unshift(self.control.$bind);else{if(!rowData)throw new Error("unexpected null row data");var rd=rowData;rowInfo.pathId.unshift(rowId),rowInfo.pathBind.unshift(rd.$bind);while(rd.$bind!==mainArrayCtrl.$bind)rowInfo.pathId.unshift(rd.parent.getValue("$uuid")),rowInfo.pathBind.unshift(rd.parent.$bind),rd=rd.parent}mainArrayCtrl.rowDetailAdd(rowId,rowInfo);var json={$action:{"data-action":action}};return create&&(json.$action["data-params"]=rowId),["$type","$icon","$text"].forEach(function(x){x!=null&&x!="$activity"&&(json[x]=colInfo[x],x==="$text"&&(json[x]=locale.text(json[x])))}),reqProto.create(json)},filterSortUpdate:function(sortOrder,sortField,hasFilters){Base.prototype.filterSortUpdate.call(this,sortOrder,sortField,hasFilters);if(sortOrder&&sortField&&this.$$tabHead){var $$th=this.$$tabHead.find(".s-m-sorted");if($$th.length>1){var text=$$th.find("div > span")[0].text();$$th.removeClass()}$$th=this.$$tabHead.find("."+sortField);if($$th.length>0){var title=$$th.text();$$th.html(_getHtml("sortedHeader",{title:title,css:fontUtils.sortIcon(sortOrder)})),$$th.addClass("s-m-sorted "+sortOrder)}}this.searchUpdate()},searchUpdate:function(){var $$th,searcher=this.control.getSearcher(),self=this;self.$$tabHead&&(self.$$tabHead.find(".s-m-search").removeClass("s-m-search"),searcher&&searcher.searchInfos.forEach(function(column){$$th=self.$$tabHead.find("."+column.id),$$th.addClass("s-m-search ")}))},getColumnsInfo:function(onlyVisible){var cols;if(!this.control.prototype.isSingleArray()&&onlyVisible===!0){var ci=this._createColumnInfo();if(ci&&ci.length>0){var cols=[];ci.forEach(function(c){c.$action!==!0&&cols.push(c.$bind)})}}var protoCols=this.control.prototype.arrayTableGetColInfo();if(cols==null)return protoCols;var res=[];return protoCols.forEach(function(c){cols.indexOf(c.$bind)>=0&&res.push(c)}),res}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/layout/layoutBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/structElmt","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/structElmt").Klass,fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_Klass=utils.defineClass(function LayoutBase(controller,type,article,opts){Base.call(this,controller,type,article,opts),this.title=article.$title},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.$$header=null},destroy:function(){Base.prototype.destroy.call(this)},createId:function(typeName){return utils.readableuid(typeName)},buildHtml:function($$parent,controllerDao,buildOptions){Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions),this.createRootElement(["s-m-layout"],$$parent),this.article.$title&&(buildOptions==null||buildOptions.noTitle!==!0)&&this.buildTitle(),this.article.$icon&&(buildOptions==null||buildOptions.noIcon!==!0)&&this.buildIcon()},buildChildrenHtml:function($parent,controllerDao,buildOptions){this.isEmpty=!0;if(this.children){var self=this;$.each(self.children,function(index,child){child.buildHtml($parent,controllerDao,buildOptions),child.afterRender&&buildOptions&&(buildOptions.isHtmlGenerator===!0||buildOptions.afterRender===!0)&&child.afterRender(buildOptions),self.isEmpty=self.isEmpty&&child.isEmpty})}buildOptions&&buildOptions.hideEmptyRows===!0&&this.$$elmt.toggleClass("s-m-empty",this.isEmpty)},onResize:function(context){if(!this.children)return;this.children.forEach(function(child){child.onResize&&child.onResize(context)})},_ensureHeader:function($$root){return this.$$header||(this.$$header=$("<header>").prependTo($$root||this.$$elmt)),this.$$header},buildIcon:function($$rootLyt,$$parent,controllerDao,destroyAfter){this._ensureHeader();var icon=fontUtils.getIconByName(this.article.$icon);icon&&this.$$header.prepend('<icon class="s-m-ttl-icon '+icon+'">')},buildTitle:function($$rootLyt,$$parent,controllerDao,destroyAfter){this._ensureHeader(),this.$$header.text(this.getArticleText("$title"))},getGestureMgr:function(){return null},isLayout:function(){return!0}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/layout/layoutRow",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,_checkEmptyRow=function($$row){if(!$$row)return;var fullCellMinWidth=$$row.width();fullCellMinWidth-=fullCellMinWidth/12;var emptyNotfw=[];$$row.children().each(function(){var $$cell=$(this);$$cell.width()>fullCellMinWidth?$$cell.addClass("s-m-fullwidth"):($$cell.removeClass("s-m-fullwidth"),emptyNotfw&&$$cell.is(".s-m-empty")?emptyNotfw.push($$cell):emptyNotfw=null)}),emptyNotfw&&emptyNotfw.forEach(function($$cell){$$cell.addClass("s-m-fullwidth")})},_checkEmptyRows=function($$rows){if(!$$rows)return;$$rows.each(function(){_checkEmptyRow($(this))})},_Klass=utils.defineClass(function LayoutRow(controller,type,article,opts){var self=this;Base.call(self,controller,type,article,opts)},Base,{buildHtml:function($$parent,controllerDao,buildOptions){Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions),this.$$elmt.addClass("s-m-row row"),this._setRowColorClass(),this.buildChildrenHtml(this.$$elmt,controllerDao,buildOptions),this.$$elmt.is(":empty")&&this.$$elmt.hide()},_setRowColorClass:function(){var self=this,color=self.article.$bgColor;color&&self.$$elmt.addClass("s-m-bg s-m-color-"+color)}});exports.Klass=_Klass,exports.checkEmptyRows=_checkEmptyRows}),define("syracuse-tablet/html/js/controls/array/builderCardBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/helpers/articleParser","syracuse-tablet/html/js/authoring/authoringArticleGen","syracuse-tablet/html/js/helpers/fieldOperators","syracuse-tablet/html/js/controls/layout/layoutRow"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/array/builderBase").Klass,articleParser=require("syracuse-tablet/html/js/helpers/articleParser"),articleGen=require("syracuse-tablet/html/js/authoring/authoringArticleGen"),fieldOperators=require("syracuse-tablet/html/js/helpers/fieldOperators"),layoutRow=require("syracuse-tablet/html/js/controls/layout/layoutRow"),_Klass=utils.defineClass(function(control,disp,options){Base.call(this,control,disp,options),this._layoutRoot=null,this._$$cellTmpl=$('<section class="s-m-card"/>')},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this._$$body=null,this._$$rows=null,this._statusInfo=null},destroy:function(){Base.prototype.destroy.call(this),this._layoutRoot&&(this._layoutRoot.destroy(),this._layoutRoot=null),this._$$body&&(this._$$body.find(".carousel").remove(),this._$$body.remove(),this._$$body=null),this._$$cellTmpl=null,this._$$rows||(this._$$rows=null)},buildHtml:function(arrayData,buildOpts){Base.prototype.buildHtml.call(this,arrayData,buildOpts);if(this._layoutRoot==null){var cardArticle=this.$articleArray.$card;cardArticle||(cardArticle=articleGen.genNewArticle({page:{prototype:this.control.prototype}},!0));var options={displayCtx:"card",displayAsCarousel:buildOpts.htmlRootCtrl!==null,hideEmptyRows:this.$arrayOptions.hideEmptyRows===!0};this._layoutRoot=articleParser.article2Controls(this.control.controller,cardArticle,this.$itemProto,options)}this._statusInfo=this.control.getRowStatusInfo(),this.isRefreshContext(buildOpts)&&this._callBuildCards(buildOpts)},createCard:function($$parent,idx,rowData,buildOpts){var $$card=this._$$cellTmpl.clone().appendTo($$parent);return this.$arrayOptions.rowIndex===!0&&$('<span class="badge index">'+(idx+1)+"</span>").appendTo($$card),this._statusInfo&&this.checkStatusManagement($$parent,this._statusInfo,$$card,rowData),this.callGenerateHtml(this._layoutRoot,$$card,rowData,!1,buildOpts,idx),$$card},checkStatusManagement:function($$parent,statusInfo,$$cell,rowData){if(!statusInfo)return;var $$rootIcon=$$cell.find(".s-m-status");$$rootIcon.length===0&&($$rootIcon=$('<div class="s-m-status"/>').appendTo($$cell));var nbBckg=0;statusInfo.list.some(function(s){if(s.color&&fieldOperators.evaluateOperator(s.$type,rowData.getValue(s.field),s.operator,s.value))return s.icon?($('<div class="s-m-status-icon '+s.icon.css+'" style="color:'+s.color.bgColor+'"/>').appendTo($$rootIcon),statusInfo.type==="mono"):(s.color.css&&nbBckg===0&&($$parent.addClass("s-m-status-color "+s.color.css),nbBckg++),statusInfo.type==="mono")})},onResize:function(context){if(this.destroyed)return;var scrollOnly=context!=null&&context.scrollOnly===!0;if(scrollOnly!==!0){var buildOpts={updateLayout:context&&context.updateLayout};this._callBuildCards(buildOpts,context)}else Base.prototype.onResize.call(this,context)},_callBuildCards:function(buildOpts,context){if(!this.checkEmptyArray())return;this.buildCards(buildOpts,context)},buildCards:function(buildOpts,resizeContext){throw new Error("Not implemented")},authMinSize2Pixels:function(val){var max=700,min=100;return val=parseInt(val,10),val==null||isNaN(val)?200:val>20?max:val<1?min:min+val*(max-min)/20},checkEmptyRows:function(){if(!this._$$body)return;this._$$rows||(this._$$rows=this._$$body.find(".s-m-row")),layoutRow.checkEmptyRows(this._$$rows)},getColumnsInfo:function(onlyVisible){var cols=null;if(!this.control.prototype.isSingleArray()&&onlyVisible===!0&&this._layoutRoot){cols=[];var _scan=function(node){if(!node||!node.children)return;node.children.forEach(function(c){c.isControl()&&c.$bind?cols.push(c.$bind):_scan(c)})};_scan(this._layoutRoot)}var protoCols=this.control.prototype.arrayTableGetColInfo();if(cols==null)return protoCols;var res=[];return protoCols.forEach(function(c){cols.indexOf(c.$bind)>=0&&res.push(c)}),res}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/builderCard",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/array/builderCardBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/controls/array/builderCardBase").Klass,_Klass=utils.defineClass(function(control,disp,options){Base.call(this,control,disp,options)},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.resetProps(!1)},destroy:function(){Base.prototype.destroy.call(this),this.resetProps(!0)},resetProps:function(remove){this._tds=null,this._dirArray=null,this._$$body&&(remove&&(this._$$body.length&&this._$$body.remove(),this.destroyScroller()),this._$$body=null)},buildHtml:function(arrayData,buildOpts){this.$articleArray.$minWidth=this.$articleArray.$minWidth||6,Base.prototype.buildHtml.call(this,arrayData,buildOpts)},notifyArrayDataChanged:function(refresh,arrayData,isEmpty){Base.prototype.notifyArrayDataChanged.call(this,refresh,arrayData,isEmpty),this.resetProps(!0)},buildCards:function(buildOpts,resizeContext){buildOpts=buildOpts||{};if(!this._$$body){this.destroyScroller(),this._$$body=$("<tbody>").appendTo($("<table/>").appendTo(this.control.$$value));var $$td;this._tds=[];var self=this;this.control.getArrayData().$resources.forEach(function(rowData,idx){$$td=$(self.buildRecordMainElmt(rowData,{tag:"td",parent:null},idx)),self._tds.push({$$td:$$td,rowData:rowData})})}var dirArray,initScroll=!1;dirArray=globals.getScrollingDirection()||"v",initScroll=buildOpts.refresh===!0||resizeContext,dirArray=this.control.isArrayField()?"h":dirArray==="h"?"v":"v",buildOpts.cardAuthoring={$emptycell:this.$articleArray.$emptycell||"nodisplay",$minWidth:this.authMinSize2Pixels(this.$articleArray.$minWidth),$cardsPerRow:parseInt(this.$articleArray.$cardsPerRow,10)||2};var sz=this.control.getAvailableSize(),parentH=sz.height,parentW=sz.width,bs=this._$$body.parent().css("border-spacing");bs&&(bs=bs.split("px"),bs=bs&&bs.length>0?parseInt(bs[0],10):0);var $$hiddenRow,visibleTds=[];this._tds.forEach(function(o,idx){o.$$card&&o.$$card.css({height:"",width:""}),o.$$td.detach(),o.$$td.css("display")!="none"?visibleTds.push(o):($$hiddenRow||($$hiddenRow=$("<tr>").hide()),o.$$td.appendTo($$hiddenRow))}),this._$$body.empty(),$$hiddenRow&&$$hiddenRow.appendTo(this._$$body);if(visibleTds.length===0)return;dirArray==="h"?this.buildCardH(visibleTds,bs,parentH,parentW,buildOpts):this.buildCardV(visibleTds,bs,parentH,parentW,buildOpts);if(!this.control.isArrayField()&&!this.control.controller.isNestedInDashboard("stack")){var top=Math.max(0,(parentH-this._$$body.parent().outerHeight())/2);this._$$body.parent().css({top:top+"px"})}(this._dirArray==null||this._dirArray!=dirArray)&&(dirArray==="h"||dirArray==="v"&&!this.control.controller.isNestedInDashboard("stack"))&&(this._dirArray=dirArray,this.newScroller(dirArray,this._$$body.parent()),initScroll=!0),this.doAfterBuild(resizeContext,initScroll)},buildCardV:function(visibleTds,bs,parentH,parentW,buildOpts){this._$$body.parent().width("100%");var $$row,realW,nbCardPerRow,minWidth=buildOpts.cardAuthoring.$minWidth,remaining=0,self=this;visibleTds.some(function(o,idx){if(idx===0||nbCardPerRow==1||nbCardPerRow>1&&idx%nbCardPerRow===0)$$row=$("<tr>").appendTo(self._$$body),remaining=nbCardPerRow;remaining--,o.$$td.appendTo($$row),o.$$card||(o.$$card=self.createCard(o.$$td,idx,o.rowData,buildOpts));if(idx===0){var padding=o.$$card.outerWidth()-o.$$card.width();nbCardPerRow=buildOpts.cardAuthoring.$cardsPerRow;while(nbCardPerRow>1){realW=Math.round((parentW-(nbCardPerRow+1)*bs)/nbCardPerRow)-padding;if(realW>=minWidth)break;nbCardPerRow--}nbCardPerRow>1&&(realW=Math.min(Math.max(minWidth,realW)))}nbCardPerRow>1?o.$$card.width(realW):o.$$card.css({width:"100%"})}),remaining&&buildOpts.cardAuthoring.$emptyCell!=="nodisplay"&&this.addEmptyCells(this._layoutRoot,$$row,remaining,buildOpts,this._$$cellTmpl),this.$arrayOptions.hideEmptyRows===!0&&this.checkEmptyRows()},buildCardH:function(visibleTds,bs,parentH,parentW,buildOpts){var $$row,realH,realW,nbCardPerRow,numberOfRows,nbVisiblecardsPerRow=buildOpts.cardAuthoring.$cardsPerRow,minWidth=buildOpts.cardAuthoring.$minWidth;parentH-=bs;var remaining=0,self=this,maxHeight=0,h,heightChanged;visibleTds.some(function(o,idx){if(idx==0||nbCardPerRow==1||nbCardPerRow>1&&idx%nbCardPerRow===0)$$row=$("<tr>").appendTo(self._$$body),remaining=nbCardPerRow;o.$$td.appendTo($$row),o.$$card||(o.$$card=self.createCard(o.$$td,idx,o.rowData,buildOpts));if(idx===0){realH=o.$$td.height()+bs,parentW-=(nbVisiblecardsPerRow+1)*bs;var padding=o.$$card.outerWidth()-o.$$card.width();realW=Math.round(parentW/nbVisiblecardsPerRow)-padding,self.control.isArrayField()||visibleTds.length*realW<parentW?(numberOfRows=1,nbCardPerRow=visibleTds.length):(numberOfRows=Math.max(1,Math.floor(parentH/realH)),nbCardPerRow=Math.ceil(visibleTds.length/numberOfRows),visibleTds.length<=numberOfRows*nbVisiblecardsPerRow&&(nbCardPerRow=nbVisiblecardsPerRow)),remaining=nbCardPerRow}o.$$card.width(Math.min(parentW,Math.max(minWidth,realW)));var h=o.$$card.height();maxHeight===0?maxHeight=h:maxHeight!=h&&(heightChanged=!0,maxHeight=Math.max(maxHeight,h)),remaining--}),heightChanged&&visibleTds.forEach(function(o){o.$$card.height(maxHeight)});if(remaining&&buildOpts.cardAuthoring.$emptyCell!=="nodisplay"){var $$emptyCells=this.addEmptyCells(this._layoutRoot,$$row,remaining,buildOpts,this._$$cellTmpl);heightChanged&&$$emptyCells.height(maxHeight)}this.$arrayOptions.hideEmptyRows===!0&&this.checkEmptyRows()}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/builderCarousel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderCardBase","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/hammerScroller"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/array/builderCardBase").Klass,jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),Hammer=require("syracuse-tablet/html/js/helpers/hammerScroller").Hammer,_templates={main:'<div id="{{id}}" class="carousel slide">					<div class="carousel-inner" role="listbox">					</div>					<footer>						<ul class="s-m-carousel-indicators">							<span class="first active"></span>							{{#if middle}}								<span class="middle"></span>							{{/if}}							{{#if last}}								<span class="last"></span>							{{/if}}						</ul>						<span class="left carousel-control {{leftIcon}}" aria-hidden="true"  href="#{{id}}" role="button" data-slide="prev"></span>						<span class="right carousel-control {{rightIcon}}" aria-hidden="true" href="#{{id}}" role="button" data-slide="next"></span>					</footer>			</div>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_createHtmlGeneratorContext=function(carousel){return{handler:_destroyHtmlGeneratorContext,data:{$$body:carousel._$$body,swiper:carousel._swiper}}},_destroyHtmlGeneratorContext=function(data){if(!data)return;data.$$body&&data.$$body.length&&(data.$$body.remove(),data.$$body=null),data.swiper&&(data.swiper.destroy(),data.swiper=null)},_getInterval=function(period){return period==="slow"?6e3:period==="normal"?3e3:period==="fast"?1e3:-1},_Klass=utils.defineClass(function(control,disp,options){Base.call(this,control,disp,options)},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.resetProps(!1)},destroy:function(){Base.prototype.destroy.call(this),this.resetProps(!0)},resetProps:function(remove){remove&&this._destroySwiper(),remove&&this._$$body&&this._$$body.length&&this._$$body.remove(),this._$$body=null,this._cards=null},notifyArrayDataChanged:function(arrayData){Base.prototype.notifyArrayDataChanged.call(this,arrayData),this.resetProps(!0)},getHeaderOptions:function(){return{filterEnabled:!1,sortEnabled:!1,searchEnabled:!1,paginEnabled:!1,$filters:null}},buildCards:function(buildOpts,resizeContext){if(!this.checkEmptyArray())return;buildOpts=buildOpts||{};var interval=_getInterval(this.$articleArray.$carouselPeriod);if(!this._$$body){var ctx={id:"carousel"+this.control.id,leftIcon:fontUtils.getCarouselIcon("left"),rightIcon:fontUtils.getCarouselIcon("right")};this.control.getNbRecords()>0&&(ctx.last=this.control.getNbRecords()-1),this.control.getNbRecords()>1&&(ctx.middle=!0),this._$$body=$(_getHtml("main",ctx)).appendTo(this.control.$$value);var $$root=this._$$body.find(".carousel-inner");this._cards=[];var baseItm=$('<div class="item">'),$$item,$$record,self=this;this.control.getArrayData().$resources.forEach(function(rowData,idx){$$item=baseItm.clone().attr("data-idx",idx).appendTo($$root),idx===0&&$$item.addClass("active"),$$record=$(self.buildRecordMainElmt(rowData,{tag:"div",parent:$$item},idx)),self._cards.push(self.createCard($$record,idx,rowData,buildOpts))}),buildOpts.isHtmlGenerator===!0&&buildOpts.htmlRootCtrl&&buildOpts.htmlRootCtrl.addHtmlGeneratorContext(_createHtmlGeneratorContext(this))}var hasNextPrev=!isNaN(interval)&&interval<=0;this._$$body.find("footer").toggle(hasNextPrev),this._destroySwiper(),this._$$body.off("slid.bs.carousel"),hasNextPrev?(this._$$body.carousel("pause"),this._$$body.on("slid.bs.carousel",jsutils.bindFn(this._onEndSlide,this,this._$$body,this.control.getNbRecords()-1)),buildOpts.isHtmlGenerator!==!0&&this._initSwiper(this._$$body)):(this._$$body.carousel({interval:interval}),this._$$body.carousel("cycle"));var maxHeight=0,h,heightChanged;this._cards.forEach(function($$card,idx){$$card.css({height:"",width:""}),h=$$card.height(),maxHeight===0?maxHeight=h:maxHeight!=h&&(heightChanged=!0,maxHeight=Math.max(maxHeight,h))}),heightChanged===!0&&this._cards.forEach(function($$card){$$card.css("height",maxHeight+"px")}),this.$arrayOptions.hideEmptyRows===!0&&this.checkEmptyRows(),this.control.$$value.height(this._$$body.height()+"px"),this.doAfterBuild(resizeContext,!1)},_onEndSlide:function(evt,$$body,maxIdx){var $$active=$(evt.relatedTarget),idx=parseInt($$active.attr("data-idx"),10);idx!==maxIdx&&idx!==0&&(evt.direction==="right"?idx=idx===0?maxIdx:idx-1:idx=idx===maxIdx?0:idx+1),$$body.find("span.middle").toggleClass("active",idx>0&&idx<maxIdx),$$body.find("span.first").toggleClass("active",idx===0),$$body.find("span.last").toggleClass("active",idx===maxIdx)},_onSwipe:function(evt,$$body){if(evt.type!=="swipeleft"&&evt.type!=="swiperight"||utils.isEvtDirection(evt,"v"))return;$$body.carousel(evt.type==="swipeleft"?"next":"prev")},_destroySwiper:function(){this._swiper&&(this._swiper.destroy(),this._swiper=null)},_initSwiper:function($$parent){this._destroySwiper(),this._swiper=new Hammer($$parent.get(0)),this._swiper.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),this._swiper.on("swipeleft swiperight",jsutils.bindFn(this._onSwipe,this,$$parent))}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/builderSeparator",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/controls/ctrlFactory"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/array/builderBase").Klass,ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory"),_createCellControl=function(arrayCtrl,$$parent,colInfo,fieldProto){var article={$bind:colInfo.$bind};return ctrlFactory.createCellFieldCtrl($$parent,arrayCtrl.controller,colInfo.article||colInfo,fieldProto)},_seps={semicolon:",",colon:":",blank:" ",dash:"-"},_Klass=utils.defineClass(function(control,disp,options){Base.call(this,control,disp,options)},Base,{destroy:function(){Base.prototype.destroy.call(this),this._columnInfo&&(this._columnInfo.forEach(function(col){col.control&&col.control.destroy()}),this._columnInfo=null)},buildHtml:function(arrayData,buildOpts){buildOpts=buildOpts||{},Base.prototype.buildHtml.call(this,arrayData,buildOpts),this._createColumnInfo(),this._build(arrayData,buildOpts)},notifyArrayDataChanged:function(refresh,arrayData,isEmpty){Base.prototype.notifyArrayDataChanged.call(this,refresh,arrayData,isEmpty)},_createColumnInfo:function(){if(this._columnInfo)return this._columnInfo;this._columnInfo=[];var items=this.control.prototype.arrayTableGetColInfo(),self=this,proto,col;return items.forEach(function(item,idx){if(item.$isHidden)return;proto=self.$itemProto.property(item.$bind);if(!proto)return;self.isExcluded(item,proto)||(col={$bind:item.$bind,proto:self.$itemProto.create(proto),article:item},col.css=[self.$itemProto.getFieldNameForValue(item.$bind)],col.title="",self._columnInfo.push(col))}),this._columnInfo},_isHeaderVisible:function(){return!1},_getSep:function(){return _seps[this.control.article.$separator||"blank"]||" "},_build:function(arrayData,buildOpts){this.control.$$value.empty();var $$section=$("<section/>").appendTo(this.control.$$value),self=this,sep=this._getSep(),$$sep;arrayData.$resources.forEach(function(data,idx){idx>0&&($$sep=$('<span class="s-m-separator"/>').appendTo($$section).text(sep),sep===","&&$$sep.css("text-align","left")),self._buildCell($$section,data,idx,buildOpts)})},_buildCell:function($$parent,rowData,idx,buildOpts){var self=this;self._columnInfo.forEach(function(col,idx){col.control||(col.control=_createCellControl(self.control,$$parent,col,col.proto)),self.callGenerateHtml(col.control,$$parent,rowData,!1,buildOpts,idx)})}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/ctrlArray",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/application/daoSdata","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/fieldOperators","syracuse-tablet/html/js/controls/array/searchArray","syracuse-tablet/html/js/controls/array/builderTable","syracuse-tablet/html/js/controls/array/builderCard","syracuse-tablet/html/js/controls/array/builderCarousel","syracuse-tablet/html/js/controls/array/builderSeparator"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),sdataUtils=require("syracuse-tablet/html/js/sdata/sdataUtils"),daoSdata=require("syracuse-tablet/html/js/application/daoSdata"),locale=require("syracuse-tablet/html/js/helpers/locale"),fieldOperators=require("syracuse-tablet/html/js/helpers/fieldOperators"),SearchArray=require("syracuse-tablet/html/js/controls/array/searchArray").Klass,_LocalPaginator=utils.defineClass(function(arrayCtrl,options){options=options||{},this._length=options.length,this.count=options.count||10,this._arrayCtrl=arrayCtrl,this._nbPagin=Math.floor(this._length/this.count),this._lastIdx=this.count*(this._length%this.count===0?this._nbPagin-1:this._nbPagin),this._lastIdx<this.count&&(this._lastIdx=0),this.first()},null,{destroy:function(destroyProto){this._arrayCtrl=null},first:function(){return this.currentIdx=0,this.currentIdx},last:function(){return this.currentIdx=this._lastIdx,this._lastIdx},next:function(){return this.currentIdx=Math.min(this._lastIdx,this.currentIdx+this.count),this.currentIdx},prev:function(){return this.currentIdx=Math.max(0,this.currentIdx-this.count),this.currentIdx},isActionEnabled:function(act){switch(act){case"$last":case"$next":return this.currentIdx<this._lastIdx;case"$first":case"$previous":return this.currentIdx>0}},isEnabled:function(){return this._length>this.count},doAction:function(act){switch(act){case"$next":return this.next();case"$previous":return this.prev();case"$first":return this.first();case"$last":return this.last()}}}),_sortFilterExclude=["application/x-array","image","application/x-document","application/x-binary","application/x-object","text/rtf","text/html","text/plain"],_notImplemented=function(text){throw new Error("The following feature in not implemented -> "+text)},Builders={table:require("syracuse-tablet/html/js/controls/array/builderTable").Klass,card:require("syracuse-tablet/html/js/controls/array/builderCard").Klass,carousel:require("syracuse-tablet/html/js/controls/array/builderCarousel").Klass,separator:require("syracuse-tablet/html/js/controls/array/builderSeparator").Klass},_destroyArrayData=function(a){return!a||!a.$resources?null:(a.$resources.forEach(function(r){r&&r.destroy()}),null)},_Klass=utils.defineClass(function CtrlArray(controller,article,prototype,options){Base.call(this,controller,article,prototype,options),this._initArrayAuththoring(),this._newBuilder(options),this._arrayData=null;var savedContext=controller.getCtrlSavedContext(this.$bind);this._search=new SearchArray(savedContext?savedContext.$search:null),this._rowDetailCache={},this._rowDetailInfo=null,article.$arrayBgColor==null&&(article.$arrayBgColor=globals.CARDARRAYDEFCOLOR)},Base,{_initArrayAuththoring:function(){this.$display=this.controller.isEditMode()||!this.article.$display?"table":this.article.$display;var defaults;this.controller.isVignette?defaults={showPagination:!1,showSortFilter:!1}:this.controller.isChartDetailPage?defaults={showPagination:!1,showSortFilter:!1,showSearch:!1}:defaults={showPagination:!0,showSortFilter:!0,showSearch:!0},defaults.rowIndex=this.$display==="card",this.article.$arrayOptions=$.extend(defaults,this.article.$arrayOptions||{})},_newBuilder:function(options){this.$display==="carousel"&&(this.$display="card",options.displayAsCarousel=!0);var BuilderClass=Builders[this.$display=="card"?options.displayAsCarousel?"carousel":"card":this.$display];BuilderClass||(BuilderClass=Builders.table),options.acceptRowSelectAction==null&&(options.acceptRowSelectAction=!0),this.builder=new BuilderClass(this,this.$display,options)},isCarouselDisplay:function(){return this.$display==="card"&&this.options.displayAsCarousel===!0},getMode:function(){return this.builder&&this.builder.$display},initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this._arrayData&&(this._arrayData=_destroyArrayData(this._arrayData)),this.builder&&this.builder.initReuseProperties(),this.$$ttl=null},destroy:function(){this._multiSelStop(),this._rowDetailInfo=null,this._rowDetailCache=null,this._localPaginator&&(this._localPaginator.destroy(),this._localPaginator=null),Base.prototype.destroy.call(this),this.prototype=null,this.builder&&(this.builder.destroy(),this.builder=null),this._arrayData&&(this._arrayData=_destroyArrayData(this._arrayData),this._arrayData=null),this._waiting&&(uiUtils.waitWheelDestroy(this._waiting),this._waiting=null),this._filterSortPanel&&(this._filterSortPanel.destroy(),this._filterSortPanel=null),this._search&&(this._search.destroy(),this._search=null)},isArrayField:function(){return this.controller?!this.controller.prototype.isQueryLikeFacet():!1},isArrayChart:function(){return!1},buildHtml:function($$parent,controllerDao,buildOptions){if(this.builder==null)throw new Error("Null builder");if(this.builder.$display!==this.$display)throw new Error("Unexpected display type","Current display",this.builder.$display,"New display",this.$display);var css="s-m-"+this.$display;Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions,["s-m-array",css]),this._setArrayData(controllerDao,!1);var hasFilerSort=!this.isArrayField();hasFilerSort&&(this._filterSortPanel=this.controller.panelCreate(globals.PANELFILTERSORT,{parentArray:this,filter:!0,sort:!0})),this.builder.buildHtml(this._arrayData,buildOptions),this.prototype.isSingleArray()&&this.builder.isEmptySingleArray()&&(this.isEmpty=!0),this.isArrayField()&&!this._displayArray()&&(this.$$ttl==null||this.$$ttl.empty())&&this.$$elmt.hide()},refresh:function(controllerDao,options){this._rowDetailInfo=null,this._capabilities=null;if(this.builder==null)throw new Error("Null builder");this.builder.refresh(this._setArrayData(controllerDao,!0),options)},onResize:function(context){if(context&&context.footerSwipe===!0)return;if(!this.$$elmt||!this.$$elmt.is(":visible")){this._subscribedExpand||(this._subscribedExpand=!0,notifications.subscribe(this,["sm.layout.expanded"]));return}this._subscribedExpand&&(notifications.unsubscribe(this,["sm.layout.expanded"]),this._subscribedExpand=!1),this.builder.onResize(context),this.notifyVignetteArrayHosted()},_notifSelectedRow:function(rowId,rowData){notifications.notifyController("synch.sm.select.row",this.controller,this.id,rowId,rowData)},_actRowSelect:function(rowId,$$target){if(this._multiSelSelect($$target))return;var rowData=this.getRowById(rowId);if(!rowData)return;rowData=rowData.row;if(this.controller.isLookup()){var proto=$.extend({},!0,this.prototype.getDataByPath("$item")),data=$.extend({},!0,rowData.data);this._notifSelectedRow(rowId,{data:data,proto:proto})}else{var links=this.builder.$itemProto.data("$links"),forceLink=this.getAuthoring("$detailsLink"),link;forceLink==null&&(forceLink=this.controller.isVignette?"$queryfullpage":"$details");if(forceLink==="$queryfullpage"){if(!this.controller.isVignette)throw new Error("Vignette context expected");link={page:this.controller.state.name},this._forceArticle=this.article?this.article.$queryLinkArticle:null}else{var linkProto=links[forceLink]?links[forceLink]:links.$details;link=linkProto?sdataUtils.getLinkInfo(linkProto.$url,rowData):null,this._notifSelectedRow(rowId,rowData),this._forceArticle=this.article?this.article.$detailLinkArticle:null}if(link){var attrs={};attrs["data-nav"]=link.page,attrs["data-nav-target"]=this.controller.openLinkInVignette()?"vignette":"application",link.sDataUrl&&(attrs["data-sdata-url"]=link.sDataUrl);if(link.parameters){var params=utils.parseExpression(link.parameters,rowData);attrs["data-sdata-parameters"]=params}this._forceArticle&&(attrs["data-link-article"]=this.id),eventListener.triggerNavigation(this.$$elmt,attrs)}}},_openDetailRow:function(rowInfofId,activity){var self=this;try{var info=self._rowDetailCache[rowInfofId];if(!info)throw new Error("rowDetailGetDao - Unexpected null row info");var isRowCreation=activity==="create",pathBind=info.pathBind;isRowCreation&&pathBind.length>1&&_notImplemented("Creating row in an array embedded inside a card");var pathId=info.pathId,proto=self.prototype.parent,protoPath=["$properties"],dao=self.getDao();for(var i=0;i<pathBind.length;i++){protoPath.push(pathBind[i]),proto=proto.getPrototype(protoPath.join("."));var arrayData;if(self.$bind===pathBind[i])arrayData=self._arrayData;else{if(!dao)throw new Error("Unexpected null dao");arrayData=dao.getArrayData(pathBind[i],proto)}var res=self.getRowById(pathId[i],arrayData);if(!res){if(!isRowCreation)throw new Error("Unexpected empty row");res={row:daoSdata.getArrayEmptyRow(this.controller,proto,pathBind[i],dao)}}dao=res.row,protoPath=["$item.$properties"]}if(!dao||dao===self.getDao())return;var rowDetailDao=daoSdata.getDaoRowDetail(dao,self.controller,proto);pathBind=info.pathBind.join("."),self._rowDetailInfo={pathBind:pathBind,dao:rowDetailDao,activity:activity};var attrs={"data-control-id":self.id,"data-parent-id":self.controller.id,"data-nav":"rowdetail","data-params":dao.getValue("$uuid")};self.controller.isVignette&&(attrs["data-nav-target"]="vignette"),isRowCreation||notifications.notifyController("synch.sm.select.row",self.controller,self.id,dao.getValue("$uuid"),null),eventListener.triggerNavigation(self.$$elmt,attrs)}catch(e){globals.getModal().error("Error loading row detail page",e)}},_actRowDetail:function(rowInfofId,target,event){this._openDetailRow(rowInfofId,this.controller.isEditMode()?"edit":"read"),event&&event.stopPropagation()},_actRowCreate:function(rowInfofId){this._openDetailRow(rowInfofId,"create")},_actRowDelete:function(rowId){var self=this,info=self._rowDetailCache[rowId];if(!info)return;modal.simpleConfirm(locale.text("actions.del.confirm"),function(confirmed){if(confirmed){var pathBind=info.pathBind,pathId=info.pathId;while(pathBind.length!=0&&pathBind[0]!=self.$bind)pathBind.shift(),pathId.shift();if(pathBind.length==0)throw new Error("Unexpected null pathBind");var field=pathBind.pop();(pathBind.length>1||field!==self.$bind)&&_notImplemented("Deleting row in an array embedded inside a card"),self.removeRow(rowId)}})},removeRow:function(rowId){var array=this._arrayData;if(!array||!array.$resources||array.$resources.length==0)return;var idx=-1;array.$resources.some(function(r,i){if(r.getValue("$uuid")===rowId)return idx=i,!0});if(idx<0||idx>=array.$resources.length)return;array.$resources.splice(idx,1),this.builder.removeRowById(rowId),this.getDao().deleteRow(this.$bind,this.prototype.isSingleArray()?idx:rowId)},rowDetailAdd:function(id,data){this._rowDetailCache[id+""]=data},rowDetailGetInfo:function(create){return this._rowDetailInfo},childPageGetPageInfo:function(typePage){var pageInfo={home:!1,type:typePage,cached:!1,refreshed:!1,changeHash:!1};if(typePage==="rowdetail"){if(!this._rowDetailInfo)throw new Error("childPageGetPageInfo - Null details row data");pageInfo.prototype=this._rowDetailInfo.dao.prototype,pageInfo.subtype=this.controller.isEditMode()?"edit":"details",pageInfo.article=null,pageInfo.name=this.controller.state.name+"."+this._rowDetailInfo.pathBind}else typePage==="carddesign"&&(pageInfo.prototype=daoSdata.getProtoCardDesign(this),pageInfo.subtype="details",pageInfo.article=this.article.$card?this.article.$card:null,pageInfo.name=this.controller.state.name+"."+this.$bind+"."+typePage);return pageInfo},selectLastSelectedRow:function(rowId,show){this.builder.selectLastSelectedRow(rowId,show)},readArrayData:function(controllerDao){this.options.localPagination===!0&&this._localPaginator==null&&(this._localPaginator=this.createLocalPaginator(controllerDao),this._localPaginator==null&&(this.options.localPagination=!1));var res;this.prototype.isQuery()?res=controllerDao.getQueryData(this.prototype,this._localPaginator):this.prototype.isLookup()?res=controllerDao.getLookupData(this.prototype,this._localPaginator):res=controllerDao.getArrayData(this.$bind,this.prototype,this._localPaginator);if(!res||!res.$resources)res={$resources:[]};return res},hasLocalPagination:function(){return this._localPaginator!=null&&this._localPaginator.isEnabled()},createLocalPaginator:function(controllerDao){throw new Error("Not implemented")},getLocalPaginator:function(){return this._localPaginator},_actPagination:function(linkName,target,event){if(this._localPaginator)this._localPaginator.doAction(linkName),this.refresh(this.controller.dao);else{var attrs={"data-nav-refresh":!0,"data-nav-type":linkName,"data-sdata-url":this.prototype.resolveExpression(this.getArrayData().$links[linkName].$url),"data-control-id":this.id,"data-nav-target":this.controller.isVignette?"vignette":"application"};eventListener.triggerNavigation(this.$$elmt,attrs)}},_setArrayData:function(controllerDao,refresh){this._multiSelReset(),this.isEmpty=!0,this.hasLocalPagination()||_destroyArrayData(this._arrayData),this._arrayData=this.readArrayData(controllerDao),this.isEmpty=this._arrayData.$resources.length===0,this.$$elmt.toggleClass("empty",this.isEmpty),this.builder&&this.builder.notifyArrayDataChanged(refresh,this._arrayData,this.isEmpty),this.clearContent(refresh);if(!refresh){var title=this.getTitle();this._displayTitle(title)?(this.$$ttl||(this.$$ttl=$(uiUtils.createDomElement("div",["s-m-title"])).appendTo(this.$$elmt)),this.$$ttl.text(title)):this.$$ttl&&this.$$ttl.empty(),this.$$value=$(uiUtils.createDomElement("div",["s-m-value"],null,null,this.$$elmt)),this.$$value.before(this.$$header=$("<header/>"));if(this.$display==="card"){var bgColor=(this.article.$arrayBgColor||"").toLowerCase();bgColor.length>0&&(bgColor="s-m-color-"+bgColor),bgColor&&this.$$value.addClass("s-m-bg "+bgColor)}}return this._arrayData},clearContent:function(refresh){this.builder&&this.builder.notifClearContent(refresh),refresh?this.$$value.empty():this.$$elmt.empty()},_displayTitle:function(title){return title==null||title.trim().length===0?!1:this.getAuthoring("$isTitleHidden")===!0?!1:this._displayArray()},_displayArray:function(){return this.controller.isEditMode()===!0||this.isEmpty!==!0||this.getAuthoring("$displayIfEmpty")===!0},getArrayData:function(){return this._arrayData},getNbRecords:function(){return this._arrayData?this._arrayData.$resources.length:0},waitStart:function(){this._waiting||(this._waiting=uiUtils.waitWheelCreate(this.$$elmt.parent()),this._waiting.$$bckg.css({position:"absolute"}),this._waiting.$$wheel.css({position:"absolute"})),uiUtils.waitWheelStart(this._waiting)},waitStop:function(){this._waiting&&uiUtils.waitWheelStop(this._waiting)},getRowById:function(rowId,arrayData){var self=this;arrayData=arrayData||self._arrayData;if(!arrayData||!arrayData.$resources||arrayData.$resources.length==0)return null;var idx=0,result=null;return arrayData.$resources.some(function(r){if(r.getValue("$uuid")===rowId)return result=r,!0;idx++}),result?{row:result,idx:idx}:null},_getRowByIdx:function(idx,arrayData){return arrayData=arrayData||this._arrayData,idx=parseInt(idx,10),!arrayData||!arrayData.$resources||arrayData.$resources.length<=idx?null:{row:arrayData.$resources[idx],idx:idx}},savedCtxCreate:function(){if(!this.builder)return;var res={$builder:this.builder.savedCtxCreate()};return this._search&&(res.$search=this._search.savedCtxCreate()),res},savedCtxRestore:function(ctx){ctx&&ctx.$builder&&this.builder.savedCtxRestore(ctx.$builder)},getScrollViewRect:function(){if(this.controller.isVignette){var v=this.controller.getParentVignette();return v?v.getScrollViewRect():null}return this.controller.getMainContentRect()},rowId2Idx:function(uuid){if(!this._arrayData||!this._arrayData.$resources)return-1;var rowIdx=-1;return this._arrayData.$resources.some(function(r,idx){if(r.getValue("$uuid")===uuid)return rowIdx=idx,!0}),rowIdx},_actActionArray:function(id,param){if(id===globals.PANELFILTERSORT){this.controller.panelAttach("right",this._filterSortPanel,"toggle"),notifications.publish("sm.click.icon.filterSort",param.context);return}if(id==="filterSelected"){this.controller.$filtersSelect(param,this);return}if(id==="search"){this.getSearcher().search(this),this.controller.searchRefresh(this);return}if(id==="removeSearch"){this.getSearcher().removeSearch(this),this.controller.searchRefresh(this);return}},sortInfoGet:function(){var info=this.controller.filterSortRead("sort",this);if(info==null||info.length===0){var cols=this.builder.getColumnsInfo(!0);cols&&(info=[],cols.forEach(function(c){_sortFilterExclude.indexOf(c.$type)===-1&&c.$capabilities&&c.$capabilities.indexOf("sort")>=0&&info.push({name:c.$title,id:c.$bindValue,sort:"none"})})),this.sortInfoSet(info,!1)}return info},sortInfoSet:function(info,refresh){this.controller.filterSortWrite("sort",info,this,refresh)},filterInfoGet:function(){var info=this.controller.filterSortRead("filter",this);return info},filterInfoSet:function(info,refresh){this.controller.filterSortWrite("filter",info,this,refresh)},searchInfoGet:function(){return this.getSearcher().getSearchInfos()},filterMapGet:function(){var self=this,map=[],props=this.builder.getColumnsInfo(!1);return props&&props.forEach(function(prop){_sortFilterExclude.indexOf(prop.$type)===-1&&prop.$capabilities&&prop.$capabilities.indexOf("filter")>=0&&map.push({fieldName:prop.$title,operators:fieldOperators.getOperators(prop.$type),id:prop.$bindValue,prop:prop,isReference:prop.$type.indexOf("x-reference")>=0})}),map},getHeaderOptions:function(){var queryOrLookup=!this.isArrayField(),opts={};opts.filterEnabled=opts.sortEnabled=opts.paginEnabled=opts.searchEnabled=queryOrLookup,opts.searchEnabled=opts.searchEnabled&&!this.controller.offLine,opts.$filters=queryOrLookup&&this.controller.$filtersGet?this.controller.$filtersGet():null;if(this.controller.prototype.isRequest()||this.controller.prototype.isStatistics())opts.sortEnabled=opts.searchEnabled=opts.filterEnabled=!1,opts.$filters=null;return opts},$filtersGetAuthoring:function(){var auth=this.getAuthoring("$filters",this.controller.isVignette?"none":"list");return auth!=="none"&&globals.getSiteLayout().getDeviceType()==="smartphone"&&(auth="tabs"),auth},multiSelSetMgr:function(mgr){this._multiselHandler&&(this._multiselHandler=null),mgr&&(this._multiselHandler=jsutils.bindFn(mgr.callbackArray,mgr))},_multiSelStop:function(){this._multiselHandler&&this._multiselHandler(this,"$stopmultisel",null)},_multiSelReset:function(){this._multiselHandler&&this._multiselHandler(this,"$reset",null)},_multiSelSelect:function($$target){return this._multiselHandler?(this._multiselHandler(this,"$selectmultisel",$$target),!0):!1},_actMultiSelectionAction:function(params,$target){if(!this._multiselHandler)return;this._multiselHandler(this,params,$target)},authOnSlideMinSize:function(size,action){if(!this.builder.authMinSize2Pixels)return;if(this.builder.$display!="card"||!this._arrayData||this._arrayData.length>0)return;var value=this.builder.authMinSize2Pixels(size),left=(this.$$value.width()-value)/2+"px";value+="px";if(action=="start"){var height=this.$$value.find(this.$$value.find('[data-params="'+this._arrayData.$resources[0].getValue("$uuid")+'"]')).height();this.$$value.css({opacity:"0.3"}),this._$$cardSize=$('<div class="s-m-auth-minsize"><span>Min size'+value+"</span></div>").appendTo(this.$$elmt),this._$$cardSize.css({height:height+"px",width:value,top:(this.$$value.height()-height)/2+"px",left:left});return}if(action=="stop"){this.$$value.css({opacity:"inherit"}),this._$$cardSize.remove(),this._$$cardSize=null;return}if(action=="slide")return this._$$cardSize&&(this._$$cardSize.css({width:value,left:left}),this._minCardText||(this._minCardText=locale.text("array.minCardWidth")+" ",this._minCardSpan=this._$$cardSize.children("span")),this._minCardSpan.text(this._minCardText+value)),value},setCardAuthoring:function(article){this.article.$card=article,notifications.publish("sm.auth.change.item.prop.ui")},getLinkedPageArticle:function(){return this._forceArticle},notifLayoutExpanded:function(){var self=this;setTimeout(function(){self.onResize()})},getSearcher:function(){return this._search},checkCapabilities:function(value){if(value==null)return!0;if(!this._capabilities){this._capabilities={};var self=this;(this.getMetaData("$capabilities")||"").split(",").forEach(function(c){c=c.trim(),c.length>0&&(self._capabilities[c.trim()]=!0)})}return this._capabilities[value]===!0},getRowStatusInfo:function(){var type=this.getAuthoring("$statusEnabled");if(type==="mono"||type==="multi"){var status=this.getAuthoring("$status");return!status||status.length===0?null:{type:type,list:status}}return null},toggleCardStatusColor:function(disable){if(this.$display==="table")return;if(!this.getRowStatusInfo())return;var style=disable?"inherit":"";this.$$value.find(".s-m-status-color").css({"background-color":style,color:style})},getAvailableSize:function(){return{height:this.$$elmt.height()-this.$$header.height(),width:this.$$value.width()}},_actExternalLink:function(param){this.controller.externalLink(param)},setEmptyArrayMsg:function(){if(!this.isArrayField()){var title=this.getTitle();title&&$('<div class="s-m-no-data-title"/>').appendTo(this.$$value).text(title),$('<div class="s-m-no-data-label"/>').appendTo(this.$$value).text(locale.text("array.empty"))}},notifyVignetteArrayHosted:function(){if(this.isArrayField()||this.prototype.isLookup()||!this.controller.isVignette||!this.controller.getParentVignette())return;var parent=this.controller.getParentVignette().parent;if(parent&&parent.notifSpecialArrayHosted){var typeArray=this.isCarouselDisplay()?"carousel":this.$display;parent.notifSpecialArrayHosted(typeArray)}}});exports.Klass=_Klass,exports.LocalPaginator=_LocalPaginator}),define("syracuse-tablet/html/js/controls/chart/cubeChartsTheme",["require","exports","module"],function(require,exports,module){var theme={colors:["#BF7070","#BFB730","#7ABF30","#7373FF","#BF7730","#BF3080","#30BF9F","#FF7373","#FFF773","#85FF00","#3030BF","#FF9F40","#FF40BC","#1699A6","#FF0000","#FFF100","#00FF00","#0000FF","#FF7F00","#FF00A6","#00FFC6","#A60000","#A69C00","#56A600","#90B2FF","#A65200","#A6006C","#00A681","#FF4040","#FFF440","#A3FF40","#3673FF","#FFB873","#FF76CE","#73FFED"],chart:{borderRadius:"0",spacingTop:10,backgroundColor:"#fff",borderColor:"#ccc",borderWidth:1,className:"dark-container",resetZoomButton:{theme:{fill:"white",stroke:"#dddddd",r:0,states:{hover:{fill:"#00a1de",style:{color:"white"}}}},position:{x:-50,y:5},relativeTo:"chart"}},title:{style:{color:"#464646",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},subtitle:{style:{color:"#464646",font:'bold 12px "Trebuchet MS", Verdana, sans-serif'}},xAxis:{gridLineColor:"rgba(0, 0, 0, 0.05)",gridLineDashStyle:"longdash",gridLineWidth:1,labels:{style:{color:"#A0A0A0"}},lineColor:"rgba(0, 0, 0, 0.2)",tickColor:"rgba(0, 0, 0, 0.2)",title:{style:{color:"#464646",fontWeight:"bold",fontSize:"15px",fontFamily:"arial"}}},yAxis:{minorGridLineColor:"rgba(0, 0, 0, 0.05)",minorTickInterval:"auto",gridLineWidth:2,gridLineColor:"rgba(0, 0, 0, 0.07)",labels:{align:"left",x:0,y:12,style:{color:"#A0A0A0"}},lineColor:"rgba(0, 0, 0, 0.07)",title:{style:{color:"#CCC",fontSize:"16px",fontFamily:"Georgia, Verdana, sans-serif",fontStyle:"italic"}}},tooltip:{backgroundColor:"#464646",borderRadius:"0",style:{color:"#fff",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"silver"}},plotOptions:{series:{marker:{lineWidth:2,lineColor:null,radius:4,states:{hover:{radius:8,lineColor:null}}}},area:{fillOpacity:.15},areaspline:{fillOpacity:.15},line:{dataLabels:{color:"#CCC"},marker:{lineColor:"#FFFFFF"}},spline:{marker:{lineColor:"#FFFFFF"}},scatter:{marker:{lineColor:"#FFFFFF"}},candlestick:{lineColor:"#FFFFFF",animation:{duration:2e3,easing:"easeOutBounce"}},pie:{allowPointSelect:!0,cursor:"pointer",borderColor:"rgba(250,250,250,0.3)",borderWidth:.5,dataLabels:{enabled:!0,connectorWidth:2,color:"#464646",style:{fontWeight:"bold"}}}},legend:{borderRadius:0,borderWidth:1,backgroundColor:"white",itemMarginTop:8,itemStyle:{color:"#464646",fontFamily:'"arial"',fontWeight:"bold",fontSize:"8pt "},itemHoverStyle:{color:"#00a1de"},itemHiddenStyle:{color:"#555"},title:{style:{color:"#464646",fontWeight:"bold",fontSize:"8pt",fontFamily:"arial"}}},credits:{enabled:!1,style:{color:"#666"}},labels:{style:{color:"#CCC"}},exporting:{buttons:{drillUp:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"},exportButton:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"},printButton:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"}}},rangeSelector:{buttonTheme:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},stroke:"#000000",style:{color:"#CCC",fontWeight:"bold"},states:{hover:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#BBB"],[.6,"#888"]]},stroke:"#000000",style:{color:"white"}},select:{fill:{linearGradient:[0,0,0,20],stops:[[.1,"#000"],[.3,"#333"]]},stroke:"#000000",style:{color:"yellow"}}}},inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(16, 16, 16, 0.5)",series:{color:"#7798BF",lineColor:"#A6C7ED"}},scrollbar:{barBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},barBorderColor:"#CCC",buttonArrowColor:"#CCC",buttonBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},buttonBorderColor:"#CCC",rifleColor:"#FFF",trackBackgroundColor:{linearGradient:[0,0,0,10],stops:[[0,"#000"],[1,"#333"]]},trackBorderColor:"#666"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",legendBackgroundColorSolid:"rgb(35, 35, 70)",dataLabelsColor:"#444",textColor:"#C0C0C0",maskColor:"rgba(255,255,255,0.3)"},colors=theme.colors;theme.orgChart={node:{textColor:"black ",borderColor:colors[1],borderWidth:2,backgroundColor:"white ",fontWeight:"normal ",hover:{backgroundColor:colors[3],textColor:"white "}},junction:{lineColor:colors[3],lineWidth:2},dropMarker:{borderColor:colors[1],borderWidth:0,backgroundColor:colors[4],backgroundOpacity:1},tooltip:{backgroundColor:colors[1],backgroundOpacity:1,borderWidth:2,borderRadius:0,borderColor:colors[2],style:{color:"#fff",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}}},theme.version=Highcharts.version.split(".").map(function(e){return parseInt(e,10)}),theme.version[0]!==2&&theme.version[0]===3&&(theme.navigation={buttonOptions:{symbolStroke:"#DDDDDD",hoverSymbolStroke:"#FFFFFF",theme:{fill:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#606060"],[.6,"#333333"]]},stroke:"#000000"}}},delete theme.exporting),exports.theme=theme}),define("syracuse-tablet/html/js/controls/array/builderChartBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/controls/chart/cubeChartsTheme","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals"],function(require,exports,module){function _isCubeValid(cube,proto){return!!(cube&&cube.$hierarchies&&proto.$axes&&proto.$axes.length>0&&proto.$axes[0].$hierarchies&&proto.$axes[0].$hierarchies.length>0)}var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/array/builderBase").Klass,formatApi=require("syracuse-tablet/html/js/helpers/formatApi"),theme=require("syracuse-tablet/html/js/controls/chart/cubeChartsTheme").theme,locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),_merge=Highcharts.merge,objectClone=function(o){return $.extend({},o)};Highcharts.theme=theme,Highcharts.setOptions(Highcharts.theme);var colors=Highcharts.theme.colors,_style=function($style){var map={xy:"line",point:"scatter",stick:"column",radar:"spiderweb"};return $style&&(map[$style]||$style)},_Klass=utils.defineClass(function(control,disp,options){Base.call(this,control,disp,options),this.$prototype=control.prototype.json,this.$prototype.$properties=this.$prototype.$item.$properties,this._localize={highCharts_showHideLegend:locale.text("highCharts_showHideLegend"),highCharts_seriesTitle:locale.text("highCharts_seriesTitle")},this._initializeMeta()},Base,{destroy:function(){Base.prototype.destroy.call(this),this.clearChart(),this._localize=this._meta=this._dataset=this.$prototype=this.currentMetaData=null},clearChart:function(){this.highchartObject&&this.highchartObject.destroy(),this.highchartObject=null},_mergeMetaData:function(metadata){var m={};return metadata&&metadata.$chartOptions&&(metadata.$isXLabelsHidden=metadata.$chartOptions.isXLabelsHidden||!1,metadata.$isYLabelsHidden=metadata.$chartOptions.isYLabelsHidden||!1,metadata.$isXLabelHidden=metadata.$chartOptions.isXLabelHidden||!1,metadata.$isYLabelHidden=metadata.$chartOptions.isYLabelHidden||!1,metadata.$isLegendHidden=metadata.$chartOptions.isLegendHidden||!1,metadata.$isGridLineHidden=metadata.$chartOptions.isGridLineHidden||!1,metadata.$isTitleHidden=metadata.$chartOptions.isTitleHidden||!1,metadata.$isLabelsHidden=metadata.$chartOptions.isLabelsHidden||!1),metadata&&metadata.$axisLabels&&(m.$axisLabels=metadata.$axisLabels),metadata&&metadata.$cube&&(m.$cube=metadata.$cube),metadata&&metadata.$axes&&(m.$axes=metadata.$axes),metadata&&metadata.$style&&(m.$style=metadata.$style),metadata&&metadata.$color&&(m.$color=metadata.$color),metadata&&metadata.$isLegendHidden&&(m.$isLegendHidden=metadata.$isLegendHidden),metadata&&metadata.$isXLabelHidden&&(m.$isXLabelHidden=metadata.$isXLabelHidden),metadata&&metadata.$isYLabelHidden&&(m.$isYLabelHidden=metadata.$isYLabelHidden),metadata&&metadata.$isXLabelsHidden&&(m.$isXLabelsHidden=metadata.$isXLabelsHidden),metadata&&metadata.$isYLabelsHidden&&(m.$isYLabelsHidden=metadata.$isYLabelsHidden),metadata&&metadata.$isGridLineHidden&&(m.$isGridLineHidden=metadata.$isGridLineHidden),metadata&&metadata.$isTitleHidden&&(m.$isTitleHidden=metadata.$isTitleHidden),metadata&&metadata.$isLabelsHidden&&(m.$isLabelsHidden=metadata.$isLabelsHidden),metadata&&metadata.$inverted&&(m.$inverted=metadata.$inverted),metadata&&metadata.$seriesOptions&&(m.$cube=m.$cube||{},m.$cube.$measures=m.$cube.$measures||{},Object.keys(metadata.$seriesOptions).forEach(function(key){metadata.$seriesOptions[key]&&(m.$cube.$measures[key]=m.$cube.$measures[key]||{},metadata.$seriesOptions[key].color&&(m.$cube.$measures[key].$color=metadata.$seriesOptions[key].color.bgColor),m.$cube.$measures[key].$isHidden=metadata.$seriesOptions[key].isHidden)})),this.currentMetaData=_merge(this.currentMetaData||{},m),metadata&&metadata.$item&&metadata.$item.$properties&&this.currentMetaData&&this.currentMetaData.$cube&&this.currentMetaData.$cube.$measures&&$.smForEachKey(this.currentMetaData.$cube.$measures,function(key,m){metadata.$item.$properties[key]&&metadata.$item.$properties[key].$title?m.$title=metadata.$item.$properties[key].$title:m.$title=key}),this.currentMetaData},getDataSet:function(){return this._dataset||[]},_ensureFormatter:function(measure){measure.formatApi={format:function(val,localFormat){return val}}},_localizedText:function(key){return key},_getFieldEvalTitle:function(){return[]},notifyArrayDataChanged:function(refresh,arrayData,isEmpty){Base.prototype.notifyArrayDataChanged.call(this,refresh,arrayData,isEmpty);var chartDataset=[];arrayData&&arrayData.$resources&&arrayData.$resources.forEach(function(dao){chartDataset.push(dao.data)}),this._dataset=chartDataset},_settingsFromValue:function(){var self=this,$cube=this.currentMetaData.$cube,icolor=0,settings,dataset=self.getDataSet();return $cube&&$cube.$style==="spiderweb"?(settings={},settings.categories=Object.keys(self._meta.series).map(function(key){return self._meta.series[key].options.name}),settings.series={},dataset&&dataset.reduce(function(res,current){var serie={name:self._getMeasureLabel(current,self._meta.xAxis[0].code),color:colors[icolor++],data:[],pointPlacement:"on"};return serie.name&&(serie.id="#s-"+serie.name,$.smForEachKey(self._meta.series,function(key,s){s.isHidden||self._pushData(serie,key,key,current)}),res.series[serie.name]=serie),res},settings)):(settings={categories:[],series:{}},dataset&&dataset.reduce(function(res,current){var categoryName=self._getMeasureLabel(current,self._meta.xAxis[0].code);return categoryName!=null&&(res.categories.push(categoryName),$.smForEachKey(self._meta.series,function(key,s){var serie=res.series[key];serie||(serie=objectClone(s.options),serie.data=[],res.series[key]=serie),self._pushData(serie,categoryName,key,current)})),res},settings)),settings},_pushData:function(serie,categoryName,key,data){var val=parseFloat(data.$rawV&&data.$rawV[key]&&data.$rawV[key].v||data[key])||0;this.useLogarithmicAxis&&(this.maxValue=Math.max(this.maxValue||-Infinity,val),this.minValue=Math.min(this.maxValue||Infinity,val)),serie.data.push([categoryName,val])},createChart:function(settings,$$parent,options){var self=this,options=_merge(self._getPref(),self._getOptions(self.$prototype,$$parent,options));self.highchartObject&&self.clearChart(),settings?(options.xAxis[0].categories=settings.categories,$.smForEachKey(settings.series,function(key,s){var serie=objectClone(s),serieMeta=self._meta.series[key];options.chart.polar&&serie&&serie.type&&delete serie.type,(!serieMeta||!serieMeta.isHidden)&&!(serieMeta&&serieMeta.options&&serieMeta.options.isHidden)&&options.series.push(serie)})):$.smForEachKey(self._meta.series,function(key,s){var serie=objectClone(s.options);options.chart.polar&&serie&&serie.type&&delete serie.type,serie.data=[0],s.isHidden||options.series.push(serie)}),(!self.$prototype.$cube||self.$prototype.$cube.$style!="spiderweb")&&options.series.reverse(),this.useLogarithmicAxis&&(this.maxValue||0)/(this.minValue||1)>10&&(options.yAxis.type="logarithmic"),self.highchartObject=new Highcharts.Chart(options);var legend=this.highchartObject.legend;self.displayLegend=legend&&legend.display;var chartSeries=self.highchartObject.series,serie,serieMeta;for(var j=chartSeries.length-1;j>=0;j--)serie=chartSeries[j],serieMeta=serie&&serie.options.id&&self._meta.series[serie.options.id.slice(3)],serieMeta&&serieMeta.measure&&(serieMeta.measure.$color=serieMeta.options.color=serie.color)},_getOptions:function(proto,$$parent,options){options=options||{};var self=this,$cube=this.currentMetaData.$cube,defOptions=Highcharts.getOptions(),buttons=defOptions.exporting.buttons,enuml,$style=this.currentMetaData.$style||$cube&&$cube.$style||proto.$cube&&proto.$cube.$style,measuresTitle=this._getFieldEvalTitle(),axe=proto.$axes&&proto.$axes[0]||{},axeTitle=axe.$hierarchies&&measuresTitle[axe.$hierarchies[0][0]]||axe.$title;this.currentMetaData.$axisLabels&&this.currentMetaData.$axisLabels[this.getCurrentDrillLevel()]&&(axeTitle=this.$prototype.$properties[this.currentMetaData.$axisLabels[this.getCurrentDrillLevel()]].$title);var margin={top:this.currentMetaData.$isTitleHidden&&$style!=="bar"?0:null,bottom:this.currentMetaData.$isXLabelsHidden&&$style!=="bar"?0:null,left:this.currentMetaData.$isYLabelsHidden&&$style!=="bar"?2:null},legend={};globals.getSiteLayout().getDeviceType()==="smartphone"&&(legend.layout="horizontal",legend.align="center",legend.verticalAlign="bottom",legend.floating="bottom",legend.notitle=!0);var options={chart:{renderTo:$$parent.get(0),reflow:!1,zoomType:options.zoomType||"x",ignoreHiddenSeries:!1,width:options.width,height:options.height,inverted:this.currentMetaData.$inverted,marginTop:margin.top,marginBottom:this.currentMetaData.$inverted?margin.left:margin.bottom,marginLeft:this.currentMetaData.$inverted?margin.bottom:margin.left,marginRight:this.currentMetaData.$inverted?margin.bottom:margin.left,events:{load:options.onComplete}},lang:{showHideLegend:self._localize.highCharts_showHideLegend},legend:{layout:legend.layout?legend.layout:"vertical",align:legend.align?legend.align:"right",verticalAlign:legend.verticalAlign?legend.verticalAlign:"top",y:legend.notitle?0:60,x:legend.notitle?0:-10,title:{text:legend.notitle?"":":::: "+self._localize.highCharts_seriesTitle},borderWidth:legend.notitle?0:1,floating:legend.notitle?!1:!0,draggable:legend.notitle?!1:!0,zIndex:20,enabled:this.currentMetaData.$isLegendHidden!==!0&&$style!=="pie"},title:{text:!this.currentMetaData.$isTitleHidden&&$cube&&self._localizedText($cube.$title)||null},subtitle:{text:null},xAxis:[{categories:[],title:{text:!this.currentMetaData.$isXLabelHidden&&self._localizedText(axeTitle)||null},labels:{rotation:-45,align:"right",enabled:this.currentMetaData.$isXLabelsHidden!==!0},gridLineWidth:this.currentMetaData.$isGridLineHidden?0:1,minorGridLineWidth:this.currentMetaData.$isGridLineHidden?0:1,lineWidth:this.currentMetaData.$isGridLineHidden?0:1,tickWidth:this.currentMetaData.$isXLabelsHidden?0:1}],yAxis:[{title:{text:null},labels:{align:"right",enabled:this.currentMetaData.$isYLabelsHidden!==!0},gridLineWidth:this.currentMetaData.$isGridLineHidden?0:1,minorGridLineWidth:this.currentMetaData.$isGridLineHidden?0:1,lineWidth:this.currentMetaData.$isGridLineHidden?0:1,tickWidth:this.currentMetaData.$isYLabelsHidden?0:1}],plotOptions:{series:{pointPadding:0,groupPadding:.1,cursor:"pointer",events:{},point:{events:{click:function(event){}}},stacking:self._meta.stacking,animation:!1}},tooltip:{formatter:function(){var seriesMeta=self._meta.series,serie=this.key&&seriesMeta[this.key]||seriesMeta[this.series.options.id.slice(3)],measure=serie&&serie.measure,data=this.series.processedYData,y=this.y;measure&&self._ensureFormatter(measure);var label=this.series.name||measure&&measure.$title,mformat=measure&&measure.formatter;label=(label?label+"<br>":"")+(this.x||this.key)+": <b> "+(mformat?mformat.format(y):y)+"</b>";if(measure&&measure.$isNormalized&&data.length>0){var sum=data.reduce(function(a,b){return a+b});label+=" ("+(mformat?mformat.formatValue(y/sum*100):y/sum*100)+"%)"}return label}},series:[]};$style==="pie"&&(options.plotOptions.pie=options.plotOptions.pie||{},options.plotOptions.pie.dataLabels=options.plotOptions.pie.datalabels||{},options.plotOptions.pie.dataLabels.enabled=this.currentMetaData.$isLabelsHidden?!1:!0);if(Highcharts.theme.version[0]===3){options.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{symbol:"menu",enabled:!1,_titleKey:"contextButtonTitle",menuItems:[{textKey:"showHideLegend",onclick:function(){setTimeout(function(){self._toggleLegendDisplay()},100)}}]},legendButton:{enabled:!1,textKey:"showHideLegend",symbol:"menu",onclick:function(){setTimeout(function(){self._toggleLegendDisplay()},100)}}}};var menuItems=options.exporting.buttons.contextButton.menuItems||[];this._printSupported()&&menuItems.push({text:"Print chart",onclick:function(){this.print(self)}}),this._exportSupported()&&(menuItems.push({separator:!0}),menuItems.push({textKey:"downloadPNG",onclick:function(){this.exportChart()}}),menuItems.push({textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}}),menuItems.push({textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}}),menuItems.push({textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}))}return options.xAxis[0].title.text!==options.title.text&&(options.xAxis[0].title.text=options.xAxis[0].title.text?options.xAxis[0].title.text:options.title.text),options.chart.type=self._meta.defaultStyle,options},_initializeMeta:function(){this._mergeMetaData(this.$prototype),this._mergeMetaData(this.$articleArray);var proto=this.$prototype,cube=this.currentMetaData;this._meta={xAxis:[{}],series:{},displaysOneMeasure:cube&&cube.$displaysOneMeasure,hasMeasureSelector:cube&&cube.$hasMeasureSelector,hasStyleSelector:cube&&cube.$hasStyleSelector,defaultStyle:_style(cube.$style)||"column",drill:{minLevel:1,maxLevel:0,currLevel:1,currAxisHier:0,levelsProperties:[],members:[],stack:[{$axes:proto.$axes,$item:proto.$item,$slicer:proto.$slicer}]}},this.__processMeta(proto,!0)},_exportSupported:function(){return!0},_printSupported:function(){return!0},__processMeta:function(metaData,init){this._processMeasures(metaData,init),this._processAxes(metaData,init)},_processMeasures:function(metaData,init){this._mergeMetaData(metaData);var self=this,items=this.$prototype.$properties,measures=this._getRestraintMeasures(),icolor=0;measures&&$.smForEachKey(measures,function(key,m){var code=m.$property||key,measure=_merge(items[code],m);metaData&&metaData.$item&&metaData.$item.$properties&&(measure=_merge(measure,metaData.$item.$properties[code]));if(!measure.$title||measure.$title==="")measure.$title=key;var serie=self._meta.series[code];init&&(self._ensureFormatter(measure),serie=self._meta.series[code]={options:{id:"#s-"+code,name:self._localizedText(measure.$title)||String.fromCharCode(160)},measure:measure}),serie&&(serie.isHidden=measure.$title==="",serie.options.type=_style(measure.$style),serie.options.color=measure.$color||colors[icolor++],serie.options.name=self._localizedText(measure.$title)||String.fromCharCode(160),serie.options.visible=measure.$title!==""&&(!self._meta.displaysOneMeasure||!!measure.$isDefault),serie.options.isHidden=measure.$isHidden);if(measure.$isStacked||measure.$stackingGroup)serie.options.stack=measure.$stackingGroup||0,self._meta.stacking=measure.$isNormalized?"percent":self._meta.stacking||"normal"})},_getRestraintMeasures:function(){var proto=this.currentMetaData,$cube=proto.$cube,measures=$cube&&$cube.$measures,restraintMeasures=measures;return measures&&proto.$axes&&proto.$axes.length>1&&proto.$axes[1].$members&&proto.$axes[1].$members[0][0].length>0&&(restraintMeasures={},$.smForEach(proto.$axes[1].$members[0][0],function(measureCode){restraintMeasures[measureCode]=measures[measureCode]})),restraintMeasures},_processAxes:function(proto,init){var cube=this.$prototype.$cube;if(!_isCubeValid(cube,proto))return!1;var self=this,currAxisHier=0,axis0=proto.$axes&&proto.$axes[0],mainHLevelsTab=null;if(axis0){$.smForEachKey(axis0.$hierarchies,function(idx,hierarchy){!mainHLevelsTab&&hierarchy.length>1&&hierarchy[1]==1&&(mainHLevelsTab=cube.$hierarchies[hierarchy[0]].$properties,mainHLevelsTab&&(self._meta.xAxis[0].code=mainHLevelsTab[hierarchy.length>2?hierarchy[2]:0],currAxisHier=idx))}),!mainHLevelsTab&&axis0.$hierarchies[0].length>0&&(mainHLevelsTab=cube.$hierarchies[axis0.$hierarchies[0][0]].$properties,mainHLevelsTab&&mainHLevelsTab.length>0&&(self._meta.xAxis[0].code=mainHLevelsTab[0]));var properties;$.smForEach(axis0.$hierarchies,function(hierarchie){properties=cube.$hierarchies[hierarchie[0]].$properties,$.smForEach(properties,function(property){this.levelsProperties[this.maxLevel++]=property},self._meta.drill)}),axis0.$members&&$.smForEach(axis0.$members,function(tuple){$.smForEach(tuple,function(value){value.length>0&&(this.members[this.currLevel++ -1]=value[0])},this)},self._meta.drill)}self._meta.drill.code=proto.$codeStat||"UNKNOWN",self._meta.drill.axis0FieldCode=self._meta.xAxis[0].code||"",self._meta.drill.maxLevel=Math.max(self._meta.drill.maxLevel,self._meta.drill.minLevel)},_getPref:function(){return Highcharts.getOptions()},_getMeasureLabel:function(measure,code){var self=this,label=this._localizedText(measure.$title);if(label)return label;var articleLabelCode=this.currentMetaData.$axisLabels?this.currentMetaData.$axisLabels[this.getCurrentDrillLevel()]:null;code=articleLabelCode||code;if(!measure[code])return"";var item=self.$prototype.$properties[code];if(!item)return null;switch(item.$type){case"application/x-choice":label=measure[code],item.$value.$enum.some(function(element,i,array){return element.$value===label?(label=self._localizedText(element.$title),!0):!1});break;case"application/x-date":item.formatter=formatApi.getFormatter(item.$type,locale.getDateFormat(item.$type)),label=item.formatter.formatValue(measure[code]);break;case"application/x-integer":case"application/x-decimal":item.formatter=formatApi.getFormatter(item.$type,locale.getNumberFormat(item.$type)),label=item.formatter.formatValue(measure[code]);break;default:label=""+measure[code]}return label},getCurrentDrillLevel:function(){return this._meta&&this._meta.drill?this._meta.drill.currLevel:0},_toggleLegendDisplay:function(){var legend=this.highchartObject.legend;legend&&this._displayLegend(!legend.display)},_displayLegend:function(display){var legend=this.highchartObject.legend;if(!legend)return;display?(legend.group.show(),legend.box.show()):(legend.group.hide(),legend.box.hide()),this.displayLegend=legend.display=display}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/builderChart",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/controls/array/builderChartBase","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),locale=require("syracuse-tablet/html/js/helpers/locale"),Base=require("syracuse-tablet/html/js/controls/array/builderChartBase").Klass,notifications=require("syracuse-tablet/html/js/helpers/notifications"),_getHeight=function(h){return h==="xsmall"?50:h==="small"?100:h==="medium"?200:h==="large"?400:h==="xlarge"?700:200},_Klass=utils.defineClass(function(control,disp,options){Base.call(this,control,disp,options)},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.resetProps(!1)},destroy:function(){Base.prototype.destroy.call(this),this._$$chartSlot=this._$$catchEvt=null},buildHtml:function(arrayData,buildOpts){Base.prototype.buildHtml.call(this,arrayData,buildOpts);var article=this.$articleArray;this._height=_getHeight(article.$chartHeight),this._$$chartSlot=$('<div class="s-m-slot"/>').appendTo(this.control.$$value);if(this.getDataSet().length>0){if(globals.isAuthoringActive()||this.control.isOpenDetailEnabled())this._$$catchEvt=$('<div class="s-m-catchevt"/>').appendTo(this.control.$$value),this.control.isOpenDetailEnabled()&&this.control.addChartDetailLink(this._$$catchEvt)}else{var title=this.control.prototype.getDataByPath("$cube.$title");title&&$('<div class="s-m-no-data-title"/>').appendTo(this._$$chartSlot).text(title),$('<div class="s-m-no-data-label"/>').appendTo(this._$$chartSlot).text(locale.text("label.chart.nodata")),this._$$chartSlot.css("position","relative")}this.refreshHeaderAndGesture(),this.isRefreshContext(buildOpts)&&this._displayChart(!1,!0)},onResize:function(context){if(this.control.destroyed)return;var dataset=this.getDataSet();if(dataset==null||dataset.length===0){this._notifyChartCounter();return}if(!this.control.$$value||!this.control.$$value.is(":visible"))this._subscribedExpand||(this._subscribedExpand=!0,notifications.subscribe(this,["sm.layout.expanded"]));this._layouytType==null&&(this.control.isChartDetailPage()?this._layouytType="stack":this._layouytType=this.control.controller.getParentDashboardType()),this._displayChart(!0,!1)},_checkHeaderHeight:function(height){if(this.control.$$header.is(":visible")){var hh=this.control.$$header.height();if(height==null){var css={top:hh+"px",height:this.control.$$value.height()-hh+"px"};this._$$chartSlot.css(css),this._$$catchEvt&&this._$$catchEvt.css(css)}else height-=hh}return height},_displayChart:function(updtScroller,isRefresh){if(this.control.destroyed||!this._$$chartSlot)return;var self=this;setTimeout(function(){var stackController,height;if(self._layouytType==="stack"){self._$$chartSlot.css("position","relative");if(self.control.isChartDetailPage())stackController=self.control.controller,height=stackController.getMainContentRect().height-10;else{if(!self.control.controller.isVignette)throw new Error("Charts are not allowed in pages other than pages nested in vignettes");stackController=self.control.controller.getParentVignette().controller,height=Math.min(self._height,stackController.getMainContentRect().height-10)}}else height=null;height=self._checkHeaderHeight(height),self.createChart(self._settingsFromValue(),self._$$chartSlot,{height:height,width:null,onComplete:function(){isRefresh||self._notifyChartCounter()}}),updtScroller&&stackController&&notifications.notifyController("sm.scroller.update",stackController)},10)},notifClearContent:function(refresh){this.clearChart()},notifLayoutExpanded:function(){this._displayChart(!1,!1)},_notifyChartCounter:function(){globals.getCurrentPage().countChartLoaded&&globals.getCurrentPage().countChartLoaded(this)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/ctrlArrayChart",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/array/ctrlArray","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/controls/array/builderChart","syracuse-tablet/html/js/controls/chart/chartUserPrefs","syracuse-tablet/html/js/controls/chart/chartsUtils","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),array=require("syracuse-tablet/html/js/controls/array/ctrlArray"),Base=array.Klass,locale=require("syracuse-tablet/html/js/helpers/locale"),BuiderCart=require("syracuse-tablet/html/js/controls/array/builderChart").Klass,chartUserPrefs=require("syracuse-tablet/html/js/controls/chart/chartUserPrefs"),chartsUtils=require("syracuse-tablet/html/js/controls/chart/chartsUtils"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_findChartArticle=function(article,$bind){var self=this,chartNode=_traverseArticleNodes(article,function(node){if(node.$bind===$bind&&node.$display==="chart")return!0});return chartNode},_findArrayArticle=function(article,$bind){var chartArray=_traverseArticleNodes(article,function(node){if(node.$bind===$bind&&node.$display!=="chart")return!0});return chartArray},_traverseArticleNodes=function(node,matcher){if(matcher(node)===!0)return node;if(node.$items&&node.$items.length>0){var i,match;for(i=0;i<node.$items.length;i++){match=_traverseArticleNodes(node.$items[i],matcher);if(match)return match}}return null},_Klass=utils.defineClass(function CtrlArrayChart(controller,article,prototype,options){options=options||{},options.localPagination=prototype.isCube(),article.$arrayOptions=article.$arrayOptions||{},article.$arrayOptions.showSortFilter=!1,article.$arrayOptions.showSearch=!1,article.$display||(article.$display="chart"),Base.call(this,controller,article,prototype,options)},Base,{destroy:function(){Base.prototype.destroy.call(this),this._paginSynchro=null},isArrayChart:function(){return!0},buildHtml:function($$parent,controllerDao,buildOptions){Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions),this.isHighChart()?this.$$elmt.addClass("s-m-chart"):(this.isOpenDetailEnabled()&&this.addChartDetailLink(this.$$value),this.$$elmt.addClass("s-m-chart-array"))},isOpenDetailEnabled:function(){return this.isChartDetailPage()?!1:this.isCarouselDisplay()?!1:this.controller.isVignette?this.article.$openDetail!==!1:!0},addChartDetailLink:function($$elmt){$$elmt.attr("data-control-id",this.id).attr("data-action",globals.ACTCHARTDETAIL)},isChartDetailPage:function(){return this.controller.state.type==="chartdetail"},isHighChart:function(){return this.$display==="chart"},_newBuilder:function(options){options.acceptRowSelectAction=!1,this.isHighChart()?(this.$$value&&this.$$value.empty(),this.builder=new BuiderCart(this,this.$display,options)):Base.prototype._newBuilder.call(this,options)},_actChartDetail:function(){if(this.isEmpty)return;this.triggerOpenChartDetail()},_setArrayData:function(controllerDao,refresh){var res=Base.prototype._setArrayData.call(this,controllerDao,refresh);return this.$$ttl&&this.$$ttl.removeClass("s-m-no-data-title"),res},getTitle:function(){return this.isHighChart()?Base.prototype.getTitle.call(this):this._findTitle()},_findTitle:function(proto){proto=proto||this.prototype;var $title=proto.data("$title");if($title)return $title;var $cube=proto.data("$cube");return $title=$cube&&$cube.$title,$title?$title:proto.parent?this._findTitle(proto.parent):""},_displayTitle:function(title){return title==null||title.trim().length===0||this.getAuthoring("$isTitleHidden")===!0?!1:!0},setEmptyArrayMsg:function(){this.isArrayField()||(this.$$ttl&&this.$$ttl.addClass("s-m-no-data-title"),$('<div class="s-m-no-data-label"/>').appendTo(this.$$value).text(locale.text("label.chart.nodata")))},createLocalPaginator:function(controllerDao){if(!this.prototype.isCube())return null;var gadget=this.controller.state.type=="chartdetail"?this.controller.parentPage.gadget:this.controller.gadget;if(!gadget)return null;var rsrcs=controllerDao.getValue(this.$bind);if(!rsrcs)return null;var count=gadget.parameters&&gadget.parameters.count!=null?gadget.parameters.count:10;return rsrcs.length<=count?null:new array.LocalPaginator(this,{count:count,length:rsrcs.length})},_getChartDetailUserPrefsId:function(){var id=[];if(this.controller.isVignette&&this.controller.getParentVignette()){var vignette=this.controller.getParentVignette(),prototype=vignette.prototype,uuid=vignette.controller.state.dashboardName||vignette.controller.state.name;uuid&&id.push(uuid),uuid=prototype.data("$uuid"),uuid&&(id.push("-"),id.push(uuid))}return id.length===0&&(id.push(this.$bind),id.push("-"),id.push(this.controller.getOriginalSdataUrl())),id.join("")},triggerOpenChartDetail:function(){if(!this.$$elmt)return;var attrs={"data-control-id":this.id,"data-parent-id":this.controller.id,"data-nav":"chartdetail","data-nav-target":"application","data-sdata-url":this.controller.getOriginalSdataUrl(),"data-params":this._getChartDetailUserPrefsId()};eventListener.triggerNavigation(this.$$elmt,attrs)},setChartDetailAuthoring:function(article){this.article.$chartDetail=article,notifications.publish("sm.auth.change.item.prop.ui")},childPageGetPageInfo:function(typePage){return typePage==="chartdetail"?this._getChartDetailPageInfo(typePage):Base.prototype.childPageGetPageInfo.call(this,typePage)},_getChartDetailPageInfo:function(typePage){var pageInfo={home:!1,type:typePage,cached:!1,refreshed:!1,changeHash:!1},userPrefs=chartUserPrefs.createChartDetailPrefs(this._getChartDetailUserPrefsId());globals.isAuthoringActive()&&userPrefs.reset();var opt=userPrefs.getPrefs()||{},article=this.article.$chartDetail,chartArticle=article&&_findChartArticle(article,this.$bind),arrayArticle=article&&_findArrayArticle(article,this.$bind);article=chartsUtils.getChartDetailArticle(opt,this.$bind,chartArticle,arrayArticle);var protoJson=$.extend(!0,{},this.controller.prototype.json);protoJson.$title=this.prototype.getDataByPath("$cube.$title")||locale.text("chartdetail.page.name"),pageInfo.prototype=this.prototype.create(protoJson,!0),pageInfo.subtype="details",pageInfo.article=article;var parentVignette=this.controller.getParentVignette();if(!parentVignette)throw new Error("Chart detail is allowed only in dashboards");var parentDashboardName=parentVignette.controller.prototype.getDataByPath("$dashboardName");return pageInfo.name=parentDashboardName+"_"+parentVignette.$bind+".$"+typePage,pageInfo},chartNeedsHeight:function(){return this.$display==="chart"&&this._layouytType==="stack"&&!this.isChartDetailPage()},chartGetCurrentDrillLevel:function(){return!this.builder&&this.$display!="chart"?"":this.builder.getCurrentDrillLevel()},_actPagination:function(linkName){Base.prototype._actPagination.call(this,linkName),this._paginSynchro&&this._paginSynchro.forEach(function(ctrl){setTimeout(function(){ctrl._actPagination(linkName)})})},paginAddSynchro:function(ctrl){if(!ctrl||!ctrl.paginAddSynchro)return;this._paginSynchro||(this._paginSynchro=[]);if(this._paginSynchro.indexOf(ctrl)>=0)return;this._paginSynchro.push(ctrl)},paginGetInfo:function(){return this._localPaginator?{local:!0,currentIdx:this._localPaginator.currentIdx}:null},paginSetInfo:function(paginInfo){if(!paginInfo||!paginInfo.local||!this._localPaginator)return null;this._localPaginator.currentIdx=paginInfo.currentIdx,this.refresh(this.controller.dao)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlReference",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),sdataUtils=require("syracuse-tablet/html/js/sdata/sdataUtils"),uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_Klass=utils.defineClass(function CtrlReference(controller,article,prototype,options){var self=this;Base.call(self,controller,article,prototype,options),self.isUnit=self.options.isUnit===!0,self.isUnit?(self.$isEditMode=!1,self.cssType="s-m-unit"):self.cssType="s-m-ref"},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.picker=null},getValue:function(prop){var val=Base.prototype.getValue.call(this);return val!=null&&(val=val[prop||"$value"]),val==null?"":val},buildFieldTitle:function(fieldSlot,buildOptions){if(this.isUnit)return;Base.prototype.buildFieldTitle.call(this,fieldSlot,buildOptions)},buildFieldValue:function(fieldSlot,buildOptions){var self=this,parentElmt=Base.prototype.buildFieldValue.call(self,fieldSlot),value=self.getValue();if(self.$isEditMode)self.buildEditValue(parentElmt,value);else{var descr=(self.getValue("$description")||"").trim(),title=(self.getValue("$title")||"").trim();self.isUnit?self.buildUnitValue(parentElmt,value,descr,title):self.buildDetailValue(parentElmt,value,descr,title,buildOptions)}},buildEditValue:function(parentElmt,value){var self=this,bsInputGroup=uiUtils.createDomElement("div",["input-group"],null,null,parentElmt);self.createMainInput(bsInputGroup,self.getFormattedValue(value));var $lookuplink=this.getMetaData("$isReadOnly")!==!0&&this.getMetaData("$isDisabled")!==!0?self.prototype.getDataByPath("$item.$links.$lookup"):null;if(!$lookuplink){$(bsInputGroup).css({width:"100%"});return}var span=uiUtils.createDomElement("span",["input-group-btn"],null,null,bsInputGroup),attrs=self._getLinkAttrs(sdataUtils.getLinkInfo($lookuplink.$url,self.getDao()),{"data-param":self.id,"data-parent-id":self.controller.id,"data-control-id":self.id,title:self.prototype.resolveExpression($lookuplink.$title)||"Lookup"});self.picker=uiUtils.createDomElement("a",["btn","btn-default","s-m-meta"],null,attrs,span),uiUtils.createDomElement("span",fontUtils.refFieldIcon(),null,null,self.picker)},buildDetailValue:function(parentElmt,value,descr,title,buildOptions){var self=this,container=buildOptions&&buildOptions.displayCtx==="table"?parentElmt:self.addLink(parentElmt);if(value.length>0){var descContent,$refDescFormat=self.getAuthoring("$refDescFormat");switch($refDescFormat){case"title":descContent=title;break;case"desctitle":descContent=self._combineTexts(descr,title);break;case"titledesc":descContent=self._combineTexts(title,descr);break;default:descContent=descr}var $refDescPosition=self.getAuthoring("$refDescPosition"),$$value=$("<div>").addClass("s-m-ref-val").text(value),$$desc=$("<div>").addClass("s-m-descr").text(descContent),arr;switch($refDescPosition){case"bottom":$(container).append($$value).append($$desc);break;case"left":$(container).append($$desc).append($$value),arr=[$$value,$$desc],$.each(arr,function(index,$$ee){$$ee.css("display","inline-block")}),$$desc.css("padding-right","5px");break;case"top":$(container).append($$desc).append($$value);break;case"none":$(container).append($$value);break;case"right":default:arr=[$$value,$$desc],$(container).append($$value).append($$desc),$.each(arr,function(index,$$ee){$$ee.css("display","inline-block")}),$$desc.css("padding-left","5px")}}},buildUnitValue:function(parentElmt,value,descr,title){var self=this,label=descr.length>0?descr:title.length>0?title:value;label=value||"",label&&label.toLowerCase&&(label=label.toLowerCase().smCapitalize()),uiUtils.createDomElement("span",["s-m-descr"],label,null,self.addLink(parentElmt))},addLink:function(parentElmt){var self=this;if(self.options.displayCtx==="card")return parentElmt;var $detaillink=self.prototype.getDataByPath("$item.$links.$details");return $detaillink?uiUtils.createDomElement("span",null,null,self._getLinkAttrs(sdataUtils.getLinkInfo($detaillink.$url,self.getDao()),{title:self.prototype.resolveExpression($detaillink.$title)||"Detail"}),parentElmt):parentElmt},getFormattedValue:function(value){return value},setLookupValue:function(lookupData){if(!lookupData){console.log("setLookupValue Error - bind",this.$bind,"No lookupData");return}if(!lookupData.data){console.log("setLookupValue Error - bind",this.$bind,"No data");return}var field=(this.prototype.getDataByPath("$item")||{}).$lookupValue;if(!field){console.log("setLookupValue Error - bind",this.$bind,"No $lookupValue");return}var proto=lookupData.proto;proto;var value=lookupData.data[field];value==null&&(value="",console.log("setLookupValue Error - bind",this.$bind,"No field value",field)),this.setFieldValueFromSelector(value)},setDisplayValue:function(value){var strData;$.isPlainObject(value)?strData=value.$value||"":strData=value||"",Base.prototype.setDisplayValue.call(this,strData)},_getLinkAttrs:function(link,options){var self=this,attrs={href:"#","data-nav":link.page,"data-sdata-url":link.sDataUrl};self.controller.isVignette&&(attrs["data-nav-target"]="application");if(options)for(var p in options)attrs[p]=options[p];return attrs},_combineTexts:function(el1,el2){var res;return res=el1&&el2?el1===el2?el1:el1+"-"+el2:el1||el2||"",res}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/layout/layoutStack",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,notifications=require("syracuse-tablet/html/js/helpers/notifications"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_Klass=utils.defineClass(function LayoutStack(controller,type,article,opts){var self=this;Base.call(self,controller,type,article,opts)},Base,{destroy:function(){Base.prototype.destroy.call(this),this.$$btnCollapse&&(this.$$btnCollapse.off(),this.$$btnCollapse=null)},buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions),self.$$elmt.addClass("s-m-stack"),buildOptions&&buildOptions.makeFullHeight===!0&&self.$$elmt.height("100%");var css=[],level=$$parent.parents(".s-m-stack").length;if(level){var $theme=self.article&&self.article.$theme||String.fromCharCode(96+Math.min(level,3));css.push("s-m-theme-"+$theme)}this.isAdvanced=$theme==="advanced";var $collapsible=self.article&&self.article.$collapsible||"notcollapsible",$title=self.article&&self.article.$title||"";$collapsible!=="notcollapsible"&&css.push("s-m-collapsible"),$title.length&&css.push("s-m-title"),css.length&&self.$$elmt.addClass(css.join(" ")),($collapsible!=="notcollapsible"||$title.length>0)&&self._addHeader($collapsible,this.getArticleText("$title")),self.$$content=$("<content>"),self._setStackColorClass(),self.$$elmt.append(self.$$content),self.buildChildrenHtml(self.$$content,controllerDao,buildOptions),self._updateCollapseState()},_setStackColorClass:function(){var self=this,color=self.article.$bgColor;color&&self.$$content.addClass("s-m-bg s-m-color-"+color)},buildTitle:function($$rootLyt,$$parent,controllerDao,destroyAfter){},_addHeader:function(state,title){var self=this;self.$$header=$("<header>"),state!=="notcollapsible"&&(self.$$btnCollapse=$('<btn class="'+state+" "+fontUtils.layoutExpandCollapseIcon(state==="collapsed",this.isAdvanced)+'">').appendTo(self.$$header),self.$$header.on("click",jsutils.bindFn(this._actCollapse,this)));var $$title=$('<div class="s-m-title">');$$title.append(title),self.$$elmt.append(self.$$header),self.$$header.append($$title)},_actCollapse:function(events,setCollapse){events&&!globals.isAuthoringActive()&&events.stopPropagation();if(!this.$$btnCollapse)return;setCollapse===!0?this.$$btnCollapse.removeClass("expanded "+fontUtils.layoutExpandCollapseIcon(setCollapse,this.isAdvanced)).addClass("collapsed "+fontUtils.layoutExpandCollapseIcon(!setCollapse,this.isAdvanced)):setCollapse===!1?this.$$btnCollapse.removeClass("collapsed "+fontUtils.layoutExpandCollapseIcon(!setCollapse,this.isAdvanced)).addClass("expanded "+fontUtils.layoutExpandCollapseIcon(setCollapse,this.isAdvanced)):this.$$btnCollapse.toggleClass("collapsed "+fontUtils.layoutExpandCollapseIcon(setCollapse,this.isAdvanced)).toggleClass("expanded "+fontUtils.layoutExpandCollapseIcon(!setCollapse,this.isAdvanced)),this._updateCollapseState(),notifications.notifyController("sm.scroller.update",this.controller),this.$$btnCollapse.hasClass("collapsed")||notifications.publish("sm.layout.expanded")},_updateCollapseState:function(){var self=this;if(!self.$$btnCollapse||!self.$$content)return;var collapse=self.$$btnCollapse.hasClass("expanded");self.$$content.toggle(collapse)},getAuthState:function(dirtyKeys){var self=this;return dirtyKeys.$collapsible?null:{collapsed:self.$$btnCollapse?self.$$btnCollapse.hasClass("collapsed"):!1}},setAuthState:function(state){state&&state.collapsed!=null&&this._actCollapse(null,state.collapsed)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/layout/layoutTab",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),_Klass=utils.defineClass(function LayoutTab(controller,type,article,opts){var self=this;Base.call(self,controller,type,article,opts)},Base,{buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions),self.$$elmt.addClass("s-m-tabs");var slot=uiUtils.createDomElement("div",[self.article.$layoutType]);$.each(self.children,function(index,layout){layout.isTabSection=!0;var item=uiUtils.createDomElement("div",["s-m-layout-cell"],null,{style:"display:"+(index!=0?"none":"")},slot);layout.buildHtml($(item),controllerDao,buildOptions)})},buildTitle:function(){}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/layout/layoutHub",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/helpers/uiSettings"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,uiRect=require("syracuse-tablet/html/js/ui/rect"),HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),_Klass=utils.defineClass(function LayoutHub(controller,type,article,opts){var self=this;Base.call(self,controller,type,article,opts),this._gestureMgr=null,this._tilesGroupSpacing=uiSettings.getProp("hubLayout.groupSpacing"),this._minLandscapeHeigth=uiSettings.getProp("hubLayout.landscapeMinHeigth")},Base,{destroy:function(){Base.prototype.destroy.call(this),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},buildHtml:function($$parent,controllerDao,buildOptions){var self=this;buildOptions=buildOptions||{},Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions),self.$$elmt.addClass("s-m-hub"),self.$$scrollElmt=$('<div class="s-m-scroll-wrapper">').appendTo(self.$$elmt),self.buildChildrenHtml(self.$$scrollElmt,controllerDao,buildOptions),self._gestureMgr?self._gestureMgr.reset():self._gestureMgr=new HammerScroller(self.$$scrollElmt,{isPageScroller:!0})},onResize:function(context){var self=this,linksOnly=self.article.$linksOnly;if(context&&context.footerSwipe===!0)return;var parentRect=self.controller.getMainContentRect(),pos=self.$$elmt.position(),w=parentRect.width,h=parentRect.height-pos.top,rel=w/h,posX=0,posY=0,opts;self.scrollDirection=rel>1.2&&h>=this._minLandscapeHeigth?"h":"v",self.scrollDirection==="h"?self.$$elmt.css({width:"100%",height:h+"px"}):self.$$elmt.css({width:w+"px",height:"100%"});if(self.children){var last=self.children.length-1;self.children.forEach(function(child,idx){opts={posX:posX,posY:posY,maxHeight:h,maxWidth:w,scrollDirection:self.scrollDirection,allowSmallTiles:linksOnly&&rel>1.2},child.onResize(context,opts),self.scrollDirection==="h"?posX+=child.getWidth()+(idx<last?self._tilesGroupSpacing:0):posY+=child.getHeight()+(idx<last?self._tilesGroupSpacing:0)})}var width,height;self.scrollDirection==="h"?(width=posX,height=h):(width=w,height=posY);var oldScroll=null;context&&context.preserveScroll===!0&&(oldScroll=self._gestureMgr.getScrollValue()),self._gestureMgr.resetScrolling(function(){self.$$scrollElmt.width(width),self.$$scrollElmt.height(height);var scrollRect=uiRect.elmtRect(self.$$scrollElmt,"outer"),viewRect=parentRect.intersectRect(scrollRect);viewRect!=null&&!viewRect.contains(scrollRect)?viewRect:null,viewRect?(self._gestureMgr.init(viewRect,self.scrollDirection,0),oldScroll!=null&&self._gestureMgr.autoScroll(oldScroll)):self._gestureMgr.reset()})},getGestureMgr:function(){return this._gestureMgr},savedCtxCreate:function(){return this._gestureMgr?{hubScroll:this._gestureMgr.savedCtxCreate()}:null},savedCtxRestore:function(ctx){ctx!=null&&this._gestureMgr&&this._gestureMgr.savedCtxRestore(ctx.hubScroll)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/layout/layoutHubGroup",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/uiSettings"],function(require,exports,module){var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),_validSizes=["small","medium","wide","large","full","all"],_Klass=utils.defineClass(function LayoutHubGroup(controller,type,article,opts){var self=this;Base.call(self,controller,type,article,opts),self._settings=uiSettings.getProp("hubGroup")},Base,{buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions),self.$$elmt.addClass("s-m-hub-group"),self._buildCellStructure(controllerDao,buildOptions)},_buildCellStructure:function(controllerDao,buildOptions){var self=this;self.cells=[];var cell=null;self.children&&self.children.forEach(function(layout){var size=layout.article&&layout.article.$size||"medium";_validSizes.indexOf(size)<0&&(size=_validSizes[1],layout.article=layout.article||{},layout.article.$size=size),cell||(cell=self._createCell(size),cell.domItem=uiUtils.createDomElement("div",null,null,null,self.$$elmt),self.cells.push(cell)),size==="small"?(layout.buildHtml($(cell.domItem),controllerDao,buildOptions),cell.children.push(layout),cell.children.length===4&&(cell=null)):(cell.children.length>0&&(cell=self._createCell(size),cell.domItem=uiUtils.createDomElement("div",null,null,null,self.$$elmt),self.cells.push(cell)),layout.buildHtml($(cell.domItem),controllerDao,buildOptions),cell.children.push(layout),cell=null)})},_createCell:function(size){var self=this;size=size==="small"?"medium":size;var cell={size:size,children:[]};return cell},onResize:function(context,options){this.calculateLayout(options),Base.prototype.onResize.call(this,context)},calculateLayout:function(options){var self=this,size;self._headerSpace=self.$$header?self.$$header.height():0,self._width=0,self._height=0,self.hubGroupOptions=options,self.hubGroupOptions.scrollDirection==="h"?self._calculateLayoutHorizontal():self._calculateLayoutVertical(),self.cells.forEach(function(cell){size=cell.size,cell.domItem.style.left=cell.x+"px",cell.domItem.style.top=cell.y+self._headerSpace+"px",cell.domItem.style.width=self._sizes[size].width+"px",cell.domItem.style.height=self._sizes[size].height+"px",cell.domItem.style.position="absolute",cell.x+self._sizes[size].width>self._width&&(self._width=cell.x+self._sizes[size].width),cell.y+self._sizes[size].height>self._height&&(self._height=cell.y+self._sizes[size].height);var x=0,y=0;cell.children.forEach(function(tileLayout){size=tileLayout.getAuthoringSize(),tileLayout.calculateLayout(x,y,size,self._sizes[size]),x!==0?(x=0,y+=self._sizes[size].height+self.hubGroupOptions.padY):x+=self._sizes[size].width+self.hubGroupOptions.padX})});var style=self.$$elmt.get(0).style;self.hubGroupOptions.scrollDirection==="h"?(self.cells.length<1&&globals.isAuthoringActive()&&(self._width=self.hubGroupOptions.maxGroupWidth),style.top="0px",style.left=self.hubGroupOptions.posX+"px",style.width=6+self._width+"px",style.height=self.hubGroupOptions.maxHeight-6+"px"):(self.cells.length<1&&globals.isAuthoringActive()&&(self._height=self.hubGroupOptions.baseSize),style.top=self.hubGroupOptions.posY+"px",style.left="0px",self._width=self._width,style.width=self._width+"px",self._height+=self._headerSpace+self._settings.portraitPadY,style.height=self._height+"px",self.cells.length<1&&globals.isAuthoringActive())},_calculateLayoutHorizontal:function(){var self=this;self.hubGroupOptions.baseSize=self._settings.landscapeBaseSize,self.hubGroupOptions.padX=self._settings.landscapePadX,self.hubGroupOptions.padY=self._settings.landscapePadY,self.hubGroupOptions.maxGroupHeight=self.hubGroupOptions.maxHeight-self._headerSpace;var maxTiles=self.hubGroupOptions.maxGroupHeight/(self.hubGroupOptions.baseSize+self.hubGroupOptions.padY),remainPixels=self.hubGroupOptions.maxGroupHeight-Math.floor(maxTiles)*(self.hubGroupOptions.baseSize+self.hubGroupOptions.padY),remainPerTile=Math.floor(remainPixels/maxTiles),paddingPerTile=Math.floor(remainPixels/maxTiles/2);self.hubGroupOptions.baseSize+=remainPerTile,self.hubGroupOptions.paddingPerTile=paddingPerTile,self.hubGroupOptions.maxGroupWidth=4*self.hubGroupOptions.baseSize+3*self.hubGroupOptions.padX,self.hubGroupOptions.maxFullTileHeight=Math.floor((self.hubGroupOptions.maxGroupHeight+self.hubGroupOptions.padY)/(self.hubGroupOptions.baseSize+self.hubGroupOptions.padY)/2)*(self.hubGroupOptions.baseSize+self.hubGroupOptions.padY)*2-self.hubGroupOptions.padY,self.hubGroupOptions.maxAllTileHeight=self.hubGroupOptions.maxFullTileHeight,self.hubGroupOptions.maxAllTileWidth=self.hubGroupOptions.maxWidth,self._sizes={small:{width:self.hubGroupOptions.baseSize,height:self.hubGroupOptions.baseSize,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},medium:{width:self.hubGroupOptions.baseSize*2+self.hubGroupOptions.padX,height:self.hubGroupOptions.baseSize*2+self.hubGroupOptions.padY,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},wide:{width:self.hubGroupOptions.baseSize*4+self.hubGroupOptions.padX*3,height:self.hubGroupOptions.baseSize*2+self.hubGroupOptions.padY,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},large:{width:self.hubGroupOptions.baseSize*4+self.hubGroupOptions.padX*3,height:self.hubGroupOptions.baseSize*4+self.hubGroupOptions.padY*3,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},full:{width:self.hubGroupOptions.baseSize*4+self.hubGroupOptions.padX*3,height:self.hubGroupOptions.maxFullTileHeight,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},all:{height:self.hubGroupOptions.maxAllTileHeight,width:self.hubGroupOptions.maxAllTileWidth,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile}};var relX=0,relY=0,x=0,y=0;self.cells.forEach(function(cell){cell.w=self._sizes[cell.size].width,cell.h=self._sizes[cell.size].height;if(y+cell.h>self.hubGroupOptions.maxGroupHeight||y!==0&&(cell.size==="full"||cell.size==="all"))y=0,relX+=self.hubGroupOptions.maxGroupWidth+self.hubGroupOptions.padX,x=relX;cell.size==="medium"?(x-relX+cell.w>self.hubGroupOptions.maxGroupWidth&&(x=relX,y+=cell.h+self.hubGroupOptions.padY),y+cell.h>self.hubGroupOptions.maxGroupHeight&&(y=0,relX+=self.hubGroupOptions.maxGroupWidth+self.hubGroupOptions.padX,x=relX),cell.x=x,cell.y=y,x+=cell.w+self.hubGroupOptions.padX):(x!==relX&&(x=relX,y+=self._sizes.medium.height+self.hubGroupOptions.padY),y+cell.h>self.hubGroupOptions.maxGroupHeight&&(y=0,relX+=self.hubGroupOptions.maxGroupWidth+self.hubGroupOptions.padX,x=relX),cell.x=x,cell.y=y,y+=cell.h+self.hubGroupOptions.padY,cell.size==="all"&&(y=0,relX+=cell.w+self.hubGroupOptions.padX,x=relX))})},_calculateLayoutVertical:function(){var self=this,centerPadX;self.hubGroupOptions.paddingPerTile=0,self.hubGroupOptions.maxGroupHeight=self.hubGroupOptions.maxHeight-self._headerSpace,self.hubGroupOptions.padX=self._settings.portraitPadX,self.hubGroupOptions.padY=self._settings.portraitPadY,self.hubGroupOptions.maxFullTileHeight=self.hubGroupOptions.maxGroupHeight-self.hubGroupOptions.padY,self.hubGroupOptions.maxWidth>=self._settings.portraitWideMinWidth||self.hubGroupOptions.allowSmallTiles===!0?(self.hubGroupOptions.baseSize=Math.floor((self.hubGroupOptions.maxWidth-7*self.hubGroupOptions.padX)/8),self.hubGroupOptions.maxGroupWidth=8*self.hubGroupOptions.baseSize+7*self.hubGroupOptions.padX):(self.hubGroupOptions.baseSize=Math.floor((self.hubGroupOptions.maxWidth-3*self.hubGroupOptions.padX)/4),self.hubGroupOptions.maxGroupWidth=4*self.hubGroupOptions.baseSize+3*self.hubGroupOptions.padX),self.hubGroupOptions.maxAllTileHeight=self.hubGroupOptions.maxFullTileHeight,self.hubGroupOptions.maxAllTileWidth=self.hubGroupOptions.maxWidth,centerPadX=(self.hubGroupOptions.maxWidth-self.hubGroupOptions.maxGroupWidth)/2,self.hubGroupOptions.maxGroupWidth+=centerPadX,self._sizes={small:{width:self.hubGroupOptions.baseSize,height:self.hubGroupOptions.baseSize,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},medium:{width:self.hubGroupOptions.baseSize*2+self.hubGroupOptions.padX,height:self.hubGroupOptions.baseSize*2+self.hubGroupOptions.padY,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},wide:{width:self.hubGroupOptions.baseSize*4+self.hubGroupOptions.padX*3,height:self.hubGroupOptions.baseSize*2+self.hubGroupOptions.padY,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},large:{width:self.hubGroupOptions.baseSize*4+self.hubGroupOptions.padX*3,height:self.hubGroupOptions.baseSize*4+self.hubGroupOptions.padY*3,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},full:{width:self.hubGroupOptions.baseSize*4+self.hubGroupOptions.padX*3,height:self.hubGroupOptions.maxFullTileHeight,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile},all:{width:self.hubGroupOptions.maxAllTileWidth,height:self.hubGroupOptions.maxAllTileHeight,paddingX:self.hubGroupOptions.paddingPerTile,paddingY:self.hubGroupOptions.paddingPerTile}};var x=centerPadX,y=0,yInc=0;self.cells.forEach(function(cell){cell.w=self._sizes[cell.size].width,cell.h=self._sizes[cell.size].height,cell.x=x,cell.y=y,x+cell.w>self.hubGroupOptions.maxGroupWidth?(x=centerPadX,y+=yInc+self.hubGroupOptions.padY,cell.x=x,cell.y=y,yInc=cell.h,x+=cell.w+self.hubGroupOptions.padX):(x+=cell.w+self.hubGroupOptions.padX,yInc=cell.h>yInc?cell.h:yInc)})},getWidth:function(){return this._width},getHeight:function(){return this._height}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/layout/layoutTile",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/layout/layoutBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,_Klass=utils.defineClass(function LayoutTile(controller,type,article,opts){Base.call(this,controller,type,article,opts),article.$bgColor==null&&(article.$bgColor=globals.TILEDEFCOLOR),article.$bgColor=article.$bgColor.toLowerCase()},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this)},buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions),self.$$elmt.addClass("s-m-tile"),self.$$body=self.$$elmt,self._setCellColorClass(),self.buildChildrenHtml(self.$$body,controllerDao,buildOptions)},_setCellColorClass:function(){var bg=(this.article.$bgColor||"").toLowerCase();if(bg==="transparent"||bg.length===0)return;bg="s-m-color-"+bg,this.$$elmt.addClass("s-m-bg "+bg)},calculateLayout:function(x,y,authSize,sizeInfo){var css={left:x+"px",top:y+"px",width:sizeInfo.width+"px",height:sizeInfo.height+"px",position:"absolute","padding-left":sizeInfo.paddingX+"px","padding-right":sizeInfo.paddingX+"px","padding-bottom":sizeInfo.paddingY+"px","padding-top":(this.$$header?this.$$header.height():0)+sizeInfo.paddingY+"px"};this.$$elmt.css(css),this.$$elmt.addClass(authSize)},getAuthoringSize:function(){return this.article&&this.article.$size||"medium"},notifSpecialArrayHosted:function(typeArray){if(!this.$$elmt)return;this.$$elmt.removeClass("s-m-carousel s-m-chart"),typeArray==="carousel"?this.$$elmt.addClass("s-m-carousel"):typeArray==="chart"&&this.$$elmt.removeClass("s-m-bg s-m-color-"+this.article.$bgColor).addClass("s-m-chart")}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/layout/layoutCell",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),_sizes=[{$prop:"$widthXs",$prefix:"col-xs-",$def:12},{$prop:"$widthSm",$prefix:"col-sm-",$def:6},{$prop:"$widthMd",$prefix:"col-md-",$def:4},{$prop:"$widthLg",$prefix:"col-lg-",$def:3}],_Klass=utils.defineClass(function LayoutCell(controller,type,article,opts){Base.call(this,controller,type,article,opts),article.$bgColor==null&&(article.$bgColor=globals.CELLDEFCOLOR),article.$bgColor=article.$bgColor.toLowerCase()},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.$$cell=null},buildHtml:function($$parent,controllerDao,buildOptions){Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions),this.$$elmt.addClass("s-m-cell"),this.controller.isDashboard()&&this.$$elmt.addClass("dashboard"),this.$$cell=$(uiUtils.createDomElement("div",["cell"],null,null,this.$$elmt)),this._setCellColorClass(),this._setCellSizeClasses(),this.buildChildrenHtml(this.$$cell,controllerDao,buildOptions)},_setCellColorClass:function(){var bg=this.article.$bgColor;if(bg==="transparent"||bg.length===0)return;this.$$cell.addClass("s-m-bg s-m-color-"+bg)},_setCellSizeClasses:function(){var self=this;if(self.article.$sameSize!==!0){var widthFound=!1,sizes=[],sz;_sizes.forEach(function(size){sz=self.article[size.$prop],sz!=null&&sz>=1&&sz<=12&&sizes.push(size.$prefix+sz)}),sizes.length==0&&(self.article.$sameSize=!0,self.article.$widthAll=12)}self.article.$sameSize===!0&&(self.article.$widthAll==null&&(self.article.$widthAll=12),sizes=["col-xs-"+Math.min(12,Math.max(1,self.article.$widthAll),self.article.$widthAll)]),self.$$elmt.addClass(sizes.join(" "))},_ensureHeader:function(){return Base.prototype._ensureHeader.call(this,this.$$cell)},notifSpecialArrayHosted:function(typeArray){if(!this.$$cell)return;typeArray==="chart"?(this.$$cell.removeClass("s-m-bg s-m-color-"+this.article.$bgColor),this.$$elmt.addClass("s-m-chart")):typeArray==="carousel"&&this.$$elmt.addClass("s-m-carousel")}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/vignetteBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/application/pageLoader","syracuse-tablet/html/js/application/pageRegistry","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/application/gadget"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),uiRect=require("syracuse-tablet/html/js/ui/rect"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),PageLoader=require("syracuse-tablet/html/js/application/pageLoader").Klass,pageRegistry=require("syracuse-tablet/html/js/application/pageRegistry"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("app"),locale=require("syracuse-tablet/html/js/helpers/locale"),ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory"),Gadget=require("syracuse-tablet/html/js/application/gadget").Klass,_actionTitleMgr={action:"togglePinVignette",iconActionAdd:function(vignetteCtrl){if(vignetteCtrl._$$actionIcon)return!0;var icon=fontUtils.getPinVignetteIcon("off")||"",iconBarCtrl=_actionTitleMgr.getIconBarCtrl(vignetteCtrl);return!iconBarCtrl||icon.length===0?!1:(iconBarCtrl.$$header.append($('<icon data-action="'+_actionTitleMgr.action+'" data-control-id="'+vignetteCtrl.id+'" class="s-m-tile-act '+icon+'" style="float:right"></span>')),iconBarCtrl.$$elmt.css("padding-top",iconBarCtrl.$$header.height()+"px"),vignetteCtrl._$$actionIcon=_actionTitleMgr.iconActionToggleStatus(vignetteCtrl,"off"),!0)},iconActionToggleStatus:function(vignetteCtrl,status){status=status||"off";var iconBarCtrl=_actionTitleMgr.getIconBarCtrl(vignetteCtrl);if(!iconBarCtrl)return;(vignetteCtrl._currentPage.isEditMode()?iconBarCtrl.$$header:iconBarCtrl.$$elmt).toggleClass("s-m-color-"+globals.CELLENABLEDCOLOR,status==="on");var $$res=iconBarCtrl.$$header.find('[data-action="'+_actionTitleMgr.action+'"]');return $$res.removeClass(fontUtils.getPinVignetteIcon("all")).addClass(fontUtils.getPinVignetteIcon(status)),$$res},getIconBarCtrl:function(vignetteCtrl){var ctrl=vignetteCtrl.parent;return!ctrl||!ctrl._ensureHeader||!ctrl.$$elmt?null:(ctrl._ensureHeader(),ctrl)}},_waitConfig={className:"waiting-blocks",elements:5,auto:!0,speed:200},_templates={main:'		<section/>		<footer style="display:none"/> 		<div class="s-m-waiting bckg" style="display:none"/> 		<div class="s-m-waiting wheel" style="display:none"/> 	',iframe:'		<br><iframe src="{{url}}" style="position: absolute; top: 0px; left: 0px; height: 100vh; width: 100vh;"/>	',navbtns:'		<span data-action="vignetteBack" class="'+fontUtils.vignetteIcons("back")+'" style="display:none"></span>		<span  data-action="vignetteHome" class="'+fontUtils.vignetteIcons("home")+'" style="display:none"></span>	',vignetteError:'		<a draggable="false" href="#" data-action="vignetteError">{{text}}</a>	',linkPage:'		<div draggable="false" href="{{href}}"			data-nav-target="application"			data-nav="{{data-nav}}"			{{#if data-link-article}} data-link-article="{{data-link-article}}"{{/if}}			{{#if data-gadget-id}}data-gadget-id="{{data-gadget-id}}"{{/if}}			data-application-name="{{data-application-name}}"			{{#if data-sdata-parameters}}data-sdata-parameters="{{data-sdata-parameters}}"{{/if}}			class="s-m-link-page">				{{#if icon}}					<section class="s-m-icon">						<div>							<div class="{{icon}}"></div>						</div>					</section>				{{/if}}				<section class="s-m-title">					<div>{{title}}</div>				</section>		</div>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_Klass=utils.defineClass(function VignetteBase(controller,article,prototype,opts){article.$article=article.$article||{},Base.call(this,controller,article,prototype,opts),this._currentPage=null,this._pageLoader=null,this._$$wait=null,this._stateStack=[],this._error=null,this.displayStyle=prototype.data("$displayStyle"),this.openLinkInVignette=globals.$config("openLinkInVignette"),this._actionsEnabled=!1},Base,{destroy:function(){this.destroyActionControls(),this._error=null,this.clearContent(),this._$$wait&&uiUtils.waitPluginDestroy(this._$$wait),this._pageLoader&&(this._pageLoader.destroy(),this._pageLoader=null),this._$$actionIcon=null,Base.prototype.destroy.call(this)},clearContent:function(){this._currentPage&&(this._currentPage.destroy(),this._currentPage=null),this._$$content&&(globals.getApplication().removeAllChildPages(this._$$content),this._$$content.empty()),this._stateStack=[]},getPageControl:function(ctrlId){return this._currentPage&&this._currentPage.getControl&&this._currentPage.getControl(ctrlId)},getPageLayout:function(id){return this._currentPage&&this._currentPage.getLayout&&this._currentPage.getLayout(id)},getPageStructElmt:function(id){return this.getPageControl(id)||this.getPageLayout(id)},getPage:function(){return this._currentPage},onMainPageResize:function(info,orientation,deviceClass){this._actionsEnabled&&info.deviceChanged&&(this._doTogglePinVignette(!1),this.destroyActionControls());if(this._currentPage==null||this._currentPage.state.options.$displayStyle!=="$full")return;this._currentPage.onMainPageResize(info,orientation,deviceClass)},changePage:function(state,options){options=options||{},options.openLinkInVignette=this._openLinkInsideVignette(),options.$displayStyle="$full",this._loadPage(state,options)},refreshPage:function(options){var self=this;if(!self._currentPage)throw new Error("No current page");self._error&&this._removeError(),self._currentPage.refresh(options,{waitStart:function(controlId){self.waitStart()},waitStop:function(controlId){self.waitStop()}}).then(function(){}).fail(function(e){modal.error(locale.text("err.load.main"),e)})},hasBtnsBar:function(){return this._openLinkInsideVignette()},_openLinkInsideVignette:function(state){if(this.openLinkInVignette===!0)return!0;var name;return state==null?name=this._currentPage?this._currentPage.state.name:null:$.isPlainObject(state)?name=state.name:name=state,typeof name=="string"&&(name==="rowdetail"||name==="carddesign"||name.smEndsWith("$lookup"))&&(this.openLinkInVignette=!0),this._currentPage&&this._currentPage.isChild&&(this.openLinkInVignette=!0),this.openLinkInVignette},reloadPage:function(loadOptions){if(!this.$displayStyle==="$full"||!this._currentPage)return $.smResolve();var pageInfo=$.extend(!0,{},this._currentPage.state);this.clearContent(),this._pageLoader||this._initPageLoader();var self=this;return $.smResolve().then(function(){return self._pageLoader.load(pageInfo,!1,loadOptions)}).fail(function(e){self._displayError(locale.text("error.page.loading"),e)})},_loadPage:function(state,pageOptions,action,loadOptions){var self=this;return self._error=null,(action==="reload"||!self._openLinkInsideVignette(state)&&self._stateStack.length>0)&&self.clearContent(),self._pageLoader||self._initPageLoader(),$.smResolve().then(function(){var pageInfo,articleCopy;if(typeof state=="string")return pageOptions=pageOptions||{},pageOptions.vignette=!0,articleCopy=pageOptions.vignetteArticle,pageRegistry.getPageInfo(state,pageOptions,self._currentPage).then(function(pageInfo){return articleCopy&&pageInfo.options&&(pageInfo.options.vignetteArticle=articleCopy),pageInfo});if(action==="back"||action==="home")return state;throw new Error("Unexpected object state")}).then(function(pageInfo){if(pageInfo.options&&pageInfo.options.$displayStyle==="$full")return self._pageLoader.load(pageInfo,action==="back",loadOptions);if(pageOptions.gadget){var gadget=new Gadget(pageOptions.gadget),icon=self._getCssIcon(gadget,"s-m-sage-gadget-icon"),attrs={"data-nav":pageInfo.name,"data-gadget-id":gadget.data("$uuid"),"data-application-name":gadget.data("applicationName"),title:self.article&&self.article.$article&&self.article.$article.$title?self.article.$article.$title:gadget.data("$title"),icon:icon};return pageInfo.options.$displayStyle==="$link"&&self.article&&self.article.$linkArticle&&(attrs["data-link-article"]=self.id),self._addPicker(attrs),$.smResolve()}throw new Error("Unexpected vignette page")}).fail(function(e){self._displayError(locale.text("error.page.loading"),e)})},_initPageLoader:function(){var self=this;self._pageLoader=new PageLoader({waitStop:function(){self.waitStop()},waitStart:function(){self.waitStart()},getRootElmt:function(){return self._$$content},getCurrentPage:function(){return self._currentPage},setCurrentPage:function(page){self._currentPage=page,self._currentPage.setParentVignette(self),page.$activity==="edit"||page.$activity==="create"?notifications.subscribe(self,["sm.field.focus"]):notifications.unsubscribe(self,["sm.field.focus"])},historyPush:function(state){self._stateStack.push(state)},succeeded:function(dstPage,pageToClose,parentNotifInfo,back,loadOptions){if(!self.controller)return;self.hasBtnsBar()&&self.refreshBtnsBar(),parentNotifInfo&&parentNotifInfo.notifId&&(dstPage.id===parentNotifInfo.parentId?notifications.notifyController(parentNotifInfo.notifId,self._currentPage,parentNotifInfo.notifData,parentNotifInfo.controlId):modal.error("Child page notification warning","Parent page is not the current page")),log&&log("vignette loaded"+self.id),dstPage.state.options.$displayStyle==="$full"&&(self._initActionDashboard(dstPage),setTimeout(function(){var info=$.extend({},!0,loadOptions);info.updateLayout=back===!0||loadOptions&&loadOptions.updateLayout,dstPage.onMainPageResize(info)}))},loadingError:function(deferred,state,e){self._displayError(locale.text("error.page.loading"),e),deferred.resolve(null,e)},getSavedCtxVignette:function(){if(!self.controller)return;return self.controller.getSavedCtxVignette(self)}})},_initActionDashboard:function(dstPage){if(!dstPage)return;if(dstPage.isChild)this._updateActionControl();else{this._typeAction=dstPage.isMultiSelectionEnabled()?"multiselection":dstPage.hasFooterHeaderActions(!0)?"footerHeader":null;if(this._typeAction==null)return;this.openLinkInVignette=this._typeAction==="footerHeader",this._actionsEnabled=_actionTitleMgr.iconActionAdd(this),notifications[this._actionsEnabled?"subscribe":"unsubscribe"](this,["sm.vignette.pinned"])}},_actTogglePinVignette:function(){this._actionControl||notifications.publish("synch.sm.vignette.pinned",this.id),this._doTogglePinVignette()},notifVignettePinned:function(skipThisId){if(this.id==skipThisId)return;if(!this._actionsEnabled||!this._actionControl)return;this._doTogglePinVignette(!1)},notifFieldFocus:function(control){if(!control||!control.controller.isVignette)return;var enable=control.controller.getParentVignette()===this;if(enable&&this._actionControl||!enable&&!this._actionControl)return;this._doTogglePinVignette()},_doTogglePinVignette:function(show){if(!this._actionsEnabled||!this._currentPage)return;var status=show===!1?"off":show===!0?"on":this._actionControl?"off":"on",controlToggle,type=this.getTypeActionControl();if(status==="on")this._actionControl=this._getActionControl(!0),type=this.getTypeActionControl(),controlToggle=this._actionControl;else{if(!this._actionControl)return;controlToggle=this._actionControl,type=controlToggle.getPageControlType(),this._actionControl=null}this.controller.toggleHeaderFooter(type,controlToggle,status==="on"),_actionTitleMgr.iconActionToggleStatus(this,status)},_updateActionControl:function(){if(!this._actionsEnabled)return;this._actionControl=this._getActionControl(!0),this._doTogglePinVignette(!0)},_getActionControl:function(create){this._actionControlsCache||(this._actionControlsCache={});var ctrl=this._actionControlsCache[this._currentPage.id];return!ctrl&&create&&(ctrl=ctrlFactory.createActionControl(this.getTypeActionControl(),this,{multiSelectionOnly:this._typeAction==="multiselection",pageId:this._currentPage.id}),this._actionControlsCache[this._currentPage.id]=ctrl),ctrl},destroyActionControls:function(){if(!this._actionControlsCache||!this.controller)return;this._actionControl&&this.controller.toggleHeaderFooter(this._actionControl.getPageControlType(),null);var ctrl;for(var p in this._actionControlsCache)ctrl=this._actionControlsCache[p],ctrl&&(this.controller.removeControl(ctrl),ctrl.destroy());this._actionControl=this._actionControlsCache=null},getTypeActionControl:function(){return globals.getSiteLayout().getDeviceType()==="smartphone"?"header":"footer"},_loadRepresentation:function(gadget,name,pageOptions,loadOptions){var self=this,name=name||gadget.getPageName();return pageOptions=$.extend({},pageOptions),pageOptions.openLinkInVignette=self._openLinkInsideVignette(name),pageOptions.$displayStyle=self.displayStyle,pageOptions.gadget=gadget.getJSON(),pageOptions.vignetteArticle=self.article.$article,pageOptions.vignetteAuthPageProps={},utils.authCopyPageProperties(self.article,pageOptions.vignetteAuthPageProps),self._loadPage(name,pageOptions,null,loadOptions)},_displayError:function(msg,detail){var self=this;self._error={message:msg,detail:detail},self.$$elmt?(self._$$content.hide(),self.$$elmt.addClass("s-m-error"),self.$$elmt.prepend(_getHtml("vignetteError",{text:locale.text("vignette.load.failed")})),self.refreshBtnsBar()):globals.getModal().actionResult(locale.text("error.page.loading"),self._error,!0)},_removeError:function(){this.$$elmt.children('a[data-action="vignetteError"]').remove(),this.$$elmt.removeClass("s-m-error"),this._$$content.show(),this._error=null},buildHtml:function($$parent,controllerDao,buildOptions){var self=this;self._stateStack.length>0||(Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions,["s-m-vignette"]),self.$$elmt.html(_getHtml("main",{})),self._$$content=self.$$elmt.children("section"),self.$$footer=self.$$elmt.children("footer"),self._$$waitBckg=self.$$elmt.children(".s-m-waiting.bckg"))},load:function(name,pageOptions,loadOptions){var self=this;pageOptions=pageOptions||{};var deferred=$.Deferred(),_finalize=function(page,error){deferred.resolve(page,error),page!=null&&notifications.notifyController("sm.scroller.update",self.controller,self.id,page,error)},_fail=function(e){self._displayError(locale.text("error.page.loading"),e),_finalize()};try{var gadget=new Gadget(self.prototype.getVignetteGadget());if(gadget&&gadget.isValid()){pageOptions.resize===!0&&this.clearContent();switch(gadget.data("$type")){case"$representation":case"$stats":case"$request":self._loadRepresentation(gadget,name,pageOptions,loadOptions).then(function(page,error){_finalize(page,error)}).fail(function(e){_fail(e)});break;case"$dashboard":self._loadDashboard(gadget),_finalize();break;case"$application":self._loadApplication(gadget),_finalize();break;case"$external":self._loadExternal(gadget),_finalize();break;case"$gadgetMissing":self._displayError(locale.text("vignette.load.gadget.missing",[gadget.data("$uuid")])),_finalize();break;default:self._displayError(locale.text("vignette.load.gadget.unsupported",[gadget.data("$type")])),_finalize()}}else self._displayError(locale.text("vignette.load.gadget.invalid",gadget&&gadget.getInvalidReason()?[gadget.getInvalidReason()]:"Unknown reason")),_finalize()}catch(e){_fail(e)}finally{return deferred.promise()}},_getCssIcon:function(gadget,sageBaseCss){var icon=gadget.data("icon")||this.article&&this.article.$icon;return icon&&(icon.smStartsWith("s-m-")?icon=sageBaseCss+" "+icon:icon=fontUtils.getIconByName(icon)),icon||""},_loadDashboard:function(gadget){this._addPicker({"data-nav":globals.getMetaData().getDashboardPageName(gadget.data("dashboardName")),"data-application-name":gadget.data("applicationName"),"data-gadget-id":gadget.data("$uuid"),"data-sdata-parameters":gadget.data("sdataParameters"),title:gadget.data("$title"),icon:this._getCssIcon(gadget,"dash")})},_loadApplication:function(gadget){this._addPicker({"data-application-name":gadget.data("applicationName"),title:gadget.data("$title"),icon:this._getCssIcon(gadget,"s-m-sage-app-icon")})},_loadExternal:function(gadget){var self=this,url=gadget.data("externalUrl");self._addPicker({href:url,title:gadget.data("$title")});if(self.displayStyle!=="$link"){var iFrame=_getHtml("iframe",{url:url});$(iFrame).appendTo(self._$$content)}},_addPicker:function(context){context.href||(context.href="#"),$(_getHtml("linkPage",context)).appendTo(this._$$content)},waitStart:function(){var self=this;self._$$wait||(self._$$wait=uiUtils.waitPluginCreate(self.$$elmt.children(".s-m-waiting.wheel"),_waitConfig).wrap('<div class="s-m-wait-root"/>')),uiUtils.waitPluginEnable(this._$$wait),this._$$waitBckg.show()},waitStop:function(){this._$$wait&&uiUtils.waitPluginDisable(this._$$wait),this._$$waitBckg.hide()},refreshBtnsBar:function(){if(this._openLinkInsideVignette()){var show=!1;this.$$icnBack||(this.$$footer.prepend(_getHtml("navbtns")),this.$$icnBack=this.$$footer.children("[data-action=vignetteBack]"),this.$$icnHome=this.$$footer.children("[data-action=vignetteHome]"));var l=this._stateStack.length;this.$$icnBack.toggle(l>1),this.$$icnHome.toggle(l>2&&!this._currentPage.prototype.isLookup()),show=this._stateStack.length>1,this.$$footer.toggle(show),this.$$elmt.toggleClass("footer",show)}},_actVignetteHome:function(){var self=this;if(self._stateStack.length==0)return $.smResolve(this._currentPage);var state=self._stateStack[0];return self._stateStack=[],self._loadPage(state,null,"home").then(function(page,error){return self._updateActionControl(),$.smResolve(page)})},_actVignetteBack:function(){var self=this;return self._stateStack.length<=1?$.smResolve(this._currentPage):(self._stateStack.pop(),self._loadPage(self._stateStack[self._stateStack.length-1],null,"back").then(function(page,error){return self._updateActionControl(),$.smResolve(page)}))},goBack:function(){return this._actVignetteBack()},goHome:function(){return this._actVignetteHome()},_actVignetteError:function(){var self=this;self._error.detail?modal.error(self._error.message,self._error.detail):modal.error("Vignette load error",self._error)},_actVignetteRefresh:function(){this.refreshPage({})},isOverflow:function(){if(!this._currentPage)return;return this._currentPage.$$elmt.height()-this.$$elmt.height()>0},getScrollViewRect:function(){return uiRect.elmtRect(this._$$content,"inner")},isVignette:function(){return!0},getLinkedPageArticle:function(){return this.article?this.article.$linkArticle:null}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/ctrlBreadCrumbs",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/uiSettings","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,globals=require("syracuse-tablet/html/js/helpers/globals"),prototype=require("syracuse-tablet/html/js/helpers/prototype"),uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_templates={items:'		<div class="s-m-items">		{{#each items}}{{{html}}}{{/each}}		</ul>		',item:'<a href="#" data-action="breadcrumb-click" data-control-id="{{ctrlId}}" data-params="{{data}}"><div class="s-m-item"><div class="s-m-text">{{text}}</div>{{#if notLast}}<div class="fa fa-caret-right s-m-icon-small"></div>{{/if}}</div></a>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[name],tmpl=_templates[key]=Handlebars.compile(tmpl)),tmpl(ctx)},_Klass=utils.defineClass(function CtrlBreadCrumbs($type,controller,options){Base.call(this,controller,{$bind:"breadcrumbs"},prototype.create({$type:$type}),options),notifications.subscribe(this,["sm.history.pop","sm.history.push"])},Base,{destroy:function(){Base.prototype.destroy.call(this),this._pageStates=[]},buildHtml:function($$parent,controllerDao,buildOptions){this._height=uiSettings.getProp("breadcrumbs.height"),Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions,[this.typeName]),this.$$elmt.css("height",this._height)},onMainPageResize:function(info,orientation){var deviceType=globals.getSiteLayout().getDeviceType();this.$$elmt.parent().toggle(deviceType==="tablet")},afterRender:function(updateLayout,buildOpts){},applyMetaData:function(metaData,buildOptions){return},getHeight:function(){return this.$$elmt.is(":visible")?this._height:0},refresh:function(){this._buildBreadcrumbs()},notifHistoryPush:function(){this._buildBreadcrumbs()},notifHistoryPop:function(){this._buildBreadcrumbs()},_buildBreadcrumbs:function(){var history=globals.getApplication().history,self=this;if(!self.$$elmt)return;var items=this._getItems(history),crumbs=[];self._pageStates=[],$.each(items,function(idx,state){var uuid=utils.UUID();self._pageStates[uuid]=$.extend(!0,{},state,{stackNum:idx}),crumbs.push({html:_getHtml("item",{text:state.$title,notLast:idx+1<items.length,ctrlId:self.id,data:uuid})})});var html=_getHtml("items",{items:crumbs});this.$$elmt.empty(),this.$$elmt.append(html)},_getItems:function(history){history=history||[],history=history.slice(0),history=history.reverse();var stackToHome=[];return history.some(function(state){return stackToHome.push(state),state.isWelcomePage?!0:!1}),stackToHome},_actBreadcrumbClick:function(uuid){var self=this,state=self._pageStates[uuid];if(!state)return;var num=state.stackNum;if(num<=0)return;globals.getApplication().goBack(function PageFilter(histState){if(num===0)return!0;num--})}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/application/actionManager",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),dispatcher=require("syracuse-tablet/html/js/sdata/sdataDispatcher"),sdataUtils=require("syracuse-tablet/html/js/sdata/sdataUtils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_parseParameters=function(params){var p=params.split("&"),res={};for(var i=0;i<p.length;i++){var v=p[i].split("=");res[v[0]]=v[1]}return res},_preserveScrolling=function(page,link,pageOpts){if(!page||!link||!pageOpts)return;var val=page.getScrollValue();!isNaN(val)&&val!==0&&(pageOpts["auto-scroll"]=page.getScrollValue()*1.2)},_displayMessage=function(title,data,cb){data===null&&(data="");if(jsutils.isError(data))data=data.message;else if(typeof data!="string"){var diags=sdataUtils.scanDiagnoses(data);if(diags.length>0){var msg=[];diags.forEach(function(d){msg.push(d.$message)}),data=msg.join("\n")}else data=JSON.stringify(data,null,2)}globals.getModal().info(title,data,cb)},_Klass=utils.defineClass(function(controller,toolbar,options){this.options=options||{},this.toolbar=toolbar,this.controller=controller,this._initLinks()},null,{destroy:function(){this.options=null,this.controller=null},_initLinks:function(){var self=this,deviceType=globals.getSiteLayout().getDeviceType(),beginLinks=[];self.options.addMultiSelection&&!self.controller.isEditMode()&&beginLinks.push(self.getMultiSelectionLink());if(self.options.multiSelectionOnly!=1){var toolBarLinks=self.controller.getToolbarLinks(self.toolbar)||[],endLinks=[];self.options.addCancelEditAction&&self.controller.isEditMode()&&endLinks.push(self.getCancelEditAction(self.options.addCancelEditAction))}self.links=jsutils.concatArrays(beginLinks,toolBarLinks,endLinks)},addLink:function(lnk){return!lnk||this.findLink(lnk.$uuid)!=null?lnk:(this.links||(this.links=[]),this.links.push(lnk),lnk)},getCancelEditAction:function(actionName){return{name:"$canceledit",icon:fontUtils.getIconByName("$cancelEdit"),isClientAction:!0,action:actionName||"cancelEdit",title:locale.text("action.cancelEdit"),$uuid:utils.UUID()}},getMultiSelectionLink:function(){return{name:"$multiSelection",icon:fontUtils.getIconByName("$multiSelection"),isClientAction:!0,action:globals.ACTMULTISEL,css:["s-m-ismultisel"],title:locale.text("action.multiselect"),$uuid:utils.UUID()}},getLinks:function(exclude,filter){exclude&&typeof exclude=="string"&&(exclude=[exclude]);if(this.links==null||exclude==null||exclude.length==0||!filter)return this.links;filter=filter||[];var lnks=[];return this.links.forEach(function(l){exclude.some(function($uuid){return l.$uuid===$uuid})||filter.some(function(props){var found=!0;return Object.keys(props).forEach(function(key){if(l[key]&&props[key]!=l[key]||l[key]==null&&props[key]!=0)found=!1}),found})&&lnks.push(l)}),lnks},hasLinks:function(){return this.links&&this.links.length>0},findLink:function(uuid){if(!this.links)return null;var lnk;return this.links.some(function(l){if(l.$uuid===uuid)return lnk=l,!0}),lnk},triggerLink:function(uuid,page){var deferred=$.Deferred();try{var self=this,link=this.findLink(uuid);if(!link)return;if(link.$confirm){globals.getModal().simpleConfirm(link.$confirm,function(confirmed){confirmed==="yes"&&self._execLink(deferred,page,link)});return}self._execLink(deferred,page,link)}catch(e){deferred.reject(e)}finally{return deferred.promise()}},_execLink:function(deferred,page,link){var self=this;if(link.isClientAction){if(!page)throw new Error("triggerLink - Page is expected");self._notifyAndResolve(page,deferred,!0,link);return}if(link.$isAction||link.$method==="DELETE"){self._doLinkAction(deferred,page,link);return}if(link.page){var pageOpts={"sdata-url":link.sDataUrl,"sdata-method":link.$method,"sdata-parameter":link.parameters};pageOpts["sdata-parameter"]&&(pageOpts.sdataParameters=_parseParameters(pageOpts["sdata-parameter"])),page&&page.state.name.replace(".$details",".$edit")===link.page&&_preserveScrolling(page,link,pageOpts);if(self.options.noRedirection===!0)self._notifyAndResolve(page,deferred,!0,link,{gotoPage:{name:link.page,options:pageOpts}},self.options);else{var opts={callerhandlesErrors:!0};globals.getApplication().changePage(link.page,pageOpts,opts).then(function(){deferred.resolve()}).fail(function(e){if(e)if(e.responseJSON&&e.responseJSON.$diagnoses)e={$diagnoses:e.responseJSON.$diagnoses};else{var msg="";e.status!=null&&(msg+="httpStatus="+e.status),e.message!=null&&(msg+=" - "+e.message),e={$diagnoses:[{$severity:"error",$message:msg}]}}globals.getModal().actionResult(locale.text("error.page.loading"),e),deferred.resolve()})}return}if(link.externalUrl){var url=utils.parseExpression(link.externalUrl,page.dao,page.prototype);window.open(url);return}_displayMessage("Unexpected link type",link,function(){self._notifyAndResolve(page,deferred,!1,link,null,self.options)})},_doLinkAction:function(deferred,page,link){var self=this,_end=function(success,data){self._notifyAndResolve(page,deferred,success,link,data)};try{if(page&&page.validateBeforeActionLink&&page.validateBeforeActionLink(link)===!1){deferred.resolve(!1);return}if(link.sDataUrl){page&&page.waitWheelStart();var payload=page.dao.getActionPayload(link,page);dispatcher.dispatch({$url:link.sDataUrl,$method:link.$method||"GET"},payload).then(function(data){page&&page.waitWheelStop(),_end(!0,data)}).fail(function(e){page&&page.waitWheelStop(),!jsutils.isError(e)&&$.isPlainObject(e)?_end(!1,e):_displayMessage("Action '"+link.title+"' failed",e,function(){deferred.reject(e)})})}else _end(!0)}catch(e){_displayMessage("Action '"+link.title+"' javascript exception",e,function(){deferred.reject(e)})}},_notifyAndResolve:function(page,deferred,success,link,result){page&&notifications.notifyController("sm.action.link",page,success,link,result,this.options),deferred&&deferred.resolve(success,link,result,this.options)}});exports.Klass=_Klass,exports.create=function(controller,toolbar,opts){return new _Klass(controller,toolbar,opts||{})}}),define("syracuse-tablet/html/js/sdata/sdataSyncUtils",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/prototype"],function(require,exports,module){function _resolvePrototype(opts,node,urlList){node.uuid=utils.UUID(),node.$children=[];if(opts.level>=opts.maxLevels)return $.smResolve(node);var $links;if(opts.prototype.getFacet()==="query"){var $resources=opts.prototype.property("$resources");$resources&&$resources.$item&&$resources.$item.$links&&$resources.$item.$links.$details&&($links={$details:$resources.$item.$links.$details})}else{if(opts.prototype.getFacet()!=="details")return $.smResolve(node);$links=opts.prototype.data("$links")}return $links?$.smForEachPromise(Object.keys($links),function(name){var link=$links[name];if(_isCacheableLink(link,name,urlList)){var repr=_getRepresentation(link);if(repr){urlList.push(link.$url);var child={$name:name,$title:utils.parseExpression(link.$title,null,opts.prototype,!0),$link:link,$representation:repr};return node.$children.push(child),_processNode(child,opts,urlList)}}return $.smResolve(node)}).then(function(){return node}):$.smResolve(node)}function _isCacheableLink(link,name,urlList){if(urlList.indexOf(link.$url)>-1)return!1;if(name.indexOf("$")===0&&name!=="$details")return!1;if(link.$method!=="GET")return!1;if(link.$url.indexOf("/$services/")>-1)return!1;if(link.$url.indexOf("representation=")<0)return!1;var repr=_getRepresentation(link);return!repr||repr.indexOf(".$details")<0&&repr.indexOf(".$query")<0?!1:!0}function _getRepresentation(link){var repr=/[\?\&]representation=(\S+?)(&|$)/.exec(link.$url);return repr&&repr[1]}function _processNode(node,opts,urlList){var meta=globals.getMetaData(),protoName=_getProtoName(node,opts);return meta.getPrototype(protoName).then(function(proto){if(proto)return proto=prototypeModule.create(proto),node.$prototype=proto,node.$name==="$details"&&(node.$title=proto.data("$title"),node.$isDetails=!0),_resolvePrototype({prototype:proto,level:opts.level+1,maxLevels:opts.maxLevels},node,urlList)})}function _getProtoName(node,opts){var endpoint=opts.prototype.data("$baseUrl");return endpoint=endpoint.split("/"),endpoint=endpoint.slice(endpoint.length-3,endpoint.length).join("."),endpoint+"."+node.$representation}var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),prototypeModule=require("syracuse-tablet/html/js/helpers/prototype"),_syncMaxLevels=6;exports.getSyncStructure=function(prototype){var node={$title:prototype.data("$title")},urlList=[];return _resolvePrototype({prototype:prototype,level:1,maxLevels:_syncMaxLevels},node,urlList)}}),define("syracuse-tablet/html/js/ui/modals/modalSyncOffline",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalDialog","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/sdata/sdataSyncUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalDialog=require("syracuse-tablet/html/js/ui/modals/modalDialog"),sdataDispatcher=require("syracuse-tablet/html/js/sdata/sdataDispatcher"),sdataSyncUtils=require("syracuse-tablet/html/js/sdata/sdataSyncUtils"),_templateAll={header:'			<buttons class="pull-right"> 				<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-action="$cancel"></button> 			</buttons> 			<div class="modal-title">{{title}}</div> 			',content:' 			<div class="s-m-scroll-wrapper s-m-scroll-wrapper-v">			<div class="s-m-scroll-element"> 				<div class="form-group" id="s-m-sync-no-data-id"> 					<div class="panel s-m-panel-diag-error"><div class="panel-heading">{{label_errors}}</div><ul></ul></div> 					<center>{{label_no_data}}</center>				</div> 				<div class="form-group" id="s-m-sync-actions-id"> 					<center> 						<button type="button" class="btn btn-default s-m-modal-btn-sync" data-action="modal-sync">{{label_sync}}</button> 						<button type="button" class="btn btn-default s-m-modal-btn-sync-stop hidden" data-action="modal-sync-stop">{{label_sync_stop}}<div class="s-m-sync-total"><span class="label label-success ok"></span><span class="label label-danger error"></span></div></button> 					</center> 				</div> 				<div class="form-group" id="s-m-sync-tree-id"> 					<label>{{label_tree}}</label> 					<div id="s-m-sync-tree-id"></div> 				</div> 			</div> 			</div>',footer:""},_Klass=utils.defineClass(function ModalSyncOffline(syncRootData){var self=this;modalDialog.ModalBase.call(self),self.syncRootData=syncRootData},modalDialog.ModalBase,{_getTemplates:function(){var self=this;return{std:_templateAll}},getDisplayFlags:function(){var self=this,displayFlags=self.displayFlags||{};return self.deviceType==="tablet"?displayFlags.modalClass="sync-offline half_right":displayFlags.modalClass="sync-offline full",displayFlags},_getDataContext:function(){var self=this,data={title:locale.text("modal.sync.title"),label_tree:locale.text("modal.sync.header.tree"),label_sync:locale.text("modal.sync.label_sync"),label_sync_stop:locale.text("modal.sync.label_sync_stop"),label_no_data:locale.text("modal.sync.nodata"),label_errors:locale.text("modal.sync.errors")};return data},_onShow:function(){var self=this;modalDialog.ModalBase.prototype._onShow.call(self),sdataSyncUtils.getSyncStructure(self.syncRootData.pageProto).then(function(tree){self.syncTreeRoot=tree,self.syncTreeRoot?self._buildStructHtml(tree):self._noData()}).fail(function(e){self._noData(e)})},_noData:function(e){var self=this;$("#s-m-sync-no-data-id").show(),$("#s-m-sync-actions-id").hide(),$("#s-m-sync-tree-id").hide();var $$ul=$("#s-m-sync-no-data-id ul");$$ul.empty(),e=e&&e.$diagnoses;if(e&&e.length){$("#s-m-sync-no-data-id .panel").show();var i;for(i=0;i<e.length;i++){var msg=e[i]&&e[i].$message;if(msg){var $$li=$("<li>");$$li.text(msg),$$ul.append($$li)}}}else $("#s-m-sync-no-data-id .panel").hide()},_buildStructHtml:function(node){var self=this;$("#s-m-sync-no-data-id").hide(),$("#s-m-sync-actions-id").show(),$("#s-m-sync-tree-id").show();var $$sync=$("#s-m-sync-tree-id"),$$ul=$("<ul>");self._addNode($$ul,node,0),$$sync.append($$ul)},_addNode:function($$parent,node,level){var self=this,cls=level>0?"collapsed":"expanded";cls+=level<1?" selected":"";var $$li=$('				<li class="s-m-sync-tree-item '+cls+'" data-params="'+node.uuid+'"> 					<div class="s-m-tree-icon-expand" data-action="tree-click-expand" data-params="'+node.uuid+'"></div> 					<div class="s-m-tree-label" data-action="tree-click-select" data-params="'+node.uuid+'"></div> 					<div class="s-m-sync-count hidden"><div>"				</li>');$("div.s-m-tree-label",$$li).text(node.$title),$$parent.append($$li);if(node.$children.length>0){var $$ul=$("<ul>");if(node.$isDetails!==!0){var child=node.$children[0];child&&child.$children&&child.$children.length>0&&($$li.append($$ul),child.$children.forEach(function(child){self._addNode($$ul,child)}))}else node.$children&&node.$children.length>0&&($$li.append($$ul),node.$children.forEach(function(child){self._addNode($$ul,child)}))}if($("ul",$$li).length<1){var $$expand=$(">.s-m-tree-icon-expand",$$li);$$expand.removeClass("s-m-tree-icon-expand"),$$expand.addClass("s-m-tree-icon-leaf"),$$expand.attr("data-action",null)}},_onAction:function(action,param){var self=this;return action==="tree-click-expand"?self._onTreeClickExpand(param):action==="tree-click-select"?self._onTreeClickSelect(param):action==="modal-sync"?self._syncData():action==="modal-sync-stop"&&(self.stopSync=!0),!1},_onValidate:function(){},_onCancel:function(){},_getResult:function(){return"done"},_onTreeClickExpand:function(param){var self=this,$$li=$('li[data-params="'+param+'"]');$$li.hasClass("expanded")?($$li.removeClass("expanded"),$$li.addClass("collapsed")):($$li.addClass("expanded"),$$li.removeClass("collapsed"))},_onTreeClickSelect:function(param){var self=this,$$li=$('li[data-params="'+param+'"]');$$li.hasClass("selected")?($$li=$$li.add("li",$$li),$$li.removeClass("selected")):($$li=$$li.add("li",$$li),$$li.addClass("selected"))},_syncData:function(){var self=this;self.stopSync=!1;var $$li=$('li[data-params="'+self.syncTreeRoot.uuid+'"]');$('button[data-action="modal-sync"]',self.$$elmt).addClass("hidden"),$('button[data-action="modal-sync-stop"]',self.$$elmt).removeClass("hidden"),self.syncCount=0,self.errorCount=0,self._updateErrorCount(),$.smForEachPromise(self.syncRootData.rowsData,function(row,idx,cnt){return self.stopSync?$.smResolve():(self._updateSyncCount($$li,idx,cnt),self._syncNodeData(self.syncTreeRoot,row.rowData.data))}).always(function(e){$('button[data-action="modal-sync"]',self.$$elmt).removeClass("hidden"),$('button[data-action="modal-sync-stop"]',self.$$elmt).addClass("hidden")})},_updateSyncCount:function($$li,idx,cnt){var self=this,$$state=$(">div.s-m-sync-count",$$li);$$state.removeClass("hidden"),$$state.text(idx+1+" / "+cnt);var $$states=$("li>div.s-m-sync-count",$$li);$$states.addClass("hidden")},_updateErrorCount:function(){var self=this,$$total=$('button[data-action="modal-sync-stop"]>.s-m-sync-total',self.$$elmt),$$ok=$(">.ok",$$total),$$error=$(">.error",$$total);$$ok.text(self.syncCount),$$error.text(self.errorCount)},_syncNodeData:function(node,parentData){var self=this,$$li;if(self.stopSync)return $.smResolve();if(node.$isDetails!==!0){$$li=$('li[data-params="'+node.uuid+'"]');if($$li.length<1)return $.smResolve();if(!$$li.hasClass("selected"))return $.smResolve();node.$$listItem=$$li}node.$$listItem.addClass("sync-progress");var nodeData;return node.$link?nodeData=self._readNodeData(node,parentData):nodeData=$.smResolve(parentData),nodeData.then(function(nodeData){var dataItems=nodeData&&nodeData.$resources;return!dataItems&&nodeData&&(dataItems=[nodeData]),dataItems?$.smForEachPromise(dataItems,function(dataItem,idx,cnt){return self.stopSync?$.smResolve():(nodeData.$resources&&self._updateSyncCount($$li,idx,cnt),$.smForEachPromise(node.$children,function(child){return self.stopSync?$.smResolve():(child.$$listItem=$$li,self._syncNodeData(child,dataItem))}).then(function(){node.$$listItem.addClass("sync-progress")}))}):$.smResolve(null)}).then(function(){node.$$listItem.removeClass("sync-progress")})},_readNodeData:function(node,parentData){var self=this,deferred=$.Deferred(),linkUrl=utils.parseExpression(node.$link.$url,parentData,node.$prototype);return linkUrl+="&nocache=true",sdataDispatcher.dispatch({$url:linkUrl,$method:"GET"}).then(function(data){return self.syncCount++,self._updateErrorCount(),deferred.resolve(data),data}).fail(function(){self.errorCount++,self._updateErrorCount(),deferred.resolve(null)}),deferred.promise()}});exports.Modal=_Klass}),define("syracuse-tablet/html/js/application/multiSelectionMgr",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modals/modalSyncOffline"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),sdataUtils=require("syracuse-tablet/html/js/sdata/sdataUtils"),globals=require("syracuse-tablet/html/js/helpers/globals"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),dispatcher=require("syracuse-tablet/html/js/sdata/sdataDispatcher"),locale=require("syracuse-tablet/html/js/helpers/locale"),modalSyncOffline=require("syracuse-tablet/html/js/ui/modals/modalSyncOffline"),_actionMenuId="multiSelMenuActions",_selectedClass="s-m-multi-selected",_templates={buttonLinks:'		{{#each links}}			<a draggable="false"  href="#" class="s-m-link {{css}}" data-action="multiSelectionAction" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">				<i class="{{icon}}"/>				<span>{{{title}}}</>			</a>		{{/each}}',menuActions:'		<div id="{{id}}" class="btn-group s-m-link s-m-ismultisel">			<div class="{{dropDirection}}">				<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">					<span class="badge"></span>{{title}}<span class="caret"></span>				</button>				<ul class="dropdown-menu dropdown-menu-right" role="menu">					{{#each links}}						<li><a  {{#if style}}style="{{style}}"{{/if}} draggable="false"  data-action="multiSelectionAction" data-params="{{params}}" data-control-id="{{../ctrlId}}" href="#">{{title}}</a></li>					{{/each}}				</ul>			</div>		</div>',menuLinks:'		<div  class="btn-group s-m-ismultisel s-m-link">			<div class="{{dropDirection}}">				<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">				{{title}}<span class="caret"></span>				</button>				<ul class="dropdown-menu dropdown-menu-right" role="menu">					{{#each links}}						<li>							<a draggable="false"  href="#" class="s-m-link {{css}}" data-action="multiSelectionAction" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">								{{title}}							</a>						</li>					{{/each}}				</ul>			</div>		</div>',processMenu:'		<a draggable="false"  href="#" class="s-m-link s-m-ismultisel" data-action="multiSelectionAction" data-params="$exitrun" data-control-id="{{ctrlId}}">			<i class="{{icon}}"/>		</a>'},_actionsList=["download","unselectall","selectall","invert","hideunselected","showunselected"],_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[name],tmpl=_templates[key]=Handlebars.compile(tmpl)),tmpl||alert(locale.text("multiselect.gethtml.alert",name)),tmpl(ctx)},_Klass=utils.defineClass(function(controller,cssToToggle){this.controller=controller,this.cssToToggle=cssToToggle},null,{destroy:function(){this.disable(),this.controller=null,this._$$ownerParent=null},getLinks:function(){return this._multiSelLinks?this._multiSelLinks:this._multiSelLinks=this.controller.getMultiSelectionLinks()||[]},isEnabled:function(){return this._$$ownerParent!=null},disable:function(){this.isEnabled()&&this._stopMultiSel(this._getArray())},_getArray:function(){var array=this.controller.getControlByBind("$resources");if(!array)throw new Error(locale.text("multiselect.getArray.error"));return array},toggle:function(ctrlOwner,$$parent,dropDirection){var array=this._getArray();return this._$$ownerParent?this._stopMultiSel(array):this._startMultiSel($$parent,array,dropDirection),this._$$ownerParent!=null},callbackArray:function(ctrlArray,params,$target){if(params=="$selectmultisel"){this._toggleSelectStatus(ctrlArray,$target.closest(".s-m-record"));return}if(params=="$showdiagnoses"){this._showDiagnoses($target);return}if(params=="$exitrun"){this._processExit(ctrlArray);return}if(params=="$stopmultisel"){this._stopMultiSel(ctrlArray);return}if(params=="$download"){this._startDownloadAction(ctrlArray);return}if(params=="$unselectall"||params=="$reset"){this._toggleUnselected(ctrlArray,!0),this._toggleSelectStatus(ctrlArray,this._$$Selected(ctrlArray),!1),params=="$reset"&&this._processExit(ctrlArray);return}if(params=="$selectall"){this._toggleUnselected(ctrlArray,!0),this._toggleSelectStatus(ctrlArray,this._$$Unselected(ctrlArray),!0),this._updateUI(ctrlArray,ctrlArray.getNbRecords());return}if(params=="$invert"){var unSelected=this._$$Unselected(ctrlArray),selected=this._$$Selected(ctrlArray);this._toggleSelectStatus(ctrlArray,unSelected,!0),this._toggleSelectStatus(ctrlArray,selected,!1);return}if(params==="$hideunselected"||params==="$showunselected"){this._toggleUnselected(ctrlArray,params==="$showunselected"),this._$$action("$hideunselected").toggle(params==="$showunselected"),this._$$action("$showunselected").toggle(params==="$hideunselected"),this._updateUI(ctrlArray,null);return}if(this.nbSelected>0){var self=this;setTimeout(function(){self._processAll(ctrlArray,params)})}},_toggleSelectStatus:function(ctrlArray,elmtList,select){var selected=elmtList.toggleClass(_selectedClass,select).hasClass(_selectedClass);if(ctrlArray.$display==="card"){var $$card=elmtList.find(".s-m-card");selected?$$card.append('<span class="badge checked fa fa-check">&nbsp;</span>'):$$card.find(".badge.checked").remove()}this._updateUI(ctrlArray,this._$$Selected(ctrlArray).length)},_toggleOwnerActions:function(show){var selector="a:not(.s-m-ismultisel)";this.cssToToggle&&(selector+=", "+this.cssToToggle),this._$$ownerParent.closest(".s-m-control").find(selector).toggle(show)},_startMultiSel:function($$parent,array,dropDirection){this._$$ownerParent=$$parent,this._$$ownerAction().addClass("enabled"),array.multiSelSetMgr(this),$$parent.append(this._$$linksMenuHtml(array,dropDirection)),$$parent.append(this._$$actionMenuHtml(array,dropDirection)),this._toggleOwnerActions(!1),array.selectLastSelectedRow(null),array.toggleCardStatusColor(!0);var self=this;setTimeout(function(){self._updateUI(array,0)})},_stopMultiSel:function(array){if(!this._$$ownerParent)return;this._processExit(array),array.multiSelSetMgr(null),this._toggleSelectStatus(array,this._$$Selected(array),!1),this._$$ownerParent.find('.s-m-ismultisel.s-m-link:not([data-action="'+globals.ACTMULTISEL+'"])').remove(),this._$$menu(_actionMenuId).remove(),this._$$ownerAction().removeClass("enabled"),array.toggleCardStatusColor(!1),this._toggleOwnerActions(!0),this._$$ownerParent=null,this._resizeArray(array)},_$$linksMenuHtml:function(array,dropDirection){var self=this,links=this.getLinks(),menuLinks=[],footerHeaderLinks=[],settings;links.forEach(function(l){settings=self.controller.actionGetSettings(l.name),settings.options==null||settings.options.footerHeader!==!0?menuLinks.push(l):footerHeaderLinks.push(l)});var html=[];return menuLinks.length>0&&html.push(_getHtml("menuLinks",{links:menuLinks,ctrlId:array.id,title:locale.text("actions"),dropDirection:dropDirection||"dropdown"})),footerHeaderLinks.length>0&&html.push(_getHtml("buttonLinks",{links:footerHeaderLinks,ctrlId:array.id})),html.join("")},_$$actionMenuHtml:function(array,dropDirection){var links=[];return _actionsList.forEach(function(id){links.push({title:locale.text("multiselect.action."+id),params:"$"+id,style:"display:none"})}),_getHtml("menuActions",{id:_actionMenuId,links:links,ctrlId:array.id,title:locale.text("multiselect.selected"),dropDirection:dropDirection||"dropdown"})},_resizeArray:function(array){array.onResize({scrollOnly:!0})},_getSelectedData:function(array){var selected=this._$$Selected(array),data=[];return selected.each(function(idx,record){var $$record=$(record);$$record.attr("data-disabled","true");var rowId=$$record.attr("data-params"),rowdata=array.getRowById(rowId);rowdata&&data.push({rowData:rowdata.row,rowId:rowId,$$record:$$record,idx:idx,status:"init"})}),data},_processStart:function(array,uuid){var deferred=$.Deferred();try{array.waitStart(),this._toggleUnselected(array,!1),this._$$ownerParent.find(".s-m-ismultisel").hide(),this._resizeArray(array),this._$$ownerParent.prepend(_getHtml("processMenu",{title:"Exit",ctrlId:array.id,icon:fontUtils.getIconByName("$cancelMultiSel")}));var data=this._getSelectedData(array),link=null,self=this;this.getLinks().some(function(l){if(l.$uuid===uuid)return link=l,!0}),deferred.resolve(link,data)}catch(e){deferred.reject(e)}finally{return deferred.promise()}},_processAll:function(array,uuid){var self=this,_data;self._processStart(array,uuid).then(function(link,data){_data=data;var deferred=$.Deferred(),_run=function(idx){idx>=data.length?deferred.resolve(link,data):self._processOne(array,link,data[idx],idx).then(function(ok){_run(idx+1)})};return _run(0),deferred.promise()}).then(function(link,data){self._processEnd(data,array)}).fail(function(e){globals.getModal().error(locale.text("multiselect.processAll.fail"),e,function(){self._processEnd(_data,array)})})},_toggleUnselected:function(array,show){this._$$Unselected(array).toggle(show),array.$display=="card"&&array.$$elmt.find("tr").each(function(){var e=$(this);e.toggle(show?show:e.find("td").length!=e.find("td.s-m-record:not(:visible)").length)})},_processEnd:function(data,array){var res={ok:0,ko:0,init:0};data.forEach(function(d){res[d.status]++}),this._$$ownerParent.prepend('<span class="s-m-multiselmsg">'+res.ok+" successes - "+res.ko+" failures</span>"),this._resizeArray(array),array.waitStop()},_processExit:function(array){if(!this._$$ownerParent)return;this._toggleUnselected(array,!0),this._toggleSelectStatus(array,this._$$Selected(array),!1),this._$$All(array).show().removeClass("error success").removeAttr("data-disabled"),this._$$ownerParent.find('[data-params="$exitrun"], .s-m-multiselmsg').remove(),this._$$ownerParent.find(".s-m-ismultisel").show(),array.$$value.find(".s-m-multisel-diag").smRemoveData("diagnoses").remove(),this._resizeArray(array)},_processOne:function(array,link,data,idx){var self=this,deferred=$.Deferred(),_end=function(success,result){try{var diagsMsg=[],diagsErr=[];if($.isPlainObject(result)){var diags=sdataUtils.scanDiagnoses(result);diags&&diags.forEach(function(d){d.$severity==="error"?diagsErr.push(d):diagsMsg.push(d)})}success=success&&diagsErr.length==0,success?data.$diagnoses=diagsMsg:jsutils.isError(result)?data.$diagnoses=[{$message:result.message,$stackTrace:result.stack}]:data.$diagnoses=diagsErr}catch(e){success=!1,data.$diagnoses=[{$message:e.message,$stackTrace:e.stack}]}finally{data.status=success?"ok":"ko",data.$$record.addClass(success?"success":"error"),self._addDiagnoses(array,data),deferred.resolve(success)}};try{if(link.$url){var sdataUrl;if(data&&data.rowData){var urlTmp=data.rowData.parseExpression(link.$url);link.$parameters&&$.each(link.$parameters,function(paramName,paramValue){if(paramValue.indexOf("{")>-1){var pv2=encodeURIComponent(paramValue),finalValue=encodeURIComponent(data.rowData.parseExpression(paramValue));urlTmp=urlTmp.replace(pv2,finalValue)}}),sdataUrl=urlTmp}else sdataUrl=data&&data.rowData?data.rowData.parseExpression(link.$url):link.sDataUrl;var payload=data&&data.rowData?data.rowData.getActionPayload(link,self.controller):null;dispatcher.dispatch({$url:sdataUrl,$method:link.$method||"GET"},payload).then(function(data){_end(!0,data)}).fail(function(e){_end(!1,e)})}else _end(!0)}catch(e){_end(!1,e)}finally{return deferred.promise()}},_addDiagnoses:function(array,data){var $$root=null,colSpan,$$diag,isTable=array.getMode()==="table";isTable?colSpan=data.$$record.children("td").length:($$root=$('<section data-action="multiSelectionAction" data-params="$showdiagnoses"/>').addClass("s-m-multisel-diag").prependTo(data.$$record),$$root.width(data.$$record.width()),$$root.smData("diagnoses",data.$diagnoses)),data.$diagnoses.forEach(function(d,idx){$$diag=$('<div data-idx="'+idx+'" class="alert alert-'+(d.$severity==="error"?"danger":"success")+'" role="alert">'+d.$message+"</div>"),isTable&&($$root=$('<tr  data-action="multiSelectionAction"  data-params="$showdiagnoses"><td colspan="'+colSpan+'"/></tr>').addClass("s-m-multisel-diag"),$$root.smData("diagnoses",data.$diagnoses),data.$$record.after($$root),$$root=$$root.children()[0]),$$diag.appendTo($$root)})},_showDiagnoses:function($$elmt){$$elmt=$$elmt.closest(".s-m-multisel-diag");var diags=$$elmt.smData("diagnoses");if(diags==null||diags.length==0)return;globals.getModal().error("",{$diagnoses:diags})},_$$ownerAction:function(){return this._$$ownerParent.find('[data-action="'+globals.ACTMULTISEL+'"]')},_$$Unselected:function(array){return array.$$value.find(".s-m-record:not(."+_selectedClass+")")},_$$Selected:function(array){return array.$$value.find(".s-m-record."+_selectedClass)},_$$All:function(array){return array.$$value.find(".s-m-record")},_$$action:function(id){return this._$$ownerParent.find('[data-params="'+id+'"]')},_$$menu:function(id){return this._$$ownerParent.find("#"+id)},_updateUI:function(array,nb){if(!this._$$ownerParent)return;nb!=null&&(this.nbSelected=Math.max(0,nb),this._$$menu(_actionMenuId).find(".badge").text(this.nbSelected));var noSel=this.nbSelected==0,allSel=this.nbSelected===array.getNbRecords();this._$$ownerParent.find(".s-m-ismultisel.s-m-link").toggleClass("disabled",noSel),noSel||allSel?(this._$$action("$hideunselected").hide(),this._$$action("$showunselected").hide()):this.nbSelected>0&&!this._$$action("$showunselected").is(":visible")&&this._$$action("$hideunselected").show(),this._$$action("$unselectall").toggle(this.nbSelected>0),this._$$action("$selectall").toggle(!0),this._$$action("$invert").toggle(this.nbSelected>0),this._$$action("$download").toggle(this.nbSelected>0)},_startDownloadAction:function(ctrlArray){var self=this,data=self._getSelectedData(ctrlArray),pageProto=ctrlArray.prototype;while(pageProto.parent)pageProto=pageProto.parent;var syncRootData={pageProto:pageProto,rowsData:[]};data.forEach(function(rowData){syncRootData.rowsData.push(rowData)});var modal=new modalSyncOffline.Modal(syncRootData);modal.show().then(function(result){result==="done"&&self._stopMultiSel(ctrlArray)})}});exports.create=function(controller,cssToToggle){return controller.isMultiSelectionEnabled()?new _Klass(controller,cssToToggle):null}}),define("syracuse-tablet/html/js/controls/page/ctrlHeaderBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/uiSettings","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/application/actionManager","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/application/multiSelectionMgr","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,globals=require("syracuse-tablet/html/js/helpers/globals"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),prototype=require("syracuse-tablet/html/js/helpers/prototype"),actionManager=require("syracuse-tablet/html/js/application/actionManager"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),multiSelectionMgr=require("syracuse-tablet/html/js/application/multiSelectionMgr"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_userPanelId=globals.PANELUSERSMARTPHONE,_actionPanelId=globals.PANELACTIONSREGULAR,_templates={main:'		<div class="s-m-header container-fluid {{deviceType}}">			{{{contentHtml}}}		</div> 	',tablet:{main:'			<div class="s-m-header-nav">				{{#if showBack}} 					<a href="#" draggable="false" data-action="historyBack">						<i class="'+fontUtils.pageIcon("back")+'" />						</a>				{{/if}} 			</div>			<div class="s-m-header-labels">				{{#if showBrand}}					<div class="s-m-header-brand"><span class="s-m-brand">{{labelBrand}}</span> <span class="s-m-product">{{labelProduct}}</span></div>				{{/if}}				<div class="s-m-header-label">{{headerLabel}}</div>			</div>			<div class="s-m-header-links">				{{{userContent}}}			</div>',userInfo:'			<div>				<span class="s-m-nav-text username">{{username}}</span>				<span class="s-m-nav-text userrole">{{userrole}}</span>			</div>			{{#if userPhotoUrl}}				<img src="{{userPhotoUrl}}"/>			{{else}}				<span style="font-size:32px" class="'+fontUtils.pageIcon("switchContext")+'" />			{{/if}}',infoOnly:"			<div>{{{userInfo}}}</div>",dropDown:'			<div class="dropdown">				<a href="#" draggable="false" data-toggle="dropdown" role="button" id="{{dropdownId}}" aria-haspopup="true" aria-expanded="false">					{{{userInfo}}}				</a>				{{{dropDownMenu}}}			</div>',dropDownMenu:'			<ul class="dropdown-menu" role="menu" aria-labelledby="{{dropdownId}}">				{{#each links}}					{{#if divider}} 						<li role="presentation" class="divider"></li>					{{/if}} 					<li>						<a href="#" data-action="linkClicked" draggable="false" data-params="{{data-params}}" data-control-id="{{ctrlId}}" class="list-group-item {{css}}">							<span class="{{icon}}" />							<span>{{label}}</span>						</a>					</li>				{{/each}}			</ul>',search:'			<div class="s-m-header-search" style="display:none">				<form style="display:none" class="navbar-form navbar-right" role="search">					<div class="form-group input-group-sm"">						<input type="text" class="form-control" placeholder="Search">					</div>					<button type="submit" class="btn btn-success">						<span class="'+fontUtils.pageIcon("search")+'"></span>					</button>				</form>			</div>'},smartphone:{main:'			<div class="s-m-header-nav">				{{#if showUserpanel}}					<a href="#" draggable="false" data-action="headerAction" data-params="{{panelId}}" data-control-id="{{ctrlId}}">						<span class="'+fontUtils.pageIcon("bars")+'" />					</a>				{{/if}} 				{{{backDom}}}			</div>			<div class="s-m-header-labels">				{{{labelContent}}}			</div>			<div class="s-m-header-links">				{{{linksContent}}}			</div>',backDom:'			<a href="#" draggable="false" data-action="historyBack" style="padding-left:0;">				<span class="'+fontUtils.pageIcon("backIphone")+'" />			</a>',brandDom:'			<div class="s-m-header-brand">				<span class="s-m-brand">{{labelBrand}}</span>				<span class="s-m-product">{{labelProduct}}</span>			</div>',labelDom:'			<div class="s-m-header-label">{{label}}</div>',actionLink:'			<a href="#" draggable="false" class="s-m-link {{css}}" {{#if $isHidden}}style="display:none"{{/if}} data-action="{{#if action}}{{action}}{{else}}headerLink{{/if}}" data-params="{{$uuid}}" data-control-id="{{ctrlId}}">				<i class="{{icon}}"></i>			</a>',actionPanelToggle:'			<a href="#" class="s-m-link" data-action="headerAction" draggable="false" data-params="{{panelId}}" data-control-id="{{ctrlId}}">				<i class="'+fontUtils.pageIcon("sidePanelR")+'" />				<span>{{{title}}}</span>			</a>'}},_linksCtx={showAuthoring:{items:[{"data-params":"designPage",icon:"designPage",label:"header.links.designPage"}]},showPageSettings:{items:[{"data-params":"pageSettings",icon:"settings",label:"header.links.page.settings"}]},showUserMenuLinks:{items:[{"data-params":"switchContext",icon:"switchContext",label:"header.links.switchContext"},{"data-params":"settings",icon:"settings",label:"header.links.settings"},{"data-params":"about",icon:"about",label:"header.sm.links.about"}]},showDevelopment:{divider:!0,items:[{"data-params":"developmentPage",icon:"developmentPage",label:"header.links.development"}]}},_getHtml=function(type,name,ctx){type=type||"";var key=type+name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=type.length==0?_templates[name]:_templates[type][name],tmpl=_templates[key]=Handlebars.compile(tmpl)),tmpl(ctx)},_Klass=utils.defineClass(function CtrlPageHeader($type,controller,options){Base.call(this,controller,{$bind:"header"},prototype.create({$type:$type}),options)},Base,{destroy:function(){this.resetSmartphonePanels(),this._actionManager&&(this._actionManager.destroy(),this._actionManager=null),this._multiSelManager&&(this._multiSelManager.destroy(),this._multiSelManager=null),Base.prototype.destroy.call(this)},getPageControlType:function(){return"header"},resetSmartphonePanels:function(){this.controller&&(this.controller.panelDetach("right"),this.controller.panelDetach("left")),this._smphUserpanel&&(this._smphUserpanel.destroy(),this._smphUserpanel=null),this._smphPageactionpanel&&(this._smphPageactionpanel.destroy(),this._smphPageactionpanel=null)},buildHtml:function($$parent,controllerDao,buildOptions){buildOptions=buildOptions||{},Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions,[this.typeName]),this.headerOptions=this.getHeaderOptions(buildOptions),(buildOptions.refresh===!0||this.headerOptions.forceRefresh)&&this._build()},getHeaderOptions:function(buildOptions){var opts=$.extend(buildOptions.footer,buildOptions.toolBars)||{};return opts.showDevelopment=globals.isDvlpMode(),opts.showAuthoring=utils.isDesktop()===!0?opts.showAuthoring:!1,this.controller.state.type==="chartdetail"&&(opts.showAuthoring=!1),opts},applyMetaData:function(metaData,buildOptions){return},onMainPageResize:function(info,orientation){this.$$elmt.parent().css({width:info.contentWidth+"px"}),this._build(),this._updateHeaderStyle(this._deviceType)},getHeight:function(){return this.$$elmt.is(":visible")?this._height:0},_build:function(){var deviceType=globals.getSiteLayout().getDeviceType();if(this._deviceType!=null&&this._deviceType===deviceType)return;this._multiSelManager&&(this._multiSelManager.destroy(),this._multiSelManager=null),this._actionManager&&(this._actionManager.destroy(),this._actionManager=null),this._deviceType=deviceType,this.$$header&&this.$$header.remove(),this._height=uiSettings.getProp("header.height"),this.$$elmt.css({height:this._height+"px"});var $$parent=this.$$elmt.parent();$$parent.css({left:"0px",height:this._height+"px"});var opts=this.headerOptions,labels=locale.getProductLabels();opts.labelBrand=labels.brand,opts.labelProduct=labels.product;var actionController=this.getActionController(),displayController=this.controller,contentHtml;deviceType==="smartphone"?contentHtml=this._smartPhoneHtml(opts,displayController,actionController):contentHtml=this._tabletHtml(opts,displayController,actionController),this.$$header=$(_getHtml(null,"main",{contentHtml:contentHtml,deviceType:deviceType})),this.$$header.appendTo(this.$$elmt)},getActionController:function(){return this.controller},_updateHeaderStyle:function(deviceType){var self=this,$$header=self.$$elmt.find(".s-m-header"),$$links=self.$$elmt.find(".s-m-header-links"),$$nav=self.$$elmt.find(".s-m-header-nav"),$$label=self.$$elmt.find(".s-m-header-label"),offset=10;if(deviceType==="tablet")if(!self.controller.state.isWelcomePage){var maxWidth=$$header.width()-($$nav[0].scrollWidth+$$links[0].scrollWidth+offset);$$label.css("max-width",maxWidth)}else{$$label.css("max-width","inherit");var $$brand=self.$$elmt.find(".s-m-header-brand"),hideLabel=$$brand.width()+$$label.width()+$$nav.width()+$$links.width()+offset>$$header.width();$$label.toggle(hideLabel?!1:!0);var sum=$$brand.width()+$$nav.width()+$$links.width(),off=3;if(hideLabel==1&&sum>$$header.width())while(sum>$$header.width())$$brand.css("font-size",$$brand.css("font-size").match(/\d+/)[0]-off+"px"),off+=3,sum=$$brand.width()+$$nav.width()+$$links.width();else $$brand.css("font-size","2.5em")}else if(!self.controller.state.isWelcomePage){var maxWidth=$$header.width()-($$nav[0].scrollWidth+$$links[0].scrollWidth+offset);$$label.css("max-width",maxWidth)}},_tabletHtml:function(){var self=this,lknCtx={dropdownId:utils.UUID(),links:[]},opts=self.headerOptions,linksCpt=0;for(var p in _linksCtx)if(opts[p]===!0){var l=_linksCtx[p];l.items.forEach(function(x,idx){x=$.extend({},x),x.label=locale.text(x.label),x.ctrlId=self.id,x.icon=fontUtils.pageIcon(x.icon),idx===0&&lknCtx.links.length>1&&(x.divider=l.divider),lknCtx.links.push(x)})}var _mainCtx={showBack:opts.showHome||opts.showBack===!0,showHome:opts.showHome,showBrand:self.controller.state.isWelcomePage,labelBrand:opts.labelBrand||"Sage",labelProduct:opts.labelProduct||"ERP X3",headerLabel:self.controller.prototype.data("$title")},htmlUserInfo=_getHtml("tablet","userInfo",{username:globals.getUserName(),userrole:globals.getUserRole(),userPhotoUrl:globals.getUserPhotoUrl});return lknCtx.links.length===0?_mainCtx.userContent=_getHtml("tablet","infoOnly",{userInfo:htmlUserInfo}):(_mainCtx.userContent=_getHtml("tablet","dropDown",{userInfo:htmlUserInfo,dropDownMenu:_getHtml("tablet","dropDownMenu",lknCtx)}),self.$$elmt.css({overflow:"visible"})),_getHtml("tablet","main",_mainCtx)},_smartPhoneHtml:function(opts,displayController,actionController){var self=this;this.resetSmartphonePanels(),opts.showUserpanel&&(self._smphUserpanel=displayController.panelCreate(_userPanelId,opts));var showActions=opts.showActions!==!1;showActions&&opts.showActionpanel&&(self._smphPageactionpanel=displayController.panelCreate(_actionPanelId,opts));var backDom="",labelContent="",linksContent="";opts.showHome&&globals.getLookAndFeel()==="ios"&&(backDom=_getHtml("smartphone","backDom",{})),labelContent=self._getLabelContent(opts);var hasPanelLinks=self._smphPageactionpanel&&self._smphPageactionpanel.hasLinks();linksContent=self._getSmartphoneLinksContent(displayController,actionController,hasPanelLinks,showActions);var ctx={backDom:backDom,labelContent:labelContent,linksContent:linksContent,panelId:_userPanelId,ctrlId:self.id,showUserpanel:opts.showUserpanel===!0};return _getHtml("smartphone","main",ctx)},_getLabelContent:function(opts){function getContent(isLabelDom,labelVal,opts){return isLabelDom?_getHtml("smartphone","labelDom",{label:labelVal}):_getHtml("smartphone","brandDom",{labelBrand:opts.labelBrand||"Sage",labelProduct:opts.labelProduct||"ERP X3"})}var self=this,labelContent;return this.controller.state.isWelcomePage?labelContent=getContent(!1,null,opts):(labelContent=getContent(!0,self.controller.prototype.data("$title")),labelContent||(labelContent=getContent(!1,null,opts))),labelContent},_getSmartphoneLinksContent:function(displayController,actionController,hasPanelLinks,showActions){var linksContent="";this._multiSelManager=multiSelectionMgr.create(actionController,".s-m-header-nav, .s-m-header-labels, a:not(.s-m-ismultisel)"),notifications.subscribe(this,["sm.panel.multiselection.toggle"]),this._actionManager=actionManager.create(actionController,"header",{addCancelEditAction:"headerLink",addMultiSelection:this._multiSelManager&&!this.headerOptions.multiSelectionOnly&&actionController.isMultiSelectionEnabled(),multiSelectionOnly:this.headerOptions.multiSelectionOnly});var linksArr=this._actionManager.getLinks(),cc=[];hasPanelLinks&&cc.push(_getHtml("smartphone","actionPanelToggle",{panelId:_actionPanelId,ctrlId:this.id,title:"&nbsp;"}));if(showActions&&linksArr&&linksArr.length>0){var self=this;linksArr.forEach(function(ll,idx){cc.push(_getHtml("smartphone","actionLink",$.extend(ll,{ctrlId:self.id,$isHidden:ll.action==="multiSelection"})))})}return linksContent=cc.join(""),linksContent},_actHeaderLink:function(uuid){this._actionManager.triggerLink(uuid,this.getActionController()).then(function(success,link,data,options){}).fail(function(e){jsutils.isError(e)&&globals.getModal().error("Header action error (smartphone)",e)})},_actHeaderAction:function(id){var panel=id===_actionPanelId?this._smphPageactionpanel:this._smphUserpanel,side=id===_actionPanelId?"right":"left";this.controller.panelAttach(side,panel,"toggle")},_actLinkClicked:function(actionName){eventListener.triggerAction(this.$$elmt,actionName)},notifPanelMultiselectionToggle:function(uuid,$$target){this.toggleMultiSelection()},toggleMultiSelection:function(){this._actMultiSelection(),this.$$elmt.find('[data-action="multiSelection"]').show()},_actMultiSelection:function(uuid,$$target){var $$hLinks=this.$$elmt.find(".s-m-header-links"),enabled=this._multiSelManager.toggle(this,$$hLinks,"dropdown");$$hLinks.width(enabled?"100%":"initial"),this.$$elmt.find(".s-m-header-nav, .s-m-header-labels, a:not(.s-m-ismultisel)").toggle(!enabled),this.$$elmt.find('[data-action="multiSelection"]').toggle(enabled)},notifToggled:function(shown){if(shown===!1){this._multiSelManager&&this._multiSelManager.disable();return}},detach:function(){this.notifToggled(!1),this.$$elmt&&this.$$elmt.detach()}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/ctrlPageHeader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/ctrlHeaderBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/ctrlHeaderBase").Klass,_Klass=utils.defineClass(function CtrlPageHeader($type,controller,options){Base.call(this,$type,controller,options)},Base,{destroy:function(){Base.prototype.destroy.call(this)},getHeaderOptions:function(buildOptions,device){var stdOpts=Base.prototype.getHeaderOptions.call(this,buildOptions);return stdOpts.showUserpanel=!0,stdOpts.showActionpanel=!0,stdOpts}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/ctrlFooterBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/uiSettings","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/actionManager","syracuse-tablet/html/js/application/multiSelectionMgr","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,globals=require("syracuse-tablet/html/js/helpers/globals"),actionManager=require("syracuse-tablet/html/js/application/actionManager"),multiSelectionMgr=require("syracuse-tablet/html/js/application/multiSelectionMgr"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),prototype=require("syracuse-tablet/html/js/helpers/prototype"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),locale=require("syracuse-tablet/html/js/helpers/locale"),_actionPanelId=globals.PANELACTIONSREGULAR,_templates={main:'		<div class="s-m-footer s-m-opened container-fluid {{deviceType}}">			{{{contentHtml}}}		</div>',tablet:{main:'			<div class="s-m-footer-left">				{{#if homeLink}}{{{homeLink}}}{{/if}}				{{#if configLink}}{{{configLink}}}{{/if}}				{{#if pinPage}}{{{pinPage}}}{{/if}}				{{#if nativeShare}}{{{nativeShare}}}{{/if}}			</div>			<div class="s-m-footer-right">				{{#if rightLinks}}{{{rightLinks}}}{{/if}}			</div>		',rightLinks:'			{{#each links}}				<a draggable="false"  href="#" class="s-m-link {{css}}" data-action="{{#if action}}{{action}}{{else}}footerLink{{/if}}" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">					<i class="{{icon}}"/>					<span>{{{title}}}</>				</a>			{{/each}}		',action:'			<a href="#" class="s-m-link" data-action="{{action}}">				<i class="{{icon}}"/>				<span>{{{title}}}</span>			</a>'},smartphone:{main:""}},_getHtml=function(type,name,ctx){type=type||"";var key=type+name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=type.length==0?_templates[name]:_templates[type][name],tmpl=_templates[key]=Handlebars.compile(tmpl)),tmpl||alert("footer template "+name+" not found"),tmpl(ctx)},_Klass=utils.defineClass(function($type,controller,options){Base.call(this,controller,{$bind:"footer"},prototype.create({$type:$type}),options),this._actionManager=null,this._multiSelManager=null,this._actionPanel=null},Base,{destroy:function(){this._actionManager&&(this._actionManager.destroy(),this._actionManager=null),this._multiSelManager&&(this._multiSelManager.destroy(),this._multiSelManager=null),this.resetActionPanel(),Base.prototype.destroy.call(this),notifications.unsubscribe(this)},getPageControlType:function(){return"footer"},getActionController:function(){return this.controller},resetActionPanel:function(){this._actionPanel&&(this._actionPanel.destroy(),this._actionPanel=null)},buildHtml:function($$parent,controllerDao,buildOptions){buildOptions=buildOptions||{},Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions,[this.typeName]),this.footerOptions=this.getFooterOptions(buildOptions),this._$$parent=this.$$elmt.closest("footer"),(buildOptions.refresh===!0||this.footerOptions.forceRefresh)&&this._build()},getFooterOptions:function(buildOptions){return $.extend(buildOptions.footer,buildOptions.toolBars)||{}},applyMetaData:function(metaData,buildOptions){return},_actFooterLink:function(uuid){this._actionManager.triggerLink(uuid,this.getActionController()).then(function(success,link,data,options){}).fail(function(e){jsutils.isError(e)&&globals.getModal().error("Footer action error",e)})},_actMultiSelection:function(uuid,$$target){this.toggleMultiSelection()},toggleMultiSelection:function(){this._multiSelManager&&this._multiSelManager.toggle(this,this.$$elmt.find(".s-m-footer-right"),"dropup")},_actFooterAction:function(id){id===_actionPanelId&&this.controller.panelAttach("right",this._actionPanel,"toggle")},onMainPageResize:function(info,orientation){var deviceType=globals.getSiteLayout().getDeviceType();this._build(deviceType),this.$$footer?(this._$$parent.css({top:info.contentHeight-this._height+"px",width:info.contentWidth+"px"}),this._$$parent.show()):this.resetActionPanel()},getHeight:function(){return this._height},_build:function(deviceType){deviceType=deviceType||globals.getSiteLayout().getDeviceType();if(this._deviceType!=null&&this._deviceType===deviceType)return;this._deviceType=deviceType,this.$$footer&&(this.$$footer.remove(),this.$$footer=null);if(deviceType==="smartphone")return;this._height=uiSettings.getProp("footer.height"),this._$$parent.css({left:"0px",height:this._height+"px"});var htmlCtx={},actionController=this.getActionController(),displayController=this.controller;this._multiSelManager||(this._multiSelManager=multiSelectionMgr.create(actionController));var contentHtml;this._actionManager=actionManager.create(actionController,"footer",{addCancelEditAction:"footerLink",addMultiSelection:!this.footerOptions.multiSelectionOnly&&actionController.isMultiSelectionEnabled(),multiSelectionOnly:this.footerOptions.multiSelectionOnly}),this._addActionMgrHtmlCtx(htmlCtx,actionController,displayController),this.$$footer=$(_getHtml(null,"main",{contentHtml:_getHtml("tablet","main",htmlCtx),deviceType:deviceType})),this.$$footer.appendTo(this.$$elmt)},_addActionMgrHtmlCtx:function(ctx,actionController,displayController){if(!this._actionManager)return;var showActions=this.footerOptions.showActions!==!1,rightLinks;showActions&&this._actionManager.hasLinks()&&(rightLinks=this._actionManager.getLinks()),showActions&&!this._actionPanel&&actionController.state.type==="regular"&&(this._actionPanel=displayController.panelCreate(_actionPanelId)),this._actionPanel&&this._actionPanel.hasLinks()&&(rightLinks||(rightLinks=[]),rightLinks.push({action:"footerAction",icon:fontUtils.pageIcon("sidePanelR"),$uuid:_actionPanelId,title:"&nbsp;"}));if(rightLinks){var ordered=[];for(var i=rightLinks.length-1;i>=0;i--)ordered.push(rightLinks[i]);ctx.rightLinks=_getHtml("tablet","rightLinks",{ctrlId:this.id,links:ordered})}this.footerOptions.showHome&&(ctx.homeLink=_getHtml("tablet","action",{action:"home",icon:fontUtils.pageIcon("home"),title:locale.text("action.home")})),this.footerOptions.showPageConfig&&(ctx.configLink=_getHtml("tablet","action",{action:"pageConfig",icon:fontUtils.pageIcon("pageConfig"),title:locale.text("action.pageConfig")})),this.footerOptions.statusPinPage>0&&(ctx.pinPage=_getHtml("tablet","action",{action:"pinPage",icon:fontUtils.pageIcon("pinPage_"+this.footerOptions.statusPinPage),title:locale.text(this.footerOptions.statusPinPage===1?"action.pin":"action.unpin")})),this.footerOptions.showNativeShare&&(ctx.nativeShare=_getHtml("tablet","action",{action:"nativeShare",icon:fontUtils.pageIcon("nativeShare"),title:locale.text("action.nativeShare")}))},notifToggled:function(shown){if(shown===!1){this._multiSelManager&&this._multiSelManager.disable();return}},detach:function(){this.notifToggled(!1),this.$$elmt&&this.$$elmt.detach()}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/ctrlPageFooter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/controls/page/ctrlFooterBase","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),Base=require("syracuse-tablet/html/js/controls/page/ctrlFooterBase").Klass,fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_Klass=utils.defineClass(function($type,controller,options){Base.call(this,$type,controller,options),notifications.subscribe(this,["sm.page.pin.state.change"])},Base,{notifPagePinStateChange:function(newState){var $$root=this.$$elmt.find("[data-action=pinPage]"),$$icon=$$root.find("i");$$icon.length>0&&($$icon.attr("class",fontUtils.pageIcon("pinPage_"+newState)),$$root.find("span").text(locale.text(newState===1?"action.pin":"action.unpin")))}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/ctrlVignetteFooter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/ctrlFooterBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/ctrlFooterBase").Klass,_Klass=utils.defineClass(function($type,vignette,options){Base.call(this,$type,vignette.controller,options),this._vignette=vignette},Base,{destroy:function(){Base.prototype.destroy.call(this),this._vignette=null},getFooterOptions:function(buildOptions){return{showHome:!1,showPageConfig:!1,statusPinPage:!1,multiSelectionOnly:this.options.multiSelectionOnly===!0,forceRefresh:!0}},getActionController:function(){return this._vignette?this._vignette.getPage():null},notifToggled:function(shown){Base.prototype.notifToggled.call(this,shown),shown===!0&&this._multiSelManager&&this.toggleMultiSelection()}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/ctrlVignetteHeader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/ctrlHeaderBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/ctrlHeaderBase").Klass,_Klass=utils.defineClass(function($type,vignette,options){Base.call(this,$type,vignette.controller,options),this._vignette=vignette},Base,{destroy:function(){Base.prototype.destroy.call(this),this._vignette=null},getHeaderOptions:function(buildOptions){return{showHome:!1,showAuthoring:!1,showDevelopment:!1,showUserpanel:!0,showActionpanel:!1,multiSelectionOnly:this.options.multiSelectionOnly===!0,forceRefresh:!0}},getActionController:function(){return this._vignette.getPage()},notifToggled:function(shown){Base.prototype.notifToggled.call(this,shown),shown===!0&&this._multiSelManager&&this.toggleMultiSelection()}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/sidePanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/application/eventListener"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,prototype=require("syracuse-tablet/html/js/helpers/prototype"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),_Klass=utils.defineClass(function(controller,$type,panelId,options){this.panelId=panelId,this.actionManager=null,this.closeBox=options.closeBox===!0,this.overlap=options.overlap!==!1,Base.call(this,controller,{$bind:this.panelId+"panel"},prototype.create({$type:$type}),options)},Base,{destroy:function(){this.actionManager&&(this.actionManager.destroy(),this.actionManager=null),Base.prototype.destroy.call(this)},buildHtml:function(side){this.side=side,Base.prototype.buildHtml.call(this,null,this.controller.dao,{},[this.typeName]),this.$$elmt.hide()},attach:function($$parent,side){this.$$elmt&&this.side!=null&&side!=this.side&&(this.$$elmt.remove(),this.$$elmt=null),this.$$elmt||this.buildHtml(side),this.isAttached()&&(console.log("sidePanel.attach - Unexpected attached $$elmt"),this.detach());if(!$$parent)return;$$parent.append(this.$$elmt)},isAttached:function(side){return this.$$elmt!=null&&this.$$elmt.closest(".s-m-panel").length>0&&this.side==side},detach:function(){if(!this.$$elmt)return;this.$$elmt.detach()},isEnabled:function(){return!0},notifyToggled:function(side,action,visible){},applyMetaData:function(metaData,buildOptions){return},onClick:function(evt){this.close()},close:function(){eventListener.triggerAction(this.$$elmt,"toggleSidePanel","close,"+this.side)},setActionManager:function(amgr){this.actionManager&&this.actionManager.destroy(),this.actionManager=amgr},_actActionLink:function(uuid){return this.actionManager?this.actionManager.triggerLink(uuid,this.controller).then(function(success,link,data,options){}).fail(function(){}):$.smResolve()},hasLinks:function(){throw new Error("Not implemented")}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/actionPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sidePanel","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/ui/rect"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/panels/sidePanel").Klass,HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,uiRect=require("syracuse-tablet/html/js/ui/rect"),_templates={main:'			<nav class="navbar s-m-side-panel {{side}} navbar-inverse ctrl-evt-click" role="navigation">				<div class="s-m-scroll-elmt">					{{#each items}}						{{#if html}}							{{#if title}}								<div class="container-fluid">									<div class="navbar-header">										<span class="navbar-brand" href="#"><span>{{title}}</span></a>									</div>								</div>							{{/if}}							<ul class="nav navbar-nav">								{{{html}}}							</ul>						{{/if}}					{{/each}}				</div>			</nav>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl||alert("template "+name+" not found"),tmpl(ctx)},_Klass=utils.defineClass(function(controller,$type,panelId,options){this.enableGesture=options.enableGesture!==!1,Base.call(this,controller,$type,panelId,options)},Base,{destroy:function(){Base.prototype.destroy.call(this),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},buildHtml:function(side){Base.prototype.buildHtml.call(this,side),this.$$elmt.addClass(this.typeName);var context={ctrlId:this.id,side:side};this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null),this.$$panel&&this.$$panel.remove(),this.$$panel=this.buildPanel(context,side),this.$$panel&&this.$$panel.length&&this.$$elmt.append(this.$$panel)},buildPanel:function(context,side){return $(_getHtml("main",context))},isEnabled:function(){return!0},notifyToggled:function(side,action,visible){this.enableGesture&&visible&&this.updateGesture()},updateGesture:function(){if(this.$$elmt.is(":visible")&&this.$$panel){this._gestureMgr||(this.$$scrollElmt=this.$$panel.find(".s-m-scroll-elmt"),this.$$scrollElmt.css({height:"auto",position:"relative"}),this.$$scrollWrapper=this.$$panel,this._gestureMgr=new HammerScroller(this.$$scrollElmt,{direction:"v",valMax:0,name:this.$bind,isPageScroller:!1}));var scrollRect=uiRect.elmtRect(this.$$scrollElmt,"outer"),wrapperRect=uiRect.elmtRect(this.$$scrollWrapper,"outer"),viewRect=wrapperRect.intersectRect(scrollRect);viewRect&&!viewRect.contains(scrollRect)?this._gestureMgr.init(viewRect):this._gestureMgr.reset()}else this._gestureMgr&&this._gestureMgr.reset()}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/pageActionPanelRegular",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/page/panels/actionPanel","syracuse-tablet/html/js/application/actionManager","syracuse-tablet/html/js/application/multiSelectionMgr","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),globals=require("syracuse-tablet/html/js/helpers/globals"),Base=require("syracuse-tablet/html/js/controls/page/panels/actionPanel").Klass,actionManager=require("syracuse-tablet/html/js/application/actionManager"),multiSelectionMgr=require("syracuse-tablet/html/js/application/multiSelectionMgr"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_templates={actionLink:'	{{#each links}}		<li class="s-m-link">			<a draggable="false" href="#" class="{{css}}" data-action="actionLink" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">				<i style="font-size: large" class="{{icon}}"/>				<span>{{title}}</span>			</a>		</li>	{{/each}}	{{#if links}}	{{#if actions}}		<li class="s-m-separator">&nbsp;</li>	{{/if}}	{{/if}}	{{#each actions}}		<li class="s-m-action">			<a draggable="false" href="#" class="{{css}}" data-action="actionLink" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">				<i style="font-size: large" class="{{icon}}"/>				<span>{{title}}</span>			</a>		</li>	{{/each}}'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_Klass=utils.defineClass(function(controller,$type,panelId,options){Base.call(this,controller,$type,panelId,options)},Base,{destroy:function(){this._multiSelManager&&(this._multiSelManager.destroy(),this._multiSelManager=null),Base.prototype.destroy.call(this)},buildPanel:function(context,side){this.actionManager||this._createActionManager(),context.items=[];if(this._smartPhoneMultiselLink()){this._multiSelManager=multiSelectionMgr.create(this.controller);var info=this.actionManager.getMultiSelectionLink();info.$isAction=!0,info.$uuid="togglemultiselection",context.items.push({title:null,html:_getHtml("actionLink",{ctrlId:this.id,links:[info]})})}var backToList;this._smartPhoneBackToQueryLink()&&(backToList=this.controller.getProtoLinks("$query").$query,this.actionManager.addLink(backToList),context.items.push({title:locale.text("actionpanel.label.links"),html:_getHtml("actionLink",{ctrlId:this.id,links:[backToList]})}));if(this._hasActionLinks()){var exclude=[backToList?backToList.$uuid:null];context.items.push({title:locale.text("actions"),html:_getHtml("actionLink",{ctrlId:this.id,links:this.actionManager.getLinks(exclude,[{$isAction:!1}]),actions:this.actionManager.getLinks(exclude,[{$isAction:!0}])})})}return Base.prototype.buildPanel.call(this,context)},_smartPhoneMultiselLink:function(){return globals.isSmartphone()&&this.controller.isMultiSelectionEnabled()},_smartPhoneBackToQueryLink:function(){return globals.isSmartphone()&&this.controller.prototype.isDetails()&&this.controller.getProtoLinks("$query")!=null},_hasActionLinks:function(){return this._createActionManager().hasLinks()},_actActionLink:function(uuid,$$target,evt){evt&&evt.stopPropagation(),this.close("close");if(uuid==="togglemultiselection"){notifications.publish("sm.panel.multiselection.toggle");return}return Base.prototype._actActionLink.call(this,uuid)},_createActionManager:function(){return this.actionManager?this.actionManager:(this.setActionManager(actionManager.create(this.controller,"actionpanel")),this.actionManager)},hasLinks:function(){return this._hasActionLinks()||this._smartPhoneBackToQueryLink()||this._smartPhoneMultiselLink()},_actActionNavigation:function(uuid,$$target,evt){return evt&&evt.stopPropagation(),this.actionManager?this.actionManager.triggerLink(uuid,this.controller).then(function(success,link,data,options){}).fail(function(){}):$.smResolve()}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_Klass=utils.defineClass(function(panel,id,options){this.id=id,this.options=options||{},this.panel=panel,this.$$tab=this.panel.$$panel.find('[href="#'+id+'"]'),this.$$tab.on("shown.bs.tab",jsutils.bindFn(this.onTabShown,this)),this.$$content=this.panel.$$panel.find("#"+this.id),this.$$content.on("click","[data-params]",jsutils.bindFn(this.onTabContentClick,this))},null,{destroy:function(){this.panel=null,this.$$tab.unbind(),this.$$tab.remove(),this.$$tab=null,this.$$content.unbind(),this.$$content.remove(),this.$$content=null},hide:function(){this.$$tab.parent().hide(),this.$$content.hide()},setWidth:function(w){this.$$tab.parent().width(w)},triggerActivate:function(){var self=this;self.$$tab.parent().hasClass("active")?self.onTabShown():window.setTimeout(function(){self.$$tab.tab("show")})},onTabShown:function(event){this.panel.notifyActiveTab(this)},buildHtml:function(){},onTabContentClick:function(evt){evt.preventDefault(),evt.stopPropagation(),this.doContentAction(evt,$(evt.target),$(evt.target).attr("data-params"))},doContentAction:function(evt,$$target,params){},doActionApply:function(evt,$$target){},onResize:function(context){},notifyOpenPanel:function(){},notifyClosePanel:function(){}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabSort",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/hammerScroller"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase").Klass,fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),uiRect=require("syracuse-tablet/html/js/ui/rect"),HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,_templates={main:'		<div id="sorttabroot" class="s-m-scroll-wrapper">			<ul class="list-group"/>		</div>',items:'		{{#each items}}			<li class="list-group-item" data-params="{{id}}">				<span>{{name}}</span>				<span class="s-m-order '+fontUtils.sortIcon("desc")+'  {{#smCompare sort "desc"}}enabled{{/smCompare}}" data-params="desc"></span>				<span class="s-m-order '+fontUtils.sortIcon("asc")+'  {{#smCompare sort "asc"}}enabled{{/smCompare}}" data-params="asc"></span>			</li>		{{/each}}'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_Klass=utils.defineClass(function(panel,id,options){Base.call(this,panel,id,options),options.hidden=options.hidden===!0||this.panel.getParentArray().sortInfoGet(!1).length===0,this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null),this.$$content.append($(_getHtml("main",{}))),this.$$scrollWrapper=this.$$content.find(".s-m-scroll-wrapper"),this.$$list=this.$$scrollWrapper.find("ul.list-group"),this.$$list.css({height:"auto",position:"relative"}),this._gestureMgr=new HammerScroller(this.$$list,{direction:"v",valMax:0,name:"SORTTAB",isPageScroller:!1})},Base,{destroy:function(){Base.prototype.destroy.call(this),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},doActionApply:function(evt,$$target){var status={};return this.$$content.find(".s-m-order.enabled").each(function(idx,$$e){$$e=$($$e),status[$$e.parent().attr("data-params")]=$$e.attr("data-params")}),this.sortInfo.forEach(function(i){i.sort=status[i.id]||"none"}),this.panel.getParentArray().sortInfoSet($.extend(!0,[],this.sortInfo),!0),!0},doContentAction:function(evt,$$target,dataParams){if(dataParams!=="none"&&$$target.hasClass("enabled")){$$target.removeClass("enabled");return}(this.options.singleCriteria===!0?this.$$content:$$target.parent()).find(".s-m-order.enabled").removeClass("enabled"),dataParams!=="none"&&$$target.addClass("enabled")},onResize:function(context){Base.prototype.onResize.call(this,context),this.$$content.is(":visible")&&this.updateGesture(context)},updateGesture:function(context){if(!this._gestureMgr)return;var wrapperRect=uiRect.elmtRect(this.$$scrollWrapper,"outer"),panelRect=uiRect.elmtRect(this.panel.$$elmt,"outer"),viewRect=wrapperRect.intersectRect(panelRect);viewRect&&!viewRect.contains(wrapperRect)?this._gestureMgr.init(viewRect):this._gestureMgr.reset()},notifyClosePanel:function(){Base.prototype.notifyClosePanel.call(this),this.$$items&&(this.$$items.remove(),this.$$items=null),this.sortInfo=null},onTabShown:function(){Base.prototype.onTabShown.call(this),this.$$items||(this.sortInfo=$.extend(!0,[],this.panel.getParentArray().sortInfoGet()),this.$$items=$(_getHtml("items",{items:this.sortInfo})),this.$$list.append(this.$$items),this.updateGesture())}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/helpers/formController",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/controller"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),reqProto=require("syracuse-tablet/html/js/helpers/prototype"),Base=require("syracuse-tablet/html/js/helpers/controller").Klass,_createProto=function(protoJson,protoParent,baseUrl){return!protoParent&&baseUrl&&(protoJson.$baseUrl=baseUrl),reqProto.create(protoJson,protoParent)},_createArticle=function(proto){var article={$layoutType:"stack",$items:[]},protoJson=proto.data("$properties");return Object.keys(protoJson).forEach(function(key){protoJson[key].$isExcluded||article.$items.push({$bind:key})}),article},_Klass=utils.defineClass(function(id,proto,article,dao,options){article==null&&(article=_createArticle(proto)),Base.call(this,id,proto,article,options),this.setActivity(this.options.$activity),this.setDao(dao)},Base,{destroy:function(){Base.prototype.destroy.call(this)},render:function($$parent,opts){this.rootLayout==null&&this.buildControlsTree();var opts=$.extend(opts,{afterRender:!0});Base.prototype.render.call(this,$$parent,opts)},makeVisible:function(c){}});exports.createProto=_createProto,exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilterEdit",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/formController","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/application/daoSdata","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/fieldOperators"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),formController=require("syracuse-tablet/html/js/helpers/formController"),uiRect=require("syracuse-tablet/html/js/ui/rect"),HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,prototype=require("syracuse-tablet/html/js/helpers/prototype"),daoSdata=require("syracuse-tablet/html/js/application/daoSdata"),locale=require("syracuse-tablet/html/js/helpers/locale"),fieldOperators=require("syracuse-tablet/html/js/helpers/fieldOperators"),_templates={main:'		<section id="formtabroot">			<div class="s-m-scroll-wrapper">				<div id="formtabform"/>			</div>			<div class="btn-group btn-group-justified" role="group">				<a type="button" class="btn btn-default" data-params="cancelFilterEdit">					<i class="fa fa-times" data-params="cancelFilterEdit"></i>				</a>				<a type="button" class="btn btn-default disabled" data-params="submitFilterEdit">					<i class="fa fa-check" data-params="submitFilterEdit"></i>				</a>			</div>		</section>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_buildOperatorsEnum=function(operators){var res=[];return $.each(operators,function(idx,op){res.push({$value:op,$title:locale.text("field.operator."+op)})}),res},FormKlass=utils.defineClass(function(proto,dao,gestureMgr,filtersMap,$$formParent){formController.Klass.call(this,utils.readableuid("FILTERFORM"),proto,null,dao,{$activity:"edit"}),this.$$formParent=$$formParent,this.filtersMap=filtersMap,this.gestureMgr=gestureMgr,this.addEventListener("change",this.onEvtChange),this.addEventListener("blur",this.onEvtBlur)},formController.Klass,{destroy:function(){formController.Klass.prototype.destroy.call(this),this.gestureMgr=null},onEvtChange:function(when,ctrl,$$target,event){var self=this;if(when==="before"){var res=!1;switch(ctrl.$bind){case"FIELDS":if($$target.val()==0){this._toggleSave(!1);return}this._toggleSave(!0);var fm=self.filtersMap[$$target.val()-1],operators=fm.operators,$newEnum=_buildOperatorsEnum(operators),newData={$properties:{OPERATORS:{$value:{$enum:$newEnum},$isReadOnly:!1}},OPERATORS:$newEnum[0].$value};self.keyToHide&&(newData.$properties[self.keyToHide]={$isHidden:!0});var keyToShow=fm.isReference?fm.id:"VALUE-"+fm.id;newData.$properties[keyToShow]={$isHidden:!1},self.keyToHide=keyToShow,window.setTimeout(function(){self.applyChange($.extend(!0,{},newData))});break;case"OPERATORS":}return res}},onEvtBlur:function(when,ctrl,$$target,event){},validateForm:function(){var self=this,res=!0;return this.forEachControl(function(id,ctrl){var bind=ctrl.$bind;ctrl.prototype.isReference(bind)&&(bind=ctrl.prototype.getFieldNameForValue(bind)),res=bind==="OPERATORS"||bind!=="FIELDS"||bind!==self.keyToHide?res:ctrl.checkData()?res:!1}),res},applyChange:function(newData){formController.Klass.prototype.applyChange.call(this,newData),this._toggleSave(newData!=null&&!$.isEmptyObject(newData))},render:function($$parent,buildOpts){formController.Klass.prototype.render.call(this,$$parent,buildOpts),this._toggleSave(!1)},_toggleSave:function(enable){$("a[data-params='submitFilterEdit']",this.$$formParent).toggleClass("disabled",!enable)}}),_Klass=utils.defineClass(function(parentTab){this.controller=null,this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null),this.$$content=$(_getHtml("main",{})),this.$$scrollWrapper=this.$$content.find(".s-m-scroll-wrapper"),this.$$ScrollElmt=this.$$scrollWrapper.children("#formtabform"),this.$$ScrollElmt.css({height:"auto",position:"relative"}),this._gestureMgr=new HammerScroller(this.$$ScrollElmt,{direction:"v",valMax:0,name:"FORMTAB",isPageScroller:!1}),this.parentTab=parentTab,this.panel=parentTab.panel},null,{updateGesture:function(){if(!this._gestureMgr)return;var wrapperRect=uiRect.elmtRect(this.$$scrollWrapper,"outer"),panelRect=uiRect.elmtRect(this.panel.$$elmt,"outer"),viewRect=wrapperRect.intersectRect(panelRect);viewRect&&!viewRect.contains(wrapperRect)?this._gestureMgr.init(viewRect):this._gestureMgr.reset()},create:function($$container){var self=this;self.$$content.parent().length==0&&$$container.append(self.$$content),self.$$ScrollElmt.empty();var array=self.panel.getParentArray(),protoJson,dataJson,res=self._buildProtoJson();protoJson=res.protoJson,dataJson=res.dataJson;var proto=formController.createProto(protoJson,null,array.prototype.data("$baseUrl")),dao=new daoSdata.Dao($.extend(!0,{},dataJson),proto);self.controller=new FormKlass(proto,dao,self._gestureMgr,self.filtersMap,self.$$content),self.controller.render(self.$$ScrollElmt,{}),self.updateGesture(),self.initData&&window.setTimeout(function(){self.controller.applyChange($.extend(!0,{},self.initData),!0),self.controller.keyToHide=self.initKeyToHide})},_getFiltersMap:function(){var self=this;return self.filtersMap=self.filtersMap||self.panel.getParentArray().filterMapGet(),self.filtersMap},_buildProtoJson:function(){var self=this,choiceData={};self.filtersMap=self._getFiltersMap();var protoJson={$properties:{FIELDS:{$title:locale.text("panels.array.filterForm.field"),$type:"application/x-choice",$capabilities:"sort,filter",$value:{$type:"application/x-integer",$enum:[]},$isMandatory:!0},OPERATORS:{$title:locale.text("panels.array.filterForm.operator"),$type:"application/x-choice",$capabilities:"sort,filter",$value:{$type:"application/x-string",$enum:[]},$isReadOnly:!0}},$localization:self.panel.getParentArray().prototype.data("$localization")};for(var ii=0,jj=self.filtersMap.length;ii<jj;ii++){var ff=self.filtersMap[ii],key="VALUE-"+ff.id;protoJson.$properties[key]={$title:locale.text("panels.array.filterForm.value"),$type:ff.prop.$type,$isHidden:!0,$item:ff.prop.$item,$value:ff.prop.$value},ff.isReference&&(protoJson.$properties[ff.prop.$bindValue]={$type:protoJson.$properties[ff.prop.$bindType],$isHidden:!0,$isExcluded:!0}),ff.prop.$type.indexOf("choice")>=0?choiceData[key]=ff.prop.$value.$enum[0].$value:ff.prop.$type.indexOf("boolean")>=0&&(choiceData[key]=!0,protoJson.$properties[key].$format="$switch")}var $fieldEnum=[];$fieldEnum.push({$value:0,$title:locale.text("panels.array.filterForm.fieldDefault")}),$.each(self.filtersMap,function(idx,ff){$fieldEnum.push({$value:idx+1,$title:ff.fieldName})}),protoJson.$properties.FIELDS.$value.$enum=$fieldEnum;var $operatorDefEnum=[],operators=fieldOperators.getOperators();protoJson.$properties.OPERATORS.$value.$enum=_buildOperatorsEnum(operators);var result={protoJson:protoJson,dataJson:choiceData};return result},doActionApply:function(evt,$$target){if(!this.controller)return;this.controller.checkControlsData()?globals.getModal().info("Data are valid"):globals.getModal().error("Data are invalid")},doContentAction:function(evt,$$target,params){var self=this;switch(params){case"submitFilterEdit":self.onFilterEditSubmit();break;case"cancelFilterEdit":self.onCancelEdit()}},onFilterEditSubmit:function(){var self=this;if(self.controller.validateForm()){self.filtersMap=self._getFiltersMap();var dao=self.controller.dao.data,filterMapIdx=parseInt(dao.FIELDS,10)-1,operator=dao.OPERATORS,value=dao["VALUE-"+self.filtersMap[filterMapIdx].id],prop=self.filtersMap[filterMapIdx].prop,info={filterMapIdx:filterMapIdx,fieldName:self.filtersMap[filterMapIdx].fieldName,operatorLabel:locale.text("field.operator."+operator),value:self._getValue(prop,value),operator:operator,id:self.filtersMap[filterMapIdx].id,prop:prop,originalValue:value,isReference:self.filtersMap[filterMapIdx].isReference};self.filterTab=self.filterTab||self.panel.getTabs().filter,self.filterTab.onFilterUpdate(info,!isNaN(parseInt(self.initIdx,10))&&self.initIdx>=0?self.initIdx:null),self._onTabClose()}},_getValue:function(prop,value){var self=this,vv;return typeof value=="object"?vv=value.$value||value.$description||value.$title:prop.$type.indexOf("choice")>=0?vv=prop.$value.$type.indexOf("integer")>=0?self.controller.prototype.resolveExpression(prop.$value.$enum[parseInt(value-1,10)].$title):value:vv=value,vv},onCancelEdit:function(){var self=this;self._onTabClose(),self.parentTab.toggleList(!0)},setInitData:function(info,initIdx){var self=this;self.filtersMap=self._getFiltersMap();var filterMapIdx=info.filterMapIdx,ff=self.filtersMap[filterMapIdx];self.initData={$properties:{OPERATORS:{$value:{$enum:_buildOperatorsEnum(ff.operators)},$isReadOnly:!1}},FIELDS:filterMapIdx+1,OPERATORS:info.operator},self.initData["VALUE-"+ff.id]=info.originalValue;var bind=ff.isReference?ff.id:"VALUE-"+ff.id;self.initData.$properties[bind]={$isHidden:!1},self.initIdx=initIdx,self.initKeyToHide=bind},_onTabClose:function(){var self=this;self.controller.destroy(),self.controller=null,self.initData=null,self.initIdx=null},destroy:function(){this.controller&&(this.controller.destroy(),this.controller=null),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null),this.$$content=null,this.$$scrollWrapper=null,this.parentTab=null,this.panel=null}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilterEdit","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase").Klass,FilterEdit=require("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilterEdit").Klass,fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),_templates={main:'		<div class="s-m-scroll-wrapper">			<section id="filterlist">				<div id="filterListEmpty" style="display:none">{{emptyList}}</div>				<ul class="list-group"/>				<div class="btn-group btn-group-justified" role="group">					<a type="button" class="btn btn-default" data-params="addFilter">						<i class="fa fa-plus" data-params="addFilter"></i>						<span data-params="addFilter">{{addFilter}}</span>					</a>				</div>			</section>			<section id="filteredit">			</section>		</div>',items:'		{{#each items}}			<li class="list-group-item" data-params="{{id}}">				<span class="s-m-filter-info"> 					<span class="s-m-filter-field">{{fieldName}}</span>					<span class="s-m-filter-operator">{{operatorLabel}}</span>					<span class="s-m-filter-value">{{value}}</span>				</span>				<span class="s-m-filter '+fontUtils.filterIcon("edit")+'" data-params="edit"></span>				<span class="s-m-filter '+fontUtils.filterIcon("delete")+'" data-params="delete"></span>			</li>		{{/each}}'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_Klass=utils.defineClass(function(panel,id,options){Base.call(this,panel,id,options),this.$$content.append($(_getHtml("main",{addFilter:locale.text("panels.array.addFilter"),emptyList:locale.text("panels.array.emptyList")}))),this.$$listSection=this.$$content.find("#filterlist"),this.$$list=this.$$listSection.find(".list-group"),this.$$editSection=this.$$content.find("#filteredit"),this.$$emptyList=this.$$content.find("#filterListEmpty")},Base,{onTabShown:function(){var self=this;Base.prototype.onTabShown.call(this),self.initOpened||(this.updateFilterList(),self.initOpened=!0)},updateFilterList:function(){var self=this;self.$$emptyList.toggle(!1),self.$$list.empty(),self.filterInfo=self.filterInfo||$.extend(!0,[],self.panel.getParentArray().filterInfoGet());if(self.filterInfo&&self.filterInfo.length>0){self.$$list.empty();var $$items=$(_getHtml("items",{items:self.filterInfo}));self.$$list.append($$items)}else self.$$emptyList.toggle(!0)},doActionApply:function(evt,$$target){return this.panel.getParentArray().filterInfoSet($.extend(!0,[],this.filterInfo),!0),!0},doContentAction:function(evt,$$target,dataParams){var self=this;if(!dataParams)return;switch(dataParams){case"addFilter":self._openFilterEdit();break;case"cancelFilterEdit":self.filterEdit.onCancelEdit();break;case"submitFilterEdit":self.filterEdit.onFilterEditSubmit();break;case"delete":var idx=$$target.closest("li").index();self._onFilterDelete(idx);break;case"edit":var idx=$$target.closest("li").index();self._openFilterEdit(idx);break;default:return}},_onFilterDelete:function(idx){var self=this;self._isIndexValid(idx)&&(self._removeFilter(idx),self.updateFilterList())},_addFilter:function(newFilterInfo){var self=this;self.filterInfo.push(newFilterInfo)},_removeFilter:function(idx){var self=this;self._isIndexValid(idx)&&self.filterInfo.splice(idx,1)},_updateFilter:function(idx,updateFilterInfo){var self=this;self._isIndexValid(idx)&&self.filterInfo.splice(idx,1,updateFilterInfo)},_onCancelEdit:function(){var self=this;self.$$editSection.empty(),self.$$listSection.toggle(!0)},_openFilterEdit:function(filterIdx){var self=this;self.filterEdit=self.filterEdit||new FilterEdit(self),self._isIndexValid(filterIdx)&&self.filterEdit.setInitData(self.filterInfo[filterIdx],filterIdx),self.filterEdit.create(self.$$editSection),self.toggleList(!1)},_isIndexValid:function(idx){return!isNaN(parseInt(idx,10))&&idx>=0},onFilterUpdate:function(filterInfo,filterIdx){var self=this;self._isIndexValid(filterIdx)?self._updateFilter(filterIdx,filterInfo):self._addFilter(filterInfo),self.updateFilterList(),self.toggleList(!0)},toggleList:function(show){var self=this;self.$$listSection.toggle(show),self.filterEdit&&self.filterEdit.$$content.toggle(!show)},destroy:function(){var self=this;self.filterEdit&&(self.filterEdit.destroy(),self.filterEdit=null),self.filterInfo=null,Base.prototype.destroy.call(self)}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/filterSortPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/controls/page/panels/sidePanel","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabSort","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilter","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),Base=require("syracuse-tablet/html/js/controls/page/panels/sidePanel").Klass,_Sort=require("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabSort").Klass,_Filter=require("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilter").Klass,locale=require("syracuse-tablet/html/js/helpers/locale"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_templates={main:'		<section class="s-m-side-panel {{side}}">			<ul class="nav nav-pills" role="tablist"> 				{{#each tabs}}					<li><a href="#{{id}}" role="tab" data-toggle="tab">{{title}}</a></li> 				{{/each}}			</ul> 			<div class="tab-content">				<header>{{title}}</header>				<div class="btn-group btn-group-justified" role="group">				  <a type="button" class="btn btn-default" data-params="apply">{{apply}}</a>				  <a type="button" class="btn btn-default" data-params="close">{{close}}</a>				</div>				{{#each tabs}}					<div id="{{id}}" role="tabpanel" class="tab-pane {{type}}"/> 				{{/each}}			</div> 		</section>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_tabDescr=[{klass:_Sort,options:{name:"sort",isActive:!0,singleCriteria:!0}},{klass:_Filter,options:{name:"filter",isActive:!1}}],_Klass=utils.defineClass(function(controller,$type,panelId,options){this._tabs={},Base.call(this,controller,$type,panelId,options)},Base,{destroy:function(){Base.prototype.destroy.call(this),this._activeTab=null,this.options.parentArray=null;var self=this;notifications.unsubscribe(self,["sm.click.icon.filterSort"]),this._tabs&&($.each(this._tabs,function(key,value){value.destroy()}),this._tabs=null),this.$$btnBar&&(this.$$btnBar.unbind(),this.$$btnBar.remove(),this.$$btnBar=null)},getParentArray:function(){return this.options.parentArray},buildHtml:function(side){var self=this;notifications.subscribe(self,["sm.click.icon.filterSort"]),Base.prototype.buildHtml.call(this,side),self.$$elmt.addClass(self.typeName),self.$$panel&&self.$$panel.remove();var ctx={ctrlId:self.id,side:side,apply:locale.text("panels.array.apply"),close:locale.text("panels.array.close"),title:this.getParentArray().getTitle(),tabs:[]},descriptions=[];_tabDescr.forEach(function(descr){descr=$.extend({},descr),descr.options.hidden=self.options[descr.options.name]===!1,descriptions.push(descr)});var ids={};descriptions.forEach(function(descr){ids[descr.options.name]=utils.readableuid("array"+descr.options.name),ctx.tabs.push({id:ids[descr.options.name],title:descr.title||locale.text("panels.array."+descr.options.name),type:descr.options.name})}),self.$$panel=$(_getHtml("main",ctx));if(self.$$panel&&self.$$panel.length){self.$$elmt.append(self.$$panel);var visibleTabs=[],activeIdx=-1;descriptions.forEach(function(descr,idx){var t=new descr.klass(self,ids[descr.options.name],descr.options);descr.options.hidden?t.hide():(visibleTabs.push(t),descr.options.isActive&&(activeIdx=idx)),self._tabs[descr.options.name]=t});if(visibleTabs.length>0){this._activeTab=visibleTabs[activeIdx===-1?0:activeIdx];var width=visibleTabs.length===1?"100%":Math.round(1e5/visibleTabs.length)/1e3+"%";visibleTabs.forEach(function(t){t.setWidth(width)}),self.$$btnBar=self.$$panel.find(".tab-content > .btn-group"),self.$$btnBar.on("click","[data-params]",jsutils.bindFn(self.onBtnBarClick,this))}else this.close()}},notifyToggled:function(side,action,visible){Base.prototype.notifyToggled.call(this,side,action,visible),$.each(this._tabs,function(id,tab){tab[visible?"notifyOpenPanel":"notifyClosePanel"]()}),visible&&this._activeTab&&this._activeTab.triggerActivate()},onResize:function(context){$.each(this._tabs,function(id,tab){tab.onResize(context)})},onBtnBarClick:function(evt){evt.preventDefault(),evt.stopPropagation();var $$target=$(evt.target),params=$$target.attr("data-params");switch(params){case"apply":this._activeTab&&this._activeTab.doActionApply(evt,$$target)===!0&&this.close();break;case"close":this.close()}},notifyActiveTab:function(tab){this._activeTab=tab},getTabs:function(){return this._tabs},notifClickIconFilterSort:function(context){context&&context.className&&(context.className.indexOf("sorted")>=0?this.getTabs().sort.triggerActivate():context.className.indexOf("filtered")>=0&&this.getTabs().filter.triggerActivate())}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/dialogPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sidePanel","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/ui/rect"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/panels/sidePanel").Klass,HammerScroller=require("syracuse-tablet/html/js/helpers/hammerScroller").Klass,uiRect=require("syracuse-tablet/html/js/ui/rect"),_templates={header:'		<div class="header">		<buttons class="pull-right"> 			<button type="button" class="btn btn-default s-m-modal-btn-cancel" data-control-id="{{ctrlId}}" data-action="cancel"></button>		</buttons> 		<div class="modal-title">{{title}}</div> 		</div>		'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl||alert("template "+name+" not found"),tmpl(ctx)},_Klass=utils.defineClass(function(controller,$type,panelId,options){this.enableGesture=options.enableGesture!==!1,Base.call(this,controller,$type,panelId,options)},Base,{destroy:function(){Base.prototype.destroy.call(this),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},buildHtml:function(side,title){Base.prototype.buildHtml.call(this,side),this.$$elmt.addClass(this.typeName),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null),this.$$header&&this.$$header.remove();var ctx={side:side,ctrlId:this.id,title:title};this.$$header=this.buildHeader(ctx),this.$$header&&this.$$header.length&&this.$$elmt.append(this.$$header)},buildHeader:function(ctx){return $(_getHtml("header",ctx))},isEnabled:function(){return!0},notifyToggled:function(side,action,visible){this.enableGesture&&visible&&this.updateGesture()},updateGesture:function(){if(this.$$elmt.is(":visible")&&this.$$panel){this._gestureMgr||(this.$$scrollElmt=this.$$panel.find(".s-m-scroll-elmt"),this.$$scrollElmt.css({height:"auto",position:"relative"}),this.$$scrollWrapper=this.$$panel,this._gestureMgr=new HammerScroller(this.$$scrollElmt,{direction:"v",valMax:0,name:this.$bind,isPageScroller:!1}));var scrollRect=uiRect.elmtRect(this.$$scrollElmt,"outer"),wrapperRect=uiRect.elmtRect(this.$$scrollWrapper,"outer"),viewRect=wrapperRect.intersectRect(scrollRect);viewRect&&!viewRect.contains(scrollRect)?this._gestureMgr.init(viewRect):this._gestureMgr.reset()}else this._gestureMgr&&this._gestureMgr.reset()},_actCancel:function(){this.close()},_actValidate:function(){this.close()},onClick:function(evt){return!1}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/pageSettingsPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/dialogPanel","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/jsutils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/panels/dialogPanel").Klass,fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),selectorFactory=require("syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory"),globals=require("syracuse-tablet/html/js/helpers/globals"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),_templates={main:'			<nav class="navbar s-m-side-panel {{side}} navbar-inverse ctrl-evt-click" role="navigation">				<div class="s-m-scroll-elmt">				{{#if pinPage}}					<div class="modal-subtitle">{{pinPage.title}}</div> 					<div class=""> 						<div class="form-group"> 							<table class="s-m-pinandlivetile">							{{#each pinPage.items}}							{{#if this.active}}							<tr><td>{{this.title}}</td>							<td><input id="{{this.id}}" type="checkbox"  data-value="{{this.value}}"></td><tr>							{{/if}}							{{/each}}							</tr> 							</table> 						</div> 					</div>				{{/if}}				{{#if scheduleMessage}}					<div class="modal-subtitle">{{scheduleMessage.title}}</div> 					<div class=""> 						<div class="form-group"> 							<table class="s-m-schedulemsg">							{{#each scheduleMessage.items}}							<tr>							<td>{{this.label}}</td>							<td>							{{#if this.picker }}								<div  class="input-group">									<input type="text" readonly="true" class="form-control" size="{{this.size}}" id="{{this.id}}" value="">									<span class="input-group-btn">										<button data-control-id="{{../../ctrlId}}" data-action="{{this.dataAction}}" data-params="{{this.id}} "class="btn btn-default">										<span class="{{this.icon}}"></span>									<span>								<div>							{{else}}								<input type="text"  class="form-control" size="{{this.size}}" id="{{this.id}}" value="">							{{/if}}							</td>							</tr>							{{/each}}							</table> 							<div class="btn-group btn-group-justified" role="group">								<a type="button" class="btn btn-default" data-action="reminderCreate" data-control-id="{{ctrlId}}">{{scheduleMessage.btnApply}}</a>							</div>						</div> 					</div>				{{/if}}				{{#if share}}					<div class="modal-subtitle" >{{share.title}}</div> 					<a href="#" class="s-m-link" data-action="{{share.action}}">						<i class="{{share.icon}}"/>					<span>{{{share.label}}}</span>				</a>				{{/if}}				<div>			</nav>'},_pinItems=[{active:!1,id:"pinWelcome",value:!1},{active:!1,id:"liveTile",value:!1}],_scheduleMsgItems=[{id:"date",size:10,type:"application/x-date",icon:fontUtils.dateFieldIcon("application/x-date").join(" "),picker:!0,dataAction:"datePicker"},{id:"time",size:10,type:"application/x-time",icon:fontUtils.dateFieldIcon("application/x-time").join(" "),picker:!0,dataAction:"timePicker"},{id:"description",size:50,type:"application/x-string"}],_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl||alert("template "+name+" not found"),tmpl(ctx)},_Klass=utils.defineClass(function(controller,$type,panelId,options){Base.call(this,controller,$type,panelId,options)},Base,{buildHtml:function(side){var self=this,ctx=this._getContext();this.pageTitle=ctx.title,Base.prototype.buildHtml.call(this,side,ctx.title),this.$$panel&&this.$$panel.remove(),this.$$panel=this.buildPanel(ctx),this.$$panel&&this.$$panel.length&&(this.$$elmt.append(this.$$panel),_pinItems.forEach(function(item){if(item.active){var $$item=self.$$elmt.find("#"+item.id);$$item.bootstrapSwitch("onText",locale.text(item.id+".page.label.onText")),$$item.bootstrapSwitch("offText",locale.text(item.id+".page.label.offText")),$$item.bootstrapSwitch("size","small"),$$item.bootstrapSwitch("onColor","default"),$$item.bootstrapSwitch("offColor","default"),$$item.bootstrapSwitch("onSwitchChange",jsutils.bindFn(self.onSwitchChange,self,item.id))}}))},buildPanel:function(context){return $(_getHtml("main",context))},hasLinks:function(){return!0},_getContext:function(){var page=globals.getApplication().currentPage,context=page.pageSettings;context.opt.share=!1,context.opt.pinWelcome=!1;var ctx={ctrlId:this.id,side:this.side};ctx.title=context.ctx.pageTitle||"";if(context.opt.liveTile||context.opt.pinWelcome)_pinItems.forEach(function(item){item.active=context.opt[item.id],item.value=!1,item.title=locale.text(item.id+".page.add")}),ctx.pinPage={title:locale.text("pin.page.subtitle"),items:_pinItems};return context.opt.scheduleMessage&&(_scheduleMsgItems.forEach(function(item){item.label=locale.text("schedule.message."+item.id+".label")}),ctx.scheduleMessage={title:locale.text("schedule.message.page.subtitle"),btnApply:locale.text("schedule.message.apply.label"),items:_scheduleMsgItems}),context.opt.share&&(ctx.share={title:locale.text("share.page.subtitle"),action:"nativeShare",icon:fontUtils.pageIcon("nativeShare"),label:locale.text("action.nativeShare")}),ctx},_setData:function(){var page=globals.getApplication().currentPage,self=this,context=page.pageSettings;(context.opt.liveTile||context.opt.pinWelcome)&&_pinItems.forEach(function(item){if(item.active){item.value=context.ctx[item.id]||!1;var $$item=self.$$elmt.find("#"+item.id);$$item.bootstrapSwitch("state",context.ctx[item.id]||!1,!0)}}),context.opt.scheduleMessage&&_scheduleMsgItems.forEach(function(item){var $$item=self.$$elmt.find("#"+item.id);$$item.val("")})},notifyToggled:function(side,action,visible){Base.prototype.notifyToggled.call(this,side,action,visible),visible&&this._setData()},_actDatePicker:function(id){selectorFactory.createSelector(new _DateTime("application/x-date",this.$$panel.find("#"+id)))},_actTimePicker:function(id){selectorFactory.createSelector(new _DateTime("application/x-time",this.$$panel.find("#"+id)))},onSwitchChange:function(event,value,id){var content={};content[id]=value,notifications.publish("sm.page.settings.changed",content)},_actReminderCreate:function(){var schedule={},self=this,content=null;_scheduleMsgItems.forEach(function(item){var val=self.$$panel.find("#"+item.id).val();val&&(schedule[item.id]=schedule[item.id]||{},schedule[item.id].$type=item.$type,schedule[item.id].value=val)}),schedule.date&&schedule.time&&(content={},content.schedule={Severity:"reminder"},content.schedule.Text1=self.pageTitle,content.schedule.Text2=schedule.description?schedule.description.value:"",content.schedule.ScheduleTime=schedule.date.value+" "+schedule.time.value),content&&(notifications.publish("sm.page.settings.changed",content),_scheduleMsgItems.forEach(function(item){self.$$panel.find("#"+item.id).val("")}))}}),_DateTime=utils.defineClass(function(type,item){this.$type=type,this.$$item=item},null,{setFieldValueFromSelector:function(value){this.$$item.val(value)},getValue:function(){this.$$item.val()},getTitle:function(){return""}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/panels/userpanelsmartphone",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/actionPanel","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/page/panels/actionPanel").Klass,globals=require("syracuse-tablet/html/js/helpers/globals"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),eventListener=require("syracuse-tablet/html/js/application/eventListener"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_templates={navigLink:'<li class="">		<a draggable="false"  href="#" data-action="{{action}}" data-params="{{params}}" data-control-id="{{ctrlId}}">			<i class="{{icon}}"></i>			&nbsp;			<span>{{title}}</span>		</a>	</li>'},_panelLinks={home:{label:"header.sm.links.home",icon:"home",action:"gotoWelcomeApplication",target:"application"},switchContext:{label:"header.sm.links.switchContext",icon:"switchContext",params:"switchContext",action:"linkClicked",target:"panel"},pageSettings:{label:"header.links.page.settings",icon:"settings",params:"pageSettings",action:"linkClicked",target:"panel"},clearCache:{label:"header.sm.links.settings",icon:"settings",action:"linkClicked",params:"settings",target:"panel"},about:{label:"header.sm.links.about",icon:"about",action:"linkClicked",params:"about",target:"panel"},logout:{label:"header.sm.links.logout",icon:"logout",action:"logout",target:"application"},development:{label:"header.links.development",icon:"developmentPage",action:"developmentPage",target:"application"},pinPage:{label:"",icon:"",action:"pinPage",target:"application"},pageConfig:{label:"page.configure.btn",icon:"pageConfig",action:"pageConfig",target:"application"}},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl(ctx)},_Klass=utils.defineClass(function(controller,$type,panelId,options){options=options||{},options.overlap=!1,Base.call(this,controller,$type,panelId,options),notifications.subscribe(this,["sm.page.pin.state.change"]),this._initPanelItems(controller,options)},Base,{buildPanel:function(context,side){var self=this,actionsHtml=[],keys=Object.keys(self._panelLinks);return keys.forEach(function(kk,idx){var link=self._panelLinks[kk];link.hidden!==!0&&actionsHtml.push(_getHtml("navigLink",{title:locale.text(link.label),action:link.action||"",params:link.params||"",icon:fontUtils.pageIcon(link.icon),ctrlId:link.target==="panel"?self.id:null}))}),context.items=[{title:globals.getUserName(),html:actionsHtml.join("")}],Base.prototype.buildPanel.call(self,context,side)},_initPanelItems:function(page,options){var toolBars=options||{};this._panelLinks=$.extend(!0,{},_panelLinks),this._panelLinks.development.hidden=!toolBars.showDevelopment,this._panelLinks.home.hidden=!toolBars.showHome,this._panelLinks.pageConfig.hidden=!toolBars.showPageConfig,this._panelLinks.pageSettings.hidden=!page.showPageSettings();var pinPage=this._panelLinks.pinPage;switch(toolBars.statusPinPage){case 1:pinPage.label="pin.page.panel.label.pin",pinPage.hidden=!1,pinPage.icon="pinPage_1";break;case 2:pinPage.label="pin.page.panel.label.unpin",pinPage.hidden=!1,pinPage.icon="pinPage_2";break;default:pinPage.hidden=!0}},_actLinkClicked:function(actionName){eventListener.triggerAction(this.$$elmt,actionName)},notifPagePinStateChange:function(newState){var $$icon=this.$$elmt.find("[data-action=pinPage] i");$$icon.length>0&&$$icon.attr("class",fontUtils.pageIcon("pinPage_"+newState));var $$text=this.$$elmt.find("[data-action=pinPage] span");if($$text.length>0){var text;newState!=2?text=locale.text("pin.page.panel.label.pin"):text=locale.text("pin.page.panel.label.unpin"),$$text.text(text)}},hasLinks:function(){return!0}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/ctrlTypeUnknown",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,_Klass=utils.defineClass(function CtrlTypeUnknown(controller,article,prototype){Base.call(this,controller,article,prototype)},Base,{buildHtml:function($$parent,controllerDao,buildOptions){Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions,["s-m-unknown"]),this.$$elmt.html('<div class="s-m-value">Field '+this.$bind+" - Unknown type: "+this.$type+"</div>")}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/ctrlUnfound",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,_Klass=utils.defineClass(function CtrlUnfound(controller,article,prototype){Base.call(this,controller,article,prototype)},Base,{buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions,["s-m-unfound"]),self.$$elmt.html('<div class="s-m-value">Field <b>'+self.$bind+"</b> unfound</div>")}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlImage",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/helpers/native/native"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),native=require("syracuse-tablet/html/js/helpers/native/native"),_handlersMap={$delete:"_onClearClick",$edit:"_onEditClick",$sign:"_onSignClick",$select:"_onUploadClick"},_templates={footer:'			<footer> 					{{#each actions}}						{{#if active}}							<a class="ctrl-evt-click"								href = "#"								draggable="false"								action="{{id}}">								<span 								{{#if css}}									class="{{css}}"								{{/if}}								>								{{#if text}}									{{text}}								{{/if}}								</span>							</a>						{{/if}}					{{/each}}			</footer> 		'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl||alert("template "+name+" not found"),tmpl(ctx)},_Klass=utils.defineClass(function CtrlImage(controller,article,prototype,options){Base.call(this,controller,article,prototype,options),this.nativePenAnnotatedImage=native.hasCapability("penAnnotatedImage"),this.nativeSignatureImage=native.hasCapability("penSignatureImage"),this.cssType="s-m-img"},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.$$layout=null},applyMetaData:function(metaData,buildOptions){Base.prototype.applyMetaData.call(this,metaData,buildOptions);if(this.$isEditMode&&this.$$layout){var disabled=metaData?metaData.$isReadOnly||metaData.$isDisabled:!1;this.$$layout.children("footer").toggle(disabled!==!0)}},buildFieldValue:function(parentSlot,buildOptions){this.article.$imgHeight||(this.article.$imgHeight=!buildOptions||buildOptions.displayCtx!=="table"&&buildOptions.displayCtx!=="card"?"medium":"small");var value=this.getFormattedValue(this.getValue()),imgParent=Base.prototype.buildFieldValue.call(this,parentSlot,buildOptions),docUrl=this._getLocalUrlValue();docUrl||(docUrl=this.prototype.data("$url",this.getDao())||"",clientContract.isLocalEntityUrl(docUrl)?docUrl=clientContract.callLocalEntityUrl(docUrl):buildOptions.updateLayout!==!0&&(docUrl+="?salt="+(new Date).getTime()));var empty=value==null||value===""||docUrl.length===0;empty&&$(imgParent).addClass("s-m-empty");if(this.$isEditMode&&typeof FileReader!="undefined")this._buildEditImageField(imgParent,docUrl,empty);else{if(this.article.$imgDisplayIcon===!0){var css;return empty?css=fontUtils.getColImageDefIcon(!0).css:css=(this.article.$imgIcon||fontUtils.getColImageDefIcon(!1)).css,$(imgParent).addClass(css)}if(empty)buildOptions&&buildOptions.displayCtx==="card"?this._defaultImg(imgParent,null):$(imgParent).addClass(this._getDefaultIcon());else{var e=uiUtils.createDomElement("a",["img-responsive ctrl-evt-click"],null,{href:"#"},imgParent);e=this._newImg(e,docUrl)}}},_isBtnActive:function(btnId){var isSignature=this.article.$isSignature?!0:!1,isActive=!1;switch(btnId){case"$select":isActive=!isSignature;break;case"$edit":isActive=!isSignature&&this.nativePenAnnotatedImage;break;case"$sign":isActive=isSignature&&this.nativeSignatureImage;break;case"$delete":isActive=!0;break;default:isActive=!1}return isActive},_buildEditImageField:function(parentSlot,docUrl,empty){this.$$layout=$('<div class="s-m-img-layout">');var core=uiUtils.createDomElement("a",["img-responsive","s-m-field-img","ctrl-evt-click"],null,{href:"#"},$("<section>").appendTo(this.$$layout)),actions=[{id:"$select",active:this._isBtnActive("$select"),css:"s-m-select",text:locale.text("image.label.selectimage")},{id:"$edit",active:this._isBtnActive("$edit"),css:"s-m-edit "+fontUtils.getIconByName("$edit")},{id:"$sign",active:this._isBtnActive("$sign"),css:"s-m-sign "+fontUtils.getIconByName("$edit")},{id:"$delete",active:this._isBtnActive("$delete"),css:"s-m-delete "+fontUtils.getIconByName("$delete")}];$(_getHtml("footer",{actions:actions})).appendTo(this.$$layout),empty?core=uiUtils.createDomElement("span",[this._getDefaultIcon(),"s-m-empty","img-responsive"],null,null,core):(core=this._newImg(core,docUrl),this.img=core),parentSlot.appendChild(this.$$layout[0]);var inputDom=uiUtils.createDomElement("input",["ctrl-evt-change"],null,{type:"file",accept:"image/*"},parentSlot);this.$$elmt.find(".s-m-img-layout > footer > a[action='$delete']").toggle(!empty),this.$$elmt.find(".s-m-img-layout > footer > a[action='$edit']").toggle(!empty)},onClick:function(evt){var dom=evt.target.nodeName.toLowerCase()==="span"?evt.target.parentNode:evt.target,parentDom;!this.$isEditMode&&dom.nodeName.toLowerCase()==="a"?parentDom=dom:parentDom=dom.parentNode;if(!parentDom)return;var hdl=_handlersMap[$(dom).attr("action")||parentDom.nodeName.toLowerCase()];if(!hdl)return;this[hdl](evt,dom)},_getBinaryContent:function(){var binary=this.getDao().getValue(this.$bind+"-LOCALURL");if(!binary&&this.img){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");ctx.canvas.width=this.img.naturalWidth,ctx.canvas.height=this.img.naturalHeight,ctx.drawImage(this.img,0,0,this.img.naturalWidth,this.img.naturalHeight),binary=canvas.toDataURL()}return binary},_onClearClick:function(evt,dom){var clearBtn=dom,core=this.$$elmt.find(".s-m-img-layout > section > a")[0];uiUtils.empty(core),core=uiUtils.createDomElement("span",[this._getDefaultIcon(),"s-m-empty"],null,null,core),this.setValue(null);var element=this.$$elmt.find(".s-m-value > input");element.replaceWith(element=element.clone(!0)),$(clearBtn).toggle();if(this._isBtnActive("$edit")){var editBtn=this.$$elmt.find(".s-m-img-layout > footer > a[action='$edit']")[0];$(editBtn).toggle()}this._setLocalUrlValue(null)},_onEditClick:function(evt,dom){var self=this,editBtn=this.$$elmt.find(".s-m-img-layout > footer > a[action='$edit']")[0];$(editBtn).toggle(),native.getModule("penAnnotatedImage").getAnnotatedImage({title:self.getTitle(),imageData:self._getBinaryContent()}).then(function(data){data&&data.action==="ok"?data.imageData&&data.imageData.length&&(self.setValue(self._getValue(data.imageData)),self._setImage(data.imageData)):$(editBtn).toggle()})},_onSignClick:function(evt,dom){var self=this,signBtn=this.$$elmt.find(".s-m-img-layout > footer > a[action='$sign']")[0];$(signBtn).toggle(),native.getModule("penAnnotatedImage").getSignatureImage({title:self.getTitle(),watermark:""}).then(function(data){data&&data.action==="ok"&&data.imageData&&data.imageData.length&&(self.setValue(self._getValue(data.imageData)),self._setImage(data.imageData)),$(signBtn).toggle()})},_onUploadClick:function(evt,dom){var $$inputDom=this.$$elmt.find(".s-m-value > input");$$inputDom.trigger("click")},onChange:function(evt){var self=this;if(evt.target.nodeName.toLowerCase()==="input"){var files=evt.target.files,res={};if(files&&files.length){var f=files[0];if(!f.type.match("image.*"))return;res.$contentType=f.type,res.$fileName=f.name,res.$type="image";var reader=new FileReader;reader.onload=function(theFile,cont){return function(e){cont.$value=self._getValue(e.target.result),delete cont.$url,self.setValue(cont.$value,!0),self._setImage(e.target.result)}}(f,res),reader.readAsDataURL(f)}}},_getValue:function(content){var i=content.indexOf("base64,");return i>0?content.substring(i+7):content.result},_setLocalUrlValue:function(src){this.getDao().setValue(this.$bind+"-LOCALURL",src)},_getLocalUrlValue:function(){return this.getDao().getValue(this.$bind+"-LOCALURL")},_setImage:function(src){this._setLocalUrlValue(src);var core=this.$$elmt.find(".s-m-img-layout > section > a")[0];uiUtils.empty(core),core=this._newImg(core,src),this.$$elmt.find(".s-m-img-layout > footer > a[action='$delete']").toggle(!0),this._isBtnActive("$edit")&&this.$$elmt.find(".s-m-img-layout > footer > a[action='$edit']").toggle(!0)},_newImg:function(parent,src){return this._setImgHeight(uiUtils.createDomElement("img",["img-responsive"],null,{src:src},parent))},_defaultImg:function(parent,css){return this._setImgHeight(uiUtils.createDomElement("span",this._getDefaultIcon()+(" "+(css||"")),null,null,parent))},_setImgHeight:function(i){return $(i).height(uiUtils.imgHeight2px(this.getAuthoring("$imgHeight")||"small")).get(0)},_getDefaultIcon:function(){var css="s-m-icon-"+(this.article.$emptyIconSize||"small")+" ";return css+(this.article.$emptyImageIcon||fontUtils.getEmptyImageDefIcon()).css}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/field/ctrlDocument",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_Document=utils.defineClass(function CtrlDocument(controller,article,prototype,options){Base.call(this,controller,article,prototype,options),this.cssType="s-m-document"},Base,{initReuseProperties:function(){Base.prototype.initReuseProperties.call(this),this.$$layout=null},applyMetaData:function(metaData,buildOptions){Base.prototype.applyMetaData.call(this,metaData,buildOptions);if(this.$isEditMode&&this.$$layout)var disabled=metaData?metaData.$isReadOnly||metaData.$isDisabled:!1},buildFieldValue:function(parentSlot,buildOptions){var self=this,value=self.getFormattedValue(self.getValue()),imgParent=Base.prototype.buildFieldValue.call(self,parentSlot,buildOptions),docUrl=self._getLocalUrlValue();docUrl||(docUrl=self.prototype.data("$url",self.getDao())||"",buildOptions.updateLayout!==!0&&(docUrl+="?salt="+(new Date).getTime()));var empty=value==null||value===""||docUrl.length===0;empty&&$(imgParent).addClass("s-m-empty");if(!empty){var classcss=["img-responsive ctrl-evt-click"];classcss.push(this._getIcon());var e=uiUtils.createDomElement("span",classcss,null,{href:"#"},imgParent)}},_getIcon:function(){return fontUtils.documentFieldIcon()},onClick:function(evt){var dom=evt.target.parentNode,parentDom;if(this.$isEditMode)return;this._onDocumentClick(evt,dom)},_onDocumentClick:function(evt,dom){var self=this,value=self.getFormattedValue(self.getValue()),docUrl=self.prototype.data("$url",self.getDao())||"",empty=value==null||value===""||docUrl.length===0;empty||window.open(docUrl,"_blank")},_getLocalUrlValue:function(){return this.getDao().getValue(this.$bind+"-LOCALURL")}}),_Binary=utils.defineClass(function CtrlBinaryd(controller,article,prototype,options){var self=this;_Document.call(self,controller,article,prototype,options),self.cssType="s-m-binary"},_Document,{_getIcon:function(){return fontUtils.binaryFieldIcon()}});exports.Klass=_Document,exports.Binary=_Binary}),define("syracuse-tablet/html/js/helpers/html-escape/lib/escape",["require","exports","module"],function(require,exports,module){function fixOptions(options){return options=options||{},options.allowedTags=(options.allowedTags||[]).concat(["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","pre","table","thead","caption","tbody","tr","th","td","pre"]),options.allowedAttributes=(options.allowedAttributes||[]).concat(["class","href","src","name","target"]),options.allowedSchemes=(options.allowedSchemes||[]).concat(["http","https","mailto"]),options}function map(array){return array.reduce(function(map,key){return map[key]=!0,map},{})}function escapeText(str){return str.replace(/>/g,"&gt;")}function escapeComment(str){return str.replace(/-->/g,"__>")}function escapeStyle(str){return str.replace(/\/\*.*?\*\//g,"").replace(/(\\|\b)(j\\?a\\?v\\?a\\?s\\?c\\?r\\?i\\?p\\?t|e\\?x\\?p\\?r\\?e\\?s\\?s\\?i\\?o\\?n|u\\?r\\?l)\b/ig,"disabled-$1$2")}function escapeType(str){return str.replace(/javascript/i,"disabled-javascript")}exports.escaper=function(options){function checkChange(oldVal,newVal,prefix){return warn&&newVal!==oldVal&&warn(prefix+": "+oldVal+" -> "+newVal),newVal}function escapeValue(key,val){return key==="style"?checkChange(val,escapeStyle(val),"sanitized style"):key==="type"?checkChange(val,escapeType(val),"sanitized type attribute"):val}function create(){function skipTillMarker(frag,marker,repl){var i=frag.indexOf(marker);return i>=0?(preserve&&(result+=escapeComment(frag.substring(0,i))+repl+"-->"),result+=escapeText(frag.substring(i+marker.length)),inside="text"):preserve&&(result+=escapeComment(frag)),result}function skipTillClosing(frag,tag,allowed){var re=new RegExp("^/"+tag+">","i"),m=re.exec(frag);return m?(allowed?result+="</"+tag+">":preserve&&(result+="</"+tag+">-->"),result+=escapeText(frag.substring(m[0].length)),inside="text"):allowed?result+=escapeValue(tag,"<"+frag):preserve&&(result+=escapeComment("<"+frag)),result}function reject(frag,warn){return warn&&warn("malformed element: "+frag),preserve&&(result+="<!--<"+escapeComment(frag)+"-->"),result}function allowedValue(atb,val){if(urlAttributes.test(atb)){var colon=val.indexOf(":");if(colon<0||!allowedSchemes[val.substring(0,colon)])return!1}return!0}function escapeTag(tag,closing,atbs,autoClosed){if(closing){result+="</"+tag+">",atbs=atbs.trim(),preserve&&atbs&&(result+="<!--@"+escapeComment(atbs)+"-->");return}result+="<"+tag;var end=0,re=/^\s*(\w+)(?:\s*=\s*(?:(["'])(.*?)\2|()([\w_-]+)))?/,m;while(m=re.exec(atbs)){atbs=atbs.substring(m[0].length);var atb=m[1].toLowerCase(),quote=m[2]||'"',val=m[3]||m[5];if(!allowedAttributes[atb]||!allowedValue(atb,val)){warn&&warn("forbidden attribute: "+atb);if(!preserve)continue;atb="disabled-"+atb}result+=" "+atb+(val===undefined?"":"="+quote+escapeValue(atb,val)+quote)}autoClosed?result+="/>":result+=">",atbs=atbs.trim(),warn&&atbs&&warn("malformed attribute: "+atbs),preserve&&atbs&&(result+="<!--@"+escapeComment(atbs)+"-->")}var result="",inside="text";return function(frag){result="";if(inside==="comment")return skipTillMarker("<"+frag,"-->","");if(inside==="cdata")return skipTillMarker("<"+frag,"]]>","]]");if(inside==="script")return skipTillClosing(frag,"script");if(inside==="style")return skipTillClosing(frag,"style",allowedTags.style);if(/^!--/.test(frag))return inside="comment",preserve&&(result+="<!-- "),skipTillMarker(frag.substring(3),"-->","");if(/^!\[CDATA\[/.test(frag))return inside="cdata",warn&&warn("forbidden CDATA"),preserve&&(result+="<!--"),skipTillMarker(frag.substring(1),"]]>","]]");if(/^script\b/i.test(frag))return inside="script",warn&&warn("forbidden *** SCRIPT *** element"),preserve&&(result+="<!--"),skipTillClosing(frag,"script");if(/^style\b/i.test(frag))return inside="style",!allowedTags.style&&warn&&warn("forbidden STYLE element"),preserve&&!allowedTags.style&&(result+="<!--"),skipTillClosing(frag,"style",allowedTags.style);var end=frag.indexOf(">");if(end<0)return reject(frag,warn);var m=/^(\/?)(\w+)/.exec(frag);if(!m)return reject(frag,warn);var tag=m[2].toLowerCase();if(!allowedTags[tag])warn&&!m[1]&&warn("forbidden "+tag.toUpperCase()+" element"),preserve&&reject(frag.substring(0,end+1)),escapeText(frag.substring(0,end+1));else{var autoClosed=frag[end-1]==="/";escapeTag(tag,m[1],frag.substring(m[1].length+tag.length,autoClosed?end-1:end),autoClosed)}return result+=escapeText(frag.substring(end+1)),result}}options=fixOptions(options);var allowedTags=map(options.allowedTags),allowedAttributes=map(options.allowedAttributes),allowedSchemes=map(options.allowedSchemes),urlAttributes=/^(href|src|dynsrc|lowsrc|background)$/i,preserve=options.preserve,warn=options.warn;return options.streaming?function(){var process;return function(text){if(text.indexOf("<")>=0)throw new Error("internal error: bad HTML fragment");return process?process(text):(process=create(),escapeText(text))}}():function(text){var process=create(),frags=text.split("<"),result=escapeText(frags[0]);return frags.slice(1).reduce(function(r,frag){return r+process(frag)},result)}}}),define("syracuse-tablet/html/js/helpers/html-escape/lib/unescape",["require","exports","module"],function(require,exports,module){exports.unescaper=function(options){function uncomment(str){return str.replace(/__>/g,"-->")}function process(str){return str.replace(/disabled-(\w+=?)/g,"$1").replace(/(.?)<!--(.*?)-->/g,function(all,ch,commented){if(commented[0]===" ")return ch+"<!--"+commented.substring(1)+"-->";if(commented[0]==="[")return ch+"<!"+uncomment(commented)+">";if(commented[0]==="<")return ch+uncomment(commented);if(commented[0]==="@")return uncomment(commented.substring(1))+ch;throw new Error("cannot unescape: "+commented)})}options=options||{};if(options.streaming){var buf="";return function(str){if(str===undefined)return process(buf);var start=Math.max(0,buf.length-2);buf+=str;var end=buf.indexOf("-->",start);if(end<0)return"";var r=process(buf.substring(0,end+3));return buf=buf.substring(end+3),r}}return process}}),define("syracuse-tablet/html/js/helpers/html-escape/index",["require","exports","module","./lib/escape","./lib/unescape"],function(require,exports,module){exports.escaper=require("./lib/escape").escaper,exports.unescaper=require("./lib/unescape").unescaper}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/rtfparse",["require","exports","module"],function(require,exports,module){function builder(error){var group=[],stack=[group];return{open:function(){var g=[];group.push(g),stack.push(g),group=g},close:function(){stack.length<=1&&error("too many }"),group=stack.pop(),group=stack[stack.length-1]},text:function(str){group.push(str)},control:function(word,arg){var obj={word:word};arg!=null&&(obj.arg=arg),group.push(obj)},getResult:function(){return stack.length!==1&&error("missing }"),stack[0][0]}}}var lowerLetter={},digit={},LF="\n".charCodeAt(0),SP=" ".charCodeAt(0),BSLASH="\\".charCodeAt(0),OPEN="{".charCodeAt(0),CLOSE="}".charCodeAt(0),DASH="-".charCodeAt(0),QUOTE="'".charCodeAt(0),STAR="*".charCodeAt(0);(function(){function add(clas,chs,i){chs.split("").forEach(function(ch){clas[ch.charCodeAt(0)+(i||0)]=!0})}for(var i=0;i<=9;i++)add(digit,"0",i);for(var i=0;i<26;i++)add(lowerLetter,"a",i)})(),exports.parse=function(str){function error(msg){var end=str.indexOf(/[\n>]/,pos);return end<0&&(end=str.length),new Error("Invalid RTF: "+msg+" at line "+line+" near "+str.substring(pos,end))}function flush(){pos>begText&&bld.text(str.substring(begText,pos))}str=str.replace(/\r\n/g,"\n");var pos=0,begText=0,len=str.length,line=1,bld=builder(error);while(pos<len){var ch=str.charCodeAt(pos);switch(ch){case BSLASH:flush();var beg=++pos;while(lowerLetter[ch=str.charCodeAt(pos)])pos++;if(pos>beg){var word=str.substring(beg,pos),arg=undefined;if(ch===DASH||digit[ch]){beg=pos,pos++;while(digit[ch=str.charCodeAt(pos)])pos++;arg=parseInt(str.substring(beg,pos),10)}(ch===SP||ch===LF||word==="u"&&ch!==BSLASH&&ch!==OPEN&&ch!==CLOSE)&&pos++,bld.control(word,arg)}else if(ch===QUOTE){var symb=String.fromCharCode(parseInt(str.substring(pos+1,pos+3),16));bld.text(symb),pos+=3}else ch===STAR&&(bld.control("*"),pos++);begText=pos;break;case OPEN:flush(),bld.open(),begText=++pos;break;case CLOSE:flush(),bld.close(),begText=++pos;break;case LF:flush(),line++,begText=++pos;break;default:pos++}}return flush(),bld.getResult()}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/rtfinterpret",["require","exports","module"],function(require,exports,module){exports.interpret=function(root){function interpretFont(features,index,fonts){var fname=features[0].word+features[0].arg,font=documentModel.fonts[fname]={};for(var i=1;i<features.length;i++)interpretFontFeature(features[i],font)}function interpretFontFeature(feature,font){var sep;typeof feature=="string"&&(sep=feature.indexOf(";"))>0&&(font.name=feature.substring(0,sep))}function interpretStylesheet(features,index,styles){var fname,style;if(features[0].word){fname=features[0].word+features[0].arg,style=documentModel.styles[fname]={};for(var i=1;i<features.length;i++)interpretStyleFeature(features[i],style)}}function interpretStyleFeature(feature,style){var sep;typeof feature=="string"&&(sep=feature.indexOf(";"))>0&&(style.name=feature.substring(0,sep))}function interpretControl(node,parent,index){switch(node.word){case"rtf":case"ansi":case"ansicpg":break;case"stylesheet":parent.slice(1).filter(function(item){return Array.isArray(item)}).forEach(interpretStylesheet);break;case"deff":documentModel.deffont="f"+node.arg;break;case"fonttbl":parent.slice(1).filter(function(item){return Array.isArray(item)}).forEach(interpretFont);break;case"colortbl":var i=1;parent[i]===";"&&(documentModel.colors.push([0,0,0]),i++);while(i<parent.length)documentModel.colors.push([parent[i].arg,parent[i+1].arg,parent[i+2].arg]),i+=4;break;case"*":supported.indexOf(parent[index+1].word)==-1&&parent.splice(index,parent.length-index)}}function interpretNode(node,index,array){Array.isArray(node)?node.forEach(interpretNode):typeof node=="object"&&interpretControl(node,array,index)}var group,documentModel={deffont:"",fonts:{},colors:[],styles:{}},fontfamgroups={fnil:"Sans-serif",froman:"Sans-serif",fswiss:"Serif",fmodern:"Monospace",fscript:"Cursive",fdecor:"Cursive"},supported=["rtf","ansi","ansicpg","deff","fonttbl","colortbl","stylesheet","fs","f","cf","highlight","i","b","ul","strike","plain","qc","ql","qr","qj","par","pard","pn"];return interpretNode(root),documentModel}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/buildhtml",["require","exports","module"],function(require,exports,module){function rgbToHex(rgb){return rgb?toHex(rgb[0])+toHex(rgb[1])+toHex(rgb[2]):"000000"}function toHex(n){return("00"+n.toString(16)).slice(-2)}function twipsToPoint(t){return t/20}function indentCount(t){return t/600}function indentBulletCount(t){return t/420}function twipsToPixel(t){return t/15}function builder(documentModel){function newWorker(){return $current=$worker=$("<div>").addClass("s-rtf-worker").addClass("s-rtf-clean"),$worker.appendTo($section)}function newSection(){return $section=$("<div>").addClass("s-rtf-section").addClass("s-rtf-clean"),newWorker(),$section.appendTo($rootdiv)}function characterFormatting(node){switch(node.word){case"f":var fontface=rtffonts[node.word+node.arg].name;return $("<font face='"+fontface+"'>");case"fs":return $("<span style='font-size: "+node.arg/2+"pt;'>");case"tab":return $("<blockquote>");case"cf":case"highlight":return $("<span style='"+styleName[node.word]+": #"+rgbToHex(colors[node.arg])+";'>");case"b":return $("<b>");case"i":return $("<i>");case"ul":return $("<u>");case"strike":return $("<s>");default:}}function paragraphFormatting(elt,node){elt.addClass("s-rtf-format"),dirty();switch(node.word){case"ql":return elt.attr("align","left");case"qc":return elt.attr("align","center");case"qr":return elt.attr("align","right");case"qj":return elt.attr("align","justify");case"li":return node.arg>0?elt.css("margin-left",twipsToPoint(node.arg)+"pt"):elt;case"ri":return node.arg>0?elt.css("margin-right",twipsToPoint(node.arg)+"pt"):elt;default:return elt}}function dirty(){$worker&&$worker.removeClass("s-rtf-clean"),$section&&$section.removeClass("s-rtf-clean")}function append(elt){dirty(),$current.append(elt)}function wrapIn(elt){dirty(),$current=elt.appendTo($current)}var rtffonts=documentModel.fonts,deffont=documentModel.deffont,colors=documentModel.colors,styles=documentModel.styles,htmltext="",$rootdiv=$("<div>").addClass("s-rtf-root"),$current=null,$section=null,$worker=null,context;return newSection(),context=function(){function flattenFormat(){var f,fmt={};return stack.forEach(function(ctx){f=ctx.format,Object.keys(f).forEach(function(key){typeof fmt[key]=="undefined"&&(fmt[key]=f[key])})}),fmt}var stack=[{format:{}}],current=stack[0];return{open:function(){stack.push(current={format:{}})},close:function(idx,parent){stack.pop(),current=stack[stack.length-1],idx<parent.length-1&&(this.pending=!0)},update:function(prop,el){el===null?delete current.format[prop]:current.format[prop]=el},startOver:function(){if(!this.pending)return;var fmt=flattenFormat();Object.keys(fmt).forEach(function(key){$current=fmt[key].clone().appendTo($current)}),this.pending=!1}}}(),{text:function(str){dirty(),context&&context.startOver();var content=$current.html();$current.html(content+str)},open:function(){context.open()},close:function(idx,parent){$current=$worker,$current.length===0&&($current=$rootdiv),context.close(idx,parent)},control:function(node){switch(node.word){case"par":dirty(),$worker.removeClass("s-rtf-worker").addClass("s-rtf-paragraph"),$current=$worker=newWorker(),context&&(context.pending=!0);break;case"pard":$section.hasClass("s-rtf-clean")||($section=newSection(),context&&(context.pending=!0));break;case"pn":$section.addClass("s-rtf-list");break;case"u":this.unicodechar(node.arg);break;case"qc":case"ql":case"qr":case"qj":case"ri":paragraphFormatting($section,node);break;case"li":$section.hasClass("s-rtf-list")?$section.attr("indent",indentBulletCount(node.arg)):(!$section.hasClass("s-rtf-clean")&&!$section.hasClass("s-rtf-format")&&($section=newSection(),context&&(context.pending=!0)),$section.addClass("s-rtf-left-indent"),$section.attr("indent",indentCount(node.arg)));break;case"lquote":case"rquote":this.text("'");break;case"line":append("<br>");break;case"bullet":break;case"i":case"b":case"strike":case"ulnone":case"ul":if(node.arg===0||node.word==="ulnone"){var tagname;node.word==="strike"?tagname="s":node.word==="ulnone"?tagname="u":tagname=node.word;if($current.is(tagname))$current=$current.parent();else if($current.html()!==""){var tag=$current.closest(tagname);$current=tag.parent()}context.update(node.word,null);break};default:var el=characterFormatting(node);el&&(context.update(node.word,el.clone()),!context.pending&&wrapIn(el))}},unicodechar:function(code){dirty();var content=$current.html();$current.html(content+String.fromCharCode(code))},getHtml:function(){$rootdiv.find(".s-rtf-clean").remove();var sections=$rootdiv.find(".s-rtf-section.s-rtf-list");sections.map(function(i,e){var $e=$(e),i=parseInt($e.attr("indent"),10),w=[];while(w.length<i)w.push("<ul>");$e.wrap(w.join("")).contents()});var workers=sections.find(".s-rtf-paragraph");workers.wrap("<li>").contents().unwrap();var indent=$rootdiv.find(".s-rtf-section.s-rtf-left-indent").removeClass("s-rtf-left-indent");indent.map(function(i,e){var $e=$(e),i=parseInt($e.attr("indent"),10),w=[];while(w.length<i)w.push("<blockquote>");$e.wrap(w.join("")).contents(),$e.removeAttr("indent")}),sections=$rootdiv.find(".s-rtf-section"),sections.find(".s-rtf-paragraph").removeAttr("class").wrap("<p>").contents().unwrap(),sections.find("div:empty").remove(),sections.find(".s-rtf-worker:empty").remove(),sections.filter(":not(.s-rtf-format)").contents().unwrap();while($rootdiv.find("span:empty").length)$rootdiv.find("span:empty").remove();return $rootdiv.find(".s-rtf-worker").removeAttr("class").contents().unwrap(),$rootdiv.find(".s-rtf-format").removeAttr("class"),$rootdiv.html()}}}var styleName={cf:"color",highlight:"background-color"};exports.buildHtml=function(root,documentModel){function interpretNode(node,index,array){if(typeof node=="string"){bld.text(node);return}if(Array.isArray(node)&&node.length>0){if(node[0])switch(node[0].word){case"fonttbl":case"colortbl":case"stylesheet":case"pntxtb":case"pntext":case"pict":return}bld.open(),node.forEach(interpretNode),bld.close(index,array);return}typeof node=="object"&&bld.control(node)}var bld=builder(documentModel);return interpretNode(root,0,[]),root?bld.getHtml():"<div></div>"}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/buildrtf",["require","exports","module"],function(require,exports,module){function colourNameToHex(color){return colors[color.toLowerCase()]}function rtfContext(){return{open:function(key){this[key]||(this[key]={},this[key].current=0),this[key].current++,this[key].pending=!0,this[key].value&&this[key].value[this[key].current-1]&&this[key].value.pop()},close:function(key){this[key].current--,this[key].current?this[key].pending=!0:this[key].pending=!1},current:function(key){return this[key]?this[key].current:0},pending:function(key,val){return val!==undefined&&(this[key]||(this[key]={}),this[key].pending=val),this[key]?this[key].pending:!1},value:function(key,val){return this[key]?(val!==undefined&&(val=parseInt(val,10),this[key].value===undefined&&(this[key].value=[]),this[key].value.push(this[key].current-1?this[key].value[this[key].current-2]+val:val)),this[key]&&this[key].value?this[key].value[this[key].current-1]:0):0},nl:!1,par:!1,ulindent:0}}function builder(documentModel){function has(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function isEmpty(obj){if(obj==null)return!0;for(var key in obj)if(has(obj,key))return!1;return!0}function fromHtmlTag(tag){tag=tag.toLowerCase();switch(tag){case"p":return"\\par";case"b":return"\\b";case"i":return"\\i";case"u":return"\\ul";case"s":return"\\strike";case"br":return"\\par";case"blockquote":return"";default:return""}}var rtffonts=documentModel.fonts,colors=documentModel.colors,rtftext="",needSpace=!1,ctx=rtfContext();return isEmpty(rtffonts)||(rtftext+="{\\fonttbl",Object.keys(rtffonts).forEach(function(key){rtftext+="{\\"+key+" "+rtffonts[key].name+";}"}),rtftext+="}"),colors.length>1&&(rtftext+="{\\colortbl",colors.forEach(function(e){e[0]===0&&e[1]===0&&e[2]===0?rtftext+=";":rtftext+="\\red"+e[0]+"\\green"+e[1]+"\\blue"+e[2]+";"}),rtftext+="}"),rtftext+="\\uc0\\pard",{open:function(){rtftext+="{",needSpace=!1},text:function(str){var pos=0,beg=pos,c;while(pos<str.length){while(str.charCodeAt(pos)<=128&&str.charCodeAt(pos)!=10)pos++;pos>beg?rtftext+=(needSpace?" ":"")+str.substring(beg,pos):str.charCodeAt(pos)==10&&(rtftext+=needSpace?" ":""),needSpace=!1,pos<str.length&&(c=str.charCodeAt(pos),c===160||c===10?rtftext+=" ":this.controlarg("u",str.charCodeAt(pos)),pos++),beg=pos}},fragment:function(str){rtftext+=str,needSpace=!1},font:function(fid){fid!==""&&(rtftext+="\\"+fid,needSpace=!0)},controlarg:function(word,arg){rtftext+="\\"+word+arg,needSpace=!0},control:function(word){ctx.par=word=="par",rtftext+="\\"+word,needSpace=!0},htmltag:function(word){var rtf=fromHtmlTag(word);rtf&&(ctx.par=rtf=="\\par"),rtftext+=rtf,needSpace=!0},star:function(){rtftext+="\\*",needSpace=!1},close:function(){ctx.par||(rtftext+="\\par"),rtftext="{\\rtf1\\ansi"+rtftext+"}",needSpace=!1},getRtf:function(){return rtftext},context:ctx}}var colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",window:"#ffffff",windowframe:"#000000",windowtext:"#000000"},tagMap={"margin-left":"li","margin-right":"ri","margin-top":"sb","margin-bottom":"sa"},toTwips=function(unit,v){var ratio={pt:20,px:15,mm:56.7,cm:567,"in":1440.18};return function(unit,v){return v*(ratio[unit]||ratio.px)}}();exports.buildRtf=function(html){function findColor(arr,obj){if(!obj)return-1;for(var i=0;i<arr.length;i++)if(arr[i][0]==obj[0]&&arr[i][1]==obj[1]&&arr[i][2]==obj[2])return i;return-1}function isLeftIndent(n){return $(n).is("div[style]")?$(n).attr("style").search("margin-left")>-1:!1}function addFont(face){rtffonts.indexOf(face)<0&&rtffonts.push(face)}function findFont(fontname){var fonts=documentModel.fonts,keys=Object.keys(fonts);for(var i=0;i<keys.length;i++)if(fonts[keys[i]].name===fontname)return keys[i];return""}function isList(n){return $(n).is("ul")||$(n).is("li")||n.childElementCount>0&&n.firstChild.nodeName==="UL"}function processNode(n,i){var clr,idx,colorid;bld.context.pending("blockquote")&&!bld.context.current("list")&&!$(n).is("blockquote")&&!$(n).is("div")&&!bld.context.current("list")&&!isList(n)&&(bld.control("li"+bld.context.current("blockquote")*600),bld.context.pending("blockquote",!1));if(n.nodeType===3)bld.text(n.nodeValue),bld.context.par=!1,n.nextSibling&&$(n.nextSibling).is("blockquote")&&bld.control("par");else if($(n).is("*[style]")&&!$(n).is("blockquote")){var rules=$(n).attr("style").split(";"),drill=!($(n).attr("style").search("text-align")>-1&&$(n).attr("style").search("margin-left")>-1),tal=null;n.nodeName=="B"&&bld.htmltag(n.nodeName),rules.forEach(function(e){var stylerule=e.split(":");stylerule[0]!=null&&(stylerule[0]=stylerule[0].replace(/^\s*/,"").replace(/\s*$/,"")),stylerule[1]!=null&&(stylerule[1]=stylerule[1].replace(/^\s*/,"").replace(/\s*$/,""));switch(stylerule[0]){case"color":stylerule[1].substring(0,3)==="rgb"?(clr=rgbColor(stylerule[1]),idx=findColor(documentModel.colors,clr)):idx=findColorInColortbl(stylerule[1]),colorid="cf",bld.controlarg(colorid,idx);break;case"background-color":stylerule[1].substring(0,3)==="rgb"?(clr=rgbColor(stylerule[1]),idx=findColor(documentModel.colors,clr)):idx=findColorInColortbl(stylerule[1]),colorid="highlight",bld.controlarg(colorid,idx);break;case"text-decoration":stylerule[1]==="underline"?bld.control("ul"):stylerule[1]==="line-through"&&bld.control("strike");break;case"font-style":stylerule[1]==="italic"&&bld.control("i");break;case"font-weight":stylerule[1]==="bold"&&bld.control("b");break;case"font-size":var tmp=$(n).attr("style"),m=/([0-9\.\-]+)([A-Za-z]*)/g.exec(stylerule[1]),unit=m[2]&&m[2].toLowerCase();if(unit!="em"){var points=parseFloat(stylerule[1]),halfpoints=Math.round(points*2);bld.controlarg("fs",halfpoints),bld.context.fs=!0}break;case"margin-left":var m=/([0-9\.\-]+)([A-Za-z]*)/g.exec(stylerule[1]),unit=m[2]&&m[2].toLowerCase()||"px",val=parseInt(m[1],10);if($(n).is("ul"))bld.context.ulindent=val/40,bld.context.open("list");else if($(n).is("div")||$(n).is("p"))bld.context.open("lindent"),bld.context.value("lindent",val),bld.controlarg(tagMap[stylerule[0]],toTwips(unit,bld.context.value("lindent"))),tal&&bld.control(align[tal]);drill&&($(n).contents().each(visit),n.nodeName==="P"?(bld.context.close("lindent"),bld.control("par")):n.nodeName==="DIV"&&bld.context.close("lindent"),bld.context.current("lindent")?bld.controlarg(tagMap[stylerule[0]],toTwips(unit,bld.context.value("lindent"))):bld.control("pard")),drill=!0;break;case"margin-right":case"margin-top":case"margin-bottom":var m=/([0-9\.\-]+)([A-Za-z]*)/g.exec(stylerule[1]),unit=m[2]&&m[2].toLowerCase()||"px",val=parseInt(m[1],10);bld.controlarg(tagMap[stylerule[0]],toTwips(unit,val)),$(n).contents().each(visit),n.nodeName==="P"&&bld.control("par"),bld.control("pard");break;case"margin":$(n).contents().each(visit),n.nodeName==="P"&&bld.control("par");break;case"text-align":if(drill){bld.control("pard");var alignment=stylerule[1];bld.control(align[alignment]),$(n).contents().each(visit),bld.control("par"),bld.control("pard")}else tal=stylerule[1];drill=!0}})}else if($(n).is("font")){if($(n).is("font[face]")){var face=$(n).attr("face");bld.font(findFont(face))}$(n).is("font[color]")&&(idx=findColorInColortbl($(n).attr("color")),colorid="cf",bld.controlarg(colorid,idx)),$(n).is("font[bgcolor]")&&(idx=findColorInColortbl($(n).attr("bgcolor")),colorid="highlight",bld.controlarg(colorid,idx)),$(n).is("font[size]")&&(idx=findFontSize($(n).attr("size")),bld.controlarg("fs",idx))}else if($(n).is("div[align]")){var alignment=$(n).attr("align");bld.control("pard"),bld.control(align[alignment]),$(n).contents().each(visit),n.childElementCount>0&&n.firstChild.nodeName==="P"||bld.control("par"),bld.control("pard")}else if(n.nodeName==="UL")bld.control("pard"),bld.context.open("list");else if(n.nodeName==="LI"){bld.fragment("{\\pntext"),bld.font(findFont("Symbol")),bld.fragment("\\'B7\\tab}");if(bld.context.pending("list")){var uls=bld.context.current("list")+bld.context.current("blockquote")+bld.context.ulindent;uls+=bld.context.current("lindent"),bld.fragment("{\\*\\pn\\pnlvlblt\\pnf1\\pnindent0{\\pntxtb\\'B7}}\\f0\\li"+uls*420),bld.context.ulindent=0,bld.context.pending("list",!1)}}else n.nodeName==="P"?bld.control("par"):bld.htmltag(n.nodeName)}function parseColor(color){var match=/#(..)(..)(..)/.exec(color)||/#(..)(..)(..)/.exec(colourNameToHex(color));return match&&match.slice(1).map(function(v){return parseInt(v,16)})}function findColorInColortbl(colorstr){var parsedclr=parseColor(colorstr),idx=findColor(documentModel.colors,parsedclr);return idx==-1?-1:idx}function findFontSize(size){return size=parseInt(size,10),size<0||size>7?0:[0,18,20,24,28,36,48,72][size]}function scan(n){if(!n)return;n.each(visit)}function processColor(coln,atb){coln.each(function(i,e){var tmp=$(e).attr(atb),rgb=parseColor(tmp);rgb&&findColor(documentModel.colors,rgb)==-1&&documentModel.colors.push(rgb)})}function processColorStyle(coln){var clr,idx;coln.each(function(i,e){var s=$(e).attr("style"),styles=s&&s.replace(/[\n\r]*\s*/g,"").split(";"),colorstyles=styles&&styles.filter(function(e){var rule=e.split(":");return rule[0]=rule[0].replace(/^\s*/,"").replace(/\s*$/,""),["color","background-color","background"].indexOf(rule[0])!=-1}),stylerule=colorstyles&&colorstyles[0]&&colorstyles[0].split(":");stylerule&&stylerule[1]&&(stylerule[1]=stylerule[1].replace(/^\s*/,"").replace(/\s*$/,""),stylerule[1].substring(0,3)==="rgb"?(clr=rgbColor(stylerule[1]),idx=findColor(documentModel.colors,clr)):(idx=findColorInColortbl(stylerule[1]),clr=parseColor(stylerule[1])),idx==-1&&clr&&documentModel.colors.push(clr))})}function extractFontsAndColors(){var fnts=$root.find("font[face]"),clrs=$root.find("font[color]"),bgclrs=$root.find("font[bgcolor]"),stylebgclrs=$root.find('*[style*="background-color"]'),styleclrs=$root.find('*[style*="color"]');addFont("MS Sans Serif"),fnts.each(function(i,e){addFont($(e).attr("face"))}),$root.find("ul").length>0&&addFont("Symbol"),processColor(clrs,"color"),processColor(bgclrs,"bgcolor"),processColorStyle(stylebgclrs),processColorStyle(styleclrs)}function rgbColor(colorString){var match=/\s*rgb\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\);*/.exec(colorString);return match?match.slice(1).map(function(elt){return parseInt(elt,10)}):[]}function visit(i,e){var $e=$(e),$contents;if($e.is("blockquote"))bld.context.open("blockquote");else if($e.is("div[align]")||$e.is("*[style*=text-align]")||$e.is("*[style*=margin]")){processNode(e,i),e.nodeName==="UL"&&bld.control("pard");return}var grp,nl,sibling=e.nextSibling,crlf=e.nodeName==="P"&&e.childElementCount===1&&e.firstChild.nodeName==="BR";$contents=$e.contents(),!$e.is("blockquote")&&sibling&&sibling.nodeName==="DIV"&&!isLeftIndent(e)&&!isLeftIndent(sibling)?(!(sibling.childElementCount>0)||sibling.firstChild.nodeName!=="BR"&&sibling.firstChild.nodeName!=="P")&&!crlf&&(nl=!0):$contents.length>0&&sibling&&!$e.is("ul")&&!$e.is("li")&&!$e.is("blockquote")&&!$e.is("p")&&(grp=!0,bld.fragment("{"));if($e.is("p[align]")){var alignment=$e.attr("align");bld.control("pard"),bld.control(align[alignment])}$e.is("p")||processNode(e,i),$contents.each(visit),e.nodeName==="P"&&!nl&&!crlf&&processNode(e,i),(e.nodeName==="B"||$e.is("*[style*=font-weight]"))&&bld.control("b0"),(e.nodeName==="U"||$e.is("*[style*=text-decoration]"))&&bld.control("ul0"),$e.is("*[style*=font-size]")&&bld.context.fs&&(bld.context.fs=!1,grp||bld.control("fs16")),(e.nodeName==="I"||$e.is("*[style*=font-style]"))&&bld.control("i0"),$e.is("*[style*=color]")&&!$e.is("*[style*=background-color]")&&!grp&&bld.control("cf0"),e.nodeName==="UL"?(bld.context.close("list"),bld.control("pard"),bld.context.par=!0,bld.context.current("blockquote")&&bld.context.pending("blockquote",!0),bld.context.current("lindent")&&e.nextSibling&&e.nextSibling.nodeType===3&&bld.control("li"+toTwips("px",bld.context.value("lindent")))):$e.is("li")&&bld.control("par"),grp&&bld.fragment("}"),$e.is("blockquote")&&bld.context.current("blockquote")&&(bld.context.pending("blockquote")?(bld.context.close("blockquote"),!bld.context.current("blockquote")&&sibling&&!$(sibling).html()&&(bld.context.nl=!0)):(bld.context.par||bld.control("par"),bld.control("pard"),bld.context.close("blockquote")));if(nl||bld.context.nl)bld.context.nl=!1,bld.control("par")}function createFontTable(){var fname;for(var i=0;i<rtffonts.length;i++)fname="f"+i,documentModel.fonts[fname]={name:rtffonts[i]}}var documentModel={};documentModel.deffont="",documentModel.fonts={},documentModel.colors=[],documentModel.styles={};var fontfamgroups={fnil:"Sans-serif",froman:"Sans-serif",fswiss:"Serif",fmodern:"Monospace",fscript:"Cursive",fdecor:"Cursive"},align={left:"ql",center:"qc",right:"qr",justify:"qj"},pointPxTable=[{pt:6,px:7},{pt:7,px:9},{pt:40,px:50}],bld,$root=$("<div>").append(html),rtffonts=[];documentModel.colors.push([0,0,0]),extractFontsAndColors(),createFontTable(),bld=builder(documentModel),scan($root),bld.close();var rtftxt=bld.getRtf();return rtftxt}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/index",["require","exports","module","./rtfparse","./rtfinterpret","./buildhtml","./buildrtf"],function(require,exports,module){var rtfParser=require("./rtfparse"),rtfInterpreter=require("./rtfinterpret"),htmlBuilder=require("./buildhtml"),rtfBuilder=require("./buildrtf");module.exports={toHtml:function(rtf,options){rtf=rtf||"";var root=rtfParser.parse(rtf),model=rtfInterpreter.interpret(root);return htmlBuilder.buildHtml(root,model)},fromHtml:function(html,options){return rtfBuilder.buildRtf(html)}}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/index",["require","exports","module","./lib/index"],function(require,exports,module){module.exports=require("./lib/index")}),define("syracuse-tablet/html/js/controls/field/ctrlText",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/html-escape/index","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/helpers/syracuse-rtf/index","syracuse-tablet/html/js/sdata/entities/clientContract"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,uiUtils=require("syracuse-tablet/html/js/ui/uiUtils"),locale=require("syracuse-tablet/html/js/helpers/locale"),escaper=require("syracuse-tablet/html/js/helpers/html-escape/index").escaper({warn:console.warn.bind(console),allowedAttributes:["style"],allowedTags:["span"]}),ajax=require("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,rtf=require("syracuse-tablet/html/js/helpers/syracuse-rtf/index"),clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),_baseHeight=34,_templates={expander:'		<button type="button" class="btn" data-action="toggleText" data-control-id="{{ctrlId}}>{{label}}</button>'},_Klass=utils.defineClass(function CtrlText(controller,article,prototype,options){var self=this;article&&!article.$labelPosition&&(article.$labelPosition="top"),Base.call(self,controller,article,prototype,options),self.cssType="s-m-clob"},Base,{_getHeightPixelValue:function(authH){switch(authH){case"medium":return 2*_baseHeight;case"large":return 4*_baseHeight;case"xlarge":return 8*_baseHeight;default:return _baseHeight}},buildFieldValue:function(parentSlot,buildOptions){var self=this;self.$$elmt.css("display","");var value=self.getFormattedValue(self.getValue()),parent=Base.prototype.buildFieldValue.call(self,parentSlot,buildOptions),$$container=$('<section><div class="s-m-enriched-text"></div></section>').appendTo(parent).children(":first-child"),$$textContent=$(uiUtils.createDomElement("div",["s-m-enriched-text-content"],null,null,$$container));self.authH=self.getAuthoring("$textHeight","medium"),self.authH=self._getHeightPixelValue(self.authH);if(this.controller.$facet==="create"){$$textContent.html("&nbsp");return}var docUrl=self.prototype.data("$url",self.getDao())||"",deferred;clientContract.isLocalEntityUrl(docUrl)?deferred=$.smResolve(clientContract.callLocalEntityUrl(docUrl)):deferred=ajax("GET",docUrl,null,null,{noJsonParsing:!0}),deferred.then(function(result){var responseText=result?result.responseText||"":"",empty=responseText==null||responseText.length===0;self.$$elmt.toggleClass("s-m-empty",empty),self.asynchCheckEmptyValue(empty);if(empty){$$container.remove();return}var $$dataArr=[];switch(self.$type){case"text/plain":self.buildFieldFromPlain(responseText,$$textContent);break;case"text/html":self.buildFieldFromHtml(responseText,$$textContent);break;case"text/rtf":self.buildFieldFromRtf(responseText,$$textContent)}var lineheight=parseInt($$textContent.css("line-height").replace("px",""),10),multiplier=Math.floor(self.authH/lineheight);self.computedHeight=lineheight*multiplier,$$textContent.css({height:self.computedHeight+"px"}),self.appendExpander($$textContent)}).fail(function(e){self.insertError(e.message)})},checkEmptyValue:function(forceEmpty){return},asynchCheckEmptyValue:function(forceEmpty){Base.prototype.checkEmptyValue.call(this,forceEmpty)},appendExpander:function($$container){var self=this;if($$container.get(0).scrollHeight>self.computedHeight&&$$container.get(0).scrollHeight-self.computedHeight>5){var buttonTmpl='<button type="button" class="btn" data-action="toggleText"				data-control-id="'+self.id+'"				data-params="more">'+locale.text("field.text.seemore")+"</button>",$$expander=self.$$expander=$(buttonTmpl);$$expander.insertAfter($$container),$$expander.css("float","right"),$$expander.wrap("<div class='s-m-enriched-text-expander'></div>"),$$expander.parent().height($$expander.outerHeight())}},_actToggleText:function(param){var self=this;param==="more"?(self.$$elmt.find(".s-m-enriched-text-content").css({height:"auto"}),self.$$expander.text(locale.text("field.text.seeless")),self.$$expander.attr("data-params","less")):(self.$$elmt.find(".s-m-enriched-text-content").css({height:self.computedHeight+"px"}),self.$$expander.text(locale.text("field.text.seemore")),self.$$expander.attr("data-params","more")),uiUtils.triggerResizeInternal({preserveScroll:!0})},insertError:function(msg){var err=['<span class="s-m-error"><p>'];err.push(msg),err.push("<p></span>"),$(err.join("")).appendTo(this.$$elmt)},buildFieldFromPlain:function(data,$$parent){$$parent.append($.parseHTML(escaper(data.replace(/\n/g,"<BR/>"))))},buildFieldFromRtf:function(data,$$parent){this.buildFieldFromHtml(rtf.toHtml(data),$$parent)},buildFieldFromHtml:function(data,$$parent){$$parent.append($.parseHTML(escaper(data)))}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/ctrlIcon",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/ctrlBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),ctrlBase=require("syracuse-tablet/html/js/controls/ctrlBase"),Base=ctrlBase.Klass,_Klass=utils.defineClass(function CtrlIcon(controller,article,prototype){Base.call(this,controller,article,prototype)},Base,{buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions,["s-m-icon"]),self.$$elmt.html(ctrlBase.genHtmlCtrlLink(self.prototype,controllerDao,{tag:"a",css:""},function(html){html.push('<span class="'),html.push(fontUtils.ctrlIcon(self.prototype.data("$icon"))),html.push('"></span>')}))}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/ctrlButton",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/ctrlBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),ctrlBase=require("syracuse-tablet/html/js/controls/ctrlBase"),Base=ctrlBase.Klass,_Klass=utils.defineClass(function CtrlButton(controller,article,prototype){Base.call(this,controller,article,prototype)},Base,{buildHtml:function($$parent,controllerDao,buildOptions){var self=this;Base.prototype.buildHtml.call(self,$$parent,controllerDao,buildOptions,["s-m-btn"]),self.$$elmt.html(ctrlBase.genHtmlCtrlLink(self.prototype,controllerDao,{tag:"button",css:"btn btn-info btn-large"},function(html){var param=self.prototype.data("$icon")||"";param.length>0&&html.push('<i class="'+fontUtils.ctrlIcon(self.prototype.data("$icon"))+'"></i>'),param=self.prototype.data("$text")||"",param.length>0&&html.push(param)}))}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/chart/gaugeChartstheme",["require","exports","module"],function(require,exports,module){exports.ChartsTheme={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.2/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.2/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#666",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0},area:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:0},spline:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0},areaspline:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:0},column:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0},bar:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0},scatter:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!1,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0}},pie:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!0,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom",distance:30},cropThreshold:300,pointRange:0,showInLegend:!1,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{}}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,ignoreHiddenPoint:!0,legendType:"point",size:null,slicedOffset:10,tooltip:{followPointer:!0}},arearange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},areasplinerange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},columnrange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!0,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},gauge:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!0,align:"center",x:0,y:5,style:{color:"#666",cursor:"default",fontSize:"16px",lineHeight:"24px",fontWeight:"normal"},verticalAlign:"top",borderWidth:0,borderColor:null,borderRadius:3,zIndex:2},cropThreshold:300,pointRange:0,showInLegend:!1,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,dial:{},pivot:{},tooltip:{style:{color:"#666"},headerFormat:""}},boxplot:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:-0.3,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,fillColor:"#FFFFFF",medianWidth:2,tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{series.name}</span><br/>Minimum: {point.low}<br/>Lower quartile: {point.q1}<br/>Median: {point.median}<br/>Higher quartile: {point.q3}<br/>Maximum: {point.high}<br/>'},whiskerLength:"50%",whiskerWidth:2},errorbar:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:-0.3,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,fillColor:"#FFFFFF",medianWidth:2,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerLength:"50%",whiskerWidth:null,color:"#000000",grouping:!1,linkedTo:":previous"},waterfall:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#333",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0,lineColor:"#333",dashStyle:"dot"},bubble:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:0,marker:{enabled:!0,lineWidth:1,radius:4,lineColor:null,states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"white",cursor:"default",fontSize:"11px",lineHeight:"14px",textShadow:"0px 0px 3px black"},verticalAlign:"middle",inside:!0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!1,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"({point.x}, {point.y}), Size: {point.z}",followPointer:!0},minSize:8,maxSize:"20%",zThreshold:0}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!1,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}}}),define("syracuse-tablet/html/js/controls/field/ctrlGaugeChart",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/controls/chart/gaugeChartstheme"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),locale=require("syracuse-tablet/html/js/helpers/locale"),Base=require("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,chartsTheme=require("syracuse-tablet/html/js/controls/chart/gaugeChartstheme").ChartsTheme,_Klass=utils.defineClass(function CtrlGaugeChart(controller,article,prototype,opts){var self=this;Base.call(self,controller,article,prototype,opts),self.formatter=self.initFormatter(),self.cssType=null},Base,{initReuseProperties:function(){var self=this;Base.prototype.initReuseProperties.call(self)},_defaultGaugeSegments:[{propStart:0,propEnd:.25,valStart:null,valEnd:null,color:"#41A940"},{propStart:.25,propEnd:.75,valStart:null,valEnd:null,color:"#FF5800"},{propStart:.75,propEnd:1,valStart:null,valEnd:null,color:"#CB3500"}],buildFieldValue:function(fieldSlot,buildOptions){var self=this,localeDecimalSep=locale.getNumberDecimalSeparator(),localeThousandSep=locale.getNumberGroupSeparator();self.chartsTheme||(self.chartsTheme=chartsTheme);if(!self.chartsTheme.themeWasSet||self.chartsTheme.decimalPoint!==localeDecimalSep||self.chartsTheme.thousandsSep!==localeThousandSep)self.chartsTheme.decimalPoint=localeDecimalSep,self.chartsTheme.thousandsSep=localeThousandSep,Highcharts.setOptions(self.chartsTheme),self.chartsTheme.themeWasSet=!0;self._renderGauge()},checkEmptyValue:function(){return},buildFieldTitle:function(fieldSlot,buildOptions){},_resolveExpr:function(expr,data,cp){return typeof expr!="string"?expr:expr.replace(/\{(\w+)\}/g,function(d0,d1){return data[d1]!=null?data[d1]:cp[d1]!=null?cp[d1]:d0})},_mergeAuthoringAndDefaults:function(){var self=this,$gauge=self.article.$gauge;if(!$gauge.segments)return self._defaultGaugeSegments;if($gauge.segments.length===0)return self._defaultGaugeSegments;var s,def,auth,res=[];for(s=0;s<$gauge.segments.length;s++)def=self._defaultGaugeSegments[Math.min(s,self._defaultGaugeSegments.length-1)],auth=$gauge.segments[s],auth?((auth.propStart==null||auth.propEnd==null)&&(auth.valStart==null||auth.valEnd==null)&&(auth.propStart=def.propStart,auth.propEnd=def.propEnd,auth.valStart=def.valStart,auth.valEnd=def.valEnd),auth.color==null&&(auth.color=def.color),res.push(auth)):res.push(def);return res},_createBands:function(cp,valMin,valMax){var self=this,bands=[];bands.push({from:valMin,to:valMax,color:"#ccc",innerRadius:"79%",outerRadius:"101%"});var data=self.getValue(),bandsDef=self._mergeAuthoringAndDefaults(),seg,s,band,range=valMax-valMin;for(s=0;s<bandsDef.length;s++)seg=bandsDef[s],band={innerRadius:"79%",outerRadius:"101%",color:seg.color},seg.valStart!=null&&seg.valEnd!=null?(band.from=self._resolveExpr(seg.valStart,data,cp),band.to=self._resolveExpr(seg.valEnd,data,cp)):seg.propStart!=null&&seg.propEnd!=null&&(band.from=valMin+range*self._resolveExpr(seg.propStart,data,cp),band.to=valMin+range*self._resolveExpr(seg.propEnd,data,cp)),bands.push(band);return bands},_getScale:function(){function getScaleFromFormat($format){var match=$format.match(/\.(.*)/g);return match.length>=1?match.length:0}var self=this;return self.article.$scale?self.article.$scale:self.article.$format?getScaleFromFormat(self.article.$format):0},_renderGauge:function(){var self=this,$$chartSlot=$(".s-m-gauge-container",self.$$elmt);$$chartSlot&&$$chartSlot.length>0&&$$chartSlot.remove(),$$chartSlot=$("<div>").addClass("s-m-gauge-container"),self.$$elmt.append($$chartSlot);var gauge=self.article.$gauge,labelColor=self.$isEditMode?"#666":"#34B233",val=self.getValue(),valMin=0,valMax=100;gauge.$bindMin!=null&&gauge.$bindMax!=null&&(isNaN(gauge.$bindMin)?valMin=self.getDao().getValue(gauge.$bindMin):valMin=gauge.$bindMin,isNaN(gauge.$bindMax)?valMax=self.getDao().getValue(gauge.$bindMax):valMax=gauge.$bindMax);try{typeof val=="string"&&(val=parseFloat(val))}catch(e){}try{typeof valMin=="string"&&(valMin=parseFloat(valMin))}catch(e){}try{typeof valMax=="string"&&(valMax=parseFloat(valMax))}catch(e){}var cp=self.prototype.json,uom="";cp.$unit&&cp.$properties&&cp.$properties[cp.$unit]&&val&&val[cp.$unit]&&val[cp.$unit].$symbol&&(uom=val[cp.$unit].$symbol);var label=self.getTitle(),decimals=self._getScale(),plotBands=self._createBands(cp,valMin,valMax);self._calcDesiredHeight();var spacingBottom=35,height=self.desiredHeight,centerA="50%",centerB=(height-20)/height*100+"%",size=height-30;$$chartSlot.highcharts({chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,backgroundColor:null,height:height,borderWidth:0,spacingBottom:spacingBottom},title:{text:label,style:{color:labelColor,fontWeight:"normal",textTransform:"uppercase"},verticalAlign:"bottom",y:27},pane:{startAngle:-90,endAngle:90,center:[centerA,centerB],size:size,background:[{backgroundColor:"#FFF",borderWidth:0}]},yAxis:{min:valMin,max:valMax,minorTickWidth:1,minorTickInterval:"auto",minorTickLength:20,minorTickPosition:"inside",minorTickColor:"#fff",tickPixelInterval:30,tickWidth:0,tickPosition:"inside",tickLength:15,tickColor:"#FFF",labels:{step:1,rotation:"auto",style:{color:"#666",cursor:"default",fontSize:"0.9em",fontFamily:"Arial",lineHeight:"14px"},distance:10,y:0,verticalAlign:"center",align:"center"},title:{text:uom,style:{color:"#666"}},plotBands:plotBands},plotOptions:{gauge:{dataLabels:{enabled:!0,format:"{point.y:,."+decimals+"f}",style:{fontFamily:"Arial"}}}},exporting:{buttons:null},series:[{name:label,data:[val],tooltip:{valueSuffix:" "+uom}}]},function(){})},onResize:function(){var self=this;self._renderGauge()},_calcDesiredHeight:function(){var self=this,$$pscroll=self.$$elmt.closest(".s-m-scroll-wrapper"),isSingleChild=$(".s-m-control",$$pscroll).length<2,isInTile=$$pscroll.closest(".s-m-tile").length>0;if(isInTile&&isSingleChild){var $$tile=$$pscroll.parent();self.desiredHeight=$$tile.height()-20}else self.desiredHeight=200},destroy:function(){var self=this;Base.prototype.destroy.call(self);var $$chartSlot=$(".s-m-gauge-container",self.$$elmt);$$chartSlot&&$$chartSlot.length>0&&$$chartSlot.remove()}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/ctrlRowStatus",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/fieldOperators","syracuse-tablet/html/js/ui/fontUtils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,fieldOperators=require("syracuse-tablet/html/js/helpers/fieldOperators"),fontUtils=require("syracuse-tablet/html/js/ui/fontUtils"),_Klass=utils.defineClass(function CtrlRowStatus(controller,article,prototype){Base.call(this,controller,article,prototype)},Base,{buildHtml:function($$parent,rowData,buildOptions){var self=this,ctrlArray=buildOptions.htmlRootCtrl;if(!ctrlArray)return;var statusInfo=ctrlArray.getRowStatusInfo();if(!statusInfo)return;Base.prototype.buildHtml.call(self,$$parent,rowData,buildOptions,["s-m-row-status"]);var h,defIcon=fontUtils.getArrayStatusDefIcon(),icon;statusInfo.list.some(function(s){if(s.color&&fieldOperators.evaluateOperator(s.$type,rowData.getValue(s.field),s.operator,s.value))return icon=s.icon||defIcon,self.$$elmt.html('<div class="'+icon.css+'" style="color:'+s.color.bgColor+'"/>'),!0})}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/array/ctrlRowIndex",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),Base=require("syracuse-tablet/html/js/controls/ctrlBase").Klass,_Klass=utils.defineClass(function CtrlRowStatus(controller,article,prototype){Base.call(this,controller,article,prototype)},Base,{buildHtml:function($$parent,rowData,buildOptions){Base.prototype.buildHtml.call(this,$$parent,rowData,buildOptions,["s-m-row-index"]),this.$$elmt.append('<span class="badge">'+this.getValue()+"</span>")}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/page/ctrlChartDetailToolbar",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/uiSettings","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),prototype=require("syracuse-tablet/html/js/helpers/prototype"),ctrlBase=require("syracuse-tablet/html/js/controls/ctrlBase"),uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),Base=ctrlBase.Klass,_actions=[{params:"arrayOnly",icon:"fa fa-table"},{params:"chartOnly",icon:"fa fa-bar-chart"},{params:"bothSideToSide",icon:"fa fa-columns"}],_chartStyle=[{params:"column",icon:"fa fa-bar-chart",enabled:!0},{params:"bar",icon:"fa fa-bar-chart fa-rotate-90",enabled:!0},{params:"area",icon:"fa fa-area-chart",enabled:!0},{params:"line",icon:"fa fa-line-chart",enabled:!0},{params:"pie",icon:"fa fa-pie-chart",enabled:!0}],_templates={toolbar:'		<div class="btn-toolbar" role="toolbar">			<div class="btn-group">				{{#each actions}}					<button type="button" class="btn btn-default" data-action="toolbar" data-control-id="{{../ctrlId}}" data-params="{{params}}"><span class="{{icon}}"></span></button>				{{/each}}		    </div>			<div class="btn-group">				{{#each chartStyle}}					{{#if enabled}}					<button type="button" class="btn btn-default" data-action="chartstyle" data-control-id="{{../../ctrlId}}" data-params="{{params}}"><span class="{{icon}}"></span></button>					{{/if}}				{{/each}}		    </div>	    </div>'},_getHtml=function(name,ctx){var key=name+"compiled",tmpl=_templates[key];return tmpl||(tmpl=_templates[key]=Handlebars.compile(_templates[name])),tmpl||alert("template "+name+" not found"),tmpl(ctx)},_Klass=utils.defineClass(function CtrlChartDetailToolbar($type,controller,options){Base.call(this,controller,{$bind:"chartDetailToolbar"},prototype.create({$type:$type}),options),notifications.subscribe(this,"sm.chartdetail.updt.toolbar")},Base,{buildHtml:function($$parent,controllerDao,buildOptions){this._height=uiSettings.getProp("chartDetailToolbar.height");var measureCount=this._getChartMeasureCount();_chartStyle.forEach(function(itm){itm.params=="pie"&&(itm.enabled=measureCount==1)}),Base.prototype.buildHtml.call(this,$$parent,controllerDao,buildOptions,[this.typeName]),this.$$elmt.html(_getHtml("toolbar",{ctrlId:this.id,actions:_actions,chartStyle:_chartStyle})),this.$$elmt.css("height",this._height)},_getChartMeasureCount:function(){var chart=this.controller.getChart();if(!chart)return 0;var count=chart.prototype.chartGetNbMeasures(),$seriesOptions=chart.article.$seriesOptions;return $seriesOptions?(Object.keys($seriesOptions).forEach(function(key){$seriesOptions[key].isHidden&&count--}),count):count},getHeight:function(){return this.$$elmt.is(":visible")?this._height:0},_actToolbar:function(display,$$target){if($$target.closest(".btn").is(".s-m-selected"))return;this.controller.actToolbarSetDisplay({display:display})},_actChartstyle:function(chartType,$$target){if($$target.closest(".btn").is(".s-m-selected"))return;this.controller.actToolbarSetDisplay({style:chartType,display:"bothSideToSide"})},notifChartdetailUpdtToolbar:function(opts){if(!opts)return;opts.display&&this._updateDisplay(opts.display,"toolbar"),opts.display&&this._updateDisplay(opts.style,"chartstyle")},_updateDisplay:function(display,dataAction){globals.isAuthoringActive()?this.$$elmt.find(".btn").prop("disabled",!1):(this.$$elmt.find('.btn[data-action="'+dataAction+'"]').removeClass("s-m-selected"),this.$$elmt.find('[data-params="'+display+'"][data-action="'+dataAction+'"]').addClass("s-m-selected"))}});exports.Klass=_Klass}),define("syracuse-tablet/html/js/controls/ctrlFactoryDeps",["require","exports","module","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlFilter","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlProgress","syracuse-tablet/html/js/controls/field/ctrlNumeric","syracuse-tablet/html/js/controls/field/ctrlQuantity","syracuse-tablet/html/js/controls/field/ctrlCheckBox","syracuse-tablet/html/js/controls/field/ctrlSwitch","syracuse-tablet/html/js/controls/field/ctrlCombo","syracuse-tablet/html/js/controls/field/ctrlDate","syracuse-tablet/html/js/controls/array/ctrlArray","syracuse-tablet/html/js/controls/array/ctrlArrayChart","syracuse-tablet/html/js/controls/field/ctrlReference","syracuse-tablet/html/js/controls/layout/layoutRow","syracuse-tablet/html/js/controls/layout/layoutStack","syracuse-tablet/html/js/controls/layout/layoutTab","syracuse-tablet/html/js/controls/layout/layoutHub","syracuse-tablet/html/js/controls/layout/layoutHubGroup","syracuse-tablet/html/js/controls/layout/layoutTile","syracuse-tablet/html/js/controls/layout/layoutCell","syracuse-tablet/html/js/controls/vignetteBase","syracuse-tablet/html/js/controls/page/ctrlBreadCrumbs","syracuse-tablet/html/js/controls/page/ctrlPageHeader","syracuse-tablet/html/js/controls/page/ctrlPageFooter","syracuse-tablet/html/js/controls/page/ctrlVignetteFooter","syracuse-tablet/html/js/controls/page/ctrlVignetteHeader","syracuse-tablet/html/js/controls/page/panels/pageActionPanelRegular","syracuse-tablet/html/js/controls/page/panels/sortfilter/filterSortPanel","syracuse-tablet/html/js/controls/page/panels/pageSettingsPanel","syracuse-tablet/html/js/controls/page/panels/userpanelsmartphone","syracuse-tablet/html/js/controls/ctrlTypeUnknown","syracuse-tablet/html/js/controls/ctrlUnfound","syracuse-tablet/html/js/controls/field/ctrlImage","syracuse-tablet/html/js/controls/field/ctrlDocument","syracuse-tablet/html/js/controls/field/ctrlDocument","syracuse-tablet/html/js/controls/field/ctrlText","syracuse-tablet/html/js/controls/ctrlIcon","syracuse-tablet/html/js/controls/ctrlButton","syracuse-tablet/html/js/controls/field/ctrlGaugeChart","syracuse-tablet/html/js/controls/structElmt","syracuse-tablet/html/js/controls/array/ctrlRowStatus","syracuse-tablet/html/js/controls/array/ctrlRowIndex","syracuse-tablet/html/js/controls/page/ctrlChartDetailToolbar","syracuse-tablet/html/js/controls/ctrlFactory"],function(require,exports,module){var Alphanum=require("syracuse-tablet/html/js/controls/field/ctrlAlphanum").Klass,PhoneField=require("syracuse-tablet/html/js/controls/field/ctrlAlphanum").PhoneField,Filter=require("syracuse-tablet/html/js/controls/field/ctrlFilter").Klass,EmailField=require("syracuse-tablet/html/js/controls/field/ctrlAlphanum").EmailField,UrlField=require("syracuse-tablet/html/js/controls/field/ctrlAlphanum").UrlField,ProgressField=require("syracuse-tablet/html/js/controls/field/ctrlProgress").Klass,Numeric=require("syracuse-tablet/html/js/controls/field/ctrlNumeric").Klass,Quantity=require("syracuse-tablet/html/js/controls/field/ctrlQuantity").Klass,CheckBox=require("syracuse-tablet/html/js/controls/field/ctrlCheckBox").Klass,Switch=require("syracuse-tablet/html/js/controls/field/ctrlSwitch").Klass,Combo=require("syracuse-tablet/html/js/controls/field/ctrlCombo").Klass,Date=require("syracuse-tablet/html/js/controls/field/ctrlDate").Klass,Array=require("syracuse-tablet/html/js/controls/array/ctrlArray").Klass,ArrayChart=require("syracuse-tablet/html/js/controls/array/ctrlArrayChart").Klass,Reference=require("syracuse-tablet/html/js/controls/field/ctrlReference").Klass,LayoutRow=require("syracuse-tablet/html/js/controls/layout/layoutRow").Klass,LayoutStack=require("syracuse-tablet/html/js/controls/layout/layoutStack").Klass,LayoutTab=require("syracuse-tablet/html/js/controls/layout/layoutTab").Klass,LayoutHub=require("syracuse-tablet/html/js/controls/layout/layoutHub").Klass,LayoutHubGroup=require("syracuse-tablet/html/js/controls/layout/layoutHubGroup").Klass,LayoutTile=require("syracuse-tablet/html/js/controls/layout/layoutTile").Klass,LayoutCell=require("syracuse-tablet/html/js/controls/layout/layoutCell").Klass,Vignette=require("syracuse-tablet/html/js/controls/vignetteBase").Klass,BreadCrumbs=require("syracuse-tablet/html/js/controls/page/ctrlBreadCrumbs").Klass,PageHeader=require("syracuse-tablet/html/js/controls/page/ctrlPageHeader").Klass,PageFooter=require("syracuse-tablet/html/js/controls/page/ctrlPageFooter").Klass,VignetteFooter=require("syracuse-tablet/html/js/controls/page/ctrlVignetteFooter").Klass,VignetteHeader=require("syracuse-tablet/html/js/controls/page/ctrlVignetteHeader").Klass,PageActionPanelRegular=require("syracuse-tablet/html/js/controls/page/panels/pageActionPanelRegular").Klass,FilterSortPanel=require("syracuse-tablet/html/js/controls/page/panels/sortfilter/filterSortPanel").Klass,PageSettingsPanel=require("syracuse-tablet/html/js/controls/page/panels/pageSettingsPanel").Klass,UserPanelSmartphone=require("syracuse-tablet/html/js/controls/page/panels/userpanelsmartphone").Klass,TypeUnknown=require("syracuse-tablet/html/js/controls/ctrlTypeUnknown").Klass,FieldUnfound=require("syracuse-tablet/html/js/controls/ctrlUnfound").Klass,Image=require("syracuse-tablet/html/js/controls/field/ctrlImage").Klass,Document=require("syracuse-tablet/html/js/controls/field/ctrlDocument").Klass,Binary=require("syracuse-tablet/html/js/controls/field/ctrlDocument").Binary,EnrichedText=require("syracuse-tablet/html/js/controls/field/ctrlText").Klass,Icon=require("syracuse-tablet/html/js/controls/ctrlIcon").Klass,Button=require("syracuse-tablet/html/js/controls/ctrlButton").Klass,Gauge=require("syracuse-tablet/html/js/controls/field/ctrlGaugeChart").Klass,StructElmt=require("syracuse-tablet/html/js/controls/structElmt").Klass,FieldRowStatus=require("syracuse-tablet/html/js/controls/array/ctrlRowStatus").Klass,FieldRowIndex=require("syracuse-tablet/html/js/controls/array/ctrlRowIndex").Klass,ChartDetailToolbar=require("syracuse-tablet/html/js/controls/page/ctrlChartDetailToolbar").Klass,ctrlFactory=require("syracuse-tablet/html/js/controls/ctrlFactory");exports.init=function(){ctrlFactory.setImpl("Alphanum",Alphanum),ctrlFactory.setImpl("PhoneField",PhoneField),ctrlFactory.setImpl("Filter",Filter),ctrlFactory.setImpl("EmailField",EmailField),ctrlFactory.setImpl("UrlField",UrlField),ctrlFactory.setImpl("ProgressField",EmailField),ctrlFactory.setImpl("Numeric",Numeric),ctrlFactory.setImpl("Quantity",Quantity),ctrlFactory.setImpl("CheckBox",CheckBox),ctrlFactory.setImpl("Switch",Switch),ctrlFactory.setImpl("Combo",Combo),ctrlFactory.setImpl("Date",Date),ctrlFactory.setImpl("Array",Array),ctrlFactory.setImpl("Reference",Reference),ctrlFactory.setImpl("LayoutRow",LayoutRow),ctrlFactory.setImpl("LayoutStack",LayoutStack),ctrlFactory.setImpl("LayoutTab",LayoutTab),ctrlFactory.setImpl("LayoutHub",LayoutHub),ctrlFactory.setImpl("LayoutHubGroup",LayoutHubGroup),ctrlFactory.setImpl("LayoutTile",LayoutTile),ctrlFactory.setImpl("LayoutCell",LayoutCell),ctrlFactory.setImpl("Vignette",Vignette),ctrlFactory.setImpl("BreadCrumbs",BreadCrumbs),ctrlFactory.setImpl("PageHeader",PageHeader),ctrlFactory.setImpl("PageFooter",PageFooter),ctrlFactory.setImpl("VignetteFooter",VignetteFooter),ctrlFactory.setImpl("VignetteHeader",VignetteHeader),ctrlFactory.setImpl("PageActionPanelRegular",PageActionPanelRegular),ctrlFactory.setImpl("UserPanelSmartphone",UserPanelSmartphone),ctrlFactory.setImpl("FilterSortPanel",FilterSortPanel),ctrlFactory.setImpl("PageSettingsPanel",PageSettingsPanel),ctrlFactory.setImpl("TypeUnknown",TypeUnknown),ctrlFactory.setImpl("FieldUnfound",FieldUnfound),ctrlFactory.setImpl("ArrayChart",ArrayChart),ctrlFactory.setImpl("Binary",Binary),ctrlFactory.setImpl("Image",Image),ctrlFactory.setImpl("Document",Document),ctrlFactory.setImpl("Text",EnrichedText),ctrlFactory.setImpl("Icon",Icon),ctrlFactory.setImpl("Gauge",Gauge),ctrlFactory.setImpl("Button",Button),ctrlFactory.setImpl("StructElmt",StructElmt),ctrlFactory.setImpl("FieldRowStatus",FieldRowStatus),ctrlFactory.setImpl("FieldRowIndex",FieldRowIndex),ctrlFactory.setImpl("ChartDetailToolbar",ChartDetailToolbar)}}),define("syracuse-tablet/html/js/sdata/sdataSort",["require","exports","module"],function(require,exports,module){function _sdataSortArray(data,proto,orderBy){var comparators=[],properties=proto.$properties.$resources&&proto.$properties.$resources.$item&&proto.$properties.$resources.$item.$properties||proto.$properties;orderBy.forEach(function(exp){var prop=exp.property,sort=exp.sort==="DESC"||exp.sort==="desc"?"DESC":"ASC",type=properties[prop]&&properties[prop].$type||"application/x-string";if(type==="application/x-decimal"){if(sort==="ASC"){try{comparators.push(function(a,b){var vala=a[prop],valb=b[prop];return+vala- +valb})}catch(e){}return 0}try{comparators.push(function(a,b){var vala=a[prop],valb=b[prop];return+valb- +vala})}catch(e){}return 0}sort==="ASC"?comparators.push(function(a,b){try{var vala=a[prop],valb=b[prop];if(vala>valb)return 1;if(vala<valb)return-1}catch(e){}return 0}):comparators.push(function(a,b){try{var vala=a[prop],valb=b[prop];if(vala>valb)return-1;if(vala<valb)return 1}catch(e){}return 0})}),data.sort(function(a,b){var c=0;for(var i=0;i<comparators.length;i++){c=comparators[i](a,b);if(c!==0)break}return c})}exports.sdataSortArray=_sdataSortArray}),define("syracuse-tablet/html/js/sdata/sdataCache",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdatawhere/parser","syracuse-tablet/html/js/sdata/sdatawhere/whereUtils","syracuse-tablet/html/js/sdata/sdataSort","syracuse-tablet/html/js/storage/localStorage"],function(require,exports,module){function _SDataCache(storage){this.storage=storage,this.context=null}var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("SDataCache"),globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),storageModule=require("syracuse-tablet/html/js/storage/storage"),parser=require("syracuse-tablet/html/js/sdata/sdatawhere/parser").Parser,whereUtils=require("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils"),sdataSort=require("syracuse-tablet/html/js/sdata/sdataSort"),localStorage=require("syracuse-tablet/html/js/storage/localStorage"),_cachePrefix="$cache_",_keyRegExp=/\{(.*?)\}/g,_SDataCacheClass=utils.defineClass(_SDataCache,null,{setContext:function(context){log&&log("Changing cache context: "+JSON.stringify(context)),this.context=context},cachePrefix:_cachePrefix,put:function(data){var deferred=$.Deferred(),self=this;try{if(!data.$data)throw new Error("PUT: No data specified");var repr,key;if(data.$proto){var $proto=self._getProto(data.$proto);repr=self._getRepresentation($proto),key=self._getKeyValue(data.$data,$proto)}else{if(!data.$representation||!data.$key)throw new Error("PUT: Neither proto nor representation and key specified");repr=data.$representation,key=data.$key}self.storage.put({$context:self.context,$collection:_cachePrefix+repr,$endpoint:data.$endpoint,$key:key,$data:{$item:data.$data}}).then(function(result){deferred.resolve()}).fail(function(error){deferred.reject(error)})}catch(e){deferred.reject(e)}finally{return deferred.promise()}},query:function(data){var deferred=$.Deferred(),self=this;try{var repr;log&&log("Query by: "+JSON.stringify(data));if(data.$proto){var $proto=self._getProto(data.$proto);repr=self._getRepresentation($proto)}else{if(!data.$representation)throw new Error("QUERY: Neither proto nor representation specified");if(data.$where)throw new Error("QUERY: Where clause parsing requires prototype");if(data.$orderBy)throw new Error("QUERY: Order by requires prototype");repr=data.$representation}self.storage.query({$context:self.context,$endpoint:data.$endpoint,$collection:_cachePrefix+repr}).then(function(result){var res=[];if(data.$where){var exp=parser.parse(data.$where);result.$data.forEach(function(item,i){if(whereUtils.execWhere(item.$item,exp,$proto)){var d=item.$item,m=result.$metaData[i];d.$cache={$lastRead:m.$lastRead,$lastUpdated:m.$lastUpdated},res.push(d)}})}else result.$data.forEach(function(item,i){var d=item.$item,m=result.$metaData[i];d.$cache={$lastRead:m.$lastRead,$lastUpdated:m.$lastUpdated},res.push(d)});data.$orderBy&&sdataSort.sdataSortArray(res,$proto,data.$orderBy),deferred.resolve(res)}).fail(function(error){deferred.reject(error)})}catch(e){deferred.reject(e)}finally{return deferred.promise()}},read:function(data){var deferred=$.Deferred(),self=this;try{var repr;if(!data.$key)throw new Error("READ: No key specified");if(data.$proto){var $proto=self._getProto(data.$proto);repr=self._getRepresentation($proto)}else{if(!data.$representation)throw new Error("READ: Neither proto nor representation specified");repr=data.$representation}self.storage.read({$context:self.context,$collection:_cachePrefix+repr,$endpoint:data.$endpoint,$key:data.$key}).then(function(result){if(result.$status===storageModule.StatusCodes.OK){var res=result.$data.$item;res.$cache={$lastRead:result.$metaData.$lastRead,$lastUpdated:result.$metaData.$lastUpdated},deferred.resolve(res)}else deferred.resolve(null)}).fail(function(error){deferred.reject(error)})}catch(e){deferred.reject(e)}finally{return deferred.promise()}},remove:function(data){var deferred=$.Deferred(),self=this;try{var repr;if(!data.$key)throw new Error("REMOVE: No key specified");if(data.$proto){var $proto=self._getProto(data.$proto);repr=self._getRepresentation($proto)}else{if(!data.$representation)throw new Error("READ: Neither proto nor representation specified");repr=data.$representation}self.storage.remove({$context:self.context,$collection:_cachePrefix+repr,$endpoint:data.$endpoint,$key:data.$key}).then(function(){deferred.resolve()}).fail(function(error){deferred.reject(error)})}catch(e){deferred.reject(e)}finally{return deferred.promise()}},clearCache:function(options){var deferred=$.Deferred(),self=this,re=new RegExp(self.cachePrefix.replace(/([\$\_]+)/g,"\\$1")),opts={$context:self.context,$collection:re};options&&options.$not_read_since&&(opts.$not_read_since=options.$not_read_since);try{self.storage.clearCollection(opts).then(function(){deferred.resolve()}).fail(function(error){deferred.reject(error)})}catch(e){deferred.reject(e)}finally{return deferred.promise()}},computeCacheSize:function(options){var deferred=$.Deferred(),self=this,re=new RegExp(self.cachePrefix.replace(/([\$\_]+)/g,"\\$1")),opts={$context:self.context,$collection:re};options&&options.$not_read_since&&(opts.$not_read_since=options.$not_read_since);try{self.storage.computeCollectionSize(opts).then(function(result){deferred.resolve(result)}).fail(function(error){deferred.reject(error)})}catch(e){deferred.reject(e)}finally{return deferred.promise()}},_getProto:function(proto){var itemProto=proto.$properties.$resources&&proto.$properties.$resources.$item||proto;return itemProto.$type=proto.$type,itemProto},_getRepresentation:function(proto){return proto.$type.split(".").slice(1,3).join(".").replace("$queryItem","$query")},_getKeyValue:function(data,proto){return proto.$key.replace(_keyRegExp,function(m,p){return data[p]})},disableCache:function(isDisabled){globals.isDvlpMode()&&localStorage.setItem("s.m.cache.disabled",isDisabled),this._isDisabled=isDisabled},isDisabled:function(){return this._isDisabled==null&&(globals.isDvlpMode()?(this._isDisabled=localStorage.getItem("s.m.cache.disabled"),this._isDisabled=this._isDisabled===!0||this._isDisabled==="true"):this._isDisabled=!1),this._isDisabled}});exports.SDataCache=_SDataCacheClass}),define("syracuse-tablet/html/js/helpers/siteLayout",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/notifications"],function(require,exports,module){function _getWindowOrientation(){var width=$(window).width(),height=$(window).height(),ratio=width/height;return ratio<1?"portrait":"landscape"}function _layoutMainContainers(resizeEvt,opts){opts=opts||{},opts.resizeEvent=resizeEvt,opts.layout&&(_layoutParameters=$.extend(!0,{},_layoutParameters,opts.layout));var width=$(window).width(),height=$(window).height(),appClass=null,authPanelRightWidth=0,authPanelLeftWidth=0,authPanelHeaderHeight=0,authPanelFooterHeight=0,authPanelRightSplitterWidth=0,authPanelLeftSplitterWidth=0,$$authRight=$("#s-m-auth-panel-right-id"),$$authLeft=$("#s-m-auth-panel-left-id"),$$app=$("#s-m-app-id"),$$appContainer=$("#s-m-app-container-id");_internalParameters=$.extend(!0,{},_layoutParameters);var pageParams=_internalParameters.pageParameters;_internalParameters.authPanelRight.visible&&(authPanelRightWidth=_internalParameters.authPanelRight.width,authPanelRightSplitterWidth=_internalParameters.authPanelRight.splitterWidth,_layoutAuthPanelRight(width,height),pageParams.forcePreview=!0),_internalParameters.authPanelLeft.visible&&(authPanelLeftWidth=_internalParameters.authPanelLeft.width,authPanelLeftSplitterWidth=_internalParameters.authPanelLeft.splitterWidth,_layoutAuthPanelLeft(width,height),pageParams.forcePreview=!0),_internalParameters.authPanelHeader.visible&&(authPanelHeaderHeight=_internalParameters.authPanelHeader.height,_layoutAuthPanelHeader(width,height)),_internalParameters.authPanelFooter.visible&&(authPanelFooterHeight=_internalParameters.authPanelFooter.height,_layoutAuthPanelFooter(width,height));var applicationWidth=width-authPanelRightWidth-authPanelRightSplitterWidth-authPanelLeftWidth-authPanelLeftSplitterWidth,applicationHeight=height-authPanelHeaderHeight-authPanelFooterHeight,appView,forcePreview=pageParams.forcePreview===!0;$$app.parent().is(".s-m-device-wrapper")&&$$app.unwrap();if(forcePreview){var device=pageParams.device||"tablet",template=_deviceSizes[device]||_deviceSizes.tablet,wrapBorder=15;appView={left:0,top:0,width:pageParams.orientation==="landscape"?template.width:template.height,height:pageParams.orientation==="landscape"?template.height:template.width};var wrapH=appView.height+2*wrapBorder,wrapW=appView.width+2*wrapBorder;pageParams.forceAutoScale&&(pageParams.scale=Math.min(Math.min(applicationWidth/wrapW,applicationHeight/wrapH),1)),appView.left=Math.max((applicationWidth-wrapW*pageParams.scale)/2,0),appView.top=Math.max((applicationHeight-wrapH*pageParams.scale)/2,0),appClass=template.bootstrapTweakClass[pageParams.orientation];var $$wrapper=$('<section class="s-m-device-wrapper"></section>"'),wrapCss={top:appView.top+"px",left:appView.left+"px",width:wrapW+"px",height:wrapH+"px"};pageParams.scale!==1&&(wrapCss.transform="scale("+pageParams.scale+", "+pageParams.scale+")",wrapCss["transform-origin"]="left top"),$$wrapper.css(wrapCss),$$app.wrap($$wrapper),$$app.css({top:wrapBorder+"px",left:wrapBorder+"px",width:appView.width+"px",height:appView.height+"px",position:"absolute"})}else appView={left:0,top:0,width:applicationWidth,height:applicationHeight},pageParams.orientation=_currentOrientation,$$app.css({top:appView.top,left:appView.left,width:appView.width,height:appView.height});$$app.removeClass(_bootstrapTweakClasses.join(" ")),appClass&&$$app.addClass(appClass),$$appContainer.css({top:authPanelHeaderHeight,left:authPanelLeftWidth+authPanelLeftSplitterWidth,width:applicationWidth,height:applicationHeight}),$$appContainer.toggleClass("s-m-preview",forcePreview);var info={updateLayout:!0,application:appView,authoringUpdate:opts.authoringUpdate===!0,preserveScroll:opts.preserveScroll===!0};opts.resizeEvent&&(info.resizeEvent=opts.resizeEvent),$.isEmptyObject(opts)||(_resizeOptions.forEach(function(p){info[p]=opts[p]}),opts.footerSwipe===!0&&(info.preserveScroll=!0)),info.orientationChanged=opts.orientationChanged,info.deviceChanged=opts.deviceChanged,notifications.publish("sm.main.layout.changed",info,pageParams.orientation,_getDeviceClass())}function _layoutAuthPanelRight(width,height){var $$auth=$("#s-m-auth-panel-right-id"),$$splitter=$("#s-m-auth-splitter-right-id"),authPanelHeaderHeight=0,authPanelFooterHeight=0;_internalParameters.authPanelHeader.visible&&(authPanelHeaderHeight=_internalParameters.authPanelHeader.height),_internalParameters.authPanelFooter.visible&&(authPanelFooterHeight=_internalParameters.authPanelFooter.height),$$auth.css({left:width-_internalParameters.authPanelRight.width,top:authPanelHeaderHeight,width:_internalParameters.authPanelRight.width,height:height-authPanelHeaderHeight-authPanelFooterHeight}),$$splitter.css({left:width-_internalParameters.authPanelRight.width-_internalParameters.authPanelRight.splitterWidth,top:authPanelHeaderHeight,width:_internalParameters.authPanelRight.splitterWidth,height:height-authPanelHeaderHeight-authPanelFooterHeight})}function _layoutAuthPanelLeft(width,height){var $$auth=$("#s-m-auth-panel-left-id"),$$splitter=$("#s-m-auth-splitter-left-id"),authPanelHeaderHeight=0,authPanelFooterHeight=0;_internalParameters.authPanelHeader.visible&&(authPanelHeaderHeight=_internalParameters.authPanelHeader.height),_internalParameters.authPanelFooter.visible&&(authPanelFooterHeight=_internalParameters.authPanelFooter.height),$$auth.css({left:0,top:authPanelHeaderHeight,width:_internalParameters.authPanelLeft.width,height:height-authPanelHeaderHeight-authPanelFooterHeight}),$$splitter.css({left:_internalParameters.authPanelLeft.width,top:authPanelHeaderHeight,width:_internalParameters.authPanelLeft.splitterWidth,height:height-authPanelHeaderHeight-authPanelFooterHeight})}function _layoutAuthPanelHeader(width,height){var $$auth=$("#s-m-auth-panel-header-id");$$auth.css({left:0,top:0,width:width,height:_internalParameters.authPanelHeader.height,overflow:"hidden"})}function _layoutAuthPanelFooter(width,height){var $$auth=$("#s-m-auth-panel-footer-id");$$auth.css({left:0,top:height-_internalParameters.authPanelFooter.height,width:width,height:_internalParameters.authPanelFooter.height})}var globals=require("syracuse-tablet/html/js/helpers/globals"),_internalParameters,_getCurrentDeviceClass=function(){var currentDeviceClass,a=navigator.userAgent.toLowerCase();return a.indexOf("iphone")>=0?currentDeviceClass="smartphone":a.indexOf("ipad")>=0?currentDeviceClass="tablet":a.indexOf("mobile")>=0?currentDeviceClass="smartphone":currentDeviceClass="tablet",currentDeviceClass},_deviceSizes={nexus5:{width:640,height:360,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-sm"},deviceClass:"smartphone",orientations:["portrait","landscape"]},nexus7:{width:960,height:600,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-sm",landscape:"s-m-auth-col-simulate-md"},deviceClass:"minitablet",orientations:["portrait","landscape"]},nexus10:{width:1280,height:800,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-sm",landscape:"s-m-auth-col-simulate-lg"},deviceClass:"tablet",orientations:["portrait","landscape"]},ipad:{width:1024,height:768,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-sm",landscape:"s-m-auth-col-simulate-lg"},deviceClass:"tablet",orientations:["portrait","landscape"]},iphone4:{width:480,height:320,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-xs"},deviceClass:"smartphone",orientations:["portrait","landscape"]},iphone5:{width:568,height:320,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-xs"},deviceClass:"smartphone",orientations:["portrait","landscape"]},iphone6:{width:667,height:375,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-sm"},deviceClass:"smartphone",orientations:["portrait","landscape"]},iphone6plus:{width:960,height:540,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-md"},deviceClass:"smartphone",orientations:["portrait","landscape"]}},_bootstrapTweakClasses=["s-m-auth-col-simulate-xs","s-m-auth-col-simulate-sm","s-m-auth-col-simulate-md","s-m-auth-col-simulate-lg"],utils=require("syracuse-tablet/html/js/helpers/utils"),notifications=require("syracuse-tablet/html/js/helpers/notifications"),_currentOrientation=_getWindowOrientation(),_splitterWidth=15,_layoutParameters={authPanelRight:{width:230,splitterWidth:_splitterWidth,visible:!1},authPanelLeft:{width:300,splitterWidth:_splitterWidth,visible:!1},authPanelHeader:{height:34},authPanelFooter:{height:34},pageParameters:{forcePreview:!1,forceAutoScale:!0,device:"nexus10",orientation:"landscape",scale:1}},_heights={tablet:{header:50,footer:{opened:50,closed:20}},smartphone:{header:50,footer:{opened:0,closed:0}}};exports.onWindowOrientation=function(evt,opts){if(!evt||evt.orientation==null)return;opts=opts||{},opts.orientationChanged=evt.orientation!==_currentOrientation,opts.deviceChanged=!1,_currentOrientation=evt.orientation,setTimeout(function(){_layoutMainContainers(opts)},200)},exports.onWindowResize=function(evt,opts){if(!evt)return;opts=opts||{},opts.orientationChanged=!1,opts.deviceChanged=!1;if(utils.isDesktop()&&_internalParameters.pageParameters.forcePreview!==!0){var prev=_currentOrientation;_currentOrientation=_getWindowOrientation(),opts.orientationChanged=prev!==_currentOrientation}_layoutMainContainers(evt,opts)},exports.onWindowResizeInteral=function(evt,opts){if(!evt)return;opts=opts||{};var params=opts.layout?opts.layout.pageParameters:null;params&&params.orientation&&params.forcePreview&&(opts.orientationChanged=_currentOrientation!==params.orientation,_currentOrientation=params.orientation);if(params&&params.device&&params.forcePreview){var typ=_deviceSizes[params.device];typ=typ?_deviceClassToType(typ.deviceClass):"",opts.deviceChanged=typ!==_getDeviceType()}_layoutMainContainers(evt,opts)};var _resizeOptions=["preserveScroll","footerSwipe"];exports.getDeviceTemplates=function(){return _deviceSizes};var _getDeviceClass=function(){if(_internalParameters&&_internalParameters.pageParameters.forcePreview===!0){var device=_internalParameters.pageParameters.device||"tablet",template=_deviceSizes[device]||_deviceSizes.tablet;return template.deviceClass}var settings=globals.getGlobalSettings();return settings?settings["device-type"]!=="auto"?settings["device-type"]:_getCurrentDeviceClass():_getCurrentDeviceClass()},_getDeviceType=function(){return _deviceClassToType(_getDeviceClass())},_deviceClassToType=function(deviceClass){return deviceClass!=null&&deviceClass!="tablet"&&deviceClass!="minitablet"?"smartphone":"tablet"};exports.getDeviceType=_getDeviceType,exports.getPageOrientation=function(){return _internalParameters.pageParameters.orientation},exports.getCurrentLayoutSettings=function(){var o=$.extend(!0,{},_layoutParameters);return o},exports.getTransformScale=function(){var res=_internalParameters&&_internalParameters.pageParameters?_internalParameters.pageParameters.scale:null;return res==null||res<=0?1:res},exports.splitterWidth=_splitterWidth,exports.onWindoReisze=_splitterWidth}),define("syracuse-tablet/html/js/application/metaDataCache",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ajax/ajax"],function(require,exports,module){function _startWait(){var app=globals.getApplication();app&&app.waitWheelStart()}function _stopWait(){var app=globals.getApplication();app&&app.waitWheelStop()}function _storeKnownApplications(apps,ctx){var storage=globals.getStorage();return storage.put({$context:ctx,$collection:"$metacache_$meta_apps",$endpoint:"$local",$key:"$applications",$data:apps}).then(function(result){return apps})}function _storeApplicationDetail(app,ctx,ep){var storage=globals.getStorage();return storage.put({$context:ctx,$collection:"$metacache_$meta_app",$endpoint:ep,$key:"$application_"+app.$application.applicationName,$data:app})}function _fetchRemotePrototype(name){var deferred=$.Deferred();try{var base=globals.baseLocation(),segs=name.split("."),ep=segs.slice(0,3).join("/"),repr=segs.slice(3,5).join("."),url=base.host+"/mobile1/"+ep+"/$prototypes('"+repr+"')",headers={"Accept-Language":locale.getCurrentLocale()};ajax("GET",url,null,headers).then(function(data){if(!data.isSuccess)return $.smReject(data.responseJSON);deferred.resolve(data.responseJSON)}).fail(function(e){deferred.reject(e)})}catch(e){deferred.reject(e)}finally{return deferred.promise()}}function _storePrototype(name,prototype,ctx){var storage=globals.getStorage();return storage.put({$context:ctx,$collection:"$metacache_$meta_proto",$endpoint:"$local",$key:"$prototype_"+name,$data:prototype})}var globals=require("syracuse-tablet/html/js/helpers/globals"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("metaData"),storageModule=require("syracuse-tablet/html/js/storage/storage"),sdataCommonRes=require("syracuse-tablet/html/js/sdata/sdataCommonResources"),locale=require("syracuse-tablet/html/js/helpers/locale"),ajax=require("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax;exports.getKnownApplications=function(context,forceReadFromServer){var storage=globals.getStorage(),ctx={$user:"none",$role:"none",$lang:context.lang},readCache,cache=globals.getCache();return cache.isDisabled()?readCache=$.smResolve({$status:storageModule.StatusCodes.NOT_FOUND}):forceReadFromServer===!0?readCache=$.smResolve({$status:storageModule.StatusCodes.NOT_FOUND}):readCache=storage.read({$context:ctx,$collection:"$metacache_$meta_apps",$endpoint:"$local",$key:"$applications"}),readCache.then(function(result){if(result.$status===storageModule.StatusCodes.OK){var apps=result.$data;return log&&log("Application list from cache"),apps}return log&&log("Fetching remote application list"),sdataCommonRes.queryAllApplications().then(function(apps){return _storeKnownApplications(apps,ctx).then(function(){return apps})})})},exports.getApplication=function(header,context,localOnly,forceUpdate){var storage=globals.getStorage(),ctx={$user:context.user,$role:context.role,$lang:context.lang},readCache;return forceUpdate===!0?readCache=$.smResolve({$status:storageModule.StatusCodes.NOT_FOUND}):readCache=storage.read({$context:ctx,$collection:"$metacache_$meta_app",$endpoint:context.endpoint,$key:"$application_"+header.applicationName}),readCache.then(function(result){return result.$status===storageModule.StatusCodes.OK?(log&&log("Application details from cache"),result.$data):localOnly===!0?null:(log&&log("Fetching remote application details"),_startWait(),sdataCommonRes.queryApplicationDetail(header,context.endpoint).then(function(app){return _storeApplicationDetail(app,ctx,context.endpoint).then(function(){return app})}).then(function(app){return _stopWait(),app}).fail(function(e){return _stopWait(),$.smReject(e)}))})},exports.removeApplications=function(context){var storage=globals.getStorage(),ctx={$user:context.user,$role:context.role,$lang:context.lang};return storage.query({$context:ctx,$collection:"$metacache_$meta_app",$endpoint:context.endpoint}).then(function(result){if(result.$status===storageModule.StatusCodes.OK)return $.smForEachPromise(result.$data,function(app){var key="$application_"+app.$application.applicationName;return storage.remove({$context:ctx,$collection:"$metacache_$meta_app",$endpoint:context.endpoint,$key:key}).always(function(){return $.smResolve()})})})},exports.getPrototype=function(name,context){var storage=globals.getStorage(),ctx={$user:context.user,$role:context.role,$lang:context.lang},readCache;return readCache=storage.read({$context:ctx,$collection:"$metacache_$meta_proto",$endpoint:"$local",$key:"$prototype_"+name}),readCache.then(function(result){if(result.$status===storageModule.StatusCodes.OK){var proto=result.$data;return log&&log("Prototype from cache"),proto}return log&&log("Fetching remote prototype"),_fetchRemotePrototype(name).then(function(prototype){return _storePrototype(name,prototype,ctx).then(function(){return prototype})})})}}),define("syracuse-tablet/html/js/application/metaData",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/application/metaDataCache","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/authoring/authoringArticleGen"],function(require,exports,module){function _checkApplicationCtx(){var ctx=globals.getUserCtx(),endpoint=globals.getEndpoint();if(_currentApplicationContext.user!=ctx.$user||_currentApplicationContext.role!=ctx.$role||_currentApplicationContext.lang!=ctx.$lang||_currentApplicationContext.endpoint!=endpoint)_currentApplicationContext.user=ctx.$user,_currentApplicationContext.role=ctx.$role,_currentApplicationContext.lang=ctx.$lang,_currentApplicationContext.endpoint=endpoint,log&&log("Application context changed to: "+JSON.stringify(_currentApplicationContext)),_resetApplicationCache()}function _resetApplicationCache(){_applications=null,_applicationDetails={}}function _readApplications(forceReadFromServer){var deferred=$.Deferred();return forceReadFromServer=forceReadFromServer&&globals.isOnline(),metaDataCache.getKnownApplications(_currentApplicationContext,forceReadFromServer).then(function(apps){deferred.resolve(apps)}).fail(function(e){forceReadFromServer===!0&&e&&e.$noConnectionError===!0?metaDataCache.getKnownApplications(_currentApplicationContext,!1).then(function(apps){deferred.resolve(apps)}).fail(function(e){deferred.reject(e)}):deferred.reject(e)}),deferred.promise()}function _initApplications(forceReadFromServer){log&&log("Reading applications");var step=_readApplications(forceReadFromServer).then(function(apps){var matchedApps=[];apps.forEach(function(app){var epMatch=!0;app.endpoints&&app.endpoints.length>0&&(epMatch=epMatch&&app.endpoints.some(function(ep){return ep.application+"."+ep.contract+"."+ep.dataset===_currentApplicationContext.endpoint}));var roleMatch=!0;globals.isDvlpMode()?roleMatch=!0:app.roles&&app.roles.length>0&&epMatch&&(roleMatch=roleMatch&&app.roles.some(function(role){return role.code===_currentApplicationContext.role})),roleMatch&&epMatch&&matchedApps.push(app)}),Object.keys(_applicationsStatic).forEach(function(name){matchedApps.push(_applicationsStatic[name].$application)}),_applications=matchedApps,log&&log("Number of applications: "+_applications.length)});return step.then(function(){return $.smForEachPromise(_applications,function(app){return exports.getApplication(app.applicationName,!0).then(function(appData){appData?app.localVersionNumber=appData.$application.versionNumber:app.localVersionNumber=null})})})}function _getApplicationHeaderByName(name){var match=null;return $.smResolve().then(function(){if(!_applications)return _initApplications()}).then(function(){return _applications&&_applications.some(function(app){if(app.applicationName==name)return match=app,!0}),match})}function _checkPrototypeCtx(){var ctx=globals.getUserCtx(),endpoint=globals.getEndpoint();if(_currentPrototypeContext.user!=ctx.$user||_currentPrototypeContext.role!=ctx.$role||_currentPrototypeContext.lang!=ctx.$lang||_currentPrototypeContext.endpoint!=endpoint)_currentPrototypeContext.user=ctx.$user,_currentPrototypeContext.role=ctx.$role,_currentPrototypeContext.lang=ctx.$lang,_currentPrototypeContext.endpoint=endpoint,log&&log("Prototype context changed to: "+JSON.stringify(_currentPrototypeContext)),_resetPrototypeCache()}function _resetPrototypeCache(){_prototypes={}}function _getDashboardByName(name){var appMetaData=globals.getApplication().dao.appMetaData,$dashboards=appMetaData.$dashboards,dashboard;return Object.keys($dashboards).some(function(key){dashboard=$dashboards[key];if(dashboard.$dashboardName===name)return!0})||(dashboard=null),dashboard}function _getDashboardPageInfo(pageName){if(!pageName.smEndsWith(".$mobileDashboard"))return $.smResolve(null);var dashboardName=pageName.substring(0,pageName.length-17),dashboard=_getDashboardByName(dashboardName);if(!dashboard)return $.smResolve(null);var pageInfo=dashboard.$pageInfo||{};return pageInfo.name=pageName,pageInfo.type="dashboard",pageInfo.subtype=pageInfo.isWelcomePage?"welcome":"std",pageInfo.dashboardName=dashboard.$dashboardName,pageInfo.cached=!1,pageInfo.refreshed=!1,pageInfo.changeHash=!1,$.smResolve(pageInfo)}function _getRegularPageInfo(pageName){var appMetaData=globals.getApplication().dao.appMetaData,$pages=appMetaData&&appMetaData.$pages,page=$pages&&$pages[pageName];if(!page)return $.smResolve(null);var pageInfo={name:pageName,home:!1,type:"regular",subtype:"unknown",cached:!1,refreshed:!1,changeHash:!1};return $.smResolve(page.$page.$prototype).then(function(prototype){return prototype?prototype:exports.getPrototype(pageInfo.name)}).then(function(prototype){if(prototype)if(prototype.codeRequest!=null)pageInfo.subtype=_REQUEST_SUBTYPE;else if(prototype.codeStat!=null)pageInfo.subtype=_STAT_SUBTYPE;else{var facet=prototype.$type;facet||(facet=prototype.$url),pageInfo.subtype=facet.substring(facet.lastIndexOf(".$")+2);if(!pageInfo.subtype)throw new Error("Unexpected facet for page "+pageName+"\n$url="+prototype.$url)}}).then(function(){return pageInfo})}function _getRegularPageDetails(pageInfo){var pageDetails,appMetaData=globals.getApplication().dao.appMetaData,$pages=appMetaData&&appMetaData.$pages;return $.smResolve().then(function(){var page=$pages&&$pages[pageInfo.name];if(page)return{prototype:page.$page&&page.$page.$prototype,article:page.$page&&page.$page.$article}}).then(function(pageDetails){return pageDetails?pageDetails:clientContract.getRegularPageInfo(pageInfo.name).then(function(page){if(page)return{prototype:page.$page&&page.$page.$prototype,article:page.$page&&page.$page.$article}})}).then(function(pageDetails){return pageDetails?pageDetails.prototype?pageDetails:exports.getPrototype(pageInfo.name).then(function(proto){if(proto)return pageDetails.prototype=proto,pageDetails}):exports.getPrototype(pageInfo.name).then(function(proto){if(proto)return{prototype:proto}})}).then(function(pageDetails){return pageDetails&&(pageDetails.prototype=prototypeModule.create(pageDetails.prototype)),pageDetails}).then(function(pageDetails){return pageDetails?_ensureRegularPageDetailsArticle(pageInfo,pageDetails).then(function(){return pageDetails.prototype&&pageDetails.prototype.data("codeRequest")!=null&&(pageInfo.subtype=_REQUEST_SUBTYPE),pageDetails}):null})}function _getArrayChildPageDetails(pageInfo){return $.smResolve().then(function(){var pageDetails={prototype:pageInfo.prototype,article:pageInfo.article};return _ensureRegularPageDetailsArticle(pageInfo,pageDetails).then(function(){return pageDetails})})}function _ensureRegularPageDetailsArticle(pageInfo,pageDetails){var article,genArticle,vignetteArticle=pageInfo.options.vignetteArticle,emptyVignetteArticle=vignetteArticle&&$.isEmptyObject(vignetteArticle);return vignetteArticle&&!emptyVignetteArticle?article=vignetteArticle:article=pageDetails.article,article&&!$.isEmptyObject(article)?genArticle=$.smResolve(article):genArticle=$.smResolve().then(function(){return articleGen.genNewArticle({page:{prototype:pageDetails.prototype}}).then(function(protoArticle){article=protoArticle})}),genArticle.then(function(){if(emptyVignetteArticle){for(var p in article)vignetteArticle[p]=article[p];pageDetails.article=vignetteArticle}else pageDetails.article=article;var vignetteAuthPageProps=pageInfo.options.vignetteAuthPageProps;$.isEmptyObject(vignetteAuthPageProps)||utils.authCopyPageProperties(vignetteAuthPageProps,pageDetails.article)})}var globals=require("syracuse-tablet/html/js/helpers/globals"),utils=require("syracuse-tablet/html/js/helpers/utils"),clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),metaDataCache=require("syracuse-tablet/html/js/application/metaDataCache"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("metaData"),prototypeModule=require("syracuse-tablet/html/js/helpers/prototype"),articleGen=require("syracuse-tablet/html/js/authoring/authoringArticleGen"),_REQUEST_SUBTYPE="query request",_STAT_SUBTYPE="stat",_currentApplicationContext={},_currentPrototypeContext={},_applications=null,_applicationDetails={},_applicationsStatic={},_prototypes={};exports.checkApplicationUpdate=function(appName){var appHeader;return _getApplicationHeaderByName(appName).then(function(_appHeader){return appHeader=_appHeader,exports.getApplication(appName,!0)}).then(function(appDetails){return!appDetails||!appHeader?!1:appHeader.versionNumber===appDetails.$application.versionNumber?!1:!0})},exports.registerStaticApp=function(app){if(!app||!app.$application)return;log&&log("Register static application: "+app.$application.applicationName),app.isStaticApp=!0,_applicationsStatic[app.$application.applicationName]=app},exports.getApplication=function(name,localOnly,forceUpdate){var app=forceUpdate!==!0?_applicationsStatic[name]||_applicationDetails[name]:null;return app?(log&&log("Application from cache: "+name),$.smResolve(app)):_getApplicationHeaderByName(name).then(function(header){return header?metaDataCache.getApplication(header,_currentApplicationContext,localOnly,forceUpdate).then(function(app){return app&&(_applicationDetails[name]=app),app}).then(function(app){return app&&!localOnly&&$.each(_applications,function(idx,app1){app1.applicationName===app.$application.applicationName&&(app1.localVersionNumber=app.$application.versionNumber,app1.versionNumber=app.$application.versionNumber)}),app}):(log&&log("Unknown application: "+name),null)})},exports.getApplications=function(forceReadFromServer){return _checkApplicationCtx(),_applications!=null&&forceReadFromServer!==!0?$.smResolve(_applications):_initApplications(forceReadFromServer).then(function(){return _applications})},exports.removeApplications=function(){return metaDataCache.removeApplications(_currentApplicationContext).then(function(){_resetApplicationCache()})},exports.getPrototype=function(name){log&&log("Getting prototype: "+name);var repr=name.split(".");if(repr.length<5)return proto=clientContract.getPrototype(repr[0],repr[1]),log&&log("Prototype (client side entitiy): "+name),$.smResolve(proto);_checkPrototypeCtx();var proto=_prototypes[name];if(proto)return $.smResolve(proto);var app=globals.getApplication(),appMetaData=app&&app.dao&&app.dao.appMetaData,page=appMetaData&&appMetaData.$pages&&appMetaData.$pages[name];return proto=page&&page.$page&&page.$page.$prototype,proto?(_prototypes[name]=proto,$.smResolve(proto)):metaDataCache.getPrototype(name,_currentPrototypeContext).then(function(proto){return log&&log("Got prototype: "+name),_prototypes[name]=proto,proto})},exports.getDashboard=function(name){var appMetaData=globals.getApplication().dao.appMetaData,$dashboards=appMetaData.$dashboards,dashboard=_getDashboardByName(name);return $.smResolve().then(function(){if(dashboard)return dashboard&&dashboard.$update?dashboard.$update(dashboard):dashboard}).then(function(dashboard){if(dashboard){dashboard.$gadgets=dashboard.$gadgets||{};if(appMetaData.$gadgets)for(var vignette in dashboard.$vignettes){var v=dashboard.$vignettes[vignette];appMetaData.$gadgets[v.$uuid]&&(dashboard.$gadgets[v.$uuid]=appMetaData.$gadgets[v.$uuid])}}return dashboard})},exports.getDashboardPageName=function(dashboardName){return dashboardName+".$mobileDashboard"},exports.getPageInfo=function(pageName){return _getDashboardPageInfo(pageName).then(function(pageInfo){return pageInfo?pageInfo:_getRegularPageInfo(pageName)})},exports.getPageDetails=function(pageInfo){var pageDetails;if(pageInfo.type==="regular")return _getRegularPageDetails(pageInfo);if(pageInfo.type==="rowdetail"||pageInfo.type==="carddesign"||pageInfo.type==="chartdetail")return _getArrayChildPageDetails(pageInfo);throw new Error("Unsupported page type: "+pageInfo.type)}}),define("syracuse-tablet/html/js/sdata/entities/test/example",["require","exports","module"],function(require,exports,module){var _data=[];for(var i=0;i<100;i++)_data.push({$uuid:""+i,name:"My name is: "+i,desc:"My desc is: "+i,desc2:"My desc2 is: "+i,amount:i*100});exports.entity={$entityName:"example",$value:"{name}",$properties:{name:{$type:"application/x-string",$title:"My name"},desc:{$type:"application/x-string",$title:"My description"},desc2:{$type:"application/x-string",$title:"My description 2"},amount:{$type:"application/x-integer",$title:"My amount",$isExcluded:!1,$isHidden:!1,$isMandatory:!1,$isReadOnly:!1,$isDisabled:!1}},$relations:{values:{$type:"exampleChild"}},$articles:{$details:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"name",$isTitleHidden:!1}]},{$bind:"desc",$isTitleHidden:!1}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"desc2",$isTitleHidden:!1}]},{$bind:"amount",$isTitleHidden:!1}]}]},$edit:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"name",$isTitleHidden:!0}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"desc",$isTitleHidden:!0}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"desc2",$isTitleHidden:!1}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"amount",$isTitleHidden:!1}]}]}]}},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/exampleHubLayout",["require","exports","module"],function(require,exports,module){var _data=[];for(var i=0;i<100;i++)_data.push({$uuid:""+i,name:"My name is: "+i,desc:"My desc is: "+i,desc2:"My desc2 is: "+i,amount:i*100});exports.entity={$entityName:"exampleHubLayout",$value:"{name}",$properties:{name:{$type:"application/x-string",$title:"My name"},desc:{$type:"application/x-string",$title:"My description"},desc2:{$type:"application/x-string",$title:"My description 2"},amount:{$type:"application/x-integer",$title:"My amount",$isExcluded:!1,$isHidden:!1,$isMandatory:!1,$isReadOnly:!1,$isDisabled:!1}},$relations:{values:{$type:"exampleChild"}},$articles:{$details:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Layout group 1",$items:[{$layoutType:"tile",$bgColor:"darkgrey",$size:"full",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"darkgrey",$size:"medium",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"purple",$size:"medium",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"sagegreen",$size:"wide",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]}]},{$layoutType:"hubGroup",$title:"Layout group 2",$items:[{$layoutType:"tile",$bgColor:"orange",$size:"large",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"darkgrey",$size:"medium",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"purple",$size:"green",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"sagegreen",$size:"wide",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]}]}]},$edit:{$layoutType:"stack",$items:[{$layoutType:"row",$widthMd:"6,6",$items:[{$bind:"name",$isTitleHidden:!0},{$bind:"desc",$isTitleHidden:!0}]},{$layoutType:"row",$widthMd:"6,6",$items:[{$bind:"desc2",$isTitleHidden:!1},{$bind:"amount",$isTitleHidden:!1}]}]}},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testDatatypes",["require","exports","module"],function(require,exports,module){var _data=[],_switch=!1;for(var i=0;i<10;i++)_data.push({$uuid:""+i,propString:"Simple String="+i,propDate:"2014-03-"+(i+20),propDateTime:"2014-06-"+(i+10)+"T12:45:"+(i+44)+".123Z",propTime:"15:45:"+(i+34),propTimeShort:"15:45:"+(i+34),propInt:i*1e3+i*10,propDecimal:Math.sqrt(i*1e3+i*10),propReal:Math.sqrt(i*1e3+i*30),propBoolean:_switch=!_switch,propChoice:"mr",propQuantity:i*123,propStringUnit:"EUR",propStringMandatory:"Mandatory",propDecimalMandatory:"",propStringMinMax:"",propStringMinMaxValue:"",propStringPattern:"",propPhone:"0402030506",propEmail:"laurent.varciat@sage.com"});var _entity={$entityName:"testDataTypes",$properties:{propString:{$type:"application/x-string",$isMandatory:!1,$title:"My name (max len 25)",$maxLength:25},propStringMandatory:{$type:"application/x-string",$isMandatory:!0,$title:"String Madatory"},propStringMinMax:{$type:"application/x-string",$title:"String MinMaxLength(3-5)",$minLength:3,$maxLength:5},propStringMinMaxValue:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer MinMaxValue(3-50)",$minimun:"3",$maximun:"50"},propStringPattern:{$type:"application/x-string",$title:"Pattern",$maxLength:40},propDate:{$type:"application/x-date",$isMandatory:!1,$title:"Date"},propDateTime:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time"},propTime:{$type:"application/x-time",$isMandatory:!1,$title:"Time long",$format:"TT"},propTimeShort:{$type:"application/x-time",$isMandatory:!1,$title:"Time"},propInt:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer (1-7000 Max)",$minimun:"1",$maximun:"7000"},propDecimalMandatory:{$type:"application/x-decimal",$isMandatory:!0,$title:"Decimal mandatory(2.4)",$scale:2,$precision:4,$format:"0.00"},propDecimal:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal(4.7)",$scale:4,$precision:7,$format:"0.0000"},propReal:{$type:"application/x-real",$isMandatory:!1,$title:"Real"},propBoolean:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean"},propChoice:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice",$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propQuantity:{$title:"Quantity",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!0,$title:"Unit for quantity"},propStringM:{$type:"application/x-string",$isMandatory:!0,$title:"My name"},propDateM:{$type:"application/x-date",$isMandatory:!0,$title:"Date (Mandatory)"},propDateTimeM:{$type:"application/x-datetime",$isMandatory:!0,$title:"Date+Time (Mandatory)"},propTimeM:{$type:"application/x-time",$isMandatory:!0,$title:"Time (Mandatory)"},propIntM:{$type:"application/x-integer",$isMandatory:!0,$title:"Integer (Mandatory)"},propDecimalM:{$type:"application/x-decimal",$isMandatory:!0,$title:"Decimal (Mandatory)"},propRealM:{$type:"application/x-real",$isMandatory:!0,$title:"Real (Mandatory)"},propBooleanM:{$type:"application/x-boolean",$isMandatory:!0,$title:"Boolean (Mandatory)"},propPhone:{$title:"Phone Number",$type:"application/x-string",$format:"$phone"},propEmail:{$title:"Email",$type:"application/x-string",$format:"$email"}},$relations:{},$articles:{$details:{$layoutType:"stack",$items:[{$layoutType:"stack",$title:"String types",$collapsible:"expanded",$items:[{$bind:"propString"},{$bind:"propStringMandatory"},{$bind:"propStringMinMax"},{$bind:"propStringPattern"},{$bind:"propStringM"}]},{$layoutType:"stack",$title:"Numerical",$collapsible:"collapsed",$items:[{$bind:"propTimeShort"},{$bind:"propDecimal"},{$bind:"propReal"},{$bind:"propIntM"},{$bind:"propDecimalMandatory"},{$bind:"propRealM"},{$bind:"propDecimalM"},{$bind:"propStringMinMaxValue"},{$bind:"propInt"}]},{$layoutType:"stack",$title:"Date and Time",$items:[{$bind:"propDateTime"},{$bind:"propDateTimeM"},{$bind:"propDateM"},{$bind:"propTime"},{$bind:"propDate"},{$bind:"propTimeM"}]},{$layoutType:"stack",$title:"Complex",$collapsible:"collapsed",$items:[{$bind:"propQuantity"},{$bind:"propBoolean"},{$bind:"propChoice"},{$bind:"propBooleanM"}]},{$layoutType:"stack",$title:"Divers",$collapsible:"expanded",$items:[{$bind:"propPhone"},{$bind:"propEmail"}]}]}},$services:{$new:function(op,data){var deferred=$.Deferred(),i=15,tpl={$uuid:""+i,propString:"Simple String="+i,propDate:"2014-03-"+i,propDateTime:"2014-06-"+i+"T12:45:"+(i+44)+".234Z",propTime:"15:45:"+(i+34),propInt:i*1e3+i*10,propDecimal:Math.sqrt(i*1e3+i*10),propReal:Math.sqrt(i*1e3+i*30),propBoolean:_switch=!_switch};return deferred.resolve(tpl),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}};exports.entity=_entity}),define("syracuse-tablet/html/js/sdata/entities/test/testFormats",["require","exports","module"],function(require,exports,module){var _data=[],_switch=!1;for(var i=0;i<10;i++)_data.push({$uuid:""+i,propDate1:"2014-03-"+(i+20),propDateTime1:"2014-06-"+(i+10)+" 12:45:"+(i+44),propTime1:"15:45:"+(i+34),propInt1:i*1e3+i*10,propDecimal1:Math.sqrt(i*1e3+i*10),propReal1:Math.sqrt(i*1e3+i*30),propDate2:"2014-03-"+(i+20),propDateTime2:"2014-06-"+(i+10)+" 12:45:"+(i+44),propTime2:"15:45:"+(i+34),propInt2:i*1e3+i*10,propDecimal2:Math.sqrt(i*1e3+i*10),propReal2:Math.sqrt(i*1e3+i*30),propString:"Test"});exports.entity={$entityName:"testFormats",$properties:{propDate1:{$type:"application/x-date",$title:"Date"},propDateTime1:{$type:"application/x-datetime",$title:"Date+Time"},propTime1:{$type:"application/x-time",$title:"Time"},propInt1:{$type:"application/x-integer",$title:"Integer"},propDecimal1:{$type:"application/x-decimal",$title:"Decimal"},propReal1:{$type:"application/x-real",$title:"Real"},propDate2:{$type:"application/x-date",$title:"Date"},propDateTime2:{$type:"application/x-datetime",$title:"Date+Time"},propTime2:{$type:"application/x-time",$title:"Time"},propInt2:{$type:"application/x-integer",$title:"Integer"},propDecimal2:{$type:"application/x-decimal",$title:"Decimal"},propReal2:{$type:"application/x-real",$title:"Real"},propString:{$type:"application/x-string",$title:"String"}},$relations:{},$articles:{},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve({}),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testFormatsReference",["require","exports","module"],function(require,exports,module){var $descriptionSamples=["Labe","Labuan","La Rochelle","Las Vegas","Las Palmas","Liege","Libreville","Lille","Liverpool","Leipzig","Lucknow","London"],$codeSamples=["LEK","LBU","LRH","LAS","LPA","LGG","LBV","LIL","LPL","LEJ","LKO","LON"],_data={SITE_REF:{$description:"Paris",FCY:"PAR"},SITE_REF_1:{$description:"Yaounde",FCY:"YDE"},SITE_REF_2:{$description:"London",FCY:"LON"},SITE_REF_3:{$description:"Lisbon",FCY:"LIS"}},_qData=[],j=-1,m=-1;for(var i=0;i<3;i++)_qData.push({$uuid:""+i,SITE_REF:{$description:$descriptionSamples[++j],FCY:$codeSamples[++m]},SITE_REF_1:{$description:$descriptionSamples[++j],FCY:$codeSamples[++m]},SITE_REF_2:{$description:$descriptionSamples[++j],FCY:$codeSamples[++m]},SITE_REF_3:{$description:$descriptionSamples[++j],FCY:$codeSamples[++m]}});exports.entity={$entityName:"testFormatsReference",$baseUrl:"http://localhost:8124/mobile1/x3/erp/SUPERV",$properties:{SITE:{$type:"application/x-string",$maxLength:5,$isExcluded:!0},SITE_REF:{$type:"application/x-reference",$title:"Reference",$shortTitle:"Reference",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_1:{$type:"application/x-reference",$title:"Reference 1",$shortTitle:"Reference 1",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_2:{$type:"application/x-reference",$title:"Reference 2",$shortTitle:"Reference 2",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_3:{$type:"application/x-reference",$title:"Reference 3",$shortTitle:"Reference 3",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}}},$relations:{},$articles:{$details:{$layoutType:"stack",$items:[{$bind:"SITE_REF",$title:"Ref field 1"},{$bind:"SITE_REF_1",$title:"Ref field 2"},{$bind:"SITE_REF_2",$title:"Ref field 3"},{$bind:"SITE_REF_3",$title:"Ref field 4"}]},$edit:{$layoutType:"stack",$items:[{$bind:"SITE_REF",$title:"Ref field 1"},{$bind:"SITE_REF_1",$title:"Ref field 2"},{$bind:"SITE_REF_2",$title:"Ref field 3"},{$bind:"SITE_REF_3",$title:"Ref field 4"}]}},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve({}),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_qData}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testCharts",["require","exports","module"],function(require,exports,module){var _data=[{part:"Gear",value:50,revenue:40,margin:10},{part:"Motor",value:60,revenue:40,margin:20},{part:"Head drive",value:60,revenue:80,margin:-20},{part:"Handwheel",value:70,revenue:90,margin:10},{part:"Crank",value:70,revenue:70,margin:0},{part:"Saddle",value:80,revenue:30,margin:50},{part:"Base",value:20,revenue:40,margin:-20},{part:"Spindle",value:10,revenue:0,margin:10}];exports.entity={$entityName:"testCharts",$properties:{part:{$type:"application/x-string",$title:"Item"},value:{$type:"application/x-decimal",$title:"Value",$format:"0.0000"},revenue:{$type:"application/x-decimal",$title:"Revenue",$format:"0.0000"},margin:{$type:"application/x-decimal",$title:"Margin",$format:"0.0000"}},$prototype:function(proto){var res=proto.$properties&&proto.$properties.$resources;res&&(res.$axes=[{$title:"Item",$hierarchies:[["part"]]},{$hierarchies:[["$measures"]]}],res.$cube={$title:"Sales overview",$hierarchies:{part:{$properties:["part"]}},$measures:{value:{},revenue:{},margin:{}}})},$relations:{},$articles:{},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testConstraints",["require","exports","module"],function(require,exports,module){var _data=[],_switch=!1;for(var i=0;i<10;i++)_data.push({$uuid:""+i,propString:"Test "+i,propString2:"Some text "+i,propString3:"Fill me "+i,propInt:i*1e3+i*10,propInt2:i*1e3+i*100,propDecimal:Math.sqrt(i*1e3+i*10),propDecimal2:Math.sqrt(i*1e3+i*100),propDecimal3:Math.sqrt(i*1e3+i*110),propDecimal4:Math.sqrt(i*1e3+i*120),propQuantity:i*123,propStringUnit:"EUR"});exports.entity={$entityName:"testConstraints",$properties:{propString:{$title:"Test: $pattern=Test.*\\d$",$type:"application/x-string",$isMandatory:!0,$pattern:"Test.*\\d$"},propString2:{$title:"Test: $minLength=5, $maxLength=15",$type:"application/x-string",$isMandatory:!0,$minLength:5,$maxLength:15},propString3:{$title:"Test: $minLength=5, $maxLength=15, $pattern=Fill me.*\\d$",$type:"application/x-string",$isMandatory:!0,$pattern:"Fill me.*\\d$",$minLength:5,$maxLength:15},propInt:{$title:"Test: $minimum=100, $maximum=200",$type:"application/x-integer",$isMandatory:!0,$minimum:100,$maximum:200},propInt2:{$title:"Test: $exclusiveMinimum=100, $exclusiveMaximum=200",$type:"application/x-integer",$isMandatory:!0,$exclusiveMinimum:100,$exclusiveMaximum:200},propDecimal:{$title:"Test: $format=0.0000",$type:"application/x-decimal",$isMandatory:!0,$format:"0.0000"},propDecimal2:{$title:"Test: $format=0.00",$type:"application/x-decimal",$isMandatory:!0,$format:"0.00"},propDecimal3:{$title:"Test: $precision=10",$type:"application/x-decimal",$isMandatory:!0,$precision:10},propDecimal4:{$title:"Test: $scale=3",$type:"application/x-decimal",$isMandatory:!0,$scale:3,$format:"0.00000"},propQuantity:{$title:"Test: $format=0.00",$isMandatory:!0,$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$title:"Unit for quantity",$type:"application/x-string",$isMandatory:!1,$isExcluded:!0}},$relations:{},$articles:{},$services:{$new:function(op,data){var deferred=$.Deferred(),i=15,tpl={$uuid:""+i,propString:"Simple String="+i,propInt:i*1e3+i*10,propDecimal:Math.sqrt(i*1e3+i*10)};return deferred.resolve(tpl),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateTo",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),_data=[];for(var i=0;i<10;i++)_data.push({$uuid:""+i,name:"Customer group "+i,group:""+i});exports.entity={$entityName:"testNavigateTo",$properties:{name:{$title:"Customer group name",$type:"application/x-string"},group:{$title:"Customer group",$type:"application/x-string"}},$prototype:function(proto){var res=utils.getPropByPath(proto,"$properties.$resources.$item.$links")||{};res.DASHBOARD={$title:"Detail dashboard",$url:"{$baseUrl}/$mobileDashboards?dashboard=testContextDashboardChild&parameters=group%3D%7Bgroup%7D"}},$relations:{},$articles:{$query:{$layoutType:"stack",$items:[{$bind:"$resources",$detailsLink:"DASHBOARD",$isTitleHidden:!0,$article:{$items:[{$bind:"group"},{$bind:"name"}]},$display:"table"}]}},$services:{$new:function(op,data){var deferred=$.Deferred(),i=15,tpl={$uuid:""+i,propString:"Simple String="+i,propInt:i*1e3+i*10,propDecimal:Math.sqrt(i*1e3+i*10)};return deferred.resolve(tpl),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild",["require","exports","module"],function(require,exports,module){var _data=[];for(var i=0;i<10;i++)for(var j=0;j<10;j++)_data.push({$uuid:""+(i*10+j),name:"Customer "+i*10+j,desc:"Belongs to group "+i,group:""+i});exports.entity={$entityName:"testNavigateToChild",$properties:{name:{$title:"Customer name",$type:"application/x-string"},desc:{$title:"Description",$type:"application/x-string"},group:{$title:"Customer group",$type:"application/x-string"}},$relations:{},$articles:{},$services:{$new:function(op,data){var deferred=$.Deferred(),i=15,tpl={$uuid:""+i,propString:"Simple String="+i,propInt:i*1e3+i*10,propDecimal:Math.sqrt(i*1e3+i*10)};return deferred.resolve(tpl),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow",["require","exports","module"],function(require,exports,module){var _data=[],_switch=!1;for(var i=0;i<10;i++)_data.push({$uuid:""+i,propStringShow:"Simple String="+i,propStringHide:"Simple String="+i,propStringReadOnly:"ReadOnly String="+i,propStringDisabled:"Disabled=true String="+i,propStringDisabledFalse:"Disabled=false String="+i,propDate:"2014-03-"+(i+20),propDateHide:"2014-03-"+(i+20),propDateDisabled:"2014-03-"+(i+20),propDateReadOnly:"2014-03-"+(i+20),propDateTime:"2014-06-"+(i+10)+"T12:45:"+(i+44)+".123Z",propDateTimeHide:"2014-06-"+(i+10)+"T12:45:"+(i+44)+".123Z",propDateTimeDisabled:"2014-06-"+(i+10)+"T12:45:"+(i+44)+".123Z",propTime:"15:45:"+(i+34),propTimeHide:"15:45:"+(i+34),propTimeDisabled:"15:45:"+(i+34),propInt:i*1e3+i*10,propIntHide:i*1e3+i*10,propIntDisabled:i*1e3+i*10,propIntReadOnly:i*1e3+i*10,propDecimal:Math.sqrt(i*1e3+i*10),propDecimalHide:Math.sqrt(i*1e3+i*10),propDecimalDisabled:Math.sqrt(i*1e3+i*10),propDecimalReadOnly:Math.sqrt(i*1e3+i*10),propReal:Math.sqrt(i*1e3+i*30),propBoolean:_switch=!_switch,propBooleanHidden:_switch=!_switch,propBooleanDisabled:_switch=!_switch,propChoice:"mr",propChoiceHidden:"mr",propChoiceDisabled:"mr",propQuantity:i*123,propStringUnit:"EUR",propQuantityExcluded:i*123,propStringUnitExcluded:"USD"});exports.entity={$entityName:"testPropertyHideShow",$properties:{propStringShow:{$type:"application/x-string",$isMandatory:!0,$title:"String Mandatory $isHidden: false",$isHidden:!1},propStringHide:{$type:"application/x-string",$isMandatory:!1,$title:"String $isHidden: true",$isHidden:!0},propStringReadOnly:{$type:"application/x-string",$title:"String $isReadOnly: true",$isReadOnly:!0},propStringDisabledFalse:{$type:"application/x-string",$title:"String $isDisabled: false",$isDisabled:!1},propStringDisabled:{$type:"application/x-string",$title:"String $isDisabled: true",$isDisabled:!0},propDate:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isHidden: false",$isHidden:!1},propDateHide:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isHidden: true",$isHidden:!0},propDateDisabled:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isDisabled: true",$isDisabled:!0},propDateReadOnly:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isReadOnly: true",$isReadOnly:!0},propDateTime:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isHidden: false",$isHidden:!1},propDateTimeHide:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isHidden: true",$isHidden:!0},propDateTimeDisabled:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isDisabled: true",$isDisabled:!0},propTime:{$type:"application/x-time",$isMandatory:!1,$title:"Time long",$format:"TT"},propTimeHide:{$type:"application/x-time",$isMandatory:!1,$title:"Time $isHidden: true",$isHidden:!0},propTimeDisabled:{$type:"application/x-time",$isMandatory:!1,$title:"Time $isDisabled: true",$isDisabled:!0},propInt:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isHidden: false)",$isHidden:!1},propIntHide:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isHidden: true)",$isHidden:!0},propIntDisabled:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isDisabled: true)",$isDisabled:!0},propIntReadOnly:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isReadOnly: true)",$isReadOnly:!0},propDecimal:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isHidden: false",$isHidden:!1},propDecimalHide:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isHidden: true",$isHidden:!0},propDecimalDisabled:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isDisabled: true",$isDisabled:!0},propDecimalReadOnly:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isReadOnly: true",$isReadOnly:!0},propReal:{$type:"application/x-real",$isMandatory:!1,$title:"Real"},propBoolean:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean"},propBooleanHidden:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean ($isHidden: true)",$isHidden:!0},propBooleanDisabled:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean ($isDisabled: true)",$isDisabled:!0},propChoice:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice",$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propChoiceHidden:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice($isHidden: true)",$isHidden:!0,$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propChoiceDisabled:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice ($isDisabled: true)",$isDisabled:!0,$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propQuantity:{$title:"Quantity ($unit $isExcluded: false)",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!1,$title:"Unit for quantity ($isExcluded: false)"},propQuantityExcluded:{$title:"Quantity($unit $isExcluded: true)",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnitExcluded"},propStringUnitExcluded:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!0,$title:"Unit for quantity ($isExcluded: true)"}},$relations:{},$articles:{},$services:{$new:function(op,data){var deferred=$.Deferred(),i=15,tpl={$uuid:""+i,propString:"Simple String="+i,propDate:"2014-03-"+i,propDateTime:"2014-06-"+i+"T12:45:"+(i+44)+".234Z",propTime:"15:45:"+(i+34),propInt:i*1e3+i*10,propDecimal:Math.sqrt(i*1e3+i*10),propReal:Math.sqrt(i*1e3+i*30),propBoolean:_switch=!_switch};return deferred.resolve(tpl),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGaugeChart",["require","exports","module"],function(require,exports,module){var _data={salesOp:"75.0000000000",salesValue:"133000.0000000000",salesValueMin:"100000.0000000000",salesValueMax:"150000.0000000000"},_entity={$entityName:"testGaugeChart",$properties:{salesOp:{$title:"sale opportunity",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValue:{$title:"sales value",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValueMin:{$title:"sales value min",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValueMax:{$title:"sales value max",$type:"application/x-decimal",$capabilities:"sort,filter"}},$relations:{},$articles:{},$services:{$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data),deferred.promise()}}};exports.entity=_entity}),define("syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testHomeDashboard:{$dashboardName:"testHomeDashboard",$title:"Main test dashboard",$description:"This dashboard links to different dashboards used for every kind of UI tests",$vignettes:{testLayoutsDashboard:{$uuid:"testLayoutsDashboard",$displayStyle:"$link"},testTypesDashboard:{$uuid:"testTypesDashboard",$displayStyle:"$link"},testTypesDashboard2:{$uuid:"testTypesDashboard2",$displayStyle:"$link"},testFormatsDashboard:{$uuid:"testFormatsDashboard",$displayStyle:"$link"},testGX3APPDashboard:{$uuid:"testGX3APPDashboard",$displayStyle:"$link"},testSUPERVDashboard:{$uuid:"testSUPERVDashboard",$displayStyle:"$link"},testChartsHubDashboard:{$uuid:"testChartsHubDashboard",$displayStyle:"$link"},testChartsStackDashboard:{$uuid:"testChartsStackDashboard",$displayStyle:"$link"},testSUPERVDashboard2:{$uuid:"testSUPERVDashboard2",$displayStyle:"$link"},testGX3APPDashboard2:{$uuid:"testGX3APPDashboard2",$displayStyle:"$link"},testConstraintsDashboard:{$uuid:"testConstraintsDashboard",$displayStyle:"$link"},testContextDashboard:{$uuid:"testContextDashboard",$displayStyle:"$link"},testPropertyHideShowDashboard:{$uuid:"testPropertyHideShowDashboard",$displayStyle:"$link"},testAQTACTNPDashboard:{$uuid:"testAQTACTNPDashboard",$displayStyle:"$link"},testQAQTGRAPDashboard:{$uuid:"testQAQTGRAPDashboard",$displayStyle:"$link"},testSTATISTICDashboard:{$uuid:"testSTATISTICDashboard",$displayStyle:"$link"},testGaugeChartDashboard:{$uuid:"testGaugeChartDashboard",$displayStyle:"$link"},testGridDashboard:{$uuid:"testGridDashboard",$displayStyle:"$link"},testDefaultAQTCRUDM:{$uuid:"testDefaultAQTCRUDM",$displayStyle:"$link"},testDefaultAQMCRUDM:{$uuid:"testDefaultAQMCRUDM",$displayStyle:"$link"},testDefaultAQMFIELDSM:{$uuid:"testDefaultAQMFIELDSM",$displayStyle:"$link"},testDefaultAQMSEARCHM:{$uuid:"testDefaultAQMSEARCHM",$displayStyle:"$link"},unitTestsDashboard:{$uuid:"unitTestsDashboard",$displayStyle:"$link"},testAQMBLOBM:{$uuid:"testAQMBLOBM",$displayStyle:"$link"},testAQMCLOBM:{$uuid:"testAQMCLOBM",$displayStyle:"$link"},testAUTILISM:{$uuid:"testAUTILISM",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Client only",$items:[{$layoutType:"tile",$bgColor:"purple",$items:[{$bind:"testLayoutsDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"lightgreen",$items:[{$bind:"testFormatsDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"lightgreen",$items:[{$bind:"testTypesDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"medium-grey",$items:[{$bind:"testConstraintsDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"darkgrey",$title:"Test title",$icon:"adjust",$items:[{$bind:"testChartsHubDashboard"}],$size:"medium"},{$layoutType:"tile",$bgColor:"darkgrey",$title:"Test title",$icon:"adjust",$items:[{$bind:"testChartsStackDashboard"}],$size:"medium"},{$layoutType:"tile",$bgColor:"blue",$items:[{$bind:"testContextDashboard"}],$size:"medium"},{$layoutType:"tile",$bgColor:"darkgrey",$items:[{$bind:"testPropertyHideShowDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"darkgrey",$items:[{$bind:"testGaugeChartDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"alert",$items:[{$bind:"unitTestsDashboard"}],$size:"medium"}]},{$layoutType:"hubGroup",$title:"SUPERV endpoint",$items:[{$layoutType:"tile",$bgColor:"green",$items:[{$bind:"testSUPERVDashboard"}]},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testGridDashboard"}]}]},{$layoutType:"hubGroup",$title:"GX3APP endpoint",$items:[{$layoutType:"tile",$bgColor:"blue",$items:[{$bind:"testGX3APPDashboard"}]},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testGX3APPDashboard2"}]}]},{$layoutType:"hubGroup",$title:"testQAQTGRAP SUPERV",$items:[{$layoutType:"tile",$bgColor:"purple",$items:[{$bind:"testQAQTGRAPDashboard"}]}]},{$layoutType:"hubGroup",$title:"testSTATISTIC SUPERV",$items:[{$layoutType:"tile",$bgColor:"purple",$items:[{$bind:"testSTATISTICDashboard"}]}]},{$layoutType:"hubGroup",$title:"Default endpoint",$items:[{$layoutType:"tile",$bgColor:"mediumgrey",$items:[{$bind:"testAQTACTNPDashboard"}]},{$layoutType:"tile",$bgColor:"lightgreen",$items:[{$bind:"testTypesDashboard2"}],$size:"medium"},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testDefaultAQTCRUDM"}]},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testDefaultAQMCRUDM"}]},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testDefaultAQMFIELDSM"}]},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testDefaultAQMSEARCHM"}]},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testAQMBLOBM"}]},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testAQMCLOBM"}]},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testAUTILISM"}]}]}]}}},exports.gadgets={testLayoutsDashboard:{$type:"$dashboard",$title:"Layout tests",$description:"Layout tests",dashboardName:"testLayoutsDashboard"},testTypesDashboard:{$type:"$dashboard",$title:"Datatype tests",$description:"Datatype tests",dashboardName:"testTypesDashboard"},testTypesDashboard2:{$type:"$dashboard",$title:"Datatype AQTCRUD",$description:"Datatype AQTCRUD",dashboardName:"testTypesDashboard2"},testFormatsDashboard:{$type:"$dashboard",$title:"Formats tests",$description:"Formats tests",dashboardName:"testFormatsDashboard"},testGX3APPDashboard:{$type:"$dashboard",$title:"GX3APP tests",$description:"GX3APP tests",dashboardName:"testGX3APPDashboard"},testSUPERVDashboard:{$type:"$dashboard",$title:"SUPERV tests",$description:"SUPERV tests",dashboardName:"testSUPERVDashboard"},testChartsHubDashboard:{$type:"$dashboard",$title:"Charts tests (hub)",$description:"Charts tests (hub)",dashboardName:"testChartsHubDashboard"},testChartsStackDashboard:{$type:"$dashboard",$title:"Charts tests (stack)",$description:"Charts tests  (stack)",dashboardName:"testChartsStackDashboard"},testSUPERVDashboard2:{$type:"$dashboard",$title:"AQMCRUDM",$description:"AQMCRUDM default endpoint",dashboardName:"testSUPERVDashboard2"},testGX3APPDashboard2:{$type:"$dashboard",$title:"GX3APP Cost",$description:"GX3APP Cost",dashboardName:"testGX3APPDashboard2"},testConstraintsDashboard:{$type:"$dashboard",$title:"SData constraints",$description:"SData constraints",dashboardName:"testConstraintsDashboard"},testContextDashboard:{$type:"$dashboard",$title:"Dashboard with context",$description:"Dashboard with context",dashboardName:"testContextDashboard"},testPropertyHideShowDashboard:{$type:"$dashboard",$title:"Property Hide Show",$description:"Dashboard PropertyHideShow",dashboardName:"testPropertyHideShowDashboard"},testAQTACTNPDashboard:{$type:"$dashboard",$title:"AQTACTNP Create facet",$description:"AQTACTNP Create facet",dashboardName:"testAQTACTNPDashboard"},testQAQTGRAPDashboard:{$type:"$dashboard",$title:"test QAQTGRAP",$description:"test QAQTGRAP ",dashboardName:"testQAQTGRAPDashboard"},testSTATISTICDashboard:{$type:"$dashboard",$title:"test STATISTIC",$description:"test STATISTIC",dashboardName:"testSTATISTICDashboard"},testGaugeChartDashboard:{$type:"$dashboard",$title:"Test gauge chart",$description:"Test gauge chart",dashboardName:"testGaugeChartDashboard"},unitTestsDashboard:{$type:"$dashboard",$title:"Unit tests",$description:"Unit tests",dashboardName:"unitTestsDashboard"},testGridDashboard:{$type:"$dashboard",$title:"Test grid authoring",$description:"Test grid authoring",dashboardName:"testGridDashboard"},testDefaultAQTCRUDM:{$type:"$dashboard",$title:"AQTCRUDM",$description:"Test AQTCRUDM",dashboardName:"testDefaultAQTCRUDM"},testDefaultAQMCRUDM:{$type:"$dashboard",$title:"AQMCRUDM",$description:"Test AQMCRUDM",dashboardName:"testDefaultAQMCRUDM"},testDefaultAQMFIELDSM:{$type:"$dashboard",$title:"AQMFIELDSM",$description:"Test AQMFIELDSM",dashboardName:"testDefaultAQMFIELDSM"},testDefaultAQMSEARCHM:{$type:"$dashboard",$title:"AQMSEARCHM",$description:"Test AQMSEARCHM",dashboardName:"testDefaultAQMSEARCHM"},testAQMBLOBM:{$type:"$representation",$title:"AQMBLOBM",action:"$query",representation:"AQMBLOBM",facet:"$query"},testAQMCLOBM:{$type:"$representation",$title:"AQMCLOBM",action:"$query",representation:"AQMCLOBM",facet:"$query"},testAUTILISM:{$type:"$representation",$title:"AUTILISM",action:"$query",representation:"AUTILISM",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testLayoutsDashboard:{$dashboardName:"testLayoutsDashboard",$title:"Layout test dashboard",$description:"Test different kinds of layouts",$vignettes:{testLayoutHubDashboard:{$uuid:"testLayoutHubDashboard",$displayStyle:"$link"},testLayoutRowsDashboard:{$uuid:"testLayoutRowsDashboard",$displayStyle:"$link"},testLongQuery:{$uuid:"testLongQuery",$displayStyle:"$link"},testHubLayoutEntity:{$uuid:"testHubLayoutEntity",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLayoutHubDashboard"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLayoutRowsDashboard"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLongQuery"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testHubLayoutEntity"}]}]}]}},testLayoutHubDashboard:{$dashboardName:"testLayoutHubDashboard",$title:"Hub dashboard (scroll horizontal)",$description:"Horizontal scrolling dashboard",$vignettes:{testDummyTile:{$uuid:"testDummyTile",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Layout group 1",$items:[{$layoutType:"tile",$bgColor:"darkgrey",$items:[{$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"name",$labelPosition:"left"},{$bind:"desc",$labelPosition:"top"},{$bind:"desc2",$labelPosition:"right"},{$bind:"desc2",$labelAlign:"right"},{$bind:"amount",$labelPosition:"bottom"},{$bind:"amount",$isTitleHidden:!0}]}}],$size:"full"},{$layoutType:"tile",$bgColor:"darkgrey",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$bgColor:"sagegreen",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bgColor:"darkgrey",$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$bgColor:"lightgreen",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$bgColor:"skyblue",$items:[{$bind:"testDummyTile"}],$size:"wide"},{$layoutType:"tile",$bgColor:"orange",$items:[{$bind:"testDummyTile"}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Layout group 2",$items:[{$layoutType:"tile",$bgColor:"blue",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$bgColor:"mediumgrey",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$bgColor:"green",$items:[{$bind:"testDummyTile"}],$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 3",$items:[{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"wide"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 4",$items:[{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 5",$items:[{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"wide"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"full"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"}]}]}},testLayoutRowsDashboard:{$dashboardName:"testLayoutRowsDashboard",$title:"Row layout dashboard (scroll vertical)",$description:"Vertical scrolling dashboard",$vignettes:{testDummyTile:{$uuid:"testDummyTile",$displayStyle:"$full"},testDummyTileLink:{$uuid:"testDummyTile",$displayStyle:"$link"}},$article:{$layoutType:"stack",$localization:{"en-US":{"67bfa0d4-958f-4929-9bd4-05a248e594c4":"On tablet portrait mode, this shows 4 cells in a line. On Mini-Tablet landscape (Nexus7) it shows three ons one cell per line. On Tablet landscape, it 2 per line. On phone or smaller its one per line"}},$items:[{$layoutType:"stack",$title:"{@67bfa0d4-958f-4929-9bd4-05a248e594c4}",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthLg:"3",$widthSm:"6",$widthXs:"12",$widthMd:"4",$items:[{$layoutType:"stack",$items:[{$bind:"testDummyTileLink",$article:{}}]}]},{$layoutType:"cell",$widthLg:"3",$widthSm:"6",$widthXs:"12",$widthMd:"4",$items:[{$layoutType:"stack",$items:[{$bind:"testDummyTileLink",$article:{}}]}]},{$layoutType:"cell",$widthLg:"3",$widthSm:"6",$widthXs:"12",$widthMd:"4",$items:[{$layoutType:"stack",$items:[{$bind:"testDummyTileLink",$article:{}}]}]},{$layoutType:"cell",$widthLg:"3",$widthSm:"6",$widthXs:"12",$widthMd:"12",$items:[{$layoutType:"stack",$items:[{$bind:"testDummyTileLink",$article:{}}]}]}]}]},{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthLg:"6",$widthSm:"6",$widthXs:"12",$items:[{$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"desc"},{$bind:"desc2"},{$bind:"amount"}]}}]},{$layoutType:"cell",$widthLg:"6",$widthSm:"6",$widthXs:"12",$items:[{$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"desc"},{$bind:"desc2"},{$bind:"amount"}]}}]},{$layoutType:"cell",$items:[{$widthLg:"3",$widthSm:"4",$widthXs:"12",$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"desc"},{$bind:"desc2"},{$bind:"amount"}]}}]},{$layoutType:"cell",$items:[{$widthLg:"3",$widthSm:"12",$widthXs:"12",$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"desc"},{$bind:"desc2"},{$bind:"amount"}]}}]}]}]}]}}},exports.gadgets={testLayoutHubDashboard:{$type:"$dashboard",$title:"Hub Layout tests",$description:"Hub Layout tests",dashboardName:"testLayoutHubDashboard"},testLayoutRowsDashboard:{$type:"$dashboard",$title:"Rows Layout tests",$description:"Rows Layout tests",dashboardName:"testLayoutRowsDashboard"},testDummyTile:{$type:"$representation",$title:"Dummy",$description:"Dummy",entity:"example",action:"$details",representation:"example",facet:"$details",keyParameter:"5"},testLongQuery:{$type:"$representation",$title:"Long query",$description:"Query",entity:"example",action:"$query",representation:"example",facet:"$query"},testHubLayoutEntity:{$type:"$representation",$title:"Hub Layout on Representation",$description:"Hub Layout on Representation",entity:"exampleHubLayout",action:"$details",representation:"exampleHubLayout",facet:"$details",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testTypesDashboard:{$dashboardName:"testTypesDashboard",$title:"Datatypes test dashboard",$description:"Test different kinds of datatypes",$vignettes:{testLinkQueryRecord:{$uuid:"testDisplayQueryRecord",$displayStyle:"$link"},testLinkDetailsRecord:{$uuid:"testDisplayDetailsRecord",$displayStyle:"$link"},testLinkEditRecord:{$uuid:"testDisplayEditRecord",$displayStyle:"$link"},testLinkCreateRecord:{$uuid:"testDisplayCreateRecord",$displayStyle:"$link"},testDisplayQueryRecord:{$uuid:"testDisplayQueryRecord",$displayStyle:"$full"},testDisplayDetailsRecord:{$uuid:"testDisplayDetailsRecord",$displayStyle:"$full"},testDisplayEditRecord:{$uuid:"testDisplayEditRecord",$displayStyle:"$full"},testDisplayCreateRecord:{$uuid:"testDisplayCreateRecord",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkQueryRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkDetailsRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkEditRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkCreateRecord"}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayQueryRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayDetailsRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayEditRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayCreateRecord"}]}]}]}}},exports.gadgets={testDisplayDetailsRecord:{$type:"$representation",$title:"Details facet",entity:"testDataTypes",action:"$details",representation:"testDataTypes",facet:"$details",keyParameter:"5"},testDisplayEditRecord:{$type:"$representation",$title:"Edit facet",entity:"testDataTypes",action:"$edit",representation:"testDataTypes",facet:"$edit",keyParameter:"5"},testDisplayCreateRecord:{$type:"$representation",$title:"Create facet",entity:"testDataTypes",action:"$create",representation:"testDataTypes",facet:"$create",keyParameter:"5"},testDisplayQueryRecord:{$type:"$representation",$title:"Query facet",entity:"testDataTypes",action:"$query",representation:"testDataTypes",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testFormatsDashboard:{$dashboardName:"testFormatsDashboard",$title:"Formatting test dashboard",$description:"Test different kinds of formats",$vignettes:{testFormatEditRecord:{$uuid:"testFormatEditRecord",$displayStyle:"$full"},testFormatReferenceDetail:{$uuid:"testFormatReferenceDetail",$displayStyle:"$full"},testFormatReferenceEdit:{$uuid:"testFormatReferenceEdit",$displayStyle:"$full"},testFormatReferenceQuery:{$uuid:"testFormatReferenceQuery",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testFormatEditRecord"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testFormatReferenceDetail"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testFormatReferenceEdit"}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testFormatReferenceQuery"}]}]}]}}},exports.gadgets={testFormatEditRecord:{$type:"$representation",$title:"Details facet",entity:"testFormats",action:"$edit",representation:"testFormats",facet:"$edit",keyParameter:"5"},testFormatReferenceDetail:{$type:"$representation",$title:"Details facet reference fields",entity:"testFormatsReference",action:"$details",representation:"testFormatsReference",facet:"$details",keyParameter:"5"},testFormatReferenceEdit:{$type:"$representation",$title:"Edit facet reference fields",entity:"testFormatsReference",action:"$edit",representation:"testFormatsReference",facet:"$edit",keyParameter:"5"},testFormatReferenceQuery:{$type:"$representation",$title:"Query facet reference fields",entity:"testFormatsReference",action:"$query",representation:"testFormatsReference",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testGX3APPDashboard:{$dashboardName:"testGX3APPDashboard",$title:"Display data from GX3APP",$description:"Test different representations on GX3APP",$vignettes:{testACTIVQuery:{$uuid:"testACTIVQuery",$displayStyle:"$full"},testRequestVEN085:{$uuid:"testRequestVEN085",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Some data...",$items:[{$layoutType:"tile",$items:[{$bind:"testACTIVQuery"}],$size:"full"}]},{$layoutType:"hubGroup",$title:"Some fancy chart",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestVEN085"}],$size:"large"}]}]}}},exports.gadgets={testACTIVQuery:{$type:"$representation",$title:"Query ACTIV",entity:"ACTIV",action:"$query",representation:"ACTIV",endpoint:"x3.erp.GX3APP",facet:"$query"},testRequestVEN085:{$type:"$request",$title:"Request VEN085",requestName:"VEN085",requestLevel:"1",action:"$query",endpoint:"x3.erp.GX3APP",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard",["require","exports","module"],function(require,exports,module){var _detailLinkArticle={$layoutType:"stack",$title:"Test collapsed",$collapsible:"collapsed",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"sagegreen",$items:[{$bind:"MODULE"},{$bind:"UPDUSR_REF"},{$bind:"CREUSR_REF"},{$bind:"UNIT_REF"},{$bind:"TDCB2"},{$bind:"SITE_REF"},{$bind:"QTY",$numDisplay:"normal"},{$bind:"WCUR_REF"},{$bind:"TEL"},{$bind:"TEXTAXX"},{$bind:"TDCB",$items:[{$bind:"WCUR_REF"}]},{$bind:"TEL"},{$bind:"TDATE"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"orange",$items:[{$bind:"CODE"},{$bind:"CODECHR"},{$bind:"TEXTDES0"},{$bind:"TEXTE"},{$bind:"CRY_REF"},{$bind:"CPY_REF"},{$bind:"CUR_REF"},{$bind:"TYPEATT"},{$bind:"HIDEWHOW"},{$bind:"EMAIL"},{$bind:"TEXTAXX"},{$bind:"TDCB3"},{$bind:"DIVERS0"},{$bind:"TPOSIF"}]}]},{$layoutType:"stack",$title:"Test collapsed",$collapsible:"collapsed",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"PBLOB"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"PBLOB2"}]}]}]},{$layoutType:"stack",$collapsible:"expanded",$title:"Test collapsible",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"ADEVCOLREF2",$article:{}},{$bind:"ADEVADEVCOL1",$article:{}},{$bind:"ADEVTABL",$article:{}}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"ADEVCOLREF1",$article:{}}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"ADEVCTINT",$article:{}}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"ADEVTABDATE",$article:{}}]}]}]},{$layoutType:"stack",$title:"Test collapsible",$collapsible:"expanded",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$items:[{$bind:"ADEVADEVICEL",$display:"card",$article:{}}]}]}]},{$layoutType:"stack",$collapsible:"expanded",$title:"Test collapsible",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"PCLOB"},{$bind:"TEXTHTML",$labelPosition:"top"},{$bind:"TYEPACD",$labelPosition:"top"},{$bind:"TYEPACB"},{$bind:"TEXTRTF",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"TEXTHTML",$labelPosition:"top"},{$bind:"TYEPACD",$labelPosition:"top"},{$bind:"TEXTPLAIN",$labelPosition:"top"}]}]}]}]},_queryLinkArticle={$layoutType:"stack",$items:[{$bind:"$resources",$display:"table",$detailLinkArticle:_detailLinkArticle,$table:[{$bind:"CODE",$title:"Code",$type:"application/x-integer",$titleOrig:"{@5296}",$widthType:"fixed",$widthVal:4},{$bind:"TEXTDES0",$title:"Description",$type:"application/x-string",$titleOrig:"{@282}",$widthType:"auto",$widthVal:0},{$bind:"CUR_REF",$title:"Currency",$type:"application/x-reference",$titleOrig:"{@323}",$widthType:"fixed",$widthVal:6,$refDescPosition:"bottom"},{$bind:"TDATE",$title:"Date",$type:"application/x-date",$titleOrig:"{@212}",$widthType:"fixed",$widthVal:6},{$bind:"CPY_REF",$title:"Company",$type:"application/x-reference",$titleOrig:"{@1343}",$widthType:"fixed",$widthVal:6,$refDescPosition:"bottom"},{$bind:"SITE_REF",$title:"Site",$type:"application/x-reference",$titleOrig:"{@1344}",$widthType:"fixed",$widthVal:6,$refDescPosition:"bottom"},{$bind:"CRY_REF",$title:"Country",$type:"application/x-reference",$titleOrig:"{@263}",$widthType:"fixed",$widthVal:6,$refDescPosition:"bottom"},{$bind:"TDCB2",$title:"4-dcimal",$type:"application/x-decimal",$titleOrig:"{@28715}",$widthType:"fixed",$widthVal:6},{$bind:"UNIT_REF",$title:"Unit",$type:"application/x-reference",$titleOrig:"{@2685}",$widthType:"fixed",$widthVal:6}],$article:{}}]};exports.dashboards={testSUPERVDashboard:{$dashboardName:"testSUPERVDashboard",$title:"Display Query AQMCRUDM",$description:"",$vignettes:{testAQMDEVICEQuery:{$uuid:"testAQMDEVICEQuery",$displayStyle:"$full"},testAQMDEVICEQueryLink:{$uuid:"testAQMDEVICEQuery",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$items:[{$layoutType:"tile",$title:"QUERY display in table mode 1",$size:"full",$items:[{$bind:"testAQMDEVICEQuery",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$arrayOptions:{showSortFilter:!0},$display:"table",$queryLinkArticle:_queryLinkArticle,$detailLinkArticle:_detailLinkArticle,$table:[{$bind:"CODE",$widthType:"fixed",$widthVal:"3"},{$bind:"TDATE",$widthType:"fixed",$widthVal:"4"},{$bind:"CUR_REF",$widthType:"fixed",$widthVal:"3",$refDescPosition:"bottom"},{$bind:"CPY_REF",$widthType:"fixed",$widthVal:"3",$refDescPosition:"none"}]}]}}]},{$layoutType:"tile",$title:"QUERY display in table mode 2",$size:"full",$items:[{$bind:"testAQMDEVICEQuery",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$arrayOptions:{showSortFilter:!0},$display:"table",$queryLinkArticle:_queryLinkArticle,$detailLinkArticle:_detailLinkArticle,$table:[{$bind:"CODE",$widthType:"fixed",$widthVal:"3"},{$bind:"TDATE",$widthType:"fixed",$widthVal:"4"},{$bind:"CUR_REF",$widthType:"fixed",$widthVal:"3",$refDescPosition:"bottom"},{$bind:"CPY_REF",$widthType:"fixed",$widthVal:"3",$refDescPosition:"none"}]}]}}]},{$layoutType:"tile",$title:"Open in card mode",$size:"medium",$items:[{$bind:"testAQMDEVICEQueryLink",$linkArticle:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$display:"card",$detailLinkArticle:_detailLinkArticle,$card:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"sagegreen",$items:[{$bind:"MODULE"},{$bind:"UPDUSR_REF"},{$bind:"CREUSR_REF"},{$bind:"UNIT_REF"},{$bind:"TDCB2"},{$bind:"SITE_REF"},{$bind:"TDATE"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"orange",$items:[{$bind:"CODE"},{$bind:"CODECHR"},{$bind:"TEXTDES0"},{$bind:"TEXTE"},{$bind:"CRY_REF"},{$bind:"CPY_REF"},{$bind:"CUR_REF"}]}]}]},$minWidth:4}]}}]},{$layoutType:"tile",$title:"Open in table mode",$size:"medium",$items:[{$bind:"testAQMDEVICEQueryLink",$linkArticle:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"table",$detailLinkArticle:_detailLinkArticle,$table:[{$bind:"CODE",$widthType:"fixed",$widthVal:"5"},{$bind:"TDATE",$widthType:"fixed",$widthVal:"6"},{$bind:"CUR_REF",$widthType:"fixed",$widthVal:"3",$refDescPosition:"none"},{$bind:"CPY_REF",$widthType:"fixed",$widthVal:"6",$refDescPosition:"top"},{$bind:"SITE_REF",$widthType:"fixed",$widthVal:"10",$refDescFormat:"titledesc",$refDescPosition:"bottom"},{$bind:"TEXTDES0"}]}]}}]}]}]}}},exports.gadgets={testAQMDEVICEQuery:{$type:"$representation",$title:"Query AQMCRUDM",entity:"AQMDEVICE",action:"$query",representation:"AQMCRUDM",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testChartsHubDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testChartsHubDashboard:{$dashboardName:"testChartsHubDashboard",$title:"Display charts (Hub)",$description:"Test different kind of charts",$vignettes:{testRequestChart:{$uuid:"testRequestChart",$displayStyle:"$full"},testRequestChart1:{$uuid:"testRequestChart",$displayStyle:"$full"},testRequestChart2:{$uuid:"testRequestChart",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Big chart (!)",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}],$size:"full"},{$layoutType:"tile",$items:[{$bind:"testRequestChart1",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Bar charts",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart2",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"stick"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Line charts",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"line"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"area"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Spline charts",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"spline"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"areaspline"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Pie chart",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"pie"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Test different sizes/legends",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!1,$style:"line"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$style:"line"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$isXLabelHidden:!0,$isYLabelHidden:!0,$isXLabelsHidden:!0,$isYLabelsHidden:!0,$style:"line"}]}}],$size:"wide"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$isXLabelHidden:!0,$isYLabelHidden:!0,$isXLabelsHidden:!0,$isYLabelsHidden:!0,$style:"bar"}]}}],$size:"medium"}]}]}}},exports.gadgets={testRequestChart:{$type:"$request",$title:"Request test",requestName:"testCharts",requestLevel:"1",action:"$query",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testChartsStackDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testChartsStackDashboard:{$dashboardName:"testChartsStackDashboard",$title:"Display charts (stack)",$description:"Test different kind of charts",$vignettes:{testRequestChart:{$uuid:"testRequestChart",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"stick"}]}}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"line"}]}}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"area"}]}}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"spline"}]}}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"areaspline"}]}}]}]},{$layoutType:"row",$title:"Pie chart",$items:[{$layoutType:"cell",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"pie"}]}}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"3",$widthLg:"3",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!1,$style:"line"}]}}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"3",$widthLg:"3",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$style:"line"}]}}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"3",$widthLg:"3",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$isXLabelHidden:!0,$isYLabelHidden:!0,$isXLabelsHidden:!0,$isYLabelsHidden:!0,$style:"line"}]}}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"3",$widthLg:"3",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$isXLabelHidden:!0,$isYLabelHidden:!0,$isXLabelsHidden:!0,$isYLabelsHidden:!0,$style:"bar"}]}}]}]}]}}},exports.gadgets={}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2",["require","exports","module"],function(require,exports,module){exports.dashboards={testSUPERVDashboard2:{$dashboardName:"testSUPERVDashboard2",$title:"AQMCRUDM default endpoint",$description:"Test representation AQMCRUDM",$vignettes:{testAQTCRUDQuery:{$uuid:"testAQTCRUDQuery",$displayStyle:"$full"},testAQTCRUDQueryLink:{$uuid:"testAQTCRUDQuery",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$widthXs:"6,1",$items:[{$bind:"testAQTCRUDQuery"},{$bind:"testAQTCRUDQueryLink"}]}]}}},exports.gadgets={testAQTCRUDQuery:{$type:"$representation",$title:"Query AQMCRUDM",entity:"AQMCRUDM",action:"$query",representation:"AQMCRUDM",facet:"$query"},testAQTCRUDQueryLink:{$type:"$representation",$title:"Query 10 AQMCRUDM",requestName:"10",requestLevel:"1",action:"$query",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2",["require","exports","module"],function(require,exports,module){exports.dashboards={testGX3APPDashboard2:{$dashboardName:"testGX3APPDashboard2",$title:"Display data from GX3APP",$description:"Test PRPCOSTCTR representation on GX3APP",$vignettes:{testPRPCOSTCTRQuery:{$uuid:"testPRPCOSTCTRQuery",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Some data Spending cost...",$items:[{$layoutType:"tile",$items:[{$bind:"testPRPCOSTCTRQuery"}],$size:"full"}]}]}}},exports.gadgets={testPRPCOSTCTRQuery:{$type:"$representation",$title:"Query PRPCOSTCTR",entity:"PRPCOSTCTR",action:"$query",representation:"PRPCOSTCTR",endpoint:"x3.erp.GX3APP",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testConstraintsDashboard:{$dashboardName:"testConstraintsDashboard",$title:"Constraints test dashboard",$description:"Test SData constraints: https://github.com/Sage-ERP-X3/platform/wiki/Resource-Prototypes#type-constraints",$vignettes:{testConstraintsEditRecord:{$uuid:"testConstraintsEditRecord",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$items:[{$bind:"testConstraintsEditRecord"}]}]}]}}},exports.gadgets={testConstraintsEditRecord:{$type:"$representation",$title:"Edit facet",entity:"testConstraints",action:"$edit",representation:"testConstraints",facet:"$edit",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testContextDashboard:{$dashboardName:"testContextDashboard",$title:"Test dashboard parameters",$description:"Test navigation to a dashboard with parameters",$vignettes:{testRecordLinkToDashboard:{$uuid:"testRecordLinkToDashboard",$displayStyle:"$full"},testRecordLinkToDashboardLink:{$uuid:"testRecordLinkToDashboardLink",$displayStyle:"$full"},testRecordLinkToDashboardSUPERV:{$uuid:"testRecordLinkToDashboardSUPERV",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordLinkToDashboard"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordLinkToDashboardLink"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordLinkToDashboardSUPERV"}]}]}]}},testContextDashboardChild:{$dashboardName:"testContextDashboardChild",$title:"Child dashboard",$description:"Child dashboard getting parameters that are applied to the first to vignettes but not to the last one using the same representation to gather data",$vignettes:{testRecordWithContext1:{$uuid:"testRecordWithContext",$displayStyle:"$full"},testRecordWithContext2:{$uuid:"testRecordWithContext",$displayStyle:"$full"},testRecordWithoutContext:{$uuid:"testRecordWithoutContext",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordWithContext1"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordWithContext2"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordWithoutContext"}]}]}]}},testContextDashboardChildSUPERV:{$dashboardName:"testContextDashboardChildSUPERV",$title:"Child dashboard",$description:"Child dashboard getting parameters",$vignettes:{testRecordWithContextSUPERV:{$uuid:"testRecordWithContextSUPERV",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$items:[{$bind:"testRecordWithContextSUPERV"}]}]}]}}},exports.gadgets={testRecordLinkToDashboard:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateTo",action:"$query",representation:"testNavigateTo",facet:"$query"},testRecordWithContext:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateToChild",action:"$query",representation:"testNavigateToChild",facet:"$query",parameters:{where:{value:"group eq '{group}'"}}},testRecordLinkToDashboardLink:{$type:"$dashboard",$title:"Open dashboard w/o params",dashboardName:"testContextDashboardChild"},testRecordWithoutContext:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateToChild",action:"$query",representation:"testNavigateToChild",facet:"$query"},testRecordLinkToDashboardSUPERV:{$type:"$representation",$title:"Click to navigate",entity:"AQMDEVICEM",action:"$query",representation:"AQMDEVICEM",facet:"$query",endpoint:"x3.erp.SUPERV"},testRecordWithContextSUPERV:{$type:"$representation",$title:"Click to navigate",entity:"AQMDEVICEM",action:"$query",representation:"AQMDEVICEM",facet:"$query",endpoint:"x3.erp.SUPERV",parameters:{where:{value:"CODE eq {CODE}"}}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testPropertyHideShowDashboard:{$dashboardName:"testPropertyHideShowDashboard",$title:"PropertyHideShow test dashboard",$description:"Test different kinds of PropertyHideShow",$vignettes:{testLinkQueryRecordHS:{$uuid:"testDisplayQueryRecordHS",$displayStyle:"$link"},testLinkDetailsRecordHS:{$uuid:"testDisplayDetailsRecordHS",$displayStyle:"$link"},testLinkEditRecordHS:{$uuid:"testDisplayEditRecordHS",$displayStyle:"$link"},testLinkCreateRecordHS:{$uuid:"testDisplayCreateRecordHS",$displayStyle:"$link"},testDisplayQueryRecordHS:{$uuid:"testDisplayQueryRecordHS",$displayStyle:"$full"},testDisplayDetailsRecordHS:{$uuid:"testDisplayDetailsRecordHS",$displayStyle:"$full"},testDisplayEditRecordHS:{$uuid:"testDisplayEditRecordHS",$displayStyle:"$full"},testDisplayCreateRecordHS:{$uuid:"testDisplayCreateRecordHS",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkQueryRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkDetailsRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkEditRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkCreateRecordHS"}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayQueryRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayDetailsRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayEditRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayCreateRecordHS"}]}]}]}}},exports.gadgets={testDisplayDetailsRecordHS:{$type:"$representation",$title:"Details facet",entity:"testPropertyHideShow",action:"$details",representation:"testPropertyHideShow",facet:"$details",keyParameter:"5"},testDisplayEditRecordHS:{$type:"$representation",$title:"Edit facet",entity:"testPropertyHideShow",action:"$edit",representation:"testPropertyHideShow",facet:"$edit",keyParameter:"5"},testDisplayCreateRecordHS:{$type:"$representation",$title:"Create facet",entity:"testPropertyHideShow",action:"$create",representation:"testPropertyHideShow",facet:"$create",keyParameter:"5"},testDisplayQueryRecordHS:{$type:"$representation",$title:"Query facet",entity:"testPropertyHideShow",action:"$query",representation:"testPropertyHideShow",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testAQTACTNPDashboard:{$dashboardName:"testAQTACTNPDashboard",$title:"AQTACTNP Facet Create",$description:"Test Facet Create AQTACTNP",$vignettes:{testAQTACTNPCreate:{$uuid:"testAQTACTNPCreate",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testAQTACTNPCreate"}]}]}]}}},exports.gadgets={testAQTACTNPCreate:{$type:"$representation",$title:"Facet Create AQTACTNP",entity:"AQTACTNP",action:"$create",representation:"AQTACTNP",facet:"$create"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testQAQTGRAPDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testQAQTGRAPDashboard:{$dashboardName:"testQAQTGRAPDashboard",$title:"Display Query testQAQTGRAPDashboard",$description:"Test testQAQTGRAPDashboard SUPERV",$vignettes:{testQAQTGRAP_Request:{$uuid:"testQAQTGRAP_Request",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$items:[{$layoutType:"tile",$items:[{$bind:"testQAQTGRAP_Request",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"chart",$arrayOptions:{showPagination:!0,rowIndex:!0},$chartOptions:{isLegendHidden:!0}}]}}],$size:"all"}]}]}}},exports.gadgets={testQAQTGRAP_Request:{$type:"$request",$title:"Request QAQTGRAP",requestName:"QAQTGRA2",requestLevel:"99",action:"$query",endpoint:"",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSTATISTICDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testSTATISTICDashboard:{$dashboardName:"testSTATISTICDashboard",$title:"Display Query testSTATISTICDashboard",$description:"testSTATISTICDashboard SUPERV",$vignettes:{$testSTAT_Request:{$uuid:"$testSTAT_Request",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$items:[{$layoutType:"tile",$items:[{$bind:"$testSTAT_Request",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"chart",$arrayOptions:{showPagination:!0,rowIndex:!0},$chartOptions:{isLegendHidden:!0}}]}}],$size:"all"}]}]}}},exports.gadgets={$testSTAT_Request:{entity:"ZAQT",$type:"$stats",$title:"Stat ZAQT",statName:"ZAQT",action:"$query",representation:"STATS~ZAQT.$cube",facet:"$cube",endpoint:"",$uuid:"$testSTAT_Request"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGridDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testGridDashboard:{$dashboardName:"testGridDashboard",$title:"Arrays - Test dashboard",$description:"Arrays - Test dashboard",$vignettes:{testAQMDEVICEQueryGrid:{$uuid:"testAQMDEVICEQueryGrid",$displayStyle:"$full"},testAQMDEVICEDetailGrid:{$uuid:"testAQMDEVICEDetailGrid",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"AQMCRUDM.$Query - Table Mode",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"testAQMDEVICEQueryGrid",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$title:"QUERY - $display=table",$display:"table",$table:[{$bind:"CODE"},{$bind:"CODECHR"},{$bind:"TEXTDES0"},{$bind:"CUR_REF"}]}]}}]}]},{$layoutType:"hubGroup",$title:"AQMCRUDM.$Query - Vertical Cards - Multiple",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"testAQMDEVICEQueryGrid",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$cardsPerRow:1,$emptycell:"filled",$article:{$items:[{$bind:"CODE"},{$bind:"CODECHR"},{$bind:"TEXTDES0"},{$bind:"CUR_REF"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"AQMCRUDM.$Query - Vertical Cards - Single",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"testAQMDEVICEQueryGrid",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$cardsPerRow:3,$emptycell:"filled",$article:{$items:[{$bind:"CODE"},{$bind:"CODECHR"},{$bind:"TEXTDES0"},{$bind:"CUR_REF"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"$Details facet",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"testAQMDEVICEDetailGrid"}]}]}]}}},exports.gadgets={testAQMDEVICEQueryGrid:{$type:"$representation",$title:"Query AQMCRUDM",entity:"AQMDEVICE",action:"$query",representation:"AQMCRUDM",facet:"$query"},testAQMDEVICEDetailGrid:{$type:"$representation",$title:"Detail AQMCRUDM",entity:"AQMDEVICE",action:"$details",representation:"AQMCRUDM",facet:"$details",keyParameter:"1"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQTCRUDMDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testDefaultAQTCRUDM:{$dashboardName:"testDefaultAQTCRUDM",$title:"AQTCRUDM default endpoint",$description:"AQTCRUDM Representation",$vignettes:{testDefaultAQTCRUDM_AQTCRUDM_QUERY:{$uuid:"testDefaultAQTCRUDM_AQTCRUDM_QUERY",$displayStyle:"$full"},testDefaultAQTCRUDM_AQTCRUDM_DETAIL:{$uuid:"testDefaultAQTCRUDM_AQTCRUDM_DETAIL",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQTCRUDM_AQTCRUDM_QUERY"}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQTCRUDM_AQTCRUDM_DETAIL"}]}]}]}}},exports.gadgets={testDefaultAQTCRUDM_AQTCRUDM_QUERY:{$type:"$representation",$title:"Query facet",entity:"AQTCRUDM",action:"$query",representation:"AQTCRUDM",facet:"$query"},testDefaultAQTCRUDM_AQTCRUDM_DETAIL:{$type:"$representation",$title:"Details facet",entity:"AQTCRUDM",action:"$details",representation:"AQTCRUDM",facet:"$details",keyParameter:"10"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMCRUDMDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testDefaultAQMCRUDM:{$dashboardName:"testDefaultAQMCRUDM",$title:"AQMCRUDM default endpoint",$description:"AQMCRUDM Representation",$vignettes:{testDefaultAQMCRUDM_AQMCRUDM_QUERY:{$uuid:"testDefaultAQMCRUDM_AQMCRUDM_QUERY",$displayStyle:"$full"},testDefaultAQMCRUDM_AQMCRUDM_DETAIL:{$uuid:"testDefaultAQMCRUDM_AQMCRUDM_DETAIL",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQMCRUDM_AQMCRUDM_QUERY",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"table",$table:[{$bind:"CODE"},{$bind:"CPY_REF"},{$bind:"CUR_REF"},{$bind:"I_do_not_exist"}]}]}}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQMCRUDM_AQMCRUDM_DETAIL"}]}]}]}},MobileDashboardOverview:{$dashboardName:"MobileDashboardOverview",$title:"MobileDashboardOverview",$description:"",$vignettes:{testDefaultAQMCRUDM_AQMCRUDM_QUERY:{$uuid:"testDefaultAQMCRUDM_AQMCRUDM_QUERY",$displayStyle:"$full"}}}},exports.gadgets={testDefaultAQMCRUDM_AQMCRUDM_QUERY:{$type:"$representation",$title:"Query facet",entity:"AQMCRUDM",action:"$query",representation:"AQMCRUDM",facet:"$query"},testDefaultAQMCRUDM_AQMCRUDM_DETAIL:{$type:"$representation",$title:"Details facet",entity:"AQMCRUDM",action:"$details",representation:"AQMCRUDM",facet:"$details",keyParameter:"10"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMTABLEMDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testDefaultAQMFIELDSM:{$dashboardName:"testDefaultAQMFIELDSM",$title:"AQMFIELDSM SUPERV endpoint",$description:"AQMFIELDSM Representation",$vignettes:{testDefaultAQMFIELDSM_AQMFIELDSM_QUERY:{$uuid:"testDefaultAQMFIELDSM_AQMFIELDSM_QUERY",$displayStyle:"$full"},testDefaultAQMFIELDSM_AQMFIELDSM_DETAIL:{$uuid:"testDefaultAQMFIELDSM_AQMFIELDSM_DETAIL",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQMFIELDSM_AQMFIELDSM_QUERY"}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQMFIELDSM_AQMFIELDSM_DETAIL"}]}]}]}}},exports.gadgets={testDefaultAQMFIELDSM_AQMFIELDSM_QUERY:{$type:"$representation",$title:"Query facet",entity:"AQMDEVICE",action:"$query",representation:"AQMFIELDSM",facet:"$query"},testDefaultAQMFIELDSM_AQMFIELDSM_DETAIL:{$type:"$representation",$title:"Details facet",entity:"AQMDEVICE",action:"$details",representation:"AQMFIELDSM",facet:"$details",keyParameter:"10"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMSEARCHMDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testDefaultAQMSEARCHM:{$dashboardName:"testDefaultAQMSEARCHM",$title:"AQMSEARCHM SUPERV",$description:"AQMSEARCHM Representation",$vignettes:{testDefaultAQMSEARCHM_AQMSEARCHM_QUERY:{$uuid:"testDefaultAQMSEARCHM_AQMSEARCHM_QUERY",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$items:[{$bind:"testDefaultAQMSEARCHM_AQMSEARCHM_QUERY"}]}]}]}}},exports.gadgets={testDefaultAQMSEARCHM_AQMSEARCHM_QUERY:{$type:"$representation",$title:"Query facet",entity:"AQMSEARCH",action:"$query",representation:"AQMSEARCHM",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/unitTests/entities/entityCtrlField",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),_entityName="controlField",_details={decimalEmpty:null,decimalFilled:123456.789,integerEmpty:null,integerFilled:123456789,realEmpty:null,realFilled:123456.789,quantityEmpty:null,quantityFilled:123,quantityUnit:{$description:"EURO euro",$precision:11,$scale:2,$symbol:"",$title:"Euro"},quantityUnitVal:"EUR",dateEmpty:"",dateFilled:"2015-01-23",timeEmpty:"",timeFilled:"11:12:13",datetimeEmpty:"",datetimeFilled:"2015-01-23T11:12:13Z",choiceEmpty:"",choiceFilled:"MYCHOICE",booleanFilled:!0,booleanEmpty:null,referenceEmptyVal:"",referenceFilledVal:"MYREF",referenceFilled:{$description:"My description",$title:"My title"},stringEmpty:"",stringFilled:"MY STRING",textRtfEmpty:"",textRtfFilled:"",textHtmlEmpty:"",textHtmlFilled:"<b>MY HTML</b>",textPlainEmpty:"",textPlainFilled:"MY TEXT",imageEmpty:"",imageFilled:{}},_fields=["decimal","integer","real","quantity","date","time","datetime","choice","boolean","reference","string","textPlain","textRtf","textHtml","image"],_unitTestCallBack=function(structElmt){},_buildDetailsLayout=function(){var _addUnitTestInfo=function(article,message){article.$unitTest={message:message}},rows=[];return _fields.forEach(function(field){var row={$layoutType:"row",$items:[]};rows.push(row);var cells=row.$items;["filled","empty"].forEach(function(type){var cell={$layoutType:"cell",$sameSize:!0,$widthAll:4,$items:[{$bind:field+type.smCapitalize()}]};type==="filled"?_addUnitTestInfo(cell.$items[0],"Title and value should be displayed"):(_addUnitTestInfo(cell.$items[0],field==="image"?"Only title and empty image icon should be displayed":"Only title should be displayed"),cells.push(cell),cell=$.extend(!0,{},cell),cell.$items[0].$hideIfEmpty=!0,_addUnitTestInfo(cell.$items[0],"No title and value should be displayed")),cells.push(cell)})}),{$layoutType:"stack",$items:rows}},_entity={$entityName:_entityName,$properties:{decimalEmpty:{$title:"decimalEmpty",$type:"application/x-decimal"},decimalFilled:{$title:"decimalFilled",$type:"application/x-decimal"},integerEmpty:{$title:"integerEmpty",$type:"application/x-integer"},integerFilled:{$title:"integerFilled",$type:"application/x-integer"},realEmpty:{$title:"realEmpty",$type:"application/x-real"},realFilled:{$title:"realFilled",$type:"application/x-real"},quantityEmpty:{$title:"quantityEmpty",$type:"application/x-quantity"},quantityFilled:{$title:"quantityFilled",$type:"application/x-quantity",$unit:"quantityUnit",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$precision:9,$scale:2,$format:"0.00"}},quantityUnit:{$title:"quantityUnit",$type:"application/x-reference",$item:{$value:"{quantityUnitVal}"}},dateEmpty:{$title:"dateEmpty",$type:"application/x-date"},dateFilled:{$title:"dateFilled",$type:"application/x-date"},timeEmpty:{$title:"timeEmpty",$type:"application/x-time"},timeFilled:{$title:"timeFilled",$type:"application/x-time"},datetimeEmpty:{$title:"datetimeEmpty",$type:"application/x-datetime"},datetimeFilled:{$title:"datetimeFilled",$type:"application/x-datetime"},choiceEmpty:{$title:"choiceEmpty",$type:"application/x-choice"},choiceFilled:{$title:"choiceFilled",$type:"application/x-choice"},booleanFilled:{$title:"booleanFilled",$type:"application/x-boolean"},booleanEmpty:{$title:"booleanEmpty",$type:"application/x-boolean"},referenceEmpty:{$title:"referenceEmpty",$type:"application/x-reference",$item:{$value:"{VALUE}",$key:"{VALUE}",$properties:{VALUE:{$type:"application/x-string"}},VALUE:"{referenceEmptyVal}"}},referenceFilled:{$title:"referenceFilled",$type:"application/x-reference",$item:{$value:"{referenceFilledVal}"}},stringEmpty:{$title:"stringEmpty",$type:"application/x-string"},stringFilled:{$title:"stringFilled",$type:"application/x-string"},textRtfEmpty:{$title:"textRtfEmpty",$type:"text/rtf",$url:clientContract.getLocalEntityUrl(_entityName,"/textRtfEmpty")},textRtfFilled:{$title:"textRtfFilled",$type:"text/rtf",$acceptedTypes:["text/rtf"],$url:clientContract.getLocalEntityUrl(_entityName,"/textRtfFilled")},textHtmlEmpty:{$title:"textHtmlEmpty",$type:"text/html",$url:clientContract.getLocalEntityUrl(_entityName,"/textHtmlEmpty")},textHtmlFilled:{$title:"textHtmlFilled",$type:"text/html",$url:clientContract.getLocalEntityUrl(_entityName,"/textHtmlFilled")},textPlainEmpty:{$title:"textPlainEmpty",$type:"text/plain",$url:clientContract.getLocalEntityUrl(_entityName,"/textPlainEmpty")},textPlainFilled:{$title:"textPlainFilled",$type:"text/plain",$acceptedTypes:["text/plain"],$url:clientContract.getLocalEntityUrl(_entityName,"/textPlainFilled")},imageEmpty:{$title:"imageEmpty",$type:"image",$url:clientContract.getLocalEntityUrl(_entityName,"/imageEmpty")},imageFilled:{$title:"imageFilled",$type:"image",$url:clientContract.getLocalEntityUrl(_entityName,"/imageFilled")}},$relations:{},$articles:{$details:_buildDetailsLayout()},$services:{$read:function(op,data){var deferred=$.Deferred(),result=op.$representation&&op.$representation.endsWith("$details")?_details:null;return deferred.resolve($.extend({},result)),deferred.promise()}},$urlCall:function(sdataUrl,path){if(!path||path.length==0)return"";switch(path[0]){case"textRtfEmpty":return null;case"textRtfFilled":return{responseText:"{\\rtf1\\ansi{\\fonttbl{\\f0 MS Sans Serif;}}\\uc0\\pard MY RTF CONTENT\\par}"};case"textHtmlEmpty":return null;case"textHtmlFilled":return{responseText:'<span style="color:red"><b>MY HTML CONTENT</b></span>'};case"textPlainEmpty":return null;case"textPlainFilled":return{responseText:"MY TEXT PLAIN CONTENT"};case"imageEmpty":return null;case"imageFilled":return"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAAzAHEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD7Looqrqd5b6dp91qF3II7a2heaZiPuooyx/IUCbSV2Wsj1oyK+V9e+NHj7xRrR0/whbvZxO5EEFrbCe4kUd2JB57/ACgY9+8Vxqfx90qP7bN/wkQjQZJa3WYAepUKePwrT2TPBfENFt+zhKSXVLQ+rcj1or5hs/jd8RG8JXlz/YlvcG3kWKTVBbNshJ7Oo+Xd+QHAwcisq1vfjv4ij/tC0l8RtE4LK0a+RGw65UYUH2xR7N9QfEFF2VKEpN9kfWeR60ZHrXyZp/xW+JvgrV0sfEYuLpUwXtNSh2uy9Mq+N3Y4b5h7GrHjb45+LNe1EWnhZZNJtGKpGiRrJcyk9icHBz0C4PuaPZMX+seFUG5JqS6W1PqvI9aMj1FfKdr4x+NvhhF1jU7bWJrBfmlXULImPb/tHAKfXIrIi+NPjkeIUv5NWlewF2JmsdsYUxb8+Vu25xt+XPWn7JilxJh4WU4ST81+O59h5FGRXyna+PfjJ48vph4cNwsMZyY7GBEjiz0BkbnP1b8Kvjx/8Xvh/ewN4wsp7uwd9pW5RCreoWaPPze2T9D1pezZa4gov3uSXJ/NbQ+nciisTwb4j03xX4dttc0ty1vOM7WwGjYdVYA8EGtsdKzPbhONSKlF3TCiiigsKyfFmlrrvhnVNGaQR/bbWW3Dn+AspAb8Cc/hWtXPePfE9p4Q8NXWuXlvcXMcOAIoEJLMemT0UepPT3OAWt9DKu4KnJ1Phtr6HydpM3jT4R+LXvX0r7Pcqj27faYS8EyEg8MMZGQDlW9vau9tf2kdWX/j58M2EowOY7l05/EGuh8H/tCaJfI0HirT5dOkLHEsCGWErngEfeBxx0OcE8ZxWh4j+JfwYu9Pna5js9XYr/qRpT73OP7zoADwOcjHFbPV6o+Qw8YUoN4XFqMd7O36/wCRnW/7QPhN9CuJLnw7dRXrvlrJQjxyk9WLkD05JXPTg84x5P2lLouRH4RhC5woa/JP4/JXgxe3N6X8hlt/Mz5av8wXP3QcHnHfFfVvhXxp8FxpMMVk+jafGqD9xcWex145BJX5j6nJ+tOUYx6EYLMcXjG4uvGFvJa/f/XkeE/F34iv8QpdNmk0aPTnsVkXKTeYZA+08nAxgqcdeprq/wBkmwguPG+o30sSO1rY/uiRyjO4GR6HaCM+h96yP2hvEnhLxBrenx+E47cw2sbieeG28pZGYgccAnAXr78VlfBLxxD4G8WvfX0MsthdQGC4EWNyjIIcA4BIIxj0J9qpr3NDghWjTzRTrTUkmry6beXY+ypESSNo3VXUjDKwyCPevhHxxZW+m+Ndd060XZbWuo3EMK5zhFkZVH5AV9Q3nx1+HkGnm4h1G7uZdpP2eO0kD59MsAv618o63fNqes32pPGI2u7iScoDkKWYtj8M1NJNbnocS4rD1401Tkm1fbU9f+HHxr0vwf4QstCi8LSSvACZZUulXzXLEliNvuB16AelT+PPjjpnivwnf6DN4UlT7VEVjke7DeXIOVbG3sRV34P+PPhpH4Xs9H8U6Vp1nqFopQ3E+niVJxkkHcFJDeueOOD2Gx4u+J/wm0m226L4c0zXLo4+SPT0ijHP8TOnp6A/hSsr7FU61R4RJ4qKja1rK+21txv7H13K/h7XrJmJhhuo5VHoXQg/oi17wOlcl8MtV8N694bXWfDWmR2FvO+2WMWohO9eoOBhsZxkZH4giutHQVlN3Z9LllFUcLCClzK24UUUVJ3hUckayIyOisrAqVIyCD1BqSigDzfxJ8FfAOtzvcf2ZLpsz53NYSeWD9EIKj8AKxrb9njwPFOskl5rtwB1SS4jAb2O2MH8jXsNFVzy7nBPK8HOXM6av6HES/CrwFJoI0Y+G7VbdTuDqW84N6+Znd+ZxXHT/s6eDnn3RaprkUR6p5sZ/IlP8fxr2iihTkuo6mWYSpbmprTyPIdV+AXgy6tLS2tZtQsTBu3yo6tJOTjlywPTbwAABk8c1hX3gj4LQTWfgy/1tYdXtkfN2k6xyElydsj48veN2ACN2FA9K93kUOGRlypBByOteGeOP2ebC+vJb3wxqZ08yMWa0uVLxg/7Lj5gPYhqqMr7s87HZdGlHmw1CMn1T7abdPn+ZbX4V/CbwlbtrOs6jJd28A3qt9eIytjnAVFXefRec14x4EtovFXxrsnt7FFtbrV2vDbBBsWFXMpUjptCjGPw712Vl+zj4re4C3utaLFDnl4mlkbH0KL/ADr2f4XfDPQ/AUEj2bSXmozLsmvJlAYr12qB91c84yScDJOBV8yit7nmwy6ti6sL0VShF3fd/qY2ufAfwFqdwZ4YL/SyxJK2VwAh+gdWA+gwKNC+A/gLTLgTzQX+plSCq3twCoI9kVQfxzXqY6UVlzy7n0X9l4Pm5/Zq/oQWtvDa20dvbQRwwxqFSONAqqB2AHAFTjpRRUnclbYKKKKBhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf/9k=";default:return null}}};exports.entity=_entity}),define("syracuse-tablet/html/js/sdata/entities/test/unitTests/unitTestCtrlField",["require","exports","module"],function(require,exports,module){exports.init=function(nameModule,dashboards,gadgets){gadgets[nameModule]={$type:"$representation",$title:"Control Field",entity:"controlField",action:"$details",representation:"controlField",facet:"$details",$article:{}}}}),define("syracuse-tablet/html/js/sdata/entities/test/unitTestsDashboard",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/sdata/entities/test/unitTests/entities/entityCtrlField","syracuse-tablet/html/js/sdata/entities/test/unitTests/unitTestCtrlField"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),entities=[require("syracuse-tablet/html/js/sdata/entities/test/unitTests/entities/entityCtrlField")],modules={unitTestCtrlField:require("syracuse-tablet/html/js/sdata/entities/test/unitTests/unitTestCtrlField")},_initModules=function(){var vignettes=exports.dashboards.unitTestsDashboard.$vignettes,tiles=exports.dashboards.unitTestsDashboard.$article.$items[0].$items;for(var name in modules)vignettes[name]={$uuid:name,$displayStyle:"$link"},tiles.push({$layoutType:"tile",$bgColor:"lightgreen",$items:[{$bind:name}],$size:"medium"}),modules[name].init(name,exports.dashboards,exports.gadgets),entities.forEach(function(entity){entity.entity&&(entity.entity.$isUnitTest=!0,clientContract.registerEntity(entity.entity))})};exports.dashboards={unitTestsDashboard:{$dashboardName:"unitTestsDashboard",$title:"Unit Tests Dashboard",$description:"",$vignettes:{},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Unit Tests Group 1",$items:[]}]}}},exports.gadgets={},_initModules()}),define("syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard",["require","exports","module"],function(require,exports,module){exports.dashboards={testGaugeChartDashboard:{$dashboardName:"testGaugeChartDashboard",$title:"Gauge chart test dashboard",$description:"Test different gauge charts authoring",$vignettes:{testGauge:{$uuid:"testGauge",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesOp",$gauge:{}}]}}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesOp",$gauge:{segments:[{propStart:0,propEnd:.75},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1}]}}]}}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesValue",$gauge:{$bindMin:"salesValueMin",$bindMax:"salesValueMax",segments:[{propStart:0,propEnd:.75},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1}]}}]}}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesValue",$gauge:{$bindMin:"salesValueMin",$bindMax:"salesValueMax",segments:[{valStart:1e5,valEnd:13e4,color:"#DF5353"},{valStart:13e4,valEnd:14e4},{valStart:14e4,valEnd:15e4,color:"#55BF3B"}]}}]}}]}]}]}}},exports.gadgets={testGauge:{$type:"$representation",$title:"Gauge 1",entity:"testGaugeChart",action:"$details",representation:"testGaugeChart",facet:"$details"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testApplication",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/sdata/entities/test/example","syracuse-tablet/html/js/sdata/entities/test/exampleHubLayout","syracuse-tablet/html/js/sdata/entities/test/testDatatypes","syracuse-tablet/html/js/sdata/entities/test/testFormats","syracuse-tablet/html/js/sdata/entities/test/testFormatsReference","syracuse-tablet/html/js/sdata/entities/test/testCharts","syracuse-tablet/html/js/sdata/entities/test/testConstraints","syracuse-tablet/html/js/sdata/entities/test/testNavigateTo","syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild","syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow","syracuse-tablet/html/js/sdata/entities/test/testGaugeChart","syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard","syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard","syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard","syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard","syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard","syracuse-tablet/html/js/sdata/entities/test/testChartsHubDashboard","syracuse-tablet/html/js/sdata/entities/test/testChartsStackDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2","syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2","syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard","syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard","syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard","syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard","syracuse-tablet/html/js/sdata/entities/test/testQAQTGRAPDashboard","syracuse-tablet/html/js/sdata/entities/test/testSTATISTICDashboard","syracuse-tablet/html/js/sdata/entities/test/testGridDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQTCRUDMDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMCRUDMDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMTABLEMDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMSEARCHMDashboard","syracuse-tablet/html/js/sdata/entities/test/unitTestsDashboard","syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard"],function(require,exports,module){function _addToApp(app){app.gadgets&&Object.keys(app.gadgets).forEach(function(key){_testApplication.$gadgets[key]&&console.log("Duplicate gadget name: "+key),_testApplication.$gadgets[key]=app.gadgets[key]}),app.dashboards&&Object.keys(app.dashboards).forEach(function(key){_testApplication.$dashboards[key]&&console.log("Duplicate dashboard name: "+key),_testApplication.$dashboards[key]=app.dashboards[key]})}var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),_example=require("syracuse-tablet/html/js/sdata/entities/test/example"),_exampleHubLayout=require("syracuse-tablet/html/js/sdata/entities/test/exampleHubLayout"),_testDatatypes=require("syracuse-tablet/html/js/sdata/entities/test/testDatatypes"),_testFormats=require("syracuse-tablet/html/js/sdata/entities/test/testFormats"),_testFormatsReference=require("syracuse-tablet/html/js/sdata/entities/test/testFormatsReference"),_testCharts=require("syracuse-tablet/html/js/sdata/entities/test/testCharts"),_testConstraints=require("syracuse-tablet/html/js/sdata/entities/test/testConstraints"),_testNavigateTo=require("syracuse-tablet/html/js/sdata/entities/test/testNavigateTo"),_testNavigateToChild=require("syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild"),_testPropertyHideShow=require("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow"),_testGaugeChart=require("syracuse-tablet/html/js/sdata/entities/test/testGaugeChart"),_testHomeDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard"),_testLayoutsDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard"),_testTypesDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard"),_testFormatsDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard"),_testGX3APPDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard"),_testSUPERVDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard"),_testChartsHubDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testChartsHubDashboard"),_testChartsStackDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testChartsStackDashboard"),_testSUPERVDashboard2=require("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2"),_testGX3APPDashboard2=require("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2"),_testConstraintsDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard"),_testNavigateToDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard"),_testPropertyHideShowDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard"),_testAQTACTNPDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard"),_testQAQTGRAPDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testQAQTGRAPDashboard"),_testSTATISTICDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testSTATISTICDashboard"),_testGridDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testGridDashboard"),_testDefaultAQTCRUDM=require("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQTCRUDMDashboard"),_testDefaultAQMCRUDM=require("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMCRUDMDashboard"),_testDefaultAQMFIELDSM=require("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMTABLEMDashboard"),_testDefaultAQMSEARCHM=require("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMSEARCHMDashboard"),_unitTestsDashboard=require("syracuse-tablet/html/js/sdata/entities/test/unitTestsDashboard"),_testGaugeChartDashboard=require("syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard"),_testApplication={$application:{$uuid:"clientTestApplication",applicationName:"clientTestApplication",title:"Client test application",description:"Application for testing client features without server dependencies",iconName:"th",$homeDashboard:{$uuid:"testHomeDashboard",dashboardName:"testHomeDashboard"}},$dashboards:{},$gadgets:{},$pages:{"x3.erp.SUPERV.AQMCRUDM.$details":{$page:{$article:{$layoutType:"stack",$items:[{$bind:"CODE"},{$bind:"PBLOB"},{$bind:"CODECHR"},{$bind:"WCUR_REF"},{$bind:"FLGTEST"},{$bind:"WMENU"},{$bind:"SIMUL1"},{$bind:"PCLOB"},{$bind:"TEXTAXX"},{$bind:"TEXTE"},{$bind:"TPOSIF"},{$bind:"CUR_REF"},{$bind:"SITE_REF"},{$bind:"TDCB2"},{$bind:"TDCB3",$gauge:{}},{$bind:"TDCB"},{$bind:"TDATE"},{$bind:"UNIT_REF"},{$bind:"CRY_REF"},{$bind:"TEL"},{$bind:"EMAIL"},{$bind:"TEXTPLAIN"},{$bind:"TEXTHTML"},{$bind:"TEXTRTF"},{$bind:"CREUSR_REF"},{$bind:"UPDUSR_REF"},{$bind:"ADEVCOLREF1"},{$bind:"ADEVCOLREF2"},{$bind:"ADEVCTINT"},{$bind:"ADEVADEVICEL"}]}}}}};exports.register=function(){clientContract.registerEntity(_example.entity),clientContract.registerEntity(_exampleHubLayout.entity),clientContract.registerEntity(_testDatatypes.entity),clientContract.registerEntity(_testFormats.entity),clientContract.registerEntity(_testFormatsReference.entity),clientContract.registerEntity(_testCharts.entity),clientContract.registerEntity(_testConstraints.entity),clientContract.registerEntity(_testNavigateTo.entity),clientContract.registerEntity(_testNavigateToChild.entity),clientContract.registerEntity(_testPropertyHideShow.entity),clientContract.registerEntity(_testGaugeChart.entity),_addToApp(_testHomeDashboard),_addToApp(_testLayoutsDashboard),_addToApp(_testTypesDashboard),_addToApp(_testFormatsDashboard),_addToApp(_testGX3APPDashboard),_addToApp(_testSUPERVDashboard),_addToApp(_testChartsHubDashboard),_addToApp(_testChartsStackDashboard),_addToApp(_testSUPERVDashboard2),_addToApp(_testGX3APPDashboard2),_addToApp(_testConstraintsDashboard),_addToApp(_testNavigateToDashboard),_addToApp(_testPropertyHideShowDashboard),_addToApp(_testAQTACTNPDashboard),_addToApp(_testQAQTGRAPDashboard),_addToApp(_testSTATISTICDashboard),_addToApp(_testGaugeChartDashboard),_addToApp(_testGridDashboard),_addToApp(_testDefaultAQTCRUDM),_addToApp(_testDefaultAQMCRUDM),_addToApp(_testDefaultAQMFIELDSM),_addToApp(_testDefaultAQMSEARCHM),_addToApp(_unitTestsDashboard),clientContract.registerApp(_testApplication)}}),define("syracuse-tablet/html/js/demos/salesMyCustomers/dashCustomers",["require","exports","module"],function(require,exports,module){var _customerArticle={$layoutType:"stack",$localization:{"en-US":{"8124be4e-b79c-478e-93c0-14ffb0ed2fb7":"More","a9560852-5799-4a6f-8ab5-d74996f0ef2a":"Contact","4917745c-ce70-4c3a-b381-06491e1fe87a":"Address","d257c14a-c94f-40c1-98cd-313e81b7864b":"Management","948d336a-45c7-467e-be87-f1de6d6b4702":"Credit level","ae370435-b808-4b6d-b0de-c782f4292437":"In progress","849efb71-386e-4ac2-b37c-0e35f81499c8":"Credit level by company"}},$comment:"",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$bgColor:"transparent",$widthXs:"12",$widthSm:"8",$widthMd:"8",$widthLg:"6",$items:[{$bind:"BPCBPRC_BPRNAM",$display:"table",$arrayOptions:{showPagination:!0,showSortFilter:!0,showSearch:!0,rowIndex:!1},$labelPosition:"top",$isTitleHidden:!0}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"6",$bgColor:"darkgrey",$items:[{$bind:"BPCNUM",$labelPosition:"top",$labelAlign:"left"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"6",$bgColor:"darkgrey",$items:[{$bind:"BPCSHO",$labelPosition:"top",$labelAlign:"left",$isTitleHidden:!1}]}]}]},{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"BPRLOG",$labelPosition:"top",$labelAlign:"left"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"BPCSTA",$labelPosition:"top",$labelAlign:"left",$isTitleHidden:!1}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"LEGETT",$labelPosition:"top",$labelAlign:"left"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"CRY_REF",$labelPosition:"top",$labelAlign:"left"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"LAN_REF",$labelPosition:"top",$labelAlign:"left",$refDescPosition:"right"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"BCGCOD",$labelPosition:"top",$labelAlign:"left"}]}]}]},{$layoutType:"stack",$collapsible:"collapsed",$title:"{@8124be4e-b79c-478e-93c0-14ffb0ed2fb7}",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"FCY_REF",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"BPCPYR_REF",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"EECNUM",$labelPosition:"top"}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"BETFCY",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"CUR_REF",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"NAF",$labelPosition:"top"}]}]}]},{$layoutType:"stack",$collapsible:"collapsed",$title:"{@a9560852-5799-4a6f-8ab5-d74996f0ef2a}",$items:[{$bind:"BPCBPRBPA",$display:"card",$arrayOptions:{showPagination:!0,showSortFilter:!0,showSearch:!0,rowIndex:!1},$isTitleHidden:!0,$tableHeaderShow:!0,$minWidth:6,$card:{$layoutType:"stack",$localization:{},$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$widthSm:"12",$widthMd:"12",$widthLg:"12",$bgColor:"sagegreen",$items:[{$bind:"BPABPAADDLIG1",$labelPosition:"top",$isTitleHidden:!0}]},{$layoutType:"cell",$bgColor:"sagegreen",$items:[{$bind:"BPABPAADDLIG2",$labelPosition:"top",$isTitleHidden:!0}]},{$layoutType:"cell",$bgColor:"sagegreen",$items:[{$bind:"BPABPAADDLIG3",$labelPosition:"top",$isTitleHidden:!0}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"BPAPOSCOD",$labelPosition:"top",$isTitleHidden:!0}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"BPACTY",$labelPosition:"top",$isTitleHidden:!0}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"12",$widthMd:"12",$widthLg:"12",$bgColor:"transparent",$items:[{$bind:"BPACRYNAM",$isTitleHidden:!0}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"BPABPAADD",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"BPABPADES",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"BPADEFFLG",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"ADRVAL",$labelPosition:"top"}]}]}]},{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$bgColor:"transparent",$items:[{$bind:"FCYWEB",$labelPosition:"top"}]}]}]},{$bind:"BPCBPRBPACOLTEL",$display:"card",$arrayOptions:{showPagination:!0,showSortFilter:!0,showSearch:!0,rowIndex:!1},$minWidth:6},{$bind:"BPCBPRBPACOLWEB",$display:"card",$arrayOptions:{showPagination:!0,showSortFilter:!0,showSearch:!0,rowIndex:!1},$minWidth:6}]},$statusEnabled:"mono"}]},{$layoutType:"stack",$collapsible:"collapsed",$title:"{@4917745c-ce70-4c3a-b381-06491e1fe87a}",$items:[{$bind:"BPCBPRCNT",$display:"card",$arrayOptions:{showPagination:!0,showSortFilter:!0,showSearch:!0,rowIndex:!1},$isTitleHidden:!0,$minWidth:6,$card:{$layoutType:"stack",$localization:{},$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"2",$widthSm:"2",$widthMd:"2",$widthLg:"2",$bgColor:"transparent",$items:[{$bind:"CNTCNTTTL",$isTitleHidden:!0}]},{$layoutType:"cell",$widthXs:"4",$widthSm:"4",$widthMd:"4",$widthLg:"4",$bgColor:"transparent",$items:[{$bind:"CNTCNTFNA",$labelPosition:"top",$isTitleHidden:!0}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"CNTCNTLNA",$labelPosition:"top",$isTitleHidden:!0}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"CNTCNTFNC",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"CNTCNTSRV",$labelPosition:"top"}]}]}]},{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$bgColor:"transparent",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"CNTFAX",$labelPosition:"top"}]},{$layoutType:"cell",$bgColor:"transparent",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"CNTTEL",$labelPosition:"top"}]},{$layoutType:"cell",$bgColor:"transparent",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"CNTMOB",$labelPosition:"top"}]},{$layoutType:"cell",$bgColor:"transparent",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$items:[{$bind:"CNTWEB",$labelPosition:"top"}]}]}]},{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"CNTCNTBIR",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"CNTCNTMSS_REF",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"CNTTCDEFFLG",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"CNTCNTFBDMAG",$labelPosition:"top"}]}]}]}]}}]},{$layoutType:"stack",$collapsible:"collapsed",$title:"{@d257c14a-c94f-40c1-98cd-313e81b7864b}",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"BPCSNCDAT",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"PTE_REF",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"DEP",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"green",$items:[{$bind:"VACBPR_REF",$labelPosition:"top"}]}]},{$layoutType:"stack",$collapsible:"collapsed",$title:"{@8124be4e-b79c-478e-93c0-14ffb0ed2fb7}",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"FREINV",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"IME",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"INVPER",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"BPCINV",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"BPCRSK",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"4",$widthMd:"4",$widthLg:"3",$bgColor:"lightgreen",$items:[{$bind:"BPCGRU",$labelPosition:"top"}]}]}]},{$layoutType:"stack",$title:"{@948d336a-45c7-467e-be87-f1de6d6b4702}",$collapsible:"collapsed",$items:[{$layoutType:"stack",$title:"{@ae370435-b808-4b6d-b0de-c782f4292437}",$collapsible:"collapsed",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"ROSTCTL",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"ROSTCTLLEV",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"ROSTAUZ",$labelPosition:"top"}]},{$layoutType:"cell",$widthXs:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"ROST",$labelPosition:"top"}]}]}]},{$layoutType:"stack",$collapsible:"collapsed",$title:"{@849efb71-386e-4ac2-b37c-0e35f81499c8}",$items:[{$bind:"OSTCLTCPY",$display:"card",$arrayOptions:{showPagination:!0,showSortFilter:!0,showSearch:!0,rowIndex:!1},$isTitleHidden:!0,$minWidth:6,$card:{$layoutType:"stack",$localization:{},$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$bgColor:"transparent",$items:[{$bind:"ROSTCPY_REF",$labelPosition:"top"}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"12",$widthSm:"12",$widthMd:"12",$widthLg:"12",$bgColor:"transparent",$items:[{$bind:"ROSTCPYAUZ",$labelPosition:"top",$labelAlign:"left",$items:[{$bind:"ROSTCPYCUR_REF"}]}]}]}]}]}}]}]}]}]};exports.dashboards={$customersDashboard:{$dashboardName:"$customersDashboard",$title:"Customer Dashboard",$description:"",$vignettes:{$x3CustomersList:{$uuid:"$x3CustomersList",$displayStyle:"$full"},$x3CustomersListIco:{$uuid:"$x3CustomersList",$displayStyle:"$link"},$tasksList:{$uuid:"$tasksList",$displayStyle:"$full"},$localCustomerTotals:{$uuid:"$localCustomerTotals",$displayStyle:"$full"},$localOverviewSales_rev_perc:{$uuid:"$localOverviewSales_rev_perc",$displayStyle:"$full"},$localOverviewSalesLeads:{$uuid:"$localOverviewSalesLeads",$displayStyle:"$full"},$localStatVEN42:{$uuid:"$localStatVEN42",$displayStyle:"$full"},$localStatVEN420:{$uuid:"$localStatVEN420",$displayStyle:"$full"},CRM074:{$uuid:"CRM074",$displayStyle:"$full"},CRM075:{$uuid:"CRM075",$displayStyle:"$full"},VEN076:{$uuid:"VEN076",$displayStyle:"$full"},VEN007:{$uuid:"VEN007",$displayStyle:"$full"},VEN073:{$uuid:"VEN073",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Dashboard",$items:[{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3CustomersListIco"}]},{$layoutType:"tile",$size:"medium",$bgColor:"skyblue",$title:"Quote values",$items:[{$bind:"$localCustomerTotals",$article:{$layoutType:"stack",$items:[{$bind:"quotesValue",$gauge:{$bindMin:"min",$bindMax:"quotesMax",segments:[{propStart:0,propEnd:.75,color:"#DF5353"},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1,color:"#55BF3B"}]}}]}}]},{$layoutType:"tile",$title:"Sales leads",$size:"large",$bgColor:"lightgreen",$items:[{$bind:"$localOverviewSalesLeads",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!1,$style:"line",$display:"table",$article:{$items:[{$bind:"date"},{$bind:"numLeads"},{$bind:"numDeals"}]}}]}}]},{$layoutType:"tile",$title:"Test Stats VEN42",$size:"full",$bgColor:"lightgreen",$items:[{$bind:"$localStatVEN42"}]},{$layoutType:"tile",$title:"Test Stats VEN42",$size:"full",$bgColor:"lightgreen",$items:[{$bind:"$localStatVEN420"}]},{$layoutType:"tile",$size:"large",$bgColor:"skyblue",$title:"Monthly revenues",$items:[{$bind:"$localOverviewSales_rev_perc",$article:{$layoutType:"stack",$items:[{$bind:"revMonthly",$gauge:{$bindMin:"revMonthlyMin",$bindMax:"revMonthlyMax",segments:[{propStart:0,propEnd:.75,color:"#DF5353"},{propStart:.75,propEnd:.85,color:"#FF5800"},{propStart:.85,propEnd:1,color:"#55BF3B"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"Requests",$items:[{$layoutType:"tile",$title:"CRM074",$size:"full",$bgColor:"lightgreen",$items:[{$bind:"CRM074",$article:{$layoutType:"stack",$items:[{$layoutType:"row"},{$bind:"$criteria",$isTitleHidden:!0},{$bind:"headerMessage",$isTitleHidden:!0},{$bind:"levelMessage",$isTitleHidden:!0},{$bind:"$resources",$isTitleHidden:!1,$seriesOptions:{COUNT:{isHidden:!1}},$style:"pie",$chartOptions:{isLegendHidden:!0},$isXLabelsHidden:!1,$isYLabelsHidden:!1,$isXLabelHidden:!1,$isYLabelHidden:!1,$isLegendHidden:!0,$isGridLineHidden:!1,$openDetail:!0,$isLabelsHidden:!1}]}}]},{$layoutType:"tile",$size:"large",$bgColor:"skyblue",$title:"CRM075",$items:[{$bind:"CRM075"}]},{$layoutType:"tile",$size:"large",$bgColor:"skyblue",$title:"VEN076",$items:[{$bind:"VEN076",$article:{$layoutType:"stack",$items:[{$bind:"$criteria",$isTitleHidden:!0},{$bind:"headerMessage",$isTitleHidden:!0},{$bind:"levelMessage",$isTitleHidden:!0},{$bind:"$resources",$isTitleHidden:!1,$style:"bar",$chartOptions:{isXLabelHidden:!1,isLegendHidden:!0},$isXLabelsHidden:!1,$isYLabelsHidden:!1,$isXLabelHidden:!1,$isYLabelHidden:!1,$isLegendHidden:!0,$isGridLineHidden:!1,$openDetail:!0,$isLabelsHidden:!1}]}}]},{$layoutType:"tile",$size:"large",$bgColor:"skyblue",$title:"VEN007",$items:[{$bind:"VEN007",$article:{$layoutType:"stack",$items:[{$bind:"$criteria",$isTitleHidden:!0},{$bind:"headerMessage",$isTitleHidden:!0},{$bind:"levelMessage",$isTitleHidden:!0},{$bind:"$resources",$isTitleHidden:!0,$display:"table",$arrayOptions:{showPagination:!0,showSortFilter:!0,rowIndex:!0,showSearch:!0},$tableHeaderShow:!0,$table:[{$bind:"BPCNAM",$title:"Company Name",$type:"application/x-string",$titleOrig:"Company Name",$widthType:"percent",$widthVal:65,$imgHeight:"small"},{$bind:"BCGCOD",$title:"Category",$type:"application/x-string",$titleOrig:"Category",$widthType:"percent",$widthVal:35,$imgHeight:"small"}]}]}}]},{$layoutType:"tile",$size:"large",$bgColor:"skyblue",$title:"VEN073",$items:[{$bind:"VEN073"}]}]},{$layoutType:"hubGroup",$title:"Customer List",$items:[{$layoutType:"tile",$title:"Customers list",$size:"all",$items:[{$bind:"$x3CustomersList",$article:{$pageActionSettings:[{name:"BPCLOCK",icon:{css:"fa fa-lock",name:"lock"},$title:"Bloquer",options:{footerHeader:!0,refreshPage:!1,multiselection:!0}},{name:"BPCUNLOCK",icon:{css:"fa fa-unlock-alt",name:"unlock-alt"},$title:"Dbloquer",options:{footerHeader:!0,refreshPage:!1,multiselection:!0}}],$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$detailsLink:"$details",$detailLinkArticle:_customerArticle,$card:{$layoutType:"stack",$items:[{$bind:"BPCNUM"},{$bind:"BPCNAM"},{$bind:"TEXTDES0"},{$bind:"RPOSCOD"},{$bind:"BPCSTA"},{$bind:"BPCTYP"}]}}]}}]},{$layoutType:"tile",$title:"Some tasks",$size:"all",$items:[{$bind:"$tasksList"}]}]}]}},STD_X3_CUSTOMER_DETAILS_DASHBOARD:{$dashboardName:"STD_X3_CUSTOMER_DETAILS_DASHBOARD",$title:"STD_X3_CUSTOMER_DETAILS_DASHBOARD",$description:"",$vignettes:{$x3CustomersList:{$uuid:"$x3CustomersList",$displayStyle:"$full"}}}},exports.gadgets={$x3CustomersList:{$type:"$representation",$title:"Customers list",entity:"BPCUSTOMER",endpoint:"x3.erp.GX3APP",action:"$query",representation:"BPCUSTOMERM",facet:"$query",icon:"s-m-sales-customers-list"},$tasksList:{$type:"$representation",$title:"Query facet",entity:"$localTodo",action:"$query",representation:"$localTodo",facet:"$query"},$localCustomerTotals:{$type:"$representation",$title:"Totals",entity:"$localCustomer",action:"$details",representation:"$localCustomer",facet:"$details",keyParameter:"10"},$localOverviewSalesLeads:{$type:"$representation",$title:"Leads vs Deals",entity:"$localOverviewSalesLeads",action:"$query",representation:"$localOverviewSalesLeads",facet:"$query"},$localOverviewSales_rev_perc:{$type:"$representation",$title:"Overview",entity:"$localOverviewSales",action:"$details",representation:"$localOverviewSales",facet:"$details",keyParameter:"10"},$localStatVEN42:{entity:"VEN42",$type:"$stats",$title:"Test stats VEN42",$description:"Sales by Region",icon:"",parameters:{portview:{title:"portview",value:"TESTLOCAL"},count:{title:"count",value:"10"}},statName:"VEN42",action:"$query",representation:"STATS~VEN42.$cube",facet:"$cube",$uuid:"$uuidVEN42"},$localStatVEN420:{entity:"VEN42",$type:"$stats",$title:"Test stats VEN42",$description:"Sales by Region",icon:"",parameters:{portview:{title:"portview",value:"TESTLOCAL"},count:{title:"count",value:"10"}},statName:"VEN42",action:"$query",representation:"STATS~VEN42.$cube",facet:"$cubechart",$uuid:"$uuidVEN42"},VEN073:{$type:"$request",$title:"My customers without any orders (3 months)",$description:"My customers without any orders (3 months)",parameters:{forcedExecution:{title:"forcedExecution",value:"true"},frequency:{title:"frequency",value:"1"},level:{title:"level",value:"1"},displayLineNum:{title:"displayLineNum",value:"false"}},requestName:"VEN073",requestLevel:"99",action:"$query",representation:"QUERY~VEN073~99",facet:"$query",endpoint:"x3.erp.GX3APP",$uuid:"VEN073"},VEN007:{$type:"$request",$title:"Inactive Customers",$description:"Inactive Customers",parameters:{forcedExecution:{title:"forcedExecution",value:"true"},frequency:{title:"frequency",value:"1"},level:{title:"level",value:"1"},displayLineNum:{title:"displayLineNum",value:"false"}},requestName:"VEN007",requestLevel:"99",action:"$query",representation:"QUERY~VEN007~99",facet:"$query",endpoint:"x3.erp.GX3APP",$uuid:"VEN007"},VEN076:{$type:"$request",$title:"Annual ranking of customers margin",$description:"Annual ranking of customers margin",parameters:{forcedExecution:{title:"forcedExecution",value:"true"},frequency:{title:"frequency",value:"1"},displayLineNum:{title:"displayLineNum",value:"false"},level:{title:"level",value:"2"}},requestName:"VEN076",requestLevel:"99",action:"$query",representation:"QUERY~VEN076~99",facet:"$query",endpoint:"x3.erp.GX3APP",$uuid:"VEN076"},CRM075:{$type:"$request",$title:"Annual ranking of customers appointments",$description:"Annual ranking of customers appointments",parameters:{forcedExecution:{title:"forcedExecution",value:"true"},frequency:{title:"frequency",value:"1"},level:{title:"level",value:"2"},displayLineNum:{title:"displayLineNum",value:"false"}},requestName:"CRM075",requestLevel:"99",action:"$query",representation:"QUERY~CRM075~99",facet:"$query",endpoint:"x3.erp.GX3APP",$uuid:"CRM075"},CRM074:{$type:"$request",$title:"Annual ranking of customers calls",$description:"Annual ranking of customers calls",parameters:{forcedExecution:{title:"forcedExecution",value:"true"},frequency:{title:"frequency",value:"1"},level:{title:"level",value:"2"},displayLineNum:{title:"displayLineNum",value:"false"}},requestName:"CRM074",requestLevel:"99",action:"$query",representation:"QUERY~CRM074~99",facet:"$query",endpoint:"x3.erp.GX3APP",$uuid:"CRM074"}}}),define("syracuse-tablet/html/js/demos/utils",["require","exports","module"],function(require,exports,module){exports.addToApp=function(app,toAdd){toAdd.gadgets&&Object.keys(toAdd.gadgets).forEach(function(key){app.$gadgets[key]&&console.log("Duplicate gadget name: "+key),app.$gadgets[key]=toAdd.gadgets[key]}),toAdd.dashboards&&Object.keys(toAdd.dashboards).forEach(function(key){app.$dashboards[key]&&console.log("Duplicate dashboard name: "+key),app.$dashboards[key]=toAdd.dashboards[key]})}}),define("syracuse-tablet/html/js/demos/_entities/entTodos",["require","exports","module"],function(require,exports,module){var _todos=[{$uuid:"1",date:"2015-02-01 09:00:00",who:"Mr. Miller",desc:"Call",phone:"+771 896520 4183"},{$uuid:"2",date:"2015-02-09 10:00:00",who:"Mr. Miller",desc:"Meeting"},{$uuid:"3",date:"2015-03-04 09:00:00",who:"Mr. Heinz",desc:"Milestone definition"},{$uuid:"4",date:"2015-03-05 15:00:00",who:"Mr. Schmidt",desc:"Project review",phone:"+771 896520 4183"},{$uuid:"5",date:"2015-03-08 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"6",date:"2015-03-09 15:40:00",who:"Mr. Miller",desc:"Call"},{$uuid:"7",date:"2015-03-10 15:50:00",who:"Mr. Miller",desc:"Call"},{$uuid:"8",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"9",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"10",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"11",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"12",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"13",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"}];exports.entity={$entityName:"$localTodo",$value:"{desc}",$properties:{who:{$type:"application/x-string",$title:"Who"},desc:{$type:"application/x-string",$title:"Description"},phone:{$type:"application/x-string",$title:"Phone",$format:"$phone"},date:{$type:"application/x-datetime",$title:"Date"}},$articles:{},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_todos[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_todos}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/demos/_entities/entOverviewSales",["require","exports","module"],function(require,exports,module){var _data={$uuid:"1",revMonthlyMin:1e5,revMonthly:18e4,revMonthlyMax:2e5,revMonthlyPerc:92};exports.entity={$entityName:"$localOverviewSales",$value:"{revMonthly}",$properties:{revMonthlyMin:{$type:"application/x-decimal",$title:"Min"},revMonthlyMax:{$type:"application/x-decimal",$title:"Target"},revMonthly:{$type:"application/x-decimal",$title:"Revenue"},revMonthlyPerc:{$type:"application/x-decimal",$title:"Monthly Target"}},$articles:{},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:[_data]}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/demos/_entities/entOverviewSalesLeads",["require","exports","module"],function(require,exports,module){var _data=[{$uuid:"1",date:"2014-12-05",numLeads:50,numDeals:40},{$uuid:"1",date:"2014-12-12",numLeads:53,numDeals:45},{$uuid:"1",date:"2014-12-15",numLeads:54,numDeals:47},{$uuid:"1",date:"2014-12-22",numLeads:53,numDeals:49},{$uuid:"1",date:"2014-12-29",numLeads:52,numDeals:52}];exports.entity={$entityName:"$localOverviewSalesLeads",$value:"{date}",$properties:{date:{$type:"application/x-date",$title:"Date"},numLeads:{$type:"application/x-decimal",$title:"Leads"},numDeals:{$type:"application/x-decimal",$title:"Deals"}},$articles:{},$prototype:function(proto){var res=proto.$properties&&proto.$properties.$resources;res&&(res.$axes=[{$title:"Date",$hierarchies:[["date"]]},{$title:"Number",$hierarchies:[["$measures"]]}],res.$cube={$style:"column",$title:"Leads vs Deals",$hierarchies:{date:{$properties:["date"]}},$measures:{numLeads:{},numDeals:{}}})},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_data[0]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_data}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/demos/_entities/entCustomers",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(require,exports,module){var utils=require("syracuse-tablet/html/js/helpers/utils"),_names=["Acme, inc.","Widget Corp","123 Warehousing","Demo Company","Smith and Co.","Foo Bars","ABC Telecom","Fake Brothers","QWERTY Logistics","Demo, inc.","Sample Company","Sample, inc","Acme Corp","Allied Biscuit","Ankh-Sto Associates","Extensive Enterprise","Galaxy Corp","Globo-Chem","Mr. Sparkle","Globex Corporation","LexCorp","LuthorCorp","North Central Positronics","Omni Consimer Products","Praxis Corporation","Sombra Corporation","Sto Plains Holdings","Tessier-Ashpool","Wayne Enterprises","Wentworth Industries","ZiffCorp","Bluth Company","Strickland Propane","Thatherton Fuels","Three Waters","Water and Power","Western Gas & Electric","Mammoth Pictures","Mooby Corp","Gringotts","Thrift Bank","Flowers By Irene","The Legitimate Businessmens Club","Osato Chemicals","Transworld Consortium","Universal Export","United Fried Chicken","Virtucon","Kumatsu Motors","Keedsler Motors","Powell Motors","Industrial Automation","Sirius Cybernetics Corporation","U.S. Robotics and Mechanical Men","Colonial Movers","Corellian Engineering Corporation","Incom Corporation","General Products","Leeding Engines Ltd.","Blammo","Input, Inc.","Mainway Toys","Videlectrix","Zevo Toys","Ajax","Axis Chemical Co.","Barrytron","Carrys Candles","Cogswell Cogs","Spacely Sprockets","General Forge and Foundry","Duff Brewing Company","Dunder Mifflin","General Services Corporation","Monarch Playing Card Co.","Krustyco","Initech","Roboto Industries","Primatech","Sonky Rubber Goods","St. Anky Beer","Stay Puft Corporation","Vandelay Industries","Wernham Hogg","Gadgetron","Burleigh and Stronginthearm","BLAND Corporation","Nordyne Defense Dynamics","Petrox Oil Company","Roxxon","McMahon and Tate","Sixty Second Avenue","Charles Townsend Agency","Spade and Archer","Megadodo Publications","Rouster and Sideways","C.H. Lavatory and Sons","Globo Gym American Corp","The New Firm"],_customers=[];for(var c=1e4;c<10100;c++)_customers.push({$uuid:""+(c-1e4),bpcnum:""+c,name:_names[c-1e4],ordersValue:1e6+(c-1e4)*2e5%5e5,ordersMax:18e5,quotesValue:5e5+(c-1e4)*2e3%5e4,quotesMax:12e5,invoicesValue:1e4+(c-1e4)*2e3%5e4,invoicesMax:12e4,min:1e3,addr1:"Rue Fructidor",addr2:"75834 Paris Cedex 17"});exports.entity={$entityName:"$localCustomer",$value:"{name}",$properties:{bpcnum:{$type:"application/x-string",$title:"Customer"},name:{$type:"application/x-string",$title:"Name"},addr1:{$type:"application/x-string",$title:"Street"},addr2:{$type:"application/x-string",$title:"Address"},ordersValue:{$type:"application/x-decimal",$title:"Orders value"},min:{$type:"application/x-decimal",$title:"General min value"},quotesValue:{$type:"application/x-decimal",$title:"Quotes value"},invoicesValue:{$type:"application/x-decimal",$title:"Invoices value"},ordersMax:{$type:"application/x-decimal",$title:"Max"},quotesMax:{$type:"application/x-decimal",$title:"Max"},invoicesMax:{$type:"application/x-decimal",$title:"Max"}},$prototype:function(proto){var res=utils.getPropByPath(proto,"$properties.$resources.$item.$links")||{};res.DASHBOARD={$title:"Detail dashboard",$url:"{$baseUrl}/$mobileDashboards?dashboard=$localCustomerDashboard&parameters=bpcnum%3D%7Bbpcnum%7D"}},$articles:{$query:{$layoutType:"stack",$items:[{$bind:"$resources",$detailsLink:"DASHBOARD",$display:"card",$cardsPerLine:4,$article:{$items:[{$bind:"bpcnum"},{$bind:"name"},{$bind:"addr1"},{$bind:"addr2"}]}}]}},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_customers[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_customers}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/demos/_entities/entCustomerRevenues",["require","exports","module"],function(require,exports,module){var _months=["January","February","March","April","May","June","July","August","September","October","November","December"],_revs=[],_uuid=0;for(var c=1e4;c<10100;c++)for(var m=0;m<12;m++)_revs.push({$uuid:""+_uuid,bpcnum:""+c,month:_months[m],revenue:2e4+m*(12+c%12)%40*2e4}),_uuid++;exports.entity={$entityName:"$localCustomerRevenue",$value:"{name}",$properties:{bpcnum:{$type:"application/x-string",$title:"ID"},month:{$type:"application/x-string",$title:"Month"},revenue:{$type:"application/x-decimal",$title:"Revenue"}},$prototype:function(proto){var res=proto.$properties&&proto.$properties.$resources;res&&(res.$axes=[{$title:"Month",$hierarchies:[["month"]]},{$hierarchies:[["$measures"]]}],res.$cube={$title:"Revenue",$hierarchies:{month:{$properties:["month"]}},$measures:{revenue:{}}})},$articles:{},$services:{$new:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$read:function(op,data){var deferred=$.Deferred();return deferred.resolve(_revs[op.$key]),deferred.promise()},$query:function(op,data){var deferred=$.Deferred();return deferred.resolve({$resources:_revs}),deferred.promise()},$save:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()},$delete:function(op,data){var deferred=$.Deferred();return deferred.resolve(),deferred.promise()}}}}),define("syracuse-tablet/html/js/demos/_entities/entStatsVEN42",["require","exports","module"],function(require,exports,module){var _proto={$baseUrl:"/mobile1/x3/erp/SEEDTEST",$url:"{$baseUrl}/STATS('VEN42')?representation=STATS~VEN42.$cube&role={$role}",$title:"Sales by Region",$type:"application/json; vnd.sage=syracuse.presentation=x3.erp.superv/STATS('VEN42')",$methods:"GET",codeStat:"VEN42",$properties:{datstart1:{$type:"application/x-date",$title:"Period start 1",$isAdvanced:!0,$links:{$details:{$url:"{$baseUrl}/STATS('VEN42')?representation=STATS~VEN42.$cube&{linkstartP}",$type:"application/json;vnd.sage=syracuse"}},$isExcluded:!0},datstart2:{$type:"application/x-date",$title:"Period start 2",$isAdvanced:!0,$links:{$details:{$url:"{$baseUrl}/STATS('VEN42')?representation=STATS~VEN42.$cube&{linkstartP}",$type:"application/json;vnd.sage=syracuse"}},$isExcluded:!0},linkstartP:{$type:"application/x-string",$isExcluded:!0},datend1:{$type:"application/x-date",$title:"Period end 1",$isAdvanced:!0,$links:{$details:{$url:"{$baseUrl}/STATS('VEN42')?representation=STATS~VEN42.$cube&{linkendP}",$type:"application/json;vnd.sage=syracuse"}},$isExcluded:!0},datend2:{$type:"application/x-date",$title:"Period end 2",$isAdvanced:!0,$links:{$details:{$url:"{$baseUrl}/STATS('VEN42')?representation=STATS~VEN42.$cube&{linkendP}",$type:"application/json;vnd.sage=syracuse"}},$isExcluded:!0},linkendP:{$type:"application/x-string",$isExcluded:!0},def_company:{$type:"application/x-string",$title:"Company",$isAdvanced:!0,$links:{$details:{$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/COMPANY('{def_company}')?representation=COMPANY.$details&role={$role}"}},$isExcluded:!0},$resources:{$type:"application/x-array",$provType:"PORTALSTA",$criteria:{COMPANY:{$type:"application/x-string",$maxlength:5,$title:"Company",$links:{$details:{$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/COMPANY('{COMPANY}')?representation=COMPANY.$details&role={$role}",$target:"main"}}},DATBEG1:{$type:"application/x-date",$title:""},DATEND1:{$type:"application/x-date",$title:""},DATBEG2:{$type:"application/x-date",$title:""},DATEND2:{$type:"application/x-date",$title:""}},$item:{$type:"application/json",$url:"{$baseUrl}/stats('VEN42')?representation=$cube('VEN42')&role={$role}",$title:"Sales by Region",$properties:{linkDown:{$type:"application/x-string",$isExcluded:!0},dateStat:{$type:"application/x-date",$capabilities:"sort,filter",$isExcluded:!0},CRY:{$title:"Pays",$capabilities:"sort,filter",$type:"application/x-string",$links:{$details:{$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/TABCOUNTRY('{CRY}')?representation=TABCOUNTRY.$details&role={$role}",$target:"main"}}},C_CRY:{$capabilities:"sort,filter",$type:"application/x-string"},POSCOD:{$title:"Code postal",$capabilities:"sort,filter",$type:"application/x-string",$constraints:{$maxLength:3},$isHidden:!1,$isParameter:!0},C_POSCOD:{$capabilities:"sort,filter",$type:"application/x-string"},CTY:{$title:"Ville",$capabilities:"sort,filter",$type:"application/x-string",$constraints:{$maxLength:3},$isHidden:!1,$isParameter:!0},C_CTY:{$capabilities:"sort,filter",$type:"application/x-string"},BPCNUM:{$title:"Client",$capabilities:"sort,filter",$type:"application/x-string",$links:{$details:{$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/BPARTNER('{BPCNUM}')?representation=BPARTNER.$details&role={$role}",$target:"main"}}},C_BPCNUM:{$capabilities:"sort,filter",$type:"application/x-string"},amount1:{$type:"application/x-decimal",$precision:15,$scale:2,$format:"#,###.00",$title:"Actual Year N"},amount2:{$type:"application/x-decimal",$precision:15,$scale:2,$format:"#,###.00",$title:"Actual Year N-1"},amount3:{$type:"application/x-decimal",$precision:15,$scale:2,$format:"#,###.00",$title:"Actual variance N and N-1"},amount4:{$type:"application/x-decimal",$precision:15,$scale:2,$format:"#,###.00",$title:"Margin Year N"},amount5:{$type:"application/x-decimal",$precision:15,$scale:2,$format:"#,###.00",$title:"Rsult"},amount6:{$type:"application/x-decimal",$precision:15,$scale:2,$format:"#,###.00",$title:"Actual Tax Incl. Year N"},amount7:{$type:"application/x-decimal",$precision:15,$scale:2,$format:"#,###.00",$title:"Quantity"},linkUp:{$type:"application/x-string",$isExcluded:!0}},$links:{levelDown:{$url:"{$baseUrl}/STATS('VEN42')?representation=STATS~VEN42.$cube&{linkDown}",$title:"Lower Level",$method:"GET"},levelUp:{$url:"{$baseUrl}/STATS('VEN42')?representation=STATS~VEN42.$cube&{linkUp}",$title:"Higher Level",$method:"GET"}}},$cube:{$mode:"table",$title:"Inv. / Zone",$displaysOneMeasure:!0,$hierarchies:{CRY:{$title:"Pays",$properties:["CRY"]},POSCOD:{$title:"Code postal",$properties:["POSCOD"]},CTY:{$title:"Ville",$properties:["CTY"]},BPCNUM:{$title:"Client",$properties:["BPCNUM"]},date:{properties:["dateStat"],periods:"YSQMD"}},$measures:{amount1:{$isDefault:!0},amount2:{},amount3:{},amount4:{},amount5:{},amount6:{},amount7:{}}},$axes:[{$title:"Pays",$hierarchies:[["CRY",1,0],["POSCOD",0,0],["CTY",0,0],["BPCNUM",0,0]]},{$title:"Measures",$hierarchies:[["$measures"]]}],$slicer:{$title:"CRY",$hierarchies:[["CRY",1,0]]},$isExcluded:!1}}},_countries=[{name:"Afghanistan",code:"AF"},{name:"land Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People'S Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People'S Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],_resources=[];_countries.forEach(function(ctry,idx){_resources.push({level:1,CRY:ctry.code,$uuid:"uuid"+ctry.code,$title:ctry.name,linkUp:"DATBEG1=2015-01-01&DATEND1=2015-12-31&DATBEG2=2014-01-01&DATEND2=2014-12-31&COMPANY=&CRY="+ctry.code,linkDown:"DATBEG1=2015-01-01&DATEND1=2015-12-31&DATBEG2=2014-01-01&DATEND2=2014-12-31&COMPANY=",amount1:1e3+idx*10,amount2:2e3+idx*10,amount3:3e3+idx*10,amount4:4e3+idx*10,amount5:5e3+idx*10,amount6:6e3+idx*10,amount7:7e3+idx*10})});var _data={$properties:{$resources:{$item:{$properties:{CRY:{$isHidden:!1},POSCOD:{$isHidden:!0},CTY:{$isHidden:!0},BPCNUM:{$isHidden:!0}},$links:{levelUp:{$isHidden:!1,$method:"GET"},levelDown:{$isHidden:!0,$method:"GET"}}}}},linkstartP:"DATBEG1=2014-01-01&DATEND1=2014-12-31&DATBEG2=2013-01-01&DATEND2=2013-12-31&COMPANY=",linkendP:"DATBEG1=2016-01-01&DATEND1=2016-12-31&DATBEG2=2015-01-01&DATEND2=2015-12-31&COMPANY=",datstart1:"2015-01-01",datend1:"2015-12-31",datstart2:"2014-01-01",datend2:"2014-12-31",def_company:"",$resources:_resources},_chartDetail={$layoutType:"stack",$display:"bothSideToSide",$localization:{},$items:[{$layoutType:"row",$items:[{$layoutType:"cell",widthAll:"6",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"$resources",$isTitleHidden:!0,$display:"chart",$isHidden:!1,$style:"line",$arrayOptions:{showPagination:!1,showSortFilter:!1,showSearch:!1,rowIndex:!1},$arrayBgColor:"darkgrey"}]},{$layoutType:"cell",$widthXs:"12",$widthSm:"6",$widthMd:"6",$widthLg:"6",$bgColor:"transparent",$items:[{$bind:"$resources",$isTitleHidden:!0,$display:"table",$isHidden:!1,$arrayOptions:{showPagination:!0,showSortFilter:!1,showSearch:!1,rowIndex:!0,showRowDetailLink:!1},$arrayBgColor:"darkgrey",$table:[{$bind:"CRY",$title:"Pays",$type:"application/x-string",$titleOrig:"Pays",$widthType:"auto",$widthVal:0,$imgHeight:"small"},{$bind:"amount1",$title:"Actual Year N",$type:"application/x-decimal",$titleOrig:"Actual Year N",$widthType:"auto",$widthVal:0,$imgHeight:"small"},{$bind:"amount2",$title:"Actual Year N-1",$type:"application/x-decimal",$titleOrig:"Actual Year N-1",$widthType:"auto",$widthVal:0,$imgHeight:"small"},{$bind:"amount3",$title:"Actual variance N and N-1",$type:"application/x-decimal",$titleOrig:"Actual variance N and N-1",$widthType:"auto",$widthVal:0,$imgHeight:"small"},{$bind:"amount4",$title:"Margin Year N",$type:"application/x-decimal",$titleOrig:"Margin Year N",$widthType:"auto",$widthVal:0,$imgHeight:"small"}]}]}]}]};exports.entity={$entityName:"VEN42",$value:"{date}",$proto:_proto,$createProto:function(prototype){return $.extend(!0,{},exports.entity.$proto)},$properties:{},$articles:{$cube:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"table",$arrayOptions:{showPagination:!0,rowIndex:!0},$table:[{$bind:"CRY"},{$bind:"amount1"},{$bind:"amount2"},{$bind:"amount3"}],$chartDetail:_chartDetail}]},$cubechart:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"chart",$arrayOptions:{showPagination:!0,rowIndex:!0},$chartOptions:{isLegendHidden:!0},$table:[{$bind:"CRY"},{$bind:"amount1"},{$bind:"amount2"},{$bind:"amount3"}],$chartDetail:_chartDetail}]}},$services:{$query:function(op,data){return $.smResolve($.extend(!0,{},_data))}}}}),define("syracuse-tablet/html/js/demos/_entities/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/_entities/entTodos","syracuse-tablet/html/js/demos/_entities/entOverviewSales","syracuse-tablet/html/js/demos/_entities/entOverviewSalesLeads","syracuse-tablet/html/js/demos/_entities/entCustomers","syracuse-tablet/html/js/demos/_entities/entCustomerRevenues","syracuse-tablet/html/js/demos/_entities/entStatsVEN42"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),entTodos=require("syracuse-tablet/html/js/demos/_entities/entTodos"),entOverviewSales=require("syracuse-tablet/html/js/demos/_entities/entOverviewSales"),entOverviewSalesLeads=require("syracuse-tablet/html/js/demos/_entities/entOverviewSalesLeads"),entCustomers=require("syracuse-tablet/html/js/demos/_entities/entCustomers"),entCustomerRevenues=require("syracuse-tablet/html/js/demos/_entities/entCustomerRevenues"),entStatsVEN42=require("syracuse-tablet/html/js/demos/_entities/entStatsVEN42");exports.registerAll=function(){clientContract.registerEntity(entTodos.entity),clientContract.registerEntity(entOverviewSales.entity),clientContract.registerEntity(entOverviewSalesLeads.entity),clientContract.registerEntity(entCustomers.entity),clientContract.registerEntity(entCustomerRevenues.entity),clientContract.registerEntity(entStatsVEN42.entity)}}),define("syracuse-tablet/html/js/demos/salesMyCustomers/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/salesMyCustomers/dashCustomers","syracuse-tablet/html/js/demos/utils","syracuse-tablet/html/js/demos/_entities/main"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),dashCustomers=require("syracuse-tablet/html/js/demos/salesMyCustomers/dashCustomers"),demoUtils=require("syracuse-tablet/html/js/demos/utils"),entities=require("syracuse-tablet/html/js/demos/_entities/main"),_demoApp={$application:{$uuid:"$demoCustomers",applicationName:"sagesalescustomers",title:"Sales - My Customers",description:"",isSageApplication:!0,iconName:"s-m-sales-customers",$homeDashboard:{$uuid:"$customersDashboard",dashboardName:"$customersDashboard"}},$dashboards:{},$gadgets:{}};exports.register=function(){entities.registerAll(),demoUtils.addToApp(_demoApp,dashCustomers),clientContract.registerApp(_demoApp)}}),define("syracuse-tablet/html/js/demos/salesMyInquiries/dashSalesInquiries",["require","exports","module"],function(require,exports,module){exports.dashboards={$salesMyInquiriesDashboard:{$dashboardName:"$salesMyInquiriesDashboard",$title:"Sales - My Inquiries Dashboard",$description:"",$vignettes:{$x3PriceInquiries:{$uuid:"$x3PriceInquiries",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Price Inquiry",$items:[{$layoutType:"tile",$title:"Sales Price Inquiry",$size:"medium",$items:[{$bind:"$x3PriceInquiries"}]}]}]}}},exports.gadgets={$x3PriceInquiries:{$type:"$representation",$title:"Price Inquiry",entity:"SPRICESEARCH",endpoint:"x3.erp.GX3APP",action:"$create",representation:"SPRICESEAM",facet:"$create",icon:"s-m-sales-priceinquiry"}}}),define("syracuse-tablet/html/js/demos/salesMyInquiries/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/salesMyInquiries/dashSalesInquiries","syracuse-tablet/html/js/demos/utils"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),dashSalesInquiries=require("syracuse-tablet/html/js/demos/salesMyInquiries/dashSalesInquiries"),demoUtils=require("syracuse-tablet/html/js/demos/utils"),_demoApp={$application:{$uuid:"$demoSalesMyInquiries",applicationName:"sagesalesinquiries",title:"Sales - My Inquiries",description:"",isSageApplication:!0,iconName:"s-m-sales-inquiries",$homeDashboard:{$uuid:"$salesMyInquiriesDashboard",dashboardName:"$salesMyInquiriesDashboard"}},$dashboards:{},$gadgets:{}};exports.register=function(){demoUtils.addToApp(_demoApp,dashSalesInquiries),clientContract.registerApp(_demoApp)}}),define("syracuse-tablet/html/js/demos/salesMyActions/dashSalesMyActions",["require","exports","module"],function(require,exports,module){exports.dashboards={$salesMyActionsDashboard:{$dashboardName:"$salesMyActionsDashboard",$title:"Sales - My Actions Dashboard",$description:"",$vignettes:{$x3Orders2Sign:{$uuid:"$x3Orders2Sign",$displayStyle:"$full"},$x3Quotes2Sign:{$uuid:"$x3Quotes2Sign",$displayStyle:"$full"},$x3Orders2SignIco:{$uuid:"$x3Orders2Sign",$displayStyle:"$link"},$x3Quotes2SignIco:{$uuid:"$x3Quotes2Sign",$displayStyle:"$link"},$x3OpenOrders2Sign:{$uuid:"$x3OpenOrders2Sign",$displayStyle:"$link"},$x3QuotesSigned:{$uuid:"$x3QuotesSigned",$displayStyle:"$link"},$x3OrdersSigned:{$uuid:"$x3OrdersSigned",$displayStyle:"$link"},$x3OpenOrdersSigned:{$uuid:"$x3OpenOrdersSigned",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Sales - my actions",$items:[{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3Quotes2SignIco"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3Orders2SignIco"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3OpenOrders2Sign"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3QuotesSigned"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3OrdersSigned"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3OpenOrdersSigned"}]}]},{$layoutType:"hubGroup",$title:"Orders to sign",$items:[{$layoutType:"tile",$title:"Orders to sign",$size:"full",$items:[{$bind:"$x3Orders2Sign"}]},{$layoutType:"tile",$title:"Quotes to sign",$size:"full",$items:[{$bind:"$x3Quotes2Sign",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$article:{$items:[{$bind:"DEST_REF"},{$bind:"RCLEDEC"},{$bind:"RVALCTX7"},{$bind:"RVALCTX2_REF"}]}}]}}]}]}]}}},exports.gadgets={$x3Orders2Sign:{$type:"$representation",$title:"Orders to sign",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"POHTOSIGM",facet:"$query",icon:"s-m-sales-orders2sign"},$x3Quotes2Sign:{$type:"$representation",$title:"Quotes to sign",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"SQHTOSIGM",facet:"$query",icon:"s-m-sales-quotes2sign"},$x3OpenOrders2Sign:{$type:"$representation",$title:"Open orders to sign",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"SOCTOSIGM",facet:"$query",icon:"s-m-sales-openorders2sign"},$x3QuotesSigned:{$type:"$representation",$title:"Quotes signed",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"SQHSIGM",facet:"$query",icon:"s-m-sales-quotessigned"},$x3OrdersSigned:{$type:"$representation",$title:"Quotes signed",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"SOHSIGM",facet:"$query",icon:"s-m-sales-orderssigned"},$x3OpenOrdersSigned:{$type:"$representation",$title:"Quotes signed",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"SOCSIGM",facet:"$query",icon:"s-m-sales-openorderssigned"}}}),define("syracuse-tablet/html/js/demos/salesMyActions/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/salesMyActions/dashSalesMyActions","syracuse-tablet/html/js/demos/utils"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),dashSalesMyActions=require("syracuse-tablet/html/js/demos/salesMyActions/dashSalesMyActions"),demoUtils=require("syracuse-tablet/html/js/demos/utils"),_demoApp={$application:{$uuid:"$demoSalesMyActions",applicationName:"sagsalesactions",title:"Sales - My Actions",description:"",isSageApplication:!0,iconName:"s-m-sales-actions",$homeDashboard:{$uuid:"$salesMyActionsDashboard",dashboardName:"$salesMyActionsDashboard"}},$dashboards:{},$gadgets:{}};exports.register=function(){demoUtils.addToApp(_demoApp,dashSalesMyActions),clientContract.registerApp(_demoApp)}}),define("syracuse-tablet/html/js/demos/purchaseMyActions/dashPurchaseMyActions",["require","exports","module"],function(require,exports,module){exports.dashboards={$purchaseMyActionsDashboard:{$dashboardName:"$purchaseMyActionsDashboard",$title:"Purchase My Actions Dashboard",$description:"",$vignettes:{$x3Orders2Sign:{$uuid:"$x3Orders2Sign",$displayStyle:"$full"},$x3Purchases2Sign:{$uuid:"$x3Purchases2Sign",$displayStyle:"$full"},$x3Orders2SignIco:{$uuid:"$x3Orders2Sign",$displayStyle:"$link"},$x3Purchases2SignIco:{$uuid:"$x3Purchases2Sign",$displayStyle:"$link"},$x3OpenOrders2Sign:{$uuid:"$x3OpenOrders2Sign",$displayStyle:"$link"},$x3PurchasesSigned:{$uuid:"$x3PurchasesSigned",$displayStyle:"$link"},$x3OrdersSigned:{$uuid:"$x3OrdersSigned",$displayStyle:"$link"},$x3OpenOrdersSigned:{$uuid:"$x3OpenOrdersSigned",$displayStyle:"$link"},$x3PurchasePriceInquiry:{$uuid:"$x3PurchasePriceInquiry",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Purchases - my actions",$items:[{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3Orders2SignIco"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3Purchases2SignIco"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3OpenOrders2Sign"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3PurchasesSigned"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3OrdersSigned"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3OpenOrdersSigned"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3PurchasePriceInquiry"}]}]},{$layoutType:"hubGroup",$title:"Purchase action",$items:[{$layoutType:"tile",$title:"Orders to sign",$size:"full",$items:[{$bind:"$x3Orders2Sign"}]},{$layoutType:"tile",$title:"Requests to sign",$size:"full",$items:[{$bind:"$x3Purchases2Sign"}]}]}]}}},exports.gadgets={$x3Orders2Sign:{$type:"$representation",$title:"Orders to sign",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"POHTOSIGM",facet:"$query",icon:"s-m-purchase-orders2sign"},$x3Purchases2Sign:{$type:"$representation",$title:"Purchases Requests to sign",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"PSHTOSIGM",facet:"$query",icon:"s-m-purchase-quotes2sign"},$x3OpenOrders2Sign:{$type:"$representation",$title:"Open Orders to sign",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"POCTOSIGM",facet:"$query",icon:"s-m-purchase-openorders2sign"},$x3PurchasesSigned:{$type:"$representation",$title:"Purchase Requests signed",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"PSHSIGM",facet:"$query",icon:"s-m-purchase-quotessigned"},$x3OrdersSigned:{$type:"$representation",$title:"Orders signed",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"POHSIGM",facet:"$query",icon:"s-m-purchase-orderssigned"},$x3OpenOrdersSigned:{$type:"$representation",$title:"Open Orders signed",entity:"TCAWRKHISSUI",endpoint:"x3.erp.GX3APP",action:"$query",representation:"POCSIGM",facet:"$query",icon:"s-m-purchase-openorderssigned"},$x3PurchasePriceInquiry:{$type:"$representation",$title:"Purchase price inquiry",entity:"PPRICESEARCH",endpoint:"x3.erp.GX3APP",action:"$query",representation:"PPRICSEARCHM",facet:"$query",icon:"s-m-purchase-priceinquiry"}}}),define("syracuse-tablet/html/js/demos/purchaseMyActions/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/purchaseMyActions/dashPurchaseMyActions","syracuse-tablet/html/js/demos/utils"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),dashPurchaseMyActions=require("syracuse-tablet/html/js/demos/purchaseMyActions/dashPurchaseMyActions"),demoUtils=require("syracuse-tablet/html/js/demos/utils"),_demoApp={$application:{$uuid:"$demoPurchaseMyActions",applicationName:"sagepurchaseactions",title:"Purchase My Actions",description:"",isSageApplication:!0,iconName:"s-m-purchase-actions",$homeDashboard:{$uuid:"$purchaseMyActionsDashboard",dashboardName:"$purchaseMyActionsDashboard"}},$dashboards:{},$gadgets:{}};exports.register=function(){demoUtils.addToApp(_demoApp,dashPurchaseMyActions),clientContract.registerApp(_demoApp)}}),define("syracuse-tablet/html/js/demos/purchaseMyInquiries/dashPurchaseMyInquiries",["require","exports","module"],function(require,exports,module){exports.dashboards={$purchaseMyInquiriesDashboard:{$dashboardName:"$purchaseMyInquiriesDashboard",$title:"Purchase My Inquiries Dashboard",$description:"",$vignettes:{$x3PriceInquiry:{$uuid:"$x3PriceInquiry",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Purchase My Inquiries",$items:[{$layoutType:"tile",$title:"Price Inquiriy",$size:"medium",$items:[{$bind:"$x3PriceInquiry"}]}]}]}}},exports.gadgets={$x3PriceInquiry:{$type:"$representation",$title:"Price inquiry",entity:"PPRICESEARCH",endpoint:"x3.erp.GX3APP",action:"$create",representation:"PPRICSEARCHM",facet:"$create",icon:"s-m-purchase-priceinquiry"}}}),define("syracuse-tablet/html/js/demos/purchaseMyInquiries/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/purchaseMyInquiries/dashPurchaseMyInquiries","syracuse-tablet/html/js/demos/utils"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),dashPurchaseMyInquiries=require("syracuse-tablet/html/js/demos/purchaseMyInquiries/dashPurchaseMyInquiries"),demoUtils=require("syracuse-tablet/html/js/demos/utils"),_demoApp={$application:{$uuid:"$demoPurchaseMyInquiries",applicationName:"sagepurchaseinquiries",title:"Purchase - My Inquiries",description:"",isSageApplication:!0,iconName:"s-m-purchase-inquiries",$homeDashboard:{$uuid:"$purchaseMyInquiriesDashboard",dashboardName:"$purchaseMyInquiriesDashboard"}},$dashboards:{},$gadgets:{}};exports.register=function(){demoUtils.addToApp(_demoApp,dashPurchaseMyInquiries),clientContract.registerApp(_demoApp)}}),define("syracuse-tablet/html/js/demos/myExpenses/dashExpenses",["require","exports","module"],function(require,exports,module){exports.dashboards={$expensesDashboard:{$dashboardName:"$expensesDashboard",$title:"Expenses Dashboard",$description:"",$vignettes:{$x3expensesList:{$uuid:"$x3expensesList",$displayStyle:"$full"},$x3expensesNotApproved:{$uuid:"$x3expensesNotApproved",$displayStyle:"$full"},$x3expensesCreate:{$uuid:"$x3expensesCreate",$displayStyle:"$link"},$x3expensesCreateVignette:{$uuid:"$x3expensesCreate",$displayStyle:"$full"},$x3expensesNotApprovedIco:{$uuid:"$x3expensesNotApproved",$displayStyle:"$link"},$x3expensesListIco:{$uuid:"$x3expensesList",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Expenses",$items:[{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3expensesCreate"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3expensesNotApprovedIco"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3expensesListIco"}]}]},{$layoutType:"hubGroup",$title:"Expenses Create",$items:[{$layoutType:"tile",$title:"Expenses Create",$size:"full",$items:[{$bind:"$x3expensesCreateVignette",$pageActionSettings:[{name:"$save",icon:{css:"fa fa-check",name:"check"},$title:"Enregistrer",options:{footerHeader:!0,refreshPage:!1,multiselection:!1}}],$article:{$layoutType:"stack",$items:[{$bind:"CLB_REF"},{$bind:"DATEXS"},{$bind:"FCY_REF"},{$bind:"CODEXP_REF"},{$bind:"NBREXS"},{$bind:"ACCNUM"},{$bind:"QTY"},{$bind:"AMTPAY"},{$bind:"CUR_REF"},{$bind:"AMTATI"},{$bind:"DES"},{$bind:"BEXS",$imgHeight:"medium"},{$bind:"EXSDIMCEN",$arrayOptions:{showPagination:!1,showSortFilter:!1,rowIndex:!1,showRowDetailLink:!1}}]}}]},{$layoutType:"tile",$title:"Expenses Create",$size:"full",$items:[{$bind:"$x3expensesCreateVignette",$pageActionSettings:[{name:"$save",icon:{css:"fa fa-check",name:"check"},$title:"Enregistrer",options:{footerHeader:!0,refreshPage:!1,multiselection:!1}}],$article:{$layoutType:"stack",$items:[{$bind:"CLB_REF"},{$bind:"DATEXS"},{$bind:"FCY_REF"},{$bind:"CODEXP_REF"},{$bind:"NBREXS"},{$bind:"ACCNUM"},{$bind:"QTY"},{$bind:"AMTPAY"},{$bind:"CUR_REF"},{$bind:"AMTATI"},{$bind:"DES"},{$bind:"BEXS",$imgHeight:"medium"},{$bind:"EXSDIMCEN",$arrayOptions:{showPagination:!1,showSortFilter:!1,rowIndex:!1,showRowDetailLink:!1}}]}}]}]},{$layoutType:"hubGroup",$title:"Expenses List",$items:[{$layoutType:"tile",$title:"Expenses list",$size:"full",$items:[{$bind:"$x3expensesList",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$article:{$items:[{$bind:"CLB_REF"},{$bind:"DATEXS"},{$bind:"CODEXP_REF"},{$bind:"AMTPAY"},{$bind:"CUR_REF"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"Expenses Not Approved",$items:[{$layoutType:"tile",$title:"Expenses Not Approved",$size:"all",$items:[{$bind:"$x3expensesNotApproved",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"table",$article:{$items:[{$bind:"CLB_REF"},{$bind:"DATEXS"},{$bind:"CODEXP_REF"},{$bind:"AMTPAY"},{$bind:"CUR_REF"}]}}]}}]}]}]}}},exports.gadgets={$x3expensesList:{$type:"$representation",$title:"All Expenses",entity:"EXPENSES",endpoint:"x3.erp.GX3APP",action:"$query",representation:"EXPENCNSM",facet:"$query",icon:"s-m-expenses-all"},$x3expensesNotApproved:{$type:"$representation",$title:"Expenses not approved",entity:"EXPENSES",endpoint:"x3.erp.GX3APP",action:"$query",representation:"EXPENENTM",facet:"$query",icon:"s-m-expenses-notapproved"},$x3expensesCreate:{$type:"$representation",$title:"Create expense",entity:"EXPENSES",endpoint:"x3.erp.GX3APP",action:"$create",representation:"EXPENENTM",facet:"$create",icon:"s-m-expenses-create"}}}),define("syracuse-tablet/html/js/demos/myExpenses/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/myExpenses/dashExpenses","syracuse-tablet/html/js/demos/utils"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),dashExpenses=require("syracuse-tablet/html/js/demos/myExpenses/dashExpenses"),demoUtils=require("syracuse-tablet/html/js/demos/utils"),_demoApp={$application:{$uuid:"$demoExpenses",applicationName:"sageexpenses",title:"My Expenses",isSageApplication:!0,description:"",iconName:"s-m-expenses",$homeDashboard:{$uuid:"$expensesDashboard",dashboardName:"$expensesDashboard"}},$dashboards:{},$gadgets:{}};exports.register=function(){demoUtils.addToApp(_demoApp,dashExpenses),clientContract.registerApp(_demoApp)}}),define("syracuse-tablet/html/js/demos/fixedAssets/dashFixedAssets",["require","exports","module"],function(require,exports,module){var _queryLinkArticlePA={$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$cardsPerRow:3,$card:{$items:[{$bind:"LCTCOD_REF"},{$bind:"PHYDES1"},{$bind:"PHYREF"},{$bind:"BAC"},{$bind:"PHOTO"}]}}]},_queryLinkArticleLOC={$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$queryLinkArticle:_queryLinkArticleLOC,$cardsPerRow:3,$card:{$layoutType:"stack",$items:[{$bind:"BUICOD_REF"},{$bind:"LCTDES"},{$bind:"LCTCOD"},{$bind:"FLOOR"},{$bind:"BAC"},{$bind:"PHOTO"}]}}]};exports.dashboards={$fixedassetsDashboard:{$dashboardName:"$fixedassetsDashboard",$title:"Fixed Assets Dashboard",$description:"",$vignettes:{$x3fixedassetsList:{$uuid:"$x3fixedassetsList",$displayStyle:"$full"},$x3LocationList:{$uuid:"$x3LocationList",$displayStyle:"$full"},$x3LocationCreateLink:{$uuid:"$x3LocationCreate",$displayStyle:"$link"},$x3LocationListIco:{$uuid:"$x3LocationList",$displayStyle:"$link"},$x3FixedAssetCreateLink:{$uuid:"$x3FixedAssetCreate",$displayStyle:"$link"},$x3fixedassetsListIco:{$uuid:"$x3fixedassetsList",$displayStyle:"$link"},$x3FixedAssetCreate:{$uuid:"$x3FixedAssetCreate",$displayStyle:"$full"},$x3LocationCreate:{$uuid:"$x3LocationCreate",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Create",$items:[{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3LocationCreateLink"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3LocationListIco"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3FixedAssetCreateLink"}]},{$layoutType:"tile",$title:"",$size:"medium",$items:[{$bind:"$x3fixedassetsListIco"}]}]},{$layoutType:"hubGroup",$title:"Queries",$items:[{$layoutType:"tile",$title:"Physical Assets - List",$size:"full",$items:[{$bind:"$x3fixedassetsList",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$queryLinkArticle:_queryLinkArticlePA,$cardsPerRow:3,$card:{$items:[{$bind:"LCTCOD_REF"},{$bind:"PHYDES1"},{$bind:"PHYREF"},{$bind:"BAC"},{$bind:"PHOTO"}]},$arrayOptions:{showSearch:!0}}]}}]},{$layoutType:"tile",$title:"Locations - List",$size:"full",$items:[{$bind:"$x3LocationList",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"card",$queryLinkArticle:_queryLinkArticleLOC,$cardsPerRow:3,$card:{$layoutType:"stack",$items:[{$bind:"BUICOD_REF"},{$bind:"LCTDES"},{$bind:"LCTCOD"},{$bind:"FLOOR"},{$bind:"BAC"},{$bind:"PHOTO"}]},$arrayOptions:{showSearch:!0}}]}}]}]},{$layoutType:"hubGroup",$title:"Creations",$items:[{$layoutType:"tile",$title:"Physical Assets - Create",$size:"full",$items:[{$bind:"$x3FixedAssetCreate",$pageActionSettings:[{name:"$save",icon:{css:"fa fa-check",name:"check"},$title:"Enregistrer",options:{footerHeader:!0,refreshPage:!1,multiselection:!1}}],$article:{$layoutType:"stack",$items:[{$bind:"LCTCOD_REF"},{$bind:"PHYDES1"},{$bind:"PHYREF"},{$bind:"BAC"}]}}]},{$layoutType:"tile",$title:"Locations - Create",$size:"full",$items:[{$bind:"$x3LocationCreate",$pageActionSettings:[{name:"$save",icon:{css:"fa fa-check",name:"check"},$title:"Enregistrer",options:{footerHeader:!0,refreshPage:!1,multiselection:!1}}],$article:{$layoutType:"stack",$items:[{$bind:"BUICOD_REF"},{$bind:"LCTDES"},{$bind:"LCTCOD"},{$bind:"FCY_REF"},{$bind:"BAC"},{$bind:"PHOTO"}]}}]}]}]}}},exports.gadgets={$x3fixedassetsList:{$type:"$representation",$title:"Query facet",entity:"PHYELT",endpoint:"x3.erp.GX3APP",action:"$query",representation:"PHYELTM",facet:"$query",icon:"s-m-physical-asset-query"},$x3LocationList:{$type:"$representation",$title:"Query facet",entity:"PHYLCT",endpoint:"x3.erp.GX3APP",action:"$query",representation:"PHYLCTM",facet:"$query",icon:"s-m-location-query"},$x3FixedAssetCreate:{$type:"$representation",$title:"Create Fixed Asset",entity:"PHYELT",endpoint:"x3.erp.GX3APP",action:"$create",representation:"PHYELTM",facet:"$create",icon:"s-m-physical-asset-create"},$x3LocationCreate:{$type:"$representation",$title:"Create Location",entity:"PHYLCT",endpoint:"x3.erp.GX3APP",action:"$create",representation:"PHYLCTM",facet:"$create",icon:"s-m-location-create"}}}),define("syracuse-tablet/html/js/demos/fixedAssets/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/fixedAssets/dashFixedAssets","syracuse-tablet/html/js/demos/utils"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),dashFixedAssets=require("syracuse-tablet/html/js/demos/fixedAssets/dashFixedAssets"),demoUtils=require("syracuse-tablet/html/js/demos/utils"),_demoApp={$application:{$uuid:"$demoFixedassets",applicationName:"PHYELT_MOBILE",title:"Fixed Assets",isSageApplication:!0,description:"",iconName:"s-m-physical-assets",$homeDashboard:{$uuid:"$fixedassetsDashboard",dashboardName:"$fixedassetsDashboard"}},$dashboards:{},$gadgets:{}};exports.register=function(){demoUtils.addToApp(_demoApp,dashFixedAssets),clientContract.registerApp(_demoApp)}}),define("syracuse-tablet/html/js/demos/availableStock/dashStock",["require","exports","module"],function(require,exports,module){exports.dashboards={$stockDashboard:{$dashboardName:"$stockDashboard",$title:"Available Stock Dashboard",$description:"",$vignettes:{$x3stockInquiry:{$uuid:"$x3stockInquiry",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Available Stock",$items:[{$layoutType:"tile",$title:"Available Stock",$size:"medium",$items:[{$bind:"$x3stockInquiry"}]}]}]}}},exports.gadgets={$x3stockInquiry:{$type:"$representation",$title:"Stock inquiry",entity:"STKCNSSDI",endpoint:"x3.erp.GX3APP",action:"$create",representation:"STKCNSSDIM",facet:"$create",icon:"s-m-sales-stockinquiry"}}}),define("syracuse-tablet/html/js/demos/availableStock/main",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demos/availableStock/dashStock","syracuse-tablet/html/js/demos/utils"],function(require,exports,module){var clientContract=require("syracuse-tablet/html/js/sdata/entities/clientContract"),dashStock=require("syracuse-tablet/html/js/demos/availableStock/dashStock"),demoUtils=require("syracuse-tablet/html/js/demos/utils"),_demoApp={$application:{$uuid:"$demoStock",applicationName:"sageavailablestock",title:"Available Stock",isSageApplication:!0,description:"",iconName:"s-m-stock-available",$homeDashboard:{$uuid:"$stockDashboard",dashboardName:"$stockDashboard"}},$dashboards:{},$gadgets:{}};exports.register=function(){demoUtils.addToApp(_demoApp,dashStock),clientContract.registerApp(_demoApp)}}),define("syracuse-tablet/html/js/demos/main",["require","exports","module","syracuse-tablet/html/js/demos/salesMyCustomers/main","syracuse-tablet/html/js/demos/salesMyInquiries/main","syracuse-tablet/html/js/demos/salesMyActions/main","syracuse-tablet/html/js/demos/purchaseMyActions/main","syracuse-tablet/html/js/demos/purchaseMyInquiries/main","syracuse-tablet/html/js/demos/myExpenses/main","syracuse-tablet/html/js/demos/fixedAssets/main","syracuse-tablet/html/js/demos/availableStock/main"],function(require,exports,module){var _demos={salesMyCustomers:require("syracuse-tablet/html/js/demos/salesMyCustomers/main"),salesMyInquiries:require("syracuse-tablet/html/js/demos/salesMyInquiries/main"),salesMyActions:require("syracuse-tablet/html/js/demos/salesMyActions/main"),purchaseMyActions:require("syracuse-tablet/html/js/demos/purchaseMyActions/main"),purchaseMyInquiries:require("syracuse-tablet/html/js/demos/purchaseMyInquiries/main"),myExpenses:require("syracuse-tablet/html/js/demos/myExpenses/main"),fixedAssets:require("syracuse-tablet/html/js/demos/fixedAssets/main"),availableStock:require("syracuse-tablet/html/js/demos/availableStock/main")};exports.init=function(){for(var p in _demos)try{_demos[p].register()}catch(e){console.error("!!Error registering demo["+p+"]",e.stack)}}}),define("syracuse-tablet/html/js/init/initModules",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/appFactory","syracuse-tablet/html/js/application/appFactoryDeps","syracuse-tablet/html/js/controls/ctrlFactoryDeps","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdataCache","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/helpers/siteLayout","syracuse-tablet/html/js/application/metaData","syracuse-tablet/html/js/ui/developmentPage","syracuse-tablet/html/js/helpers/uiSettings","syracuse-tablet/html/js/sdata/entities/test/testApplication","syracuse-tablet/html/js/sdata/entities/welcomeApplication","syracuse-tablet/html/js/demos/main"],function(require,exports,module){function _applyDevelopmentSettings(){globals.isDvlpMode()&&developmentPage.wasActive()&&developmentPage.show()}var utils=require("syracuse-tablet/html/js/helpers/utils"),globals=require("syracuse-tablet/html/js/helpers/globals"),locale=require("syracuse-tablet/html/js/helpers/locale"),factory=require("syracuse-tablet/html/js/application/appFactory"),appFactoryDeps=require("syracuse-tablet/html/js/application/appFactoryDeps"),ctrlFactoryDeps=require("syracuse-tablet/html/js/controls/ctrlFactoryDeps"),ajax=require("syracuse-tablet/html/js/ajax/ajax"),storage=require("syracuse-tablet/html/js/storage/storage"),sdataCache=require("syracuse-tablet/html/js/sdata/sdataCache"),uiutils=require("syracuse-tablet/html/js/ui/uiUtils"),modal=require("syracuse-tablet/html/js/ui/modals/modal"),siteLayout=require("syracuse-tablet/html/js/helpers/siteLayout"),metaData=require("syracuse-tablet/html/js/application/metaData"),developmentPage=require("syracuse-tablet/html/js/ui/developmentPage"),uiSettings=require("syracuse-tablet/html/js/helpers/uiSettings"),testApplication=require("syracuse-tablet/html/js/sdata/entities/test/testApplication"),welcomeApplication=require("syracuse-tablet/html/js/sdata/entities/welcomeApplication"),demos=require("syracuse-tablet/html/js/demos/main");exports.init=function(){var st,cache,deferred=new $.Deferred;return uiSettings.init(),globals.setSiteLayout(siteLayout),st=storage.getStorage(),st.init().then(function(){cache=new sdataCache.SDataCache(st)}).then(function(){var devMode=window.location.href.indexOf("/index_debug.html")>-1||window.location.href.indexOf("/index_joined.html")>-1;globals.init(devMode||utils.forceDvlpMode(),st,cache,utils),globals.setMetaData(metaData)}).then(function(){return appFactoryDeps.init()}).then(function(){return ctrlFactoryDeps.init()}).then(function(){ajax.init({},locale),utils.init(locale)}).then(function(){welcomeApplication.register(),demos.init()}).then(function(){globals.isDvlpMode()&&testApplication.register()}).then(function(){var app=factory.createApplication($("#s-m-app-id"));globals.setTabletApplication(app),globals.setModal(modal)}).then(function(){_applyDevelopmentSettings()}).then(function(){uiutils.triggerResizeInternal()}).then(function(){deferred.resolve()}).fail(function(e){deferred.reject(e)}),deferred.promise()}}),define("syracuse-tablet/html/js/helpers/native/nativeJSCall",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(require,exports,module){var log=require("syracuse-tablet/html/js/helpers/logger").getLogger("smJSCall",!0);exports.init=function(){window.smJSCall||(window.smJSCall=function(objectName,methodName,jsonParam){try{log&&log("smJSCall (objectName): "+objectName),log&&log("smJSCall (methodName): "+methodName),log&&log("smJSCall (jsonParam): "+jsonParam);var obj=window[objectName],method=obj&&obj[methodName],data=jsonParam;try{data=JSON.parse(jsonParam)}catch(e){}var ret=method&&method(data);return typeof ret!="string"&&(ret=""+ret),log&&log("smJSCall (return): "+ret),ret}catch(ex){throw log&&log(JSON.stringify(ex)),ex}})}}),function(root,factory){typeof define=="function"&&define.amd?define("syracuse-tablet/html/deps/handlebars-latest",[],factory):typeof exports=="object"?module.exports=factory():root.Handlebars=root.Handlebars||factory()}(this,function(){var __module4__=function(){function SafeString(string){this.string=string}var __exports__;return SafeString.prototype.toString=function(){return""+this.string},__exports__=SafeString,__exports__}(),__module3__=function(__dependency1__){function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],key)&&(obj[key]=arguments[i][key]);return obj}function escapeExpression(string){return string instanceof SafeString?string.toString():string==null?"":string?(string=""+string,possible.test(string)?string.replace(badChars,escapeChar):string):string+""}function isEmpty(value){return!value&&value!==0?!0:isArray(value)&&value.length===0?!0:!1}function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}var __exports__={},SafeString=__dependency1__,escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},badChars=/[&<>"'`]/g,possible=/[&<>"'`]/;__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return typeof value=="function"};isFunction(/x/)&&(isFunction=function(value){return typeof value=="function"&&toString.call(value)==="[object Function]"});var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value=="object"?toString.call(value)==="[object Array]":!1};return __exports__.isArray=isArray,__exports__.escapeExpression=escapeExpression,__exports__.isEmpty=isEmpty,__exports__.appendContextPath=appendContextPath,__exports__}(__module4__),__module5__=function(){function Exception(message,node){var line;node&&node.firstLine&&(line=node.firstLine,message+=" - "+line+":"+node.firstColumn);var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];line&&(this.lineNumber=line,this.column=node.firstColumn)}var __exports__,errorProps=["description","fileName","lineNumber","message","name","number","stack"];return Exception.prototype=new Error,__exports__=Exception,__exports__}(),__module2__=function(__dependency1__,__dependency2__){function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{},this.partials=partials||{},registerDefaultHelpers(this)}function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(){if(arguments.length===1)return undefined;throw new Exception("Missing helper: '"+arguments[arguments.length-1].name+"'")}),instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;if(context===!0)return fn(this);if(context===!1||context==null)return inverse(this);if(isArray(context))return context.length>0?(options.ids&&(options.ids=[options.name]),instance.helpers.each(context,options)):inverse(this);if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.name),options={data:data}}return fn(context,options)}),instance.registerHelper("each",function(context,options){if(!options)throw new Exception("Must pass iterator to #each");var fn=options.fn,inverse=options.inverse,i=0,ret="",data,contextPath;options.data&&options.ids&&(contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0])+"."),isFunction(context)&&(context=context.call(this)),options.data&&(data=createFrame(options.data));if(context&&typeof context=="object")if(isArray(context))for(var j=context.length;i<j;i++)data&&(data.index=i,data.first=i===0,data.last=i===context.length-1,contextPath&&(data.contextPath=contextPath+i)),ret+=fn(context[i],{data:data});else for(var key in context)context.hasOwnProperty(key)&&(data&&(data.key=key,data.index=i,data.first=i===0,contextPath&&(data.contextPath=contextPath+key)),ret+=fn(context[key],{data:data}),i++);return i===0&&(ret=inverse(this)),ret}),instance.registerHelper("if",function(conditional,options){return isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})}),instance.registerHelper("with",function(context,options){isFunction(context)&&(context=context.call(this));var fn=options.fn;if(!Utils.isEmpty(context)){if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0]),options={data:data}}return fn(context,options)}return options.inverse(this)}),instance.registerHelper("log",function(message,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,message)}),instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})}var __exports__={},Utils=__dependency1__,Exception=__dependency2__,VERSION="2.0.0";__exports__.VERSION=VERSION;var COMPILER_REVISION=6;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";__exports__.HandlebarsEnvironment=HandlebarsEnvironment,HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn){if(toString.call(name)===objectType){if(fn)throw new Exception("Arg not supported with multiple helpers");Utils.extend(this.helpers,name)}else this.helpers[name]=fn},unregisterHelper:function(name){delete this.helpers[name]},registerPartial:function(name,partial){toString.call(name)===objectType?Utils.extend(this.partials,name):this.partials[name]=partial},unregisterPartial:function(name){delete this.partials[name]}};var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,message){if(logger.level<=level){var method=logger.methodMap[level];typeof console!="undefined"&&console[method]&&console[method].call(console,message)}}};__exports__.logger=logger;var log=logger.log;__exports__.log=log;var createFrame=function(object){var frame=Utils.extend({},object);return frame._parent=object,frame};return __exports__.createFrame=createFrame,__exports__}(__module3__,__module5__),__module6__=function(__dependency1__,__dependency2__,__dependency3__){function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}}function template(templateSpec,env){if(!env)throw new Exception("No environment passed to template");if(!templateSpec||!templateSpec.main)throw new Exception("Unknown template object: "+typeof templateSpec);env.VM.checkRevision(templateSpec.compiler);var invokePartialWrapper=function(partial,indent,name,context,hash,helpers,partials,data,depths){hash&&(context=Utils.extend({},context,hash));var result=env.VM.invokePartial.call(this,partial,name,context,helpers,partials,data,depths);if(result==null&&env.compile){var options={helpers:helpers,partials:partials,data:data,depths:depths};partials[name]=env.compile(partial,{data:data!==undefined,compat:templateSpec.compat},env),result=partials[name](context,options)}if(result!=null){if(indent){var lines=result.split("\n");for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l)break;lines[i]=indent+lines[i]}result=lines.join("\n")}return result}throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")},container={lookup:function(depths,name){var len=depths.length;for(var i=0;i<len;i++)if(depths[i]&&depths[i][name]!=null)return depths[i][name]},lambda:function(current,context){return typeof current=="function"?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function(i){return templateSpec[i]},programs:[],program:function(i,data,depths){var programWrapper=this.programs[i],fn=this.fn(i);return data||depths?programWrapper=program(this,i,fn,data,depths):programWrapper||(programWrapper=this.programs[i]=program(this,i,fn)),programWrapper},data:function(data,depth){while(data&&depth--)data=data._parent;return data},merge:function(param,common){var ret=param||common;return param&&common&&param!==common&&(ret=Utils.extend({},common,param)),ret},noop:env.VM.noop,compilerInfo:templateSpec.compiler},ret=function(context,options){options=options||{};var data=options.data;ret._setup(options),!options.partial&&templateSpec.useData&&(data=initData(context,data));var depths;return templateSpec.useDepths&&(depths=options.depths?[context].concat(options.depths):[context]),templateSpec.main.call(container,context,container.helpers,container.partials,data,depths)};return ret.isTop=!0,ret._setup=function(options){options.partial?(container.helpers=options.helpers,container.partials=options.partials):(container.helpers=container.merge(options.helpers,env.helpers),templateSpec.usePartial&&(container.partials=container.merge(options.partials,env.partials)))},ret._child=function(i,data,depths){if(templateSpec.useDepths&&!depths)throw new Exception("must pass parent depths");return program(container,i,templateSpec[i],data,depths)},ret}function program(container,i,fn,data,depths){var prog=function(context,options){return options=options||{},fn.call(container,context,container.helpers,container.partials,options.data||data,depths&&[context].concat(depths))};return prog.program=i,prog.depth=depths?depths.length:0,prog}function invokePartial(partial,name,context,helpers,partials,data,depths){var options={partial:!0,helpers:helpers,partials:partials,data:data,depths:depths};if(partial===undefined)throw new Exception("The partial "+name+" could not be found");if(partial instanceof Function)return partial(context,options)}function noop(){return""}function initData(context,data){if(!data||!("root"in data))data=data?createFrame(data):{},data.root=context;return data}var __exports__={},Utils=__dependency1__,Exception=__dependency2__,COMPILER_REVISION=__dependency3__.COMPILER_REVISION,REVISION_CHANGES=__dependency3__.REVISION_CHANGES,createFrame=__dependency3__.createFrame;return __exports__.checkRevision=checkRevision,__exports__.template=template,__exports__.program=program,__exports__.invokePartial=invokePartial,__exports__.noop=noop,__exports__}(__module3__,__module5__,__module2__),__module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){var __exports__,base=__dependency1__,SafeString=__dependency2__,Exception=__dependency3__,Utils=__dependency4__,runtime=__dependency5__,create=function(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=SafeString,hb.Exception=Exception,hb.Utils=Utils,hb.escapeExpression=Utils.escapeExpression,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb},Handlebars=create();return Handlebars.create=create,Handlebars["default"]=Handlebars,__exports__=Handlebars,__exports__}(__module2__,__module4__,__module5__,__module3__,__module6__),__module7__=function(__dependency1__){function LocationInfo(locInfo){locInfo=locInfo||{},this.firstLine=locInfo.first_line,this.firstColumn=locInfo.first_column,this.lastColumn=locInfo.last_column,this.lastLine=locInfo.last_line}var __exports__,Exception=__dependency1__,AST={ProgramNode:function(statements,strip,locInfo){LocationInfo.call(this,locInfo),this.type="program",this.statements=statements,this.strip=strip},MustacheNode:function(rawParams,hash,open,strip,locInfo){LocationInfo.call(this,locInfo),this.type="mustache",this.strip=strip;if(open!=null&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2);this.escaped=escapeFlag!=="{"&&escapeFlag!=="&"}else this.escaped=!!open;rawParams instanceof AST.SexprNode?this.sexpr=rawParams:this.sexpr=new AST.SexprNode(rawParams,hash),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo),this.type="sexpr",this.hash=hash;var id=this.id=rawParams[0],params=this.params=rawParams.slice(1);this.isHelper=!!params.length||!!hash,this.eligibleHelper=this.isHelper||id.isSimple},PartialNode:function(partialName,context,hash,strip,locInfo){LocationInfo.call(this,locInfo),this.type="partial",this.partialName=partialName,this.context=context,this.hash=hash,this.strip=strip,this.strip.inlineStandalone=!0},BlockNode:function(mustache,program,inverse,strip,locInfo){LocationInfo.call(this,locInfo),this.type="block",this.mustache=mustache,this.program=program,this.inverse=inverse,this.strip=strip,inverse&&!program&&(this.isInverse=!0)},RawBlockNode:function(mustache,content,close,locInfo){LocationInfo.call(this,locInfo);if(mustache.sexpr.id.original!==close)throw new Exception(mustache.sexpr.id.original+" doesn't match "+close,this);content=new AST.ContentNode(content,locInfo),this.type="block",this.mustache=mustache,this.program=new AST.ProgramNode([content],{},locInfo)},ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="content",this.original=this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo),this.type="hash",this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo),this.type="ID";var original="",dig=[],depth=0,depthString="";for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part;original+=(parts[i].separator||"")+part;if(part===".."||part==="."||part==="this"){if(dig.length>0)throw new Exception("Invalid path: "+original,this);part===".."?(depth++,depthString+="../"):this.isScoped=!0}else dig.push(part)}this.original=original,this.parts=dig,this.string=dig.join("."),this.depth=depth,this.idName=depthString+this.string,this.isSimple=parts.length===1&&!this.isScoped&&depth===0,this.stringModeValue=this.string},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo),this.type="PARTIAL_NAME",this.name=name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo),this.type="DATA",this.id=id,this.stringModeValue=id.stringModeValue,this.idName="@"+id.stringModeValue},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="STRING",this.original=this.string=this.stringModeValue=string},NumberNode:function(number,locInfo){LocationInfo.call(this,locInfo),this.type="NUMBER",this.original=this.number=number,this.stringModeValue=Number(number)},BooleanNode:function(bool,locInfo){LocationInfo.call(this,locInfo),this.type="BOOLEAN",this.bool=bool,this.stringModeValue=bool==="true"},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo),this.type="comment",this.comment=comment,this.strip={inlineStandalone:!0}}};return __exports__=AST,__exports__}(__module5__),__module9__=function(){var __exports__,handlebars=function(){function Parser(){this.yy={}}var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return yy.prepareProgram($$[$0-1].statements,!0),$$[$0-1];case 2:this.$=new yy.ProgramNode(yy.prepareProgram($$[$0]),{},this._$);break;case 3:this.$=$$[$0];break;case 4:this.$=$$[$0];break;case 5:this.$=$$[$0];break;case 6:this.$=$$[$0];break;case 7:this.$=new yy.ContentNode($$[$0],this._$);break;case 8:this.$=new yy.CommentNode($$[$0],this._$);break;case 9:this.$=new yy.RawBlockNode($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 10:this.$=new yy.MustacheNode($$[$0-1],null,"","",this._$);break;case 11:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!1,this._$);break;case 12:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!0,this._$);break;case 13:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],yy.stripFlags($$[$0-2],$$[$0]),this._$);break;case 14:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],yy.stripFlags($$[$0-2],$$[$0]),this._$);break;case 15:this.$={strip:yy.stripFlags($$[$0-1],$$[$0-1]),program:$$[$0]};break;case 16:this.$={path:$$[$0-1],strip:yy.stripFlags($$[$0-2],$$[$0])};break;case 17:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],yy.stripFlags($$[$0-2],$$[$0]),this._$);break;case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],yy.stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$=new yy.PartialNode($$[$0-3],$$[$0-2],$$[$0-1],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 20:this.$=new yy.PartialNode($$[$0-2],undefined,$$[$0-1],yy.stripFlags($$[$0-3],$$[$0]),this._$);break;case 21:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 22:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 23:this.$=$$[$0];break;case 24:this.$=new yy.StringNode($$[$0],this._$);break;case 25:this.$=new yy.NumberNode($$[$0],this._$);break;case 26:this.$=new yy.BooleanNode($$[$0],this._$);break;case 27:this.$=$$[$0];break;case 28:$$[$0-1].isHelper=!0,this.$=$$[$0-1];break;case 29:this.$=new yy.HashNode($$[$0],this._$);break;case 30:this.$=[$$[$0-2],$$[$0]];break;case 31:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 32:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);break;case 33:this.$=new yy.PartialNameNode(new yy.NumberNode($$[$0],this._$));break;case 34:this.$=new yy.DataNode($$[$0],this._$);break;case 35:this.$=new yy.IdNode($$[$0],this._$);break;case 36:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]}),this.$=$$[$0-2];break;case 37:this.$=[{part:$$[$0]}];break;case 38:this.$=[];break;case 39:$$[$0-1].push($$[$0]);break;case 48:this.$=[];break;case 49:$$[$0-1].push($$[$0]);break;case 52:this.$=[$$[$0]];break;case 53:$$[$0-1].push($$[$0])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){function popStack(n){stack.length=stack.length-2*n,vstack.length=vstack.length-n,lstack.length=lstack.length-n}function lex(){var token;return token=self.lexer.lex()||1,typeof token!="number"&&(token=self.symbols_[token]||token),token}var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;for(;;){state=stack[stack.length-1];if(this.defaultActions[state])action=this.defaultActions[state];else{if(symbol===null||typeof symbol=="undefined")symbol=lex();action=table[state]&&table[state][symbol]}if(typeof action=="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])this.terminals_[p]&&p>2&&expected.push("'"+this.terminals_[p]+"'");this.lexer.showPosition?errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,recovering>0&&recovering--);break;case 2:len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!="undefined")return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ch=this._input[0];this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);return lines?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len-1),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=(new Array(pre.length+1)).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var token,match,tempMatch,index,col,lines;this._more||(this.yytext="",this.match="");var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch,index=i;if(!this.options.flex)break}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g),lines&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(token)return token;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function lex(){var r=this.next();return typeof r!="undefined"?r:this.lex()},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};return lexer.options={},lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:yy_.yytext.slice(-2)==="\\\\"?(strip(0,1),this.begin("mu")):yy_.yytext.slice(-1)==="\\"?(strip(0,1),this.begin("emu")):this.begin("mu");if(yy_.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return yy_.yytext=yy_.yytext.substr(5,yy_.yyleng-9),this.popState(),15;case 4:return 12;case 5:return strip(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return strip(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return yy_.yytext=strip(1,2).replace(/\\"/g,'"'),42;case 30:return yy_.yytext=strip(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return yy_.yytext=strip(1,2),50;case 37:return"INVALID";case 38:return 5}},lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],lexer.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},lexer}();return parser.lexer=lexer,Parser.prototype=parser,parser.Parser=Parser,new Parser}();return __exports__=handlebars,__exports__}(),__module10__=function(__dependency1__){function stripFlags(open,close){return{left:open.charAt(2)==="~",right:close.charAt(close.length-3)==="~"}}function prepareBlock(mustache,program,inverseAndProgram,close,inverted,locInfo){if(mustache.sexpr.id.original!==close.path.original)throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,mustache);var inverse=inverseAndProgram&&inverseAndProgram.program,strip={left:mustache.strip.left,right:close.strip.right,openStandalone:isNextWhitespace(program.statements),closeStandalone:isPrevWhitespace((inverse||program).statements)};mustache.strip.right&&omitRight(program.statements,null,!0);if(inverse){var inverseStrip=inverseAndProgram.strip;inverseStrip.left&&omitLeft(program.statements,null,!0),inverseStrip.right&&omitRight(inverse.statements,null,!0),close.strip.left&&omitLeft(inverse.statements,null,!0),isPrevWhitespace(program.statements)&&isNextWhitespace(inverse.statements)&&(omitLeft(program.statements),omitRight(inverse.statements))}else close.strip.left&&omitLeft(program.statements,null,!0);return inverted?new this.BlockNode(mustache,inverse,program,strip,locInfo):new this.BlockNode(mustache,program,inverse,strip,locInfo)}function prepareProgram(statements,isRoot){for(var i=0,l=statements.length;i<l;i++){var current=statements[i],strip=current.strip;if(!strip)continue;var _isPrevWhitespace=isPrevWhitespace(statements,i,isRoot,current.type==="partial"),_isNextWhitespace=isNextWhitespace(statements,i,isRoot),openStandalone=strip.openStandalone&&_isPrevWhitespace,closeStandalone=strip.closeStandalone&&_isNextWhitespace,inlineStandalone=strip.inlineStandalone&&_isPrevWhitespace&&_isNextWhitespace;strip.right&&omitRight(statements,i,!0),strip.left&&omitLeft(statements,i,!0),inlineStandalone&&(omitRight(statements,i),omitLeft(statements,i)&&current.type==="partial"&&(current.indent=/([ \t]+$)/.exec(statements[i-1].original)?RegExp.$1:"")),openStandalone&&(omitRight((current.program||current.inverse).statements),omitLeft(statements,i)),closeStandalone&&(omitRight(statements,i),omitLeft((current.inverse||current.program).statements))}return statements}function isPrevWhitespace(statements,i,isRoot){i===undefined&&(i=statements.length);var prev=statements[i-1],sibling=statements[i-2];if(!prev)return isRoot;if(prev.type==="content")return(sibling||!isRoot?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(prev.original)}function isNextWhitespace(statements,i,isRoot){i===undefined&&(i=-1);var next=statements[i+1],sibling=statements[i+2];if(!next)return isRoot;if(next.type==="content")return(sibling||!isRoot?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(next.original)}function omitRight(statements,i,multiple){var current=statements[i==null?0:i+1];if(!current||current.type!=="content"||!multiple&&current.rightStripped)return;var original=current.string;current.string=current.string.replace(multiple?/^\s+/:/^[ \t]*\r?\n?/,""),current.rightStripped=current.string!==original}function omitLeft(statements,i,multiple){var current=statements[i==null?statements.length-1:i-1];if(!current||current.type!=="content"||!multiple&&current.leftStripped)return;var original=current.string;return current.string=current.string.replace(multiple?/\s+$/:/[ \t]+$/,""),current.leftStripped=current.string!==original,current.leftStripped}var __exports__={},Exception=__dependency1__;return __exports__.stripFlags=stripFlags,__exports__.prepareBlock=prepareBlock,__exports__.prepareProgram=prepareProgram,__exports__}(__module5__),__module8__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__){function parse(input){return input.constructor===AST.ProgramNode?input:(parser.yy=yy,parser.parse(input))}var __exports__={},parser=__dependency1__,AST=__dependency2__,Helpers=__dependency3__,extend=__dependency4__.extend;__exports__.parser=parser;var yy={};return extend(yy,Helpers,AST),__exports__.parse=parse,__exports__}(__module9__,__module7__,__module10__,__module3__),__module11__=function(__dependency1__,__dependency2__){function Compiler(){}function precompile(input,options,env){if(input==null||typeof input!="string"&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);options=options||{},"data"in options||(options.data=!0),options.compat&&(options.useDepths=!0);var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}function compile(input,options,env){function compileInput(){var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,undefined,!0);return env.template(templateSpec)}if(input==null||typeof input!="string"&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);options=options||{},"data"in options||(options.data=!0),options.compat&&(options.useDepths=!0);var compiled,ret=function(context,options){return compiled||(compiled=compileInput()),compiled.call(this,context,options)};return ret._setup=function(options){return compiled||(compiled=compileInput()),compiled._setup(options)},ret._child=function(i,data,depths){return compiled||(compiled=compileInput()),compiled._child(i,data,depths)},ret}function argEquals(a,b){if(a===b)return!0;if(isArray(a)&&isArray(b)&&a.length===b.length){for(var i=0;i<a.length;i++)if(!argEquals(a[i],b[i]))return!1;return!0}}var __exports__={},Exception=__dependency1__,isArray=__dependency2__.isArray,slice=[].slice;return __exports__.Compiler=Compiler,Compiler.prototype={compiler:Compiler,equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return!1;for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||!argEquals(opcode.args,otherOpcode.args))return!1}len=this.children.length;for(i=0;i<len;i++)if(!this.children[i].equals(other.children[i]))return!1;return!0},guid:0,compile:function(program,options){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=options,this.stringParams=options.stringParams,this.trackIds=options.trackIds;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0};if(knownHelpers)for(var name in knownHelpers)this.options.knownHelpers[name]=knownHelpers[name];return this.accept(program)},accept:function(node){return this[node.type](node)},program:function(program){var statements=program.statements;for(var i=0,l=statements.length;i<l;i++)this.accept(statements[i]);return this.isSimple=l===1,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(program){var result=(new this.compiler).compile(program,this.options),guid=this.guid++,depth;this.usePartial=this.usePartial||result.usePartial,this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2)continue;this.addDepth(depth-1)}return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;program&&(program=this.compileProgram(program)),inverse&&(inverse=this.compileProgram(inverse));var sexpr=mustache.sexpr,type=this.classifySexpr(sexpr);type==="helper"?this.helperSexpr(sexpr,program,inverse):type==="simple"?(this.simpleSexpr(sexpr),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("blockValue",sexpr.id.original)):(this.ambiguousSexpr(sexpr,program,inverse),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(hash){var pairs=hash.pairs,i,l;this.opcode("pushHash");for(i=0,l=pairs.length;i<l;i++)this.pushParam(pairs[i][1]);while(i--)this.opcode("assignToHash",pairs[i][0]);this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=!0,partial.hash?this.accept(partial.hash):this.opcode("push","undefined"),partial.context?this.accept(partial.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",partialName.name,partial.indent||""),this.opcode("append")},content:function(content){content.string&&this.opcode("appendContent",content.string)},mustache:function(mustache){this.sexpr(mustache.sexpr),mustache.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",id.depth),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.ID(id),this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;id.type==="DATA"?this.DATA(id):id.parts.length?this.ID(id):(this.addDepth(id.depth),this.opcode("getContext",id.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),id=sexpr.id,name=id.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else{if(this.options.knownHelpersOnly)throw new Exception("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);id.falsy=!0,this.ID(id),this.opcode("invokeHelper",params.length,id.original,id.isSimple)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);type==="simple"?this.simpleSexpr(sexpr):type==="helper"?this.helperSexpr(sexpr):this.ambiguousSexpr(sexpr)},ID:function(id){this.addDepth(id.depth),this.opcode("getContext",id.depth);var name=id.parts[0];name?this.opcode("lookupOnContext",id.parts,id.falsy,id.isScoped):this.opcode("pushContext")},DATA:function(data){this.options.data=!0,this.opcode("lookupData",data.id.depth,data.id.parts)},STRING:function(string){this.opcode("pushString",string.string)},NUMBER:function(number){this.opcode("pushLiteral",number.number)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:slice.call(arguments,1)})},addDepth:function(depth){if(depth===0)return;this.depths[depth]||(this.depths[depth]=!0,this.depths.list.push(depth))},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper,isEligible=sexpr.eligibleHelper,options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];options.knownHelpers[name]?isHelper=!0:options.knownHelpersOnly&&(isEligible=!1)}return isHelper?"helper":isEligible?"ambiguous":"simple"},pushParams:function(params){for(var i=0,l=params.length;i<l;i++)this.pushParam(params[i])},pushParam:function(val){this.stringParams?(val.depth&&this.addDepth(val.depth),this.opcode("getContext",val.depth||0),this.opcode("pushStringParam",val.stringModeValue,val.type),val.type==="sexpr"&&this.sexpr(val)):(this.trackIds&&this.opcode("pushId",val.type,val.idName||val.stringModeValue),this.accept(val))},setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;return this.pushParams(params),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),sexpr.hash?this.hash(sexpr.hash):this.opcode("emptyHash"),params}},__exports__.precompile=precompile,__exports__.compile=compile,__exports__}(__module5__,__module3__),__module12__=function(__dependency1__,__dependency2__){function Literal(value){this.value=value}function JavaScriptCompiler(){}var __exports__,COMPILER_REVISION=__dependency1__.COMPILER_REVISION,REVISION_CHANGES=__dependency1__.REVISION_CHANGES,Exception=__dependency2__;JavaScriptCompiler.prototype={nameLookup:function(parent,name){return JavaScriptCompiler.isValidJavaScriptVariableName(name)?parent+"."+name:parent+"['"+name+"']"},depthedLookup:function(name){return this.aliases.lookup="this.lookup",'lookup(depths, "'+name+'")'},compilerInfo:function(){var revision=COMPILER_REVISION,versions=REVISION_CHANGES[revision];return[revision,versions]},appendToBuffer:function(string){return this.environment.isSimple?"return "+string+";":{appendToBuffer:!0,content:string,toString:function(){return"buffer += "+string+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment,this.options=options,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!asObject,this.name=this.environment.name,this.isChild=!!context,this.context=context||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(environment,options),this.useDepths=this.useDepths||environment.depths.list.length||this.options.compat;var opcodes=environment.opcodes,opcode,i,l;for(i=0,l=opcodes.length;i<l;i++)opcode=opcodes[i],this[opcode.opcode].apply(this,opcode.args);this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Exception("Compile completed with content left on stack");var fn=this.createFunctionContext(asObject);if(!this.isChild){var ret={compiler:this.compilerInfo(),main:fn},programs=this.context.programs;for(i=0,l=programs.length;i<l;i++)programs[i]&&(ret[i]=programs[i]);return this.environment.usePartial&&(ret.usePartial=!0),this.options.data&&(ret.useData=!0),this.useDepths&&(ret.useDepths=!0),this.options.compat&&(ret.compat=!0),asObject||(ret.compiler=JSON.stringify(ret.compiler),ret=this.objectLiteral(ret)),ret}return fn},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(asObject){var varDeclarations="",locals=this.stackVars.concat(this.registers.list);locals.length>0&&(varDeclarations+=", "+locals.join(", "));for(var alias in this.aliases)this.aliases.hasOwnProperty(alias)&&(varDeclarations+=", "+alias+"="+this.aliases[alias]);var params=["depth0","helpers","partials","data"];this.useDepths&&params.push("depths");var source=this.mergeSource(varDeclarations);return asObject?(params.push(source),Function.apply(this,params)):"function("+params.join(",")+") {\n  "+source+"}"},mergeSource:function(varDeclarations){var source="",buffer,appendOnly=!this.forceBuffer,appendFirst;for(var i=0,len=this.source.length;i<len;i++){var line=this.source[i];line.appendToBuffer?buffer?buffer=buffer+"\n    + "+line.content:buffer=line.content:(buffer&&(source?source+="buffer += "+buffer+";\n  ":(appendFirst=!0,source=buffer+";\n  "),buffer=undefined),source+=line+"\n  ",this.environment.isSimple||(appendOnly=!1))}if(appendOnly){if(buffer||!source)source+="return "+(buffer||'""')+";\n"}else varDeclarations+=", buffer = "+(appendFirst?"":this.initializeBuffer()),buffer?source+="return buffer + "+buffer+";\n":source+="return buffer;\n";return varDeclarations&&(source="var "+varDeclarations.substring(2)+(appendFirst?"":";\n  ")+source),source},blockValue:function(name){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=[this.contextName(0)];this.setupParams(name,0,params);var blockName=this.popStack();params.splice(1,0,blockName),this.push("blockHelperMissing.call("+params.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=[this.contextName(0)];this.setupParams("",0,params,!0),this.flushInline();var current=this.topStack();params.splice(1,0,current),this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){this.pendingContent&&(content=this.pendingContent+content),this.pendingContent=content},append:function(){this.flushInline();var local=this.popStack();this.pushSource("if ("+local+" != null) { "+this.appendToBuffer(local)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){this.lastContext=depth},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(parts,falsy,scoped){var i=0,len=parts.length;!scoped&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(parts[i++])):this.pushContext();for(;i<len;i++)this.replaceStack(function(current){var lookup=this.nameLookup(current,parts[i],"context");return falsy?" && "+lookup:" != null ? "+lookup+" : "+current})},lookupData:function(depth,parts){depth?this.pushStackLiteral("this.data(data, "+depth+")"):this.pushStackLiteral("data");var len=parts.length;for(var i=0;i<len;i++)this.replaceStack(function(current){return" && "+this.nameLookup(current,parts[i],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(string,type){this.pushContext(),this.pushString(type),type!=="sexpr"&&(typeof string=="string"?this.pushString(string):this.pushStackLiteral(string))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+hash.ids.join(",")+"}"),this.stringParams&&(this.push("{"+hash.contexts.join(",")+"}"),this.push("{"+hash.types.join(",")+"}")),this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){return this.inlineStack.push(expr),expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){guid!=null?this.pushStackLiteral(this.programExpression(guid)):this.pushStackLiteral(null)},invokeHelper:function(paramSize,name,isSimple){this.aliases.helperMissing="helpers.helperMissing";var nonHelper=this.popStack(),helper=this.setupHelper(paramSize,name),lookup=(isSimple?helper.name+" || ":"")+nonHelper+" || helperMissing";this.push("(("+lookup+").call("+helper.callParams+"))")},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var nonHelper=this.popStack();this.emptyHash();var helper=this.setupHelper(0,name,helperCall),helperName=this.lastHelper=this.nameLookup("helpers",name,"helper");this.push("((helper = (helper = "+helperName+" || "+nonHelper+") != null ? helper : helperMissing"+(helper.paramsInit?"),("+helper.paramsInit:"")+"),"+"(typeof helper === functionType ? helper.call("+helper.callParams+") : helper))")},invokePartial:function(name,indent){var params=[this.nameLookup("partials",name,"partial"),"'"+indent+"'","'"+name+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?params.push("data"):this.options.compat&&params.push("undefined"),this.options.compat&&params.push("depths"),this.push("this.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var value=this.popStack(),context,type,id;this.trackIds&&(id=this.popStack()),this.stringParams&&(type=this.popStack(),context=this.popStack());var hash=this.hash;context&&hash.contexts.push("'"+key+"': "+context),type&&hash.types.push("'"+key+"': "+type),id&&hash.ids.push("'"+key+"': "+id),hash.values.push("'"+key+"': ("+value+")")},pushId:function(type,name){type==="ID"||type==="DATA"?this.pushString(name):type==="sexpr"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i],compiler=new this.compiler;var index=this.matchExistingProgram(child);index==null?(this.context.programs.push(""),index=this.context.programs.length,child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context,!this.precompile),this.context.environments[index]=child,this.useDepths=this.useDepths||compiler.useDepths):(child.index=index,child.name="program"+index)}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return i}},programExpression:function(guid){var child=this.environment.children[guid],depths=child.depths.list,useDepths=this.useDepths,depth,programParams=[child.index,"data"];return useDepths&&programParams.push("depths"),"this.program("+programParams.join(", ")+")"},useRegister:function(name){this.registers[name]||(this.registers[name]=!0,this.registers.list.push(name))},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=undefined),source&&this.source.push(source)},pushStack:function(item){this.flushInline();var stack=this.incrStack();return this.pushSource(stack+" = "+item+";"),this.compileStack.push(stack),stack},replaceStack:function(callback){var prefix="",inline=this.isInline(),stack,createdStack,usedLiteral;if(!this.isInline())throw new Exception("replaceStack on non-inline");var top=this.popStack(!0);if(top instanceof Literal)prefix=stack=top.value,usedLiteral=!0;else{createdStack=!this.stackSlot;var name=createdStack?this.incrStack():this.topStackName();prefix="("+this.push(name)+" = "+top+")",stack=this.topStack()}var item=callback.call(this,stack);usedLiteral||this.popStack(),createdStack&&this.stackSlot--,this.push("("+prefix+item+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];entry instanceof Literal?this.compileStack.push(entry):this.pushStack(entry)}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;if(!inline){if(!this.stackSlot)throw new Exception("Invalid stack pop");this.stackSlot--}return item},topStack:function(){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];return item instanceof Literal?item.value:item},contextName:function(context){return this.useDepths&&context?"depths["+context+"]":"depth"+context},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(obj){var pairs=[];for(var key in obj)obj.hasOwnProperty(key)&&pairs.push(this.quotedString(key)+":"+obj[key]);return"{"+pairs.join(",")+"}"},setupHelper:function(paramSize,name,blockHelper){var params=[],paramsInit=this.setupParams(name,paramSize,params,blockHelper),foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:[this.contextName(0)].concat(params).join(", ")}},setupOptions:function(helper,paramSize,params){var options={},contexts=[],types=[],ids=[],param,inverse,program;options.name=this.quotedString(helper),options.hash=this.popStack(),this.trackIds&&(options.hashIds=this.popStack()),this.stringParams&&(options.hashTypes=this.popStack(),options.hashContexts=this.popStack()),inverse=this.popStack(),program=this.popStack();if(program||inverse)program||(program="this.noop"),inverse||(inverse="this.noop"),options.fn=program,options.inverse=inverse;var i=paramSize;while(i--)param=this.popStack(),params[i]=param,this.trackIds&&(ids[i]=this.popStack()),this.stringParams&&(types[i]=this.popStack(),contexts[i]=this.popStack());return this.trackIds&&(options.ids="["+ids.join(",")+"]"),this.stringParams&&(options.types="["+types.join(",")+"]",options.contexts="["+contexts.join(",")+"]"),this.options.data&&(options.data="data"),options},setupParams:function(helperName,paramSize,params,useRegister){var options=this.objectLiteral(this.setupOptions(helperName,paramSize,params));return useRegister?(this.useRegister("options"),params.push("options"),"options="+options):(params.push(options),"")}};var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=!0;return JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)},__exports__=JavaScriptCompiler,__exports__}(__module2__,__module5__),__module0__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){var __exports__,Handlebars=__dependency1__,AST=__dependency2__,Parser=__dependency3__.parser,parse=__dependency3__.parse,Compiler=__dependency4__.Compiler,compile=__dependency4__.compile,precompile=__dependency4__.precompile,JavaScriptCompiler=__dependency5__,_create=Handlebars.create,create=function(){var hb=_create();return hb.compile=function(input,options){return compile(input,options,hb)},hb.precompile=function(input,options){return precompile(input,options,hb)},hb.AST=AST,hb.Compiler=Compiler,hb.JavaScriptCompiler=JavaScriptCompiler,hb.Parser=Parser,hb.parse=parse,hb};return Handlebars=create(),Handlebars.create=create,Handlebars["default"]=Handlebars,__exports__=Handlebars,__exports__}(__module1__,__module7__,__module8__,__module11__,__module12__);return __module0__}),define("syracuse-tablet/html/js/helpers/handlebarsHelpers",["require","exports","module"],function(require,exports,module){exports.registerHelpers=function(Handlebars){Handlebars.registerHelper("smCompare",function(lvalue,operator,rvalue,options){var operators,result;if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");options===undefined&&(options=rvalue,rvalue=operator,operator="==="),operators={"==":function(l,r){return l==r},"===":function(l,r){return l===r},"!=":function(l,r){return l!=r},"!==":function(l,r){return l!==r},"<":function(l,r){return l<r},">":function(l,r){return l>r},"<=":function(l,r){return l<=r},">=":function(l,r){return l>=r},"typeof":function(l,r){return typeof l==r}};if(!operators[operator])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+operator);return result=operators[operator](lvalue,rvalue),result?options.fn(this):options.inverse(this)})}}),function(root,doc,factory){factory(root.jQuery,root,doc)}(this,document,function(jQuery,window,document,undefined){(function($,undefined){$.extend($.support,{orientation:"orientation"in window&&"onorientationchange"in window})})(jQuery),function($){$.event.special.throttledresize={setup:function(){$(this).bind("resize",handler)},teardown:function(){$(this).unbind("resize",handler)}};var throttle=250,handler=function(){curr=(new Date).getTime(),diff=curr-lastCall,diff>=throttle?(lastCall=curr,$(this).trigger("throttledresize")):(heldCall&&clearTimeout(heldCall),heldCall=setTimeout(handler,throttle-diff))},lastCall=0,heldCall,curr,diff}(jQuery),function($,window){function handler(){var orientation=get_orientation();orientation!==last_orientation&&(last_orientation=orientation,win.trigger(event_name))}var win=$(window),event_name="orientationchange",get_orientation,last_orientation,initial_orientation_is_landscape,initial_orientation_is_default,portrait_map={0:!0,180:!0},ww,wh,landscape_threshold;if($.support.orientation){ww=window.innerWidth||win.width(),wh=window.innerHeight||win.height(),landscape_threshold=50,initial_orientation_is_landscape=ww>wh&&ww-wh>landscape_threshold,initial_orientation_is_default=portrait_map[window.orientation];if(initial_orientation_is_landscape&&initial_orientation_is_default||!initial_orientation_is_landscape&&!initial_orientation_is_default)portrait_map={"-90":!0,90:!0}}$.event.special.orientationchange=$.extend({},$.event.special.orientationchange,{setup:function(){if($.support.orientation&&!$.event.special.orientationchange.disabled)return!1;last_orientation=get_orientation(),win.bind("throttledresize",handler)},teardown:function(){if($.support.orientation&&!$.event.special.orientationchange.disabled)return!1;win.unbind("throttledresize",handler)},add:function(handleObj){var old_handler=handleObj.handler;handleObj.handler=function(event){return event.orientation=get_orientation(),old_handler.apply(this,arguments)}}}),$.event.special.orientationchange.orientation=get_orientation=function(){var isPortrait=!0,elem=document.documentElement;return $.support.orientation?isPortrait=portrait_map[window.orientation]:isPortrait=elem&&elem.clientWidth/elem.clientHeight<1.1,isPortrait?"portrait":"landscape"},$.fn[event_name]=function(fn){return fn?this.bind(event_name,fn):this.trigger(event_name)},$.attrFn&&($.attrFn[event_name]=!0)}(jQuery,window)}),define("syracuse-tablet/html/deps/jqm-orientation",function(){}),function(factory){factory(jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){s.indexOf('"')===0&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires=="number"){var days=options.expires,t=options.expires=new Date;t.setMilliseconds(t.getMilliseconds()+days*864e5)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}var result=key?undefined:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;for(;i<l;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key===name){result=read(cookie,value);break}!key&&(cookie=read(cookie))!==undefined&&(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return $.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key)}}),define("syracuse-tablet/html/deps/jquery.cookie",function(){}),define("syracuse-tablet/html/js/main",["require","exports","module","syracuse-tablet/html/js/ui/modals/modal","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/init/initStyles","syracuse-tablet/html/js/init/initLocale","syracuse-tablet/html/js/init/initModules","syracuse-tablet/html/js/init/initLogin","syracuse-tablet/html/js/helpers/native/native","syracuse-tablet/html/js/helpers/native/nativeJSCall","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/deps/handlebars-latest","syracuse-tablet/html/js/helpers/handlebarsHelpers","syracuse-tablet/html/deps/jqm-orientation","syracuse-tablet/html/deps/jquery.cookie","syracuse-tablet/html/js/helpers/locale"],function(require,exports,module){function _startup(){return log&&log("main startup"),nativeJSCall.init(),initStyles.init().then(function(){return uiutils.waitWheelStart(),initLocale.init()}).then(function(){return initModules.init()}).then(function(){return initLogin.init()}).then(function(loggedIn){uiutils.waitWheelStop(),nativeX3WUPApp&&nativeX3WUPApp.notifLoaded();if(!loggedIn)return globals.getApplication().logout("login.authentication"),!1}).fail(function(e){uiutils.waitWheelStop(),globals.getApplication().logout().then(function(){if(e!=null&&e.message!=="$logout$"){var locale=require("syracuse-tablet/html/js/helpers/locale");globals.getModal().error(locale.text("startup.error"),e),nativeX3WUPApp&&nativeX3WUPApp.notifStartFail(""+e.message||"Startup error")}})})}var modal=require("syracuse-tablet/html/js/ui/modals/modal"),uiutils=require("syracuse-tablet/html/js/ui/uiUtils"),globals=require("syracuse-tablet/html/js/helpers/globals"),jsutils=require("syracuse-tablet/html/js/helpers/jsutils"),initStyles=require("syracuse-tablet/html/js/init/initStyles"),initLocale=require("syracuse-tablet/html/js/init/initLocale"),initModules=require("syracuse-tablet/html/js/init/initModules"),initLogin=require("syracuse-tablet/html/js/init/initLogin"),nativeX3WUPApp=require("syracuse-tablet/html/js/helpers/native/native").getModule("X3WUPApp"),nativeJSCall=require("syracuse-tablet/html/js/helpers/native/nativeJSCall"),log=require("syracuse-tablet/html/js/helpers/logger").getLogger("main");window.Handlebars=require("syracuse-tablet/html/deps/handlebars-latest"),require("syracuse-tablet/html/js/helpers/handlebarsHelpers").registerHelpers(window.Handlebars),require("syracuse-tablet/html/deps/jqm-orientation"),require("syracuse-tablet/html/deps/jquery.cookie"),log&&log("main loaded"),window.onerror=function(errorMsg,url,lineNumber,error){globals.application?globals.application.waitWheelStop():uiutils.waitWheelStop();try{modal.error("Javascript error",{where:"window.onerror",exception:error,message:errorMsg+"\n"+(url?"Url : "+jsutils.cleanStack(url)+"\nLineNumber : "+lineNumber:"")})}catch(e){var msg=errorMsg+"\n"+(error?+JSON.stringify(error,null,2):url?"Url : "+url+"\nLineNumber : "+lineNumber:"");alert(msg)}},$(document).ready(function(){log&&log("main document ready"),document.location.href.indexOf("?circular")>-1?xrayquire.showCycles(undefined,!0):_startup()})});