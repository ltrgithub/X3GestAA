"use strict";
var utils = require('syracuse-tablet/html/js/helpers/utils');
var log = require('syracuse-tablet/html/js/helpers/logger').log;

var _Prototype = utils.defineClass(function(proto, parent, options) {
	this.parent = parent;
	this.proto = proto || {};
	if (typeof proto == "string") {
		this.proto = JSON.parse(this.proto);
	}
	this.options = options || {};
}, null, {
	destroy: function() {},

	property: function(prop) {
		if (!prop || prop.length == 0) return null;
		if (prop.charAt(0) == "@") return this.localization(prop);
		return this.proto[prop] ? this.proto[prop] : this.parent ? this.parent.property(prop) : null;
	},

	localization: function(prop) {
		var loc = this.proto.$localization || {};
		return loc[prop] ? loc[prop] : this.parent ? this.parent.localization(prop) : null;
	}
});
exports.Prototype = _Prototype;
exports.create = function(proto, parent, options) {
	return new _Prototype(proto, parent, options);
};