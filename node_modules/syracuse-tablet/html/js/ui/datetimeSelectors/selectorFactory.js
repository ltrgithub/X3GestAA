"use strict";

var globals = require('syracuse-tablet/html/js/helpers/globals');

// date / time selectors
var $devices = ["Windows", "IOS", "Android"];

var selectors = {
	dateSelectorWindows: require('syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector').Klass,
	timeSelectorWindows: require('syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector').Klass,
	datetimeSelectorWindows: require('syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector').Klass
};


exports.getSelector = function(propertyType) {
	// extract string after 'application/x-'
	var $type = propertyType.slice(14);

	// if method getDeviceOS() is implemented
	// assuming it returns strings "Windows", "IOS" or "Android" (default will be 'Windows')
	var $OS = globals.getApplication().getDeviceOS && globals.getApplication().getDeviceOS() || "Windows";

	if ($OS) {
		try {
			return new selectors[$type + "Selector" + $OS]();
		} catch (e) {
			throw new Error("Expected date/time/datetime type. Got " + propertyType);
		}

	}
};