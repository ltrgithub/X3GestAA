"use strict";

var log = require('syracuse-tablet/html/js/helpers/logger').getLogger("webSQL", false);
var environment = require('syracuse-tablet/html/js/helpers/environment');

/*
 * WebSQL storage interface (Chrome, Safari)
 */

/**
 * The top class is storageWebSQLTemplates
 * It's just a trick to split the code that manages Templates/Drafts from the one that manages SDtata in 3 sub classes of storageWebSQLBase
 */
var _storageInterface = require('syracuse-tablet/html/js/storage/storageWebSQLTemplates').Klass;


exports.getStorageInterface = function() {
	return _storageInterface;
};
exports.isAvailable = function() {
	if ((environment.checkBrowserName("chrome") && environment.isOs("ios")) || (environment.checkBrowserName("safari") && environment.isOs("osx"))) {
		// IndexedDB works fine also on Chrome/Desktop - We should use it instead of WebSQL
		log && log("chrome on ios - force indexedDB");
		return null;
	}
	return window.openDatabase != null;
};