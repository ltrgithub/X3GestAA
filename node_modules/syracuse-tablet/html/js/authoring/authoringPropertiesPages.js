"use strict";
var authPropsGeneral = require('syracuse-tablet/html/js/authoring/authoringPropertiesGeneral');
var authoringActions = require('syracuse-tablet/html/js/authoring/pages/authoringActions');
var authoringChartDetail = require('syracuse-tablet/html/js/authoring/pages/authoringChartDetail');

var _getPage = function($$elmt, control) {
	if (control && control.isVignette()) {
		return control.getPage();
	} else if ($$elmt && $$elmt.is(".s-m-page")) {
		return $$elmt.smPageController();
	}
	return null;
};


var _modules = [authoringActions, authoringChartDetail];

exports.initModuleProperties = function(dest) {
	_modules.forEach(function(module) {
		module.initModuleProperties(dest);
	});
};

exports.getModuleProperties = function($$elmt, controller, props, sel, data) {
	data.page = _getPage($$elmt, data.control);
	if (data.page == null) return;
	if (data.page.state.type === "chartdetail") {
		authoringChartDetail.getModuleProperties($$elmt, controller, props, sel, data);
	} else if (data.page.getProtoLinks()) {
		authoringActions.getModuleProperties($$elmt, controller, props, sel, data);
	}
};