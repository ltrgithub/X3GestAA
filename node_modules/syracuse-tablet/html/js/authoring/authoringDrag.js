"use strict";

/*
	Drag and drop helpers
*/

/*
 * Gets the control/drag element a dragged DOM element belongs to
 * (The DOM element on drag start can be a child of the actual draggable, this is why we need to go up the tree)
 */
exports.getClosestDragElement = function($$source) {
	var $$draggable = $$source.closest(".ui-draggable");
	return $$draggable;
};


exports.dropDrop = function($$drop, $$helper, $$draggable) {
	_isDropAllowed($$drop, $$draggable, $$helper);
};

exports.dropAccept = function($$drop, $$draggable) {
	_isDropAllowed($$drop, $$draggable);
	return true;
};

exports.dropOver = function($$drop, $$helper, $$target) {

};

function _isDropAllowed($$drop, $$draggable, $$helper) {
	var action;
	var fromId;

	if ($$draggable.hasClass("s-m-auth")) {
		// drop from page
		action = "move";
		fromId = $$draggable.attr("id");
	} else {
		action = $$draggable.attr("data-auth-drag-action");
		if (action === "move") {
			fromId = $$draggable.attr("data-ctrl-id");
		}

	}

	console.log(action);
}