"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/application/daoSdata').Dao;
var sdataUtils = require('syracuse-tablet/html/js/sdata/sdataUtils');


/**
 * DaoSdata for statistics
 * Manages local pagination
 */
var _Dao = utils.defineClass(function(data, prototype, options) {
	options = options || {};
	if (!options.gadget) {
		throw new Error("DaoSdataStats - Gadget is expected");
	}
	Base.call(this, this._initData(data, prototype, options.gadget), prototype, options);
}, Base, {
	/* returns data according count parameter */
	_initData: function(data, prototype, gadget) {
		this._sdataUrl = sdataUtils.parseSDataURL(prototype.data("$url"));
		return data;
	},
	destroy: function(destroyProto) {
		Base.prototype.destroy.call(this);
	},
	getArrayData: function($bind, protoArray) {
		return Base.prototype.getArrayData.call(this, $bind, protoArray);
	},
	getQueryData: function(protoArray) {
		return Base.prototype.getQueryData.call(this, protoArray);
	},
	clone: function() {
		return Base.prototype.clone.call(this);
	}
});

exports.Dao = _Dao;