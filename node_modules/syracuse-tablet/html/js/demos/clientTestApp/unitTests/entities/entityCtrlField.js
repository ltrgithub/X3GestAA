"use strict";

var clientContract = require('syracuse-tablet/html/js/sdata/entities/clientContract');

var _entityName = "controlField";

var _details = {
	"decimalEmpty": null,
	"decimalFilled": 123456.789,
	"integerEmpty": null,
	"integerFilled": 123456789,
	"realEmpty": null,
	"realFilled": 123456.789,
	"quantityEmpty": null,
	"quantityFilled": 123,
	"quantityUnit": {
		"$description": "EURO euro",
		"$precision": 11,
		"$scale": 2,
		"$symbol": "â‚¬",
		"$title": "Euro"
	},
	"quantityUnitVal": "EUR",
	"dateEmpty": "",
	"dateFilled": "2015-01-23",
	"timeEmpty": "",
	"timeFilled": "11:12:13",
	"datetimeEmpty": "",
	"datetimeFilled": "2015-01-23T11:12:13Z",
	"choiceEmpty": "",
	"choiceFilled": "MYCHOICE",
	"booleanFilled": true,
	"booleanEmpty": null,
	"referenceEmptyVal": "",
	"referenceFilledVal": "MYREF",
	"referenceFilled": {
		"$description": "My description",
		"$title": "My title"
	},
	"stringEmpty": "",
	"stringFilled": "MY STRING",
	"textRtfEmpty": "",
	"textRtfFilled": "",
	"textHtmlEmpty": "",
	"textHtmlFilled": "<b>MY HTML</b>",
	"textPlainEmpty": "",
	"textPlainFilled": "MY TEXT",
	"imageEmpty": "",
	"imageFilled": {}
};
var _fields = ["decimal", "integer", "real", "quantity", "date", "time", "datetime", "choice", "boolean", "reference", "string", "textPlain", "textRtf", "textHtml", "image"];
var _unitTestCallBack = function(structElmt) {

};
var _buildDetailsLayout = function() {
	var _addUnitTestInfo = function(article, message) {
		article.$unitTest = {
			message: message,
		};
	};
	var rows = [];
	_fields.forEach(function(field) {
		var row = {
			"$layoutType": "row",
			"$items": []
		};
		rows.push(row);
		var cells = row.$items;
		["filled", "empty"].forEach(function(type) {
			var cell = {
				"$layoutType": "cell",
				"$sameSize": true,
				"$widthAll": 4,
				"$items": [{
					"$bind": field + type.smCapitalize()
				}]
			};
			if (type === "filled") {
				_addUnitTestInfo(cell.$items[0], "Title and value should be displayed");
			} else {
				_addUnitTestInfo(cell.$items[0], field === "image" ? "Only title and empty image icon should be displayed" : "Only title should be displayed");
				cells.push(cell);
				cell = $.extend(true, {}, cell);
				cell.$items[0].$hideIfEmpty = true;
				_addUnitTestInfo(cell.$items[0], "No title and value should be displayed");
			}
			cells.push(cell);
		});
	});
	return {
		"$layoutType": "stack",
		"$items": rows
	};

};
var _entity = {
	$entityName: _entityName,
	$properties: {
		"decimalEmpty": {
			"$title": "decimalEmpty",
			"$type": "application/x-decimal"
		},
		"decimalFilled": {
			"$title": "decimalFilled",
			"$type": "application/x-decimal"
		},
		"integerEmpty": {
			"$title": "integerEmpty",
			"$type": "application/x-integer"
		},
		"integerFilled": {
			"$title": "integerFilled",
			"$type": "application/x-integer"
		},
		"realEmpty": {
			"$title": "realEmpty",
			"$type": "application/x-real"
		},
		"realFilled": {
			"$title": "realFilled",
			"$type": "application/x-real"
		},
		"quantityEmpty": {
			"$title": "quantityEmpty",
			"$type": "application/x-quantity",
		},
		"quantityFilled": {
			"$title": "quantityFilled",
			"$type": "application/x-quantity",
			"$unit": "quantityUnit",
			"$value": {
				"$title": "{$value} {$unit}",
				"$type": "application/x-decimal",
				"$precision": 9,
				"$scale": 2,
				"$format": "0.00"
			}
		},
		"quantityUnit": {
			"$title": "quantityUnit",
			"$type": "application/x-reference",
			"$item": {
				"$value": "{quantityUnitVal}"
			}
		},
		"dateEmpty": {
			"$title": "dateEmpty",
			"$type": "application/x-date"
		},
		"dateFilled": {
			"$title": "dateFilled",
			"$type": "application/x-date"
		},
		"timeEmpty": {
			"$title": "timeEmpty",
			"$type": "application/x-time"
		},
		"timeFilled": {
			"$title": "timeFilled",
			"$type": "application/x-time"
		},
		"datetimeEmpty": {
			"$title": "datetimeEmpty",
			"$type": "application/x-datetime"
		},
		"datetimeFilled": {
			"$title": "datetimeFilled",
			"$type": "application/x-datetime"
		},
		"choiceEmpty": {
			"$title": "choiceEmpty",
			"$type": "application/x-choice"
		},
		"choiceFilled": {
			"$title": "choiceFilled",
			"$type": "application/x-choice"
		},
		"booleanFilled": {
			"$title": "booleanFilled",
			"$type": "application/x-boolean"
		},
		"booleanEmpty": {
			"$title": "booleanEmpty",
			"$type": "application/x-boolean"
		},
		"referenceEmpty": {
			"$title": "referenceEmpty",
			"$type": "application/x-reference",
			"$item": {
				"$value": "{VALUE}",
				"$key": "{VALUE}",
				"$properties": {
					"VALUE": {
						"$type": "application/x-string"
					}
				},
				"VALUE": "{referenceEmptyVal}"
			}
		},
		"referenceFilled": {
			"$title": "referenceFilled",
			"$type": "application/x-reference",
			"$item": {
				"$value": "{referenceFilledVal}"
			}
		},
		"stringEmpty": {
			"$title": "stringEmpty",
			"$type": "application/x-string"
		},
		"stringFilled": {
			"$title": "stringFilled",
			"$type": "application/x-string"
		},
		"textRtfEmpty": {
			"$title": "textRtfEmpty",
			"$type": "text/rtf",
			"$url": clientContract.getLocalEntityUrl(_entityName, "/textRtfEmpty")
		},
		"textRtfFilled": {
			"$title": "textRtfFilled",
			"$type": "text/rtf",
			"$acceptedTypes": ["text/rtf"],
			"$url": clientContract.getLocalEntityUrl(_entityName, "/textRtfFilled")
		},
		"textHtmlEmpty": {
			"$title": "textHtmlEmpty",
			"$type": "text/html",
			"$url": clientContract.getLocalEntityUrl(_entityName, "/textHtmlEmpty")
		},
		"textHtmlFilled": {
			"$title": "textHtmlFilled",
			"$type": "text/html",
			"$url": clientContract.getLocalEntityUrl(_entityName, "/textHtmlFilled")
		},
		"textPlainEmpty": {
			"$title": "textPlainEmpty",
			"$type": "text/plain",
			"$url": clientContract.getLocalEntityUrl(_entityName, "/textPlainEmpty")
		},
		"textPlainFilled": {
			"$title": "textPlainFilled",
			"$type": "text/plain",
			"$acceptedTypes": ["text/plain"],
			"$url": clientContract.getLocalEntityUrl(_entityName, "/textPlainFilled")
		},
		"imageEmpty": {
			"$title": "imageEmpty",
			"$type": "image",
			"$url": clientContract.getLocalEntityUrl(_entityName, "/imageEmpty")
		},
		"imageFilled": {
			"$title": "imageFilled",
			"$type": "image",
			"$url": clientContract.getLocalEntityUrl(_entityName, "/imageFilled")
		}
	},
	$relations: {},
	$articles: {
		$details: _buildDetailsLayout()
	},
	$services: {
		$read: function(op, data) {
			var deferred = $.Deferred();
			var result = op.$representation && op.$representation.endsWith("$details") ? _details : null;
			deferred.resolve($.extend({}, result));
			return deferred.promise();
		}
	},
	//sdataUrl 	parsed url
	//path 		array that contains th end of the path following entity name
	$urlCall: function(sdataUrl, path) {
		if (!path || path.length == 0) return "";
		switch (path[0]) {
			case "textRtfEmpty":
				return null;
			case "textRtfFilled":
				return {
					responseText: "{\\rtf1\\ansi{\\fonttbl{\\f0 MS Sans Serif;}}\\uc0\\pard MY RTF CONTENT\\par}"
				};
			case "textHtmlEmpty":
				return null;
			case "textHtmlFilled":
				return {
					responseText: '<span style="color:red"><b>MY HTML CONTENT</b></span>'
				};
			case "textPlainEmpty":
				return null;
			case "textPlainFilled":
				return {
					responseText: 'MY TEXT PLAIN CONTENT'
				};
			case "imageEmpty":
				return null;
			case "imageFilled":
				return "data:image/jpeg;base64,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";
			default:
				return null;
		}
	}
};


exports.entity = _entity;