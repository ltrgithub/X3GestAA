"use strict";

exports.dashboards = {
	"$localCustomerDashboard": {
		"$dashboardName": "$localCustomerDashboard",
		"$title": "Customer Dashboard",
		"$description": "",
		"$vignettes": {
			"$localCustomerRevenues": {
				"$uuid": "$localCustomerRevenues",
				"$displayStyle": "$full"
			},
			"$localCustomerTotals": {
				"$uuid": "$localCustomerTotals",
				"$displayStyle": "$full"
			}
		},
		"$article": {
			"$layoutType": "hub",
			"$items": [{
					"$layoutType": "hubGroup",
					"$title": "Monthly revenues",
					"$items": [{
						"$layoutType": "tile",
						"$size": "full",
						"$items": [{
							"$bind": "$localCustomerRevenues",
							"$article": {
								"$layoutType": "stack",
								"$items": [{
									"$bind": "$resources",
									"$style": "bar"
								}]
							}
						}]
					}]
				}, {
					"$layoutType": "hubGroup",
					"$title": "Totals",
					"$items": [{
						"$layoutType": "tile",
						"$size": "large",
						"$items": [{
							"$bind": "$localCustomerTotals",
							"$article": {
								"$layoutType": "stack",
								"$items": [{
									"$bind": "ordersValue",
									"$gauge": {
										"$bindMin": "min",
										"$bindMax": "ordersMax",
										"segments": [{
											"propStart": 0,
											"propEnd": 0.75,
											"color": "#DF5353"
										}, {
											"propStart": 0.75,
											"propEnd": 0.85,
										}, {
											"propStart": 0.85,
											"propEnd": 1,
											"color": "#55BF3B"
										}]
									}
								}]
							}
						}]
					}, {
						"$layoutType": "tile",
						"$size": "large",
						"$items": [{
							"$bind": "$localCustomerTotals",
							"$article": {
								"$layoutType": "stack",
								"$items": [{
									"$bind": "quotesValue",
									"$gauge": {
										"$bindMin": "min",
										"$bindMax": "quotesMax",
										"segments": [{
											"propStart": 0,
											"propEnd": 0.75,
											"color": "#DF5353"
										}, {
											"propStart": 0.75,
											"propEnd": 0.85,
										}, {
											"propStart": 0.85,
											"propEnd": 1,
											"color": "#55BF3B"
										}]
									}
								}]
							}
						}]
					}, {
						"$layoutType": "tile",
						"$size": "large",
						"$items": [{
							"$bind": "$localCustomerTotals",
							"$article": {
								"$layoutType": "stack",
								"$items": [{
									"$bind": "invoicesValue",
									"$gauge": {
										"$bindMin": "min",
										"$bindMax": "invoicesMax",
										"segments": [{
											"propStart": 0,
											"propEnd": 0.75,
										}, {
											"propStart": 0.75,
											"propEnd": 0.85,
										}, {
											"propStart": 0.85,
											"propEnd": 1,
										}]
									}
								}]
							}
						}]
					}]
				}
				/*, {
				"$layoutType": "hubGroup",
				"$title": "Customers",
				"$items": [{
					"$layoutType": "tile",
					"$size": "all",
					"$items": []
				}]
			} */
			]
		}
	}
};

exports.gadgets = {
	"$localCustomerRevenues": {
		"$type": "$representation",
		"$title": "Overview",
		"entity": "$localCustomerRevenue",
		"action": "$query",
		"representation": "$localCustomerRevenue",
		"facet": "$query",
		"parameters": {
			"where": {
				"value": "bpcnum eq {bpcnum}"
			}
		}
	},
	"$localCustomerTotals": {
		"$type": "$representation",
		"$title": "Totals",
		"entity": "$localCustomer",
		"action": "$details",
		"representation": "$localCustomer",
		"facet": "$details",
		"keyParameter": "10"
	},
};