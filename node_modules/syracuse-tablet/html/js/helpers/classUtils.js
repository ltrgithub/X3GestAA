"use strict";
/**
 * This module musn't have dependencies
 * Use registerClass
 */

var _refObj = new Object();
var _klasses = {};
/**
 * A kind of instance of function but only for specific objects
 * Add more object id needed
 */
var _scanProto = function(o, name) {
	if (o == null || !o.__proto__) return false;
	if (o.__proto__ === _refObj.__proto__) return false;
	if (!o.__proto__.constructor) return false;
	if (o._$smclass && o._$smclass.indexOf(name) >= 0) {
		return true;
	}
	if (_klasses[name] && o.__proto__.constructor === _klasses[name]) {
		// Optimization to prevent prototype scanning
		// _$smclass is an array to manage inheritance
		if (!o._$smclass) o._$smclass = [];
		o._$smclass.push(name);
		return true;
	}
	return _scanProto(o.__proto__, name);
};

exports.smInstanceOf = function(o, name) {
	return _scanProto(o, name);
};

exports.registerClass = function(klass, name) {
	_klasses[name] = klass;
};