"use strict";

var Page = require('syracuse-tablet/html/js/pages/page').Page;
var Vignette = require('syracuse-tablet/html/js/pages/page').Klass;

var _refObj = new Object();

var _scanProto = function(o, name) {
	if (o == null || !o.__proto__) return false;
	if (o.__proto__ === _refObj.__proto__) return false;
	if (!o.__proto__.constructor) return false;
	if (o._$smclass && o._$smclass.indexOf(name) >= 0) {
		return true;
	}
	switch (name) {
		case "page":
			if (o.__proto__.constructor === Page) {
				// Optimization to prevent prototype scanning
				if (!o._$smclass) o._$smclass = [];
				o._$smclass.push(name);
				return true;
			}
			break;
		case "vignette":
			if (o.__proto__.constructor === Vignette) {
				return true;
			}
			break;
		default:
			break;
	}
	return _scanProto(o.__proto__, name);
};

exports.smInstanceOf = function(o, name) {
	return _scanProto(o, name);
};