"use strict";


var utils = require('syracuse-tablet/html/js/helpers/utils');

var _url = utils.getCurrentUrl();
var _testMode = _url.query && _url.query.testNativeWrapper === "true";

var _modules = {
	"share": require('syracuse-tablet/html/js/helpers/native/nativeShare'),
	"liveTile": require('syracuse-tablet/html/js/helpers/native/nativeLiveTile'),
	"scheduleMessage": require('syracuse-tablet/html/js/helpers/native/nativeMessages'),
	"toastMessages": require('syracuse-tablet/html/js/helpers/native/nativeMessages'),
	"penInput": require('syracuse-tablet/html/js/helpers/native/nativePenInput'),
	"voiceCommands": require('syracuse-tablet/html/js/helpers/native/nativeVoiceCommands'),
	"X3WUPApp": require('syracuse-tablet/html/js/helpers/native/nativeSageX3WUPApp')
};

exports.hasCapability = function(capability) {
	return exports.getModule(capability) != null;
};
exports.getModule = function(capability) {
	var module = _modules[capability];
	if (!module) {
		console.log("Unknown native module " + capability);
		return null;
	}
	return module.supports(capability, _testMode) ? module : null;
};

exports.callModule = function(capability, functionName) {
	var module = exports.getModule(capability);
	if (!module || !module[functionName]) return null;
	var args = Array.prototype.slice.call(arguments, 2);
	return module[functionName].apply(null, args);
};


exports.init = function() {
	for (var m in _modules) {
		if (_modules[m].init) {
			_modules[m].init(_testMode);
		}
	}

};