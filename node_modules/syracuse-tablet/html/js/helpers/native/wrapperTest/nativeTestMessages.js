"use strict";

var testHelpers = require('syracuse-tablet/html/js/helpers/native/wrapperTest/nativeTestHelpers');
var modules = require('syracuse-tablet/html/js/common/modules');

var _TestNativeWrapper = function() {

	this.toastMsgSupported = function() {
		return true;
	};
	this.toastMsg = function(options) {
		options = JSON.parse(options)
		var notify = {
			// Avoid infinite loop
			onlyWebapp: true,
			title: options.Text2,
			message: options.Text2,
			severityClass: options.Severity
		};
		modules.get("modal").forceNotifyWebApp(notify);
	};

	this.scheduledMsgSupported = function() {
		return true;
	};
	this.scheduledMsg = function(data) {
		if (data) {
			data = JSON.parse(data);
			testHelpers.notify(data.Text1 && data.Text2 ? data.Text1 + " - " + data.Text2 : data.Text1 || data.Text2, data.ScheduleTime);
		} else {
			testHelpers.notify("Empty toast message");
		}
	};
};

exports.create = function() {
	return new _TestNativeWrapper();
};