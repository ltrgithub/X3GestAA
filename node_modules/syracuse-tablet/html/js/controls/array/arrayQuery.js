"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/controls/array/arrayBase').Klass;
var builderGridHoriz = require('syracuse-tablet/html/js/controls/array/builderGridHoriz').Klass;
var builderTable = require('syracuse-tablet/html/js/controls/array/builderTable').Klass;

/**
 * Array control for a QUERY FACET
 */
var _Klass = utils.defineClass(
	function(controller, article, prototype) {
		var self = this;
		Base.call(self, controller, article, prototype);
		if (self.controller.isVignette()) {
			self.setBuilder(new builderTable(self));
		} else if (self.prototype.isQuery()) {
			self.setBuilder(new builderGridHoriz(self));
		} else {
			self.setBuilder(new builderTable(self));
		}
	}, Base, {

		buildHtml: function($$parent, controllerDao, buildOptions) {
			var self = this;
			var arrayData = controllerDao.getQueryData(self.prototype);
			Base.prototype.buildHtml.call(self, $$parent, arrayData, buildOptions);
		}

	});

exports.Klass = _Klass;