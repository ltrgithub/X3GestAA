"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/controls/array/builderBase').Klass;
var uiUtils = require('syracuse-tablet/html/js/ui/uiUtils');
var articleParser = require('syracuse-tablet/html/js/helpers/articleParser');


/**
 * Array Control
 * 	Horizontal grid builder for queries
 */
var _Klass = utils.defineClass(
	function(control, options) {
		var self = this;
		Base.call(self, control, options);
		self._layoutRoot = null;
	}, Base, {
		destroy: function() {
			var self = this;
			Base.prototype.destroy.call(self);
			if (self._layoutRoot) {
				self._layoutRoot.destroy();
				self._layoutRoot = null;
			}
		},
		buildHtml: function(arrayData, buildOptions) {
			var self = this;
			Base.prototype.buildHtml.call(self, arrayData, buildOptions);
			if (!self.$article) return;
			if (false && !self._layoutRoot) self._layoutRoot = articleParser.cardV2Controls(self.control);
			arrayData.$resources.forEach(function(rowData, idx) {
				self._layoutRoot = articleParser.cardV2Controls(self.control);
				self._layoutRoot.buildHtml(self.$$value, rowData, {
					isArrayChild: true
				});
				//	self._layoutRoot.detachElmt();
			});
		}
	});

exports.Klass = _Klass;