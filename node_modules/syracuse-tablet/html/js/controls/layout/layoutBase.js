"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/controls/structElmt').Klass;
var uiUtils = require('syracuse-tablet/html/js/ui/uiUtils');

var _Klass = utils.defineClass(function(controller, type, article) {
	var self = this;
	Base.call(self, controller, type, article);
	self.title = article.$title;
}, Base, {
	destroy: function() {
		var self = this;
		Base.prototype.destroy.call(self);
	},
	createId: function(typeName) {
		var self = this;
		return utils.readableuid(typeName, self.article.$layoutType);
	},
	buildHtml: function($$parent, controllerDao, buildOptions) {
		var self = this;
		self.createRootElement(["s-m-layout", "container"], $$parent);
		if (self.article.$title && (buildOptions == null || buildOptions.noTitle)) {
			self.buildTitle();
		}
	},

	buildTitle: function() {
		var self = this;
		return $(uiUtils.createDomElement('header', ["s-m-layout-header"])).text(self.article.$title).appendTo(self.$$elmt);
	},

	onLayoutChange: function() {
		$.each(this.children, function(index, value) {
			value.onLayoutChange && value.onLayoutChange();
		});
	}
});

exports.Klass = _Klass;