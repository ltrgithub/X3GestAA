"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/controls/panels/header/panelHeaderMultisel').PanelHeaderMultisel;

/**
 * Dedicated header for multi-selection
 */
exports.PanelHeaderMultiselRun = utils.defineClass(
	function PanelHeaderMultiselRun(controller, type, article, opts) {
		Base.call(this, controller, type, article, opts);
	}, Base, {
		buildHtml: function() {
			Base.prototype.buildHtml.call(this);
			this._$$counter = $('<span class="s-m-multiselmsg"/>').prependTo(this.$$elmt.find(".s-m-header"));
		},
		multiSelUpdateCounter: function(nbOk, nbKo) {
			if (nbOk == null) {
				nbOk = 0;
			}
			if (nbKo == null) {
				nbKo = 0;
			}
			this._$$counter.text(nbOk + ' successes - ' + nbKo + ' failures');
		},
		/**
		 * Override _getItems
		 */
		_getItems: function() {
			return this.actionAdapter.getMultiSelectionRunItems(this.multiSelectionController.id);
		}
	});