"use strict";

var Base = require('syracuse-tablet/html/js/controls/panels/header/panelHeaderSdataPageBase').PanelHeaderSdataPageBase;

var utils = require('syracuse-tablet/html/js/helpers/utils');
var panelsHtml = require('syracuse-tablet/html/js/controls/panels/panelsHtml');

/**
 * 
 */
exports.PanelHeaderSdataPageSmartphone = utils.defineClass(
	function PanelHeaderSdataPageSmartphone(controller, type, article, opts) {
		Base.call(this, controller, type, article, opts);
	}, Base, {

		destroy: function() {
			Base.prototype.destroy.call(this);
		},
		buildHtml: function() {
			Base.prototype.buildHtml.call(this);
			this.$$links = this.$$elmt.find(".s-m-header-links");
			var items = this._getItems();
			var list = [];
			for (var ii = 0, jj = items.length; ii < jj; ii++) {
				var item = items[ii];
				var html = panelsHtml.getItemHtml("header", item);
				if (html) {
					list.push(html);
				}
			}
			list.reverse();
			this.$$links.append($(list.join("")));
			this._updateWidth();
		},
		/**
		 * Can be overridden
		 */
		_getItems: function() {
			return this.actionAdapter.getHeaderItems();
		},
		getHeaderCtx: function() {
			var ctx = Base.prototype.getHeaderCtx.call(this);
			return ctx;
		}
	});