"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/controls/panels/header/panelHeaderSdataPageBase').PanelHeaderSdataPageBase;
var MultiSelectionPanelController = require("syracuse-tablet/html/js/multiselection/multiSelectionPanelController").MultiSelectionPanelController;


/**
 * Dedicated header for multi-selection on smartphones
 */
exports.PanelHeaderMultisel = utils.defineClass(
	function PanelHeaderMultisel(controller, type, article, opts) {
		Base.call(this, controller, type, article, opts);
		this.multiSelectionController = new MultiSelectionPanelController(this);
	}, Base, {

		destroy: function() {
			Base.prototype.destroy.call(this);
			if (this.multiSelectionController) {
				this.multiSelectionController.destroy();
				this.multiSelectionController = null;
			}
		},
		buildHtml: function() {
			Base.prototype.buildHtml.call(this);
			this.$$elmt.addClass("multiSelection");
		},
		/**
		 * Override _getItems
		 */
		_getItems: function() {
			return this.actionAdapter.getMultiSelectionItems(this.multiSelectionController.id);
		},
		getHeaderCtx: function() {
			var ctx = Base.prototype.getHeaderCtx.call(this);
			ctx.showNav = false;
			ctx.showLabel = false;
			ctx.showFreshness = false;
			ctx.showActionPanel = false;
			return ctx;
		}
	});