"use strict";

var Base = require('syracuse-tablet/html/js/controls/panels/panelBase').PanelBase;

var utils = require('syracuse-tablet/html/js/helpers/utils');

/**
 * Base class for all panels that interact with an sdata page and 
 * may trigger actions and links that rely on the page controller
 * 
 * This class is ment to manage interactions and should not do rendering since it's very
 * unspecific
 * 
 */
exports.PanelSdataPage = utils.defineClass(
	function PanelSdataPage(controller, type, article, opts) {
		Base.call(this, controller, type, article, opts);
	}, Base, {
		destroy: function() {
			Base.prototype.destroy.call(this);
		},
		///
		/// START: Rendering
		///
		buildHtml: function() {
			Base.prototype.buildHtml.call(this);
		},
		///
		/// END: Rendering
		///

		/**
		 * metaData will contain:
		 * {
		 * 	$isDisabled: tue|false
		 *  $isHidden: true|false
		 * }
		 * These properties will be the result of merging prototype and data so there is not need
		 * to do anything more here except applying them
		 */
		onMenuItemChanged: function($itemName, $bind, metaData) {
			var $$item = this.$$elmt.find('[data-menuitem-id="' + $itemName + '"]');
			if ($$item.length < 1) {
				return;
			}
			if (metaData.$isDisabled === true) {
				$$item.addClass("disabled");
			} else if (metaData.$isDisabled === false) {
				$$item.removeClass("disabled");
			}
			if (metaData.$isHidden === true) {
				$$item.addClass("hidden");
			} else if (metaData.$isHidden === false) {
				$$item.removeClass("hidden");
			}
		}
	});