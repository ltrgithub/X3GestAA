"use strict";

var Base = require('syracuse-tablet/html/js/controls/fields/ctrlFieldBase').CtrlFieldBase;

var utils = require('syracuse-tablet/html/js/helpers/utils');
var fontUtils = require('syracuse-tablet/html/js/ui/fontUtils');
var selectorFactory = require('syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory');

exports.CtrlDate = utils.defineClass(
	function CtrlDate(controller, article, prototype, options) {
		options = options || {};
		options.nativeCapabilities = null;
		Base.call(this, controller, article, prototype, options);
	}, Base, {

		buildFieldValue: function() {
			this._ensure$$value();
			this._clear$$value();
			//this.$$value.addClass("s-m-date");
			var value = this.getFormattedValue(this.getValue());
			if (this.$isEditMode) {
				this.addPicker("date", fontUtils.getIconByName(this.$type === "application/x-date" ? "datePicker" : "timePicker"));
				this.createMainInput(value);
			} else {
				this.appendTextValue(value);
			}
		},
		_actDatePicker: function() {
			selectorFactory.createSelector(this);
		},
	});