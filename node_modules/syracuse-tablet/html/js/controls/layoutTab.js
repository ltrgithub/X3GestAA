"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/controls/layoutBase').Klass;

var _Klass = utils.defineClass(
	function(controller, type, article) {
		var self = this;
		Base.call(self, controller, type, article);
	}, Base, {
		/**
		 * Build Html recursively
		 */

		buildHtml: function(parent, controllerDao, buildOptions) {
			// layout container
			var container = uiUtils.createDomElement('div', ["container", "s-m-layout", "s-m-tabs"], null, {
				"id": this.id
			});

			if (this.article.$title) {
				var header = uiUtils.createDomElement('header', ["s-m-layout-header"]);
				var tabSlot = uiUtils.createDomElement("div", ["s-m-tabs-slot"]);
				var tabsContainer = uiUtils.createDomElement("ul", ["nav,nav-tabs"], null, {
					"role": "tablist"
				});

				$.each(this.children, function(index, value) {
					var tabClass = index == 0 ? ["active"] : null;
					var tab = uiUtils.createDomElement("li", tabClass);
					var tabLink = uiUtils.createDomElement("a", ["s-m-tab"], value.article.$title, {
						"href": "#"
					});
					tab.appendChild(tabLink);
					tabsContainer.appendChild(tab);
				});
				tabSlot.appendChild(tabsContainer);
				container.appendChild(header);
			}

			var coreSlot = uiUtils.createDomElement("div", [this.article.$layoutType]);

			$.each(this.children, function(index, value) {
				value.isTabSection = true;

				var coreItemClassList = ["s-m-layout-cell"];
				var coreItem = uiUtils.createDomElement("div", coreItemClassList, null, {
					"style": "display:" + (index != 0 ? "none" : "")
				});
				coreSlot.appendChild(coreItem);
				this.buildHtml(coreItem, controllerDao, buildOptions);
			});
			container.appendChild(coreSlot);
			parent.appendChild(container);
		},
	});

exports.Klass = _Klass;