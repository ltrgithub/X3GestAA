"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/controls/field/ctrlFieldBase').Klass;
var validator = require('syracuse-tablet/html/js/controls/validator').Validator;


var _Klass = utils.defineClass(
	function(controller, article, prototype) {
		var self = this;
		Base.call(self, controller, article, prototype);
	}, Base, {
		validateValue: function(value, errors) {
			var self = this;
			var ok = Base.prototype.validateValue.call(self, value, errors);
			// #4748 do not check "$precision" since the desktop client also does not check it and we do not want to put an extra unexpected constraint
			ok = validator.validate(this, value, errors, ["$minimum", "$maximum", "$exclusiveMinimum", "$exclusiveMaximum"]) && ok;
			if (this.$type !== "application/x-integer") {
				ok = validator.validate(this, value, errors, ["$scale"]) && ok;
			}
			return ok;
		}
	});

exports.Klass = _Klass;