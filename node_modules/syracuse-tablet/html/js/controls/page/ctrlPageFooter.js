"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var notifications = require('syracuse-tablet/html/js/helpers/notifications');
var Base = require('syracuse-tablet/html/js/controls/page/ctrlFooterBase').Klass;
var fontUtils = require('syracuse-tablet/html/js/ui/fontUtils');
var locale = require('syracuse-tablet/html/js/helpers/locale');


/**
 * Page footer generate Html
 */
var _Klass = utils.defineClass(
	function($type, controller, options) {
		Base.call(this, $type, controller, options);
		notifications.subscribe(this, ["sm.page.pin.state.change"]);
	}, Base, {

		// newState
		// 0 = don't show
		// 1 = show inactive
		// 2 = show active
		notifPagePinStateChange: function(newState) {
			var $$root = this.$$elmt.find("[data-action=pinPage]");
			var $$icon = $$root.find("i");
			if ($$icon.length > 0) {
				$$icon.attr("class", fontUtils.pageIcon("pinPage_" + newState));
				$$root.find("span").text(locale.text(newState === 1 ? "action.pin" : "action.unpin"));
			}
		}
	});

exports.Klass = _Klass;