"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/controls/ctrlBase').Klass;

var _Klass = utils.defineClass(

	function(controller, article, prototype) {
		var self = this;
		Base.call(self, controller, article, prototype);
	}, Base, {
		buildHtml: function(parent, controllerDao, buildOptions) {
			var self = this;
			var fieldSlot = uiUtils.createDomElement("div", ["sm-field-slot"], null, {
				"id": this.id
			});
			// in edit mode, value is displayed before title
			if (this.$isEditMode) {
				fieldSlot.appendChild(this.buildFieldCore(controllerDao, buildOptions));
				fieldSlot.appendChild(this.buildFieldTitle(buildOptions));
			} else {
				fieldSlot.appendChild(this.buildFieldTitle(buildOptions));
				fieldSlot.appendChild(this.buildFieldCore(controllerDao, buildOptions));
			}

			parent.appendChild(fieldSlot);
		},
		buildFieldValue: function(parentSlot, controllerDao, buildOptions) {
			if (controllerDao) {
				if (!controllerDao.getDisplayValue) throw new Error("BuildHtml - dao is expected for data parameter");
			}

			if (this.$isEditMode) {
				parentSlot.appendChild(uiUtils.createDomElement("input", ["sm-field-input-boolean"], null, {
					"type": "checkbox",
					"checked": controllerDao.getDisplayValue(this.article.$bind) ? true : false
				}));
			} else {
				parentSlot.appendChild(uiUtils.createDomElement("span", ["glyphicon", controllerDao.getDisplayValue(this.article.$bind) ? "glyphicon-ok" : "glyphicon-remove"]));
			}
		}
	});

exports.Klass = _Klass;