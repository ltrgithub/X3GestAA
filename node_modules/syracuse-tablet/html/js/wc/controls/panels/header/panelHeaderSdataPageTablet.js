"use strict";

var Base = require('syracuse-tablet/html/js/wc/controls/panels/header/panelHeaderSdataPageBase').PanelHeaderSdataPageBase;

var utils = require('syracuse-tablet/html/js/wc/helpers/utils');

var _html = {
	mainContainer: '\
		<div class="s-m-header tablet">\
			<div class="s-m-header-nav">\
				<a href="#" draggable="false"\
					data-nevent\
					data-naction="historyBack">\
					<i class="fa fa-arrow-circle-o-left"></i>\
				</a>\
			</div>\
			<div class="s-m-header-labels">\
				<span class="s-m-header-label">{{title}}</span>\
			</div>\
			<div class="s-m-header-links">\
				<a class="s-m-header-link" href="#" draggable="false" \
					data-nevent\
					data-naction="openGlobalPanel">\
					<span class="fa fa-bars"></span>\
				</a>\
			</div>\
		</div>\
		<div class="s-m-freshness s-m-fresh"\
			data-nevent data-naction="showFreshness"\
			style="display: none;">\
			<i class="fa fa-bookmark"></i>\
		</div>',
	popupContainer: '<ul class="dropdown-menu dropdown-menu-right" role="menu">{{{items}}}</ul>'

}
var _templates = {};

function _getHtml(name, ctx) {
	var tmpl = _templates[name];
	if (!tmpl) {
		tmpl = _templates[name] = Handlebars.compile(_html[name]);
	}
	return tmpl(ctx);
};

/**
 * 
 */
exports.PanelHeaderSdataPageTablet = utils.defineClass(
	function PanelHeaderSdataPageTablet(controller, type, article, opts) {
		Base.call(this, controller, type, article, opts);
	}, Base, {

		destroy: function() {
			Base.prototype.destroy.call(this);
		},

		///
		/// START: Rendering
		///

		buildHtml: function() {
			var self = this;
			Base.prototype.buildHtml.call(self);

			this.$$elmt.html(_getHtml("mainContainer", this.getHeaderCtx()));
			this._updateWidth();
		},
		///
		/// END: Rendering
		///
	});