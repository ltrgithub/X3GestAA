"use strict";

var clientContract = require('syracuse-tablet/html/js/sdata/entities/clientContract');

var entities = [
	require('syracuse-tablet/html/js/sdata/entities/test/unitTests/entities/entityCtrlField')
];

var modules = {
	unitTestCtrlField: require('syracuse-tablet/html/js/sdata/entities/test/unitTests/unitTestCtrlField')
};

var _initModules = function() {
	var vignettes = exports.dashboards.unitTestsDashboard.$vignettes;
	var tiles = exports.dashboards.unitTestsDashboard.$article.$items[0].$items;
	for (var name in modules) {
		vignettes[name] = {
			"$uuid": name,
			"$displayStyle": "$link"
		};
		tiles.push({
			"$layoutType": "tile",
			"$bgColor": "lightgreen",
			"$items": [{
				"$bind": name
			}],
			"$size": "medium"
		});
		// The modules add their own dashboard/gadget/entities
		modules[name].init(name, exports.dashboards, exports.gadgets);
		entities.forEach(function(entity) {
			if (entity.entity) {
				// We tag these page as unit test - eg: $unitTestMsg unit test messages will be displayed
				entity.entity.$isUnitTest = true;
				clientContract.registerEntity(entity.entity);
			}
		});
	}
};
exports.dashboards = {
	"unitTestsDashboard": {
		"$dashboardName": "unitTestsDashboard",
		"$title": "Unit Tests Dashboard",
		"$description": "",
		"$vignettes": {},
		"$article": {
			"$layoutType": "hub",
			"$items": [{
				"$layoutType": "hubGroup",
				"$title": "Unit Tests Group 1",
				"$items": []
			}]
		}
	}
};

exports.gadgets = {};

_initModules();