"use strict";

var clientContract = require('syracuse-tablet/html/js/sdata/entities/clientContract');

var entTodos = require('syracuse-tablet/html/js/demoapp/entTodos');
var entOverviewSales = require('syracuse-tablet/html/js/demoapp/entOverviewSales');
var entOverviewSalesLeads = require('syracuse-tablet/html/js/demoapp/entOverviewSalesLeads');
var entCustomers = require('syracuse-tablet/html/js/demoapp/entCustomers');
var entCustomerRevenues = require('syracuse-tablet/html/js/demoapp/entCustomerRevenues');

var dashOverview = require('syracuse-tablet/html/js/demoapp/dashOverview');
var dashCustomer = require('syracuse-tablet/html/js/demoapp/dashCustomer');

var _demoApp = {
	"$application": {
		"$uuid": "$demoApp",

		"applicationName": "$demoApp",
		"title": "Sales overview",
		"description": "Sales overview",
		"iconName": "money",

		"$homeDashboard": {
			"$uuid": "$demoAppOverviewDashboard",
			"dashboardName": "$demoAppOverviewDashboard"
		}
	},
	"$dashboards": {},
	"$gadgets": {}
};

function _addToApp(app) {
	if (app.gadgets) {
		Object.keys(app.gadgets).forEach(function(key) {
			if (_demoApp.$gadgets[key]) {
				console.log("Duplicate gadget name: " + key);
			}
			_demoApp.$gadgets[key] = app.gadgets[key];
		});
	}
	if (app.dashboards) {
		Object.keys(app.dashboards).forEach(function(key) {
			if (_demoApp.$dashboards[key]) {
				console.log("Duplicate dashboard name: " + key);
			}
			_demoApp.$dashboards[key] = app.dashboards[key];
		});
	}
}
exports.register = function() {
	clientContract.registerEntity(entTodos.entity);
	clientContract.registerEntity(entOverviewSales.entity);
	clientContract.registerEntity(entOverviewSalesLeads.entity);
	clientContract.registerEntity(entCustomers.entity);
	clientContract.registerEntity(entCustomerRevenues.entity);

	_addToApp(dashOverview);
	_addToApp(dashCustomer);

	clientContract.registerApp(_demoApp);
};