"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var Base = require('syracuse-tablet/html/js/pages/sdata/pageSdata').Page;
var DraftsManager = require('syracuse-tablet/html/js/pages/drafts/draftsManager').DraftsManager;

/**
 * Page handling a state-less Edit Facet with draft management
 * 
 */
exports.Page = utils.defineClass(
	function PageSdataDraftable(pageData, options) {
		Base.call(this, pageData, options);
		this.draftsManager = new DraftsManager(this);
	},
	Base, {
		destroy: function() {
			Base.prototype.destroy.call(this);
			if (this.draftsManager) {
				this.draftsManager.destroy();
				this.draftsManager = null;
			}
		},
		onBackAction: function() {
			return this.draftsManager.onBackAction()
		},
	});