"use strict";
var utils = require("syracuse-tablet/html/js/helpers/utils");

exports.bindEvents = function bindEvents() {
	// /!\ TODO To improve

	// on tab click handler
	$(document.body).delegate("a.sm-tab", "click", function(event) {
		// get tab index
		//debugger;
		var tabIndex = $(event.target.parentNode).index();

		// get tab layout list
		// get layout header
		var layoutHeader = event.target.parentNode;
		while (layoutHeader.nodeName.toLowerCase() !== "header") {
			layoutHeader = layoutHeader.parentNode;
		}
		// get tabs content
		var layoutCore = layoutHeader.nextSibling;
		// (security, in order to avoid empty spaces nodes
		while (layoutCore.nodeName.toLowerCase() !== "div") {
			layoutCore = layoutCore.nextSibling;
		}


		// update tabs pickers style
		var ul = event.target.parentNode.parentNode;
		for (var ii = 0, jj = ul.children.length; ii < jj; ii++) {
			utils.toggleClass(ul.children[ii], "active", ii == tabIndex);
		}

		// display appropriate tab and hide the others
		for (var mm = 0, pp = layoutCore.children.length; mm < pp; mm++) {
			layoutCore.children[mm].style.display = mm == tabIndex ? "" : "none";
		}
	});

};