"use strict";
define("syracuse-tablet/html/js/helpers/winjs",["require","exports","module"],function(e,t,n){var r={},i=0,s=function(e){if(!e)return;var t;try{t=JSON.parse(e)}catch(n){return}if(!t.$uuid)return;var i=r[t.$uuid];if(!i)return;delete r[t.$uuid];if(!i.$deferred)return;t.$error?i.$deferred.reject(t.$error):i.$deferred.resolve(t.$data)},o=function(e,t,n,s){var o=$.Deferred();if(u()){i+=1;var a={$domain:e,$funcName:t,$uuid:""+i,$data:n,$execCallback:!s},f=JSON.stringify(a),l;s!==!0&&(l={$uuid:a.$uuid,$deferred:o},r[l.$uuid]=l),window.external.notify(f),s===!0&&o.resolve()}else o.reject({$message:"No WinJS container"});return o.promise()},u=function(){try{return"notify"in window.external}catch(e){return!1}};window&&(window.winjsCallbackHook=s),t.callWinJS=o,t.isAvailable=u}),define("syracuse-tablet/html/js/helpers/logger",["require","exports","module","syracuse-tablet/html/js/helpers/winjs"],function(e,t,n){function s(e){return null}var r=e("syracuse-tablet/html/js/helpers/winjs"),i;r.isAvailable()?i=function(){var e=[];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);r.callWinJS("logger","log",{args:e},!0)}:i=function(){var e=[];for(var t=0;t<arguments.length;t++){var n=arguments[t];n!=null&&(a(n)?console&&console.log&&console.log(n.message,"\n",u(n.stack)):e.push(n))}console&&console.log&&console.log(e.join(e," "))},window&&(window.logger=i);var o,u=function(e,t,n){if(Array.isArray(e))return e;var r=window.$sm;if(!r)return e;!o&&r&&r.baseLocation()&&(o={r1:new RegExp(r.baseLocation().withPath,"g"),r2:new RegExp(r.baseLocation().requirePath,"g")}),t=t==null?5:t;if(e){var i=e.split&&e.split("\n")||e,s;i.length>0&&i.forEach(function(e){var t=e.lastIndexOf(".js");if(t>0){var n=e.lastIndexOf("/",t);t>0&&(s||(s=[]),s.push(e.substring(n)))}}),!s&&o?e=o?e.replace(o.r1,"").replace(o.r2,""):e:e=s.join("\n")}else e="";return e=e.split("\n"),e.length>t&&(e=e.splice(0,t).join(n?"<br>&nbsp&nbsp&nbsp&nbsp&nbsp":"\n")),e},a=function(e){return e&&Error.prototype.toString===e.toString};t.log=i,t.getLogger=s,t.cleanStack=u,t.isError=a}),define("syracuse-tablet/html/js/helpers/globals",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("globals"),i=new Object,s={},o=function(e,t){return e==null||!e.__proto__?!1:e.__proto__===i.__proto__?!1:e.__proto__.constructor?e._$smclass&&e._$smclass.indexOf(t)>=0?!0:s[t]&&e.__proto__.constructor===s[t]?(e._$smclass||(e._$smclass=[]),e._$smclass.push(t),!0):o(e.__proto__,t):!1},u=function(e,t){return o(e,t)},a=function(e,t){s[t]=e},f={$user:"none",$role:"none",$lang:"none"},l={application:null,userCtx:null,isTestEnvironment:!1,baseLocation:null,isDvlpMode:!1,isOffLineMode:!1,storage:null,cache:null,modal:null,cacheCtx:$.extend({},f),lookAndFeel:"windows",userProfile:{},validApplications:{}},c=function(e){r&&r("Set user context");var t=e==null?$.extend({},f):e;return l.cache.setContext(t),l.cacheCtx=t,l.userCtx=t},h=function(e){if(!e)throw new Error("Bad application description");return r&&r("Set application description"),l.application=e,e},p=function(e,t,n,r){l.isOffLineMode=!1,l.isDvlpMode=e;var i=l.baseLocation={};i.host=window.location.protocol+"//"+window.location.host;var s=window.location.pathname.split("/").splice(0,2).join("/");i.withPath=i.host+s,i.requirePath=i.host+"/requireJS"+s,i.htmlRoot=i.withPath+"/html",r&&(i.query=r.parseQueryString()),l.isTestEnvironment=window.location.href.indexOf("/syracuse-tablet/test/index.html")>-1,l.storage=t,l.cache=n};t.isOffLineMode=function(){return l.isOffLineMode},t.baseLocation=function(){return l.baseLocation},t.isDvlpMode=function(){return l.isDvlpMode},t.isTestEnvironment=function(){return l.isTestEnvironment},t.getApplication=function(){return l.application},t.getUserCtx=function(){return l.userCtx},t.getGlobalCtx=function(){return l},t.getStorage=function(){return l.storage},t.getCache=function(){return l.cache},t.getCacheCtx=function(){return l.cacheCtx},t.getEmptyCacheCtx=function(){return f},t.getEndpoint=function(){var e=l.endpoint;return e},t.setEndpoint=function(e){l.endpoint=e},t.$config=function(e){return l.application.$config(e)},t.setLookAndFeel=function(e){l.lookAndFeel=e},t.getLookAndFeel=function(){return l.lookAndFeel},t.setUserProfile=function(e){l.userProfile=e},t.getUserProfile=function(){return l.userProfile},t.getDeviceSize=function(e){return e?"Md":"md"},t.setModal=function(e){l.modal=e},t.getModal=function(){return l.modal},t.setValidApplications=function(e){l.validApplications=e},t.getValidApplications=function(){return l.validApplications},t.getHomeDashboard=function(){l.application.dao.getHomeDashboard()},t.getPrototype=function(e){return l.application.dao.getPrototype(e)},t.registerAdditionalPage=function(e,t,n){return l.application.dao.registerAdditionalPage(e,t,n)},t.getCurrentPage=function(e){return l.application.currentPage},t.setApplication=h,t.setUserCtx=c,t.smInstanceOf=u,t.registerClass=a,t.init=p,window&&(window.$sm=t)}),define("syracuse-tablet/html/js/helpers/notifications",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("notifs"),i=e("syracuse-tablet/html/js/helpers/globals"),s="sm",o={},u=function(e){throw r&&r("Error",e),typeof e=="string"?new Error("Notification - "+e):e},a=function(e,t,n){return setTimeout(function(){e.apply(t,n)},0)},f=function(e){try{if(!e)throw new Error("No topic to publish");var e=typeof e=="string"?[e]:e;r&&r("Publish "+e.join(" - "));var t,n,n,i,s=0,f,l,t=arguments;e.forEach(function(e){f=o[e];if(f){f=f.slice();for(var r=0,u=f.length;r<u;r++)n=f[r],n.object?(l||(l=Array.prototype.slice.call(t,1)),i=a(n.callBack,n.object,l)):(t[0]=e,i=a(n.callBack,null,t)),s++}})}catch(c){u(c)}},l=function(e,t,n){t||u("No topic to publish"),e||u("Null object"),n=n||10;var t=typeof t=="string"?[t]:t;r&&r("Subscribe "+t.join(" - ")+" - priority="+n),t.forEach(function(t){var r,i;if(typeof e=="function")r=e,i=null;else{i=e;var a=t.split(".");a[0]!=s&&u("Bad event domain name"),a=$.camelCase("notif-"+a.splice(1).join("-")),r=e[a],r||u("Object must implement "+a)}var f=!1;o[t]||(o[t]=[]);var l={callBack:r,object:i,priority:n};for(var c=o[t].length-1;c>=0;c--)if(o[t][c].priority<=n){o[t].splice(c+1,0,l),f=!0;break}f||o[t].unshift(l)})},c=function(e,t){t?typeof t=="string"&&(t=[t]):t=Object.keys(o);var n=typeof e=="function"?"callBack":"object";t.forEach(function(t){var r=o[t];if(r)for(var i=0,s=r.length;i<s;i++)if(e==null||r[i][n]===e)r.splice(i,1),i--,s--})},h=function(e,t){r&&r("Reset"),c(null,null)},p=function(e){var t={},n=typeof e=="function"?"callBack":"object";return Object.keys(o).forEach(function(r){if(e==null)t[r]=o[r].length;else{t[r]=0;var i=o[r];for(var s=0,u=i.length;s<u;s++)i[s][n]===e&&(t[r]=t[r]+1)}}),t},d=function(e,t){try{if(!e)throw new Error("Unexpected empty event");if(typeof e!="string")throw new Error("Strinf event expected");r&&r("PageNotify "+e);var n;t!==null&&i.smInstanceOf(t,"page")?n=Array.prototype.slice.call(arguments,2):(t=i.getCurrentPage(),n=Array.prototype.slice.call(arguments,1));if(!t)throw new Error("Unexpected null page");var s=o[e];if(s)for(var f=0,l=s.length;f<l;f++)if(s[f].object===t)return a(s[f].callBack,t,n)}catch(c){u(c)}};t.check=p,t.reset=h,t.subscribe=l,t.unsubscribe=c,t.publish=f,t.pageNotify=d}),define("syracuse-tablet/html/js/helpers/utils",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger"),i=r.log,s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=function(e,t,n){function r(e,t){for(var n in t||{}){var r=t[n];typeof r.get=="function"||typeof r.set=="function"?Object.defineProperty(e,n,r):e[n]=r}}return t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e,r(e.prototype,n),e},a=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},f=function(){var e=new Date,t=[e.getFullYear(),4,e.getMonth()+1,2,e.getDate(),2,e.getHours(),2,e.getMinutes(),2,e.getSeconds(),2],n;for(var r=0;r<t.length;r+=2){var i=""+t[r];while(i.length<t[r+1])i="0"+i;n?n+="-"+i:n=i}return n},l=0,c=function(e){return e.replace(/([^\w-_])/g,"_")},h=0,p=function(){return c($.camelCase((arguments.length>0?Array.prototype.join.call(arguments,"-")+"-":"")+h++))},d=["message","stack","lineNumber","fileName","columnNumber"],v=function(e,t){if(e==null)return t;if(r.isError(e))return t=t||{},d.forEach(function(n){t[n]=n==="fileName"?r.cleanStack(e[n]).join(""):n==="stack"?r.cleanStack(e[n]):e[n]}),t;if(Array.isArray(e))return e;if($.isPlainObject(e)){t=t||{};for(var n in e)t[n]=v(e[n]);return t}return typeof e!="object"?e:"non-js object"},m=function(e,t,n){return t||(t={$diagnoses:[]}),e?(typeof e=="string"&&(e={message:e}),Array.isArray(e)||(e=[e]),e.forEach(function(e){var i;r.isError(e)?i={exception:e}:i=v(e),i.exception&&(i.message=(i.message?i.message+(n?"<br>":"\n"):"")+i.exception.message,i.exception.stack&&(i.stackTrace=r.cleanStack(i.exception.stack,null,n)),delete i.exception),i.severity||(i.severity="error"),i.message||(i.message=""),t.$diagnoses.push(i)}),t):t},g={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","querystring","anchor"],q:{name:"query",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},y=function(e){var t=g,n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=decodeURIComponent(i))}),r},b=/([^&=;]*)=?([^&;]*)/g,w=function(e){e=e||window.location.search;var t={},e=decodeURIComponent(e),n=e.indexOf("?");return n>=0&&(e=e.substring(n+1)),e.replace(b,function(e,n,r){n&&n.length>0&&(t[n]=decodeURIComponent(r))}),t},E=function(e){return $("<div/>").text(e).html()},S=function(e){return $("<div/>").html(e).text()},x=function(e,t){i&&i(e),i&&i(t),r.isError(t)?alert(e+"\n"+(t?t.message+"\n\n"+r.cleanStack(t.stack):"No error")):alert(e+"\n"+(t?JSON.stringify(v(t),null,2):"No error"))},T=function(e){if(e==null)return;e.jquery&&(e.unbind(),e.undelegate(),e.off(),e.remove(),e.smPageRemoveController&&e.smPageRemoveController()),o.unsubscribe(e)},N=/\{(.*?)\}/g,C=function(e,t,n,r){r=r||0,e=(e||"")+"";if(r===0&&e.indexOf("{")<0&&t){var i=t.getValue?t.getValue(e):t[e];return i==null?"":i}var s=null,o=e.replace(N,function(e,i){var s=t==null?null:t.getValue?t.getValue(i):t[i];return s!=null?s:n?i.smStartsWith("@")?n.localization(i):(s=n.data(i,t),s!=null&&s.indexOf("{")>=0?C(s,t,n,r+1):s==null?"":s):""});return o||""};t.isOnline=function(){return navigator.onLine};var k=function(e){return e+="",e.indexOf("{")>=0?e.slice(1,e.length-1):e},L=function(e,t,n){if(t==null||e==null)return null;if(n&&n._cachePath&&n._cachePath[t]!=null)return n._cachePath[t];Array.isArray(t)||(t=t.split("."));var r=e[t[0]];for(var i=1;i<t.length;i++){if(r==null)return null;if(!$.isPlainObject(r)==null)throw new Error("_getPropByPath - Unexpected non-plainobject");r=r[t[i]]}return n&&(n._cachePath||(n._cachePath={}),n._cachePath[t]=r),r},A=function(e,t,n){var r=s.getApplication();if(r)return s.getApplication().modalError(e,t,n);x(e,t)};t.extractCode=k,t.UUID=a,t.defineClass=u,t.readableuid=p,t.domId=c,t.toDiagnose=m,t.parseQueryString=w,t.parseURL=y,t.htmlEncode=E,t.alertError=x,t.getCurISODateTime=f,t.unbindObj=T,t.parseExpression=function(e,t,n){return C(e,t,n,0)},t.isError=r.isError,t.cleanStack=r.cleanStack,t.modalError=A,t.getPropByPath=L}),define("syracuse-tablet/html/js/ui/uiUtils",["require","exports","module"],function(e,t,n){var r=function(e){if(e)while(e.firstChild)e.removeChild(e.firstChild)},i=function(e,t,n){if(e){var r=e.className;n?r.indexOf(t)<0&&(e.className=r+(" "+t)):e.className=r.replace(t,"")}},s={className:"waiting-circles",elements:8,radius:30,auto:!0},o=null,u=function(e,t){e==null&&(o==null&&(o=a($(document.body))),e=o),t?(e.$$bckg.show(),l(e.$$wheel,"enable")):(e.$$bckg.hide(),l(e.$$wheel,"disable"))},a=function(e,t){var n={$$bckg:$('<div class="waiting-background" style="display:none;z-index:2000"></div>'),$$wheel:$('<div class="waiting-wheel"  style="display:none;z-index:2000"></div>')};return n.$$bckg.appendTo(e),n.$$wheel.appendTo(e),c(n.$$wheel,s),n},f=function(e){e&&e.data("waiting")&&(e.waiting("destroy"),e.remove())},l=function(e,t){e&&e.data("waiting")&&(e.waiting(t),e[t==="disable"?"hide":"show"]())},c=function(e,t){if(!t)throw new Error("opts is mandatory");return e&&e.waiting(t),e},h=function(e){e&&(f(e.$$wheel),e.$$bckg&&e.$$bckg.remove())},p=function(e,t,n,r,i){if(!e)throw new Error("tag parameter is necessary !");var s=document.createElement(e);if(t)if($.isArray(t))$.each(t,function(e,n){s.className+=n+(e==t.length-1?"":" ")});else{if(typeof t!="string")throw new Error("classList parameter must be an array or a string");s.className+=t}return s.textContent=n?n:"",r&&$.each(r,function(e,t){s.setAttribute(e,t)}),i&&(i.jquery?i=i.append(s):i.appendChild(s)),s},d=function(e,t){if(!e)return;var n=document.createTextNode(t||"");return e.jquery?e=e.append(n):e.appendChild(n),e},v=function(e,t){$.each(e,function(e,n){var r=p(e,n.classList,n.textContent,n.attr,t);n.children&&$.each(n.children,function(e,t){v(t,r)})})};t.empty=r,t.toggleClass=i,t.waitWheelStart=function(e){u(e,!0)},t.waitWheelStop=function(e){u(e,!1)},t.waitWheelCreate=a,t.waitWheelDestroy=h,t.waitPluginDestroy=f,t.waitPluginCreate=c,t.waitPluginDisable=function(e){l(e,"disable")},t.waitPluginEnable=function(e){l(e,"enable")},t.createDomElement=p,t.buildDom=v,t.appendTextNode=d}),define("syracuse-tablet/html/js/ajax/ajaxInterface",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){function o(){}var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("ajax"),i=e("syracuse-tablet/html/js/helpers/utils"),s=e("syracuse-tablet/html/js/helpers/globals"),u={200:"Ok",201:"Created",400:"Bad Request",401:"Unauthenticated",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request URI Too Long",415:"Unsupported Media Type",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"},a=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,f=i.defineClass(o,null,{ajax:function(e,t,n,i,o){var f=$.Deferred();try{e=e?e.toUpperCase():"GET";if(e==="GET"&&n){t.indexOf("?")===-1&&(t+="?");var l=[];for(var c in n)n[c]!=null&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(n[c].toString()));t+=l.join("&")}o=o||{};var h=function(){try{var l={Accept:"application/json;vnd.sage=syracuse"};i&&$.extend(l,i);var c={headers:l,type:e,url:t,timeout:o.timeout==null?0:o.timeout};if(["PUT","POST"].indexOf(e)>=0&&n!=null){c.contentType=o.contentType||"application/json;charset=utf-8";if(c.contentType.indexOf("application/json")>=0&&typeof n=="object")try{n=JSON.stringify(n)}catch(h){throw new Error("Error parsing send data\nurl: "+t)}c.data=n}var p=l.Accept.indexOf("application/json")>=0&&o.noJsonParsing!==!0;p&&(c.dataType="json"),r&&r("'"+e+"':"+t);var d=$.ajax_original||$.ajax,v=d(c);v.complete(function(e,t){try{var n=e.status!=null?e.status:t=="success"?200:500,r={textStatus:t,status:n,descrHttpStatus:u[n]||"unknown: "+n,isSuccess:n>=200&&n<300||n===304,headers:{}};p?r.responseJSON=e.responseJSON:r.responseText=e.responseText;var i,s=e.getAllResponseHeaders();if(s)while(i=a.exec(s))r.headers[i[1].toLowerCase()]=i[2]}catch(o){f.reject(o);return}f.resolve(r)})}catch(h){s.getModal().error("ajax.doAjax error",h,function(){f.resolve(h)})}finally{return v}};h()}catch(p){s.getModal().error("ajax error",p,function(){f.reject(p)})}finally{return f.promise()}}});t.AjaxInterfaceClass=f,t.init=function(e){e=e||{},$.ajaxSetup({timeout:e.timeout==null?2e4:e.timeout,async:!0})}}),define("syracuse-tablet/html/js/ajax/ajaxWinJS",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/winjs"],function(e,t,n){function o(){}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/winjs"),s,u=r.defineClass(o,null,{ajax:function(e,t,n,r,s){var o=$.Deferred();e=e||"GET";var u={Accept:"application/json;vnd.sage=syracuse"};r&&$.extend(u,r);var a={$method:e||"GET",$url:t,$send:n,$headers:u,$options:s};return i.callWinJS("winjsAjax","ajax",a).then(function(e){var t={status:e.$status,location:e.$headers&&e.$headers.location||""};e.$succeeded?o.resolve(e.$data,t):o.reject(e.$status,t)}).fail(function(e){o.reject(500,{})}),o.promise()}});t.AjaxInterfaceClass=u,t.init=function(){}}),define("syracuse-tablet/html/js/ajax/ajax",["require","exports","module","syracuse-tablet/html/js/helpers/winjs","syracuse-tablet/html/js/ajax/ajaxInterface","syracuse-tablet/html/js/ajax/ajaxWinJS"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/winjs"),i=e("syracuse-tablet/html/js/ajax/ajaxInterface"),s=e("syracuse-tablet/html/js/ajax/ajaxWinJS"),o;t.getAjax=function(){return o||(r.isAvailable()?o=new s.AjaxInterfaceClass:o=new i.AjaxInterfaceClass),o},t.init=function(){r.isAvailable()?s.init():i.init()}}),define("syracuse-tablet/html/js/helpers/locale",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ajax/ajax"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,s=null,o={},u="$datetimeInformation",a="$decimalInformation",f,l=/\{([\w-]+)\}/g,c="*",h={},p={},d=function(e,t){var n=o&&o[s];if(!n)return;var r=n[e]||"Resource key not found["+e+"]";return t&&(r=r.replace(l,function(e,n){var r=+n;return r>=0&&r<t.length?t[r]:"?"})),r},v=function(){var e=o&&o[s];if(!e)return;return e[u]},m=function(){var e=o&&o[s];if(!e)return;return e[a]},g=function(e,t){var n=new $.Deferred;f=t;var l=r.getUserCtx();c=l&&l.$user||"*",h=p[e]||{};var d=o&&o[e];if(d)s=e,n.resolve();else if(e===s)n.resolve();else{var v=i("GET","/syracuse-tablet/html/js/resources/strings-"+e+".json",null,null);y("/syracuse-tablet/html/js/resources","strings",e,"en").then(function(t){s=e,o[e]=t}).then(function(){return y("/syracuse-tablet/html/js/resources/locales","date",e,"en-GB")}).then(function(t){o[e][u]=t}).then(function(){return y("/syracuse-tablet/html/js/resources/locales","decimal",e,"en-GB")}).then(function(t){o[e][a]=t}).then(function(){n.resolve()}).fail(function(e){n.resolve()})}return n.promise()},y=function(e,t,n,r){function u(){if(o.length===0){var n=e+"/"+t+"-"+r+".json";i("GET",n,null,null).then(function(e){e&&e.responseJSON&&s.resolve(e.responseJSON),s.resolve({})}).fail(function(e){s.reject(e)})}else{var a=o.join("-"),n=e+"/"+t+"-"+a+".json";i("GET",n,null,null).then(function(e){e&&e.responseJSON?s.resolve(e.responseJSON):e.status===404?(o.pop(),u()):s.reject(e.textStatus+" - "+e.status)}).fail(function(e){s.reject(e)})}}var s=new $.Deferred,o=n.split("-");return u(),s.promise()},b=function(e,t){return!e||!s?!1:s===e?!0:t?!1:e.split("-")[0]===s};t.getDateFormat=function(){var e=v();return h.shortDate||e&&e.formatPatterns&&e.formatPatterns.shortDate||"dd/MM/yyyy"},t.getDateTimeFormat=function(){var e=v(),t=h.shortDate||e&&e.formatPatterns&&e.formatPatterns.shortDate||"dd/MM/yyyy",n=h.shortTime||e&&e.formatPatterns&&e.formatPatterns.shortTime||"HH:mm:ss";return t+" "+n},t.getTimeFormat=function(){var e=v();return h.longTime||e&&e.formatPatterns&&e.formatPatterns.longTime||"HH:mm:ss"},t.getTimeFormatShort=function(){var e=v();return h.shortTime||e&&e.formatPatterns&&e.formatPatterns.shortTime||"HH:mm"},t.getNumberFormat=function(e){return e==="application/x-integer"?"#,##0":"#,##0.##"},t.getNumberGroupSeparator=function(){var e=m(),t=h.numberGroupSeparator||e&&e.numberGroupSeparator||",";return t},t.getNumberDecimalSeparator=function(){var e=m(),t=h.numberDecimalSeparator||e&&e.numberDecimalSeparator||".";return t},t.setLocale=g,t.text=d,t.isCurrent=b,t.getDatetimeInfo=v,t.getCurrentLocale=function(){return s},t.getCurrentLocaleHash=function(){return s+"#"+c},t.setUserLocales=function(e){p={},e&&e.forEach(function(e){p[e.code]={shortDate:e.shortDate,shortTime:e.shortTime,longTime:e.longTime,numberDecimalSeparator:e.numberDecimalSeparator,numberGroupSeparator:e.numberGroupSeparator}})}}),define("syracuse-tablet/html/js/ui/modal",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/helpers/locale"),o=e("syracuse-tablet/html/js/helpers/logger").getLogger("ui"),u=e("syracuse-tablet/html/js/helpers/globals"),a=e("syracuse-tablet/html/js/helpers/notifications"),f={confirm:' 		<div class="modal fade" id="modal-confirm" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true"> 		    <div class="modal-dialog"> 		        <div class="modal-content"> 		            <div class="modal-header"> 		            <h4 class="modal-title" id="myModalLabel">{{title}}</h4> 		            </div> 		            <div class="modal-body"> 		            <div class="alert alert-warning" role="alert">{{message}}</div> 		            </div> 		            <div class="modal-footer"> 		                <button type="button" class="btn btn-default" data-action="yes">{{yes}}</button> 		                <button type="button" class="btn btn-default" data-action="no">{{no}}</button> 		        </div> 		    </div> 		  </div> 		</div>',error:' 		<div class="modal fade" id="modal-error" tabindex="-1" role="dialog"> 		    <div class="modal-dialog"> 				<div class="modal-content"> 				    <div class="modal-header"> 						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 				    	<h4 class="modal-title" id="myModalLabel">{{title}}</h4> 				    </div> 				    <div class="modal-body"> 				        <pre>{{body}}</pre> 				    </div> 				    <div class="modal-footer"> 				        <button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button> 					</div> 				</div> 			</div> 		</div>',info:'		<div class="modal fade" id="modal-info" tabindex="-1" role="dialog"> 		    <div class="modal-dialog"> 				<div class="modal-content"> 				    <div class="modal-header"> 						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 						<h4 class="modal-title" id="myModalLabel">{{title}}</h4> 				    </div> 				    <div class="modal-body"> 				       <pre>{{body}}</pre> 				    </div> 				    <div class="modal-footer"> 				        <button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button> 					</div> 				</div> 			</div> 		</div>',field:'		<div class="modal fade" id="modal-field" tabindex="-1" role="dialog"> 		    <div class="modal-dialog"> 				<div class="modal-content"> 				    <div class="modal-header"> 						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 						<h4 class="modal-title" id="myModalLabel">{{title}}</h4> 				    </div> 				    <div class="modal-body"> 				       {{{body}}} 				    </div> 				    <div class="modal-footer"> 				        <button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button> 					</div> 				</div> 			</div> 		</div>'},l=function(e,t){var n=e+"compiled",r=f[n];return r||(r=f[n]=Handlebars.compile(f[e])),r(t)},c=function(e,t,n){if(!e||arguments.length==0)return;try{var e=arguments[0],i=Array.prototype.slice.call(arguments,1);e.apply(null,i)}catch(s){r.alertError("Error calling modal callback",s)}},h=function(e,t,n){var i;return t==null?(t=r.toDiagnose({where:e}),i=JSON.stringify(t,null,2).replace(/\\n/g,"\n")):r.isError(t)?i=e+"\n\n"+t.message:typeof t=="string"?i=e+"\n\n"+t.message:(t.hasOwnProperty("where")||(t.where=e),t=r.toDiagnose(t),i=JSON.stringify(t,null,2).replace(/\\n/g,"\n")),o&&o("exports.displayError",i),g("error",{close:s.text("modal.btn.close"),title:s.text("modal.error.ttl"),body:i},n)},p=function(e,t,n){return g("info",{close:s.text("modal.btn.close"),title:e||"Warning",body:t},n)},d=function(e,t){return g("confirm",{title:s.text("modal.confirm.ttl"),message:s.text("modal.confirm.msg",[e]),yes:s.text("yes"),no:s.text("no")},function(e,n,r){t&&(e==="yes"||e==="no")&&c(t,"yes"===e)})},v=function(e,t){return g("confirm",{message:e,yes:s.text("yes"),no:s.text("no")},function(e,n,r){t&&(e==="yes"||e==="no")&&c(t,"yes"===e)})},m=function(e,t,n){return g("field",{close:s.text("modal.btn.close"),title:e||"Warning",body:t},n)},g=function(e,t,n){var r=l(e,t);return y(r,n)},y=function(e,t){i.waitWheelStop(),u.getApplication().currentPage&&u.getApplication().currentPage.waitWheelStop();var n=$(e).modal({keyboard:!1,backdrop:"static"}),r=$(window).height();$(".modal-body",n).css("max-height",r*.7);var s=!1;return n.on("shown.bs.modal",function(){try{c(t,"shown.bs.modal",n)}catch(e){alert("Modal open - call back error"+e.stack)}a.publish("sm.modal.open")}),n.on("hidden.bs.modal",function(){if(!s&&t)try{c(t,"hidden.bs.modal",n)}catch(e){alert("Modal close - call back error"+e.stack)}n.unbind(),n.remove(),a.publish("sm.modal.close")}),n.delegate("button[data-action]","click",function(e){var r=$(e.target),i=r.attr("data-action");i&&(s=!0,e.preventDefault(),e.stopPropagation(),c(t,i,n,r.attr("data-params"))),n.modal("hide")}),n};t.error=h,t.info=p,t.field=m,t.confirm=d,t.simpleConfirm=v,t.modal=y}),define("syracuse-tablet/html/js/init/initStyles",["require","exports","module","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){function i(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)}function s(){var e=/iphone|ipad|ipod|android|blackberry|mini|windows|palm/i.exec(navigator.userAgent.toLowerCase()),t={iphone:"ios",ipad:"ios",ipod:"ios",android:"android",windows:"windows"};return $.smUrlParam("forceLookAndFeel")||t[e||"windows"]||"windows"}function o(){return document.location.href.indexOf("index.html")>-1}var r=e("syracuse-tablet/html/js/helpers/globals");t.init=function(){var e=new $.Deferred,t=s(),n="./css/gen/"+t+(o()?".min":"")+".css";i(n);var u="./css/default.css";return i(u),e.resolve(),r.setLookAndFeel(t),e.promise()}}),define("syracuse-tablet/html/js/init/initLocale",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/locale");t.init=function(){var e="en_GB";return r.setLocale(e)}}),define("syracuse-tablet/html/js/application/appFactory",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("factory"),i=e("syracuse-tablet/html/js/helpers/globals"),s={Application:function(){throw new Error("Not implemented")},DashoardPage:function(){throw new Error("Not implemented")},RegularPage:function(){throw new Error("Not implemented")},RowDetailPage:function(){throw new Error("Not implemented")},LookupPage:function(){throw new Error("Not implemented")},LoginPage:function(){throw new Error("Not implemented")},SettingsPage:function(){throw new Error("Not implemented")},AboutPage:function(){throw new Error("Not implemented")},DaoApp:function(){throw new Error("Not implemented")},DaoSdata:function(){throw new Error("Not implemented")}},o=function(e){var n=new s.Application(e,t);return n.init(),r&&r("Application","Create ok"),n},u=function(e,t){var n=null,o=t.type,u=$.Deferred();try{if(o==="html"&&t.name==="login")n=new s.LoginPage(e,t);else if(o=="html"&&t.name==="settings")n=new s.SettingsPage(e,t);else if(o==="html"&&t.name==="about")n=new s.AboutPage(e,t);else if(o==="dashboard")i.getApplication().dao.getDashboardInfo(t.dashboardUuid).then(function(r){n=new s.DashoardPage(e,t,r.prototype,r.article),u.resolve(n)}).fail(function(e){u.reject(e)});else{if(o!=="regular"&&o!=="rowdetail")throw new Error("Unknown page type["+o+"]");i.getApplication().dao.getRegularPageInfo(t).then(function(r){r.prototype.isLookup()?n=new s.LookupPage(e,t,r.prototype,r.article):o==="rowdetail"?n=new s.RowDetailPage(e,t,r.prototype,r.article):n=new s.RegularPage(e,t,r.prototype,r.article),u.resolve(n)}).fail(function(e){u.reject(e)})}n&&u.resolve(n),r&&r("New Page","Create ok")}catch(a){u.reject(a)}finally{return u.promise()}},a=function(e){var t=new s.DaoApp(e);return r&&r("New DAO Application","Create ok"),t},f=function(e,t,n,i,o){var u;switch(e){case"representation":case"process":case"request":case"statistics":case"dashboardpage":case"externallink":u=new s.DaoSdata(t,n,i,o);break;default:throw new Error("Unknown DaoSdata type["+e+"]")}return r&&r("New DAO View","Create ok"),u};t.setImpl=function(e,t){s[e]=t},t.createApplication=o,t.createPage=u,t.createDaoApp=a,t.createDaoSdata=f}),define("syracuse-tablet/html/js/application/breadcrumb",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").log,i=function(){var e=this;e.historyLength=window.history.length,e.destroy=function(){},e.getHistory=function(e){var t=[];window.$sm.getApplication.$elmt.find(".page.breadcrumb").each(function(e){var n=$(this).smPageController();n&&t.push({title:n.historyTitle,historyLength:n.historyLength})})},e.display=function(){var t="";e.getHistory().forEach(function(e,n){t.push("["+n+"] - title: "+e.title+" - historyLength:"+e.historyLength)}),alert(t)}};t.BreadCrumb=i}),define("syracuse-tablet/html/js/application/authentication",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ajax/ajax"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("app"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,o={svcCheckLogin:"/requireJS/tabletCheckLogin",svcDoLogin:"/requireJS/tabletDoLogin",svcLogout:"/logout",authParams:"/sdata/syracuse/collaboration/syracuse/userProfiles/$service/current"},u=function(){var e=new $.Deferred,t=function(t,n){r&&r(n||"Check login request rejected",t),e.reject(t)};try{var n=i.baseLocation().host+o.authParams;return s("GET",o.svcCheckLogin,{checkurl:n}).then(function(t){e.resolve({authenticated:t.status===200})}).fail(function(e){t(e)})}catch(u){t(u,"Check login request exception")}finally{return e.promise()}},a=function(e,t,n){var u=new $.Deferred,a=function(e,t){r&&r(t||"Login request rejected",e),u.reject(e)};try{var f=i.baseLocation().host+o.authParams;return s("GET",o.svcDoLogin,{checkurl:f,user:e,password:t,lang:n}).then(function(e){u.resolve(e.isSuccess,e.responseJSON,"Httpstatus: "+e.status+(e.descrHttpStatus?"["+e.descrHttpStatus+"]":""))}).fail(function(e){a(e)})}catch(l){a(l,"Do login request exception")}finally{return u.promise()}},f=function(){var e=new $.Deferred,t=function(t,n){r&&r(n||"Logout request rejected",t),e.reject(t)};try{var n=i.baseLocation().host+o.svcLogout;return s("GET",n,{device:"phone"}).then(function(t){var n,r="";t.isSuccess||(r="Httpstatus: "+t.status+(t.descrHttpStatus?"["+t.descrHttpStatus+"]":""));var i=t.responseJSON?t.responseJSON.$diagnoses:null;i&&i.forEach(function(e){r+=(r.lengthj>0?"\n":"")+e.$message}),e.resolve(t.isSuccess,r)}).fail(function(e){t(e)})}catch(u){t(u,"Do logout request exception")}finally{return e.promise()}};t.check=u,t.login=a,t.logout=f}),define("syracuse-tablet/html/js/application/eventListener",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("evts"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/ui/modal"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=function(e,t,n){var r=(e.attr(t)||"").trim();return n&&r.length===0?null:r},a=function(e,t,n){if(t.currentPage.getType()==="dashboard"){var r=u(e.closest(".s-m-control.s-m-vignette"),"id");if(n&&r.length===0)throw new Error("Vignette DOM elmt not found");var i=t.currentPage.getControl(r);if(n&&!i)throw new Error("Vignette not found - id["+r+"]");return i}if(n)throw new Error("Current page is not a dashboard");return null},f=function(e,t,n){var r=a(e,t,!0),i=r.getPageControl(n);return i?{control:i,vignette:r}:null},l=function(e){var t=e.split("&"),n={};for(var r=0;r<t.length;r++){var i=t[r].split("=");n[i[0]]=i[1]}return n},c=function(e,t,n,o,u){var l=function(e){var t="_doAction["+n+"]"+(u?" CtrlId["+u+"]":"")+" error";r&&r(t,e),s.error(t,e)};try{if(t.currentPage==null)throw new Error("No current page");var c="_act"+$.camelCase("-"+n),h;if(u){h=t.currentPage.getControl(u),h==null&&t.currentPage.getType()==="dashboard"&&(h=f(e,t,u),h&&(h=h.control));if(h==null)throw new Error("Control not found")}else{var p=a(e,t,!1);if(p)if(p[c])h=p;else{var d=p.getPage();d&&d[c]&&(h=d)}h==null&&t.currentPage[c]&&(h=t.currentPage),h==null&&(h=t)}if(!h[c])throw new Error("Method ["+c+"] not found in object/application/current page)");o?(o=o.split(","),o.forEach(function(e,t){o[t]=e.trim()})):o=[],$.when(h[c].apply(h,o)).then(function(e){e&&e.page&&i.getApplication().changePage(e.page)}).fail(function(e){l(e)})}catch(v){l(v)}},h=function(e){var t=function(e){var t="_bindActions error";r&&r(t,e),s.error(t,e)},n=e.$$elmt;if(!n)throw new Error("_bindActions - null $$elmt");n.delegate("[data-nav], [data-nav-refresh], [data-action]","click select change",function(n){try{if(e.hasModalOpen()){console.log("!!! Tries to execute an action data-action with a MODAL open.\nAction is skipped");return}var r=$(n.target);n.preventDefault(),n.stopPropagation();var i=r.closest("[data-nav], [data-nav-refresh]");if(i.length>0){var s={},f;f=u(i,"data-sdata-url"),f.length>0&&(s["sdata-url"]=decodeURIComponent(f)),f=u(i,"data-sdata-method"),f.length>0&&(s["sdata-method"]=decodeURIComponent(f)),f=u(i,"data-nav-type"),f.length>0&&(s.type=f),f=u(i,"data-parent-id"),f.length>0&&(s.parentId=f),f=u(i,"data-control-id"),f.length>0&&(s.controlId=f),f=u(i,"data-params"),f.length>0&&(s.dataParams=f),f=u(i,"data-nav-target");var h;f==="vignette"?h=a(r,e,!0):f!=="application"&&e.$config("openLinkInVignette")&&(h=a(r,e,!1)),h||(h=e);if(u(i,"data-nav-refresh")==="true")s.pageRefresh=!0,h.refreshPage(s);else if(f=u(i,"data-application-name"))o.publish("sm.switch.app",f);else{var p=decodeURIComponent(u(i,"data-nav"));f=u(i,"data-gadget-id"),f.length>0&&(s["gadget-id"]=f),f=u(i,"data-sdata-parameters"),f&&f.length>0&&(s.sdataParameters=l(f)),f=u(i,"data-nav-noback"),s.noHistoryBack=f==="true",h.changePage(p,s)}return}i=r.closest("[data-action]");if(i.length>0){n.preventDefault(),n.stopPropagation();var d;i.is("select")?d=$(this).val():d=decodeURIComponent(u(i,"data-params"));var v=u(i,"data-control-id",!0);c(r,e,u(i,"data-action"),d,v);return}}catch(m){t(m)}})},p=function(e){var t=function(e){var t="_bindControlEvents error";r&&r(t,e),s.error(t,e)},n=["click","blur","change"];n.forEach(function(n){e.$$elmt.delegate(".ctrl-evt-"+n,n,function(r){r.preventDefault(),r.stopPropagation();try{var i=$(r.target),s=u(i.hasClass("s-m-control")?i:i.closest(".s-m-control"),"id");if(!e.currentPage)throw new Error("No current page");var o=e.currentPage.getControl(s);!o&&e.currentPage.getType()==="dashboard"&&(o=f(i,e,s),o&&(o=o.control));if(!o)throw new Error("Control not found - ctrlid["+s+"] in currentpage or vignettes");var a="on"+n.smCapitalize();if(!o[a]){console.log("!!! Method["+a+"] not found - ctrlid["+s+"]");return}o[a](r)}catch(l){t(l)}return})})},d=function(e){$(window).bind("popstate",function(t){t.preventDefault();var n=t.originalEvent.state;r&&r("popstate","history.length="+window.history.length,"State="+(n!=null));if(!n)return;setTimeout(function(){e.back(n)},0)}),$(window).bind("hashchange",function(){r&&r("hashchange","history.length="+window.history.length,"Hash="+window.location.hash)}),h(e),p(e)},v=function(e,t,n,r){if(!e)return;c(e,i.getApplication(),t,n,r)};t.bindEvents=d,t.triggerAction=v}),define("syracuse-tablet/html/js/application/gadget",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/logger").getLogger("sdataDao"),s=e("syracuse-tablet/html/js/helpers/globals"),o=r.defineClass(function(e){var t=this;t._data=e},null,{destroy:function(){var e=this;e._data=null},isRequest:function(){return this._data.$type==="$request"},data:function(e){return this._data?this._data[e]:null},getEndPoint:function(){return this._data.endpoint||s.getEndpoint()},isDefaultEndpoint:function(){return!this._data.endpoint},getPageName:function(){var e=this;if(!e.isValid())return null;var t=e.isRequest()?e.getRequestRepresentation():e._data.representation;return e.getEndPoint()+"."+t+"."+e._data.facet},getSDataUrl:function(e){var t=this,n;switch(t._data.$type){case"$representation":["$details","$edit"].indexOf(t._data.action)>-1?n=e.data("$url",{$key:t._data.keyParameter}):["$create"].indexOf(t._data.action)>-1?(n=e.data("$url"),n=n.replace(/\((.*?)\)/,"/$template")):n=e.data("$url");break;case"$request":n=e.data("$baseUrl"),n=n+"/QUERY('"+t._data.requestName+"')?representation="+t.getRequestRepresentation()+".$query"}return n},getRequestRepresentation:function(){return"QUERY~"+this._data.requestName+"~"+this._data.requestLevel},getJSON:function(){return $.extend(!0,{},this._data)},isValid:function(){return this.getInvalidReason()==null},getInvalidReason:function(){var e=this._data.$type;return e==="$representation"||e==="$stats"||e==="$request"?this._data.$uuid.smStartsWith("test")?null:(this.getEndPoint()||"").trim().length==0?"No endpoint":null:null},getParameters:function(){return this._data.parameters||{}}});t.Klass=o}),define("syracuse-tablet/html/js/application/pageLoader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/application/gadget","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/logger").getLogger("pageLoader"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/ui/modal"),u=e("syracuse-tablet/html/js/application/gadget").Klass,a=e("syracuse-tablet/html/js/helpers/notifications"),f=r.defineClass(function(e){this.callerInterface=e,this.factory=s.getApplication().factory},null,{destroy:function(){this.callerInterface=null,this.factory=null},load:function(e,t){var n=$.Deferred(),r=this,s=function(t){r.waitStop(),r.loadingError(n,e,t)},o=function(i,s){r.waitStop(),t!==!0&&(e.options==null||e.options.noHistoryBack!==!0)&&r.setHistory(i.state),r.succeeded(i,s),n.resolve(i)};try{if(e===null||typeof e!="object")throw new Error("Bad state object");i&&i("_gotoPage","start","page: "+e.uuid);var u=r.getCurrentPage();if(u&&u.getProp("uuid")===e.uuid){i&&i("	Page is current -> Skip");return}var a=null,f=null;u&&u.isChild&&(a=u.getParentNotif()),r.waitStart();var l=$("#"+e.uuid).smPageController();if(l!=null){i&&i("	Page found in dom -> Activate");if(!l)throw new Error("Unexpected null page data");return r._pageActivate(l,function(){l.destroySiblings(),o(l,a)},t),n.promise()}r.factory.createPage(r.getRootElmt(),e).then(function(t){l=t;var n={};return e.type==="rowdetail"&&(n.parentPage=u),l.load(n)}).then(function(){r._pageActivate(l,function(){o(l,a)},t)}).fail(function(e){s(e)})}catch(c){s(c)}return n.promise()},_pageActivate:function(e,t,n){var r=this;e.activate(r.getCurrentPage(),function(){r.setCurrentPage(e),t&&t()})},setHistory:function(e){this.callerInterface.setHistory(e)},waitStop:function(){this.callerInterface.waitStop()},waitStart:function(){this.callerInterface.waitStart()},getRootElmt:function(){return this.callerInterface.getRootElmt()},getCurrentPage:function(){return this.callerInterface.getCurrentPage()},setCurrentPage:function(e,t){var n=this,r=n.getCurrentPage();r&&(t===!0||r.getProp("cached")!==!0&&e.isChild!==!0?r.destroy():r.deactivate()),n.callerInterface.setCurrentPage(e)},loadingError:function(e,t,n){this.callerInterface.loadingError?this.callerInterface.loadingError(e,t,n):o.error("Loading page ["+t.name+"] error",n,function(){e.reject(n)})},succeeded:function(e,t){var n=this;a.publish("sm.page.loaded",n.getCurrentPage()),this.callerInterface.succeeded&&this.callerInterface.succeeded(e,t)}}),l=function(e){return!e||!e.options||!e.options.gadget?e:(e.options.gadget=e.options.gadget.getJSON(),e)},c=function(e){return!e||!e.options||!e.options.gadget?e:(e.options.gadget=new u(e.options.gadget),e)};t.stateSerialize=l,t.stateDeserialize=c,t.Klass=f}),define("syracuse-tablet/html/js/helpers/templating",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ajax/ajax"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/logger").getLogger("tmpl"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,u={htmlHolder:"body",tmplPath:"templates",tmplExt:".tmpl"},a={},f=function(){var e=window.location.href.split("/");return e[e.length-1]=u.tmplPath+"/",e.join("/")}(),l=function(e,t,n){n=n||{};var i=$.Deferred();t=t||e;var l=r.domId(t);if(a[t])i.resolve(a[t]);else if($("#"+l).length>0)a[t]=$("#"+l).html(),i.resolve(a[t]);else{var c=f+e+u.tmplExt;s.isDvlpMode()&&(c+="?"+(new Date).getTime()),o("GET",c,null,{Accept:"text/html"}).then(function(e){try{var t=e.responseText||"";if(e.status===200){var r=$(u.htmlHolder);t.indexOf("<script")===-1?r.append($('<script id="'+l+'" type="text/x-handlebars-template">'+t+"</script>")):$(t).each(function(e,t){r.append(t)}),i.resolve($("#"+l).html())}else{if(n.failNotFound)throw new Error("Template not found status["+e.status+"]");i.resolve(null)}}catch(r){i.reject(r)}}).fail(function(e){i.reject(e)})}return i.promise()},c=function(e,t,n,r){var s=$.Deferred();return r=r||e,l(e,r,n).then(function(n){try{typeof n=="string"&&(n=Handlebars.compile(n),a[r]=n),s.resolve(n?n(t||{}):null)}catch(o){i&&i("!!!! Compileemplate  rejected",o),i&&i("filePath[#"+e+"]\n	tmplId[#"+r+"]\n	Ext ["+u.tmplExt+"]"),s.reject(o)}}).fail(function(t){i&&i("!!!! Read template rejected",t),i&&i("filePath[#"+e+"]\n	tmplId[#"+r+"]\n	Ext ["+u.tmplExt+"]"),s.reject(t)}),s.promise()},h=function(e,t){var n=a[e];return a[e]||(n=$("#"+r.domId(e)).html(),n&&(n=Handlebars.compile(n),a[e]=n)),n?n(t||{}):null},p=function(e){var t=[];e.forEach(function(e){t.push(c(e),{})}),$.when(t).always(function(t){var n=0;for(var s=0;s<arguments.length;s++)r.isError(arguments[s])||n++;i&&i("Templates preload","Count["+e.length+"]","NbOk["+(arguments.length-n)+"]","NbKo["+n+"]")})},d=function(e){if(!e||e.length==0)return;f=s.baseLocation().withPath,e.smStartsWith("/")||(f+="/"),f+=e,e.smEndsWith("/")||(f+="/"),f+=u.tmplPath+"/"},v=function(e){var t=e?"#"+r.domId(e):"script[type='text/x-handlebars-template']",n=$(u.htmlHolder).find(t).remove()},m=function(){s.isDvlpMode()&&v()};t.setTmplRoot=d,t.preload=p,t.remove=v,t.execSync=h,t.exec=c,t.init=m}),define("syracuse-tablet/html/js/pages/html/pageTemplates",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/templating","syracuse-tablet/html/js/ajax/ajax"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/logger").getLogger("page"),o=e("syracuse-tablet/html/js/helpers/templating"),u=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,a={tmplPage:"pages/",tmplDefHeader:"pages/default/header",tmplRoot:"templates/pages/",dataFile:"/data.json",tmplHead:"header",tmplMain:"main"},f={title:"Sage X3 Mobile",home:" Home",about:" About",logout:" Logout",settings:" Settings",application:""},l=function(e,t){var n=this,r=$.Deferred(),u=function(t){s&&s(e.name+"Template header error",t),r.resolve(null)};try{t==null&&r.resolve(null);var l=a.tmplPage+e.name+"/";o.exec(l+a.tmplHead,t,{failNotFound:!1}).then(function(e){e==null&&t!=null?(f.application=i.getApplication().getTitle(),o.exec(a.tmplDefHeader,f).then(function(e){r.resolve(e)}).fail(function(e){u("Error loading default page header")})):r.resolve(e)}).fail(function(e){u(e)})}catch(c){u(c)}finally{return r.promise()}},c=function(e,t){var n=this,r=$.Deferred();try{t==null&&r.resolve(null);var i=a.tmplPage+e.name+"/";o.exec(i+a.tmplMain,t).then(function(e){r.resolve(e)}).fail(function(t){p(r,e.name,t)})}catch(s){p(r,e.name,s)}finally{return r.promise()}},h=function(e){var t=$.Deferred(),n=i.baseLocation().htmlRoot+e.name+a.dataFile;return e.detailid&&(n=n.replace(".json","."+e.detailid+".json")),u("GET",n).then(function(e){t.resolve(e.status===200?e.responseJSON:null)}).fail(function(e){t.reject(e)}),t.promise()},p=function(e,t,n){var i='<div class="alert alert-danger" role="alert"> Error loading page  "'+t+'"</div>';n&&(i+="<p>Error</p><pre>"+JSON.stringify(r.toDiagnose(n,null,!0),null,2)+"</pre>"),e&&e.resolve(i)};t.getTemplateContent=c,t.getTemplateHeader=l,t.getData=h,t.resolveError=p}),define("syracuse-tablet/html/js/pages/html/modalSelectContext",["require","exports","module","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/ui/modal"),i=e("syracuse-tablet/html/js/helpers/locale"),s='	<div class="modal fade" id="modal-endpoint" tabindex="-1" role="dialog">     <div class="modal-dialog"> 		<div class="modal-content"> 		    <div class="modal-header"> 				<h4 class="modal-title" id="myModalLabel">{{title}}</h4> 		    </div> 		    <div class="modal-body"> 				<div class="form-group"> 					<label>{{label_endpoints}}</label>					<select class="form-control" id="login-select-endpoint"> 					{{#each endpoints}}						<option value="{{this.application}}.{{this.contract}}.{{this.dataset}}" {{#if this.selected}}selected{{/if}}>						{{this.description}}						</option>					{{/each}}					</select>				</div> 			<div class="form-group"> 				<label>{{label_roles}}</label>				<select class="form-control" id="login-select-role"> 				{{#each roles}}					<option value="{{this.code}}" {{#if this.selected}}selected{{/if}}>					{{this.description}}					</option>				{{/each}}				</select>			</div> 			<div class="form-group"> 				<label>{{label_languages}}</label>				<select class="form-control" id="login-select-language"> 				{{#each languages}}					<option value="{{this.code}}" {{#if this.selected}}selected{{/if}}>					{{this.description}}					</option>				{{/each}}				</select>			</div> 			{{#if label_warning}}			<div class="alert alert-warning" role="alert">				{{label_warning}}			</div>			{{/if}}		    </div> 		    <div class="modal-footer"> 				<button type="button" class="btn pull-left" data-action="logout">{{label_logout}}</button> 		        <button type="button" class="btn" data-action="validate">{{label_ok}}</button>     			<button type="button" class="btn btn-default" data-action="cancel">{{label_cancel}}</button> 			</div> 		</div> 	</div> 	</div>',o=function(e,t,n,o,u){var a=$.Deferred();try{try{var f=Handlebars.compile(s),l={title:i.text("modal.context.title"),label_endpoints:i.text("modal.context.endpoints"),endpoints:t,label_roles:i.text("modal.context.roles"),roles:n,label_languages:i.text("modal.context.languages"),languages:o,label_logout:i.text("modal.context.logout"),label_ok:i.text("modal.context.ok"),label_cancel:i.text("modal.context.cancel"),label_warning:u&&i.text("modal.context.warning")};e&&(t.forEach(function(t){t.application+"."+t.contract+"."+t.dataset===e.endpoint?t.selected=!0:t.selected=!1}),n.forEach(function(t){t.code===e.role?t.selected=!0:t.selected=!1}),o.forEach(function(t){t.code===e.language?t.selected=!0:t.selected=!1})),f=f(l),r.modal(f,function(e,t){var n=t.find("#login-select-endpoint").val(),r=t.find("#login-select-role").val(),i=t.find("#login-select-language").val();e==="validate"?a.resolve({action:"ok",endpoint:n,role:r,language:i}):e==="cancel"?a.resolve({action:"cancel",endpoint:n,role:r,language:i}):e==="logout"&&a.resolve({action:"logout"})})}catch(c){a.reject(c)}}catch(c){a.reject(c)}finally{return a.promise()}};t.selectContext=o}),define("syracuse-tablet/html/js/sdata/sdataUtils",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=/^(.*)\(\'(.*)\'\)$/i,s=function(e){var t=r.parseURL(e);if(t.query&&t.query.representation){t.representation=t.query.representation,t.facet=null;var n=t.representation.indexOf(".");n!=-1&&(t.facet=t.representation.substr(n+1),t.facet.charAt(0)=="$"&&(t.facet=t.facet.substr(1)),t.representation=t.representation.substr(0,n))}var s=t.directory.split("/");if(s.length<=4)throw new Error("Bad sdata url:"+e);t.dispatch=s[1],t.application=s[2],t.contract=s[3],t.dataset=s[4];if(s.length===4)return t;var o=i.exec(s[5]);return o&&o.length==3?(t.entity=o[1],t.id=o[2],t.id&&t.id.trim().Length===0&&(t.id=null)):(t.entity=s[5],t.id=null),s.length===5?t:t},o=function(e,t,n){var r=e;t&&(e=t.parseExpression(e));var i=s(e);if(i.query.representation||n===!0){var o=i.application+"."+i.contract+"."+i.dataset;return{page:o+(i.query.representation?"."+i.query.representation:""),sDataUrl:e}}if(i.entity==="$mobileDashboards")return{page:i.query.dashboard+".$mobileDashboard",parameters:i.query.parameters};throw new Error("getLinkInfo - Unexpected url"+e)},u=function(e,t){typeof e=="string"&&(e=o(e,t));if(e.type==="navig")return'data-nav="'+e.page+'" data-sdata-url="'+encodeURIComponent(e.sDataUrl)+'"';if(e.type==="act")return'data-action="'+e.action+'" data-params="'+encodeURIComponent(e.params||"")+'"';throw new Error("_getLinkAttrs - unknonwn type\n"+e.type)},a=function(e){return e.$stackTrace&&e.$stackTrace.indexOf("node_modulessyracuse-x3")>=0&&(e.$message&&e.$stackTrace.indexOf(e.$message)>=0?delete e.$stackTrace:e.$stackTrace=e.$stackTrace.split("\n")[0]),e},f=function(e){var t=[],n=[],r=function(i,s,o){o||(o=[]);if(!e)return null;if(n.indexOf(i)>=0)return;if(Array.isArray(i))n.push(i),s&&o.push(s),i.forEach(function(e,t){r(e,t+"",o)}),s&&o.pop(s);else if($.isPlainObject(i)){n.push(i);for(var u in i)u==="$diagnoses"?i[u].forEach(function(e){var n=[].concat(o);s&&n.push(s),u&&n.push(u),e=a($.extend({},e)),e.$path=n.join("."),t.push(e)}):(s&&o.push(s),r(i[u],u,o),s&&o.pop(s))}};return e?(r(e),t):null},l=function(e,t,n){n=n||{};var r=!0;t=t.value;var i=t.replace(/\{(\w*?)\}/g,function(e,t){var i=n[t];return i==null&&(r=!1),i!=null?i:""});return r&&(e=e+"&where="+i),e};t.parseSDataURL=s,t.getLinkInfo=o,t.getLinkAttrs=u,t.scanDiagnoses=f,t.addWhereClause=l}),define("syracuse-tablet/html/js/sdata/sdataHttp",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("sDataHttp"),i=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/helpers/locale"),u={noJsonParsing:!0},a=function(e){var t=$.Deferred(),e=e||{};e.options=$.extend(e.options||{},u),e.headers=e.headers||{},e.headers["Accept-Language"]=o.getCurrentLocale();try{r&&r("_httpSend - Begin - Method:"+e.method+"\n	"+e.url),i(e.method,e.url,e.send,e.headers,e.options).then(function(e){r&&r("_httpSend - End - status="+e.status+" - "+e.textStatus);var n=e.responseText?e.responseText.trim():"";n.length>0&&["{","["].indexOf(n.charAt(0))>=0?e.responseJSON=JSON.parse(n):e.responseJSON=null,t.resolve(e)}).fail(function(e){t.reject(e)})}catch(n){t.reject(n)}return t.promise()};t.fetchRemotePrototype=function(e){var t=$.Deferred(),n=this;try{var r=s.baseLocation(),u=e.split("."),a=u.slice(0,3).join("/"),f=u.slice(3,5).join("."),l=r.host+"/mobile1/"+a+"/$prototypes('"+f+"')",c={"Accept-Language":o.getCurrentLocale()};i("GET",l,null,c).then(function(n){if(!n.isSuccess){var r="Http error status["+n.status+"] reading prototype id ["+e+"]";throw n.responseJSON&&(r+="\n"+JSON.stringify(n.responseJSON,null,2)),new Error(r)}t.resolve(n.responseJSON)}).fail(function(e){t.reject(e)})}catch(h){t.reject(h)}finally{return t.promise()}},t.send=a}),define("syracuse-tablet/html/js/sdata/sdataCommonResources",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/sdata/sdataHttp","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){function d(e){function r(e){var o={method:"GET",url:e};o.parsedUrl=i.parseSDataURL(o.url),s.send(o).then(function(e){var i=e&&e.responseJSON;i&&i.$resources&&i.$resources.forEach(function(e){n.push(e)}),i&&i.$links&&i.$links.$next&&i.$links.$next.$url?r(i.$links.$next.$url):t.resolve(n)})}var t=$.Deferred(),n=[];return r(e),t.promise()}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/sdata/sdataHttp"),o=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,u=e("syracuse-tablet/html/js/helpers/utils"),a="/sdata/syracuse/collaboration/syracuse/mobileApplications/$service/availableApplications",f="/sdata/syracuse/collaboration/syracuse/localePreferences?representation=localePreference.$bulk",l="/sdata/syracuse/collaboration/syracuse/userProfiles/$service/current",c="/sdata/syracuse/collaboration/syracuse/endPoints?representation=endPoint.$bulk",h="/sdata/syracuse/collaboration/syracuse/roles?representation=role.$bulk",p=function(e,t,n){var r=e;r+="\nStatus: "+t.status+" - "+t.descrHttpStatus,n&&(r+="\n"+n);var s=i.scanDiagnoses(t.responseJSON);throw s&&(r+="\n\nDetails\n-------\n",s.forEach(function(e){e.$severity&&(r+=e.$severity+": "),e.$message&&(r+=e.$message+"\n"),e.$stackTrace&&(r+="Stack: "+e.$stackTrace+"\n")})),new Error(r)};t.queryMyApplications=function(){var e=$.Deferred(),t={method:"GET",url:a};return t.parsedUrl=i.parseSDataURL(t.url),s.send(t).then(function(n){if(n.isSuccess&&n.responseJSON){var r=n.responseJSON.$resources;e.resolve(r)}else p("Loading application list error",n,t.url)}).fail(function(t){e.reject(t)}),e.promise()},t.queryMyApplicationDetail=function(e){var t=$.Deferred(),n={method:"GET",url:e.$metaDataUrl};return n.parsedUrl=i.parseSDataURL(n.url),s.send(n).then(function(r){if(r.isSuccess&&r.responseJSON){var i=r.responseJSON;t.resolve(i)}else p("Error oading lapplication detail - Name: "+e.applicationName,r,n.url)}).fail(function(e){t.reject(e)}),t.promise()},t.getUserProfile=function(){var e=$.Deferred(),t={method:"GET",url:l};return t.parsedUrl=i.parseSDataURL(t.url),s.send(t).then(function(n){if(n.isSuccess&&n.responseJSON){var r=n.responseJSON;e.resolve(r)}else p("Loading user profile error",n,t.url)}).fail(function(t){e.reject(t)}),e.promise()},t.queryLocalePreferences=function(){return d(f).then(function(e){var t=[];return e.forEach(function(e){t.push({$uuid:e.$uuid,code:e.code,description:e.description})}),t})},t.queryEndpoints=function(){return d(c)},t.queryRoles=function(){return d(h)},t.updateUserProfile=function(e){function t(){return $.smResolve().then(function(){var e=u.UUID(),t={method:"POST",url:"/sdata/syracuse/collaboration/syracuse/userProfiles/$template/$workingCopies?representation=userProfile.$edit&role=&trackingId="+e};return t.parsedUrl=i.parseSDataURL(t.url),s.send(t).then(function(e){return e.isSuccess&&e.responseJSON?$.smResolve(e.responseJSON):$.smReject()})})}function n(t){return $.smResolve().then(function(){var n=$.extend({},t,e),r={method:"PUT",url:t.$url,send:n};return r.parsedUrl=i.parseSDataURL(r.url),s.send(r).then(function(e){return e.isSuccess&&e.responseJSON?$.smResolve(e.responseJSON):$.smReject()})})}function r(e){return $.smResolve().then(function(){var t={method:"DELETE",url:e.$url};return t.parsedUrl=i.parseSDataURL(t.url),s.send(t).then(function(e){return $.smResolve()})})}return t().then(function(e){return n(e)}).then(function(e){return r(e).always(function(){return $.smResolve()})})}}),define("syracuse-tablet/html/js/storage/localStorage",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("sessstorage"),i=null,s=function(){if(i!==null)return i;i=!1;try{window.localStorage.setItem("__test_availability__","__test_availability__"),i=!0}catch(e){}return i},o=function(e,t){if(!s()){r&&r("local.unsupported.getItem("+e+"):"+n);return}var n=window.localStorage.getItem(e);return r&&r("local.getItem("+e+"):"+n),!0===t&&a(e),n},u=function(e,t){if(!s()){console.log("local.unsupported.setItem("+e+"):"+t);return}return r&&r("local.setItem("+e+"):"+t),window.localStorage.setItem(e,t)},a=function(e){if(!s()){r&&r("local.unspported.removeItem("+e+")");return}return r&&r("local.removeItem("+e+")"),window.localStorage.removeItem(e)};t.removeItem=a,t.setItem=u,t.getItem=o}),define("syracuse-tablet/html/js/storage/storageInterface",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){function s(){this.infoString="Interface only"}function u(e,t,n,r,i){var s={$status:e};return t&&(s.$data=t),i&&(s.$metaData=i),n&&(s.$message=n),r&&(s.$exception=r),s}function a(e,t){return u(i.ERROR,null,e,t)}var r=e("syracuse-tablet/html/js/helpers/utils"),i={OK:1,NOT_FOUND:2,ERROR:3},o=r.defineClass(s,null,{getInfo:function(){return this.infoString},init:function(){throw new Error("Not implemented!")},query:function(e){throw new Error("Not implemented!")},put:function(e){throw new Error("Not implemented!")},read:function(e){throw new Error("Not implemented!")},remove:function(e){throw new Error("Not implemented!")},clearCollection:function(){throw new Error("Not implemented!")}});t.StorageInterface=o,t.StatusCodes=i,t.buildResult=u,t.buildErrResult=a,t.databaseName="sage-tablet-db"}),define("syracuse-tablet/html/js/storage/storageWinJS",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/helpers/winjs"],function(e,t,n){function u(){this.infoString="WinJS storage interface"}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/storage/storageInterface"),o=e("syracuse-tablet/html/js/helpers/winjs"),a=r.defineClass(u,s.StorageInterface,{init:function(){var e=i.isTestEnvironment();return o.callWinJS("winjsDB","init",{useTestDatabase:e})},queryAppConfigs:function(){return o.callWinJS("winjsDB","queryAppConfigs",{})},createAppConfig:function(e){return o.callWinJS("winjsDB","createAppConfig",{app:e})},readAppConfig:function(e){return o.callWinJS("winjsDB","readAppConfig",{appid:e})},deleteAppConfig:function(e){return o.callWinJS("winjsDB","deleteAppConfig",{appid:e})}});t.StorageInterface=a,t.isAvailable=function(){return o.isAvailable()}}),define("syracuse-tablet/html/js/storage/storageWebSQL",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){function f(){this.infoString="WebSQL storage interface",this.databaseVersion=u,this.databaseName=s.databaseName,this.useTestDatabase=!1,this.databaseSize=2097152,this.db=null}function c(e,t){return"CODE: "+t.code+" MESSAGE: "+t.message}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/storage/storageInterface"),o=e("syracuse-tablet/html/js/helpers/logger").getLogger("webSQL"),u=16,a=["DROP TABLE IF EXISTS sdata_meta","CREATE TABLE sdata_meta ( key text, collection text, endpoint text, context text, id text, etag text, last_read text, last_updated text)","DROP INDEX IF EXISTS sdata_meta_pk","CREATE UNIQUE INDEX sdata_meta_pk ON sdata_meta (key, collection, endpoint, context)","DROP INDEX IF EXISTS sdata_meta_id","CREATE UNIQUE INDEX sdata_meta_id ON sdata_meta (id)","DROP TABLE IF EXISTS sdata_objects","CREATE TABLE sdata_objects ( id text, data text )","DROP INDEX IF EXISTS sdata_objects_pk","CREATE UNIQUE INDEX sdata_objects_pk ON sdata_objects (id)"],l=r.defineClass(f,s.StorageInterface,{init:function(){var e=$.Deferred(),t=this,n=i.isTestEnvironment();t.databaseName=s.databaseName+"-test",t.useTestDatabase=n;try{t._openDB().then(function(t){e.resolve(t)}).fail(function(t){e.reject(t)})}catch(r){e.reject(s.buildErrResult("error initializing database",r))}finally{return e.promise()}},put:function(e){var t=$.Deferred(),n=this;try{var i=n.db;o&&o("PUT: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var u=JSON.stringify(e.$context),a=[e.$key,e.$collection,e.$endpoint,u],f=function(r){n._executeSql("INSERT INTO sdata_objects (data, id) values (?, ?)",[JSON.stringify(e.$data),r.$id]).then(function(){t.resolve(s.buildResult(s.StatusCodes.OK,e.$data))}).fail(function(e){t.reject(e)})},l=function(r){n._executeSql("UPDATE sdata_objects set data = ? where id = ?",[JSON.stringify(e.$data),r.$id]).then(function(n){t.resolve(s.buildResult(s.StatusCodes.OK,e.$data))}).fail(function(e){t.reject(e)})};n._readMetaData(u,a).then(function(i){i&&i.$etag===e.$data.$etag?t.resolve(s.buildResult(s.StatusCodes.OK,e.$data)):i?(i.$etag=e.$data.$etag,i.$lastUpdated=r.getCurISODateTime(),n._writeMetaData(i).then(function(){l(i)}).fail(function(e){t.reject(e)})):(i={$key:e.$key,$collection:e.$collection,$endpoint:e.$endpoint,$context:e.$context,$etag:e.$data.$etag,$lastUpdated:r.getCurISODateTime()},n._writeMetaData(i).then(function(e){f(e)}).fail(function(e){t.reject(e)}))}).fail(function(e){t.reject(e)})}catch(c){t.reject(s.buildErrResult("error writing to database",c))}finally{return t.promise()}},read:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("READ: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=JSON.stringify(e.$context),u=[e.$key,e.$collection,e.$endpoint,i];n._readMetaData(i,u).then(function(e){e?n._executeSql("SELECT * FROM sdata_objects where id = ?",[e.$id]).then(function(n){try{n.rows.length<=0?t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND)):t.resolve(s.buildResult(s.StatusCodes.OK,JSON.parse(n.rows.item(0).data),null,null,{$lastRead:e.$lastRead,$lastUpdated:e.$lastUpdated}))}catch(r){t.reject(s.buildErrResult("error reading from database",r))}}).fail(function(e){t.reject(e)}):t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND))}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error reading from database",a))}finally{return t.promise()}},query:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("QUERY: ",JSON.stringify(e));if(!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=JSON.stringify(e.$context),u=[e.$collection,e.$endpoint,i];n._executeSql("SELECT o.*, m.last_read, m.last_updated FROM sdata_objects o INNER JOIN sdata_meta m ON (o.id = m.id and m.collection = ? and m.endpoint = ? and m.context = ?)",u).then(function(e){var n=[],r=[];try{for(var i=0;i<e.rows.length;i++){var o=e.rows.item(i);n.push(JSON.parse(o.data)),r.push({$lastRead:o.last_read,$lastUpdated:o.last_updated})}}catch(u){t.reject(s.buildErrResult("error reading from database",u));return}t.resolve(s.buildResult(s.StatusCodes.OK,n,null,null,r))}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error reading from database",a))}finally{return t.promise()}},remove:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("REMOVE: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=JSON.stringify(e.$context),u=[e.$key,e.$collection,e.$endpoint,i];n._removeMetaData(i,u).then(function(e){e?n._executeSql("DELETE FROM sdata_objects where id = ?",[e.$id]).then(function(){t.resolve(s.buildResult(s.StatusCodes.OK))}).fail(function(e){t.reject(e)}):t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND))}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error writing to database",a))}finally{return t.promise()}},clearCollection:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("CLEAR: ",JSON.stringify(e));if(!e.$collection||!e.$context)throw new Error("Insufficient parameters");var i=JSON.stringify(e.$context),u=[i];n._executeSql("SELECT * FROM sdata_meta where context = ?",u).then(function(r){var i=[];try{for(var o=0;o<r.rows.length;o++){var u=r.rows.item(o);e.$collection.test(u.collection)&&i.push({$context:e.$context,$collection:u.collection,$endpoint:u.endpoint,$key:u.key})}i.forEachPromise(function(e){return n.remove(e)}).then(function(){t.resolve(s.buildResult(s.StatusCodes.OK))}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error reading from database",a))}}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error reading from database",a))}finally{return t.promise()}},_readMetaData:function(e,t,n){var r=$.Deferred(),i=this;try{var o=i.db;i._executeSql("SELECT * FROM sdata_meta where key = ? and collection = ? and endpoint = ? and context = ?",t).then(function(e){try{if(e.rows.length<=0)r.resolve(null);else{var t=e.rows.item(0),o={$key:t.key,$collection:t.collection,$endpoint:t.endpoint,$context:t.context,$id:t.id,$etag:t.etag,$lastRead:t.last_read,$lastUpdated:t.last_updated};n===!0?r.resolve(o):i._writeMetaData(o).then(function(){r.resolve(o)}).fail(function(e){r.reject(s.buildErrResult("error reading from database",e))})}}catch(u){r.reject(s.buildErrResult("error reading from database",u))}}).fail(function(e){r.reject(e)})}catch(u){r.reject(s.buildErrResult("error reading from database",u))}finally{return r.promise()}},_writeMetaData:function(e){var t=$.Deferred(),n=this;try{var i=n.db;e.$lastRead=r.getCurISODateTime(),e.$id?n._executeSql("UPDATE sdata_meta set etag = ?, last_read = ?, last_updated = ? where id = ?",[e.$etag,e.$lastRead,e.$lastUpdated,e.$id]).then(function(n){t.resolve(e)}).fail(function(e){t.reject(e)}):(e.$id=r.UUID(),n._executeSql("INSERT INTO sdata_meta (key, collection, endpoint, context, id, etag, last_read, last_updated) values (?, ?, ?, ?, ?, ?, ?, ?)",[e.$key,e.$collection,e.$endpoint,JSON.stringify(e.$context),e.$id,e.$etag,e.$lastRead,e.$lastUpdated]).then(function(){t.resolve(e)}).fail(function(e){t.reject(e)}))}catch(o){t.reject(s.buildErrResult("error writing meta data",o))}finally{return t.promise()}},_removeMetaData:function(e,t){var n=$.Deferred(),r=this;try{r._readMetaData(e,t,!0).then(function(e){e?r._executeSql("DELETE FROM sdata_meta where id = ?",[e.$id]).then(function(){n.resolve(e)}).fail(function(e){n.reject(e)}):n.resolve(null)}).fail(function(e){n.reject(e)})}catch(i){n.reject(s.buildErrResult("error reading from database",i))}finally{return n.promise()}},_executeSql:function(e,t){var n=$.Deferred(),r=this;try{r.db.transaction(function(r){try{o&&o("SQL: "+e),o&&o(t),r.executeSql(e,t,function(e,t){n.resolve(t)},function(e,t){n.reject(s.buildErrResult("error initializing database: "+c(e,t)))})}catch(i){n.reject(s.buildErrResult("error running SQL statement",i))}})}catch(i){n.reject(s.buildErrResult("error running SQL statement",i))}return n.promise()},_openDB:function(){var e=$.Deferred(),t=this;t.useTestDatabase===!1&&t.db&&e.resolve(s.buildResult(s.StatusCodes.OK));var n;try{o&&o("Open database, request version: "+t.databaseVersion),t.db=openDatabase(t.databaseName,7,"Database",t.databaseSize),t._readCurrentVersion().then(function(n){o&&o("Current version: "+n),n===t.databaseVersion&&t.useTestDatabase!==!0?e.resolve(s.buildResult(s.StatusCodes.OK)):t._createTables().then(function(e){return t._writeCurrentVersion()}).then(function(t){e.resolve(t)}).fail(function(t){e.reject(t)})}).fail(function(t){e.reject(t)})}catch(r){o&&o("Open database, exception",r),t.db=null,e.reject(s.buildErrResult("error initializing database",r))}return e.promise()},_readCurrentVersion:function(){var e=$.Deferred(),t=this;return t._executeSql("SELECT version FROM version",null).then(function(t){try{var n=t.rows.length;if(n===1){var r=t.rows.item(0).version;o&&o("Read version: "+r),e.resolve(+r)}e.resolve(-1)}catch(i){e.reject(s.buildErrResult("error reading database version",i))}}).fail(function(n){o&&o("Creating version table"),t._executeSql("CREATE TABLE version (version TEXT)").then(function(t){e.resolve(-1)}).fail(function(t){r.modalError("Error Creating version table",t,function(){e.reject(t)})})}),e.promise()},_writeCurrentVersion:function(){var e=$.Deferred(),t=this;return t._executeSql("DELETE FROM version",null).then(function(e){return t._executeSql("INSERT INTO version (version) values (?)",[u])}).then(function(t){e.resolve(s.buildResult(s.StatusCodes.OK))}).fail(function(t){e.reject(t)}),e.promise()},_createTables:function(){var e=$.Deferred(),t=this,n=[];for(var r=0;r<a.length;r++)n.push(t._executeSql(a[r]));return $.when.apply($,n).then(function(){e.resolve(s.buildResult(s.StatusCodes.OK))}).fail(function(t){e.reject(t)}),e.promise()}});t.StorageInterface=l,t.isAvailable=function(){return window.openDatabase!=null}}),define("syracuse-tablet/html/js/storage/storageIndexedDB",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){function v(){this.infoString="IndexedDB storage interface",this.databaseVersion=p,this.databaseName=s.databaseName,this.useTestDatabase=!1,this.db=null}function g(e){return JSON.stringify(e)}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/storage/storageInterface"),o=e("syracuse-tablet/html/js/helpers/logger").getLogger("indexedDB"),u=window.indexedDB||window.webkitIndexedDB,a=window.IDBTransaction||window.webkitIDBTransaction,f=window.IDBKeyRange||window.webkitIDBKeyRange,l=window.IDBDatabaseException||window.webkitIDBDatabaseException,c=a&&a.READ_ONLY||"readonly",h=a&&a.READ_WRITE||"readwrite",p=11,d={sdata:{options:{autoIncrement:!0},indexes:{read_write_one:{key:"key_collection_endpoint_context",options:{unique:!0}},read_write_all:{key:"collection_endpoint_context",options:{unique:!1}},read_write_ctx:{key:"context",options:{unique:!1}}}}},m=r.defineClass(v,s.StorageInterface,{init:function(e){e=e||"",o&&o("_INIT "+e);var t=$.Deferred(),n=this,r=i.isTestEnvironment();try{var a=function(){o&&o("DATABASE INIT!"),n._openDB().then(function(n){o&&o("_openDB OK "+e),t.resolve(n)}).fail(function(n){o&&o("_openDB KO "+e),t.resolve(n)})};if(r===!0){n.db&&(n.db.close(),n.db=null),n.useTestDatabase=!0,n.databaseName=s.databaseName+"-test",o&&o("DATABASE IN TEST MODE! "+e);var f=u.deleteDatabase(n.databaseName);f.onsuccess=function(){a()},f.onerror=function(n){o&&o("REQUEST ERROR! "+e),t.reject(s.buildErrResult("error deleting database"))},f.onblocked=function(n){o&&o("REQUEST BLOCKED! "+e),t.reject(s.buildErrResult("error deleting database (blocked)"))}}else n.db||a()}catch(l){o&&o("init ERROR "+e),t.reject(s.buildErrResult("error initializing database",l))}finally{return t.promise()}},put:function(e){var t=$.Deferred(),n=this;try{var i=n.db;o&&o("PUT: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var u=i.transaction(["sdata"],h),a=u.objectStore("sdata"),c=JSON.stringify(e.$context),p=[e.$key,e.$collection,e.$endpoint,c].join("_"),d=a.index("read_write_one"),v=f.only(p),m=d.openCursor(v),y=!0,b=r.getCurISODateTime(),w=function(){var n={context:c,collection:e.$collection,endpoint:e.$endpoint,key:e.$key,last_updated:b,last_read:b,key_collection_endpoint_context:p,collection_endpoint_context:[e.$collection,e.$endpoint,c].join("_"),data:e.$data},r=a.add(n);r.onerror=function(e){t.reject(s.buildErrResult("error writing to database: "+g(e)))},r.onsuccess=function(n){t.resolve(s.buildResult(s.StatusCodes.OK,e.$data))}};m.onsuccess=function(n){try{var r=n.target.result;if(r){if(e.$data.$etag){var i=r.value&&r.value.data.$etag;if(i===e.$data.$etag){t.resolve(s.buildResult(s.StatusCodes.OK,e.$data));return}}r["delete"](),r["continue"]()}else w()}catch(o){t.reject(s.buildErrResult("error writing to database",o))}},m.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?w():t.reject(s.buildErrResult("error writing to database: "+g(e)))}}catch(E){t.reject(s.buildErrResult("error writing to database",E))}finally{return t.promise()}},read:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("READ: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=r.transaction(["sdata"],h),u=i.objectStore("sdata"),a=JSON.stringify(e.$context),c=[e.$key,e.$collection,e.$endpoint,a].join("_"),p=u.index("read_write_one"),d=f.only(c),v=p.openCursor(d);v.onsuccess=function(e){try{var n=e.target&&e.target.result&&e.target.result.value;n?t.resolve(s.buildResult(s.StatusCodes.OK,n.data,null,null,{$lastRead:n.last_read,$lastUpdated:n.last_updated})):t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND))}catch(r){t.reject(s.buildErrResult("error reading from database",r))}},v.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND)):t.reject(s.buildErrResult("error reading from database: "+g(e)))}}catch(m){t.reject(s.buildErrResult("error reading from database",m))}finally{return t.promise()}},query:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("QUERY: ",JSON.stringify(e));if(!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=r.transaction(["sdata"],h),u=i.objectStore("sdata"),a=JSON.stringify(e.$context),c=[e.$collection,e.$endpoint,a].join("_"),p=u.index("read_write_all"),d=f.only(c),v=p.openCursor(d),m=[],y=[];v.onsuccess=function(e){try{var n=e.target.result;if(n){var r=n.value.data;m.push(r),y.push({$lastRead:n.last_read,$lastUpdated:n.last_updated}),n["continue"]()}else t.resolve(s.buildResult(s.StatusCodes.OK,m,null,null,y))}catch(i){t.reject(s.buildErrResult("error reading from database",i))}},v.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?t.resolve(s.buildResult(s.StatusCodes.OK,m,null,null,y)):t.reject(s.buildErrResult("error reading from database: "+g(e)))}}catch(b){t.reject(s.buildErrResult("error reading from database",b))}finally{return t.promise()}},remove:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("REMOVE: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=r.transaction(["sdata"],h),u=i.objectStore("sdata"),a=JSON.stringify(e.$context),c=[e.$key,e.$collection,e.$endpoint,a].join("_"),p=u.index("read_write_one"),d=f.only(c),v=p.openCursor(d);v.onsuccess=function(e){try{var n=e.target.result;n?(n["delete"](),t.resolve(s.buildResult(s.StatusCodes.OK))):t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND))}catch(r){t.reject(s.buildErrResult("error deleting from database",r))}},v.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND)):t.reject(s.buildErrResult("error reading from database: "+g(e)))}}catch(m){t.reject(s.buildErrResult("error deleting from database",m))}finally{return t.promise()}},clearCollection:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("CLEAR: ",JSON.stringify(e));var i=r.transaction(["sdata"],h),u=i.objectStore("sdata"),a=JSON.stringify(e.$context),c=a,p=u.index("read_write_ctx"),d=f.only(c),v=p.openCursor(d),m=[],y=function(){m.forEachPromise(function(t){return n.remove({$context:e.$context,$collection:t.collection,$endpoint:t.endpoint,$key:t.key})}).then(function(){t.resolve()}).fail(function(e){t.reject(e)})};v.onsuccess=function(n){try{var r=n.target.result;r?(e.$collection.test(r.value.collection)&&m.push(r.value),r["continue"]()):y()}catch(i){t.reject(s.buildErrResult("error reading from database",i))}},v.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?y():t.reject(s.buildErrResult("error reading from database: "+g(e)))}}catch(b){t.reject(s.buildErrResult("error reading from database",b))}finally{return t.promise()}},_openDB:function(){var e=$.Deferred(),t=this;t.useTestDatabase===!1&&t.db&&e.resolve(s.buildResult(s.StatusCodes.OK));var n;try{o&&o("Open database, request version: "+t.databaseVersion),n=u.open(t.databaseName,t.databaseVersion),n.onupgradeneeded=function(e){o&&o("Open database, need upgrade"),t.db=e.target.result||e.target.source,t._createObjectStore()},n.onsuccess=function(n){o&&o("Open database, success");var r=n.target.result||n.target.source;if(!r.setVersion&&t.databaseVersion!=r.version){o&&o("Open database, versions missmatch: "+t.DatabaseVersion+" != "+r.version);var i=r.setVersion(t.databaseVersion);i.onsuccess=function(n){o&&o("Open database, setting version, success"),t.db=r,t._createObjectStore(),o&&o("Open database, opened"),e.resolve(s.buildResult(s.StatusCodes.OK))},i.onerror=function(n){o&&o("Open database, setting version, error",n),t.db=null,e.reject(s.buildErrResult("error initializing database: "+g(n)))}}else o&&o("Open database, opened"),t.db=r,e.resolve(s.buildResult(s.StatusCodes.OK))},n.onerror=function(n){o&&o("Open database, error",n),t.db=null,e.reject(s.buildErrResult("error initializing database: "+g(n)))}}catch(r){o&&o("Open database, exception",r),t.db=null,e.reject(s.buildErrResult("error initializing database",r))}return e.promise()},_createObjectStore:function(){var e=this,t=e.db;o&&o("Updating database"),Object.keys(d).forEach(function(e){var n=d[e];t.objectStoreNames.contains(e)&&(o&&o("Deleting objectStore: "+e),t.deleteObjectStore(e)),o&&o("Creating objectStore: "+e);var r=t.createObjectStore(e,n.options);Object.keys(n.indexes).forEach(function(e){var t=n.indexes[e];o&&o("Creating index: "+e),r.createIndex(e,t.key,t.options)})})}});t.StorageInterface=m,t.isAvailable=function(){return u!=null}}),define("syracuse-tablet/html/js/storage/storage",["require","exports","module","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/storage/storageWinJS","syracuse-tablet/html/js/storage/storageWebSQL","syracuse-tablet/html/js/storage/storageIndexedDB"],function(e,t,n){function o(){return s?s:(i.some(function(e){if(e.isAvailable()){var t=e.StorageInterface;return s=new t,!0}return!1}),s)}var r=e("syracuse-tablet/html/js/storage/storageInterface"),i=[e("syracuse-tablet/html/js/storage/storageWinJS"),e("syracuse-tablet/html/js/storage/storageWebSQL"),e("syracuse-tablet/html/js/storage/storageIndexedDB")],s;t.getStorage=o,t.StatusCodes=r.StatusCodes}),define("syracuse-tablet/html/js/sdata/entities/clientContract",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){function a(e,t,n){var r={$page:{},$cache:{}};return f(e,t,n,r.$page),r}function f(e,t,n,r){if(t==="$query"||t==="$lookup")r.$prototype={$properties:{$resources:{$type:"application/x-array",$item:l(e,t)}}},r.$prototype.$url="{$baseUrl}/"+e+"?representation="+e+"."+t,r.$prototype.$properties.$resources.$item.$key="{$uuid}",r.$prototype.$properties.$resources.$item.$value=n.$value,r.$prototype.$properties.$resources.$item.$links={$details:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$details",$title:"Details"},$edit:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$edit",$title:"Edit"}},r.$prototype.$links={$create:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$create",$title:"Create New"}},r.$prototype.$key="{$uuid}";else{r.$prototype=l(e,t),r.$prototype.$url="{$baseUrl}/"+e+"('{$key}')?representation="+e+"."+t,r.$prototype.$key="{$uuid}",r.$prototype.$links={};var i={$edit:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$edit",$title:"Edit"},$query:{$url:"{$baseUrl}/"+e+"?representation="+e+".$query",$title:"List"},$save:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$save",$title:"Save"},$details:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$details",$title:"Detail"}};switch(t){case"$create":r.$prototype.$links.$save=i.$save,r.$prototype.$links.$query=i.$query;break;case"$details":r.$prototype.$links.$edit=i.$edit,r.$prototype.$links.$query=i.$query;break;case"$edit":r.$prototype.$links.$save=i.$save,r.$prototype.$links.$details=i.$details,r.$prototype.$links.$query=i.$query;break;default:throw new Error(t?"facet "+t+" not handled yet":"No facet specified")}}var s=n.$articles&&n.$articles[t];s&&(r.$article=s),r.$prototype.$baseUrl="http://localhost:8124/mobile1/x3/erp/local",n.$prototype&&n.$prototype(r.$prototype,e,t)}function l(e,t){var n=o[e],r={$properties:{}};return Object.keys(n.$properties).forEach(function(e){var t=n.$properties[e],i=t.$type||"application/x-string",s=r.$properties[e]={$type:i};for(var o=0;o<u.length;o++){var a=u[o],f=t[a];f&&(s[a]=f)}}),r}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/utils"),s={},o={},u=["$title","$isExcluded","$isHidden","$isMandatory","$isReadOnly","$isDisabled","$format","$x3Format","$unit","$value","$shortTitle","$capabilities","$item","$minimum","$maximum","$exclusiveMinimum","$exclusiveMaximum","$minItems","$maxItems","$isNullable","$isUnique","$pattern","$minLength","$maxLength","$precision","$scale","$enum"];t.getApps=function(){var e=[];return Object.keys(s).forEach(function(t){var n=s[t];e.push(n.$application)}),e},t.getAppDetail=function(e){return s[e]},t.registerApp=function(e){s[e.$application.applicationName]=e},t.registerEntity=function(e){o[e.$entityName]=e},t.getEntity=function(e){return o[e]},t.getPageInfo=function(e,t){var n=e.split(".");n.length===5&&(n=n.slice(3,5));if(n[0].smStartsWith("QUERY~")){var s=n[0].split("~");n[0]=s[1]}var u=o[n[0]];if(!u)return null;var a={home:!1,type:"regular",subtype:n[1]?n[1].substring(1):"unknown",cached:!1,refreshed:!1,appId:"root",changeHash:!1};if(t){a.options=t?$.extend(!0,{},t):{};var f=t["gadget-id"];f&&(a.options.gadget=r.getApplication().dao.getGadget(f))}return a.name=e,a.transition||(a.transition=r.getApplication().$config("transition")),a.uuid=i.readableuid("page",a.appId||"root",a.type,a.name),a},t.getRegularPageInfo=function(e){var t=e.split(".");t.length===5&&(t=t.slice(3,5));if(t[0].smStartsWith("QUERY~")){var n=t[0].split("~");t[0]=n[1]}var r=o[t[0]],i;return r&&(i=a(t[0],t[1],r)),$.smResolve(i)},t.getPrototype=function(e,t){return l(e,t)}}),define("syracuse-tablet/html/js/application/settings",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/entities/clientContract"],function(e,t,n){function a(e){var t=$.Deferred(),n=r.getCacheCtx(),i=r.getStorage(),s=r.getCache().cachePrefix;return n={$user:"none",$role:"none",$lang:n.$lang},i.put({$context:n,$collection:s+"$settings",$endpoint:"$local",$key:"MyApps",$data:e}).then(function(n){t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()}function f(e){var t=$.Deferred(),n=r.getCacheCtx(),i=r.getStorage(),s=r.getCache().cachePrefix;return i.put({$context:n,$collection:s+"$settings",$endpoint:"$local",$key:"MyApp_"+e.$application.applicationName,$data:e}).then(function(n){t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/storage/storage"),s=e("syracuse-tablet/html/js/sdata/sdataCommonResources"),o=e("syracuse-tablet/html/js/helpers/utils"),u=e("syracuse-tablet/html/js/sdata/entities/clientContract");t.getMyApplications=function(){function f(e){var t=u.getApps();t.forEach(function(t){e.push(t)})}var e=$.Deferred(),t=r.getCacheCtx(),n=r.getStorage(),o=r.getCache().cachePrefix;t={$user:"none",$role:"none",$lang:t.$lang};var l;return r.isDvlpMode()?l=$.smResolve({$status:i.StatusCodes.NOT_FOUND}):l=n.read({$context:t,$collection:o+"$settings",$endpoint:"$local",$key:"MyApps"}),l.then(function(t){if(t.$status===i.StatusCodes.OK){var n=t.$data;f(n),e.resolve(n)}else s.queryMyApplications().then(function(e){return a(e)},function(t){e.reject(t)}).then(function(t){f(t),e.resolve(t)}).fail(function(t){e.reject(t)})},function(t){e.reject(t)}),e.promise()},t.getMyApplicationDetail=function(e){var t=$.Deferred(),n=r.getCacheCtx(),o=r.getStorage(),a=r.getCache().cachePrefix;if(!e.$metaDataUrl){var l=u.getAppDetail(e.applicationName);l?t.resolve(l):t.reject("Application not found: "+e.applicationName)}else o.read({$context:n,$collection:a+"$settings",$endpoint:"$local",$key:"MyApp_"+e.applicationName}).then(function(n){n.$status===i.StatusCodes.OK?t.resolve(n.$data):s.queryMyApplicationDetail(e).then(function(e){return f(e)}).then(function(e){t.resolve(e)}).fail(function(e){t.reject(e)})},function(e){t.reject(e)});return t.promise()}}),define("syracuse-tablet/html/js/init/initContext",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/html/modalSelectContext","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/storage/localStorage","syracuse-tablet/html/js/application/settings"],function(e,t,n){function c(e){return $.smResolve().then(function(){return h(e)}).then(function(){var e=$.Deferred();return u.publish("sm.context.changed",e),e.promise()}).then(function(){}).fail(function(e){s.modalError("context._contextChanged error",e)})}function h(e){return l.getMyApplications().then(function(t){var n={};return t.forEach(function(t){var i=!0;t.endpoints&&t.endpoints.length>0&&(i=i&&t.endpoints.some(function(t){return t.application+"."+t.contract+"."+t.dataset===e.endpoint}));var s=!0;r.isDvlpMode()?s=!0:t.roles&&t.roles.length>0&&i&&(s=s&&t.roles.some(function(t){return t.code===e.role})),s&&i&&(n[t.applicationName]=t)}),r.setValidApplications(n),e}).fail(function(e){s.modalError("context._initApplications error",e)})}function p(e,t,n,r,i){return a.getUserProfile().then(function(t){var s=!1,o={};return s=n.some(function(n){return n.application+"."+n.contract+"."+n.dataset===e.endpoint&&n.$uuid!==t.selectedEndpoint.$uuid?(o.selectedEndpoint={$uuid:n.$uuid},!0):!1})||s,s=r.forEach(function(n){return n.code===e.role&&n.$uuid!==t.selectedRole.$uuid?(o.selectedRole={$uuid:n.$uuid},!0):!1})||s,i.forEach(function(n){return n.code===e.languages&&n.$uuid!==t.selectedLocale.$uuid?(o.selectedLocale={$uuid:n.$uuid},!0):!1})||s,s?a.updateUserProfile(o).then(function(){return e}):$.smResolve(e)})}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/utils"),o=e("syracuse-tablet/html/js/pages/html/modalSelectContext"),u=e("syracuse-tablet/html/js/helpers/notifications"),a=e("syracuse-tablet/html/js/sdata/sdataCommonResources"),f=e("syracuse-tablet/html/js/storage/localStorage"),l=e("syracuse-tablet/html/js/application/settings");t.getLastUsedContext=function(e){var t;try{var n=e+"_lastContext",r=f.getItem(n);r&&r.length>0&&(t=JSON.parse(r))}catch(i){}return t},t.setLastUsedContext=function(e,t){try{var n=e+"_lastContext",r=JSON.stringify(t);f.setItem(n,r)}catch(i){}},t.init=function(e,n){var u=[],f=[],l=[],h=r.getUserCtx(),d=h&&h.$user,v=r.getUserProfile(),m=t.getLastUsedContext(d);return a.queryEndpoints().then(function(e){return e.forEach(function(e){v.endpoints&&v.endpoints.some(function(t){return t.$uuid===e.$uuid})&&u.push(e)}),a.queryLocalePreferences()}).then(function(e){return l=e,a.queryRoles()}).then(function(e){e.forEach(function(e){v.roles&&v.roles.some(function(t){return t.$uuid===e.$uuid})&&f.push(e)})}).then(function(){var t=$.Deferred(),i=function(s){var a;e||s==null?a=o.selectContext(s,u,f,l,n):(s.action="ok",a=$.smResolve(s)),a.then(function(n){n&&n.action==="ok"?t.resolve(n):n&&n.action==="cancel"?m==null?(e=!0,i(n)):t.resolve(null):n&&n.action==="logout"&&r.getApplication().logout().always(function(){t.resolve(null)})}).fail(function(e){t.reject(e)})};return i(m),t.promise()}).then(function(e){return e&&(i.setLocale(e.language),r.setEndpoint(e.endpoint),r.setUserCtx({$user:h.$user,$role:e.role,$lang:e.language})),e}).then(function(e){return e?(t.setLastUsedContext(d,e),c(e)):e}).then(function(e){return e?p(e,d,u,f,l):e}).fail(function(e){s.modalError("context.sdataCommonResources error",e)})}}),define("syracuse-tablet/html/js/ui/iconList",["require","exports","module"],function(e,t,n){t.fontAwesomeIconNames=["fa-adjust","fa-adn","fa-ambulance","fa-anchor","fa-android","fa-angellist","fa-apple","fa-archive","fa-arrows","fa-asterisk","fa-at","fa-automobile","fa-backward","fa-ban","fa-bank","fa-barcode","fa-bars","fa-beer","fa-behance","fa-bell","fa-bicycle","fa-binoculars","fa-bitbucket","fa-bitcoin","fa-bold","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-briefcase","fa-btc","fa-bug","fa-building","fa-bullhorn","fa-bullseye","fa-bus","fa-cab","fa-calculator","fa-calendar","fa-camera","fa-car","fa-cc","fa-certificate","fa-chain","fa-check","fa-child","fa-circle","fa-clipboard","fa-close","fa-cloud","fa-cny","fa-code","fa-codepen","fa-coffee","fa-cog","fa-cogs","fa-columns","fa-comment","fa-comments","fa-compass","fa-compress","fa-copy","fa-copyright","fa-crop","fa-crosshairs","fa-css3","fa-cube","fa-cubes","fa-cut","fa-cutlery","fa-dashboard","fa-database","fa-dedent","fa-delicious","fa-desktop","fa-deviantart","fa-digg","fa-dollar","fa-download","fa-dribbble","fa-dropbox","fa-drupal","fa-edit","fa-eject","fa-empire","fa-envelope","fa-eraser","fa-eur","fa-euro","fa-exchange","fa-exclamation","fa-expand","fa-eye","fa-eyedropper","fa-facebook","fa-fax","fa-female","fa-file","fa-film","fa-filter","fa-fire","fa-flag","fa-flash","fa-flask","fa-flickr","fa-folder","fa-font","fa-forward","fa-foursquare","fa-gamepad","fa-gavel","fa-gbp","fa-ge","fa-gear","fa-gears","fa-gift","fa-git","fa-github","fa-gittip","fa-glass","fa-globe","fa-google","fa-group","fa-header","fa-headphones","fa-heart","fa-history","fa-home","fa-html5","fa-ils","fa-image","fa-inbox","fa-indent","fa-info","fa-inr","fa-instagram","fa-institution","fa-ioxhost","fa-italic","fa-joomla","fa-jpy","fa-jsfiddle","fa-key","fa-krw","fa-language","fa-laptop","fa-lastfm","fa-leaf","fa-legal","fa-link","fa-linkedin","fa-linux","fa-list","fa-lock","fa-magic","fa-magnet","fa-male","fa-maxcdn","fa-meanpath","fa-medkit","fa-microphone","fa-minus","fa-mobile","fa-money","fa-music","fa-navicon","fa-openid","fa-outdent","fa-pagelines","fa-paperclip","fa-paragraph","fa-paste","fa-pause","fa-paw","fa-paypal","fa-pencil","fa-phone","fa-photo","fa-pinterest","fa-plane","fa-play","fa-plug","fa-plus","fa-print","fa-qq","fa-qrcode","fa-question","fa-ra","fa-random","fa-rebel","fa-recycle","fa-reddit","fa-refresh","fa-remove","fa-renren","fa-reorder","fa-repeat","fa-reply","fa-retweet","fa-rmb","fa-road","fa-rocket","fa-rouble","fa-rss","fa-rub","fa-ruble","fa-rupee","fa-save","fa-scissors","fa-search","fa-send","fa-share","fa-shekel","fa-sheqel","fa-shield","fa-signal","fa-sitemap","fa-skype","fa-slack","fa-sliders","fa-slideshare","fa-sort","fa-soundcloud","fa-spinner","fa-spoon","fa-spotify","fa-square","fa-star","fa-steam","fa-stethoscope","fa-stop","fa-strikethrough","fa-stumbleupon","fa-subscript","fa-suitcase","fa-superscript","fa-support","fa-table","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-terminal","fa-th","fa-ticket","fa-times","fa-tint","fa-trash","fa-tree","fa-trello","fa-trophy","fa-truck","fa-try","fa-tty","fa-tumblr","fa-twitch","fa-twitter","fa-umbrella","fa-underline","fa-undo","fa-university","fa-unlink","fa-unlock","fa-unsorted","fa-upload","fa-usd","fa-user","fa-users","fa-vine","fa-vk","fa-warning","fa-wechat","fa-weibo","fa-weixin","fa-wheelchair","fa-wifi","fa-windows","fa-won","fa-wordpress","fa-wrench","fa-xing","fa-yahoo","fa-yelp","fa-yen","fa-youtube"]}),define("syracuse-tablet/html/js/ui/fontUtils",["require","exports","module","syracuse-tablet/html/js/ui/iconList"],function(e,t,n){var r=e("syracuse-tablet/html/js/ui/iconList"),i={$first:"glyphicon glyphicon-step-backward",$previous:"glyphicon glyphicon-chevron-left",$next:"glyphicon glyphicon-chevron-right",$last:"glyphicon glyphicon-step-forward",$more:"glyphicon glyphicon-refresh"},s=function(e){if(e==null)e=Math.random()*(r.fontAwesomeIconNames.length-1);else if(e<r.fontAwesomeIconNames.length)e=Math.abs(e);else{var t=Math.round(Math.abs(e)/r.fontAwesomeIconNames.length);e-=t*r.fontAwesomeIconNames.length}return"fa "+r.fontAwesomeIconNames[e]},o=function(e){switch(e){case"$edit":return"fa fa-pencil-square-o";case"$query":return"fa fa-list";case"$save":return"fa fa-floppy-o";case"$details":return"fa fa-level-down";case"$delete":return"fa fa-trash-o";case"$create":return"fa fa-plus-square";default:if(r.fontAwesomeIconNames.indexOf("fa-"+e)>-1)return"fa fa-"+e;return console.log("Icon name="+e+" not implemented yet"),"fa fa-warning"}return!0};t.getIconByIdx=s,t.getIconByName=o,t.checkBoxIcon=function(e){return["glyphicon",e?"glyphicon-ok":"glyphicon-remove"]},t.dateFieldIcon=function(e){return e.indexOf("date")!=-1?["glyphicon","glyphicon-calendar"]:["glyphicon","glyphicon-time"]},t.refFieldIcon=function(){return["glyphicon","glyphicon-eye-open"]},t.binaryIcon=function(e,t){return e==="s-m-img"?"glyphicon "+(t==="default"?"glyphicon-picture":""):e==="s-m-binary"?"glyphicon "+(t==="default"?"glyphicon-file":""):""},t.paginationIcon=function(e){return i[e]},t.pageIcon=function(e){if(e==="clearCache")return"glyphicon glyphicon-fire";if(e==="switchContext")return"glyphicon glyphicon-user";if(e==="search")return"glyphicon glyphicon-search";if(e==="sidePanel")return"glyphicon glyphicon-align-justify";if(e==="home")return"glyphicon glyphicon-home";if(e==="designPage")return"fa fa-paint-brush"},t.ctrlIcon=function(e){if(e==="editrow")return"fa fa-pencil-square-o";if(e==="detailrow")return"fa fa-hand-o-right"}}),define("syracuse-tablet/html/js/helpers/prototype",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/application/gadget","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/logger").getLogger("prototype"),s=e("syracuse-tablet/html/js/application/gadget").Klass,o=e("syracuse-tablet/html/js/sdata/sdataUtils"),u=e("syracuse-tablet/html/js/ui/fontUtils"),a=function(e,t){e.icon=u.getIconByName(t);switch(t){case"$edit":e.title="Edit";break;case"$query":e.title="List";break;case"$save":e.title="Save";break;case"$details":e.title="Detail";break;case"$delete":e.title="Delete";break;case"$create":e.title="Create";break;default:i&&i("Facet "+t+" not implemented yet"),e.title="???"}},f={$isExcluded:!1,$isHidden:!1,isMandatory:!1,$isReadOnly:!1,$isDisabled:!1},l="$ROWIDX",c=null,h=/{[^}]+}/g,p=/[{}]/g,d=r.defineClass(function(e,t){var n=this;n.json=e||{},typeof n.json=="string"&&(n.json=JSON.parse(n.json)),n._children=null,t&&(t._appendChild(n),n.parent=t),n.init()},null,{init:function(){var e=this,t=e.json.$properties;if(!t)return;for(var n in t)t[n].$type==="application/x-reference"&&e.initRefField(t[n],n)},destroy:function(){var e=this;e.parent=null,e.json=null,e._children&&e.children.forEach(function(e){e&&e.destroy()}),e._children=null},_appendChild:function(e){var t=this;t._children||(t._children=[]),t._children.push(e)},data:function(e,t){var n=this;if(!e||e.length==0)return null;var r=n.json[e];return r==null?n.parent?n.parent.data(e):r:n.checkExpression(r,t)},property:function(e,t,n){var r=this;if(!e||e.length===0)return null;var i=r.json.$properties?r.json.$properties[e]:r.parent?r.parent.property(e):null;return!i||!t?i:r.checkExpression(i[t],n)},isReference:function(e){var t=this.property(e);return t&&t.$type==="application/x-reference"},checkExpression:function(e,t){return e&&e.indexOf&&e.indexOf("{")>=0&&(e=r.parseExpression(e,t,this)),e},getMetaData:function(e){var t=this;t._metaData||(t._metaData={});var n=t._metaData[e];return n?n:(n=t._metaData[e]=$.extend({},f,t.property(e)),n)},localization:function(e){var t=this,n=t.json.$localization||{};return n[e]?n[e]:t.parent?t.parent.localization(e):null},getPrototype:function(e,n){if(e==="$item")var r=this.data(e);else var r=this.property(e);return r?t.create($.extend({},r,n),this):null},isQuery:function(){if(this._isQuery!=null)return this._isQuery;var e=this.data("$url");return this._isQuery=e&&e.smEndsWith("$query")?!0:!1,this._isQuery},isLookup:function(){if(this._isLookup!=null)return this._isLookup;var e=this.data("$url");return this._isLookup=e&&e.smEndsWith("$lookup")?!0:!1,this._isLookup},formatDisplay:function(e,t){var n=this,r=n.property(e)},addProperty:function(e,t){var n=this;t&&n.json.$properties&&!n.json.$properties[e]&&(n.json.$properties[e]=t)},getPropTitle:function(e){var t=this,n=t.property(e);return n&&n.$title?t.checkExpression(n.$title):""},getFieldNameForValue:function(e){var t=this.property(e),n=t&&t.$item;return n&&n.$refValue?n.$refValue:e},initRefField:function(e,t){var n=this;if(!e)throw new Error("Field proto expected["+t+"]");var r=e.$item;if(!r||r.$refValue)return;r.$refValue=t;if(r.$value&&typeof r.$value=="string"){var s=r.$value.match(h);if(s&&s.length==1){var o=s[0].replace(p,"").trim();r.$properties&&r.$properties[o]&&(r.$lookupvalue=o);if(r[o]){var u=r[o].replace(p,"").trim();n.property(u)&&(r.$refValue=u)}}else i&&i("!!! _getRefenceValue - Only one value is expected")}if(r.$description&&r.$properties&&typeof r.$description=="string"){var a=r.$description.match(h);if(a&&a.length==1){var f=a[0].replace(p,"").trim();r.$properties[f]&&(r.$lookupdescr=f)}}return r.$refValue},getLookupValue:function(){return this.getDataByPath("$item.$lookupvalue")},getDataByPath:function(e){return r.getPropByPath(this.json,e,this)},getVignetteGadget:function(){var e=this.data("$gadget");return e?new s(e):null},getLinks:function(e,t,n){var r=this,s=[];if(!e)return[];n=n||{},t=t||"all";var u=e.getLinksStatus(r);return u&&Object.keys(u).length>0&&$.each(u,function(n,u){try{if(u==null||u.$isExcluded===!0)return;if(u.$type!=null&&u.$type.length!==0&&u.$type!=="application/json;vnd.sage=syracuse")return;var f=o.getLinkInfo(u.$url,e,n==="$save"),l=n.smStartsWith("$"),c=t==="all";if(c||t==="visible"&&l||t==="hidden"&&!l){var h=$.extend({},u);h.page=f.page,h.name=n,h.sdataurl=f.sDataUrl,l&&(c||t==="visible")?a(h,n):!l&&(c||t==="hidden")&&(h.title=r.checkExpression(u.$title),h.icon=""),s.push(h)}}catch(p){u=u||{},i&&i("getLinks - invalid link - Title: "+r.checkExpression(u.$title||"no title")+"\n	"+(u.$url||"no url"))}}),s},getUnitFieldInfo:function(){var e=this,n={};n.$unit=e.data("$unit");if(typeof n.$unit=="object")n.unitBindName="$unit",n.unitFieldProto=t.create($.extend({},e.$unit));else if(typeof n.$unit=="string"){n.unitBindName=n.$unit;var r=e.parent;while(r){var i=r.property(n.$unit);if(i){n.unitFieldProto=t.create($.extend({},i));break}r=r.parent}}return n},isEditMode:function(){var e=this.data("$url");return e&&(e.indexOf("$create")>-1||e.indexOf("$edit")>-1)},toArticle:function(){var e=this,t=e.data("$properties"),n={$layoutType:"stack",$items:[]},r=e.data("$url").indexOf(".$query")>0;for(var i in t)t[i].$isExcluded!==!0&&n.$items.push({$bind:i,$isTitleHidden:r});return n}});t.ROWIDXPROP=l,t.getRowIdxProto=function(){if(c)return c;c=t.create({$type:"application/x-integer"})},t.create=function(e,t){return new d(e,t)}}),define("syracuse-tablet/html/js/helpers/constants",["require","exports","module"],function(e,t,n){t.DASHBOARD_PAGE_FACET="$mobileDashboard"}),define("syracuse-tablet/html/js/application/pageHelper",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/constants"],function(e,t,n){function l(e){if(!e||!e.name)throw new Error("Bad page state");a[e.name]=e}function c(e,t){if(!e||e.length==0)throw new Error("Bad page name");var n={home:!1,type:"regular",subtype:"",cached:!1,refreshed:!1,appId:"root",changeHash:!1};return n.name=e,t&&(n.type=t),n}function h(){for(var e in f)l($.extend(!0,{},c(e),f[e]))}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/utils"),s=e("syracuse-tablet/html/js/sdata/entities/clientContract"),o=e("syracuse-tablet/html/js/helpers/prototype"),u=e("syracuse-tablet/html/js/helpers/constants"),a={},f={login:{type:"html",subtype:"login",disableAuthoring:!0},about:{type:"html",subtype:"about",disableAuthoring:!0},settings:{type:"html",subtype:"settings",disableAuthoring:!0}},p=function(e,t){var n;return n=a[e],n&&t===!0&&(n=$.extend(!0,{},n)),n},d=function(e,t,n){t=t||{};if(!n.getControl)throw new Error("Unexpected currentPage object - getControl method not found");var i=n.getControl(t.controlId);if(!i)throw new Error("Array not found - id:"+t.controlId);var s=n.state.name+"."+i.$bind,o=p(s);if(o)return o;o=c(s,e),o.subtype=n.isEditMode()?"edit":"details",l(o);var u=i.prototype.getPrototype("$item",{$url:"",$typ:"rowdetail"}),a=null;return r.registerAdditionalPage(s,u,a),o},v=function(e){if(!e.authoringName){var t=e.name.split("."),n;t.length===5?n=t[0]+"."+t[1]+"."+t[3]+"."+t[4]:n=e.name,t.length===2&&(n="syracuse.collaboration."+n),e.authoringName=n}return e},m=function(e,t,n){e=e||"";if(typeof e!="string")return e;var o=e.trim();o.indexOf("#")==0&&(o=o.substring(1)),t=t||{},e=s.getPageInfo(o,t);if(e)return e;o==="home"&&(o=r.getHomeDashboard()),o==="rowdetail"?e=d(o,t,n):e=p(o,!0),e||(e=c(o));if(t){e.options=t?$.extend(!0,{},t):{};var u=t["gadget-id"];u&&(e.options.gadget=r.getApplication().dao.getGadget(u))}return e.transition||(e.transition=r.$config("transition")),e.uuid=i.readableuid("page",e.appId||"root",e.type,e.name),e},g=function(e,t){var n=c(e,"regular");if(t.$page&&t.$page.$prototype){var r=t.$page.$prototype.$type;r||(r=t.$page.$prototype.$url),n.subtype=r.substring(r.lastIndexOf(".$")+2);if(!n.subtype)throw new Error("unexpected facet for page "+e+"\n$url="+t.$page.$prototype.$url)}else n.subtype="unknown";return l(n),n},y=function(e,t,n){var r=$.extend(!0,{},c(t.$dashboardName+"."+u.DASHBOARD_PAGE_FACET,"dashboard"),t.$pageInfo);n.$application.$homeDashboard.dashboardName===t.$dashboardName?(r.subtype=r.isWelcomePage?"welcome":"home",r.isHomeDashboard=!0):(r.isHomeDashboard=!1,r.subtype="std"),r.dashboardUuid=e,l(r)},b=function(e){a={},h();if(!e)return;if(e.$dashboards)for(var t in e.$dashboards)y(t,e.$dashboards[t],e);if(e.$pages)for(var t in e.$pages)g(t,e.$pages[t])},w=function(e){if(!e)return;e.jquery||(e=$(e));var t=Array.prototype.slice.call(arguments,1);e.children(".s-m-page").each(function(e){var n=$(this).smPageController();n&&Array.prototype.indexOf.call(t,n)==-1&&n.destroy()})};t.getPageInfo=function(e,t,n){return v(m(e,t,n))},t.registerPages=b,t.removeAllPages=w,t.registerRegularPage=g,h()}),define("syracuse-tablet/html/js/authoring/authoringSData",["require","exports","module","syracuse-tablet/html/js/sdata/sdataHttp"],function(e,t,n){var r=e("syracuse-tablet/html/js/sdata/sdataHttp"),i="mobile";t.getPageVariants=function(e){return $.smResolve().then(function(){e=$.extend(!0,{},{device:i},e);if(!e.application||!e.contract||!e.representation||!e.facet||!e.device)return $.smReject("Not all mandatory parameters present: "+JSON.stringify(e));var t=[e.application,e.contract,e.representation,e.facet,e.device].join("."),n={url:"/sdata/syracuse/collaboration/syracuse/pageDefs(code%20eq%20'"+t+"')?representation=pageDef.$details"};return r.send(n).then(function(e){return e&&e.isSuccess?e.responseJSON.variants||[]:e.status===404?[]:$.smReject("Unknown error")})})},t.deletePageVariants=function(e){return $.smResolve().then(function(){e=$.extend(!0,{},{device:i},e);if(!e.application||!e.contract||!e.representation||!e.facet||!e.device)return $.smReject("Not all mandatory parameters present: "+JSON.stringify(e));var t=[e.application,e.contract,e.representation,e.facet,e.device].join("."),n={url:"/sdata/syracuse/collaboration/syracuse/pageDefs(code%20eq%20'"+t+"')?representation=pageDef.$edit",method:"DELETE"};return r.send(n).then(function(e){if(e&&e.isSuccess)return;return $.smReject("Unknown error")})})},t.createPageDefinitionWC=function(e){var t={pageContext:[e.application,e.contract,e.representation,e.facet].join("."),device:i,representation:"pageAuth.$edit"},n="/sdata/syracuse/collaboration/syracuse/pageAuths"+(e.variant!=null?"('"+e.variant+"')":"/$template")+"/$workingCopies?"+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"),s={url:n,method:"POST"};return r.send(s).then(function(e){return e&&e.isSuccess?e.responseJSON:$.smReject("Unknown error")})},t.savePageDefinitionWC=function(e,t){var n={roles:e.roles,users:e.users,endpoints:e.endpoints,saveAsOption:e.saveAsOption,isFactory:!1,isModelRepresentation:!1,personalCopy:!1,variantCode:e.variantCode,variantTitle:e.variantTitle,variantDescription:e.variantDescription};switch(e.saveAsOption){case"factory_variant":n.isFactory=!0;break;case"personal_copy":n.personalCopy=!0;break;case"shared_copy":break;case"global_variant":}t.$actions={};var i;e.variant?(i=t.$actions.$save={},delete n.saveAsOption):i=t.$actions.saveAs={},i.$isRequested=!0,i.$parameters=n;var s={url:t.$url,method:"PUT",send:t};return r.send(s).then(function(e){return e&&e.isSuccess?e.responseJSON:$.smReject("Unknown error")})},t.savePageDefinition=function(e){return t.createPageDefinitionWC(e).then(function(n){var r=$.extend(!0,{},n);return r.content=r.content||{},r.content.$article=e.article,t.savePageDefinitionWC(e,r).then(function(e){return $.extend(!0,{},n,e)})})}}),define("syracuse-tablet/html/js/authoring/authoringHelpers",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function o(){return $(".s-m-control.s-m-auth").removeClass("s-m-auth-selected"),$(this).addClass("s-m-auth-selected"),!1}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/locale");t.enableAuthCss=function(){$(".s-m-control").addClass("s-m-auth"),$(".s-m-control.s-m-auth").on("click",o)},t.disableAuthCss=function(){$(".s-m-control.s-m-auth").off("click",o),$(".s-m-control").removeClass("s-m-auth")}}),define("syracuse-tablet/html/js/authoring/authoring",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringSData","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/ui/modal"],function(e,t,n){function p(e,t){var n=e.split("."),r={application:n[0],contract:n[1],representation:n[2],facet:n[3],roles:[],users:[],endpoints:[],saveAsOption:t.saveAs,variantCode:t.code,variantTitle:t.title,variantDescription:t.description,article:t.article};return u.getPageVariants({application:n[0],contract:n[1],representation:n[2],facet:n[3]}).then(function(e){e&&e.some(function(e){var n=e.title===t.title&&e.code===t.code&&e.description===t.description;t.saveAs==="factory_variant"&&e.isFactory!==!0?n=!1:t.saveAs!=="global_variant"||e.isFactory!==!0&&e.personalCopy!==!0?t.saveAs==="personal_copy"&&e.personalCopy!==!0&&(n=!1):n=!1,n&&(r.variant=e.$uuid)})}).then(function(){return u.savePageDefinition(r)}).then(function(e){f.info(s.text("auth.panel.save_ok_title"),s.text("auth.panel.save_ok_text"))}).fail(function(e){f.info(s.text("auth.panel.save_error_title"),s.text("auth.panel.save_error_text")+"\n"+JSON.stringify(e))})}function d(e){var t;try{return t=JSON.parse(e),t}catch(n){f.info(s.text("auth.panel.save_error_title"),s.text("auth.panel.save_error_json"))}}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/locale"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=e("syracuse-tablet/html/js/authoring/authoringSData"),a=e("syracuse-tablet/html/js/authoring/authoringHelpers"),f=e("syracuse-tablet/html/js/ui/modal"),l='	<div id="authPanel" draggable="true" class="modal-dialog"> 		<div class="modal-content"> 			<div class="modal-header"> 				<div class="input-group"> 					<div id="authPageName" class="form-control"></div> 	 				<div class="input-group-btn"> 						<button type="button" id="authPanelBtnClose" class="btn btn-default pull-right">{{label_close}}</button> 					</div> 				</div> 			</div> 			<div class="modal-body"> 				<ul class="nav nav-pills" role="tablist"> 					<li><a href="#authPanelControl" role="tab" data-toggle="tab">{{label_control}}</a></li> 					<li class="active"><a href="#authPanelEdit" role="tab" data-toggle="tab">{{label_edit}}</a></li> 					<li><a href="#authPanelSave" role="tab" data-toggle="tab">{{label_save}}</a></li> 				</ul> 				<div class="tab-content"> 					<div id="authPanelControl" class="tab-pane panel-body active"> 						<div id="authControlName" class="form-control">Comming soon</div> 					</div> 					<div id="authPanelEdit" class="tab-pane panel-body active"> 						<textarea  id="authJSON" type="text" 					    rows="20">{{article}}</textarea> 					    <div class="modal-footer"> 							<button type="button" id="authPanelBtnApply" class="btn ">{{label_apply}}</button> 						</div> 					</div> 					<div id="authPanelSave" class="tab-pane panel-body"> 						<div class="form-group"> 							<label>{{label_code}}</label> 							<input class="form-control" id="authCode" value="{{authCodeDefault}}" /> 						</div> 						<div class="form-group"> 							<label>{{label_title}}</label> 							<input class="form-control" id="authTitle" value="{{authTitleDefault}}" /> 						</div> 						<div class="form-group"> 							<label>{{label_description}}</label> 							<input class="form-control" id="authDescription" value="{{authDescriptionDefault}}"  /> 						</div> 						<label>{{label_saveas_option}}</label> 						<div class="btn-group btn-group-justified" data-toggle="buttons"> 	  						<div class="btn-group"> 	  							<label class="btn btn-primary"> 	    							<input type="radio" name="options" id="personal_copy" checked>{{label_personal}} 	  							</label> 	  						</div> 	    					<div class="btn-group"> 	  							<label class="btn btn-primary"> 	    							<input type="radio" name="options" id="global_variant"> {{label_global}} 	  							</label> 	  						</div> 	    					<div class="btn-group"> 	  							<label class="btn btn-primary active"> 	    							<input type="radio" name="options" id="factory_variant">{{label_factory}} 	  							</label> 	  						</div> 						</div> 						<div class="modal-footer"> 							<button type="button" id="authPanelBtnSave" class="btn">{{label_save}}</button> 						</div> 					</div> 				</div> 			</div> 		</div> 	</div>',c,h=r.defineClass(function(){var e=this;e.$$authPanel=null,e.authPanelTemplate=Handlebars.compile(l)},null,{showAuthoringPanel:function(){var e=this;e.$$authPanel&&e.$$authPanel.is(":visible")?e._hideAuthPanel():(e._showAuthPanel(),e._displayAuth(i.getApplication().currentPage))},notifPageLoaded:function(e){var t=this;e&&!e.isVignette&&t._displayAuth(e)},_displayAuth:function(e){var t=this;t.currentPageName=e.state.authoringName,t.$$authPageName.text(t.currentPageName),t.$$authJSON.val(JSON.stringify(e.article,null,"  ")),$(".btn",t.$$authPanelSave).eq(0).button("toggle"),$('.nav-pills a[href="#authPanelEdit"]').tab("show")},_showAuthPanel:function(){var e=this;o.subscribe(e,["sm.page.loaded"]),e._ensureAuthPanel(),e.$$authPanel.show(),a.enableAuthCss()},_hideAuthPanel:function(){var e=this;e._ensureAuthPanel(),e.$$authPanel.hide(),a.disableAuthCss(),o.unsubscribe(e,["sm.page.loaded"])},_ensureAuthPanel:function(){var e=this;if(this.$$authPanel)return;var t={label_control:s.text("auth.panel.label_control"),label_edit:s.text("auth.panel.label_edit"),label_save:s.text("auth.panel.label_save"),label_close:s.text("auth.panel.label_close"),label_apply:s.text("auth.panel.label_apply"),label_code:s.text("auth.panel.label_code"),label_title:s.text("auth.panel.label_title"),label_description:s.text("auth.panel.label_description"),label_saveas_option:s.text("auth.panel.label_saveas_option"),label_personal:s.text("auth.panel.label_personal"),label_global:s.text("auth.panel.label_global"),label_factory:s.text("auth.panel.label_factory"),authCodeDefault:s.text("auth.panel.authCodeDefault"),authTitleDefault:s.text("auth.panel.authTitleDefault"),authDescriptionDefault:s.text("auth.panel.authDescriptionDefault")};e.$$authPanel=$(e.authPanelTemplate(t)),$("body").append(e.$$authPanel),e.$$authJSON=$("#authJSON"),e.$$authPageName=$("#authPageName"),e.$$authCode=$("#authCode"),e.$$authTitle=$("#authTitle"),e.$$authDescription=$("#authDescription"),e.$$authPanelEdit=$("#authPanelEdit"),e.$$authPanelSave=$("#authPanelSave"),$("#authPanelBtnSave").bind("click",e._onSave.bind(e)),$("#authPanelBtnClose").bind("click",e._onClose.bind(e)),$("#authPanelBtnApply").bind("click",e._onApply.bind(e))},_updateLayout:function(){var e=this,t=i.getApplication().currentPage,n=e.$$authJSON.val(),s=d(n);if(!s)return;t.updateLayout(s).fail(function(e){r.modalError("Error",e)})},_onSave:function(){var e=this,t=e.$$authJSON.val(),n=d(t);if(!n)return;p(e.currentPageName,{code:e.$$authCode.val(),title:e.$$authTitle.val(),description:e.$$authDescription.val(),saveAs:$("input:radio:checked",e.$$authPanelSave)[0].id,article:n})},_onApply:function(){var e=this;e._updateLayout()},_onClose:function(){var e=this;e._hideAuthPanel()}});t.startDesignPage=function(){c||(c=new h),c.showAuthoringPanel()}}),define("syracuse-tablet/html/js/application/application",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/application/breadcrumb","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/application/pageLoader","syracuse-tablet/html/js/pages/html/pageTemplates","syracuse-tablet/html/js/init/initContext","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/application/pageHelper","syracuse-tablet/html/js/authoring/authoring","syracuse-tablet/html/js/helpers/constants"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/modal"),s=e("syracuse-tablet/html/js/helpers/logger").getLogger("app"),o=e("syracuse-tablet/html/js/application/breadcrumb").BreadCrumb,u=e("syracuse-tablet/html/js/helpers/notifications"),a=e("syracuse-tablet/html/js/helpers/globals"),f=e("syracuse-tablet/html/js/application/authentication"),l=e("syracuse-tablet/html/js/application/eventListener"),c=e("syracuse-tablet/html/js/application/pageLoader"),h=e("syracuse-tablet/html/js/pages/html/pageTemplates"),p=e("syracuse-tablet/html/js/init/initContext"),d=e("syracuse-tablet/html/js/application/settings"),v=e("syracuse-tablet/html/js/ui/uiUtils"),m=e("syracuse-tablet/html/js/application/pageHelper"),g=e("syracuse-tablet/html/js/authoring/authoring"),y=e("syracuse-tablet/html/js/helpers/constants"),b={transition:null,openLinkInVignette:!0,arrays:{gridMaxCols:5}},w=function(e){u.subscribe(e,["sm.context.changed","sm.logout","sm.switch.app","sm.modal.open","sm.modal.close"],1)},E=r.defineClass(function(e,t){var n=this;n.breadCrumb=new o,n.$$elmt=e,n.currentPage=null,n.uuid=null,n.homePageId="defhome",n._$config=$.extend(!0,{},b),n.factory=t,n._pageLoader=null,n._nbModals=0,n._wait=v.waitWheelCreate(e)},null,{init:function(){var e=this;l.bindEvents(e),e.dao=e.factory.createDaoApp(e),w(e),e.$$elmt.show()},destroy:function(){var e=this;e.breadCrumb&&e.breadCrumb.destroy(),e._wait&&v.waitWheelDestroy(e._wait),e.breadCrumb=null,u.unsubscribe(),m.removeAllPages(e.$$elmt),e.currentPage=null;if(e._pageLoader=null)e._pageLoader.destroy(),e._pageLoader=null;r.unbindObj(e),r.unbindObj(e.$$elmt),$(window).unbind()},getTitle:function(){return this.dao.getApplicationName()},gotoHome:function(){var e=this;setTimeout(function(){e.changePage(e.homePageId||"defhome")})},$config:function(e){return r.getPropByPath(this._$config,e,this._$config)},notifSwitchApp:function(e){var t=this,n=function(e,n){t.waitWheelStop(),i.error(e,n,function(){t.currentPage&&t.currentPage.activate()})},o=function(e){try{t.dao.setApplicationDesc(e),t.homePageId=t.dao.getHomeDashboard()||"defhome",t.uuid=e.$application.$uuid||r.UUID(),t.waitWheelStop(),t.gotoHome()}catch(i){n("Error loading new application",i)}};try{var u=a.getValidApplications()[e];if(!u)throw new Error("notifSwitchApp - NULL appInfo ("+e+")");s&&s("Switch to Syracuse Mobile Application "+e),t.currentPage&&t.currentPage.deactivate(),t.waitWheelStart(),d.getMyApplicationDetail(u).then(function(e){o(e)}).fail(function(e){n("Error loading application",e)})}catch(f){n("Error switching application",f)}},notifContextChanged:function(e){var t=this;t.gotoWelcomeApplication().then(function(){e&&e.resolve()}).fail(function(t){e&&e.reject(t)})},notifLogout:function(){s&&s("Application Notification Logout"),a.setUserCtx(null)},notifModalOpen:function(){this._nbModals++},notifModalClose:function(){this._nbModals=Math.max(this._nbModals-1,0)},hasModalOpen:function(){return this._nbModals>0},_actBreadCrumb:function(){this.breadCrumb.display()},_actGotoWelcomeApplication:function(){this.gotoWelcomeApplication()},_actBack:function(){window.history.back()},_actSwitchContext:function(){var e=this;p.init(!0,!0).then(function(e){}).fail(function(t){h.resolveError(null,e.state.name,t)})},_actClearCache:function(){var e=this,t=$.Deferred();return i.confirm("clearCache",function(n){n?(e.waitWheelStart(),a.getCache().clearCache().then(function(n){e.waitWheelStop(),t.resolve(null)}).fail(function(n){setTimeout(function(){r.modalError("Clear cache error",n,function(){e.waitWheelStop(),t.resolve(null)})},10)})):t.resolve(null)}),t.promise()},_actDesignPage:function(){g.startDesignPage()},back:function(e){var t=this;s&&s("back","start","\n"+JSON.stringify(e,null,2));if(t._nbModals>0)return;if(t.homePageId==="$welcomeDashboard."+y.DASHBOARD_PAGE_FACET)return;if(!e)throw new Error("Back","Unexpected null history state");if(e.name!=="$welcomeDashboard."+y.DASHBOARD_PAGE_FACET)return t._gotoPage(c.stateDeserialize(e),!0);t.gotoWelcomeApplication()},gotoWelcomeApplication:function(){var e=this,t=a.getValidApplications().$welcomeApplication;return d.getMyApplicationDetail(t).then(function(t){e.dao.setApplicationDesc(t),e.homePageId=e.dao.getHomeDashboard(),e.uuid=t.$application.$uuid,e.gotoHome()})},_gotoPage:function(e,t){var n=this;return n._pageLoader||(n._pageLoader=new c.Klass({waitStop:function(){n.waitWheelStop()},getRootElmt:function(){return n.$$elmt},waitStart:function(){n.waitWheelStart()},getCurrentPage:function(){return n.currentPage},setCurrentPage:function(e){n.currentPage=e,e.state.home&&m.removeAllPages(n.$$elmt,e)},setHistory:function(e){e=c.stateSerialize(e),window.history.pushState(e,e.uuid,null),s&&s("pushState",e.uuid,"history.length="+window.history.length)},succeeded:function(e,t){t&&t.notifId&&(e.id===t.parentId?u.publish(t.notifId,t.notifData,t.controlId):r.modalError("Child page notification warning","Parent page is not the current page"))}})),n._pageLoader.load(e,t)},changePage:function(e,t){var n=this;return typeof e=="string"&&s&&s("changePage",e),n._gotoPage(m.getPageInfo(e,t,n.currentPage))},logout:function(){var e=$.Deferred(),t=this;return t.waitWheelStart(),f.logout().then(function(n,r){t.waitWheelStop(),n?(u.publish("sm.logout"),t.changePage("login"),e.resolve()):i.error(r,function(){t.changePage("login"),e.resolve()})}).fail(function(n){t.waitWheelStop(),i.error("Logout error",n,function(){t.changePage("login"),e.resolve()})}),e.promise()},refreshPage:function(e){var t=this;if(!t.currentPage)throw new Error("No current page");t.currentPage.refresh(e).then(function(){}).fail(function(e){t.modalError("Refresh page",e)})},waitWheelStart:function(){v.waitWheelStart(this._wait)},waitWheelStop:function(){v.waitWheelStop(this._wait)},modalError:function(e,t,n){i.error(e,t,n)}});t.Application=E}),define("syracuse-tablet/html/js/controls/ctrlFactory",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("factory"),i={},s={string:"application/x-string",password:"application/x-password",text:"text/plain",integer:"application/x-integer",real:"application/x-real",decimal:"application/x-decimal",quantity:"application/x-quantity",choice:"application/x-choice","boolean":"application/x-boolean",date:"application/x-date",time:"application/x-time",datetime:"application/x-datetime",reference:"application/x-reference",array:"application/x-array",image:"image",doc:"application/x-document",binary:"application/x-binary",vignette:"tablet/x-vignette",layout:"tablet/x-layout",pageheader:"tablet/x-pageheader",pagefooter:"tablet/x-pagefooter",pageactionpanel:"tablet/x-pageactionpanel",navigationpanel:"tablet/x-navigationpanel",icon:"tablet/x-icon"},o=function(e,t,n,r,i,s){if(!e)return;s=s||{},s.isGridCell=!0,e.jquery||(e=$(e));var o=u(t,null,n,r,s);o.buildHtml(e,i,s),o.detachElmt()},u=function(e,t,n,r,o){if(!e)throw new Error("Control - null parent or controller");o=o||{};var u,a=r.data("$type");switch(a){case s.string:case s.password:case s.text:switch(r.data("$format")){case"$phone":u=new i.PhoneField(e,n,r,o);break;case"$email":u=new i.EmailField(e,n,r,o);break;default:u=new i.Alphanum(e,n,r,o)}break;case s.integer:case s.real:case s.decimal:n.$gauge?u=new i.Gauge(e,n,r,o):u=new i.Numeric(e,n,r,o);break;case s.quantity:u=new i.Quantity(e,n,r,o);break;case s.choice:u=new i.Combo(e,n,r,o);break;case s.boolean:u=new i.CheckBox(e,n,r,o);break;case s.date:case s.time:case s.datetime:u=new i.Date(e,n,r,o);break;case s.reference:u=new i.Reference(e,n,r,o);break;case s.array:r.data("$cube")?u=new i.CubeChart(e,n,r,o):r.isQuery()?u=new i.ArrayQuery(e,n,r,o):r.isLookup()?u=new i.ArrayLookup(e,n,r,o):u=new i.Array(e,n,r,o);break;case s.vignette:u=new i.Vignette(e,n,r,o);break;case s.image:case s.doc:case s.binary:u=new i.Binary(e,n,r);break;case s.icon:u=new i.Icon(e,n,r);break;default:u=new i.TypeUnknown(e,n,r,o)}if(!o||o.isGridCell!==!0){if(!t)throw new Error("Parent's control is mandatory");t.appendStructElmt(u),e.addControl(u)}return u},a=function(e,t,n){var o=n.$layoutType||"stack",u;if(o=="stack")u=i.LayoutStack;else if(o=="row")u=i.LayoutRow;else if(o=="tab")u=i.LayoutTab;else if(o=="hub")u=i.LayoutHub;else{if(o!="hubGroup")return r&&r("layout type="+o+" is not implemented"),null;u=i.LayoutHubGroup}var a=new u(e,s.layout,n);return t?t.appendStructElmt(a):a.parent=e,a},f=function(e,t,n){var r;switch(e){case s.pageheader:r=new i.PageHeader(t,s.pageheader,n);break;case s.pagefooter:r=new i.PageFooter(t,s.pagefooter,n);break;case s.pageactionpanel:switch(t.state.type){case"dashboard":r=new i.DashboardActionPanel(t,s.pageactionpanel,n);break;case"regular":r=new i.RegularActionPanel(t,s.pageactionpanel,n);break;default:throw new Error("Unknown page type["+t.state.type+"]")}break;case s.navigationpanel:r=new i.NavigationPanel(t,s.navigationpanel,n);break;default:throw new Error("Unknown static control["+e+"]")}return r&&t.addControl(r),r};t.createControl=u,t.createLayout=a,t.createPageControl=f,t.appendField2Cell=o,t.type=function(e){return s[e]},t.setImpl=function(e,t){i[e]=t}}),define("syracuse-tablet/html/js/helpers/articleParser",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlFactory"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("articleParser"),i=e("syracuse-tablet/html/js/helpers/utils"),s=e("syracuse-tablet/html/js/controls/ctrlFactory"),o=i.defineClass(function(e){var t=this;t.page=e},null,{doParse:function(e,t,n){var i=this;if(e.$layoutType){var o=s.createLayout(i.page,n,$.extend({},e));return o&&e.$items&&e.$items.forEach(function(e){i.doParse(e,t,o)}),o}if(e.$bind){var u=t.getPrototype(e.$bind);if(!u)throw new Error("Property not found in prototype - id["+e.$bind+"]");if(!u.$isExcluded)return s.createControl(i.page,n,$.extend({},e),u)}else r&&r("$layoutType or $bind expected")},parse:function(e,t){var n=this;try{if(!e||!t)throw new Error("Not empty $article and prototype are expected");if(!e.$layoutType)throw new Error("$layoutType expected for root layout");return n.doParse(e,t)}catch(s){throw r&&r("$article parser error",s),new Error("Error parsing $article ["+s.message+"]\n"+i.cleanStack(s.stack))}}}),u=function(e,t,n){var r=new o(e);return r.parse(t,n)},a={skipblock:!0,skipsection:!0,include:["$category","$layoutType","$title","$bind"],exclude:["$items","$widths"],protoExclude:["application/x-array","application/json"]},f=function(e){var t=[];e=e.split(",");if(e.length===0)throw new Error("Number of cells/rows must be > 0");if(e.length>12)throw new Error("Number of cells/rows must be <= 12");var n=0;e.forEach(function(e){e=parseInt(e,10),e=Math.ceil(e/12),n+=e,t.push(e)});if(n>12){var r=n-12;t.sort();while(r>0)for(var i=t.length-1;i>=0;i--)r>0&&t[i]>1&&(t[i]=t[i]-1,r--)}else if(n<12){var r=12-n;t.sort();while(r>0)for(var i=0;i<t.length;i++)r>0&&(t[i]=t[i]+1,r--)}return t.join(",")},l=function(e,t){if(!e)return null;var n;e.$layout?n=l(e.$layout,t):n={};if(e.$layoutType){if(!e.$items)throw new Error("$items is missing");n.$items=[],e.$items.forEach(function(e){n.$items.push(l(e,t))})}for(var r in e)r==="$widths"?n[r]=f(e[r]):t.exclude.indexOf(r)===-1&&t.include.indexOf(r)>=0&&(n[r]=e[r]);return n},c=function(e,t,n){return n=$.extend({},a,n),l(e,n)};t.article2Controls=u,t.convertDesktop=c}),define("syracuse-tablet/html/js/pages/page",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/articleParser","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/logger").getLogger("page"),o=e("syracuse-tablet/html/js/ui/uiUtils"),u=e("syracuse-tablet/html/js/helpers/articleParser"),a=e("syracuse-tablet/html/js/controls/ctrlFactory"),f=e("syracuse-tablet/html/js/helpers/notifications"),l={fullpage:'		<section class="s-m-page s-m-full {{type}} {{subtype}}" id="{{pageid}}" data-appid="{{appid}}" {{#if parentId}}data-parent-id="{{parentId}}"{{/if}} class="ctrl-event-click" style=""> 			<header></header> 			<section class="s-m-main-content"></section> 			<footer></footer> 			<div class="s-m-side-panel-dismiss" data-action="sidePanel" data-params="close"></div> 		</section> 	',vignette:'<section class= "s-m-page s-m-nested {{type}} {{subtype}}" id="{{pageid}}"></section>',leftpanel:'<section class="s-m-leftpanel"></section>',rightpanel:'<section class="s-m-rightpanel"></section>'},c=function(e,t){var n=e+"compiled",r=l[n];return r||(r=l[n]=Handlebars.compile(l[e])),r(t||{})},h={leftpanel:"tablet/x-navigationpanel",rightpanel:"tablet/x-pageactionpanel",header:"tablet/x-pageheader",footer:"tablet/x-pagefooter"},p={};for(var d in h)p[h[d]]=d;var v=function(){var e={};this.addPanel=function(t,n){var r;t.indexOf("panel")>=0?r=$(c(t)).appendTo(n.$$elmt):r=n.$$elmt.find(t),r.length>0&&(e[t]={$$parent:r,ctrlType:h[t]})},this.hasPanels=function(){return e["leftpanel"]!=null||e["rightpanel"]!=null},this.destroy=function(){if(!e)return;for(var t in e)e[t].control&&e[t].control.destroy();e=null},this.create=function(t){if(!e)return;for(var n in e)e[n].control=t.createStaticControl(e[n].ctrlType)},this.buildHtml=function(t,n){if(!e)return;var r;for(var i in e)r=e[i],r.control.buildHtml(r.$$parent,t,n)},this.afterRender=function(t,n){if(!e)return;var r;for(var i in e)r=e[i],r.control.afterRender(r.$$parent,t,n)},this.get=function(t){return(e[t]||{}).control},this.doAction=function(t,n,r){var i=n+"panel",s=e[i];if(!s)return;return s.control.toggle(r,function(r){if(n==="left"){var i=[t.$$contentElmt];e.header&&i.push(e.header.$$parent.find(".navbar")),e.footer&&i.push(e.footer.$$parent.find(".navbar")),i.forEach(function(e){e.css("left",r)})}var o=s.control.$$elmt.is(":visible"),u=t.$$elmt.children(".s-m-side-panel-dismiss");u[o?"addClass":"removeClass"](n),u.css(n,r)}),s}},m=r.defineClass(function(e,t,n,r,i){var s=this;t.options=t.options||{},s.prototype=n,s.article=r,s.rootLayout=null,s._staticControls=null,s.historyLength=0,s.historyTitle=t.name,s._$$parent=e,s.state=t,s.id=t.uuid,s.controlsMap={},s._nbControls=0,s.dao=null,s.isVignette=t.options.vignette===!0,s.isChild=t.options.parentId!=null,s._initRootElmt(e),f.subscribe(s,["sm.action.link"],1),s.onResizeHandler=null},null,{_initRootElmt:function(e){var t=this,n=t.state.type,r,i={appid:t.state.appId,pageid:t.id,type:n,subtype:t.state.subtype,parentId:t.getParentId()};t.isVignette?t.$$contentElmt=t.$$elmt=$(c("vignette",i)):t.state.type==="html"?(t.$$elmt=$(c("fullpage",i)),t.$$contentElmt=t.$$elmt.find("section.s-m-main-content")):(t.$$elmt=$(c("fullpage",i)),t.$$contentElmt=t.$$elmt.find("section.s-m-main-content"),t._initStaticControls()),t.$$elmt.hide(),t.$$elmt.appendTo(e),t.$$elmt.smPageController(t)},_initStaticControls:function(){var e=this;if(e.isVignette||e.state.type==="html")return;e._staticControls=new v(e),["header","footer","leftpanel","rightpanel"].forEach(function(t){e.addPanel(t)}),e._staticControls.hasPanels()&&f.subscribe(e,["sm.side.panel.ready"],1)},addPanel:function(e){return this._staticControls.addPanel(e,this)},createStaticControl:function(e){return a.createPageControl(e,this)},destroy:function(){var e=this;e.destroyLayout(),e.onResizeHandler&&($(window).off("resize",e.onResizeHandler),e.onResizeHandler=null),e.dao&&(e.dao.destroy(),e.dao=null),e.$$elmt&&(r.unbindObj(e.$$elmt),e.$$elmt=null),r.unbindObj(e),e.article=null,e.prototype=null,e._$$parent=null},_destroyAppChilds:function(){var e=this;if(e.$$elmt){var t=e._$$parent.find('.class[data-appId="'+e.getProp("appId")+'"]');t.length>0&&(s&&s("Page destroychilds",e.id),t.each(function(t){var n=$(this).smPageController();n&&n!=e&&n.destroy()}))}},destroySiblings:function(){var e=this;if(e.$$elmt){s&&s("Page destroySiblings","destroySiblings");var t=e.$$elmt.siblings(function(e){var t=$(this).smPageController();t&&t.destroy()})}},getType:function(){return this.state.type},getProp:function(e){return this.state[e]},setDao:function(e){var t=this;t.dao&&t.dao.destroy&&t.dao.destroy(),t.dao=e},getDao:function(){return this.dao},refresh:function(e,t){throw new Error("Not implemeneted")},refreshControls:function(e,t){var n=this,r;e&&e.length>0?(r=[],e.forEach(function(e){r.push(n.controlsMap[e])})):r=n.controlsMap,r.forEach(function(e){e.refresh(n.dao,t)})},load:function(e){var t=this;e=e||{};var n=$.Deferred();try{t.loadStructure().then(function(){return e.dontLoadData?$.smResolve():t.loadData()}).then(function(){return t.render()}).then(function(){return t.afterRender()}).then(function(){n.resolve()}).fail(function(e){n.reject(e)})}catch(r){n.reject(r)}finally{return n.promise()}},loadStructure:function(){var e=$.Deferred(),t=this;try{if(!t.article||!t.prototype)throw new Error("loadStructure - NULL article or prototype");t._staticControls&&t._staticControls.create(t),t.rootLayout=u.article2Controls(t,t.article,t.prototype),e.resolve()}catch(n){e.reject(n)}finally{return e.promise()}},loadData:function(){var e=$.Deferred(),t=this;try{t.setDao(null),e.resolve()}catch(n){e.reject(n)}finally{return e.promise()}},render:function(){var e=this;try{if(!e.rootLayout)throw new Error("buildHtml - NULL rootLayout");e._staticControls&&e._staticControls.buildHtml(e.dao),e.$$contentElmt&&(e._beforeAddContent(),e.rootLayout.buildHtml(e.$$contentElmt,e.dao,{makeFullHeight:e.isVignette})),e.addResizeListener()}catch(t){return $.smReject(t)}return $.smResolve()},destroyLayout:function(){var e=this;e._waiting&&(o.waitWheelDestroy(e._waiting),e._waiting=null),e.getProp.type==="appdashboard"&&e._destroyAppChilds(),e._staticControls&&(f.unsubscribe(e,["sm.side.panel.ready"]),e._staticControls.destroy(),e._staticControls=null);if(e.controlsMap){for(var t in e.controlsMap)e.controlsMap[t].destroy();e.controlsMap={}}e._nbControls=0,e.$$contentElmt.empty()},updateLayout:function(e){var t=this;return t.article=e,$.smResolve().then(function(){return t.destroyLayout()}).then(function(){return t._initStaticControls()}).then(function(){return t.load({dontLoadData:!0})})},addResizeListener:function(){var e=this;e.isVignette||(e.onResizeHandler=e.resizeHandler.bind(e),$(window).on("resize",e.onResizeHandler))},afterRender:function(){var e=this;if(e.controlsMap)for(var t in e.controlsMap)e.controlsMap[t].afterRender();setTimeout(function(){$(window).trigger("resize")},500)},isEditMode:function(){return!1},_beforeAddContent:function(){},addTitle:function(e,t){var n=this,r="";e&&(r="<header><h3>"+e+"</h3></header>"),t&&(r+="<p>"+t+"<p>"),r.length>0&&$(r).prependTo(n.$$contentElmt)},addControl:function(e){if(!e)return;this._nbControls++,this.controlsMap[e.id]=e},getControl:function(e){return this.controlsMap&&this.controlsMap[e]},getNbControls:function(e){return this._nbControls},activate:function(e,t){var n=this;s&&s("Page activate",n.id),n.historyLength=window.history.length,n._show(e,t)},deactivate:function(e){var t=this;s&&s("Page deactivate",t.id),t._hide(e)},_show:function(e,t){var n=this,r=n.getProp("transition");if(e){e._hide(function(){n.$$elmt.show(r||0,function(){t&&t()})});return}n.$$elmt.show(r==null?0:r,t)},_hide:function(e){var t=this;if(!t.$$elmt){e&&e();return}t._actSidePanel("close","all");var n=t.getProp("transition");t.$$elmt.hide(n==null?0:n,e)},isActive:function(){var e=this;return e.$$elmt&&e.$$elmt.is(":visible")},isLookup:function(){return this.prototype&&this.prototype.isLookup()},getParentNotif:function(){throw new Error("not implemented")},getParentId:function(){return this.isChild?this.state.options.parentId:null},getOpenLinkAttrs:function(){return{"data-nav":this.state.name}},resizeHandler:function(){var e=$(".s-m-chart-slot");for(var t=0;t<e.length;t++){var n=e[t],r=$(n);r.show();var i=r.highcharts();i&&i.setSize(r.width(),r.height(),!1)}},_actTest:function(e){var t=$('<h5 style="color:red">Action test succeeded</h5>').prependTo(this.$$elmt);window.setTimeout(function(){t.remove()},2e3)},_actSidePanel:function(e,t){var n=this;if(n._staticControls){t=t||"all";var t=t==="all"?["left","right"]:[t];t.forEach(function(t){var r=n._staticControls.doAction(n,t,e)})}},notifSidePanelReady:function(e,t){var n=this;if(!n.isActive())return;if(!n._staticControls)return;var r=n._staticControls.get("footer");if(!r)return;r.enablePanel(p[e],t)},waitWheelStart:function(e){var t=this;if(e){var n=t.controlsMap[e];n&&n.waitStart&&n.waitStart();return}t._waiting||(t._waiting=o.waitWheelCreate(t.$$elmt)),o.waitWheelStart(t._waiting)},waitWheelStop:function(e){var t=this;if(e){var n=t.controlsMap[e];n&&n.waitStop&&n.waitStop();return}t._waiting&&o.waitWheelStop(t._waiting)},notifActionLink:function(e,t){throw new Error("not implemented")},goBack:function(){window.history.back()}});i.registerClass(m,"page"),t.Page=m}),define("syracuse-tablet/html/js/pages/pageDashboard",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/page","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/page").Page,s=e("syracuse-tablet/html/js/helpers/logger").getLogger("page"),o=r.defineClass(function(e,t,n,r){var s=this;i.call(s,e,t,n,r),s.vignettes=[]},i,{destroy:function(){var e=this;i.prototype.destroy.call(e),e.vignettes=null},loadData:function(){return null},_beforeAddContent:function(){var e=this;e.addTitle(e.prototype.data("$title"),e.prototype.data("$description"))},addControl:function(e){var t=this;i.prototype.addControl.call(t,e),e&&e.isVignette()&&t.vignettes.push(e)},findVignetteControl:function(e){var t=this;if(!t.vignettes)return null;var n,r;for(var i=0;i<t.vignettes.length;i++){r=t.vignettes[i],n=r.getPageControl(e);if(n)return{control:n,vignette:r}}return null},afterRender:function(){var e=this,t=$.Deferred(),n=function(e){s&&s("Error loading vignettes",e),t.reject(e)};try{i.prototype.afterRender.call(e);var r=[];e.vignettes.forEach(function(t){var n={sdataParameters:e.state.options&&e.state.options.sdataParameters||{}};t.load(null,n)}),t.resolve()}catch(o){n(o)}finally{return t.promise()}}});t.Page=o}),define("syracuse-tablet/html/js/sdata/sdatawhere/operator",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils");t.Operator=function(e,t,n,r,i,s,o){var u=this;u.code=e,u.text=t,u.precedence=n,u.isPrefix=r,u.isInfix=i,u.isAssociative=s,u.isPredicate=o},r.defineClass(t.Operator,null,{toString:function(){return this.text}}),t.operators=new function(){function n(n,r,i,s,o,u,a){var f=new t.Operator(n||r,r,i,s,o,u,a);e.operators[f.text]=f}function r(){n(null,".",1,!1,!0,!0,!1),n(null,"not",2,!0,!1,!1,!1),n("*","mul",3,!1,!0,!0,!1),n("/","div",3,!1,!0,!0,!1),n("%","mod",3,!1,!0,!0,!1),n(null,"+",4,!1,!0,!0,!1),n(null,"-",4,!0,!0,!0,!1),n("=","eq",5,!1,!0,!1,!0),n("<>","ne",5,!1,!0,!1,!0),n("<","lt",5,!1,!0,!1,!0),n("<=","le",5,!1,!0,!1,!0),n(">","gt",5,!1,!0,!1,!0),n(">=","ge",5,!1,!0,!1,!0),n(null,"between",5,!1,!0,!1,!0),n(null,"in",5,!1,!0,!1,!0),n(null,"like",5,!1,!0,!1,!0),n(null,"and",6,!1,!0,!0,!0),n(null,"or",7,!1,!0,!0,!0),n(null,"(",8,!0,!1,!1,!1),n(null,")",8,!1,!1,!1,!1),n(null,",",8,!1,!1,!1,!1)}var e=this;return e.operators={},r(),e}}),define("syracuse-tablet/html/js/sdata/sdatawhere/token",["require","exports","module","syracuse-tablet/html/js/helpers/utils","./operator"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("./operator");t.tokenType={identifier:"identifier",operator:"operator",literal:"literal"},t.Token=function(e,t,n,r,i){var s=this;s.type=e,s.value=i;var o=t,u=n,a=r;s.getRemainingText=function(){return o.substring(u,o.length)}},r.defineClass(t.Token,null,{matches:function(e){return this.value instanceof i.Operator&&this.value.code==e}})}),define("syracuse-tablet/html/js/sdata/sdatawhere/tokenizer",["require","exports","module","./token","./operator"],function(e,t,n){var r=e("./token"),i=e("./operator");t.Tokenizer=new function(){function t(e,t){while(t<e.length&&e[t]===" ")t++;return t}function n(e){return(new RegExp("[0-9]")).test(e)}function s(e){return(new RegExp("[$a-zA-Z%']")).test(e)}function o(e){return(new RegExp("[$a-zA-Z0-9_%']")).test(e)}function u(e,t,i,s){var o=i+1;while(o<t.length&&n(t[o]))o++;var u;if(o<t.length&&t[o]==="."){o++;while(o<t.length&&n(t[o]))o++;u=parseFloat(e.substring(i,o))}else u=parseInt(e.substring(i,o),10);return s.push(new r.Token(r.tokenType.literal,e,i,o-i,u)),o}function f(e,t,n,s){var u=n+1;while(u<t.length&&o(t[u]))u++;var f=t.substr(n,u-n),l=i.operators.operators[f.toLowerCase()];if(l!=null)s.push(new r.Token(r.tokenType.operator,e,n,u-n,l));else{var c;(c=a[f])!==undefined?s.push(new r.Token(r.tokenType.literal,e,n,u-n,c)):s.push(new r.Token(r.tokenType.identifier,e,n,u-n,f))}return u}function l(e,t,n,i){var s=t[n],o=n+1,u=0,a="";while(o<t.length){if(t[o]===s){o++;if(o===t.length||t[o]!==s)return i.push(new r.Token(r.tokenType.literal,e,n,o-n,a)),o}a+=t[o++]}throw new Error("quoted string not terminated: "+e.substring(n))}function c(e,t,n,s){var o=i.operators.operators[t];return s.push(new r.Token(r.tokenType.operator,e,n,1,o)),n+1}function h(e,t,n,i){var s=n+1,o=t.length;while(s<o){if(t[s]=="@")break;s++}if(s===t.length)throw new Error("Where parser: date constant not terminated:"+e.substring(n,e.length));var u=t.substr(n+1,s-n-1),a=new Date(u);if(a!=null){var f=new r.Token(r.tokenType.literal,e,n,s+1-n,a);f.dataType="datetime",f.svalue=u,i.push(f)}return s+1}var e=this,a={"true":!0,"false":!1,"null":null};return e.tokenize=function(e){var r=[],i=0;while(i<e.length){i=t(e,i);var o=e[i];switch(o){case"@":i=h(e,e,i,r);break;case'"':case"'":i=l(e,e,i,r);break;case".":case"-":case"+":case"(":case")":case",":i=c(e,o,i,r);break;default:if(s(o))i=f(e,e,i,r);else{if(!n(o))throw new Error("invalid character: "+e.substring(i));i=u(e,e,i,r)}}}return r},e}}),define("syracuse-tablet/html/js/sdata/sdatawhere/expression",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils");t.Expression=function(e){var t=this;t.children=null,e.operator?(t.type="operator",t.value=e.operator,t.children=[],e.expression1&&t.children.push(e.expression1),e.expression2&&t.children.push(e.expression2)):e.expressionType&&(t.type=e.expressionType,t.value=e.value,t.svalue=e.svalue,t.dataType=e.dataType,t.type==="function"&&(t.children=[]))},r.defineClass(t.Expression,null,{isPredicate:function(){switch(this.type){case"operator":return this.value.isPredicate;case"identifier":return!0;case"function":return!0;case"literal":return!1;default:throw new Error("invalid expression type: "+this.type)}},toString:function(){if(this.children==null)return this.value.toString();var e=[];e.push("["+this.value.toString());for(var t=0;t<this.children.length;t++)e.push(" "+this.children[t].toString());return e.push("]"),e.join("")}})}),define("syracuse-tablet/html/js/sdata/sdatawhere/parser",["require","exports","module","./token","./operator","./tokenizer","./expression"],function(e,t,n){var r=e("./token"),i=e("./operator"),s=e("./tokenizer"),o=e("./expression");t.Parser=new function(){function n(e,t,n,r){if(t[0]==e.length||!e[t[0]].matches("and"))throw new Error("invalid expression: expected 'and' after "+e[t[0]-1].getRemainingText());t[0]++;var i=u(e,t,r);n.children.push(i)}function u(e,t,r){var s=a(e,t);while(t[0]<e.length){var l=e[t[0]],c=l.value instanceof i.Operator?l.value:null;if(c==null||!c.isInfix||c.precedence>r)break;t[0]++;if(c.code=="in"){if(t[0]===e.length||!e[t[0]].matches("("))throw new Error("invalid expression: '(' expected after "+l.getRemainingText());t[0]++,s=new o.Expression({operator:c,expression1:s}),f(e,l,t,s.children)}else{var h=u(e,t,c.precedence-1);s=new o.Expression({operator:c,expression1:s,expression2:h}),c.code=="between"&&n(e,t,s,c.precedence)}if(!c.isAssociative&&c.precedence==r)return s}return s}function a(e,t){if(t[0]==e.length)throw new Error("premature end of expression");var n=e[t[0]];switch(n.type){case r.tokenType.identifier:return t[0]++,t[0]<e.length&&e[t[0]].matches("(")?c(e,n,t):new o.Expression({expressionType:"identifier",value:n.value});case r.tokenType.literal:return t[0]++,new o.Expression({expressionType:"literal",value:n.value,svalue:n.svalue,dataType:n.dataType});case r.tokenType.operator:var i=n.value;if(!i.isPrefix)throw new Error("invalid expression: expected beginning of term at "+n.getRemainingText());return t[0]++,l(e,i,t);default:throw new Error("internal error: bad token type "+n.type)}}function f(e,n,r,i){if(r[0]<e.length&&e[r[0]].matches(")")){r[0]++;return}while(r[0]<e.length){var s=u(e,r,t);i.push(s);if(r[0]<e.length&&e[r[0]].matches(")")){r[0]++;return}if(r[0]==e.length||!e[r[0]].matches(","))throw new Error("invalid expression: expected ',' or ')' at "+e[r[0]].getRemainingText());r[0]++}throw new Error("invalid function call syntax: argument missing after "+n.getRemainingText())}function l(e,t,n){var r;switch(t.code){case"-":case"not":return r=u(e,n,1),new o.Expression({operator:t,expression1:r});case"(":r=u(e,n,t.precedence);if(n[0]==e.length||!e[n[0]].matches(")"))throw new Error("invalid expression: expected ')' after "+e[n[0]-1].getRemainingText());return n[0]++,r;default:throw new Error("internal error: bad prefix operator "+t.code)}}function c(e,t,n){n[0]++;var r=new o.Expression({expressionType:"function",value:t.value});return f(e,t,n,r.children),r}var e=this,t=8;return e.parse=function(e){if(e==null||e.length==0)return null;var n=s.Tokenizer.tokenize(e),r=[];r[0]=0;var i=u(n,r,t);if(r[0]!=n.length)throw new Error("invalid expression: unexpected token at "+n[r[0]].getRemainingText());return i},e}}),define("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils",["require","exports","module"],function(e,t,n){function r(e,t,n){if(t.type=="identifier"){t.property=e[t.value];var i=n&&n.$properties&&n.$properties.$resources?n.$properties.$resources.$item:null;i&&i.$properties&&i.$properties[t.value]&&i.$properties[t.value].$type==="application/x-boolean"&&(t.property=t.property===!0?2:1)}else if(t.type=="literal")t.property=t.dataType=="datetime"?t.svalue:t.value;else if(t.children){var s=null;if(t.type=="operator")switch(t.value.code){case"and":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property&&t.children[1].property;break;case"or":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property||t.children[1].property;break;case"between":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property>=t.children[1].property&&t.children[0].property<=t.children[2].property;break;case">=":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property>=t.children[1].property;break;case">":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property>t.children[1].property;break;case"<=":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property<=t.children[1].property;break;case"<":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property<t.children[1].property;break;case"like_s":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property.toUpperCase().indexOf(t.children[1].property.toUpperCase())===0;break;case"like":t.children.forEach(function(t){r(e,t,n)});var o=t.children[1].property.toUpperCase().replace(/%/g,"");t.property=t.children[0].property.toUpperCase().indexOf(o)>=0;break;case"=":t.children.forEach(function(t){r(e,t,n)}),t.children[0].property=="0000-00-00"&&t.children[1].dataType==="datetime"&&(t.children[0].property=""),t.children[1].property=="0000-00-00"&&t.children[0].dataType==="datetime"&&(t.children[1].property=""),t.property=t.children[0].property==t.children[1].property;break;case"<>":t.children.forEach(function(t){r(e,t,n)}),t.children[0].property=="0000-00-00"&&t.children[1].dataType==="datetime"&&(t.children[0].property=""),t.children[1].property=="0000-00-00"&&t.children[0].dataType==="datetime"&&(t.children[1].property=""),t.property=t.children[0].property!=t.children[1].property;break;case".":r(e,t.children[0],n),r(t.children[0].property,t.children[1],n),t.property=t.children[1].property;break;default:t.property=s,t.children.forEach(function(t){r(e,t,n),t.type=="literal"&&(t.property=s)})}else if(t.type=="function")throw new Error("exp.type == 'function' not implemented")}}t.execWhere=function(e,t,n){return t==null?!0:(r(e,t,n),t.property)}}),define("syracuse-tablet/html/js/sdata/sdataDispatcherLocal",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/sdata/sdatawhere/parser","syracuse-tablet/html/js/sdata/sdatawhere/whereUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/sdata/entities/clientContract"),s=e("syracuse-tablet/html/js/sdata/sdatawhere/parser").Parser,o=e("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils");t.Dispatcher=r.defineClass(function(){},null,{getEntity:function(e){var t=e&&e.split(".");return t&&t[0]&&t[0].smStartsWith("QUERY~")?t=t[0].split("~")[1]:t=t&&t[0],t&&i.getEntity(t)},accept:function(e,t){var n=this,r=$.Deferred();return r.resolve(n.getEntity(e.$representation)!=null),r.promise()},prototype:function(e,t){var n=$.Deferred();return n.reject("Dispatcher should never request for prototypes since they are cached in the application model on client side"),n.promise()},"new":function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services.$new(e,t)},read:function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services.$read(e,t)},query:function(e,t){var n=this,r=n.getEntity(e.$representation),u=r.$services.$query(e,t);if(e.$where){var a=$.Deferred();return u.then(function(t){var n=t.$resources,r=s.parse(e.$where),u=e.$representation&&e.$representation.split("."),f=i.getPrototype(u[0],u[1]),l=[];n.forEach(function(e,t){o.execWhere(e,r,f)&&l.push(e)}),a.resolve({$resources:l})}).fail(function(e){a.reject(e)}),a.promise()}return u},save:function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services.$save(e,t)},"delete":function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services.$delete(e,t)},service:function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services[e.$service](e,t)}})}),define("syracuse-tablet/html/js/sdata/sdataDispatcherHttp",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/sdata/sdataHttp"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/helpers/logger").getLogger("sdataDispatcher"),u=e("syracuse-tablet/html/js/sdata/sdataHttp");t.Dispatcher=r.defineClass(function(){},null,{accept:function(){var e=$.Deferred();return e.resolve(!0),e.promise()},_useCache:function(e,t){var n=e.$parsedUrl&&e.$parsedUrl.query&&e.$parsedUrl.query.nocache;return n?!1:!0},prototype:function(e,t){var n=$.Deferred();return n.reject("Dispatcher should never request for prototypes since they are cached in the application model on client side"),n.promise()},"new":function(e,t){var n=this,i=$.Deferred();try{n._newGetCache(e,t).then(function(i){return i?(o&&o("Read template from cache: "+e.$representation),i.$uuid=r.UUID(),i):n._newDoHttp(e,t).then(function(t){if(t.isSuccess){var r=t.responseJSON;return n._newPutCache(e,r).then(function(){return r})}throw new Error("Error reading $template: "+JSON.stringify(t))}).fail(function(e){return $.smReject(e)})}).then(function(e){i.resolve(e)}).fail(function(e){i.reject(e)})}catch(s){i.reject(s)}return i.promise()},_newGetCache:function(e){var t=this;if(t._useCache(e,null,"read")){var n=s.getCache();return o&&o("Reading template from cache: "+e.$representation),n.read({$representation:"$templates",$endpoint:e.$endpoint,$key:e.$representation})}return o&&o("Disabled reading template from cache : "+e.$representation),$.smResolve()},_newDoHttp:function(e,t){var n={method:"GET",url:e.$link.$url};return u.send(n)},_newPutCache:function(e,t){var n=this;if(n._useCache(e,t,"write")){o&&o("Writing template to cache: "+e.$representation);var r=s.getCache();return r.put({$representation:"$templates",$key:e.$representation,$endpoint:e.$endpoint,$data:t})}return o&&o("Disabled writing template to cache : "+e.$representation),$.smResolve()},read:function(e,t){var n=this,r=$.Deferred();try{n._readGetCache(e,t).then(function(r){return r?(o&&o("Read data from cache: "+e.$representation),r):n._readDoHttp(e,t).then(function(t){if(t.isSuccess){var r=t.responseJSON;return n._readPutCache(e,r).then(function(){return r})}throw new Error("Error reading data: "+JSON.stringify(t))}).fail(function(e){return $.smReject(e)})}).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)})}catch(i){r.reject(i)}return r.promise()},_readGetCache:function(e){var t=this;if(t._useCache(e,null,"read")){var n=s.getCache();return o&&o("Reading data from cache: "+e.$representation),n.read({$representation:e.$representation,$endpoint:e.$endpoint,$key:e.$key})}return o&&o("Disabled reading data from cache : "+e.$representation),$.smResolve()},_readDoHttp:function(e,t){var n={method:"GET",url:e.$link.$url};return u.send(n)},_readPutCache:function(e,t){var n=this;if(n._useCache(e,t,"write")){o&&o("Writing data to cache: "+e.$representation);var r=s.getCache();return r.put({$representation:e.$representation,$key:e.$key,$endpoint:e.$endpoint,$data:t})}return o&&o("Disabled writing data to cache : "+e.$representation),$.smResolve()},query:function(e,t){var n=this,r=$.Deferred();try{n._queryGetCache(e,t).then(function(r){if(r&&r.length>0){o&&o("Queried data from cache: "+e.$representation);var i={};n._queryCutAndAddLinks(e,t,r,i);if(i.$resources.length>0)return i}return n._queryDoHttp(e,t).then(function(t){if(t.isSuccess){var r=t.responseJSON;return n._queryPutCache(e,r).then(function(){return r})}throw new Error("Error querying data: "+JSON.stringify(t,null,2))}).fail(function(e){return $.smReject(e)})}).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)})}catch(i){r.reject(i)}return r.promise()},_queryCutAndAddLinks:function(e,t,n,r){var i=this,o=e.$parsedUrl.source.split("?")[0],u="",a,f=30;e.$parsedUrl.query&&e.$parsedUrl.query.where&&(u+="&where="+e.$parsedUrl.query.where),a=e.$parsedUrl.query&&e.$parsedUrl.query.key;var l,c,h=r.$resources=[],p=!1,d=!1,v,m=e.$endpoint+"."+e.$representation,g=s.getPrototype(m),y,b;g=g.$properties&&g.$properties.$resources&&g.$properties.$resources.$item||g;var w;g.$key?w=g.$key.replace(/{/g,"").replace(/}/g,""):w="$uuid";var E=g.$properties[w],S=E&&E.$type&&E.$type!=="application/x-string";if(a&&a.smStartsWith("gt")){y=S?0+a.substr(3):""+a.substr(3);for(v=0;v<n.length;v++){b=i._calculateKey(g,n[v]),b=S?+b:""+b;if(b>y){h.push(n[v]);if(h.length>f)break}else d=!0}h.length>0&&(h.length>f&&(h.pop(),p=!0),l=i._calculateKey(g,h[0]),c=i._calculateKey(g,h[h.length-1]))}else if(a&&a.smStartsWith("lt")){if(a.length>3){y=S?+a.substr(3):""+a.substr(3);for(v=n.length-1;v>=0;v--){b=i._calculateKey(g,n[v]),b=S?0+b:""+b;if(b<y){h.push(n[v]);if(h.length>f)break}else p=!0}h.length>f&&(d=!0,h.pop())}else for(v=n.length-1;v>=0;v--){h.push(n[v]);if(h.length>f)break}h.length>0&&(h.length>f&&(d=!0,h.pop()),r.$resources=h=h.reverse(),l=i._calculateKey(g,h[0]),c=i._calculateKey(g,h[h.length-1]))}else{for(v=0;v<n.length;v++){h.push(n[v]);if(h.length>f)break}h.length>0&&(h.length>f&&(p=!0,h.pop()),l=i._calculateKey(g,h[0]),c=i._calculateKey(g,h[h.length-1]))}var x=r.$links={};a&&(x.$first={$url:o+"?representation="+e.$representation+u}),a&&l&&d&&a!=="gt"&&(x.$previous={$url:o+"?representation="+e.$representation+u+"&key=lt."+l}),a!=="lt"&&c&&p&&(x.$next={$url:o+"?representation="+e.$representation+u+"&key=gt."+c}),a!=="lt"&&(x.$last={$url:o+"?representation="+e.$representation+u+"&key=lt"}),x.$more={$url:e.$parsedUrl.source+"&nocache=true"}},_queryGetCache:function(e){var t=this;if(t._useCache(e,null,"read")){var n=s.getCache();o&&o("Querying data from cache: "+e.$representation);var r=e.$endpoint+"."+e.$representation,i=s.getPrototype(r);return i?(t._checkQueryPrototype(e,i),n.query({$proto:i,$endpoint:e.$endpoint,$where:e.$where})):u.fetchRemotePrototype(e).then(function(r){return t._checkQueryPrototype(e,r),n.query({$proto:r,$endpoint:e.$endpoint,$where:e.$where}).fail(function(e){return $.smReject(e)})})}return o&&o("Disabled querying data from cache : "+e.$representation),$.smResolve()},_queryDoHttp:function(e,t){var n={method:"GET",url:e.$link.$url};return u.send(n)},_queryPutCache:function(e,t){var n=this;if(n._useCache(e,t,"write")){o&&o("Writing data to cache: "+e.$representation);var r=s.getCache(),i=e.$endpoint+"."+e.$representation,u=s.getPrototype(i);return u=u.$properties&&u.$properties.$resources&&u.$properties.$resources.$item||u,t.$resources.forEachPromise(function(t){var i=n._calculateKey(u,t);return r.put({$representation:e.$representation,$key:i,$endpoint:e.$endpoint,$data:t})})}return $.smResolve(t)},save:function(e,t){var n=this,r=$.Deferred();try{n._saveDoHttp(e,t).then(function(t){if(t.isSuccess){var i=t.responseJSON;return n._savePutCache(e,i).then(function(){return i})}r.reject(t)}).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)})}catch(i){r.reject(i)}return r.promise()},_saveDoHttp:function(e,t){var n={method:e.$link.$method,url:e.$link.$url,send:t};return u.send(n)},_savePutCache:function(e,t){var n=this;try{if(n._useCache(e,t,"write")){o&&o("Writing data to cache: "+e.$representation);var r=s.getCache(),i=e.$key;if(!i){var u=e.$endpoint+"."+e.$representation,a=s.getPrototype(u);a=a.$properties&&a.$properties.$resources&&a.$properties.$resources.$item||a,i=n._calculateKey(a,t)}return r.put({$representation:e.$representation,$key:i,$endpoint:e.$endpoint,$data:t})}return o&&o("Disabled writing data to cache : "+e.$representation),$.smResolve()}catch(f){return $.smReject(f)}},"delete":function(e,t){var n=this,r=$.Deferred();try{n._deleteDoHttp(e,t).then(function(t){if(t.isSuccess){var r=t.responseJSON;return n._deleteRemoveCache(e,r).then(function(){return r})}return $.smReject(t)}).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)})}catch(i){r.reject(i)}return r.promise()},_deleteDoHttp:function(e,t){var n={method:e.$link.$method,url:e.$link.$url};return u.send(n)},_deleteRemoveCache:function(e,t){var n=this;if(n._useCache(e,t,"write")){o&&o("Deleting data from cache: "+e.$representation);var r=s.getCache();return r.remove({$representation:e.$representation,$key:e.$key,$endpoint:e.$endpoint})}return o&&o("Disabled deleting data from cache : "+e.$representation),$.smResolve()},service:function(e,t){if(r.isOnline()){var n={method:e.$link.$method,url:e.$link.$url,data:t};return u.send(n)}return $.smResolve({$diagnoses:[{$severity:"error",$message:i.text("error.service.offline")}]})},_calculateKey:function(e,t){var n;return e.$key?n=e.$key.replace(/\{(.*?)\}/g,function(e,n){return t[n]}):n=t.$uuid,n},_checkQueryPrototype:function(e,t){e.$representation.smStartsWith("QUERY~")&&t.$properties.$resources.$item&&!t.$properties.$resources.$item.$type&&(t.$properties.$resources.$item.$type="{$baseType}."+e.$representation)}})}),define("syracuse-tablet/html/js/sdata/sdataDispatcher",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/sdata/sdataDispatcherLocal","syracuse-tablet/html/js/sdata/sdataDispatcherHttp"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("sdataDispatcher"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/sdata/sdataDispatcherLocal").Dispatcher,o=e("syracuse-tablet/html/js/sdata/sdataDispatcherHttp").Dispatcher,u=[new s,new o];t.dispatch=function(e,n,i){var s=$.Deferred();try{r&&r("Dispatch: "+e.$method+": "+e.$url);var o=t.parseLink(e),a;u.forEachPromise(function(e){return e.accept(o,n)},function(e,t){return t===!0?(a=e,!0):!1});var f=a[o.$operation](o,n);if(!f)throw new Error("Could not dispatch: "+e.$method+": "+e.$url+" ("+o.$operation+")");f.then(function(e){s.resolve(e)}).fail(function(e){s.reject(e)})}catch(l){s.reject(l)}return s.promise()},t.parseLink=function(e){var t=e.$url,n={$link:e,$parsedUrl:i.parseSDataURL(e.$url)},r=/\('(.*?)'\)/;n.$endpoint=n.$parsedUrl.application+"."+n.$parsedUrl.contract+"."+n.$parsedUrl.dataset;var s=n.$parsedUrl.directory,o;if(e.$method==="GET"){if(t.indexOf("$prototypes")>-1)n.$operation="prototype",n.$representation=/\$prototypes\('(.*?)'\)/.exec(t)[1];else if(s.indexOf("$template")>-1)n.$operation="new",n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation;else if((o=s.indexOf("/$services/"))>-1){var u=s.substring(o+11);n.$operation="service",n.$service=u,n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation}else{var a=r.exec(s),f=s.indexOf("/QUERY(")>-1;a&&!f?(n.$operation="read",n.$key=a[1],n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation):(n.$operation="query",n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation)}n.$parsedUrl.query&&n.$parsedUrl.query.where&&(n.$where=n.$parsedUrl.query.where)}else if((o=s.indexOf("/$services/"))>-1){var u=s.substring(o+11);n.$operation="service",n.$service=u,n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation}else if(e.$method==="DELETE"){var a=r.exec(s);n.$operation="delete",n.$key=a[1],n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation}else{var a=r.exec(s);a?(n.$operation="save",n.$key=a[1],n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation):(n.$operation="save",n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation)}return n}}),define("syracuse-tablet/html/js/pages/pageRegular",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/pages/page","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/application/appFactory","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/logger").getLogger("page"),s=e("syracuse-tablet/html/js/pages/page").Page,o=e("syracuse-tablet/html/js/helpers/globals"),u=e("syracuse-tablet/html/js/sdata/sdataDispatcher"),a=e("syracuse-tablet/html/js/application/appFactory"),f=e("syracuse-tablet/html/js/sdata/sdataUtils"),l=e("syracuse-tablet/html/js/ui/modal"),c=e("syracuse-tablet/html/js/helpers/notifications"),h=["$more"],p=r.defineClass(function(e,t,n,r){var i=this;s.call(i,e,t,n,r),i.gadget=i.state.options.gadget,i._initSdataInfo(i.state.options["sdata-url"],i.state.options["sdata-method"]),c.subscribe(i,["sm.lookup.selection"],1)},s,{_initSdataInfo:function(e,t){var n=this;e||(n.gadget?e=n.gadget.getSDataUrl(n.prototype):e=n.prototype.data("$url"));if(n.gadget){var r=n.gadget.getParameters();r.where&&(e=f.addWhereClause(e,r.where,n.state.options.sdataParameters))}if(!e)throw new Error("$url (sDataUrl) is expected");n.state.options["sdata-url"]=n.sDataUrl=e,n.sDataMethod=t||"GET"},destroy:function(){var e=this;s.prototype.destroy.call(e),e.gadget=null},isEditMode:function(){return this.prototype.isEditMode()},_beforeAddContent:function(){var e=this;e.isVignette||e.addTitle(o.getApplication().getTitle()+" - "+e.prototype.data("$title"))},getOpenLinkAttrs:function(){var e=this,t=s.prototype.getOpenLinkAttrs.call(e);return t["data-sdata-url"]=e.sDataUrl,t["data-sdata-method"]=e.sDataMethod,t["data-gadget-id"]=e.gadget.data("$uuid"),t},refresh:function(e,t){var n=this,r=$.Deferred(),i=e["sdata-url"],s=e.controlId,o=function(r){var i=s?h.indexOf(e.type)>=0:!1;if(t){var o="wait"+r.smCapitalize();t[o]&&t[o](i?s:null);return}n["waitWheel"+r.smCapitalize()].call(n,i?s:null)};try{var u=function(){o("stop"),n.refreshControls(s?[s]:null,e),r.resolve()};i?(o("start"),n._initSdataInfo(i),n.loadData().then(function(){u()}).fail(function(e){o("stop"),r.reject(e)})):u()}catch(a){r.reject(a)}finally{return r.promise()}},loadData:function(){var e=$.Deferred(),t=this,n=function(t){i&&i("loadData failed",t),e.reject(t)};try{u.dispatch({$url:t.sDataUrl,$method:t.sDataMethod}).then(function(n){return t.updateDao(n),e.resolve()}).fail(function(e){n(e)})}catch(r){n(r)}finally{return e.promise()}},updateDao:function(e,t){var n=this;n.setDao(a.createDaoSdata("representation",e,n.prototype,null,t||{}))},notifLookupSelection:function(e,t){var n=this;if(!n.isActive())return;try{var i=n.getControl(t);if(!i)throw new Error("Control not found '"+t+"'");i.setLookupValue(e)}catch(s){r.modalError("notifLookupSelection failed",s)}},notifActionLink:function(e,t,n){var i=this;if(!i.isActive())return;try{i._displayActionMsg(e,t.name,n);switch(t.name){case"$save":break;case"$delete":break;default:}}catch(s){r.modalError("notifActionLink failed",s)}},_displayActionMsg:function(e,t,n,r){var i=f.scanDiagnoses(n);if(i.length>0){var s=[];i.forEach(function(e){s.push(e.$message)}),n=s.join("\n")}else n=e?"":JSON.stringify(n,null,2);l.info("Action "+t+(e?" succeeded":"failed")+"\n"+this.id,n,r)}});t.Page=p}),define("syracuse-tablet/html/js/pages/pageRowDetail",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/pages/pageRegular"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/pages/pageRegular").Page,u=r.defineClass(function(e,t,n,r){var i=this;o.call(i,e,t,n,r),i.parentDao=null},o,{_initSdataInfo:function(e,t){},addPanel:function(e){return e=="footer"||e=="rightpanel"||e=="leftpanel"?null:o.prototype.addPanel.call(this,e)},destroy:function(){var e=this;o.prototype.destroy.call(e),e.rowDao&&(e.rowDao.destroy(),e.rowDao=null)},refresh:function(e,t){var n=this;throw new Error("Not implemented")},load:function(e){var t=this,n=e?e.parentPage:null;if(!n)throw new Error("rowdetail page - Unexpected empty parent page");var r=n.getControl(t.state.options.controlId);if(!r)throw new Error("rowdetail page - Array datasource not found");t.rowDao=r.getRowDetailDao(t.state.options.dataParams);if(!t.rowDao)throw new Error("rowdetail page - Row data not found");return o.prototype.load.call(t,e)},loadData:function(e){var t=this;return this.setDao(t.rowDao),$.smResolve()},_actValidate:function(e){var t=this},getParentNotif:function(){return null}});t.Page=u}),define("syracuse-tablet/html/js/pages/pageLookup",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/pages/pageRegular","syracuse-tablet/html/js/application/eventListener"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/pages/pageRegular").Page,u=e("syracuse-tablet/html/js/application/eventListener"),a=r.defineClass(function(e,t,n,r){var i=this;o.call(i,e,t,n,r),i.selectedRow=null},o,{addPanel:function(e){return e=="footer"||e=="rightpanel"||e=="leftpanel"?null:o.prototype.addPanel.call(this,e)},destroy:function(){var e=this;o.prototype.destroy.call(e),e.selectedRow=null},_actSelect:function(e){var t=this;t.selectedRow=t.dao.getRowById(e,!0),t.isVignette?u.triggerAction(t.$$elmt,"vignetteBack"):t.goBack()},getParentNotif:function(){var e=this;return e.selectedRow?{parentId:e.state.options.parentId,controlId:e.state.options.controlId,notifId:"sm.lookup.selection",notifData:e.selectedRow}:null}});t.Page=a}),define("syracuse-tablet/html/js/pages/html/pageLogin",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/page","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/page").Page,s=e("syracuse-tablet/html/js/application/authentication"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=e("syracuse-tablet/html/js/helpers/locale"),a='	<div class="container">		<div class="row">			<div class="col-md-3"></div>			<div class="col-md-6">				<div class="panel panel-default">					<div class="panel-heading s-m-login-header"><span class="s-m-signin">{{label_signin}} </span> <span class="s-m-brand">{{label_brand}}</span> <span class="s-m-product">{{label_product}}</span></div>					<div class="panel-body s-m-login-body">						<br>						<div class="form-group">							<input type="text" value="" class="form-control s-m-login-form-input" placeholder="{{label_user}}"	id="login-user">						</div>						<br>						<div class="form-group">							<input type="password" class="form-control s-m-login-form-input" placeholder="{{label_password}}" id="login-password">						</div>						<br>						<br>						<button id="login-login" data-action="login" type="button" class="btn btn-primary s-m-signin-btn">{{act_login}}</button>					</div>				</div>			</div>		</div>		<div class="row">			<div class="col-md-3"></div>			<div class="col-md-6">				<div id="login-reason" style="display: none" class="alert alert-info" role="alert"></div>				<div id="login-success" style="display: none" class="alert alert-success" role="alert"></div>				<div id="login-fail" style="display: none" class="alert alert-danger" role="alert"></div>			</div>		</div>	</div>',f,l=r.defineClass(function(e,t){var n=this;i.call(n,e,t)},i,{loadStructure:function(){return $.smResolve()},render:function(){var e=this,t=$.Deferred(),n={label_user:u.text("login.label.user"),label_password:u.text("login.label.password"),act_login:u.text("login.label.signinaction"),label_signin:u.text("login.label.signin"),label_brand:u.text("login.label.brand"),label_product:u.text("login.label.product")},r=Handlebars.compile(a);return e.$$contentElmt.html(r(n)),e.state.options.reason&&e.$$contentElmt.find("#login-reason").text(e.state.options.reason).show(),t.resolve(),t.promise()},_actLogin:function(){var e=this,t=$.Deferred(),n=!1;try{e.$$elmt.find("#login-reason").remove();var i=e.$$elmt.find("#login-success").hide(),u=e.$$elmt.find("#login-fail").hide(),a=e.$$elmt.find("#login-user").val(),f=e.$$elmt.find("#login-password").val(),l=e.$$elmt.find("#login-locale").val(),c=null;e.waitWheelStart(),s.login(a,f).then(function(e,t,n){return e?(c=t,$.smResolve()):$.smReject(n)}).then(function(){e.waitWheelStop();var t=$.Deferred();return o.publish("sm.login",c,t),t.promise()}).then(function(e){}).fail(function(t){var n,i;r.isError(t)?(i=t.message,n=r.cleanStack(t.stack,3,!0)):i=t,u.show().html("Login failed<p>"+i+"</p>"+(n?n:"")),e.waitWheelStop()})}catch(h){t.reject(h)}finally{return t.promise()}}});t.Page=l}),define("syracuse-tablet/html/js/pages/html/pageHtml",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/page","syracuse-tablet/html/js/pages/html/pageTemplates"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/page").Page,s=e("syracuse-tablet/html/js/pages/html/pageTemplates"),o=r.defineClass(function(e,t){var n=this;i.call(n,e,t)},i,{loadStructure:function(){return $.smResolve()},render:function(){try{return this.buildHtml()}catch(e){return $.smReject(e)}},buildHtml:function(){throw new Error("Not implemented")},buildHtmlTpl:function(e,t){var n=$.Deferred(),r=this;try{r.buildHtmlContent(e).then(function(e){r.$$contentElmt.html(e)}).then(function(){return r.buildHtmlHeader(t)}).then(function(e){r.$$elmt.children("header").html(e)}).then(function(){n.resolve()}).fail(function(e){n.reject(e)})}catch(i){n.reject(i)}finally{return n.promise()}},buildHtmlContent:function(e){var t=this;return s.getTemplateContent(t.state,e||{})},buildHtmlHeader:function(e){var t=this;return s.getTemplateHeader(t.state,e||{})}});t.Page=o}),define("syracuse-tablet/html/js/pages/html/pageSettings",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/pages/html/pageHtml","syracuse-tablet/html/js/pages/html/pageTemplates","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/application/settings"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/pages/html/pageHtml").Page,o=e("syracuse-tablet/html/js/pages/html/pageTemplates"),u=e("syracuse-tablet/html/js/helpers/notifications"),a=e("syracuse-tablet/html/js/ui/modal"),f=e("syracuse-tablet/html/js/application/settings"),l={header:{pageId:"login",headerttl:"Sage X3 Mobile Login Page",forgotpwd:"Forgot password"},content:{listtitle:"Select an application to install"}},c=r.defineClass(function(e,t){var n=this;s.call(n,e,t),n.appList=null},s,{loadData:function(){var e=this,t=$.Deferred();return f.getMyApplications().then(function(n){e.appList=n||[],t.resolve()}).fail(function(e){t.reject(e)}),t.promise()},buildHtmlContent:function(){var e=this,t=$.Deferred();try{var n=[];if(e.appList){var r=i.getApplication();e.appList.forEach(function(e){n.push('<option value="'),n.push(e.$uuid),n.push('" '),n.push(r&&r.uuid==e.$uuid?"selected":""),n.push(" >"),n.push(e.title||e.description),n.push(" ("+e.applicationName+")"),n.push("</option>")})}l.content.listcontent=n.join(""),s.prototype.buildHtmlContent.call(e,l.content).then(function(e){t.resolve(e)}).fail(function(n){o.resolveError(t,e.state.name,n)})}catch(u){o.resolveError(t,e.state.name,u)}finally{return t.promise()}},afterRender:function(){var e=this;s.prototype.afterRender.call(e),e.$$elmt.find(".selectpicker").selectpicker()},_actSelect:function(e){var t=this,n;t.appList.some(function(t){if(t.$uuid===e)return n=t,!0}),f.getMyApplicationDetail(n).then(function(e){t.deactivate(null),u.publish("sm.switch.app",e)}).fail(function(e){a.error("Error loading application",e)})}});t.Page=c}),define("syracuse-tablet/html/js/pages/html/pageAbout",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/html/pageHtml"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/html/pageHtml").Page,s=r.defineClass(function(e,t){var n=this;i.call(n,e,t)},i,{});t.Page=s}),define("syracuse-tablet/html/js/helpers/dashboardUtils",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/prototype"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/prototype"),s=function(e,t){var n={$title:e.$title,$description:e.$description,$properties:{}},s=Object.keys(e.$vignettes||[]);for(var o=0;o<s.length;o++){var u=s[o],a=$.extend({},e.$vignettes[u]),f=a.$uuid;a.$gadget=t.getGadgetData(f),a.$gadget?(a.$gadget=$.extend({},a.$gadget),a.$gadget.$uuid=f,a.$uuid=u,a.$type="tablet/x-vignette",a.domId=r.readableuid("vgnt",a.$gadget.$type)):(a.$gadget={$uuid:f,$type:"$gadgetMissing"},a.$uuid=u,a.$type="tablet/x-vignette",a.domId=r.readableuid("vgnt",a.$gadget.$type)),n.$properties[u]=a}return i.create(n)},o=function(e){var t=Object.keys(e.$vignettes||[]);if(t.length===0)throw new Error("Dashboard "+e.$dashboardName+" has no vignette");return e.$article||(e.$article={$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"",$items:[]}]},t.forEach(function(t){e.$article.$items[0].$items.push({$bind:t,$size:"medium"})})),e.$article};t.getDashboardArticle=o,t.getDashboardProto=s}),define("syracuse-tablet/html/js/application/daoApp",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/dashboardUtils","syracuse-tablet/html/js/application/pageHelper","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/application/gadget","syracuse-tablet/html/js/sdata/sdataHttp","syracuse-tablet/html/js/helpers/constants"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/prototype"),s=e("syracuse-tablet/html/js/helpers/dashboardUtils"),o=e("syracuse-tablet/html/js/application/pageHelper"),u=e("syracuse-tablet/html/js/sdata/entities/clientContract"),a=e("syracuse-tablet/html/js/application/gadget").Klass,f=e("syracuse-tablet/html/js/sdata/sdataHttp"),l=e("syracuse-tablet/html/js/helpers/constants"),c=r.defineClass(function(e){var t=this;t._appli=e,t.appMetaData=null},null,{destroy:function(){var e=this;e._appli=null},isApplicationLoaded:function(){var e=this;return e.appMetaData!=null},setApplicationDesc:function(e){var t=this;e&&(t.appMetaData=e,o.registerPages(t.appMetaData))},getApplicationName:function(){var e=this;return e.appMetaData&&e.appMetaData.$application.applicationName||""},getHomeDashboard:function(){var e=this,t;if(e.appMetaData&&e.appMetaData.$dashboards)for(var n in e.appMetaData.$dashboards){var r=e.appMetaData.$dashboards[n];r.$dashboardName===e.appMetaData.$application.$homeDashboard.dashboardName&&(t=r.$dashboardName+"."+l.DASHBOARD_PAGE_FACET)}return t},getRegularPageInfo:function(e){var t=this;e.options=e.options||{};var n=$.Deferred(),r;try{u.getRegularPageInfo(e.name).then(function(n){return n!=null?(r=!0,n):t.getPageMetaData(e.name)}).then(function(n){return n?n:(r=!0,f.fetchRemotePrototype(e.name).then(function(n){return t.registerAdditionalPage(e.name,n,null)}))}).then(function(t){if(!t)throw new Error("Page not found - PageId="+e.name);if(!t.$page)throw new new Error("Bad page description - PageId="+e.name);if(!t.$page.$prototype)throw new new Error("Prototype is NULL - PageId="+e.name);return t}).then(function(t){if(r){var s=o.registerRegularPage(e.name,t);for(var u in s)if(e[u]==null||e[u]!==s[u])e[u]=s[u]}var a=t.$page.$prototype;a=$.isPlainObject(a)?i.create(a):a,n.resolve({article:e.options.article||t.$page.$article||a.toArticle(),prototype:a})}).fail(function(e){n.reject(e)})}catch(s){n.reject(s)}finally{return n.promise()}},getPageMetaData:function(e){var t=this;return t.appMetaData.$pages?$.smResolve(t.appMetaData.$pages[e]):$.smResolve(null)},getDashboardInfo:function(e){var t=this;return $.smResolve().then(function(){var n=t.appMetaData.$dashboards[e];if(!n)throw new Error("Dashboard not found "+e);return n}).then(function(e){return e&&e.$update?e.$update(e):e}).then(function(e){var n=e.$article;return n||(n=s.getDashboardArticle(e)),{article:$.extend({},n),prototype:s.getDashboardProto(e,t)}})},getGadgetData:function(e){var t=this,n=t.appMetaData.$gadgets&&t.appMetaData.$gadgets[e];return n.$uuid||(n.$uuid=e),n},getGadget:function(e){var t=this,n=t.getGadgetData(e);return new a(n)},getPrototype:function(e){var t=this;if(t.appMetaData==null)throw new Error("Get page prototype error - No application metadata");var n=t.appMetaData.$pages[e];if(n==null||n.$page==null)throw new Error("Get page prototype error - Page not found["+e+"]");return n.$page.$prototype},registerAdditionalPage:function(e,t,n){var r=this;if(!t||$.isEmptyObject(t))throw new Error("Unexpected empty prototype");r.appMetaData||(r.appMetaData={}),r.appMetaData.$pages||(r.appMetaData.$pages={});var i={$cache:{cacheType:"$auto"},$page:{$prototype:t,$article:n}};return r.appMetaData.$pages[e]=i,i}});t.Dao=c}),define("syracuse-tablet/html/js/application/daoSdata",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/prototype"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=r.defineClass(function(e,t,n,r){var i=this;i.options=r||{},i.data=e||{};if(!t)throw new Error("Prototype is mandatory");if(!e)throw new Error("jsonData is mandatory");i.prototype=t,i._cache={metaData:{},queryData:null},i.parent=n},null,{destroy:function(){var e=this;e.parent=null,e.data=null,e.prototype=null},setValue:function(e,t,n){var r=this;return r.data[e]!==t?(r.data[e]=t,n===!0&&s.publish("sm.dao.updated",r,e,t),!0):!1},getValue:function(e,t){var n=this;if(!e||e.length===0)return t;var r=n.data[e];if(r!=null&&n.prototype.isReference(e)&&typeof r=="object"&&r.$value==null){var i=n.prototype.getFieldNameForValue(e);if(i==e)throw new Error("TODO - Syracuse entities");return r.$value=n.getValue(i,t),r}return r!=null?r:n.parent?n.parent.getValue(e,t):t},getDisplayValue:function(e,t){var n=this,r=n.getValue(e,t),i=n.getMetaData(e);return typeof r=="object"&&(r=r.$value||r.$title||r.$description),(r||"").toString()},getMetaData:function(e){var t=this,n=t._cache.metaData[e];return n?n:(n=t._cache.metaData[e]=$.extend({},t.prototype.getMetaData(e),t.data.$properties?t.data.$properties[e]:null),n)},getFieldInfo:function(e){var t=this;return{meta:t.getMetaData(),value:t.getValue()}},getArrayData:function(e,t){var n=this,r={$resources:[]},i=n.getValue(e)||[];return i.forEach(function(e){r.$resources.push(new o(e,t,n))}),r},getQueryData:function(e){var t=this,n={$itemsPerPage:t.getValue("$itemsPerPage"),$resources:[],$links:t.getValue("$links")};if(!e)throw new Error("getQueryData - Prototype Array is mandatory");var r=e.getPrototype("$item"),i=t.getValue("$resources");return i.forEach(function(e){n.$resources.push(new o(e,r,t))}),n},getLookupData:function(e){return this.getQueryData(e)},getQueryResources:function(){var e=this,t=e.getValue("$resources");return t},parseExpression:function(e){var t=this;return r.parseExpression(e,t,t.prototype)},setRowIndex:function(e){this.setValue(i.ROWIDXPROP,e,!1)},getLinksStatus:function(e){var t=this;return e=e||t.prototype,$.extend(!0,{},e.data("$links"),t.getValue("$links"))},getRowById:function(e,t){var n=this,r=n.getValue("$resources")||[],i;return r.some(function(t){if(t.$uuid===e)return i=t,!0}),t?$.extend(!0,{},i):i},getActionPayload:function(e){var t=this;switch(e.name){case"$save":case"$edit":return $.extend({},t.data);default:return null}},clone:function(){return new o($.extend(!0,{},this.data),this.prototype,this.parent,this.options)}});t.Dao=o}),define("syracuse-tablet/html/js/application/appFactoryDeps",["require","exports","module","syracuse-tablet/html/js/application/application","syracuse-tablet/html/js/pages/pageDashboard","syracuse-tablet/html/js/pages/pageRegular","syracuse-tablet/html/js/pages/pageRowDetail","syracuse-tablet/html/js/pages/pageLookup","syracuse-tablet/html/js/pages/html/pageLogin","syracuse-tablet/html/js/pages/html/pageSettings","syracuse-tablet/html/js/pages/html/pageAbout","syracuse-tablet/html/js/application/daoApp","syracuse-tablet/html/js/application/daoSdata","syracuse-tablet/html/js/application/appFactory"],function(e,t,n){var r=e("syracuse-tablet/html/js/application/application").Application,i=e("syracuse-tablet/html/js/pages/pageDashboard").Page,s=e("syracuse-tablet/html/js/pages/pageRegular").Page,o=e("syracuse-tablet/html/js/pages/pageRowDetail").Page,u=e("syracuse-tablet/html/js/pages/pageLookup").Page,a=e("syracuse-tablet/html/js/pages/html/pageLogin").Page,f=e("syracuse-tablet/html/js/pages/html/pageSettings").Page,l=e("syracuse-tablet/html/js/pages/html/pageAbout").Page,c=e("syracuse-tablet/html/js/application/daoApp").Dao,h=e("syracuse-tablet/html/js/application/daoSdata").Dao,p=e("syracuse-tablet/html/js/application/appFactory");t.init=function(){p.setImpl("Application",r),p.setImpl("DashoardPage",i),p.setImpl("RegularPage",s),p.setImpl("RowDetailPage",o),p.setImpl("LookupPage",u),p.setImpl("LoginPage",a),p.setImpl("SettingsPage",f),p.setImpl("AboutPage",l),p.setImpl("DaoApp",c),p.setImpl("DaoSdata",h)}}),define("syracuse-tablet/html/js/controls/structElmt",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/helpers/logger").getLogger("ctrls"),o={},u=/-|\//g,a=r.defineClass(function(e,t,n,r){var i=this;i.options=r||{},i.controller=e,i.$type=t,i.typeName=o[t];if(!i.typeName){var s=t.split(u);i.typeName=o[t]=s[s.length-1]}i.article=n||{},i.id=i.createId(i.typeName),i.children=null,i.parent=null,i.displayOptions=$.extend({},i.article.displayOptions),i.$$elmt=null},null,{destroy:function(){var e=this;e.controller=null,e.parent=null,r.unbindObj(e.$$elmt),r.unbindObj(e),e.children&&(e.children.forEach(function(e){e&&e.destroy()}),e.children=null),e.$$elmt&&e.$$elmt.remove(),e.$$elmt=null},detachElmt:function(){var e=this.$$elmt;return this.$$elmt=null,this.destroy(),e},getAuthoring:function(e,t){var n=this;if(!e||!n.article)return t;if(typeof e=="string")e=e.split(".");else if(!Array.isArray(e))throw new Error("Unexpected path type");var r=n.article;for(var i=0;i<e.length;i++){r=r[e[i]];if(r==null)return t;if(!$.isPlainObject(r)==null)return s&&s("Unexpected non-plainobject"),t}return r!=null?r:t},appendStyleAuthoring:function(e,t){e=e||[];if(!t)return e;if($.isPlainObject(t))var n=t;else var n=this.getAuthoring(t);if(!n)return e;for(var r in n)["$theme","$fontStyle","$fontSize"].indexOf(r)>=0&&e.push(n[r]);return e},empty:function(){var e=this;e.children&&e.children.forEach(function(e){e&&e.empty()}),e.$$elmt&&e.$$elmt.empty()},getDao:function(){return this.controller.dao},isLayout:function(){return this.typeName==="layout"},isVignette:function(){return this.typeName==="vignette"},isControl:function(){return this.isLayout()&&!this.isVignette()},createId:function(e){return r.readableuid(e)},appendStructElmt:function(e){var t=this;if(!e)return;t.children||(t.children=[]),e.parent=t,t.children.push(e)},isRoot:function(){return this.controller===this.parent||this.parent==null},getNbChilds:function(){return this.children&&this.children.length>0},buildHtml:function(e,t,n){throw new Error("Must be overridden")},afterRender:function(){},refresh:function(e,t){throw new Error("not implemented")},createRootElement:function(e,t){var n=this;return n.setRootElement(i.createDomElement("div",e,null,{id:n.id}),t)},setRootElement:function(e,t){var n=e,r=t;if(!e)return null;if(typeof e=="string"||!e.jquery)e=$(e);return this.$$elmt=e,t&&(t.jquery||(t=$(t)),e.appendTo(t)),e}});t.Klass=a}),define("syracuse-tablet/html/js/controls/ctrlBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/structElmt"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/structElmt").Klass,s=r.defineClass(function(e,t,n,r){var s=this;s.prototype=n,s.$bind=t.$bind,i.call(s,e,n.data("$type"),t,r),s.$isEditMode=n.isEditMode()},i,{destroy:function(){var e=this;e.prototype=null,i.prototype.destroy.call(e)}});t.Klass=s}),define("syracuse-tablet/html/js/helpers/types/date",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function o(e,t,n){e=e?e.toString():"";if(!n||n.length==0)n=" ";while(e.length<t)e=n+e;return e}function f(e){this._value=e}function l(e,t){return t?s().abbreviatedDayNames[e]:s().dayNames[e]}function c(e,t){return t?s().abbreviatedMonthNames[e-1]:s().monthNames[e-1]}function h(e){var t=e.toString();return t.length==1?"0"+t:t}function p(e){var t=e.year,n=e.month,r=e.day,i=n<=2?t-1:t,s=Math.floor(i/4)-Math.floor(492.5),o=Math.floor(i/100)-Math.floor(19.7),a=Math.floor(i/400)-Math.floor(4.925),f=s-o+a;return(t-1970)*365+f+u[n-1]+r-1}function d(e){var t=2440588+e,n=t+68569,r=Math.floor(4*n/146097);n-=Math.floor((146097*r+3)/4);var i=Math.floor(4e3*(n+1)/1461001);n=n-Math.floor(1461*i/4)+31;var s=Math.floor(80*n/2447),o=n-Math.floor(2447*s/80);n=Math.floor(s/11);var u=s+2-12*n,a=100*(r-49)+i+n;return new f(a*1e4+u*100+o)}function v(e,t,n){return new f(e*1e4+t*100+n)}function m(e){return e%4===0&&(e%100!==0||e%400===0)}function g(e,t){return t==2?m(e)?29:28:a[t-1]}function y(e){return e!=0&&e!=6}function b(){return s().amDesignator||"AM"}function w(){return s().pmDesignator||"PM"}function E(e,t){function i(t){var n=e[t],r=1;while(e[t+r]===n)r++;return r}var n=0,r=e.length;while(n<r){var s=e[n];switch(s){case"'":n++;var o="";for(;n<r;n++)if(e[n]==="'"){n++;if(e[n]!=="'")break;o+="'"}else o+=e[n];t.literal(o);break;case"d":case"M":case"y":var u=i(n);t[s](u),n+=u;break;default:t.literal(s),n++}}}function S(e,t){function f(t){if(!/\d/.test(e[a]))throw new Error(i.text("date.notNumber",e.substring[a]));var n=a++;while(a<n+t&&/\d/.test(e[a]))a++;return parseInt(e.substring(n,a),10)}function l(t){for(var n=0;n<t.length;n++){var r=t[n],s=r.length;if(e.substring(a,a+s).toUpperCase()==r.toUpperCase())return a+=s,n}throw new Error(i.text("date.unknown",e.substring(a)))}var n,r,o,u,a=0;return E(t,{literal:function(t){if(e.substring(a,a+t.length)!==t)throw new Error(i.text("date.wrongFormat",t,e.substring(a)));a+=t.length},d:function(e){switch(e){case 1:case 2:n=f(2);break;case 3:r=l(s().abbreviatedDayNames);break;case 4:r=l(s().dayNames);break;default:throw new Error(i.text("date.badDay",t.substring(a)))}},M:function(e){switch(e){case 1:case 2:o=f(2);break;case 3:o=l(s().abbreviatedMonthNames)+1;break;case 4:o=l(s().monthNames)+1;break;default:throw new Error(i.text("date.badDay",t.substring(a)))}},y:function(e){switch(e){case 2:u=f(2),u=u<40?2e3+u:1900+u;break;case 4:u=f(4),u=u>99?u:u<40?2e3+u:1900+u;break;default:throw new Error(i.text("date.badYear",t.substring(a)))}}}),v(u,o,n)}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=i.getDatetimeInfo;t.validate=function(e,t,n){if(e==null){if(t.$isMandatory)return n.push(i.text("date.valMan"));if(!t.$isNullable)return n.push(i.text("date.valNull"));return}if(!(e instanceof f)){n.push(i.text("date.valDate"));return}if(!(e.month>=1&&e.month<=12)){n.push(i.text("date.invMonth"));return}if(!(e.day>=1&&e.day<=g(e.year,e.month))){n.push(i.text("date.invDay"));return}};var u=[0,31,59,90,120,151,181,212,243,273,304,334],a=[31,28,31,30,31,30,31,31,30,31,30,31];t.amDesignator=b,t.pmDesignator=w,r.defineClass(f,null,{year:{get:function(){return Math.floor(this._value/1e4)}},month:{get:function(){return Math.floor(this._value/100)%100}},day:{get:function(){return this._value%100}},weekDay:{get:function(){return(2440589+p(this))%7}},yearDay:{get:function(){var e=this.month,t=e>2&&m(this.year)?1:0;return u[e-1]+t+this.day}},week:{get:function(){var e=v(this.year,1,4).begOfWeek(1);return Math.floor((7+p(this)-p(e))/7)}},valueOf:function(){return this.toString()},compare:function(e){return this._value-e._value},equals:function(e){return this._value===e._value},between:function(e,t){return e._value<=this._value&&this._value<=t._value},isLeapYear:function(){return m(this.year)},isWorkDay:function(){return y(this.weekDay)},daysInMonth:function(){return g(this.year,this.month)},begOfYear:function(){return v(this.year,1,1)},endOfYear:function(){return v(this.year,12,31)},begOfQuarter:function(){return v(this.year,Math.floor((this.month-1)/3)*3+1,1)},endOfQuarter:function(){return this.begOfQuarter().addMonths(2).endOfMonth()},begOfMonth:function(){return v(this.year,this.month,1)},endOfMonth:function(){return v(this.year,this.month,this.daysInMonth())},sameMonth:function(e){return e=Math.min(e,this.daysInMonth()),v(this.year,this.month,e)},pastDay:function(e,t){var n=e-this.day;return n>0||n==0&&!t?this.addMonths(-1).sameMonth(e):this.sameMonth(e)},futureDay:function(e,t){var n=e-this.day;return n<0||n==0&&!t?this.addMonths(1).sameMonth(e):this.sameMonth(e)},pastMonth:function(e,t){var n=this.month-e;return n=n==0?t?0:12:n>0?n:n+12,this.addMonths(-n)},futureMonth:function(e,t){var n=e-this.month;return n=n==0?t?0:12:n>0?n:n+12,this.addMonths(n)},begOfWeek:function(e){var t=this.weekDay-(e||0);return t==0?this:t>0?this.addDays(-t):this.addDays(-t-7)},endOfWeek:function(e){return this.begOfWeek(e).addDays(6)},sameWeek:function(e,t){return this.begOfWeek(t).futureWeekDay(e,!0)},pastWeekDay:function(e,t){var n=this.begOfWeek(e);return!t&&n.equals(this)?this.addWeeks(-1):n},futureWeekDay:function(e,t){return this.pastWeekDay(e,!t).addWeeks(1)},addYears:function(e){if(e==0)return this;var t=this.year+e,n=this.month,r=Math.min(this.day,g(t,n));return v(t,n,r)},addMonths:function(e){if(e==0)return this;var t=this,n=t.day,r=t.month-1,i=t.year;r+=e,i+=Math.floor(r/12);var s=(r+12e4)%12+1,o=g(i,s);return n=n<o?n:o,v(i,s,n)},addWeeks:function(e){return this.addDays(7*e)},addDays:function(e){return e==0?this:d(p(this)+e)},daysDiff:function(e){return p(this)-p(e)},add:function(e){return this.addYears(e.years||0).addMonths(e.months||0).addWeeks(e.weeks||0).addDays(e.days||0)},toString:function(e){var t=this;if(e==null){var n=t._value.toString();return n=o(n,8,"0"),n.substring(0,4)+"-"+n.substring(4,6)+"-"+n.substring(6,8)}var r="";return E(e,{literal:function(e){r+=e},d:function(e){switch(e){case 1:r+=t.day.toString();break;case 2:r+=h(t.day);break;case 3:r+=l(t.weekDay,!0);break;case 4:r+=l(t.weekDay);break;default:throw new Error(i.text("date.formatd",e))}},M:function(e){switch(e){case 1:r+=t.month.toString();break;case 2:r+=h(t.month);break;case 3:r+=c(t.month,!0);break;case 4:r+=c(t.month);break;default:throw new Error(i.text("date.formatM",e))}},y:function(e){switch(e){case 2:r+=t.year.toString().substring(2,4);break;case 4:r+=t.year.toString();break;default:throw new Error(i.text("date.formatM",e))}}}),r},at:function(e,t){throw new Error(i.text("date.notInstalled"))},toJsDate:function(e){return e?new Date(Date.UTC(this.year,this.month-1,this.day)):new Date(this.year,this.month-1,this.day)},isNull:function(){return this._value==0}}),t.monthName=c,t.monthFromName=function(e){var t=s().monthNames,n=s().abbreviatedMonthNames,r=e.toLowerCase();for(var i=0;i<t.length;i++)if(t[i].toLowerCase()==r||n[i].toLowerCase()==r)return i+1;return-1},t.dayName=l,t.weekDayFromName=function(e){var t=s().dayNames,n=s().abbreviatedDayNames,r=s().shortestDayNames,i=e.toLowerCase();for(var o=0;o<t.length;o++)if(t[o].toLowerCase()==i||n[o].toLowerCase()==i)return o;return-1},t.isLeap=m,t.daysInMonth=g,t.today=function(e){return t.fromJsDate(new Date,e)},t.parse=function(e,t){if(e==null)throw new Error(i.text("date.dateNull"));if(t==null){if(e.length!=10)throw new Error(i.text("date.badFormat",e));var n=parseInt(e.replace(/-/g,""),10);return new f(n)}return S(e,t)},t.walkFormat=E,t.fromJsDate=function(e,t){return t?v(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()):v(e.getFullYear(),e.getMonth()+1,e.getDate())},t.fromInternalValue=function(e){return new f(e)},t.makeInWeek=function(e,t,n){var r=n?n-1:6;return v(e,1,4).begOfWeek(1).addDays(7*(t-1)+r)},t.isDate=function(e){return e instanceof f},t.sunday=0,t.Sunday=0,t.monday=1,t.Monday=1,t.tuesday=2,t.Tuesday=2,t.wednesday=3,t.Wednesday=3,t.thursday=4,t.Thursday=4,t.friday=5,t.Friday=5,t.saturday=6,t.Saturday=6,t.make=v}),define("syracuse-tablet/html/js/helpers/types/time",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function o(e){e=(e+31536e7)%86400,this._value=e}function u(e){var t=e.toString();return t.length==1?"0"+t:t}function a(e,t,n){return parseInt(e.substring(t,n),10)}function f(e,t,n){return new o(e*3600+(t||0)*60+(n||0))}function l(){return s().amDesignator||"AM"}function c(){return s().pmDesignator||"AM"}function h(e,t){function i(t){var n=e[t],r=1;while(e[t+r]===n)r++;return r}var n=0,r=e.length;while(n<r){var s=e[n];switch(s){case"'":n++;var o="";for(;n<r;n++)if(e[n]==="'"){n++;if(e[n]!=="'")break;o+="'"}else o+=e[n];t.literal(o);break;case"H":case"h":case"m":case"s":case"t":var u=i(n);t[s](u),n+=u;break;default:t.literal(s),n++}}}function p(e,t){function v(t){if(!/\d/.test(e[d]))throw new Error(i.text("time.noNumber",e.substring[d]));var n=d++;while(d<n+t&&/\d/.test(e[d]))d++;return parseInt(e.substring(n,d),10)}function m(t){for(var n=0;n<t.length;n++){var r=t[n],s=r.length;if(e.substring(d,d+s).toUpperCase()==r.toUpperCase())return d+=s,n}throw new Error(i.text("time.unknown",e.substring(d)))}function g(e,t){switch(e[t]){case e[0]:n=n===12?0:n;break;case e[1]:n>=1&&n<=11&&(n+=12)}}var n,r,s,o,u,a=[l(),c()],p=[a[0].substring(0,1),a[1].substring(0,1)],d=0;h(t,{literal:function(t){if(e.substring(d,d+t.length)!==t)throw new Error(i.text("time.wrongFormat",t,e.substring(d)));d+=t.length},H:function(e){switch(e){case 1:case 2:n=v(2);break;default:throw new Error(i.text("time.badHour",t.substring(d)))}},h:function(e){switch(e){case 1:case 2:n=v(2);break;default:throw new Error(i.text("time.badHour",t.substring(d)))}},m:function(e){switch(e){case 2:r=v(2);break;default:throw new Error(i.text("time.badMin",t.substring(d)))}},s:function(e){switch(e){case 2:s=v(2);break;default:throw new Error(i.text("time.badSec",t.substring(d)))}},t:function(e){switch(e){case 1:u=m(p);break;case 2:o=m(a);break;default:throw new Error(i.text("time.badMarker",t.substring(d)))}}});if(o!=null||u!=null){if(n>12)throw new Error(i.text("time.badHourVal",n,o));var y=o!=null?a:p,b=o!=null?o:u;g(y,b)}return f(n,r,s)}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=i.getDatetimeInfo;t.validate=function(e,t,n){if(e==null){if(t.$isMandatory)return n.push(i.text("time.valMan"));if(!t.$isNullable)return n.push(i.text("time.valNull"));return}if(!(e instanceof o)){n.push(i.text("time.valTime"));return}},r.defineClass(o,null,{hour:{get:function(){return Math.floor(this._value/3600)}},minute:{get:function(){return Math.floor(this._value/60)%60}},second:{get:function(){return this._value%60}},value:{get:function(){return this._value}},valueOf:function(){return this.toString()},compare:function(e){return this._value-e._value},equals:function(e){return this._value===e._value},between:function(e,t){return e._value<=this._value&&this._value<=t._value},begOfDay:function(){return f(0,0,0)},endOfDay:function(){return f(23,59,59)},begOfHour:function(){return f(this.hour,0,0)},endOfHour:function(){return f(this.hour,59,59)},begOfMinute:function(){return f(this.hour,this.minute,0)},endOfMinute:function(){return f(this.hour,this.minute,59)},toString:function(e){var t=this;if(e==null)return u(t.hour)+":"+u(t.minute)+":"+u(t.second);var n="";return h(e,{literal:function(e){n+=e},H:function(e){switch(e){case 1:n+=t.hour;break;case 2:n+=u(t.hour);break;default:throw new Error(i.text("time.formatH",e))}},h:function(e){switch(e){case 1:var r=t.hour;r===0?n+=12:n+=r>12?r-12:r;break;case 2:var r=t.hour;r===0?n+=12:n+=r>12?u(r-12):u(r);break;default:throw new Error(i.text("time.formath",e))}},m:function(e){switch(e){case 2:n+=u(t.minute);break;default:throw new Error(i.text("time.formatm",e))}},s:function(e){switch(e){case 2:n+=u(t.second);break;default:throw new Error(i.text("time.formats",e))}},t:function(e){switch(e){case 1:n+=t.hour<12?l().substring(0,1):c().substring(0,1);break;case 2:n+=t.hour<12?l():c();break;default:throw new Error(i.text("time.formata",e))}}}),n},secondsDiff:function(e){return this._value-e._value},addHours:function(e){return e==0?this:new o(this._value+e*3600)},addMinutes:function(e){return e==0?this:new o(this._value+e*60)},addSeconds:function(e){return e==0?this:new o(this._value+e)},add:function(e){return this.addHours(e.hours||0).addMinutes(e.minutes||0).addSeconds(e.seconds||0)},isNull:function(){return this._value==0}}),t.make=f,t.fromSeconds=function(e){return new o(e)},t.fromJsDate=function(e,t){return t?f(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()):f(e.getHours(),e.getMinutes(),e.getSeconds())},t.now=function(e){return t.fromJsDate(new Date,e)},t.parse=function(e,t){if(e==null)throw new Error(i.text("time.isNull"));if(t==null){if(e.length!=5&&e.length!=8)throw new Error(i.text("time.badFormat",e));var n=e.length==8?a(e,0,2)*3600+a(e,3,5)*60+a(e,6,8):a(e,0,2)*3600+a(e,3,5)*60;return new o(n)}return p(e,t)},t.amDesignator=l,t.pmDesignator=c}),define("syracuse-tablet/html/js/helpers/types/datetime",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function a(e){var t=e.toString();return t.length==1?"0"+t:t}function f(e){var t=e.toString();switch(t.length){case 1:return"00"+t;case 2:return"0"+t;default:return t}}function l(e,t){this._value=e,t!=null&&(this._tzOffset=t)}function c(e){return(e._value+63072e9)%1e3}function h(e){var t=e._utc;if(!t){var n=new Date(e._value);t=n.getUTCFullYear()*1e4*1e5+(n.getUTCMonth()+1)*100*1e5+n.getUTCDate()*1e5+n.getUTCHours()*3600+n.getUTCMinutes()*60+n.getUTCSeconds(),n._utc=t}return t}function p(e){var t=e._local;if(!t){var n=new Date(e._value);t=n.getFullYear()*1e4*1e5+(n.getMonth()+1)*100*1e5+n.getDate()*1e5+n.getHours()*3600+n.getMinutes()*60+n.getSeconds(),n._local=t}return t}function d(e,t){var n="-";e<0&&(n="+",e=-e);var r=Math.round(e/60),i=e-r*60;return n+=t>1?a(r):r,n+=t>2||i?":"+(t>1?a(i):i):"",n}function v(e){var t=0,n=0,r=0,i=0,s=0,u=0,a=0,f=0,c=!0,h=/(\d{4})-(\d{2})-(\d{2})([T\s]?)(\d{2})?(:)?(\d{2})?(:)?(\d{2})?(\.(\d{3}))?(Z)?(([+-])(\d{2}))?(.*$)/.exec(e);if(h){c=!1,t=+h[1],n=h[2]-1,r=+h[3],i=+(h[5]||0),s=+(h[7]||0),u=+(h[9]||0),a=+(h[11]||0);if(h[12]==="Z"){h[14]==="-"?f=(h[15]||0)*60:h[14]==="+"&&(f=-(h[15]||0)*60);var p=Date.UTC(t,n,r,i,s+f,u,a);return new l(p)}var d=new Date(t,n,r,i,s+f,u,a);return new l(d.getTime(),d.getTimezoneOffset())}if(c)throw new Error(o.text("datetime.noParse",e))}function m(e,t,n,r,i,s,o){var u=new Date(e,t-1,n,r||0,i||0,s||0,o||0);return new l(u.getTime(),u.getTimezoneOffset())}function g(e,t,n,r,i,s,o){var u=new Date(Date.UTC(e,t-1,n,r||0,i||0,s||0,o||0));return new l(u.getTime(),u.getTimezoneOffset())}function y(e,t){function i(t){var n=e[t],r=1;while(e[t+r]===n)r++;return r}var n=0,r=e.length;while(n<r){var s=e[n];switch(s){case"'":n++;var o="";for(;n<r;n++)if(e[n]==="'"){n++;if(e[n]!=="'")break;o+="'"}else o+=e[n];t.literal(o);break;case"H":case"h":case"m":case"s":case"S":case"t":case"d":case"M":case"y":var u=i(n);t[s](u),n+=u;break;default:t.literal(s),n++}}}function b(e,t){function w(t){if(!/\d/.test(e[b]))throw new Error(o.text("datetime.noNumber",e.substring[b]));var n=b++;while(b<n+t&&/\d/.test(e[b]))b++;return parseInt(e.substring(n,b),10)}function E(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.length;if(e.substring(b,b+i).toUpperCase()==r.toUpperCase())return b+=i,n}throw new Error(o.text("datetime.unknown",e.substring(b)))}function S(e,t){switch(e[t]){case e[0]:f=f===12?0:f;break;case e[1]:f>=1&&f<=11&&(f+=12)}}var n,r,s,a,f,l,c,h,p,d,v=[i.amDesignator(),i.pmDesignator()],g=[v[0].substring(0,1),v[1].substring(0,1)],b=0;y(t,{literal:function(t){if(e.substring(b,b+t.length)!==t)throw new Error(o.text("datetime.formatMis",t,e.substring(b)));b+=t.length},d:function(e){switch(e){case 1:case 2:n=w(2);break;case 3:r=E(u().abbreviatedDayNames);break;case 4:r=E(u().dayNames);break;default:throw new Error(o.text("datetime.badDay",t.substring(b)))}},M:function(e){switch(e){case 1:case 2:s=w(2);break;case 3:s=E(u().abbreviatedMonthNames)+1;break;case 4:s=E(u().monthNames)+1;break;default:throw new Error(o.text("datetime.badDay",t.substring(b)))}},y:function(e){switch(e){case 2:a=w(2),a=a<40?2e3+a:1900+a;break;case 4:a=w(4),a=a>99?a:a<40?2e3+a:1900+a;break;default:throw new Error(o.text("datetime.badYear",t.substring(b)))}},H:function(e){switch(e){case 1:case 2:f=w(2);break;default:throw new Error(o.text("datetime.badHour",t.substring(b)))}},h:function(e){switch(e){case 1:case 2:f=w(2);break;default:throw new Error(o.text("datetime.badHour",t.substring(b)))}},m:function(e){switch(e){case 2:l=w(2);break;default:throw new Error(o.text("datetime.badMin",t.substring(b)))}},s:function(e){switch(e){case 2:c=w(2);break;default:throw new Error(o.text("datetime.badSec",t.substring(b)))}},t:function(e){switch(e){case 1:d=E(g);break;case 2:p=E(v);break;default:throw new Error(o.text("datetime.badMarker",t.substring(b)))}}});if(p!=null||d!=null){if(f>12)throw new Error(o.text("datetime.badHourVal",f,p));var x=p!=null?v:g,T=p!=null?p:d;S(x,T)}return m(a,s,n,f,l,c,h)}function w(e){function r(t){var n=e[t],r=1;while(e[t+r]===n)r++;return r}var t=0,n=e.length;while(t<n){var i=e[t];if(i==="'"){t++;var s="";for(;t<n;t++)if(e[t]==="'"){t++;if(e[t]!=="'")break;s+="'"}else s+=e[t]}else{if(i==="Z")return t;t++}}}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/types/date"),s=e("syracuse-tablet/html/js/helpers/types/time"),o=e("syracuse-tablet/html/js/helpers/locale"),u=o.getDatetimeInfo;t.validate=function(e,t,n){if(e==null){if(t.$isMandatory)return n.push(o.text("datetime.valMand"));if(!t.$isNullable)return n.push(o.text("datetime.valNull"));return}if(!(e instanceof l)){n.push(o.text("datetime.valDT"));return}if(!(e.month>=1&&e.month<=12)){n.push(o.text("datetime.valMon"));return}if(!(e.day>=1&&e.day<=i.daysInMonth(e.year,e.month))){n.push(o.text("datetime.valDay"));return}},t.Datetime=r.defineClass(l,null,{date:{get:function(){return i.fromInternalValue(Math.floor(p(this)/1e5))}},time:{get:function(){return s.fromSeconds(p(this)%1e5)}},year:{get:function(){return this.date.year}},month:{get:function(){return this.date.month}},day:{get:function(){return this.date.day}},weekDay:{get:function(){return this.date.weekDay}},yearDay:{get:function(){return this.date.yearDay}},hour:{get:function(){return this.time.hour}},minute:{get:function(){return this.time.minute}},second:{get:function(){return this.time.second}},millisecond:{get:function(){return c(this)}},utcDate:{get:function(){return i.fromInternalValue(Math.floor(h(this)/1e5))}},utcTime:{get:function(){return s.fromSeconds(h(this)%1e5)}},utcYear:{get:function(){return this.utcDate.year}},utcMonth:{get:function(){return this.utcDate.month}},utcDay:{get:function(){return this.utcDate.day}},utcWeekDay:{get:function(){return this.utcDate.weekDay}},utcYearDay:{get:function(){return this.utcDate.yearDay}},utcHour:{get:function(){return this.utcTime.hour}},utcMinute:{get:function(){return this.utcTime.minute}},utcSecond:{get:function(){return this.utcTime.second}},utcMillisecond:{get:function(){return c(this)}},value:{get:function(){return this._value}},timezoneOffset:{get:function(){return this._tzOffset==null&&(this._tzOffset=this.toJsDate().getTimezoneOffset()),this._tzOffset}},compare:function(e){return this._value-e._value},equals:function(e){return this._value===e._value},between:function(e,t){return e._value<=this._value&&this._value<=t._value},addYears:function(e){return this.date.addYears(e).at(this.time,this.millisecond)},addMonths:function(e){return this.date.addMonths(e).at(this.time,this.millisecond)},addWeeks:function(e){return this.date.addWeeks(e).at(this.time,this.millisecond)},addDays:function(e){return this.date.addDays(e).at(this.time,this.millisecond)},addHours:function(e){return new l(this._value+e*3600*1e3)},addMinutes:function(e){return new l(this._value+e*60*1e3)},addSeconds:function(e){return new l(this._value+e*1e3)},addMilliseconds:function(e){return new l(this._value+e)},addDayFractions:function(e){return new l(this._value+e*86400*1e3)},millisDiff:function(e){return this._value-e._value},begOfMonth:function(){return m(this.year,this.month,1)},begOfWeek:function(e){var t=this.weekDay-(e||0);return t==0?this:t>0?this.addDays(-t):this.addDays(-t-7)},add:function(e){return this.addYears(e.years||0).addMonths(e.months||0).addWeeks(e.weeks||0).addDays(e.days||0).addHours(e.hours||0).addMinutes(e.minutes||0).addSeconds(e.seconds||0).addMillis(e.millis||0)},toString:function(e){var t=this;if(e==null)return(new Date(this._value)).toISOString();var n=w(e),r=n?t.utcDate:t.date,s=n?t.utcTime:t.time,l="";return y(e,{literal:function(e){l+=e},H:function(e){switch(e){case 1:l+=s.hour.toString();break;case 2:l+=a(s.hour);break;default:throw new Error(o.text("datetime.formatH",e))}},h:function(e){switch(e){case 1:l+=s.hour<13?s.hour:s.hour-12;break;case 2:l+=a(s.hour<13?s.hour:s.hour-12);break;default:throw new Error(o.text("datetime.formath",e))}},m:function(e){switch(e){case 2:l+=a(s.minute);break;default:throw new Error(o.text("datetime.formatm",e))}},s:function(e){switch(e){case 2:l+=a(t.second);break;default:throw new Error(o.text("datetime.formats",e))}},t:function(e){switch(e){case 1:l+=t.hour<12?u().amDesignator.substring(0,1):u().pmDesignator.substring(0,1);break;case 2:l+=t.hour<12?u().amDesignator:u().pmDesignator;break;default:throw new Error(o.text("datetime.formata",e))}},d:function(e){switch(e){case 1:l+=r.day.toString();break;case 2:l+=a(r.day);break;case 3:l+=i.dayName(r.weekDay,!0);break;case 4:l+=i.dayName(r.weekDay);break;default:throw new Error(o.text("datetime.formatd",e))}},M:function(e){switch(e){case 1:l+=r.month.toString();break;case 2:l+=a(r.month);break;case 3:l+=i.monthName(r.month,!0);break;case 4:l+=i.monthName(r.month);break;default:throw new Error(o.text("datetime.formatM",e))}},y:function(e){switch(e){case 2:l+=r.year.toString().substring(2,4);break;case 4:l+=r.year.toString();break;default:throw new Error(o.text("datetime.formaty",e))}},S:function(e){e===3?l+=f(t.millisecond):new Error(o.text("datetime.formatS",e))}}),l},toJsDate:function(){return new Date(this._value)},withoutTimezoneOffset:function(){return new l(this._value)},isNull:function(){return this._value==0}}),t.now=function(e){var t=new Date,n=t.getTime();return e||(n=Math.floor(n/1e3)*1e3),new l(n,t.getTimezoneOffset())},t.parse=function(e,t){if(e==null)throw new Error(o.text("datetime.isNull"));return t==null?v(e):b(e,t)},t.fromJsDate=function(e){return new l(e.getTime(),e.getTimezoneOffset())},t.isDatetime=function(e){return e instanceof l},t.fromInternalValue=function(e){return new l(e)},t.dayName=function(e,t){return t?u().abbreviatedDayNames[e]:u().dayNames[e]},t.monthName=function(e,t){return t?u().abbreviatedMonthNames[e-1]:u().monthNames[e-1]},t.make=m,t.makeUtc=g,i.make(1,1,1).constructor.prototype.at=function(e,n){return t.make(this.year,this.month,this.day,e.hour,e.minute,e.second,n)},t.sunday=0,t.Sunday=0,t.monday=1,t.Monday=1,t.tuesday=2,t.Tuesday=2,t.wednesday=3,t.Wednesday=3,t.thursday=4,t.Thursday=4,t.friday=5,t.Friday=5,t.saturday=6,t.Saturday=6,t.walkFormat=y}),define("syracuse-tablet/html/js/helpers/types/numberFormat",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function i(e,t,n){this.prefix=e,this.postfix=t,this.properties=n}function s(e,t){var n=new i(t.prefix,t.postfix,t.properties),r,s,o=e.indexOf("."),u=e.indexOf(",");n.properties.hasDecimalSeparator=r=o>-1,n.properties.hasGroupSeparator=s=u>-1;if(r){var a=e.substring(o+1);n.properties.mandatoryAfter=a.indexOf("0")>-1?a.match(/0/g).length:0,n.properties.maxAfter=a.length}s&&(n.properties.groupSize=r?o-u-1:e.substring(u+1).length);var f=r?e.substring(0,o):e;return n.properties.mandatoryBefore=f.indexOf("0")>-1?f.match(/0/g).length:0,n.properties.directive=e,n.properties.hasPercent=e.indexOf("%")>-1,n.properties.hasPermil=e.indexOf("")>-1,n.properties.hasSignFormat=e.indexOf("+")>-1&&e.indexOf("+")===0,n}function o(e,t){function s(t){var n=e[t],r=1;while(i.indexOf(e[t+r])>-1)r++;return r}var n=0,r=e.length,i="0#.,%+";while(n<r){var o=e[n];switch(o){case"'":n++;var u="";for(;n<r;n++)if(e[n]==="'"){n++;if(e[n]!=="'")break;u+="'"}else u+=e[n];t.literal(u);break;case"0":case"#":case".":case"%":case"":case"+":var a=s(n);t.directive(n,n+a),n+=a;break;case";":t.listSeparator(),n++;break;default:t.literal(o),n++}n===r&&t.listSeparator()}}function u(e,t,n){var r="",i=e.length,s="",o=0;for(var u=i-1;u>=0;u--)s=e[u],r+=s,++o,o%n===0&&u>0&&(r+=t);return r.split("").reverse().join("")}function a(e,t){var n,u,a=0,c=[],h=!1,p=new i("","",{});o(t,{literal:function(e){h?p.postfix+=e:p.prefix+=e},directive:function(e,n){var r=t.substring(e,n);p=s(r,p),h=!0},listSeparator:function(){h=!1,c.push(p),p=new i("","",{}),n="",u=""}});var d=c.length;switch(d){case 1:return l(e,c[0]);case 2:case 3:return e===0?f(c[2]):e<0?l(e.toString().substring(1),c[1]):l(e,c[0]);default:throw new Error(d===0?r.text("numberFormat.noFormat"):r.text("numberFormat.manyFormat"))}}function f(e){return e.prefix}function l(e,t){var n="",i=r.getNumberGroupSeparator(),s=r.getNumberDecimalSeparator(),o=t.properties.directive;e=t.properties.hasPercent?e*100:e,e=t.properties.hasPermil?e*1e3:e;if(t.properties.hasDecimalSeparator){var a="",f=t.properties.maxAfter,l=o.substr(o.indexOf(".")+1,f),c=e%1,h=""+c.toFixed(f);h=h.substring(h.indexOf(".")+1);for(var p=0;p<f;p++){var d=l.charAt(p),v=h.charAt(p);if(d==="0")a+=v;else if(d==="#"&&v!=="0")a+=v;else if(d==="#"&&v==="0"){var m=h.substring(p);if(!m.match("[1-9]"))break;a+=v}}n=a?s+a:n}else e=Math.round(e);var g=e<0?""+Math.ceil(e):""+Math.floor(e);g=g.replace(/[^\d]+/g,"");var y=o.indexOf(".")===-1?o:o.substring(0,o.indexOf("."));if(g.length<t.properties.mandatoryBefore){var b=t.properties.mandatoryBefore-g.length,w="";for(var p=0;p<b;p++)w+="0";g=w+g}return t.properties.hasGroupSeparator&&t.properties.groupSize<g.length&&(g=u(g,i,t.properties.groupSize)),g=parseInt(g,10)===0&&t.properties.mandatoryBefore===0?"":g,g=g&&e<0?"-"+g:g,n=g+n,n=t.properties.hasSignFormat&&e>0?"+"+n:n,n+=t.properties.hasPercent?"%":"",n+=t.properties.hasPermil?"":"",t.prefix+n+t.postfix}function c(e,t){var n,r,u=0,a=[],f=!1,l=new i("","",{});return o(t,{literal:function(e){f?l.postfix+=e:l.prefix+=e},directive:function(e,n){var r=t.substring(e,n);l=s(r,l),f=!0},listSeparator:function(){f=!1,a.push(l),l=new i("","",{}),n="",r=""}}),h(e,a)}function h(e,t,n){var i=t.length,s,o=r.getNumberGroupSeparator(),u=r.getNumberDecimalSeparator();switch(i){case 1:var a=t[0],f=e,l,c,p=a.prefix,d=a.postfix;f=p?f.substring(p.length):f,f=d?f.substring(0,f.length-d.length):f;var v=f.split(u);if(v.length>2)throw new Error(r.text("numberFormat.oneSep",f));l=v[0]?v[0].match(/[0-9]/g).join(""):"0",c=v.length>1?v[1].match(/[0-9]/g).join(""):"",s=parseFloat(c?l+"."+c:l),s=f.charAt(0)==="-"?parseFloat("-"+s):s,s=a.properties.hasPercent?s/100:s,s=a.properties.hasPermil?s/1e3:s,s=n?parseFloat("-"+s):s;break;case 2:case 3:var m="1234567890"+u+o+"%-+",g=t.length,y=e.length;for(var b=0;b<g;b++){var w=t[b],p=w.prefix,d=w.postfix,E=p?!0:!1,S=d?!0:!1,x,T;x=E?e.substring(0,p.length):"",T=S?e.substring(y-d.length):"";if(E&&!S&&x.indexOf(p)>-1||E&&S&&x.indexOf(p)>-1&&T.indexOf(d)>-1||!E&&S&&T.indexOf(d)>-1||!E&&!S&&m.indexOf(e.charAt(0))>-1&&m.indexOf(e.charAt(y-1))>-1)break}var N=[];N.push(t[b]);switch(b){case 0:s=h(e,N);break;case 1:s=h(e,N,!0);break;case 2:s=0;break;default:throw new Error(r.text("numberFormat.cannotParse"))}break;default:throw new Error(i===0?r.text("numberFormat.noFormat"):r.text("numberFormat.manyFormats"))}return s}var r=e("syracuse-tablet/html/js/helpers/locale");t.format=function(e,t){if(isNaN(e))throw new Error(r.text("numberFormat.notNumber",e));if(t==null){e=e.toString();var n=e.indexOf("."),i=n>-1,s=i?e.substring(0,n):e,o=i?e.substring(n+1):"",f=r.getNumberGroupSeparator()||"",l=i?r.getNumberDecimalSeparator()||".":"";return u(s,f,3)+l+o}return a(e,t)},t.parse=function(e,t){return e?t==null?parseFloat(e):c(e,t):0}}),define("syracuse-tablet/html/js/helpers/formatApi",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/helpers/types/datetime","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/types/numberFormat"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/types/date"),o=e("syracuse-tablet/html/js/helpers/types/datetime"),u=e("syracuse-tablet/html/js/helpers/types/time"),a=e("syracuse-tablet/html/js/helpers/types/numberFormat"),f={},l;t.getFormatter=function(e,t){var n=m[e];if(!n)return null;var r=i.getCurrentLocaleHash();r!==l&&(l=r,f={});var s=f[e];s||(s=f[e]={});var o=t||"noformat",u=s[o];return u?u:(u=new n(e,t),s[o]=u,u)};var c=r.defineClass(function(e,t){this.$format=t,this.$type=e},null,{_isEmpty:function(e){return e==null?!0:(e=""+e,e=e.trim(),e===""?!0:!1)},formatValue:function(e){return e},formatValueEdit:function(e){return e},parseValue:function(e,t){t.push("No parser for this type, return this dummy error to not override value by null")},getFormat:function(){return this.format}}),h=r.defineClass(function(e,t){c.call(this,e,t),this.format=i.getDateFormat(),this.twoDigitYearSwitch=40},c,{_isEmpty:function(e){return e==null?!0:(e=""+e,e=e.trim(),e===""?!0:e==="0000-00-00"?!0:!1)},_checkShortYear:function(e){if(e.year){var t=e.year;t<100&&e.add({years:t<this.twoDigitYearSwitch?2e3:1900})}else e=e>99?e:e<this.twoDigitYearSwitch?2e3+e:1900+e;return e},formatValue:function(e){if(this._isEmpty(e))return"";var t=e.split(/[^\d]+/),n;if(t.length>=3){t[0]=this._checkShortYear(+t[0]);var r=s.make(+t[0],+t[1],+t[2]);n=r.toString(this.format)}else n=e;return n},parseValue:function(e,t){var n;if(this._isEmpty(e))return"";try{n=s.parse(e,this.format),n=this._checkShortYear(n)}catch(r){return t.push(i.text("field.invalidInput",[this.format])),e}return n.toString("yyyy-MM-dd")}}),p=r.defineClass(function(e,t){h.call(this,e,t),this.format=i.getDateTimeFormat()},h,{_isEmpty:function(e){return e==null?!0:(e=""+e,e=e.trim(),e===""?!0:e==="0000-00-00T00:00:00Z"?!0:!1)},formatValue:function(e){if(this._isEmpty(e))return o.now().toString(this.format);var t=e.split(/[^\d]+/),n;if(t.length>=6){t[0]=this._checkShortYear(+t[0]);var r=o.make(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]);n=r.toString(this.format)}else n=e;return n},parseValue:function(e,t){var n;if(this._isEmpty(e))return"";try{n=o.parse(e,this.format),n=this._checkShortYear(n)}catch(r){return t.push(i.text("field.invalidInput",[this.format])),e}return n.toString("yyyy-MM-ddTHH:mm:ss.SSS")+"Z"}}),d=r.defineClass(function(e,t){c.call(this,e,t),this.$format==="TT"?this.format=i.getTimeFormat():this.format=i.getTimeFormatShort()},c,{formatValue:function(e){if(this._isEmpty(e))return"";var t=e.split(/[^\d]+/),n;if(t.length>=2){var r=u.make(+t[0],+t[1],+t[2]);n=r.toString(this.format)}else n=e;return n},parseValue:function(e,t){if(this._isEmpty(e))return"";var n=e.split(/[^\d]+/);if(n.length>=1){var r=u.make(+n[0],+n[1],+n[2]);return r.toString("HH:mm:ss")}}}),v=r.defineClass(function(e,t){c.call(this,e,t),this.format=this.$format||i.getNumberFormat(this.$type)},c,{formatValue:function(e){if(this._isEmpty(e))return"";var t=a.format(e,this.format);return t},parseValue:function(e,t){if(this._isEmpty(e))return"";try{var n=a.parse(e,this.format)}catch(r){return t.push(i.text("field.invalidInput",[this.format])),e}return n}}),m={"application/x-integer":v,"application/x-decimal":v,"application/x-real":v,"application/x-date":h,"application/x-time":d,"application/x-datetime":p}}),define("syracuse-tablet/html/js/controls/validator",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/locale"),i={validate:function(e,t,n,s){var o=e.prototype,u=!0;for(var a=0;a<s.length;a++){var f=s[a],l=o&&o.data(f);if(l!=null){var c=i[f];c?u=c(t,n,l)&&u:(n.push(r.text("field.unknownConstraint",[f])),u=!1)}}return u},$isMandatory:function(e,t,n){if(n&&e==null||e=="")return t.push(r.text("field.valMand")),!1},$pattern:function(e,t,n){var i=this;if(e&&n){var s=new RegExp(n);if(!s.test(e))return t.push(r.text("field.patternError",[n])),!1}return!0},$minimum:function(e,t,n){var i=this;return e!=null&&e<n?(t.push(r.text("field.minimum",[n])),!1):!0},$maximum:function(e,t,n){var i=this;return e!=null&&e>n?(t.push(r.text("field.maximum",[n])),!1):!0},$exclusiveMinimum:function(e,t,n){var i=this;return e!=null&&e<=n?(t.push(r.text("field.exclusiveMinimum",[n])),!1):!0},$exclusiveMaximum:function(e,t,n){var i=this;return e!=null&&e>=n?(t.push(r.text("field.exclusiveMaximum",[n])),!1):!0},$minLength:function(e,t,n){var i=this;return!e||e.length<n?(t.push(r.text("field.minLength",[n])),!1):!0},$maxLength:function(e,t,n){var i=this;return e&&e.length>n?(t.push(r.text("field.maxLength",[n])),!1):!0},$precision:function(e,t,n){var i=this;if(e){var s=(""+e).split(".").join("");if(s.length>n)return t.push(r.text("field.precision",[n])),!1}return!0},$scale:function(e,t,n){var i=this;if(e){var s=(""+e).split(".");s=s&&s[1]||"";if(s.length>n)return t.push(r.text("field.scale",[n])),!1}return!0}};t.Validator=i}),define("syracuse-tablet/html/js/controls/field/ctrlFieldBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/controls/validator"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/helpers/locale"),u=e("syracuse-tablet/html/js/helpers/formatApi"),a=e("syracuse-tablet/html/js/controls/validator").Validator,f=r.defineClass(function(e,t,n,r){var s=this;i.call(s,e,t,n,r),s.formatter=s.initFormatter(),s.cssType=null},i,{initFormatter:function(){return u.getFormatter(this.$type,this.prototype.data("$format"))},destroy:function(){var e=this;i.prototype.destroy.call(e),e.formatter=null},getTitle:function(){var e=this;return e.article&&e.article.$title||e.prototype.getPropTitle(e.$bind)},buildHtml:function(e,t,n){var r=this;if(!t)throw new Error("BuildHtml - dao is expected for data parameter");n=n||{},r.dao=t;var i=["s-m-control s-m-field"];r.cssType&&i.push(r.cssType),r.prototype.data("$isAdvanced")===!0&&i.push("s-m-advanced"),r.createRootElement(i,e);var s=r.$$elmt.get(0),o=n.valueFirst===!0||r.getAuthoring("$value.$valueFirst",!1);o?(r.buildFieldValue(s,n),r.buildFieldTitle(s,n)):(r.buildFieldTitle(s,n),r.buildFieldValue(s,n))},afterRender:function(){var e=this;i.prototype.afterRender.call(e),e.applyMetaData(e._getMetaData())},refresh:function(e,t){var n=this;n.applyMetaData(n._getMetaData())},_getMetaData:function(){return this.dao.getMetaData(this.$bind)},applyMetaData:function(e){var t=this;if(e==null)return;if(t.$isEditMode){var n=t.$$elmt.find(".s-m-meta");n.length>0&&(n.is("input")&&!n.is(".btn")?(n[e.$isReadOnly===!0?"attr":"removeAttr"]("readonly",""),n[e.$isDisabled===!0?"attr":"removeAttr"]("disabled","")):n[e.$isReadOnly===!0||e.$isDisabled===!0?"attr":"removeAttr"]("disabled",""))}t.$$elmt.toggle(e.$isHidden!==!0)},createMainInput:function(e,t,n){var r=this;n=n||"text";var i=["s-m-meta"],o={type:n};return"text"===n?(i.push("form-control"),i.push("ctrl-evt-blur"),o.value=t):"checkbox"===n&&i.push("ctrl-evt-click"),r.domInput=s.createDomElement("input",i,null,o,e),"checkbox"===n&&(r.domInput.checked=t),r.domInput},buildFieldTitle:function(e,t){var n=this;return n.getAuthoring("$isTitleHidden")!==!0&&t.isGridCell!==!0?s.createDomElement("div",["s-m-title"],n.getTitle(),null,e):null},buildFieldValue:function(e,t){return s.createDomElement("div",["s-m-value"],null,null,e)},appendTextValue:function(e,t){if(e==null||t==null)return;typeof t!="string"&&(t=t.toString?t.toString():"??Can't display??"),t=t.trim(),t.length>0&&s.appendTextNode(e,t)},validateValue:function(e,t){return a.validate(this,e,t,["$isMandatory"])},parseValue:function(e,t){return this.formatter?this.formatter.parseValue(e,t):e},showInputErrors:function(e){var t=this;t.$$message||(t.$$message=$('<span class="s-m-field-message"/>').appendTo(t.$$elmt)),t.$$message.empty(),e&&e.forEach(function(e){t.$$message.append($("<p>").text(e))})},clearInputErrors:function(){this.showInputErrors(null)},getFormattedValue:function(e){return this.formatter?this.formatter.formatValue(e):e||""},getValue:function(){return this.dao.getValue(this.$bind)},setDisplayValue:function(e){this.domInput&&(this.domInput.value=e)},setValue:function(e){this.dao.setValue(this.$bind,e)},setFieldValue:function(e){var t=this;t.setDisplayValue(t.getFormattedValue(e)),t.dao.setValue(t.article.$bind,e)},onBlur:function(){var e=this;if(!e.domInput)return;var t=e.domInput.value,n=[];t=e.parseValue(t,n);if(n.length>0){e.showInputErrors(n);return}e.setDisplayValue(e.getFormattedValue(t)),e.validateValue(t,n),n.length>0?e.showInputErrors(n):(e.clearInputErrors(),e.setValue(t))}});t.Klass=f}),define("syracuse-tablet/html/js/controls/field/ctrlAlphanum",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/validator"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/controls/validator").Validator,u=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n)},i,{validateValue:function(e,t){var n=this,r=i.prototype.validateValue.call(n,e,t);return r&&o.validate(n,e,t,["$pattern","$minLength","$maxLength"])},buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),s=n.getFormattedValue(n.getValue());n.$isEditMode?n.createMainInput(r,s):n.appendTextValue(r,s)}}),a=r.defineClass(function(e,t,n){var r=this;u.call(r,e,t,n),r.cssType="s-m-phone"},u,{buildFieldValue:function(e,t){var n=this;if(n.$isEditMode)u.prototype.buildFieldValue.call(n,e,t);else{var r=n.getFormattedValue(n.getValue()),i=s.createDomElement("a",[],r,{href:"phoneto:"+r});i.appendChild(s.createDomElement("span",["badge","pull-left"])),e.appendChild(i)}}}),f=r.defineClass(function(e,t,n){var r=this;u.call(r,e,t,n),r.cssType="s-m-email"},u,{buildFieldValue:function(e,t){var n=this;if(n.$isEditMode)u.prototype.buildFieldValue.call(n,e,t);else{var r=n.getFormattedValue(n.getValue()),i=s.createDomElement("a",[],r,{href:"mailto:"+r});i.appendChild(s.createDomElement("span",["badge","pull-left"])),e.appendChild(i)}}});t.Klass=u,t.PhoneField=a,t.EmailField=f}),define("syracuse-tablet/html/js/controls/field/ctrlProgress",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o={$valueMin:0,$valueMax:100},u=r.defineClass(function(e,t,n){var r=this;s.call(r,e,t,n)},s,{buildFieldValue:function(e,t){var n=this,r=s.prototype.buildFieldValue.call(n,e,t),u=n.getValue(),a=i.createDomElement("div",["progress"]),f=i.createDomElement("div",["progress-bar"],u,{role:"progressbar","aria-valuenow":u,"aria-valuemin":n.article.$valueMin||o.$valueMin,"aria-valuemax":n.article.$valueMax||o.$valueMax,style:"width:"+u+"%;"})}});t.Klass=u}),define("syracuse-tablet/html/js/controls/field/ctrlNumeric",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/controls/validator","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/controls/validator").Validator,o=e("syracuse-tablet/html/js/helpers/locale"),u=e("syracuse-tablet/html/js/ui/uiUtils"),a=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n)},i,{buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),s=n.getFormattedValue(n.getValue());n.$isEditMode?n.createMainInput(r,s):n.appendTextValue(r,s)},parseValue:function(e,t){var n=this;if(n.formatter){var r=n.formatter.getFormat();if(r){var s=o.getNumberGroupSeparator(),u=o.getNumberDecimalSeparator();r.indexOf(",")<0&&s&&s.length>0&&(e=e.replace(new RegExp("\\"+s,"g"),u)),r.indexOf(",")>0&&r.indexOf(".")>0&&s&&s.length>0&&e.indexOf(s)>-1&&e.indexOf(u)<0&&(e=e.replace(new RegExp(s,"g"),u))}}return i.prototype.parseValue.call(n,e,t)},validateValue:function(e,t){var n=this,r=i.prototype.validateValue.call(n,e,t);return r=s.validate(n,e,t,["$minimum","$maximum","$exclusiveMinimum","$exclusiveMaximum","$precision"])&&r,n.$type!=="application/x-integer"&&(r=s.validate(n,e,t,["$scale"])&&r),r}});t.Klass=a}),define("syracuse-tablet/html/js/controls/field/ctrlQuantity",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/ctrlFactory"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/helpers/formatApi"),o=e("syracuse-tablet/html/js/ui/uiUtils"),u=e("syracuse-tablet/html/js/controls/ctrlFactory"),a=r.defineClass(function(e,t,n,r){var s=this;i.call(s,e,t,n);var o=n.getUnitFieldInfo();!r.isGridCell&&o&&o.unitFieldProto&&!o.unitFieldProto.data("$isExcluded")&&(s.unitCtrl=u.createControl(s.controller,s,{$bind:o.unitBindName},o.unitFieldProto,{isUnit:!0}))},i,{initFormatter:function(){var e=this.prototype.data("$value");return s.getFormatter(e.$type,e.$format)},destroy:function(){var e=this;i.prototype.destroy.call(e),e.unitCtrl&&(e.unitCtrl.destroy(),e.unitCtrl=null)},buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-qty"),r.unitCtrl&&r.unitCtrl.buildHtml(r.$$elmt,t,n)},buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),s=n.getFormattedValue(n.getValue());n.$isEditMode?n.createMainInput(r,s):n.appendTextValue(r,s)}});t.Klass=a}),define("syracuse-tablet/html/js/controls/field/ctrlCheckBox",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/ui/fontUtils"),u=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n)},i,{buildHtml:function(e,t,n){var r=this;n=n||{},n.valueFirst=r.$isEditMode,i.prototype.buildHtml.call(r,e,t,n)},buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),u=n.getValue();u=u===!0,n.$isEditMode?n.createMainInput(r,u,"checkbox"):r.appendChild(s.createDomElement("span",o.checkBoxIcon(u)))},onClick:function(e){var t=this;setTimeout(function(){t.domInput.checked=!t.domInput.checked,t.setValue(t.domInput.checked)},50)}});t.Klass=u}),define("syracuse-tablet/html/js/controls/field/ctrlCombo",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o=r.defineClass(function(e,t,n){var r=this;s.call(r,e,t,n)},s,{buildFieldValue:function(e,t){var n=this,o=s.prototype.buildFieldValue.call(n,e,t);n.choiceList=n.prototype.data("$value").$enum;if(n.$isEditMode){var u=n.prototype.data("$format");if(u&&u!="$radios"&&u!="$combo")throw new Error("Choice can only have formats '$radios' or '$combo'");var a=n.currentValue=n.getValue(),f;if(n.choiceList.length>0)if(u=="$radios")n.radioItemList=[],$.each(n.choiceList,function(e,t){var r=i.createDomElement("div",["s-m-field-radio-item"]),s=i.createDomElement("input",["s-m-field-choice-radio","ctrl-evt-click","s-m-meta"],null,{type:"radio",value:e,name:"s-m-radio-"+n.id});a&&t.$value==a&&s.setAttribute("checked",!0);var u=i.createDomElement("div",["s-m-field-choice-radio-title"],t.$title);n.radioItemList.push({inputDom:s,titleDom:u}),o.appendChild(s),o.appendChild(u)});else{var l=i.createDomElement("select",["form-control ctrl-evt-change","s-m-meta"]);$.each(n.choiceList,function(e,t){var s=t.$title.indexOf("{")<0?t.$title:r.parseExpression(t.$title,n.dao,n.prototype),o=i.createDomElement("option",null,s,{value:t.$value},l);(t.$value==a||!a&&e==0)&&o.setAttribute("selected",!0)}),o.appendChild(l)}}else n.choiceList.length>0&&n.appendTextValue(o,n._getChoiceTitle(a))},_getChoiceTitle:function(e){var t=this,n;return $.each(t.choiceList,function(t,r){n=r.$value==e?r.$title:n;if(n)return!1}),n},_getChoiceValue:function(e){var t=this,n;return $.each(t.choiceList,function(t,r){n=r.$title==e?r.$value:n;if(n)return!1}),n},setDisplayValue:function(e,t,n){var r=this;r.$isEditMode?r.prototype.data("$format")=="$radios"&&e!=r.currentValue&&$.each(r.radioItemList,function(n,i){setTimeout(function(){t?i.inputDom.checked=t==n:i.inputDom.checked=r.choiceList[n].$value==e},5)}):r.fieldValue.textContent=r._getChoiceTitle(e)},setFieldValue:function(e,t,n){var r=this;r.setDisplayValue(e,t,n),r.currentValue=e,r.dao.setValue(r.article.$bind,e)},onClick:function(e){var t=this;t.prototype.data("$format")=="$radios"&&t.setFieldValue(t._getChoiceValue(e.target.nextElementSibling.textContent),$(e.target.parentNode).index())},onChange:function(e){this.setFieldValue(e.target.value,e.target.selectedIndex,e.target.options[e.target.options.selectedIndex].textContent)}});t.Klass=o}),define("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/types/date"),s=r.defineClass(function(){},null,{create:function(e,t,n){this.parent=e,this.handler=n,this.domItem=document.createElement("nav"),this.domItem.className="s-calendar-quick-list",this._dateValue=t;var r=document.createElement("table");r.className="s-calendar-month-choice";var s=document.createElement("tbody");for(var o=0;o<6;o++){var u=document.createElement("tr");u.appendChild(this.drawCell(o+1,i.monthName(o+1,!0),this._dateValue.month)),u.appendChild(this.drawCell(o+7,i.monthName(o+7,!0),this._dateValue.month)),s.appendChild(u)}r.appendChild(s),this.domItem.appendChild(r),this.parent.appendChild(this.domItem),this.bindEvents(!0)},drawCell:function(e,t,n){var r=document.createElement("td");return r.className="s-calendar-my-item",r.syraOnClick="onMonthClick",r.syraValue=e,r.textContent=t,e==n&&(r.className+=" s-calendar-select",this.selectedCell=r),r},toggle:function(e){e?this.domItem.style.display="":this.domItem.style.display="none"},onMonthClick:function(e){this.selectedCell&&(this.selectedCell.className="s-calendar-my-item"),(this.selectedCell=e).className="s-calendar-my-item s-calendar-select",this._selectedMonth=e.syraValue;var t=this._selectedMonth?this._selectedMonth:this._dateValue.month;this._currentDate=this._dateValue=i.fromJsDate(new Date(this._dateValue.year,t-1,this._dateValue.day)),this.handler.onEvent("onCalendarUpdate",this)},bindEvents:function(e){var t=this;e?$(t.domItem).delegate("td","click",function(e){t.onClick(e),e.preventDefault(),e.stopPropagation()}):$(t.domItem).undelegate()},onClick:function(e){var t=this;while(e.target){if(e.target.syraOnClick){this[e.target.syraOnClick](e.target,e);return}e.target=e.target.parentNode}},destroy:function(){this.bindEvents(!1),this.domItem=this._dateValue=this.selectedCell=null}});t.MonthChoice=s}),define("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/types/date"),o=r.defineClass(function(){},null,{create:function(e,t,n){this.parent=e,this.domItem=document.createElement("nav"),this.domItem.className="s-calendar-quick-list",this.handler=n,this._dateValue=t,this._selectedYear=this._dateValue.year;var r=document.createElement("table");r.className="s-calendar-year-choice";var i=document.createElement("tbody");this.rows=[];for(var s=0;s<6;s++){var o=document.createElement("tr");if(s==0)this.addPrevNextCell(o,!0),this.addPrevNextCell(o,!1);else{var u=this._dateValue.year+s-4;o.appendChild(this.drawCell(u,u)),o.appendChild(this.drawCell(u+5,u+5))}i.appendChild(o),this.rows.push(o)}r.appendChild(i),this.domItem.appendChild(r),this.parent.appendChild(this.domItem),this.bindEvents(!0)},addPrevNextCell:function(e,t){var n=document.createElement("td");n.className="s-calendar-my-link-cell";var r=document.createElement("a");r.className=(r.syraIsPrev=t)?"s-calendar-prev-year":"s-calendar-next-year",r.textContent=(r.syraIsPrev=t)?i.text("date.month.label.prev"):i.text("date.month.label.next"),r.syraOnClick="onChangeYear",n.appendChild(r),e.appendChild(n)},drawCell:function(e,t){var n=document.createElement("td");return n.className="s-calendar-my-item",n.syraOnClick="onSelectYear",n.syraValue=e,n.textContent=t,e==this._selectedYear&&(n.className+=" s-calendar-select",this.selectedCell=n),n},toggle:function(e){e?this.domItem.style.display="":this.domItem.style.display="none"},_refreshYearCell:function(e,t){e.syraValue+=t,e.textContent=e.syraValue,e.syraValue==this._selectedYear&&(e.className+=" s-calendar-select",this.selectedCell=e)},onChangeYear:function(e){var t=e.syraIsPrev?-10:10;for(var n=1,r=this.rows.length;n<r;n++){var i=this.rows[n].childNodes;this._refreshYearCell(i[0],t),this._refreshYearCell(i[1],t)}},onSelectYear:function(e){this.selectedCell&&(this.selectedCell.className="s-calendar-my-item"),(this.selectedCell=e).className="s-calendar-my-item s-calendar-select",this._selectedYear=e.syraValue;var t=this._selectedYear?this._selectedYear:this._dateValue.year;this._currentDate=this._dateValue=s.fromJsDate(new Date(t,this._dateValue.month,this._dateValue.day)),this.handler.onEvent("onCalendarUpdate",this)},bindEvents:function(e){var t=this;e?$(t.domItem).delegate("td","click",function(e){t.onClick(e),e.preventDefault(),e.stopPropagation()}):$(t.domItem).undelegate()},onClick:function(e){var t=this;while(e.target){if(e.target.syraOnClick){this[e.target.syraOnClick](e.target,e);return}e.target=e.target.parentNode}},destroy:function(){this.bindEvents(!1),this.rows=this.domItem=this._dateValue=this.selectedCell=null}});t.YearChoice=o}),define("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice","syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/helpers/locale"),o=e("syracuse-tablet/html/js/helpers/types/date"),u=e("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice").MonthChoice,a=e("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice").YearChoice,f=r.defineClass(function(){},null,{onClick:function(e){var t=this,n;while(e.target&&e.target!=t.handler.parentSlot){if(e.target.getAttribute("data-s-syraOnClick")){n=this[e.target.getAttribute("data-s-syraOnClick")](e.target,e),n&&this.handler.closeContainer();return}e.target=e.target.parentNode}},onTodayClick:function(){return this._currentDate=o.today(),this.field.setFieldValue(o.fromInternalValue(this._currentDate._value).toString()),!0},onDayClick:function(e){return this.field.setFieldValue(o.fromInternalValue(e.getAttribute("data-s-syraValue")).toString()),!0},onChangePeriode:function(e){e.getAttribute("data-s-syraPeriod")=="month"?this._currentDate=this._currentDate.addMonths(e.getAttribute("data-s-syraIsPrev")?-1:1):e.getAttribute("data-s-syraPeriod")=="year"?this._currentDate=this._currentDate.addYears(e.getAttribute("data-s-syraIsPrev")?-1:1):this._currentDate=this._currentDate.addDays(e.getAttribute("data-s-syraIsPrev")?-7:7),this.handler.onEvent("onCalendarUpdate",this)},onMonthClick:function(){this.handler.onEvent("onMonthClick",this)},onYearClick:function(){this.handler.onEvent("onYearClick",this)},getValueForSelector:function(e){return e.getValue()&&e.getValue().slice(0,10)},create:function(e,t){this.domItem=document.createElement("div"),this.domItem.className="s-calendar";var n=this.getValueForSelector(e)||"";return this._selectedDate=n?o.parse(n):o.today(),this._selectedDate=this._selectedDate._value==0?o.today():this._selectedDate,this._currentDate=t._currentDate||o.fromInternalValue(this._selectedDate._value),this.field=e,this.handler=t,this._table=document.createElement("table"),this._table.setAttribute("cellspacing",0),this._table.className="s-calendar-content",this._table.appendChild(this._appendHead()),this._table.appendChild(this.body=document.createElement("tbody")),this._table.appendChild(this._appendFoot()),this.domItem.appendChild(this._table),this._drawBody(),this.domItem},_appendHead:function(){var e=document.createElement("thead"),t=document.createElement("tr"),n=document.createElement("th");n.setAttribute("colspan",8),n.className="s-calendar-month-year";var r=document.createElement("div");r.className="s-calendar-month-year-slot",n.appendChild(r);var i=document.createElement("a");i.setAttribute("data-s-syraOnClick","onChangePeriode"),i.setAttribute("data-s-syraIsPrev",!0),i.setAttribute("data-s-syraPeriod","year"),i.className="s-calendar-prev s-calendar-prev-year glyphicon glyphicon-fast-backward",r.appendChild(i),i=document.createElement("a"),i.setAttribute("data-s-syraOnClick","onChangePeriode"),i.setAttribute("data-s-syraIsPrev",!0),i.setAttribute("data-s-syraPeriod","month"),i.className="s-calendar-prev s-calendar-prev-month glyphicon glyphicon-step-backward",r.appendChild(i),this._monthLink=document.createElement("a"),this._monthLink.className="s-month s-calendar-month-year-link",r.appendChild(this._monthLink).setAttribute("data-s-syraOnClick","onMonthClick"),this._yearLink=document.createElement("a"),this._yearLink.className="s-year s-calendar-month-year-link",r.appendChild(this._yearLink).setAttribute("data-s-syraOnClick","onYearClick"),i=document.createElement("a"),i.setAttribute("data-s-syraOnClick","onChangePeriode"),i.setAttribute("data-s-syraPeriod","month"),i.className="s-calendar-next s-calendar-next-month glyphicon glyphicon-step-forward",r.appendChild(i),i=document.createElement("a"),i.setAttribute("data-s-syraOnClick","onChangePeriode"),i.setAttribute("data-s-syraPeriod","year"),i.className="s-calendar-next s-calendar-next-year glyphicon glyphicon-fast-forward",r.appendChild(i),t.appendChild(n),e.appendChild(t),t=document.createElement("tr");var n=document.createElement("th");n.className="s-calendar-week-day",t.appendChild(n);var s=[1,2,3,4,5,6,0];for(var u=0,a=s.length;u<a;u++){var n=document.createElement("th");n.className="s-calendar-week-day",n.title=o.dayName(s[u]),n.textContent=o.dayName(s[u],!0),t.appendChild(n)}return e.appendChild(t),e},_appendFoot:function(){var e=document.createElement("tr"),t=document.createElement("td");t.setAttribute("colspan",3),t.className="s-calendar-foot-week";var n=document.createElement("a");n.setAttribute("data-s-syraOnClick","onChangePeriode"),n.setAttribute("data-s-syraPeriod","week"),n.className="s-calendar-prev s-calendar-prev-week glyphicon glyphicon-chevron-left",n.setAttribute("data-s-syraIsPrev",!0),t.appendChild(n);var r=document.createElement("label");r.className="s-calendar-foot-week-title",r.textContent=s.text("date.label.week"),t.appendChild(r),this._weekNumber=document.createElement("label"),this._weekNumber.className="s-calendar-foot-week-title-num",t.appendChild(this._weekNumber),n=document.createElement("a"),n.setAttribute("data-s-syraOnClick","onChangePeriode"),n.setAttribute("data-s-syraPeriod","week"),n.className="s-calendar-next s-calendar-next-week glyphicon glyphicon-chevron-right",t.appendChild(n),e.appendChild(t),t=document.createElement("td"),t.setAttribute("colspan",3),t.className="s-calendar-foot-today",n=document.createElement("a"),n.className="s-calendar-today-link",n.setAttribute("data-s-syraOnClick","onTodayClick"),n.textContent=s.text("date.label.today"),t.appendChild(n),e.appendChild(t),t=document.createElement("td"),t.setAttribute("colspan",2),e.appendChild(t);var i=document.createElement("tfoot");return i.appendChild(e),i},_drawBody:function(){var e=this._currentDate.month||9,t=o.monthName(e);this._monthLink.textContent=t,this._yearLink.textContent=this._currentDate.year||2014,i.empty(this.body);var n=o.fromInternalValue(this._currentDate._value),r=n=n.begOfMonth();n=n.begOfWeek(1);for(var s=0;s<6;s++){var u=document.createElement("tr"),a=s==0?r:n,f=document.createElement("td");f.className="s-calendar-week-num",u.appendChild(f),f.textContent=a.week;for(var l=0;l<7;l++){var f=document.createElement("td");f.className="s-calendar-day-link",f.setAttribute("data-s-syraOnClick","onDayClick"),f.setAttribute("data-s-syraValue",n._value);var c=document.createElement("a");c.textContent=n.day,e!=n.month&&(f.className+=" s-calendar-other-month"),this._currentDate.equals(n)&&(f.className+=" s-calendar-select",c.className="s-calendar-select"),f.appendChild(c),u.appendChild(f),n=n.addDays(1)}this.body.appendChild(u)}this._weekNumber.textContent=this._currentDate.week},bindEvents:function(e){var t=this,n=t.handler.getParentSlot();e?$(n).delegate("td, a","click",function(e){t.onClick(e),e.preventDefault(),e.stopPropagation()}):($(n).undelegate(),t._month&&t._month.bindEvents(!1),t._year&&t._year.bindEvents(!1))},destroy:function(){this.bindEvents(!1),this._currentDate=this.field=this._currentDate=this.quickList=this._month=this._year=this._selectedDate=this._monthLink=this._yearLink=this._weekNumber=this._quick=this.body=this.domItem=null}});t.Klass=f}),define("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/types/time"),s=e("syracuse-tablet/html/js/helpers/locale"),o=r.defineClass(function(){},null,{onClick:function(e){var t=this,n;while(e.target){if(e.target.getAttribute("data-s-syraOnClick")){n=this[e.target.getAttribute("data-s-syraOnClick")](e.target,e),n&&this.handler.closeContainer();return}e.target=e.target.parentNode}},setContainer:function(e){this.$$modalElmt=e},create:function(e,t,n){this.domItem=document.createElement("div"),this.domItem.className="s-time-choice";var r=r||{};this.columns=r.columns||2,this.interval=r.interval||60,this.field=e,this.handler=t,this.cb=n,this.curTime=i.now();var o=1440/this.interval,u=o/this.columns,a=document.createElement("table");a.className="s-time-choice-table",a.setAttribute("cellspacing","0"),a.setAttribute("cellpadding","0");var f,l,c=0,h=i.parse("00:00:00");for(var p=0;p<u;p++){f=document.createElement("tr");for(var d=0;d<this.columns;d++){l=document.createElement("td"),l.className="s-time-choice-td";if(c<o){var v=document.createElement("a");v.className="s-time-choice-a",v.setAttribute("data-s-syraOnClick","onTimeClick"),h.hour==this.curTime.hour&&(v.className+=" s-time-select"),v.textContent=h.toString(s.getTimeFormat()),l.appendChild(v)}f.appendChild(l),h=h.addMinutes(this.interval),c++}a.appendChild(f)}return this.domItem.appendChild(a),this.domItem},onTimeClick:function(e){var t=this,n=i.parse(e.textContent,s.getTimeFormat()).toString();if(!this.cb)return t.field.setFieldValue(n),!0;t.cb(n,t.handler)},bindEvents:function(e){var t=this,n=t.handler.getParentSlot();e?$(n).delegate("a","click",function(e){t.onClick(e),e.preventDefault(),e.stopPropagation()}):$(n).undelegate()},destroy:function(){this.bindEvents(!1),this.domItem=this.field=this.selectedLink=null}});t.Klass=o}),define("syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice","syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector","syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice").MonthChoice,o=e("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice").YearChoice,u=e("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass,a=e("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector").Klass,f=r.defineClass(function(e){this.field=e},null,{onEvent:function(e,t){this[e](t)},setContainer:function(e){this.$$container=e},setParentSlot:function(e){this.parentSlot=e},getParentSlot:function(){return this.parentSlot},onMonthClick:function(e){var t=this,n=e._currentDate;i.empty(t.parentSlot),e.destroy();var r=new s;r.create(this.parentSlot,n,t)},onYearClick:function(e){var t=this,n=e._currentDate;i.empty(t.parentSlot),e.destroy();var r=new o;r.create(t.parentSlot,n,t)},onOpenTime:function(e){var t=this;t.dateValue=e.dateValue,i.empty(t.parentSlot),e.destroy();var n=new a,r=n.create(t.field,t,t.onSelectTime);t.parentSlot.appendChild(r),n.bindEvents(!0)},onCalendarUpdate:function(e){var t=this;t._currentDate=e._currentDate,i.empty(t.parentSlot),e.destroy();var n=new u,r=n.create(t.field,t);t.parentSlot.appendChild(r),n.bindEvents(!0)},onSelectTime:function(e,t){var n=t;n.field.setFieldValue(n.dateValue+" "+e),n.closeContainer()},closeContainer:function(){this.$$container.modal("hide")}});t.Klass=f}),define("syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/types/date"),s=e("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass,o=r.defineClass(function(){},s,{onTodayClick:function(){this._currentDate=i.today(),this.dateValue=i.fromInternalValue(this._currentDate._value).toString(),this.handler.onEvent("onOpenTime",this)},onDayClick:function(e){this.dateValue=i.fromInternalValue(e.getAttribute("data-s-syraValue")).toString(),this.handler.onEvent("onOpenTime",this)}});t.Klass=o}),define("syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector","syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector","syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/ui/modal"),s=e("syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler").Klass,o={date:{windows:null,android:null,ios:null,"default":e("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass},datetime:{windows:null,android:null,ios:null,"default":e("syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector").Klass},time:{windows:null,android:null,ios:null,"default":e("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector").Klass}},u=function(e){var t;switch(e){case"application/x-date":t="date";break;case"application/x-datetime":t="datetime";break;case"application/x-time":t="time"}var n=r.getLookAndFeel(),i=o[t];i&&(i=i[n]||i["default"]);if(!i)throw new Error("Expected date/time/datetime type. Got "+e);return new i},a=function(e){var t=new s(e),n=u(e.$type),r=n.create(e,t),o=i.field(e.getTitle(),r.outerHTML,function(e,r){e=="shown.bs.modal"?(t.setContainer(r),t.setParentSlot(r.find(".modal-body")[0]),n.bindEvents(!0)):n.destroy()})};t.createSelector=a}),define("syracuse-tablet/html/js/controls/field/ctrlDate",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory"),u=e("syracuse-tablet/html/js/ui/fontUtils"),a=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n)},i,{buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),a=n.getFormattedValue(n.getValue());if(n.$isEditMode){var f=s.createDomElement("div",["input-group"],null,null,r);n.createMainInput(f,a);var l=s.createDomElement("span",["input-group-btn"],null,null,f);n.picker=s.createDomElement("button",["btn","btn-default","s-m-meta"],null,null,l),s.createDomElement("span",u.dateFieldIcon(n.$type),null,null,n.picker),$(n.picker).click(function(){o.createSelector(n)})}else n.appendTextValue(r,a)},applyMetaData:function(e){var t=this;i.prototype.applyMetaData.call(t,e)},setFieldValue:function(e){this.$type.indexOf("datetime")>-1&&e.length<=10&&(e+="T00:00:00.0Z"),i.prototype.setFieldValue.call(this,e)},setDisplayValue:function(e){var t=this;t.$isEditMode?t.domInput.value=e:t.fieldValue.textContent=e},getFieldFormat:function(){return this.formatter.format}});t.Klass=a}),define("syracuse-tablet/html/js/controls/array/arrayBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=function(e){return!e||!e.$resources?null:(e.$resources.forEach(function(e){e&&e.destroy()}),null)},u=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r.builder=null,r._arrayData=null},i,{destroy:function(){var e=this;i.prototype.destroy.call(e),e.prototype=null,e.builder&&(e.builder.destroy(),e.builder=null),e._arrayData=o(e._arrayData),e._waiting&&(s.waitWheelDestroy(e._waiting),e._waiting=null)},buildHtml:function(e,t,n){var r=this;if(r.builder==null)throw new Error("Null builder");var i=n.isArray;n.arrContext=r.builder.type,r.builder.buildHtml(e,r._setArrayData(t),n),n.isArray=i||null},setBuilder:function(e){this.builder=e},refresh:function(e,t){var n=this;if(n.builder==null)throw new Error("Null builder");n.builder.refresh(n._setArrayData(e),t)},readArrayData:function(e){throw new Error("not implemented")},_setArrayData:function(e){var t=this;t.empty(),o(t._arrayData),t._arrayData=t.readArrayData(e);if(t._arrayData==null)throw new Error("Null arrayData");return t._arrayData},getArrayData:function(){return this._arrayData},getRowDetailDao:function(e){var t=this;if(!t._arrayData||!t._arrayData.$resources)return null;var n;return t._arrayData.$resources.some(function(t){if(t.getValue("$uuid")===e)return n=t,!0}),n?n.clone():null},waitStart:function(){var e=this;e._waiting||(e._waiting=s.waitWheelCreate(e.$$elmt.parent()),e._waiting.$$bckg.css({position:"absolute"}),e._waiting.$$wheel.css({position:"absolute"})),s.waitWheelStart(e._waiting)},waitStop:function(){var e=this;e._waiting&&s.waitWheelStop(e._waiting)}});t.Klass=u}),define("syracuse-tablet/html/js/controls/array/builderBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/controls/ctrlFactory"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/ui/fontUtils"),o=e("syracuse-tablet/html/js/sdata/sdataUtils"),u=e("syracuse-tablet/html/js/controls/ctrlFactory"),a=["application/x-password"],f=["$first","$previous","$next","$last","$more"],l=r.defineClass(function(e,t){var n=this;if(e==null)throw new Error("Null control");n.control=e,n.itemProto=e.prototype.getPrototype("$item"),n.type=t},null,{destroy:function(){var e=this;e.control=null,e.itemProto=null,e.$$elmt=null},buildHtml:function(e,t,n){var r=this;return e!=null&&(r.$$elmt=r.control.createRootElement(["s-m-control"],e)),r.$$elmt},refresh:function(e,t){var n=this;n.control.empty(),n.buildHtml(null,e,{})},buildPagingLinks:function(e,t){var n=this,r=function(e,t,n){$(i.createDomElement("a",["s-m-link",s.paginationIcon(t)],null,n)).appendTo(e)};t=t||{};var u=t.bottom?$(i.createDomElement("div",["s-m-grid-links"])).appendTo(n.$$elmt):null,a=t.top?$(i.createDomElement("div",["s-m-grid-links"])).prependTo(n.$$elmt):null;e.$links&&f.forEach(function(t){var i=e.$links[t];if(i){var s=o.getLinkInfo(i.$url),f={"data-nav-refresh":!0,"data-nav-type":t,"data-sdata-url":i.$url,"data-control-id":n.control.id};n.control.controller.isVignette&&(f["data-nav-target"]="vignette"),u&&r(u,t,f),a&&r(a,t,f)}})},buildDetailLink:function(e,t){if(t==null)throw new Error("Null options");var n=this,s=t.attrs||{},u=n.itemProto.data("$links"),a,f=u&&u.DASHBOARD||u&&u.$details;if(f){a=o.getLinkInfo(f.$url,e),s.href="#",s["data-nav"]=a.page,a.sDataUrl&&(s["data-sdata-url"]=a.sDataUrl);if(a.parameters){var l=r.parseExpression(a.parameters,e);s["data-sdata-parameters"]=l}}else a=null;return a!=null||t.createIfNoLink?i.createDomElement(t.tag,t.css,t.title,s,t.parent):null},isExcluded:function(e){return e==null||e.$isExcluded===!0||a.indexOf(e.$type)>=0},getPrototype:function(){return this.control.prototype},getArticle:function(){return this.control.article},getArrayData:function(){return this.control.getArrayData()},getId:function(){var e=this;return arguments.length>0?e.control.id+" - "+Array.prototype.join.call(arguments,"-"):e.control.id},appendField2Cell:function(e,t,n,r){var i=this;if(t=="$MORE$")$('<div class="s-m-control s-m-field"><div class="s-m-value"><span class="glyphicon glyphicon-remove"></span></div></div>');else{n||(n=i.itemProto.getPrototype(t));if(!n)return null;u.appendField2Cell(e,i.control.controller,{$bind:t},n,r)}}});t.Klass=l}),define("syracuse-tablet/html/js/controls/array/builderGrid",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/prototype"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/controls/array/builderBase").Klass,o=e("syracuse-tablet/html/js/ui/uiUtils"),u=e("syracuse-tablet/html/js/helpers/prototype"),a="$OPENCHILD$",f=["image","application/x-array","application/x-document","application/x-binary"],l=function(){return{$bind:a,$item:u.create({$title:"Child"})}},c=r.defineClass(function(e){var t=this;s.call(t,e,"grid"),t.maxCols=i.$config("arrays.gridMaxCols")},s,{buildHtml:function(e,t,n){var r=this;n=n||{},n.displayRowIdx=!1,s.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-array s-m-table");var i=r.getPrototype().property(r.getArticle().$bind,"$title");i&&$(o.createDomElement("div",["s-m-title"])).text(i).appendTo(r.$$elmt);var u=o.createDomElement("div",["s-m-value"],null,null,r.$$elmt);if(r._createColumnInfo(n).length>0){var a=o.createDomElement("table",["table table-hover table-condensed"],null,null,u);r._buildTableHead(a,n),r._buildTableBody(a,t,n),r.buildPagingLinks(t,{top:!0,bottom:!0})}else $(u).addClass("empty")},_createColumnInfo:function(e){var t=this;t.columnInfo=[],e.displayRowIdx&&t.columnInfo.push({$bind:u.ROWIDXPROP,$item:u.getRowIdxProto()});var n=t.itemProto.data("$properties"),r=Object.keys(n);return r.forEach(function(e,r){t.isExcluded(n[e],r)||t.columnInfo.push({$bind:e,$item:t.itemProto.getPrototype(e)})}),t.columnInfo.length!=r.length&&t.columnInfo.push(l()),t.columnInfo},isExcluded:function(e,t){var n=this;return s.prototype.isExcluded(n)?!0:t>=n.maxCols||f.indexOf(e.$type)>=0},_buildTableHead:function(e,t){var n=this,i=o.createDomElement("thead",null,null,null,e),s=o.createDomElement("tr",null,null,null,i);n.columnInfo.forEach(function(e){var t=e.$item?r.parseExpression(e.$item.data("$title")||"",null,n.control.prototype):"";o.createDomElement("th",null,t,null,s)})},_buildTableBody:function(e,t,n){var r=this,i=o.createDomElement("tbody");e.appendChild(i),t.$resources.forEach(function(e,t){r._buildTableRow(i,e,t,n)})},_buildTableRow:function(e,t,n,r){var i=this,s;r.displayRowIdx&&(t.setRowIndex(n),s=["s-m-rowidx"]);var f=i.buildDetailLink(t,{tag:"tr",parent:e,createIfNoLink:!0}),l,c,h;i.columnInfo.forEach(function(e,n){c=r.displayRowIdx&&e.$bind===u.ROWIDXPROP,l=o.createDomElement("td",c?s:null,null,null,f),h=e.$bind===a?i._getOpenChildProto(t.getValue("$uuid")):e.$item,i.appendField2Cell(l,e.$bind,h,t)})},_getOpenChildProto:function(e){var t=this,n={"data-nav":"rowdetail","data-control-id":t.control.id,"data-parent-id":t.control.controller.id,"data-params":e};return t.control.controller.isVignette&&(n["data-nav-target"]="vignette"),u.create({$title:"Child",$type:"tablet/x-icon",$icon:t.$isEditMode?"editrow":"detailrow",$action:n})}});t.Klass=c}),define("syracuse-tablet/html/js/controls/array/arrayStd",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/arrayBase","syracuse-tablet/html/js/controls/array/builderGrid"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/array/arrayBase").Klass,s=e("syracuse-tablet/html/js/controls/array/builderGrid").Klass,o=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r.setBuilder(new s(r))},i,{readArrayData:function(e){return e.getArrayData(this.article.$bind,this.prototype)}});t.Klass=o}),define("syracuse-tablet/html/js/controls/array/builderCardHoriz",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/array/builderBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(e){var t=this;i.call(t,e,"card"),t.pageContentHeightSubstraction=190,t.minLandscapeHeight=550,t._itemWidth=140,t._itemHeight=140,t._itemSpacing=10,t.recordItems={}},i,{destroy:function(){var e=this;i.prototype.destroy.call(e),$(window).off("resize",e.onResizeHandler),e.recordItems=null},buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-array s-m-grid s-m-horizontal"),r.$$domItems=$(s.createDomElement("div",["s-m-grid-items s-m-horizontal"],null,{id:r.getId("items")})).appendTo(r.$$elmt),r.onResizeHandler=r.onResizeWindow.bind(r),$(window).on("resize",r.onResizeHandler),t.$resources.forEach(function(e,t){var n=s.createDomElement("div",["s-m-grid-item"],null,null,r.$$domItems);r.recordItems[e.getValue("$uuid")]=n,r._buildRecord(e,n,t)}),r.onResizeWindow(),r.buildPagingLinks(t,{top:!0})},_buildRecord:function(e,t,n){var r=this,i=r.itemProto.data("$value",e)||"Rank;"+(n+1),o=r.buildDetailLink(e,{tag:"a",parent:t,title:i,css:["s-m-link s-m-detail-link"]})},onResizeWindow:function(){var e=this,t=e.getArrayData();if(!t)return;var n=window.innerWidth,r=window.innerHeight;r-=e.pageContentHeightSubstraction,e._maxItemHeight=r,e.$$domItems.height(e._maxItemHeight-20);var i=0,s=0;t.$resources.forEach(function(t){s+e._itemHeight>e._maxItemHeight&&(s=0,i+=e._itemWidth+e._itemSpacing);var n=e.recordItems[t.getValue("$uuid")];if(n){var r=n.style;r.left=i+"px",r.top=s+"px",r.width=e._itemWidth+"px",r.height=e._itemHeight+"px",s+=e._itemHeight+e._itemSpacing}})}});t.Klass=o}),define("syracuse-tablet/html/js/controls/array/arrayQuery",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/arrayBase","syracuse-tablet/html/js/controls/array/builderCardHoriz","syracuse-tablet/html/js/controls/array/builderGrid"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/array/arrayBase").Klass,s=e("syracuse-tablet/html/js/controls/array/builderCardHoriz").Klass,o=e("syracuse-tablet/html/js/controls/array/builderGrid").Klass,u=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r.controller.isVignette?r.setBuilder(new o(r)):r.prototype.isQuery()?r.setBuilder(new s(r)):r.setBuilder(new o(r))},i,{readArrayData:function(e){return e.getQueryData(this.prototype)}});t.Klass=u}),define("syracuse-tablet/html/js/controls/array/builderLookup",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderGrid","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/array/builderGrid").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(e){var t=this;i.call(t,e)},i,{buildDetailLink:function(e,t){if(t==null)throw new Error("Null options");var n=this,r=t.attrs||{};return r.href="#",r["data-action"]="select",r["data-params"]=e.getValue("$uuid"),s.createDomElement(t.tag,t.css,t.title,r,t.parent)}});t.Klass=o}),define("syracuse-tablet/html/js/controls/array/arrayLookup",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/arrayBase","syracuse-tablet/html/js/controls/array/builderLookup"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/array/arrayBase").Klass,s=e("syracuse-tablet/html/js/controls/array/builderLookup").Klass,o=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r.setBuilder(new s(r))},i,{readArrayData:function(e){return e.getLookupData(this.prototype)}});t.Klass=o}),define("syracuse-tablet/html/js/controls/field/ctrlReference",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,u=e("syracuse-tablet/html/js/ui/fontUtils"),a=r.defineClass(function(e,t,n,r){var i=this;o.call(i,e,t,n,r),i.isUnit=i.options.isUnit===!0,i.isUnit?(i.$isEditMode=!1,i.cssType="s-m-unit"):i.cssType="s-m-ref"},o,{getValue:function(e){var t=o.prototype.getValue.call(this);return t?t[e||"$value"]||"":""},buildFieldTitle:function(e,t){var n=this;return n.isUnit?null:o.prototype.buildFieldTitle.call(n,e,t)},buildFieldValue:function(e,t){var n=this,r=o.prototype.buildFieldValue.call(n,e),i=n.getValue();if(n.$isEditMode)n.buildEditValue(r,n.getValue());else{var s=(n.getValue("$description")||"").trim(),u=(n.getValue("$title")||"").trim();n.isUnit?n.buildUnitValue(r,i,s,u):n.buildDetailValue(r,i,s,u)}},buildEditValue:function(e,t){var n=this,r=s.createDomElement("div",["input-group"],null,null,e);n.createMainInput(r,n.getFormattedValue(t));var o=n.prototype.getDataByPath("$item.$links.$lookup");if(!o)throw new Error("ctrlReference - Expected $lookup link");var a=i.getLinkInfo(o.$url,n.dao),f=s.createDomElement("span",["input-group-btn"],null,null,r),l={href:"#","data-nav":a.page,"data-sdata-url":a.sDataUrl,"data-param":n.id,"data-parent-id":n.controller.id,"data-control-id":n.id,title:n.prototype.checkExpression(o.$title)||"Lookup"};n.controller.isVignette&&(l["data-nav-target"]="vignette"),n.picker=s.createDomElement("a",["btn","btn-default","s-m-meta"],null,l,f),s.createDomElement("span",u.refFieldIcon(),null,null,n.picker)},buildDetailValue:function(e,t,n,r){var i=this,o=i.addLink(e);if(t.length>0){var u=i.getAuthoring("$value",{});if(u.$refDescrHidden===!0)$(o).text(t);else{var a=i.getAuthoring("$value.$refDescr",{});a.$withTitle&&r.length>0&&r!=n&&(n=n+"-"+r);var f=s.createDomElement("span",i.appendStyleAuthoring(["s-m-descr"],a),n);a.$before===!0&&(o.appendChild(f),s.appendTextNode(o," ")),s.appendTextNode(o,t),a.$before!=1&&(s.appendTextNode(o," "),o.appendChild(f))}}},buildUnitValue:function(e,t,n,r){var i=this,o=n.length>0?n:r.length>0?r:t;o=t||"",o&&o.toLowerCase&&(o=o.toLowerCase().smCapitalize()),s.createDomElement("span",["s-m-descr"],o,null,i.addLink(e))},addLink:function(e){var t=this,n=t.prototype.getDataByPath("$item.$links.$details");if(n){var r=i.getLinkInfo(n.$url,t.dao);return s.createDomElement("a",null,null,{href:"#","data-nav":r.page,"data-sdata-url":r.sDataUrl,title:t.prototype.checkExpression(n.$title)||"Detail"},e)}return e},setLookupValue:function(e){var t=this,n=t.prototype.getLookupValue();if(n){var r=e[n];r!=null&&(t.setFieldValue(r),$(t.domInput).focus())}}});t.Klass=a}),define("syracuse-tablet/html/js/controls/layout/layoutBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/structElmt","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/structElmt").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r.title=n.$title},i,{destroy:function(){var e=this;i.prototype.destroy.call(e)},createId:function(e){var t=this;return r.readableuid(e,t.article.$layoutType)},buildHtml:function(e,t,n){var r=this;r.createRootElement(["s-m-layout"],e),r.article.$title&&(n==null||n.noTitle)&&r.buildTitle()},buildTitle:function(){return s.createDomElement("header",null,this.article.$title,null,this.$$elmt)},onLayoutChange:function(){$.each(this.children,function(e,t){t.onLayoutChange&&t.onLayoutChange()})}});t.Klass=o}),define("syracuse-tablet/html/js/controls/layout/layoutRow",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-row");var o={};r.displayOptions&&r.displayOptions.rowHeight&&(o.style="height:"+r.displayOptions.rowHeight);var u=r._getWidthClasses(),a=s.createDomElement("div",["row"],null,o,r.$$elmt);$.each(r.children,function(e,r){var i=["s-m-layout-cell"];i.smExtend(u[e]);var o=s.createDomElement("div",i,null,null,a);r.buildHtml($(o),t,n)})},_getWidthClasses:function(){var e=this,t={},n=[{$prop:"$widthLg",$prefix:"col-lg-"},{$prop:"$widthMd",$prefix:"col-md-"},{$prop:"$widthSm",$prefix:"col-sm-"},{$prop:"$widthXs",$prefix:"col-xs-"}];n.forEach(function(n){var r=e.article[n.$prop];if(r){var i=n.$prefix,s=r.split(",");if(e.children.length===s.length)for(var o=0;o<e.children.length;o++)t[o]=t[o]||[],t[o].push(i+s[o].trim()),n.$added=!0}});var r=n[n.length-1];if(r.$added!==!0)for(var i=0;i<e.children.length;i++)t[i]=t[i]||[],t[i].push(r.$prefix+"12");return t}});t.Klass=o}),define("syracuse-tablet/html/js/controls/layout/layoutStack",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-stack"),n&&n.makeFullHeight===!0&&r.$$elmt.height("100%"),$.each(r.children,function(e,i){i.buildHtml(r.$$elmt,t,n)})}});t.Klass=o}),define("syracuse-tablet/html/js/controls/layout/layoutTab",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-tabs");var o=s.createDomElement("div",[r.article.$layoutType]);$.each(r.children,function(e,r){r.isTabSection=!0;var i=s.createDomElement("div",["s-m-layout-cell"],null,{style:"display:"+(e!=0?"none":"")},o);r.buildHtml($(i),t,n)})},buildTitle:function(){}});t.Klass=o}),define("syracuse-tablet/html/js/controls/layout/layoutHub",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r.pageContentHeightSubstraction=160,r.minLandscapeHeight=550},i,{destroy:function(){var e=this;i.prototype.destroy.call(e),$(window).off("resize",e.onResizeHandler)},buildHtml:function(e,t,n){var r=this;n=n||{},n.noTitle=!0,i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-hub"),r.children.forEach(function(e){e.buildHtml(r.$$elmt,t)}),r.onResizeHandler=r.onResizeWindow.bind(r),$(window).on("resize",r.onResizeHandler),r._calculateLayout()},onResizeWindow:function(){var e=this;e._calculateLayout()},_calculateLayout:function(){var e=this,t=window.innerWidth,n=window.innerHeight,r=t>n&&n>=e.minLandscapeHeight?"landscape":"portrait";n-=e.pageContentHeightSubstraction,e.$$elmt.height(n);var i=0,s=0;this.children.forEach(function(e){e.calculateLayout({posX:i,posY:s,maxHeight:n,maxWidth:t,orientation:r}),r==="landscape"?i+=e.getWidth()+10:s+=e.getHeight()+10}),setTimeout(function(){e.onLayoutChange()},500)}});t.Klass=s}),define("syracuse-tablet/html/js/controls/layout/layoutHubGroup",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r._headerSpace=40,r._verticalBorderSubstraction=40},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-hub-group"),r._buildCellStructure(),r.cells.forEach(function(e){var i="";e.domItem=s.createDomElement("div",["s-m-tile"],null,null,r.$$elmt),e.children.forEach(function(r){var i=r.article&&r.article.$size||"medium",o=s.createDomElement("div",["s-m-tile","s-m-"+i],null,null,e.domItem);r.domItem=o,r.buildHtml($(o),t,n)})})},_buildCellStructure:function(){var e=this;e.cells=[];var t=null;e.children.forEach(function(n){var r=n.article&&n.article.$size||"medium";t||(t=e._createCell(n),e.cells.push(t)),r==="small"?(t.children.push(n),t.children.length===4&&(t=null)):(t.children.length>0&&(t=e._createCell(n),e.cells.push(t)),t.children.push(n),t=null)})},_createCell:function(e){var t=this,n=e.article&&e.article.$size||"medium";n=n==="small"?"medium":n;var r={size:n,children:[]};return r},calculateLayout:function(e){var t=this,n;t._width=0,t._height=0,t.hubGroupOptions=e,t.hubGroupOptions.orientation==="landscape"?t._calculateLayoutHorizontal():t._calculateLayoutVertical(),t.cells.forEach(function(e){n=e.size,e.domItem.style.left=e.x+"px",e.domItem.style.top=e.y+t._headerSpace+"px",e.domItem.style.width=t._sizes[n].width+"px",e.domItem.style.height=t._sizes[n].height+"px",e.domItem.style.position="absolute",e.x+t._sizes[n].width>t._width&&(t._width=e.x+t._sizes[n].width),e.y+t._sizes[n].height>t._height&&(t._height=e.y+t._sizes[n].height);var r=0,i=0;e.children.forEach(function(e){n=e.article&&e.article.$size||"medium",e.domItem.style.left=r+"px",e.domItem.style.top=i+"px",e.domItem.style.width=t._sizes[n].width+"px",e.domItem.style.height=t._sizes[n].height+"px",e.domItem.style.position="absolute",r!==0?(r=0,i+=t._sizes[n].height+t.hubGroupOptions.padY):r+=t._sizes[n].width+t.hubGroupOptions.padX})});var r=t.$$elmt.get(0).style;t.hubGroupOptions.orientation==="landscape"?(r.top="0px",r.left=t.hubGroupOptions.posX+"px",r.width=t._width+"px",r.height=t.hubGroupOptions.maxHeight-t._headerSpace+"px"):(r.top=t.hubGroupOptions.posY+"px",r.left="0px",r.width=t._width+"px",r.height=t._height+"px",t._height+=t._headerSpace)},_calculateLayoutHorizontal:function(){var e=this;e.hubGroupOptions.baseSize=70,e.hubGroupOptions.padX=5,e.hubGroupOptions.padY=5,e.hubGroupOptions.maxGroupHeight=e.hubGroupOptions.maxHeight-e._headerSpace,e.hubGroupOptions.maxGroupWidth=4*e.hubGroupOptions.baseSize+3*e.hubGroupOptions.padX,e.hubGroupOptions.maxFullTileHeight=Math.floor((e.hubGroupOptions.maxGroupHeight+e.hubGroupOptions.padY)/(e.hubGroupOptions.baseSize+e.hubGroupOptions.padY)/2)*(e.hubGroupOptions.baseSize+e.hubGroupOptions.padY)*2-e.hubGroupOptions.padY,e._sizes={small:{width:e.hubGroupOptions.baseSize,height:e.hubGroupOptions.baseSize},medium:{width:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padX,height:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padY},wide:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padY},large:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padY*3},full:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.maxFullTileHeight}};var t=0,n=0,r=0,i=0;e.cells.forEach(function(n){n.w=e._sizes[n.size].width,n.h=e._sizes[n.size].height;if(i+n.h>e.hubGroupOptions.maxGroupHeight||i!==0&&n.size==="full")i=0,t+=e.hubGroupOptions.maxGroupWidth+e.hubGroupOptions.padX,r=t;n.size==="medium"?(r-t+n.w>e.hubGroupOptions.maxGroupWidth&&(r=t,i+=n.h+e.hubGroupOptions.padY),n.x=r,n.y=i,r+=n.w+e.hubGroupOptions.padX):(r!==t&&(r=t,i+=e._sizes.medium.height+e.hubGroupOptions.padY),n.x=r,n.y=i,i+=n.h+e.hubGroupOptions.padY)})},_calculateLayoutVertical:function(){var e=this;e.hubGroupOptions.padX=5,e.hubGroupOptions.padY=5,e.hubGroupOptions.baseSize=Math.floor((e.hubGroupOptions.maxWidth-5*e.hubGroupOptions.padX-e._verticalBorderSubstraction)/40)*10,e.hubGroupOptions.maxGroupWidth=4*e.hubGroupOptions.baseSize+3*e.hubGroupOptions.padX,e.hubGroupOptions.maxGroupHeight=e.hubGroupOptions.maxHeight-e._headerSpace,e.hubGroupOptions.maxFullTileHeight=e.hubGroupOptions.maxGroupHeight,e._sizes={small:{width:e.hubGroupOptions.baseSize,height:e.hubGroupOptions.baseSize},medium:{width:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padX,height:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padY},wide:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padY},large:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padY*3},full:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.maxFullTileHeight}};var t=0,n=0;e.cells.forEach(function(r){r.w=e._sizes[r.size].width,r.h=e._sizes[r.size].height,r.size==="medium"?(r.x=t,r.y=n,t+=r.w+e.hubGroupOptions.padX,t+r.w>e.hubGroupOptions.maxGroupWidth&&(t=0,n+=r.h+e.hubGroupOptions.padY)):(t>0&&(t=0,n+=e._sizes.medium.height+e.hubGroupOptions.padY),r.x=t,r.y=n,n+=r.h+e.hubGroupOptions.padY)})},getWidth:function(){return this._width},getHeight:function(){return this._height}});t.Klass=o}),define("syracuse-tablet/html/js/controls/vignetteBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/application/pageLoader","syracuse-tablet/html/js/application/pageHelper","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/constants","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,o=e("syracuse-tablet/html/js/ui/uiUtils"),u=e("syracuse-tablet/html/js/application/pageLoader").Klass,a=e("syracuse-tablet/html/js/application/pageHelper"),f=e("syracuse-tablet/html/js/ui/modal"),l=e("syracuse-tablet/html/js/helpers/constants"),c=e("syracuse-tablet/html/js/helpers/notifications"),h={className:"waiting-blocks",elements:5,auto:!0,speed:200},p={main:'		<div id="{{ctrlId}}" class="s-m-control s-m-vignette {{type}}"> 			<section/>			<footer style="display:none"/> 			<div class="s-m-waiting bckg" style="display:none"/> 			<div class="s-m-waiting wheel" style="display:none"/> 		</div>	',iframe:'		<br><iframe src="{{url}}" style="position: absolute; top: 0px; left: 0px; height: 100vh; width: 100vh;"/>	',navgigBtns:'		<a href="#" data-action="vignetteBack" class="glyphicon glyphicon-circle-arrow-left" style="display:none"></a>		<a href="#" data-action="vignetteHome" class="glyphicon glyphicon-home" style="display:none"></a>	',vignetteError:'		<a href="#" data-action="vignetteError">{{text}}</a>	',linkPage:'<a href="{{href}}" data-nav-target="application" data-nav="{{data-nav}}" data-gadget-id="{{data-gadget-id}}" data-application-name="{{data-application-name}}" class="s-m-link-page">{{title}}</a>'},d=function(e,t){var n=e+"compiled",r=p[n];return r||(r=p[n]=Handlebars.compile(p[e])),r(t)},v=r.defineClass(function(e,t,n){var r=this;s.call(r,e,t,n),r._currentPage=null,r._pageLoader=null,r._$$wait=null,r._stateStack=[],r._error=null,r.displayStyle=n.data("$displayStyle"),r.openLinkInVignette=i.$config("openLinkInVignette")},s,{destroy:function(){var e=this;e._error=null,o.waitPluginDestroy(e._$$wait),e._currentPage&&(e._currentPage.destroy(),e._currentPage=null);if(e._pageLoader=null)e._pageLoader.destroy(),e._pageLoader=null;s.prototype.destroy.call(e)},getPageControl:function(e){return this._currentPage&&this._currentPage.getControl?this._currentPage.getControl(e):null},getPage:function(){return this._currentPage},changePage:function(e,t){return t=t||{},t.$displayStyle="$full",this._loadPage(e,t,!1)},refreshPage:function(e){var t=this;if(!t._currentPage)throw new Error("No current page");t._currentPage.refresh(e,{waitStart:function(e){t.waitStart()},waitStop:function(e){t.waitStop()}}).then(function(){}).fail(function(e){f.error("Refresh page on vignette",e)})},clearContent:function(){a.removeAllPages(this._$$content),this._$$content.empty()},_loadPage:function(e,t,n){var i=this;i._error=null,(!i.openLinkInVignette||i._stateStack.length==0)&&i.clearContent(),i._pageLoader||(i._pageLoader=new u({waitStop:function(){i.waitStop()},waitStart:function(){i.waitStart()},getRootElmt:function(){return i._$$content},getCurrentPage:function(){return i._currentPage},setCurrentPage:function(e){i._currentPage=e},setHistory:function(e){i.openLinkInVignette&&i._stateStack.push(e)},succeeded:function(e,t){i.openLinkInVignette&&i.refreshNavBtns(),t&&t.notifId&&(e.id===t.parentId?c.pageNotify(t.notifId,i._currentPage,t.notifData,t.controlId):r.modalError("Child page notification warning","Parent page is not the current page"))},loadingError:function(e,t,n){i._displayError("Loading page ["+t.name+"] error",n),e.resolve()}}));try{var s;if(typeof e=="string")t=t||{},t.vignette=!0,s=a.getPageInfo(e,t,i._currentPage);else{if(!n)throw new Error("Unexpected state");s=e}if(s.options&&s.options.$displayStyle==="$full")return i._pageLoader.load(s,n);if(t.gadget){var o=$.Deferred();return i._addPicker({"data-nav":s.name,"data-gadget-id":t.gadget.data("$uuid"),title:t.gadget.data("$title")}),o.resolve(),o.promise()}throw new Error("Unexpected vignette page")}catch(f){i._displayError("Loading page error",f)}},_loadRepresentation:function(e,t,n){var r=this;return n=$.extend({},n),n.$displayStyle=r.displayStyle,n.gadget=e,n.article=r.article&&r.article.$article,r._loadPage(t||e.getPageName(),n)},_displayError:function(e,t){var n=this;n._error={message:e,detail:t},n.$$elmt.addClass("s-m-error"),n.$$elmt.html(d("vignetteError",{text:"Loading failed"}))},buildHtml:function(e,t,n){var r=this,i=d("main",{ctrlId:r.id});r._stateStack.length>0||(r.setRootElement(i,e),r._$$content=r.$$elmt.children("section"),r.$$footer=r.$$elmt.children("footer"),r._$$wait=o.waitPluginCreate(r.$$elmt.children(".s-m-waiting.wheel"),h),r._$$waitBckg=r.$$elmt.children(".s-m-waiting.bckg"))},load:function(e,t){var n=this;t=t||{};var r=$.Deferred(),i=function(){r.resolve()},s=function(e){n._displayError(e),i()};try{var o=n.prototype.getVignetteGadget();if(o&&o.isValid())switch(o.data("$type")){case"$representation":case"$stats":case"$request":n._loadRepresentation(o,e,t).then(function(){i()}).fail(function(e){s(e)});break;case"$dashboard":n._loadDashboard(o);break;case"$application":n._loadApplication(o);break;case"$external":n._loadExternal(o);break;case"$gadgetMissing":n._displayError("Referenced gadget does not exist: "+o.data("$uuid"));break;default:n._displayError("Unsupported gadget type: "+o.data("$type"))}else n._displayError("Invalid gadget"+(o?" ["+o.getInvalidReason()+"]":""),o?o.getJSON():"Null gadget");i()}catch(u){s(u)}finally{return r.promise()}},_loadDashboard:function(e){this._addPicker({"data-nav":e.data("dashboardName")+"."+l.DASHBOARD_PAGE_FACET,"data-gadget-id":e.data("$uuid"),title:e.data("$title")})},_loadApplication:function(e){this._addPicker({"data-nav":e.data("applicationName")+".$application","data-application-name":e.data("applicationName"),title:e.data("$title")})},_loadExternal:function(e){var t=this,n=e.data("externalUrl");t._addPicker({href:n,title:e.data("$title")});if(t.displayStyle!=="$link"){var r=d("iframe",{url:n});$(r).appendTo(t.$$elmt)}},_addPicker:function(e){e.href||(e.href="#"),$(d("linkPage",e)).appendTo(this.$$elmt)},onLayoutChange:function(){this._currentPage&&this._currentPage.rootLayout&&this._currentPage.rootLayout.onLayoutChange&&this._currentPage.rootLayout.onLayoutChange()},waitStart:function(){o.waitPluginEnable(this._$$wait),this._$$waitBckg.show()},waitStop:function(){o.waitPluginDisable(this._$$wait),this._$$waitBckg.hide()},refreshNavBtns:function(){var e=this;e.$$icnBack||($(d("navgigBtns",{})).prependTo(e.$$footer),e.$$icnBack=e.$$footer.find("[data-action=vignetteBack]"),e.$$icnHome=e.$$footer.find("[data-action=vignetteHome]"));var t=e._stateStack.length;e.$$icnBack.toggle(t>1),e.$$icnHome.toggle(t>2);var n=e._stateStack.length>1;e.$$footer.toggle(n),e.$$elmt.toggleClass("footer",n)},_actVignetteHome:function(){var e=this;if(e._stateStack.length==0)return;var t=e._stateStack[0];e._stateStack=[],e._loadPage(t,null,!0)},_actVignetteBack:function(){var e=this;if(e._stateStack.length<=1)return;e._stateStack.pop(),e._loadPage(e._stateStack[e._stateStack.length-1],null,!0)},_actVignetteError:function(){var e=this;f.error("Vignette load error",e._error)}});t.Klass=v}),define("syracuse-tablet/html/js/controls/page/ctrlPageHeader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/controls/structElmt","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/controls/structElmt").Klass,o=e("syracuse-tablet/html/js/helpers/globals"),u=e("syracuse-tablet/html/js/ui/fontUtils"),a=e("syracuse-tablet/html/js/helpers/logger").getLogger("pageHeader"),f={main:'		<div id="{{ctrlId}} class="s-m-control"> 			<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">				<div class="container-fluid">					<div class="navbar-header">						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#header-collapse-{{ctrlId}}">					        <span class="icon-bar"></span>					        <span class="icon-bar"></span>					        <span class="icon-bar"></span>						</button>						<a href="#" data-action="gotoWelcomeApplication" class="navbar-brand">							<span class="'+u.pageIcon("home")+'" />							{{title}}						</a>					</div>					<div class="collapse navbar-collapse" id="header-collapse-{{ctrlId}}">						<ul class="nav navbar-nav">							<li></li>						</ul>						<ul class="nav navbar-nav navbar-right">							{{#if showAuthoring}} 							<li> 								<a href="#" data-action="designPage">									<span class="'+u.pageIcon("designPage")+'" />								</a>							</li> 							{{/if}} 							<li>								<a href="#" data-action="clearCache">									<span class="'+u.pageIcon("clearCache")+'" />								</a>							</li>							<li>								<a href="#" data-action="switchContext"> 									<span class="'+u.pageIcon("switchContext")+'" /> {{user}}								</a>							</li>						</ul>						<form style="display:none" class="navbar-form navbar-right" role="search">							<div class="form-group input-group-sm"">								<input type="text" class="form-control" placeholder="Search">							</div>							<button type="submit" class="btn btn-success">								<span class="'+u.pageIcon("search")+'"></span>							</button>						</form>					</div>				</div>			</nav> 		</div>'},l=function(e,t){var n=e+"compiled",r=f[n];return r||(r=f[n]=Handlebars.compile(f[e])),r(t)},c=r.defineClass(function(e,t){var n=this;s.call(n,e,t)},s,{destroy:function(){var e=this;s.prototype.destroy.call(e)},buildHtml:function(e,t,n){var s=this,u=o.getUserProfile(),f=u&&u.user&&(u.user.firstName?u.user.firstName+" ":"")+u.user.lastName||"unknown",c={title:"Sage ERP X3 - Mobile",user:f,ctrlId:s.id,showAuthoring:(s.controller&&s.controller.state&&s.controller.state.disableAuthoring)!==!0};s.setRootElement(l("main",c),e);var h=s.controller.prototype.data("$links");if(h&&Object.keys(h).length>0){var p=[];$.each(h,function(e,n){try{var o=i.getLinkInfo(n.$url,t);p.push({"data-nav":o.page,"data-sdata-url":o.sDataUrl,title:r.parseExpression(n.$title,null,s.controller.prototype)||s.getLinkTitle(e)})}catch(u){n=n||{},a&&a("invalid link"+(n.$title||"no title")+"\n	"+(n.$url||"no url"))}})}},getLinkTitle:function(e){switch(e){case"$edit":return"Edit";case"$query":return"List";case"$save":return"Save";case"$details":return"Detail";default:throw new Error("Facet "+e+" not implemented yet")}}});t.Klass=c}),define("syracuse-tablet/html/js/controls/page/actionManager",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/ui/modal"),o=e("syracuse-tablet/html/js/helpers/globals"),u=e("syracuse-tablet/html/js/sdata/sdataDispatcher"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),a=e("syracuse-tablet/html/js/ui/fontUtils"),f=e("syracuse-tablet/html/js/helpers/notifications"),l=function(e,t,n){t===null&&(t="");if(r.isError(t))t=t.message;else if(typeof t!="string"){var o=i.scanDiagnoses(t);if(o.length>0){var u=[];o.forEach(function(e){u.push(e.$message)}),t=u.join("\n")}else t=JSON.stringify(t,null,2)}s.info(e,t,n)},c=r.defineClass(function(e){var t=this;t.options=e||{},t.options.$links=t.options.$links||[],t.options.$links.forEach(function(e,t){e.css=[],e.$isHidden===!0&&e.css.push("hidden"),e.$isDisabled===!0&&e.css.push("disabled"),e.css=e.css.join(" "),e.icon||(e.icon=a.getIconByIdx(20+t)),e.$uuid||(e.$uuid=r.UUID())})},null,{destroy:function(){var e=this;e.options=null},getLinks:function(){return this.options.$links},triggerLink:function(e,t){var n=$.Deferred();try{var r=this,i=null;if(r.getLinks().some(function(t){if(t.$uuid===e)return i=t,!0})){console.log(JSON.stringify(i,null,2));if(i.$confirm)s.simpleConfirm(i.$confirm,function(e){e&&r._doLinkAction(i,t).then(function(e){n.resolve(e)}).fail(function(e){n.reject(e)})});else if(i.sdataurl&&(i.$isAction===!0||i.sdataurl.indexOf("$services")>0))r._doLinkAction(i,t).then(function(e){n.resolve(e)}).fail(function(e){n.reject(e)});else if(i.page){var u={"sdata-url":i.sdataurl,"sdata-method":i.$method};r.options.noRedirection===!0?n.resolve({gotoPage:{name:i.page,options:u}}):o.getApplication().changePage(i.page,u)}else l("Unexpected link type",i,function(){n.resolve()})}}catch(a){n.reject(a)}finally{return n.promise()}},_doLinkAction:function(e,t){var n=this,i=$.Deferred();try{var s=t?t.getDao().getActionPayload(e):null;u.dispatch({$url:e.sdataurl,$method:e.$method||"GET"},s).then(function(t){n._notify(i,!0,e,t,n.options)}).fail(function(t){!r.isError(t)&&$.isPlainObject(t)?n._notify(i,!1,e,t,n.options):l("Action '"+e.title+"' failed",t,function(){i.reject(t)})})}catch(o){l("Action '"+e.title+"' javascript exception",o,function(){i.reject(o)})}finally{return i.promise()}},_notify:function(e,t,n,r){f.publish("sm.action.link",t,n,r),e.resolve(r)}});t.Klass=c}),define("syracuse-tablet/html/js/controls/page/ctrlPageFooter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/controls/structElmt","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/controls/page/actionManager","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/controls/structElmt").Klass,o=e("syracuse-tablet/html/js/ui/modal"),u=e("syracuse-tablet/html/js/helpers/globals"),a=e("syracuse-tablet/html/js/sdata/sdataDispatcher"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),f=e("syracuse-tablet/html/js/controls/page/actionManager").Klass,l=e("syracuse-tablet/html/js/ui/fontUtils"),c={leftpanel:'		<li style="display:none">			<a href="#" data-action="sidePanel" data-params="toggle,left">				<span class="'+l.pageIcon("sidePanel")+'"/>			</a>		</li>',rightpanel:'		<li style="display:none">			<a href="#" data-action="sidePanel" data-params="toggle,right">				<span class="'+l.pageIcon("sidePanel")+'"/>			</a>		</li>',lefthome:'		<li style="display:none">			<a href="#" data-nav="home">				<span class="'+l.pageIcon("home")+'"/>			</a>		</li>',main:'		<div id="{{ctrlId}} class="s-m-control"> 			<nav class="navbar navbar-inverse navbar-fixed-bottom" role="navigation">				<div class="container-fluid">					<ul class="nav navbar-nav navbar-left">					</ul>					<ul class="nav navbar-nav navbar-right">						{{#each links}}							<li>								<a href="#" class="{{css}}" data-action="footerLink" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">									<i style="font-size: large" class="{{icon}}"/>									<span>{{title}}</span>								</a>							</li>						{{/each}}					</ul>				</div>			</nav> 		</div>'},h=function(e,t){var n=e+"compiled",r=c[n];return r||(r=c[n]=Handlebars.compile(c[e])),r||alert("footer template "+e+" not found"),r(t)},p=r.defineClass(function(e,t,n){var r=this;s.call(r,e,t,n)},s,{destroy:function(){var e=this;e.actionManager&&e.actionManager.destroy(),e.actionManager=null,s.prototype.destroy.call(e)},buildHtml:function(e,t,n){var r=this;r.actionManager=new f({$links:r.controller.prototype.getLinks(t,"visible"),noMessage:!1}),r.setRootElement(h("main",{ctrlId:r.id,links:r.actionManager.getLinks()}),e)},enablePanel:function(e,t){var n=this;if(!n.$$elmt||t==null||t.length==0)return;e=e.indexOf("left")>=0?"left":"right",t=e+t,$(h(t)).appendTo(n.$$elmt.find(".navbar-"+e)).show()},_actFooterLink:function(e){var t=this;t.actionManager.triggerLink(e,t).then(function(){}).fail(function(e){r.isError(e)&&r.modalError("Footer action error",e)})}});t.Klass=p}),define("syracuse-tablet/html/js/controls/page/ctrlSidePanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/structElmt","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/structElmt").Klass,s=e("syracuse-tablet/html/js/application/eventListener"),o=e("syracuse-tablet/html/js/helpers/notifications"),u={main:'			<div id="{{ctrlId}}" class="s-m-control" style="display:none"> 				<nav class="navbar s-m-side-panel {{side}} navbar-inverse" role="navigation">					<div class="container-fluid">						<div class="navbar-header">							<span class="navbar-brand" href="#"><span>{{title}}</span></a>						</div>					</div>					<ul class="nav navbar-nav">						{{{actionsHtml}}}					</ul>					<div class="s-m-side-panel-options">						<a href="#" data-action="resize" data-control-id="{{ctrlId}}"><i class="fa fa-2x fa-bars"></i></a>					</div>				</nav>			</div>'},a=r.defineClass(function(e,t,n,r){var s=this;if(["left","right"].indexOf(n)<0)throw new Error("side panel - Unexpected side");s.side=n,i.call(s,e,t,r)},i,{buildHtml:function(e,t){var n=this;t.ctrlId=n.id,t.side=n.side;var r=Handlebars.compile(u.main);n.setRootElement(r(t),e),n.$$panel=n.$$elmt.find(".s-m-side-panel")},_actResize:function(){var e=this;e.$$panel.toggleClass("closed"),s.triggerAction(e.$$elmt,"sidePanel","resize,"+e.side)},publishReady:function(e){o.publish("sm.side.panel.ready",this.$type,e)},toggle:function(e,t){var n=this,r=n.$$elmt;if(!r||!n.$$panel)return;var i=n.$$panel.width();if(e==="toggle"||e==="close")r.toggle(e==="close"?!1:undefined),r.is(":visible")||(i=0);t&&t(i)}});t.Klass=a}),define("syracuse-tablet/html/js/controls/page/regularActionPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/ctrlSidePanel","syracuse-tablet/html/js/controls/page/actionManager"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/ctrlSidePanel").Klass,s=e("syracuse-tablet/html/js/controls/page/actionManager").Klass,o={actionLink:'		{{#each links}}			<li>				<a href="#" class="{{css}}" data-action="actionLink" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">					<i style="font-size: large" class="{{icon}}"/>					<span>{{title}}</span>				</a>			</li>		{{/each}}'},u=function(e,t){var n=e+"compiled",r=o[n];return r||(r=o[n]=Handlebars.compile(o[e])),r(t)},a=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,"right",n)},i,{buildHtml:function(e,t,n){var r=this;r.actionManager=new s({$links:r.controller.prototype.getLinks(r.getDao(),"hidden"),noMessage:!1});var o={title:"Actions",actionsHtml:u("actionLink",{ctrlId:r.id,links:r.actionManager.getLinks()})};i.prototype.buildHtml.call(r,e,o)},afterRender:function(){var e=this;e.actionManager.getLinks().length>0&&e.publishReady("panel")},_actActionLink:function(e){var t=this;t.actionManager.triggerLink(e).then(function(){}).fail(function(){})}});t.Klass=a}),define("syracuse-tablet/html/js/controls/page/dashboardActionPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/ctrlSidePanel"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/ctrlSidePanel").Klass,s='    <li class="active"><a href="#"><i class="fa fa-1x fa-home"></i> <span>RIGHT DASHBOARD</span></a></li>',o=r.defineClass(function(e,t){var n=this;i.call(n,e,t,"right","actions")},i,{buildHtml:function(e,t,n){var r=this,o={title:"Actions",actionsHtml:s};i.prototype.buildHtml.call(r,e,o)}});t.Klass=o}),define("syracuse-tablet/html/js/controls/page/navigationPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/ctrlSidePanel","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/ctrlSidePanel").Klass,s=e("syracuse-tablet/html/js/application/settings"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=e("syracuse-tablet/html/js/ui/uiUtils"),a=e("syracuse-tablet/html/js/helpers/globals"),f=e("syracuse-tablet/html/js/ui/fontUtils"),l={navigLink:'<li class=""><a href="#" data-action="switchApp" data-params="{{appName}}" data-control-id="{{ctrlId}}"><i class="{{icon}}"></i>&nbsp;<span>{{title}}</span></a></li>'},c=function(e,t){var n=e+"compiled",r=l[n];return r||(r=l[n]=Handlebars.compile(l[e])),r(t)},h=function(e){r.modalError("Error loading applications",e)},p=r.defineClass(function(e,t,n){var r=this;r._$$wait=null,i.call(r,e,t,"left",n),r.appCount=0},i,{destroy:function(){var e=this;i.prototype.destroy.call(e),u.waitPluginDestroy(e._$$wait),e._$$wait=null,e.apps=null},buildHtml:function(e,t,n){var r=this,s=a.getApplication(),o;try{r.apps=a.getValidApplications();var u=[];Object.keys(r.apps).forEach(function(e,t){var n=r.apps[e];s.uuid!=n.$uuid?(u.push(c("navigLink",{title:n.title||n.description||n.applicationName,icon:n.iconName&&f.getIconByName(n.iconName)||f.getIconByName("briefcase"),appName:n.applicationName,ctrlId:r.id})),r.appCount++):o=n.title||n.applicationName});var l={title:o||"Navigation",actionsHtml:u.join("")};i.prototype.buildHtml.call(r,e,l)}catch(p){h(p)}},afterRender:function(){var e=this,t=!1,n=!1;e.publishReady(t?"":n?"reload":e.appCount?"panel":"home")},_actSwitchApp:function(e){var t=this;o.publish("sm.switch.app",e)}});t.Klass=p}),define("syracuse-tablet/html/js/controls/ctrlTypeUnknown",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n)},i,{buildHtml:function(e,t,n){var r=this;r.createRootElement(["s-m-control s-m-field s-m-unknown"],e).text("Unknown type: "+r.$type)}});t.Klass=s}),define("syracuse-tablet/html/js/controls/chart/ctrlCubeChartTheme",["require","exports","module"],function(e,t,n){var r={colors:["#BF7070","#BFB730","#7ABF30","#7373FF","#BF7730","#BF3080","#30BF9F","#FF7373","#FFF773","#85FF00","#3030BF","#FF9F40","#FF40BC","#1699A6","#FF0000","#FFF100","#00FF00","#0000FF","#FF7F00","#FF00A6","#00FFC6","#A60000","#A69C00","#56A600","#90B2FF","#A65200","#A6006C","#00A681","#FF4040","#FFF440","#A3FF40","#3673FF","#FFB873","#FF76CE","#73FFED"],chart:{borderRadius:"0",spacingTop:10,backgroundColor:"#fff",borderColor:"#ccc",borderWidth:1,className:"dark-container",resetZoomButton:{theme:{fill:"white",stroke:"#dddddd",r:0,states:{hover:{fill:"#00a1de",style:{color:"white"}}}},position:{x:-50,y:5},relativeTo:"chart"}},title:{style:{color:"#464646",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},subtitle:{style:{color:"#464646",font:'bold 12px "Trebuchet MS", Verdana, sans-serif'}},xAxis:{gridLineColor:"rgba(0, 0, 0, 0.05)",gridLineDashStyle:"longdash",gridLineWidth:1,labels:{style:{color:"#A0A0A0"}},lineColor:"rgba(0, 0, 0, 0.2)",tickColor:"rgba(0, 0, 0, 0.2)",title:{style:{color:"#464646",fontWeight:"normal",fontSize:"20px",fontFamily:"arial"}}},yAxis:{minorGridLineColor:"rgba(0, 0, 0, 0.05)",minorTickInterval:"auto",gridLineWidth:2,gridLineColor:"rgba(0, 0, 0, 0.07)",labels:{align:"left",x:0,y:12,style:{color:"#A0A0A0"}},lineColor:"rgba(0, 0, 0, 0.07)",title:{style:{color:"#CCC",fontSize:"16px",fontFamily:"Georgia, Verdana, sans-serif",fontStyle:"italic"}}},tooltip:{backgroundColor:"#464646",borderRadius:"0",style:{color:"#fff",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"silver"}},plotOptions:{series:{marker:{lineWidth:2,lineColor:null,radius:4,states:{hover:{radius:8,lineColor:null}}}},area:{fillOpacity:.15},areaspline:{fillOpacity:.15},line:{dataLabels:{color:"#CCC"},marker:{lineColor:"#FFFFFF"}},spline:{marker:{lineColor:"#FFFFFF"}},scatter:{marker:{lineColor:"#FFFFFF"}},candlestick:{lineColor:"#FFFFFF",animation:{duration:2e3,easing:"easeOutBounce"}},pie:{allowPointSelect:!0,cursor:"pointer",borderColor:"rgba(250,250,250,0.3)",borderWidth:.5,dataLabels:{enabled:!0,connectorWidth:2,color:"#464646",style:{fontWeight:"bold"}}}},legend:{borderRadius:0,borderWidth:1,backgroundColor:"white",itemMarginTop:8,itemStyle:{color:"#464646",fontFamily:'"arial"',fontWeight:"bold",fontSize:"8pt "},itemHoverStyle:{color:"#00a1de"},itemHiddenStyle:{color:"#555"},title:{style:{color:"#464646",fontWeight:"bold",fontSize:"8pt",fontFamily:"arial"}}},credits:{enabled:!1,style:{color:"#666"}},labels:{style:{color:"#CCC"}},exporting:{buttons:{drillUp:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"},exportButton:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"},printButton:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"}}},rangeSelector:{buttonTheme:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},stroke:"#000000",style:{color:"#CCC",fontWeight:"bold"},states:{hover:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#BBB"],[.6,"#888"]]},stroke:"#000000",style:{color:"white"}},select:{fill:{linearGradient:[0,0,0,20],stops:[[.1,"#000"],[.3,"#333"]]},stroke:"#000000",style:{color:"yellow"}}}},inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(16, 16, 16, 0.5)",series:{color:"#7798BF",lineColor:"#A6C7ED"}},scrollbar:{barBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},barBorderColor:"#CCC",buttonArrowColor:"#CCC",buttonBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},buttonBorderColor:"#CCC",rifleColor:"#FFF",trackBackgroundColor:{linearGradient:[0,0,0,10],stops:[[0,"#000"],[1,"#333"]]},trackBorderColor:"#666"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",legendBackgroundColorSolid:"rgb(35, 35, 70)",dataLabelsColor:"#444",textColor:"#C0C0C0",maskColor:"rgba(255,255,255,0.3)"},i=r.colors;r.orgChart={node:{textColor:"black ",borderColor:i[1],borderWidth:2,backgroundColor:"white ",fontWeight:"normal ",hover:{backgroundColor:i[3],textColor:"white "}},junction:{lineColor:i[3],lineWidth:2},dropMarker:{borderColor:i[1],borderWidth:0,backgroundColor:i[4],backgroundOpacity:1},tooltip:{backgroundColor:i[1],backgroundOpacity:1,borderWidth:2,borderRadius:0,borderColor:i[2],style:{color:"#fff",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}}},r.version=Highcharts.version.split(".").map(function(e){return parseInt(e,10)}),r.version[0]!==2&&r.version[0]===3&&(r.navigation={buttonOptions:{symbolStroke:"#DDDDDD",hoverSymbolStroke:"#FFFFFF",theme:{fill:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#606060"],[.6,"#333333"]]},stroke:"#000000"}}},delete r.exporting),t.theme=r}),define("syracuse-ui/themes/desktop/sage/highcharts/theme",["require","exports","module"],function(e,t,n){var r={colors:["#BF7070","#BFB730","#7ABF30","#7373FF","#BF7730","#BF3080","#30BF9F","#FF7373","#FFF773","#85FF00","#3030BF","#FF9F40","#FF40BC","#1699A6","#FF0000","#FFF100","#00FF00","#0000FF","#FF7F00","#FF00A6","#00FFC6","#A60000","#A69C00","#56A600","#90B2FF","#A65200","#A6006C","#00A681","#FF4040","#FFF440","#A3FF40","#3673FF","#FFB873","#FF76CE","#73FFED"],chart:{borderRadius:"0",spacingTop:10,backgroundColor:"#fff",borderColor:"#ccc",borderWidth:1,className:"dark-container",resetZoomButton:{theme:{fill:"white",stroke:"#dddddd",r:0,states:{hover:{fill:"#00a1de",style:{color:"white"}}}},position:{x:-50,y:5},relativeTo:"chart"}},title:{style:{color:"#464646",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},subtitle:{style:{color:"#464646",font:'bold 12px "Trebuchet MS", Verdana, sans-serif'}},xAxis:{gridLineColor:"rgba(0, 0, 0, 0.05)",gridLineDashStyle:"longdash",gridLineWidth:1,labels:{style:{color:"#A0A0A0"}},lineColor:"rgba(0, 0, 0, 0.2)",tickColor:"rgba(0, 0, 0, 0.2)",title:{style:{color:"#464646",fontWeight:"normal",fontSize:"20px",fontFamily:"arial"}}},yAxis:{minorGridLineColor:"rgba(0, 0, 0, 0.05)",minorTickInterval:"auto",gridLineWidth:2,gridLineColor:"rgba(0, 0, 0, 0.07)",labels:{align:"left",x:0,y:12,style:{color:"#A0A0A0"}},lineColor:"rgba(0, 0, 0, 0.07)",title:{style:{color:"#CCC",fontSize:"16px",fontFamily:"Georgia, Verdana, sans-serif",fontStyle:"italic"}}},tooltip:{backgroundColor:"#464646",borderRadius:"0",style:{color:"#fff",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"silver"}},plotOptions:{series:{marker:{lineWidth:2,lineColor:null,radius:4,states:{hover:{radius:8,lineColor:null}}}},area:{fillOpacity:.15},areaspline:{fillOpacity:.15},line:{dataLabels:{color:"#CCC"},marker:{lineColor:"#FFFFFF"}},spline:{marker:{lineColor:"#FFFFFF"}},scatter:{marker:{lineColor:"#FFFFFF"}},candlestick:{lineColor:"#FFFFFF",animation:{duration:2e3,easing:"easeOutBounce"}},pie:{allowPointSelect:!0,cursor:"pointer",borderColor:"rgba(250,250,250,0.3)",borderWidth:.5,dataLabels:{enabled:!0,connectorWidth:2,color:"#464646",style:{fontWeight:"bold"}}}},legend:{borderRadius:0,borderWidth:1,backgroundColor:"white",itemMarginTop:8,itemStyle:{color:"#464646",fontFamily:'"arial"',fontWeight:"bold",fontSize:"8pt "},itemHoverStyle:{color:"#00a1de"},itemHiddenStyle:{color:"#555"},title:{style:{color:"#464646",fontWeight:"bold",fontSize:"8pt",fontFamily:"arial"}}},credits:{enabled:!1,style:{color:"#666"}},labels:{style:{color:"#CCC"}},exporting:{buttons:{drillUp:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"},exportButton:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"},printButton:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"}}},rangeSelector:{buttonTheme:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},stroke:"#000000",style:{color:"#CCC",fontWeight:"bold"},states:{hover:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#BBB"],[.6,"#888"]]},stroke:"#000000",style:{color:"white"}},select:{fill:{linearGradient:[0,0,0,20],stops:[[.1,"#000"],[.3,"#333"]]},stroke:"#000000",style:{color:"yellow"}}}},inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(16, 16, 16, 0.5)",series:{color:"#7798BF",lineColor:"#A6C7ED"}},scrollbar:{barBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},barBorderColor:"#CCC",buttonArrowColor:"#CCC",buttonBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},buttonBorderColor:"#CCC",rifleColor:"#FFF",trackBackgroundColor:{linearGradient:[0,0,0,10],stops:[[0,"#000"],[1,"#333"]]},trackBorderColor:"#666"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",legendBackgroundColorSolid:"rgb(35, 35, 70)",dataLabelsColor:"#444",textColor:"#C0C0C0",maskColor:"rgba(255,255,255,0.3)"},i=r.colors;r.orgChart={node:{textColor:"black ",borderColor:i[1],borderWidth:2,backgroundColor:"white ",fontWeight:"normal ",hover:{backgroundColor:i[3],textColor:"white "}},junction:{lineColor:i[3],lineWidth:2},dropMarker:{borderColor:i[1],borderWidth:0,backgroundColor:i[4],backgroundOpacity:1},tooltip:{backgroundColor:i[1],backgroundOpacity:1,borderWidth:2,borderRadius:0,borderColor:i[2],style:{color:"#fff",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}}},r.version=Highcharts.version.split(".").map(function(e){return parseInt(e,10)}),r.version[0]!==2&&r.version[0]===3&&(r.navigation={buttonOptions:{symbolStroke:"#DDDDDD",hoverSymbolStroke:"#FFFFFF",theme:{fill:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#606060"],[.6,"#333333"]]},stroke:"#000000"}}},delete r.exporting),t.theme=r}),define("syracuse-tablet/html/js/controls/chart/ctrlCubeChartBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/controls/chart/ctrlCubeChartTheme","syracuse-tablet/html/js/helpers/locale","syracuse-ui/themes/desktop/sage/highcharts/theme"],function(e,t,n){function h(e,t){return!!(e&&e.$hierarchies&&t.$axes&&t.$axes.length>0&&t.$axes[0].$hierarchies&&t.$axes[0].$hierarchies.length>0)}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=e("syracuse-tablet/html/js/helpers/formatApi"),o=e("syracuse-tablet/html/js/controls/chart/ctrlCubeChartTheme").theme,u=e("syracuse-tablet/html/js/helpers/locale"),a=Highcharts.merge,f=function(e){return $.extend({},e)};Highcharts.theme=e("syracuse-ui/themes/desktop/sage/highcharts/theme").theme,Highcharts.setOptions(Highcharts.theme);var l=Highcharts.theme.colors,c=function(e){var t={xy:"line",point:"scatter",stick:"column",radar:"spiderweb"};return e&&(t[e]||e)},p=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r.itemProto=n.getPrototype("$item")},i,{_mergeMetaData:function(e){var t={};return e&&e.$cube&&(t.$cube=e.$cube),e&&e.$axes&&(t.$axes=e.$axes),e&&e.$style&&(t.$style=e.$style),e&&e.$color&&(t.$color=e.$color),e&&e.$isLegendHidden&&(t.$isLegendHidden=e.$isLegendHidden),e&&e.$isXLabelHidden&&(t.$isXLabelHidden=e.$isXLabelHidden),e&&e.$isYLabelHidden&&(t.$isYLabelHidden=e.$isYLabelHidden),e&&e.$isXLabelsHidden&&(t.$isXLabelsHidden=e.$isXLabelsHidden),e&&e.$isYLabelsHidden&&(t.$isYLabelsHidden=e.$isYLabelsHidden),this.currentMetaData=a(this.currentMetaData||{},t),e&&e.$item&&e.$item.$properties&&this.currentMetaData&&this.currentMetaData.$cube&&this.currentMetaData.$cube.$measures&&$.smForEachKey(this.currentMetaData.$cube.$measures,function(t,n){e.$item.$properties[t]&&e.$item.$properties[t].$title?n.$title=e.$item.$properties[t].$title:n.$title=t}),this.currentMetaData},_settingsFromValue:function(){var e=this,t=this.currentMetaData.$cube,n=0,r;return t.$style==="spiderweb"?(r={},r.categories=Object.keys(e._meta.series).map(function(t){return e._meta.series[t].options.name}),r.series={},e.dataset&&e.dataset.reduce(function(t,r){var i={name:e._getMeasureLabel(r,e._meta.xAxis[0].code),color:l[n++],data:[],pointPlacement:"on"};return i.name&&(i.id="#s-"+i.name,$.smForEachKey(e._meta.series,function(t,n){n.isHidden||e._pushData(i,t,t,r)}),t.series[i.name]=i),t},r)):(r={categories:[],series:{}},e.dataset&&e.dataset.reduce(function(t,n){var r=e._getMeasureLabel(n,e._meta.xAxis[0].code);return r!=null&&(t.categories.push(r),$.smForEachKey(e._meta.series,function(i,s){var o=t.series[i];o||(o=f(s.options),o.data=[],t.series[i]=o),e._pushData(o,r,i,n)})),t},r)),r},_pushData:function(e,t,n,r){var i=parseFloat(r.$rawV&&r.$rawV[n]&&r.$rawV[n].v||r[n])||0;this.useLogarithmicAxis&&(this.maxValue=Math.max(this.maxValue||-Infinity,i),this.minValue=Math.min(this.maxValue||Infinity,i)),e.data.push([t,i])},_createChart:function(e){var t=this,n=a(t._getPref(),t._getOptions(t.$prototype));e?(n.xAxis[0].categories=e.categories,$.smForEachKey(e.series,function(e,r){var i=f(r),s=t._meta.series[e];n.chart.polar&&i&&i.type&&delete i.type,(!s||!s.isHidden)&&n.series.push(i)})):$.smForEachKey(t._meta.series,function(e,t){var r=f(t.options);n.chart.polar&&r&&r.type&&delete r.type,r.data=[0],t.isHidden||n.series.push(r)}),(!t.$prototype.$cube||t.$prototype.$cube.$style!="spiderweb")&&n.series.reverse(),this.useLogarithmicAxis&&(this.maxValue||0)/(this.minValue||1)>10&&(n.yAxis.type="logarithmic"),t._chart=new Highcharts.Chart(n);var r=this._chart.legend;t.displayLegend=r&&r.display;var i=t._chart.series,s,o;for(var u=i.length-1;u>=0;u--)s=i[u],o=s&&s.options.id&&t._meta.series[s.options.id.slice(3)],o&&o.measure&&(o.measure.$color=o.options.color=s.color)},_getOptions:function(e){var t=this,n=this.currentMetaData.$cube,r=Highcharts.getOptions(),i=r.exporting.buttons,s=this._getFieldEvalTitle(),o=e.$axes&&e.$axes[0]||{},u=o.$hierarchies&&s[o.$hierarchies[0][0]]||o.$title,a,f={chart:{renderTo:this.chartSlot,zoomType:"x",ignoreHiddenSeries:!1,width:50,height:50},lang:{showHideLegend:t._localize.highCharts_showHideLegend},legend:{layout:"vertical",align:"right",verticalAlign:"top",y:60,x:-10,title:{text:":::: "+t._localize.highCharts_seriesTitle},floating:!0,draggable:!0,zIndex:20,enabled:this.currentMetaData.$isLegendHidden!==!0},title:{text:n&&t._localizedText(n.$title)||"",margin:5},xAxis:[{categories:[],title:{text:t._localizedText(u),enabled:this.currentMetaData.$isXLabelHidden!==!0},labels:{rotation:-45,align:"right",enabled:this.currentMetaData.$isXLabelsHidden!==!0}}],yAxis:[{title:{text:"",enabled:this.currentMetaData.$isYLabelHidden!==!0},labels:{align:"right",enabled:this.currentMetaData.$isYLabelsHidden!==!0}}],plotOptions:{series:{cursor:"pointer",events:{},point:{events:{click:function(e){}}},stacking:t._meta.stacking,animation:!1}},tooltip:{formatter:function(){var e=t._meta.series,n=this.key&&e[this.key]||e[this.series.options.id.slice(3)],r=n&&n.measure,i=this.series.processedYData,s=this.y;r&&t._ensureFormatter(r);var o=this.series.name||r&&r.$title,u=r&&r.formatter;o=(o?o+"<br>":"")+(this.x||this.key)+": <b> "+(u?u.format(s):s)+"</b>";if(r&&r.$isNormalized&&i.length>0){var a=i.reduce(function(e,t){return e+t});o+=" ("+(u?u.formatValue(s/a*100):s/a*100)+"%)"}return o}},series:[]};if(Highcharts.theme.version[0]===3){f.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{symbol:"menu",enabled:!1,_titleKey:"contextButtonTitle",menuItems:[{textKey:"showHideLegend",onclick:function(){setTimeout(function(){t._toggleLegendDisplay()},100)}}]},legendButton:{enabled:!1,textKey:"showHideLegend",symbol:"menu",onclick:function(){setTimeout(function(){t._toggleLegendDisplay()},100)}}}};var l=f.exporting.buttons.contextButton.menuItems||[];this._printSupported()&&l.push({text:"Print chart",onclick:function(){this.print(t)}}),this._exportSupported()&&(l.push({separator:!0}),l.push({textKey:"downloadPNG",onclick:function(){this.exportChart()}}),l.push({textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}}),l.push({textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}}),l.push({textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}))}return f.xAxis[0].title.text!==f.title.text&&(f.xAxis[0].title.text=f.xAxis[0].title.text?f.xAxis[0].title.text:f.title.text),f.chart.type=t._meta.defaultStyle,f},_initializeMeta:function(){this._mergeMetaData(this.$prototype),this._mergeMetaData(this.article);var e=this.$prototype,t=this.currentMetaData;this._meta={xAxis:[{}],series:{},displaysOneMeasure:t&&t.$displaysOneMeasure,hasMeasureSelector:t&&t.$hasMeasureSelector,hasStyleSelector:t&&t.$hasStyleSelector,defaultStyle:c(t.$style)||"column",drill:{minLevel:1,maxLevel:0,currLevel:1,currAxisHier:0,levelsProperties:[],members:[],stack:[{$axes:e.$axes,$item:e.$item,$slicer:e.$slicer}]}},this.__processMeta(e,!0)},_exportSupported:function(){return!0},_printSupported:function(){return!0},__processMeta:function(e,t){this._processMeasures(e,t),this._processAxes(e,t)},_processMeasures:function(e,t){this._mergeMetaData(e);var n=this,r=this.$prototype.$properties,i=this._getRestraintMeasures(),s=0;i&&$.smForEachKey(i,function(i,o){var u=o.$property||i,f=a(r[u],o);e&&e.$item&&e.$item.$properties&&(f=a(f,e.$item.$properties[u]));if(!f.$title||f.$title==="")f.$title=i;var h=n._meta.series[u];t&&(n._ensureFormatter(f),h=n._meta.series[u]={options:{id:"#s-"+u,name:n._localizedText(f.$title)||String.fromCharCode(160)},measure:f}),h&&(h.isHidden=f.$title==="",h.options.type=c(f.$style),h.options.color=f.$color||l[s++],h.options.name=n._localizedText(f.$title)||String.fromCharCode(160),h.options.visible=f.$title!==""&&(!n._meta.displaysOneMeasure||!!f.$isDefault));if(f.$isStacked||f.$stackingGroup)h.options.stack=f.$stackingGroup||0,n._meta.stacking=f.$isNormalized?"percent":n._meta.stacking||"normal"})},_getRestraintMeasures:function(){var e=this.currentMetaData,t=e.$cube,n=t&&t.$measures,r=n;return n&&e.$axes&&e.$axes.length>1&&e.$axes[1].$members&&e.$axes[1].$members[0][0].length>0&&(r={},$.smForEach(e.$axes[1].$members[0][0],function(e){r[e]=n[e]})),r},_processAxes:function(e,t){var n=this.$prototype.$cube;if(!h(n,e))return!1;var r=this,i=0,s=e.$axes&&e.$axes[0],o=null;if(s){$.smForEachKey(s.$hierarchies,function(e,t){!o&&t.length>1&&t[1]==1&&(o=n.$hierarchies[t[0]].$properties,o&&(r._meta.xAxis[0].code=o[t.length>2?t[2]:0],i=e))}),!o&&s.$hierarchies[0].length>0&&(o=n.$hierarchies[s.$hierarchies[0][0]].$properties,o&&o.length>0&&(r._meta.xAxis[0].code=o[0]));var u;$.smForEach(s.$hierarchies,function(e){u=n.$hierarchies[e[0]].$properties,$.smForEach(u,function(e){this.levelsProperties[this.maxLevel++]=e},r._meta.drill)}),s.$members&&$.smForEach(s.$members,function(e){$.smForEach(e,function(e){e.length>0&&(this.members[this.currLevel++ -1]=e[0])},this)},r._meta.drill)}r._meta.drill.code=e.$codeStat||"UNKNOWN",r._meta.drill.axis0FieldCode=r._meta.xAxis[0].code||"",r._meta.drill.maxLevel=Math.max(r._meta.drill.maxLevel,r._meta.drill.minLevel)},_getPref:function(){return Highcharts.getOptions()},_getMeasureLabel:function(e,t){var n=this._localizedText(e.$title);if(n)return n;var r=this,i=r.$prototype.$properties[t];if(!i)return null;switch(i.$type){case"application/x-choice":n=e[t],i.$value.$enum.some(function(e,t,r){return e.$value===n?(n=this._localizedText(e.$title),!0):!1});break;case"application/x-date":i.formatter=s.getFormatter(i.$type,u.getDateFormat(i.$type)),n=i.formatter.formatValue(e[t]);break;case"application/x-integer":case"application/x-decimal":i.formatter=s.getFormatter(i.$type,u.getNumberFormat(i.$type)),n=i.formatter.formatValue(e[t]);break;default:n=""+e[t]}return n},_toggleLegendDisplay:function(){var e=this._chart.legend;e&&this._displayLegend(!e.display)},_displayLegend:function(e){var t=this._chart.legend;if(!t)return;e?(t.group.show(),t.box.show()):(t.group.hide(),t.box.hide()),this.displayLegend=t.display=e},destroy:function(){var e=this;i.prototype.destroy.call(e),this._chart&&this._chart.destroy(),this._chart=this._localize=this._meta=this.currentMetaData=null}});t.Klass=p}),define("syracuse-tablet/html/js/controls/chart/ctrlCubeChart",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/chart/ctrlCubeChartBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/chart/ctrlCubeChartBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/helpers/formatApi"),u=e("syracuse-tablet/html/js/helpers/locale"),a=r.defineClass(function(e,t,n){var r=this;i.call(r,e,t,n),r.itemProto=n.getPrototype("$item")},i,{buildHtml:function(e,t,n){var r=this;r.createRootElement(["s-m-control","s-m-chart"],e),r.chartSlot=s.createDomElement("div",["s-m-chart-slot"],null,null,r.$$elmt),$(r.chartSlot).hide(),r._buildChart()},_buildChart:function(){var e=this;e.$prototype=e.prototype.json,e.$prototype.$properties=e.$prototype.$item.$properties,e._localize={highCharts_showHideLegend:u.text("highCharts_showHideLegend"),highCharts_seriesTitle:u.text("highCharts_seriesTitle")},e._initializeMeta(),e.dataset=e.getDao().getQueryResources();var t=e._settingsFromValue();e._createChart(t)},_ensureFormatter:function(e){e.formatApi={format:function(e,t){return e}}},_localizedText:function(e){return e},_getFieldEvalTitle:function(){return[]},destroy:function(){var e=this;i.prototype.destroy.call(e),e.dataset=null}});t.Klass=a}),define("syracuse-tablet/html/js/controls/field/ctrlBinary",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/fontUtils"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o=e("syracuse-tablet/html/js/ui/uiUtils"),u=e("syracuse-tablet/html/js/helpers/locale"),a=r.defineClass(function(e,t,n){var r=this;s.call(r,e,t,n),r.isImage=r.$type.indexOf("image")==0,r.cssType=r.isImage?"s-m-img":"s-m-binary"},s,{buildFieldValue:function(e,t){var n=this,r=n.getFormattedValue(n.getValue()),a=s.prototype.buildFieldValue.call(n,e,t),f=n.prototype.data("$url",n.dao)||"",l=r==null||r===""||f.length===0;l&&$(a).addClass("s-m-empty");if(this.$isEditMode){if(n.isImage)var c=o.createDomElement("a",["s-m-clear-binary-field ctrl-evt-click"],null,{href:"#"}),h=o.createDomElement("a",["s-m-upload-binary-field ctrl-evt-click"],u.text("image.label.addimage"),{href:"#"})}else if(l)$(a).addClass(i.binaryIcon(n.cssType,"default"));else{var p=o.createDomElement("a",["img-responsive"],null,{target:"_blank",href:f},a);n.isImage?(p=o.createDomElement("span",["img-responsive"],null,null,p),p.style.backgroundImage='url("'+f+'")'):p=o.createDomElement("span",i.binaryIcon(n.cssType,"default"),null,null,p)}},onClick:function(e){}});t.Klass=a}),define("syracuse-tablet/html/js/controls/ctrlIcon",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/fontUtils"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o=e("syracuse-tablet/html/js/ui/uiUtils"),u=r.defineClass(function(e,t,n){s.call(this,e,t,n)},s,{buildFieldValue:function(e,t){var n=this,r=$(s.prototype.buildFieldValue.call(n,e,t)),o=[],u=n.prototype.data("$url");if(u&&u.length)o.push('<a href="'+u+'">');else{var a=n.prototype.data("$action")||n.prototype.data("$navigation");if(a){o.push('<a href="*"');for(var f in a)o.push(" "+f+'="'+a[f]+'"');o.push("</a>")}}o.push('<span class="'+i.ctrlIcon(n.prototype.data("$icon"))+'"></span>'),o.length>1&&o.push("</a>"),r.html(o.join(""))}});t.Klass=u}),define("syracuse-tablet/html/js/controls/chart/chartstheme",["require","exports","module"],function(e,t,n){t.ChartsTheme={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.2/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.2/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#666",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0},area:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:0},spline:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0},areaspline:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:0},column:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0},bar:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0},scatter:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!1,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0}},pie:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!0,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom",distance:30},cropThreshold:300,pointRange:0,showInLegend:!1,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{}}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,ignoreHiddenPoint:!0,legendType:"point",size:null,slicedOffset:10,tooltip:{followPointer:!0}},arearange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},areasplinerange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},columnrange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!0,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},gauge:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!0,align:"center",x:0,y:5,style:{color:"#666",cursor:"default",fontSize:"16px",lineHeight:"24px",fontWeight:"normal"},verticalAlign:"top",borderWidth:0,borderColor:null,borderRadius:3,zIndex:2},cropThreshold:300,pointRange:0,showInLegend:!1,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,dial:{},pivot:{},tooltip:{style:{color:"#666"},headerFormat:""}},boxplot:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:-0.3,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,fillColor:"#FFFFFF",medianWidth:2,tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{series.name}</span><br/>Minimum: {point.low}<br/>Lower quartile: {point.q1}<br/>Median: {point.median}<br/>Higher quartile: {point.q3}<br/>Maximum: {point.high}<br/>'},whiskerLength:"50%",whiskerWidth:2},errorbar:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:-0.3,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,fillColor:"#FFFFFF",medianWidth:2,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerLength:"50%",whiskerWidth:null,color:"#000000",grouping:!1,linkedTo:":previous"},waterfall:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#333",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0,lineColor:"#333",dashStyle:"dot"},bubble:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:0,marker:{enabled:!0,lineWidth:1,radius:4,lineColor:null,states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"white",cursor:"default",fontSize:"11px",lineHeight:"14px",textShadow:"0px 0px 3px black"},verticalAlign:"middle",inside:!0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!1,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"({point.x}, {point.y}), Size: {point.z}",followPointer:!0},minSize:8,maxSize:"20%",zThreshold:0}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!1,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}}}),define("syracuse-tablet/html/js/controls/chart/ctrlGaugeChart",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/controls/field/ctrlFieldBase","./chartstheme"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o=e("./chartstheme").ChartsTheme,u=r.defineClass(function(e,t,n){var r=this;s.call(r,e,t,n),r.formatter=r.initFormatter(),r.cssType=null},s,{_defaultGaugeSegments:[{propStart:0,propEnd:.25,valStart:null,valEnd:null,color:"#41A940"},{propStart:.25,propEnd:.75,valStart:null,valEnd:null,color:"#FF5800"},{propStart:.75,propEnd:1,valStart:null,valEnd:null,color:"#CB3500"}],buildFieldValue:function(e,t){var n=this,r=$("<div>").addClass("s-m-gauge-container"),s=i.getNumberDecimalSeparator(),u=i.getNumberGroupSeparator();n.chartsTheme||(n.chartsTheme=o);if(!n.chartsTheme.themeWasSet||n.chartsTheme.decimalPoint!==s||n.chartsTheme.thousandsSep!==u)n.chartsTheme.decimalPoint=s,n.chartsTheme.thousandsSep=u,Highcharts.setOptions(n.chartsTheme),n.chartsTheme.themeWasSet=!0;n._renderGauge(r),e.appendChild(r[0])},buildFieldTitle:function(e,t){},_resolveExpr:function(e,t,n){return typeof e!="string"?e:e.replace(/\{(\w+)\}/g,function(e,r){return t[r]!=null?t[r]:n[r]!=null?n[r]:e})},_mergeAuthoringAndDefaults:function(){var e=this,t=e.article.$gauge;if(!t.segments)return e._defaultGaugeSegments;if(t.segments.length===0)return e._defaultGaugeSegments;var n,r,i,s=[];for(n=0;n<t.segments.length;n++)r=e._defaultGaugeSegments[Math.min(n,e._defaultGaugeSegments.length-1)],i=t.segments[n],i?((i.propStart==null||i.propEnd==null)&&(i.valStart==null||i.valEnd==null)&&(i.propStart=r.propStart,i.propEnd=r.propEnd,i.valStart=r.valStart,i.valEnd=r.valEnd),i.color==null&&(i.color=r.color),s.push(i)):s.push(r);return s},_createBands:function(e,t,n,r){var i=this,s=[];s.push({from:n,to:r,color:"#ccc",innerRadius:"79%",outerRadius:"101%"});var o=i.getValue(),u=i._mergeAuthoringAndDefaults(),a,f,l,c=r-n;for(f=0;f<u.length;f++)a=u[f],l={innerRadius:"79%",outerRadius:"101%",color:a.color},a.valStart!=null&&a.valEnd!=null?(l.from=i._resolveExpr(a.valStart,o,t),l.to=i._resolveExpr(a.valEnd,o,t)):a.propStart!=null&&a.propEnd!=null&&(l.from=n+c*i._resolveExpr(a.propStart,o,t),l.to=n+c*i._resolveExpr(a.propEnd,o,t)),s.push(l);return s},_getScale:function(){function t(e){var t=e.match(/\.(.*)/g);return t.length>=1?t.length:0}var e=this;return e.article.$scale?e.article.$scale:e.article.$format?t(e.article.$format):0},_renderGauge:function(e){var t=this,n=t.article.$gauge,r=t.$isEditMode?"#666":"#34B233",i=t.getValue(),s=0,o=100;n.$bindMin!=null&&n.$bindMax!=null&&(typeof n.$bindMin=="string"?s=t.getDao().getValue(n.$bindMin):s=n.$bindMin,typeof n.$bindMax=="string"?o=t.getDao().getValue(n.$bindMax):o=n.$bindMax);try{typeof i=="string"&&(i=parseFloat(i))}catch(u){}try{typeof s=="string"&&(s=parseFloat(s))}catch(u){}try{typeof o=="string"&&(o=parseFloat(o))}catch(u){}var a=t.prototype.json,f="";a.$unit&&a.$properties&&a.$properties[a.$unit]&&i&&i[a.$unit]&&i[a.$unit].$symbol&&(f=i[a.$unit].$symbol);var l=t.getTitle(),c=t._getScale(),h=t._createBands(e,a,s,o);e.highcharts({chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,backgroundColor:null,height:180,borderWidth:0,spacingBottom:35},title:{text:l,style:{color:r,fontWeight:"normal",textTransform:"uppercase"},verticalAlign:"bottom",y:27},pane:{startAngle:-90,endAngle:90,center:["50%","90%"],size:210,background:[{backgroundColor:"#FFF",borderWidth:0}]},yAxis:{min:s,max:o,minorTickWidth:1,minorTickInterval:"auto",minorTickLength:20,minorTickPosition:"inside",minorTickColor:"#fff",tickPixelInterval:30,tickWidth:0,tickPosition:"inside",tickLength:15,tickColor:"#FFF",labels:{step:1,rotation:"auto",style:{color:"#666",cursor:"default",fontSize:"0.9em",fontFamily:"Arial",lineHeight:"14px"},distance:10,y:0,verticalAlign:"center",align:"center"},title:{text:f,style:{color:"#666"}},plotBands:h},plotOptions:{gauge:{dataLabels:{enabled:!0,format:"{point.y:,."+c+"f}",style:{fontFamily:"Arial"}}}},exporting:{buttons:null},series:[{name:l,data:[i],tooltip:{valueSuffix:" "+f}}]},function(){})}});t.Klass=u}),define("syracuse-tablet/html/js/controls/ctrlFactoryDeps",["require","exports","module","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlProgress","syracuse-tablet/html/js/controls/field/ctrlNumeric","syracuse-tablet/html/js/controls/field/ctrlQuantity","syracuse-tablet/html/js/controls/field/ctrlCheckBox","syracuse-tablet/html/js/controls/field/ctrlCombo","syracuse-tablet/html/js/controls/field/ctrlDate","syracuse-tablet/html/js/controls/array/arrayStd","syracuse-tablet/html/js/controls/array/arrayQuery","syracuse-tablet/html/js/controls/array/arrayLookup","syracuse-tablet/html/js/controls/field/ctrlReference","syracuse-tablet/html/js/controls/layout/layoutRow","syracuse-tablet/html/js/controls/layout/layoutStack","syracuse-tablet/html/js/controls/layout/layoutTab","syracuse-tablet/html/js/controls/layout/layoutHub","syracuse-tablet/html/js/controls/layout/layoutHubGroup","syracuse-tablet/html/js/controls/vignetteBase","syracuse-tablet/html/js/controls/page/ctrlPageHeader","syracuse-tablet/html/js/controls/page/ctrlPageFooter","syracuse-tablet/html/js/controls/page/regularActionPanel","syracuse-tablet/html/js/controls/page/dashboardActionPanel","syracuse-tablet/html/js/controls/page/navigationPanel","syracuse-tablet/html/js/controls/ctrlTypeUnknown","syracuse-tablet/html/js/controls/chart/ctrlCubeChart","syracuse-tablet/html/js/controls/field/ctrlBinary","syracuse-tablet/html/js/controls/ctrlIcon","syracuse-tablet/html/js/controls/chart/ctrlGaugeChart","syracuse-tablet/html/js/controls/ctrlFactory"],function(e,t,n){var r=e("syracuse-tablet/html/js/controls/field/ctrlAlphanum").Klass,i=e("syracuse-tablet/html/js/controls/field/ctrlAlphanum").PhoneField,s=e("syracuse-tablet/html/js/controls/field/ctrlAlphanum").EmailField,o=e("syracuse-tablet/html/js/controls/field/ctrlProgress").Klass,u=e("syracuse-tablet/html/js/controls/field/ctrlNumeric").Klass,a=e("syracuse-tablet/html/js/controls/field/ctrlQuantity").Klass,f=e("syracuse-tablet/html/js/controls/field/ctrlCheckBox").Klass,l=e("syracuse-tablet/html/js/controls/field/ctrlCombo").Klass,c=e("syracuse-tablet/html/js/controls/field/ctrlDate").Klass,h=e("syracuse-tablet/html/js/controls/array/arrayStd").Klass,p=e("syracuse-tablet/html/js/controls/array/arrayQuery").Klass,d=e("syracuse-tablet/html/js/controls/array/arrayLookup").Klass,v=e("syracuse-tablet/html/js/controls/field/ctrlReference").Klass,m=e("syracuse-tablet/html/js/controls/layout/layoutRow").Klass,g=e("syracuse-tablet/html/js/controls/layout/layoutStack").Klass,y=e("syracuse-tablet/html/js/controls/layout/layoutTab").Klass,b=e("syracuse-tablet/html/js/controls/layout/layoutHub").Klass,w=e("syracuse-tablet/html/js/controls/layout/layoutHubGroup").Klass,E=e("syracuse-tablet/html/js/controls/vignetteBase").Klass,S=e("syracuse-tablet/html/js/controls/page/ctrlPageHeader").Klass,x=e("syracuse-tablet/html/js/controls/page/ctrlPageFooter").Klass,T=e("syracuse-tablet/html/js/controls/page/regularActionPanel").Klass,N=e("syracuse-tablet/html/js/controls/page/dashboardActionPanel").Klass,C=e("syracuse-tablet/html/js/controls/page/navigationPanel").Klass,k=e("syracuse-tablet/html/js/controls/ctrlTypeUnknown").Klass,L=e("syracuse-tablet/html/js/controls/chart/ctrlCubeChart").Klass,A=e("syracuse-tablet/html/js/controls/field/ctrlBinary").Klass,O=e("syracuse-tablet/html/js/controls/ctrlIcon").Klass,M=e("syracuse-tablet/html/js/controls/chart/ctrlGaugeChart").Klass,_=e("syracuse-tablet/html/js/controls/ctrlFactory");t.init=function(){_.setImpl("Alphanum",r),_.setImpl("PhoneField",i),_.setImpl("EmailField",s),_.setImpl("ProgressField",s),_.setImpl("Numeric",u),_.setImpl("Quantity",a),_.setImpl("CheckBox",f),_.setImpl("Combo",l),_.setImpl("Date",c),_.setImpl("Array",h),_.setImpl("ArrayQuery",p),_.setImpl("ArrayLookup",d),_.setImpl("Reference",v),_.setImpl("LayoutRow",m),_.setImpl("LayoutStack",g),_.setImpl("LayoutTab",y),_.setImpl("LayoutHub",b),_.setImpl("LayoutHubGroup",w),_.setImpl("Vignette",E),_.setImpl("PageHeader",S),_.setImpl("PageFooter",x),_.setImpl("RegularActionPanel",T),_.setImpl("DashboardActionPanel",N),_.setImpl("NavigationPanel",C),_.setImpl("TypeUnknown",k),_.setImpl("CubeChart",L),_.setImpl("Binary",A),_.setImpl("Icon",O),_.setImpl("Gauge",M)}}),define("syracuse-tablet/html/js/sdata/sdataSort",["require","exports","module"],function(e,t,n){function r(e,t,n){var r=[],i=t.$properties.$resources&&t.$properties.$resources.$item&&t.$properties.$resources.$item.$properties||t.$properties;n.forEach(function(e){var t=e.property,n=e.sort==="DESC"?"DESC":"ASC",s=i[t]&&i[t].$type||"application/x-string";if(s==="application/x-decimal"){if(n==="ASC"){try{r.push(function(e,n){var r=e[t],i=n[t];return+r- +i})}catch(o){}return 0}try{r.push(function(e,n){var r=e[t],i=n[t];return+i- +r})}catch(o){}return 0}n==="ASC"?r.push(function(e,n){try{var r=e[t],i=n[t];if(r>i)return 1;if(r<i)return-1}catch(s){}return 0}):r.push(function(e,n){try{var r=e[t],i=n[t];if(r>i)return-1;if(r<i)return 1}catch(s){}return 0})}),e.sort(function(e,t){var n=0;for(var i=0;i<r.length;i++){n=r[i](e,t);if(n!==0)break}return n})}t.sdataSortArray=r}),define("syracuse-tablet/html/js/sdata/sdataCache",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdatawhere/parser","syracuse-tablet/html/js/sdata/sdatawhere/whereUtils","syracuse-tablet/html/js/sdata/sdataSort"],function(e,t,n){function c(e){this.storage=e,this.context=null}var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("SDataCache"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/utils"),o=e("syracuse-tablet/html/js/storage/storage"),u=e("syracuse-tablet/html/js/sdata/sdatawhere/parser").Parser,a=e("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils"),f=e("syracuse-tablet/html/js/sdata/sdataSort"),l="$cache_",h=s.defineClass(c,null,{setContext:function(e){r&&r("Changing cache context: "+JSON.stringify(e)),this.context=e},cachePrefix:l,put:function(e){var t=$.Deferred(),n=this;try{if(!e.$data)throw new Error("PUT: No data specified");var r,i;if(e.$proto){var s=n._getProto(e.$proto);r=n._getRepresentation(s),i=n._getKeyValue(e.$data,s)}else{if(!e.$representation||!e.$key)throw new Error("PUT: Neither proto nor representation and key specified");r=e.$representation,i=e.$key}n.storage.put({$context:n.context,$collection:l+r,$endpoint:e.$endpoint,$key:i,$data:{$item:e.$data}}).then(function(e){t.resolve()}).fail(function(e){t.reject(e)})}catch(o){t.reject(o)}finally{return t.promise()}},query:function(e){var t=$.Deferred(),n=this;try{var r;if(e.$proto){var i=n._getProto(e.$proto);r=n._getRepresentation(i)}else{if(!e.$representation)throw new Error("QUERY: Neither proto nor representation specified");if(e.$where)throw new Error("QUERY: Where clause parsing requires prototype");if(e.$orderBy)throw new Error("QUERY: Order by requires prototype");r=e.$representation}n.storage.query({$context:n.context,$endpoint:e.$endpoint,$collection:l+r}).then(function(n){var r=[];if(e.$where){var s=u.parse(e.$where);n.$data.forEach(function(e,t){if(a.execWhere(e.$item,s,i)){var o=e.$item,u=n.$metaData[t];o.$cache={$lastRead:u.$lastRead,$lastUpdated:u.$lastUpdated},r.push(o)}})}else n.$data.forEach(function(e,t){var i=e.$item,s=n.$metaData[t];i.$cache={$lastRead:s.$lastRead,$lastUpdated:s.$lastUpdated},r.push(i)});e.$orderBy&&f.sdataSortArray(r,i,e.$orderBy),t.resolve(r)}).fail(function(e){t.reject(e)})}catch(s){t.reject(s)}finally{return t.promise()}},read:function(e){var t=$.Deferred(),n=this;try{var r;if(!e.$key)throw new Error("READ: No key specified");if(e.$proto){var i=n._getProto(e.$proto);r=n._getRepresentation(i)}else{if(!e.$representation)throw new Error("READ: Neither proto nor representation specified");r=e.$representation}n.storage.read({$context:n.context,$collection:l+r,$endpoint:e.$endpoint,$key:e.$key}).then(function(e){if(e.$status===o.StatusCodes.OK){var n=e.$data.$item;n.$cache={$lastRead:e.$metaData.$lastRead,$lastUpdated:e.$metaData.$lastUpdated},t.resolve(n)}else t.resolve(null)}).fail(function(e){t.reject(e)})}catch(s){t.reject(s)}finally{return t.promise()}},remove:function(e){var t=$.Deferred(),n=this;try{var r;if(!e.$key)throw new Error("REMOVE: No key specified");if(e.$proto){var i=n._getProto(e.$proto);r=n._getRepresentation(i)}else{if(!e.$representation)throw new Error("READ: Neither proto nor representation specified");r=e.$representation}n.storage.remove({$context:n.context,$collection:l+r,$endpoint:e.$endpoint,$key:e.$key}).then(function(){t.resolve()}).fail(function(e){t.reject(e)})}catch(s){t.reject(s)}finally{return t.promise()}},clearCache:function(){var e=$.Deferred(),t=this,n=new RegExp(t.cachePrefix.replace(/([\$\_]+)/g,"\\$1"));try{t.storage.clearCollection({$context:t.context,$collection:n}).then(function(){t.storage.clearCollection({$context:i.getEmptyCacheCtx(),$collection:n})}).then(function(){e.resolve()}).fail(function(t){e.reject(t)})}catch(r){e.reject(r)}finally{return e.promise()}},_getProto:function(e){var t=e.$properties.$resources&&e.$properties.$resources.$item||e;return t.$type=e.$type,t},_getRepresentation:function(e){return e.$type.split(".").slice(1,3).join(".").replace("$queryItem","$query")},_getKeyValue:function(e,t){return t.$key.replace(/\{(.*?)\}/g,function(t,n){return e[n]})}});t.SDataCache=h}),define("syracuse-tablet/html/js/sdata/entities/test/example",["require","exports","module"],function(e,t,n){var r=[];for(var i=0;i<100;i++)r.push({$uuid:i,name:"My name is: "+i,desc:"My desc is: "+i,desc2:"My desc2 is: "+i,amount:i*100});t.entity={$entityName:"example",$value:"{name}",$properties:{name:{$type:"application/x-string",$title:"My name"},desc:{$type:"application/x-string",$title:"My description"},desc2:{$type:"application/x-string",$title:"My description 2"},amount:{$type:"application/x-integer",$title:"My amount",$isExcluded:!1,$isHidden:!1,$isMandatory:!1,$isReadOnly:!1,$isDisabled:!1}},$relations:{values:{$type:"exampleChild"}},$articles:{$details:{$layoutType:"stack",$items:[{$layoutType:"row",$widthMd:"6,6",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]},{$layoutType:"row",$widthMd:"6,6",$items:[{$bind:"desc2",$isTitleHidden:!1},{$bind:"amount",$isTitleHidden:!1}]}]},$edit:{$layoutType:"stack",$items:[{$layoutType:"row",$widthMd:"6,6",$items:[{$bind:"name",$isTitleHidden:!0},{$bind:"desc",$isTitleHidden:!0}]},{$layoutType:"row",$widthMd:"6,6",$items:[{$bind:"desc2",$isTitleHidden:!1},{$bind:"amount",$isTitleHidden:!1}]}]}},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testDatatypes",["require","exports","module"],function(e,t,n){var r=[],i=!1;for(var s=0;s<10;s++)r.push({$uuid:s,propString:"Simple String="+s,propDate:"2014-03-"+(s+20),propDateTime:"2014-06-"+(s+10)+"T12:45:"+(s+44)+".123Z",propTime:"15:45:"+(s+34),propTimeShort:"15:45:"+(s+34),propInt:s*1e3+s*10,propDecimal:Math.sqrt(s*1e3+s*10),propReal:Math.sqrt(s*1e3+s*30),propBoolean:i=!i,propChoice:"mr",propQuantity:s*123,propStringUnit:"EUR",propStringMandatory:"Mandatory",propDecimalMandatory:"",propStringMinMax:"",propStringMinMaxValue:"",propStringPattern:""});var o={$entityName:"testDataTypes",$properties:{propString:{$type:"application/x-string",$isMandatory:!1,$title:"My name (max len 25)",$maxLength:25},propStringMandatory:{$type:"application/x-string",$isMandatory:!0,$title:"String Madatory"},propStringMinMax:{$type:"application/x-string",$title:"String MinMaxLength(3-5)",$minLength:3,$maxLength:5},propStringMinMaxValue:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer MinMaxValue(3-50)",$minimun:"3",$maximun:"50"},propStringPattern:{$type:"application/x-string",$title:"Pattern",$maxLength:40},propDate:{$type:"application/x-date",$isMandatory:!1,$title:"Date"},propDateTime:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time"},propTime:{$type:"application/x-time",$isMandatory:!1,$title:"Time long",$format:"TT"},propTimeShort:{$type:"application/x-time",$isMandatory:!1,$title:"Time"},propInt:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer (1-7000 Max)",$minimun:"1",$maximun:"7000"},propDecimalMandatory:{$type:"application/x-decimal",$isMandatory:!0,$title:"Decimal mandatory(2.4)",$scale:2,$precision:4,$format:"0.00"},propDecimal:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal(4.7)",$scale:4,$precision:7,$format:"0.0000"},propReal:{$type:"application/x-real",$isMandatory:!1,$title:"Real"},propBoolean:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean"},propChoice:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice",$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propQuantity:{$title:"Quantity",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!0,$title:"Unit for quantity"},propStringM:{$type:"application/x-string",$isMandatory:!0,$title:"My name"},propDateM:{$type:"application/x-date",$isMandatory:!0,$title:"Date (Mandatory)"},propDateTimeM:{$type:"application/x-datetime",$isMandatory:!0,$title:"Date+Time (Mandatory)"},propTimeM:{$type:"application/x-time",$isMandatory:!0,$title:"Time (Mandatory)"},propIntM:{$type:"application/x-integer",$isMandatory:!0,$title:"Integer (Mandatory)"},propDecimalM:{$type:"application/x-decimal",$isMandatory:!0,$title:"Decimal (Mandatory)"},propRealM:{$type:"application/x-real",$isMandatory:!0,$title:"Real (Mandatory)"},propBooleanM:{$type:"application/x-boolean",$isMandatory:!0,$title:"Boolean (Mandatory)"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,s={$uuid:r,propString:"Simple String="+r,propDate:"2014-03-"+r,propDateTime:"2014-06-"+r+"T12:45:"+(r+44)+".234Z",propTime:"15:45:"+(r+34),propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10),propReal:Math.sqrt(r*1e3+r*30),propBoolean:i=!i};return n.resolve(s),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}};t.entity=o}),define("syracuse-tablet/html/js/sdata/entities/test/testFormats",["require","exports","module"],function(e,t,n){var r=[],i=!1;for(var s=0;s<10;s++)r.push({$uuid:s,propDate1:"2014-03-"+(s+20),propDateTime1:"2014-06-"+(s+10)+" 12:45:"+(s+44),propTime1:"15:45:"+(s+34),propInt1:s*1e3+s*10,propDecimal1:Math.sqrt(s*1e3+s*10),propReal1:Math.sqrt(s*1e3+s*30),propDate2:"2014-03-"+(s+20),propDateTime2:"2014-06-"+(s+10)+" 12:45:"+(s+44),propTime2:"15:45:"+(s+34),propInt2:s*1e3+s*10,propDecimal2:Math.sqrt(s*1e3+s*10),propReal2:Math.sqrt(s*1e3+s*30)});t.entity={$entityName:"testFormats",$properties:{propDate1:{$type:"application/x-date",$title:"Date"},propDateTime1:{$type:"application/x-datetime",$title:"Date+Time"},propTime1:{$type:"application/x-time",$title:"Time"},propInt1:{$type:"application/x-integer",$title:"Integer"},propDecimal1:{$type:"application/x-decimal",$title:"Decimal"},propReal1:{$type:"application/x-real",$title:"Real"},propDate2:{$type:"application/x-date",$title:"Date"},propDateTime2:{$type:"application/x-datetime",$title:"Date+Time"},propTime2:{$type:"application/x-time",$title:"Time"},propInt2:{$type:"application/x-integer",$title:"Integer"},propDecimal2:{$type:"application/x-decimal",$title:"Decimal"},propReal2:{$type:"application/x-real",$title:"Real"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve({}),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testFormatsReference",["require","exports","module"],function(e,t,n){var r=["Labe","Labuan","La Rochelle","Las Vegas","Las Palmas","Liege","Libreville","Lille","Liverpool","Leipzig","Lucknow","London"],i=["LEK","LBU","LRH","LAS","LPA","LGG","LBV","LIL","LPL","LEJ","LKO","LON"],s={SITE_REF:{$description:"Paris",FCY:"PAR"},SITE_REF_1:{$description:"Yaounde",FCY:"YDE"},SITE_REF_2:{$description:"London",FCY:"LON"},SITE_REF_3:{$description:"Lisbon",FCY:"LIS"}},o=[],u=-1,a=-1;for(var f=0;f<3;f++)o.push({$uuid:f,SITE_REF:{$description:r[++u],FCY:i[++a]},SITE_REF_1:{$description:r[++u],FCY:i[++a]},SITE_REF_2:{$description:r[++u],FCY:i[++a]},SITE_REF_3:{$description:r[++u],FCY:i[++a]}});t.entity={$entityName:"testFormatsReference",$baseUrl:"http://localhost:8124/mobile1/x3/erp/SUPERV",$properties:{SITE:{$type:"application/x-string",$maxLength:5,$isExcluded:!0},SITE_REF:{$type:"application/x-reference",$title:"Reference",$shortTitle:"Reference",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_1:{$type:"application/x-reference",$title:"Reference 1",$shortTitle:"Reference 1",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_2:{$type:"application/x-reference",$title:"Reference 2",$shortTitle:"Reference 2",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_3:{$type:"application/x-reference",$title:"Reference 3",$shortTitle:"Reference 3",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}}},$relations:{},$articles:{$details:{$layoutType:"stack",$items:[{$bind:"SITE_REF",$title:"Ref field 1"},{$bind:"SITE_REF_1",$title:"Ref field 2"},{$bind:"SITE_REF_2",$title:"Ref field 3"},{$bind:"SITE_REF_3",$title:"Ref field 4"}]},$edit:{$layoutType:"stack",$items:[{$bind:"SITE_REF",$title:"Ref field 1"},{$bind:"SITE_REF_1",$title:"Ref field 2"},{$bind:"SITE_REF_2",$title:"Ref field 3"},{$bind:"SITE_REF_3",$title:"Ref field 4"}]}},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve({}),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(s),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:o}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testCharts",["require","exports","module"],function(e,t,n){var r=[{part:"Gear",value:50,revenue:40,margin:10},{part:"Motor",value:60,revenue:40,margin:20},{part:"Head drive",value:60,revenue:80,margin:-20},{part:"Handwheel",value:70,revenue:90,margin:10},{part:"Crank",value:70,revenue:70,margin:0},{part:"Saddle",value:80,revenue:30,margin:50},{part:"Base",value:20,revenue:40,margin:-20},{part:"Spindle",value:10,revenue:0,margin:10}];t.entity={$entityName:"testCharts",$properties:{part:{$type:"application/x-string",$title:"Item"},value:{$type:"application/x-decimal",$title:"Value",$format:"0.0000"},revenue:{$type:"application/x-decimal",$title:"Revenue",$format:"0.0000"},margin:{$type:"application/x-decimal",$title:"Margin",$format:"0.0000"}},$prototype:function(e){var t=e.$properties&&e.$properties.$resources;t&&(t.$axes=[{$title:"Item",$hierarchies:[["part"]]},{$hierarchies:[["$measures"]]}],t.$cube={$title:"Sales overview",$hierarchies:{part:{$properties:["part"]}},$measures:{value:{},revenue:{},margin:{}}})},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testConstraints",["require","exports","module"],function(e,t,n){var r=[],i=!1;for(var s=0;s<10;s++)r.push({$uuid:s,propString:"Test "+s,propString2:"Some text "+s,propString3:"Fill me "+s,propInt:s*1e3+s*10,propInt2:s*1e3+s*100,propDecimal:Math.sqrt(s*1e3+s*10),propDecimal2:Math.sqrt(s*1e3+s*100),propDecimal3:Math.sqrt(s*1e3+s*110),propDecimal4:Math.sqrt(s*1e3+s*120),propQuantity:s*123,propStringUnit:"EUR"});t.entity={$entityName:"testConstraints",$properties:{propString:{$title:"Test: $pattern=Test.*\\d$",$type:"application/x-string",$isMandatory:!0,$pattern:"Test.*\\d$"},propString2:{$title:"Test: $minLength=5, $maxLength=15",$type:"application/x-string",$isMandatory:!0,$minLength:5,$maxLength:15},propString3:{$title:"Test: $minLength=5, $maxLength=15, $pattern=Fill me.*\\d$",$type:"application/x-string",$isMandatory:!0,$pattern:"Fill me.*\\d$",$minLength:5,$maxLength:15},propInt:{$title:"Test: $minimum=100, $maximum=200",$type:"application/x-integer",$isMandatory:!0,$minimum:100,$maximum:200},propInt2:{$title:"Test: $exclusiveMinimum=100, $exclusiveMaximum=200",$type:"application/x-integer",$isMandatory:!0,$exclusiveMinimum:100,$exclusiveMaximum:200},propDecimal:{$title:"Test: $format=0.0000",$type:"application/x-decimal",$isMandatory:!0,$format:"0.0000"},propDecimal2:{$title:"Test: $format=0.00",$type:"application/x-decimal",$isMandatory:!0,$format:"0.00"},propDecimal3:{$title:"Test: $precision=10",$type:"application/x-decimal",$isMandatory:!0,$precision:10},propDecimal4:{$title:"Test: $scale=3",$type:"application/x-decimal",$isMandatory:!0,$scale:3,$format:"0.00000"},propQuantity:{$title:"Test: $format=0.00",$isMandatory:!0,$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$title:"Unit for quantity",$type:"application/x-string",$isMandatory:!1,$isExcluded:!0}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,i={$uuid:r,propString:"Simple String="+r,propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10)};return n.resolve(i),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateTo",["require","exports","module"],function(e,t,n){var r=[];for(var i=0;i<10;i++)r.push({$uuid:i,name:"Customer group "+i,group:""+i});t.entity={$entityName:"testNavigateTo",$properties:{name:{$title:"Customer group name",$type:"application/x-string"},group:{$title:"Customer group",$type:"application/x-string"}},$prototype:function(e){var t=e.$properties&&e.$properties.$resources&&e.$properties.$resources.$item&&e.$properties.$resources.$item.$links||{};t.DASHBOARD={$title:"Show details",$url:"{$baseUrl}/$mobileDashboards?dashboard=testContextDashboardChild&parameters=group%3D%7Bgroup%7D"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,i={$uuid:r,propString:"Simple String="+r,propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10)};return n.resolve(i),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild",["require","exports","module"],function(e,t,n){var r=[];for(var i=0;i<10;i++)for(var s=0;s<10;s++)r.push({$uuid:i*10+s,name:"Customer "+i*10+s,desc:"Belongs to group "+i,group:""+i});t.entity={$entityName:"testNavigateToChild",$properties:{name:{$title:"Customer name",$type:"application/x-string"},desc:{$title:"Description",$type:"application/x-string"},group:{$title:"Customer group",$type:"application/x-string"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,i={$uuid:r,propString:"Simple String="+r,propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10)};return n.resolve(i),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow",["require","exports","module"],function(e,t,n){var r=[],i=!1;for(var s=0;s<10;s++)r.push({$uuid:s,propStringShow:"Simple String="+s,propStringHide:"Simple String="+s,propStringReadOnly:"ReadOnly String="+s,propStringDisabled:"Disabled=true String="+s,propStringDisabledFalse:"Disabled=false String="+s,propDate:"2014-03-"+(s+20),propDateHide:"2014-03-"+(s+20),propDateDisabled:"2014-03-"+(s+20),propDateReadOnly:"2014-03-"+(s+20),propDateTime:"2014-06-"+(s+10)+"T12:45:"+(s+44)+".123Z",propDateTimeHide:"2014-06-"+(s+10)+"T12:45:"+(s+44)+".123Z",propDateTimeDisabled:"2014-06-"+(s+10)+"T12:45:"+(s+44)+".123Z",propTime:"15:45:"+(s+34),propTimeHide:"15:45:"+(s+34),propTimeDisabled:"15:45:"+(s+34),propInt:s*1e3+s*10,propIntHide:s*1e3+s*10,propIntDisabled:s*1e3+s*10,propIntReadOnly:s*1e3+s*10,propDecimal:Math.sqrt(s*1e3+s*10),propDecimalHide:Math.sqrt(s*1e3+s*10),propDecimalDisabled:Math.sqrt(s*1e3+s*10),propDecimalReadOnly:Math.sqrt(s*1e3+s*10),propReal:Math.sqrt(s*1e3+s*30),propBoolean:i=!i,propBooleanHidden:i=!i,propBooleanDisabled:i=!i,propChoice:"mr",propChoiceHidden:"mr",propChoiceDisabled:"mr",propQuantity:s*123,propStringUnit:"EUR",propQuantityExcluded:s*123,propStringUnitExcluded:"USD"});t.entity={$entityName:"testPropertyHideShow",$properties:{propStringShow:{$type:"application/x-string",$isMandatory:!0,$title:"String Mandatory $isHidden: false",$isHidden:!1},propStringHide:{$type:"application/x-string",$isMandatory:!1,$title:"String $isHidden: true",$isHidden:!0},propStringReadOnly:{$type:"application/x-string",$title:"String $isReadOnly: true",$isReadOnly:!0},propStringDisabledFalse:{$type:"application/x-string",$title:"String $isDisabled: false",$isDisabled:!1},propStringDisabled:{$type:"application/x-string",$title:"String $isDisabled: true",$isDisabled:!0},propDate:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isHidden: false",$isHidden:!1},propDateHide:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isHidden: true",$isHidden:!0},propDateDisabled:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isDisabled: true",$isDisabled:!0},propDateReadOnly:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isReadOnly: true",$isReadOnly:!0},propDateTime:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isHidden: false",$isHidden:!1},propDateTimeHide:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isHidden: true",$isHidden:!0},propDateTimeDisabled:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isDisabled: true",$isDisabled:!0},propTime:{$type:"application/x-time",$isMandatory:!1,$title:"Time long",$format:"TT"},propTimeHide:{$type:"application/x-time",$isMandatory:!1,$title:"Time $isHidden: true",$isHidden:!0},propTimeDisabled:{$type:"application/x-time",$isMandatory:!1,$title:"Time $isDisabled: true",$isDisabled:!0},propInt:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isHidden: false)",$isHidden:!1},propIntHide:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isHidden: true)",$isHidden:!0},propIntDisabled:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isDisabled: true)",$isDisabled:!0},propIntReadOnly:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isReadOnly: true)",$isReadOnly:!0},propDecimal:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isHidden: false",$isHidden:!1},propDecimalHide:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isHidden: true",$isHidden:!0},propDecimalDisabled:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isDisabled: true",$isDisabled:!0},propDecimalReadOnly:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isReadOnly: true",$isReadOnly:!0},propReal:{$type:"application/x-real",$isMandatory:!1,$title:"Real"},propBoolean:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean"},propBooleanHidden:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean ($isHidden: true)",$isHidden:!0},propBooleanDisabled:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean ($isDisabled: true)",$isDisabled:!0},propChoice:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice",$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propChoiceHidden:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice($isHidden: true)",$isHidden:!0,$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propChoiceDisabled:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice ($isDisabled: true)",$isDisabled:!0,$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propQuantity:{$title:"Quantity ($unit $isExcluded: false)",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!1,$title:"Unit for quantity ($isExcluded: false)"},propQuantityExcluded:{$title:"Quantity($unit $isExcluded: true)",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnitExcluded"},propStringUnitExcluded:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!0,$title:"Unit for quantity ($isExcluded: true)"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,s={$uuid:r,propString:"Simple String="+r,propDate:"2014-03-"+r,propDateTime:"2014-06-"+r+"T12:45:"+(r+44)+".234Z",propTime:"15:45:"+(r+34),propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10),propReal:Math.sqrt(r*1e3+r*30),propBoolean:i=!i};return n.resolve(s),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGaugeChart",["require","exports","module"],function(e,t,n){var r={salesOp:"75.0000000000",salesValue:"133000.0000000000",salesValueMin:"100000.0000000000",salesValueMax:"150000.0000000000"},i={$entityName:"testGaugeChart",$properties:{salesOp:{$title:"sale opportunity",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValue:{$title:"sales value",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValueMin:{$title:"sales value min",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValueMax:{$title:"sales value max",$type:"application/x-decimal",$capabilities:"sort,filter"}},$relations:{},$articles:{},$services:{$read:function(e,t){var n=$.Deferred();return n.resolve(r),n.promise()}}};t.entity=i}),define("syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testHomeDashboard:{$dashboardName:"testHomeDashboard",$title:"Main test dashboard",$description:"This dashboard links to different dashboards used for every kind of UI tests",$vignettes:{testLayoutsDashboard:{$uuid:"testLayoutsDashboard",$displayStyle:"$link"},testTypesDashboard:{$uuid:"testTypesDashboard",$displayStyle:"$link"},testTypesDashboard2:{$uuid:"testTypesDashboard2",$displayStyle:"$link"},testFormatsDashboard:{$uuid:"testFormatsDashboard",$displayStyle:"$link"},testGX3APPDashboard:{$uuid:"testGX3APPDashboard",$displayStyle:"$link"},testSUPERVDashboard:{$uuid:"testSUPERVDashboard",$displayStyle:"$link"},testChartsDashboard:{$uuid:"testChartsDashboard",$displayStyle:"$link"},testSUPERVDashboard2:{$uuid:"testSUPERVDashboard2",$displayStyle:"$link"},testGX3APPDashboard2:{$uuid:"testGX3APPDashboard2",$displayStyle:"$link"},testConstraintsDashboard:{$uuid:"testConstraintsDashboard",$displayStyle:"$link"},testContextDashboard:{$uuid:"testContextDashboard",$displayStyle:"$link"},testPropertyHideShowDashboard:{$uuid:"testPropertyHideShowDashboard",$displayStyle:"$link"},testAQTACTNPDashboard:{$uuid:"testAQTACTNPDashboard",$displayStyle:"$link"},testSyDevDashboard:{$uuid:"testSyDevDashboard",$displayStyle:"$link"},testGaugeChartDashboard:{$uuid:"testGaugeChartDashboard",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Client only",$items:[{$bind:"testLayoutsDashboard",$size:"small"},{$bind:"testFormatsDashboard",$size:"small"},{$bind:"testTypesDashboard",$size:"small"},{$bind:"testConstraintsDashboard",$size:"small"},{$bind:"testChartsDashboard",$size:"medium"},{$bind:"testContextDashboard",$size:"medium"},{$bind:"testPropertyHideShowDashboard",$size:"small"},{$bind:"testGaugeChartDashboard",$size:"small"}]},{$layoutType:"hubGroup",$title:"SUPERV endpoint",$items:[{$bind:"testSUPERVDashboard"}]},{$layoutType:"hubGroup",$title:"GX3APP endpoint",$items:[{$bind:"testGX3APPDashboard"},{$bind:"testGX3APPDashboard2"}]},{$layoutType:"hubGroup",$title:"SYDEV endpoint",$items:[{$bind:"testSyDevDashboard"}]},{$layoutType:"hubGroup",$title:"Default endpoint",$items:[{$bind:"testAQTACTNPDashboard"},{$bind:"testTypesDashboard2",$size:"medium"}]}]}}},t.gadgets={testLayoutsDashboard:{$type:"$dashboard",$title:"Layout tests",$description:"Layout tests",dashboardName:"testLayoutsDashboard"},testTypesDashboard:{$type:"$dashboard",$title:"Datatype tests",$description:"Datatype tests",dashboardName:"testTypesDashboard"},testTypesDashboard2:{$type:"$dashboard",$title:"Datatype AQTCRUD",$description:"Datatype AQTCRUD",dashboardName:"testTypesDashboard2"},testFormatsDashboard:{$type:"$dashboard",$title:"Formats tests",$description:"Formats tests",dashboardName:"testFormatsDashboard"},testGX3APPDashboard:{$type:"$dashboard",$title:"GX3APP tests",$description:"GX3APP tests",dashboardName:"testGX3APPDashboard"},testSUPERVDashboard:{$type:"$dashboard",$title:"SUPERV tests",$description:"SUPERV tests",dashboardName:"testSUPERVDashboard"},testChartsDashboard:{$type:"$dashboard",$title:"Charts tests",$description:"Charts tests",dashboardName:"testChartsDashboard"},testSUPERVDashboard2:{$type:"$dashboard",$title:"AQMCRUD",$description:"AQMCRUD default endpoint",dashboardName:"testSUPERVDashboard2"},testGX3APPDashboard2:{$type:"$dashboard",$title:"GX3APP Cost",$description:"GX3APP Cost",dashboardName:"testGX3APPDashboard2"},testConstraintsDashboard:{$type:"$dashboard",$title:"SData constraints",$description:"SData constraints",dashboardName:"testConstraintsDashboard"},testContextDashboard:{$type:"$dashboard",$title:"Dashboard with context",$description:"Dashboard with context",dashboardName:"testContextDashboard"},testPropertyHideShowDashboard:{$type:"$dashboard",$title:"Property Hide Show",$description:"Dashboard PropertyHideShow",dashboardName:"testPropertyHideShowDashboard"},testAQTACTNPDashboard:{$type:"$dashboard",$title:"AQTACTNP Create facet",$description:"AQTACTNP Create facet",dashboardName:"testAQTACTNPDashboard"},testSyDevDashboard:{$type:"$dashboard",$title:"Sydev entities",$description:"Sydev entities",dashboardName:"testSyDevDashboard"},testGaugeChartDashboard:{$type:"$dashboard",$title:"Test gauge chart",$description:"Test gauge chart",dashboardName:"testGaugeChartDashboard"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testLayoutsDashboard:{$dashboardName:"testLayoutsDashboard",$title:"Layout test dashboard",$description:"Test different kinds of layouts",$vignettes:{testLayoutHubDashboard:{$uuid:"testLayoutHubDashboard",$displayStyle:"$link"},testLayoutRowsDashboard:{$uuid:"testLayoutRowsDashboard",$displayStyle:"$link"},testLongQuery:{$uuid:"testLongQuery",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"150px"},$widthXs:"2,2,2",$items:[{$bind:"testLayoutHubDashboard"},{$bind:"testLayoutRowsDashboard"},{$bind:"testLongQuery"}]}]}},testLayoutHubDashboard:{$dashboardName:"testLayoutHubDashboard",$title:"Hub dashboard (scroll horizontal)",$description:"Horizontal scrolling dashboard",$vignettes:{testDummyTile:{$uuid:"testDummyTile",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Layout group 1",$items:[{$bind:"testDummyTile",$size:"full"},{$bind:"testDummyTile",$size:"medium"},{$bind:"testDummyTile",$size:"small"},{$bind:"testDummyTile",$size:"small"},{$bind:"testDummyTile",$size:"small"},{$bind:"testDummyTile",$size:"wide"},{$bind:"testDummyTile",$size:"large"}]},{$layoutType:"hubGroup",$title:"Layout group 2",$items:[{$bind:"testDummyTile",$size:"medium"},{$bind:"testDummyTile",$size:"medium"},{$bind:"testDummyTile",$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 3",$items:[{$bind:"testDummyTile",$size:"wide"},{$bind:"testDummyTile",$size:"medium"},{$bind:"testDummyTile",$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 4",$items:[{$bind:"testDummyTile",$size:"large"},{$bind:"testDummyTile",$size:"medium"},{$bind:"testDummyTile",$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 5",$items:[{$bind:"testDummyTile",$size:"wide"},{$bind:"testDummyTile",$size:"full"},{$bind:"testDummyTile",$size:"small"},{$bind:"testDummyTile",$size:"small"},{$bind:"testDummyTile",$size:"small"},{$bind:"testDummyTile",$size:"small"},{$bind:"testDummyTile",$size:"small"}]}]}},testLayoutRowsDashboard:{$dashboardName:"testLayoutRowsDashboard",$title:"Row layout dashboard (scroll vertical)",$description:"Vertical scrolling dashboard",$vignettes:{testDummyTile:{$uuid:"testDummyTile",$displayStyle:"$full"},testDummyTileLink:{$uuid:"testDummyTile",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"100px"},$widthLg:"3,3,3,3",$widthSm:"3,3,6,6",$widthXs:"12,12,12,12",$items:[{$bind:"testDummyTileLink"},{$bind:"testDummyTileLink"},{$bind:"testDummyTileLink"},{$bind:"testDummyTileLink"}]},{$layoutType:"row",displayOptions:{rowHeight:"200px"},$widthLg:"3,3,3,3",$widthSm:"4,4,4,12",$widthXs:"12,12,12,12",$items:[{$bind:"testDummyTile"},{$bind:"testDummyTile"},{$bind:"testDummyTile"},{$bind:"testDummyTile"}]}]}}},t.gadgets={testLayoutHubDashboard:{$type:"$dashboard",$title:"Hub Layout tests",$description:"Hub Layout tests",dashboardName:"testLayoutHubDashboard"},testLayoutRowsDashboard:{$type:"$dashboard",$title:"Rows Layout tests",$description:"Rows Layout tests",dashboardName:"testLayoutRowsDashboard"},testDummyTile:{$type:"$representation",$title:"Dummy",$description:"Dummy",entity:"example",action:"$details",representation:"example",facet:"$details",keyParameter:"5"},testLongQuery:{$type:"$representation",$title:"Long query",$description:"Query",entity:"example",action:"$query",representation:"example",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testTypesDashboard:{$dashboardName:"testTypesDashboard",$title:"Datatypes test dashboard",$description:"Test different kinds of datatypes",$vignettes:{testLinkQueryRecord:{$uuid:"testDisplayQueryRecord",$displayStyle:"$link"},testLinkDetailsRecord:{$uuid:"testDisplayDetailsRecord",$displayStyle:"$link"},testLinkEditRecord:{$uuid:"testDisplayEditRecord",$displayStyle:"$link"},testLinkCreateRecord:{$uuid:"testDisplayCreateRecord",$displayStyle:"$link"},testDisplayQueryRecord:{$uuid:"testDisplayQueryRecord",$displayStyle:"$full"},testDisplayDetailsRecord:{$uuid:"testDisplayDetailsRecord",$displayStyle:"$full"},testDisplayEditRecord:{$uuid:"testDisplayEditRecord",$displayStyle:"$full"},testDisplayCreateRecord:{$uuid:"testDisplayCreateRecord",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"100px"},$widthXs:"3,3,3,3",$items:[{$bind:"testLinkQueryRecord"},{$bind:"testLinkDetailsRecord"},{$bind:"testLinkEditRecord"},{$bind:"testLinkCreateRecord"}]},{$layoutType:"row",displayOptions:{rowHeight:"300px"},$widthLg:"3,3,3,3",$widthSm:"6,6,6,6",$widthXs:"12,12,12,12",$items:[{$bind:"testDisplayQueryRecord"},{$bind:"testDisplayDetailsRecord"},{$bind:"testDisplayEditRecord"},{$bind:"testDisplayCreateRecord"}]}]}}},t.gadgets={testDisplayDetailsRecord:{$type:"$representation",$title:"Details facet",entity:"testDataTypes",action:"$details",representation:"testDataTypes",facet:"$details",keyParameter:"5"},testDisplayEditRecord:{$type:"$representation",$title:"Edit facet",entity:"testDataTypes",action:"$edit",representation:"testDataTypes",facet:"$edit",keyParameter:"5"},testDisplayCreateRecord:{$type:"$representation",$title:"Create facet",entity:"testDataTypes",action:"$create",representation:"testDataTypes",facet:"$create",keyParameter:"5"},testDisplayQueryRecord:{$type:"$representation",$title:"Query facet",entity:"testDataTypes",action:"$query",representation:"testDataTypes",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard2",["require","exports","module"],function(e,t,n){t.dashboards={testTypesDashboard2:{$dashboardName:"testTypesDashboard2",$title:"AQTCRUD default endpoint",$description:"AQTCRUD Representation",$vignettes:{testLinkQueryRecord2:{$uuid:"testDisplayQueryRecord2",$displayStyle:"$link"},testLinkDetailsRecord2:{$uuid:"testDisplayDetailsRecord2",$displayStyle:"$link"},testLinkEditRecord2:{$uuid:"testDisplayEditRecord2",$displayStyle:"$link"},testLinkCreateRecord2:{$uuid:"testDisplayCreateRecord2",$displayStyle:"$link"},testDisplayQueryRecord2:{$uuid:"testDisplayQueryRecord2",$displayStyle:"$full"},testDisplayDetailsRecord2:{$uuid:"testDisplayDetailsRecord2",$displayStyle:"$full"},testDisplayEditRecord2:{$uuid:"testDisplayEditRecord2",$displayStyle:"$full"},testDisplayCreateRecord2:{$uuid:"testDisplayCreateRecord2",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"100px"},$widthXs:"3,3,3,3",$items:[{$bind:"testLinkQueryRecord2"},{$bind:"testLinkDetailsRecord2"},{$bind:"testLinkEditRecord2"},{$bind:"testLinkCreateRecord2"}]},{$layoutType:"row",displayOptions:{rowHeight:"300px"},$widthLg:"3,3,3,3",$widthSm:"6,6,6,6",$widthXs:"12,12,12,12",$items:[{$bind:"testDisplayQueryRecord2"},{$bind:"testDisplayDetailsRecord2"},{$bind:"testDisplayEditRecord2"},{$bind:"testDisplayCreateRecord2"}]}]}}},t.gadgets={testDisplayDetailsRecord2:{$type:"$representation",$title:"Details facet",entity:"AQTCRUD",action:"$details",representation:"AQTCRUD",facet:"$details",keyParameter:"10"},testDisplayEditRecord2:{$type:"$representation",$title:"Edit facet",entity:"AQTCRUD",action:"$edit",representation:"AQTCRUD",facet:"$edit",keyParameter:"10"},testDisplayCreateRecord2:{$type:"$representation",$title:"Create facet",entity:"AQTCRUD",action:"$create",representation:"AQTCRUD",facet:"$create"},testDisplayQueryRecord2:{$type:"$representation",$title:"Query facet",entity:"AQTCRUD",action:"$query",representation:"AQTCRUD",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testFormatsDashboard:{$dashboardName:"testFormatsDashboard",$title:"Formatting test dashboard",$description:"Test different kinds of formats",$vignettes:{testFormatEditRecord:{$uuid:"testFormatEditRecord",$displayStyle:"$full"},testFormatReferenceDetail:{$uuid:"testFormatReferenceDetail",$displayStyle:"$full"},testFormatReferenceEdit:{$uuid:"testFormatReferenceEdit",$displayStyle:"$full"},testFormatReferenceQuery:{$uuid:"testFormatReferenceQuery",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"300px"},$widthXs:"4,4,4",$items:[{$bind:"testFormatEditRecord"},{$bind:"testFormatReferenceDetail"},{$bind:"testFormatReferenceEdit"}]},{$layoutType:"row",displayOptions:{rowHeight:"300px"},$widthXs:"4",$items:[{$bind:"testFormatReferenceQuery"}]}]}}},t.gadgets={testFormatEditRecord:{$type:"$representation",$title:"Details facet",entity:"testFormats",action:"$edit",representation:"testFormats",facet:"$edit",keyParameter:"5"},testFormatReferenceDetail:{$type:"$representation",$title:"Details facet reference fields",entity:"testFormatsReference",action:"$details",representation:"testFormatsReference",facet:"$details",keyParameter:"5"},testFormatReferenceEdit:{$type:"$representation",$title:"Edit facet reference fields",entity:"testFormatsReference",action:"$edit",representation:"testFormatsReference",facet:"$edit",keyParameter:"5"},testFormatReferenceQuery:{$type:"$representation",$title:"Query facet reference fields",entity:"testFormatsReference",action:"$query",representation:"testFormatsReference",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testGX3APPDashboard:{$dashboardName:"testGX3APPDashboard",$title:"Display data from GX3APP",$description:"Test different representations on GX3APP",$vignettes:{testACTIVQuery:{$uuid:"testACTIVQuery",$displayStyle:"$full"},testRequestVEN085:{$uuid:"testRequestVEN085",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Some data...",$items:[{$bind:"testACTIVQuery",$size:"full"}]},{$layoutType:"hubGroup",$title:"Some fancy chart",$items:[{$bind:"testRequestVEN085",$size:"large"}]}]}}},t.gadgets={testACTIVQuery:{$type:"$representation",$title:"Query ACTIV",entity:"ACTIV",action:"$query",representation:"ACTIV",endpoint:"x3.erp.GX3APP",facet:"$query"},testRequestVEN085:{$type:"$request",$title:"Request VEN085",requestName:"VEN085",requestLevel:"1",action:"$query",endpoint:"x3.erp.GX3APP",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testSUPERVDashboard:{$dashboardName:"testSUPERVDashboard",$title:"Display Query AQMCRUDM from SUPERV",$description:"Test different representations on SUPERV",$vignettes:{testAQMDEVICEQuery:{$uuid:"testAQMDEVICEQuery",$displayStyle:"$full"},testAQMDEVICEQueryLink:{$uuid:"testAQMDEVICEQuery",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"500px"},$widthXs:"6,1",$items:[{$bind:"testAQMDEVICEQuery"},{$bind:"testAQMDEVICEQueryLink"}]}]}}},t.gadgets={testAQMDEVICEQuery:{$type:"$representation",$title:"Query AQMCRUDM",entity:"AQMDEVICE",action:"$query",representation:"AQMCRUDM",endpoint:"x3.erp.SUPERV",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testChartsDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testChartsDashboard:{$dashboardName:"testChartsDashboard",$title:"Display some charts",$description:"Test different kind of charts",$vignettes:{testRequestChart:{$uuid:"testRequestChart",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Big chart (!)",$items:[{$bind:"testRequestChart",$size:"full",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}},{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}]},{$layoutType:"hubGroup",$title:"Bar charts",$items:[{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"stick"}]}},{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}]},{$layoutType:"hubGroup",$title:"Line charts",$items:[{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"line"}]}},{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"area"}]}}]},{$layoutType:"hubGroup",$title:"Spline charts",$items:[{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"spline"}]}},{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"areaspline"}]}}]},{$layoutType:"hubGroup",$title:"Pie chart",$items:[{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"pie"}]}}]},{$layoutType:"hubGroup",$title:"Test different sizes/legends",$items:[{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!1,$style:"line"}]}},{$bind:"testRequestChart",$size:"large",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$style:"line"}]}},{$bind:"testRequestChart",$size:"wide",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$isXLabelHidden:!0,$isYLabelHidden:!0,$isXLabelsHidden:!0,$isYLabelsHidden:!0,$style:"line"}]}},{$bind:"testRequestChart",$size:"medium",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$isXLabelHidden:!0,$isYLabelHidden:!0,$isXLabelsHidden:!0,$isYLabelsHidden:!0,$style:"bar"}]}}]}]}}},t.gadgets={testRequestChart:{$type:"$request",$title:"Request test",requestName:"testCharts",requestLevel:"1",action:"$query",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2",["require","exports","module"],function(e,t,n){t.dashboards={testSUPERVDashboard2:{$dashboardName:"testSUPERVDashboard2",$title:"AQMCRUD default endpoint",$description:"Test representation AQMCRUD",$vignettes:{testAQTCRUDQuery:{$uuid:"testAQTCRUDQuery",$displayStyle:"$full"},testAQTCRUDQueryLink:{$uuid:"testAQTCRUDQuery",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"500px"},$widthXs:"6,1",$items:[{$bind:"testAQTCRUDQuery"},{$bind:"testAQTCRUDQueryLink"}]}]}}},t.gadgets={testAQTCRUDQuery:{$type:"$representation",$title:"Query AQMCRUD",entity:"AQMCRUD",action:"$query",representation:"AQMCRUD",facet:"$query"},testAQTCRUDQueryLink:{$type:"$representation",$title:"Query 10 AQMCRUD",requestName:"10",requestLevel:"1",action:"$query",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2",["require","exports","module"],function(e,t,n){t.dashboards={testGX3APPDashboard2:{$dashboardName:"testGX3APPDashboard2",$title:"Display data from GX3APP",$description:"Test PRPCOSTCTR representation on GX3APP",$vignettes:{testPRPCOSTCTRQuery:{$uuid:"testPRPCOSTCTRQuery",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Some data Spending cost...",$items:[{$bind:"testPRPCOSTCTRQuery",$size:"full"}]}]}}},t.gadgets={testPRPCOSTCTRQuery:{$type:"$representation",$title:"Query PRPCOSTCTR",entity:"PRPCOSTCTR",action:"$query",representation:"PRPCOSTCTR",endpoint:"x3.erp.GX3APP",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testConstraintsDashboard:{$dashboardName:"testConstraintsDashboard",$title:"Constraints test dashboard",$description:"Test SData constraints: https://github.com/Sage-ERP-X3/platform/wiki/Resource-Prototypes#type-constraints",$vignettes:{testConstraintsEditRecord:{$uuid:"testConstraintsEditRecord",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"500px"},$widthXs:"12",$items:[{$bind:"testConstraintsEditRecord"}]}]}}},t.gadgets={testConstraintsEditRecord:{$type:"$representation",$title:"Edit facet",entity:"testConstraints",action:"$edit",representation:"testConstraints",facet:"$edit",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testContextDashboard:{$dashboardName:"testContextDashboard",$title:"Test dashboard parameters",$description:"Test navigation to a dashboard with parameters",$vignettes:{testRecordLinkToDashboard:{$uuid:"testRecordLinkToDashboard",$displayStyle:"$full"},testRecordLinkToDashboardLink:{$uuid:"testRecordLinkToDashboardLink",$displayStyle:"$full"},testRecordLinkToDashboardSUPERV:{$uuid:"testRecordLinkToDashboardSUPERV",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"300px"},$widthXs:"4, 4, 4",$items:[{$bind:"testRecordLinkToDashboard"},{$bind:"testRecordLinkToDashboardLink"},{$bind:"testRecordLinkToDashboardSUPERV"}]}]}},testContextDashboardChild:{$dashboardName:"testContextDashboardChild",$title:"Child dashboard",$description:"Child dashboard getting parameters that are applied to the first to vignettes but not to the last one using the same representation to gather data",$vignettes:{testRecordWithContext1:{$uuid:"testRecordWithContext",$displayStyle:"$full"},testRecordWithContext2:{$uuid:"testRecordWithContext",$displayStyle:"$full"},testRecordWithoutContext:{$uuid:"testRecordWithoutContext",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"500px"},$widthXs:"4,4,4",$items:[{$bind:"testRecordWithContext1"},{$bind:"testRecordWithContext2"},{$bind:"testRecordWithoutContext"}]}]}},testContextDashboardChildSUPERV:{$dashboardName:"testContextDashboardChildSUPERV",$title:"Child dashboard",$description:"Child dashboard getting parameters",$vignettes:{testRecordWithContextSUPERV:{$uuid:"testRecordWithContextSUPERV",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"300px"},$widthXs:"12",$items:[{$bind:"testRecordWithContextSUPERV"}]}]}}},t.gadgets={testRecordLinkToDashboard:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateTo",action:"$query",representation:"testNavigateTo",facet:"$query"},testRecordWithContext:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateToChild",action:"$query",representation:"testNavigateToChild",facet:"$query",parameters:{where:{value:"group eq '{group}'"}}},testRecordLinkToDashboardLink:{$type:"$dashboard",$title:"Open dashboard w/o params",dashboardName:"testContextDashboardChild"},testRecordWithoutContext:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateToChild",action:"$query",representation:"testNavigateToChild",facet:"$query"},testRecordLinkToDashboardSUPERV:{$type:"$representation",$title:"Click to navigate",entity:"AQMDEVICEM",action:"$query",representation:"AQMDEVICEM",facet:"$query",endpoint:"x3.erp.SUPERV"},testRecordWithContextSUPERV:{$type:"$representation",$title:"Click to navigate",entity:"AQMDEVICEM",action:"$query",representation:"AQMDEVICEM",facet:"$query",endpoint:"x3.erp.SUPERV",parameters:{where:{value:"CODE eq {CODE}"}}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testPropertyHideShowDashboard:{$dashboardName:"testPropertyHideShowDashboard",$title:"PropertyHideShow test dashboard",$description:"Test different kinds of PropertyHideShow",$vignettes:{testLinkQueryRecordHS:{$uuid:"testDisplayQueryRecordHS",$displayStyle:"$link"},testLinkDetailsRecordHS:{$uuid:"testDisplayDetailsRecordHS",$displayStyle:"$link"},testLinkEditRecordHS:{$uuid:"testDisplayEditRecordHS",$displayStyle:"$link"},testLinkCreateRecordHS:{$uuid:"testDisplayCreateRecordHS",$displayStyle:"$link"},testDisplayQueryRecordHS:{$uuid:"testDisplayQueryRecordHS",$displayStyle:"$full"},testDisplayDetailsRecordHS:{$uuid:"testDisplayDetailsRecordHS",$displayStyle:"$full"},testDisplayEditRecordHS:{$uuid:"testDisplayEditRecordHS",$displayStyle:"$full"},testDisplayCreateRecordHS:{$uuid:"testDisplayCreateRecordHS",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"100px"},$widthXs:"3,3,3,3",$items:[{$bind:"testLinkQueryRecordHS"},{$bind:"testLinkDetailsRecordHS"},{$bind:"testLinkEditRecordHS"},{$bind:"testLinkCreateRecordHS"}]},{$layoutType:"row",displayOptions:{rowHeight:"300px"},$widthLg:"3,3,3,3",$widthSm:"6,6,6,6",$widthXs:"12,12,12,12",$items:[{$bind:"testDisplayQueryRecordHS"},{$bind:"testDisplayDetailsRecordHS"},{$bind:"testDisplayEditRecordHS"},{$bind:"testDisplayCreateRecordHS"}]}]}}},t.gadgets={testDisplayDetailsRecordHS:{$type:"$representation",$title:"Details facet",entity:"testPropertyHideShow",action:"$details",representation:"testPropertyHideShow",facet:"$details",keyParameter:"5"},testDisplayEditRecordHS:{$type:"$representation",$title:"Edit facet",entity:"testPropertyHideShow",action:"$edit",representation:"testPropertyHideShow",facet:"$edit",keyParameter:"5"},testDisplayCreateRecordHS:{$type:"$representation",$title:"Create facet",entity:"testPropertyHideShow",action:"$create",representation:"testPropertyHideShow",facet:"$create",keyParameter:"5"},testDisplayQueryRecordHS:{$type:"$representation",$title:"Query facet",entity:"testPropertyHideShow",action:"$query",representation:"testPropertyHideShow",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testAQTACTNPDashboard:{$dashboardName:"testAQTACTNPDashboard",$title:"AQTACTNP Facet Create",$description:"Test Facet Create AQTACTNP",$vignettes:{testAQTACTNPCreate:{$uuid:"testAQTACTNPCreate",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"500px"},$widthXs:"6,1",$items:[{$bind:"testAQTACTNPCreate"}]}]}}},t.gadgets={testAQTACTNPCreate:{$type:"$representation",$title:"Facet Create AQTACTNP",entity:"AQTACTNP",action:"$create",representation:"AQTACTNP",facet:"$create"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSyDevDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testSyDevDashboard:{$dashboardName:"testSyDevDashboard",$title:"Display Query AQMCRUDM from SyDev",$description:"Test different representations on SyDev",$vignettes:{testSyDev_QAQT02_Request:{$uuid:"testSyDev_QAQT02_Request",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$items:[{$bind:"testSyDev_QAQT02_Request",$size:"full"}]}]}}},t.gadgets={testSyDev_QAQT02_Request:{$type:"$request",$title:"Request QAQT02",requestName:"QAQT02",requestLevel:"99",action:"$query",endpoint:"x3.erp.SYDEV",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testGaugeChartDashboard:{$dashboardName:"testGaugeChartDashboard",$title:"Gauge chart test dashboard",$description:"Test different gauge charts authoring",$vignettes:{testGauge:{$uuid:"testGauge",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$widthMd:"3,3,3,3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesOp",$gauge:{}}]}},{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesOp",$gauge:{segments:[{propStart:0,propEnd:.75},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1}]}}]}},{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesValue",$gauge:{$bindMin:"salesValueMin",$bindMax:"salesValueMax",segments:[{propStart:0,propEnd:.75},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1}]}}]}},{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesValue",$gauge:{$bindMin:"salesValueMin",$bindMax:"salesValueMax",segments:[{valStart:1e5,valEnd:13e4,color:"#DF5353"},{valStart:13e4,valEnd:14e4},{valStart:14e4,valEnd:15e4,color:"#55BF3B"}]}}]}}]}]}}},t.gadgets={testGauge:{$type:"$representation",$title:"Gauge 1",entity:"testGaugeChart",action:"$details",representation:"testGaugeChart",facet:"$details"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testApplication",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/sdata/entities/test/example","syracuse-tablet/html/js/sdata/entities/test/testDatatypes","syracuse-tablet/html/js/sdata/entities/test/testFormats","syracuse-tablet/html/js/sdata/entities/test/testFormatsReference","syracuse-tablet/html/js/sdata/entities/test/testCharts","syracuse-tablet/html/js/sdata/entities/test/testConstraints","syracuse-tablet/html/js/sdata/entities/test/testNavigateTo","syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild","syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow","syracuse-tablet/html/js/sdata/entities/test/testGaugeChart","syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard","syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard","syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard","syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard2","syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard","syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard","syracuse-tablet/html/js/sdata/entities/test/testChartsDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2","syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2","syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard","syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard","syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard","syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard","syracuse-tablet/html/js/sdata/entities/test/testSyDevDashboard","syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard"],function(e,t,n){function M(e){e.gadgets&&Object.keys(e.gadgets).forEach(function(t){O.$gadgets[t]&&console.log("Duplicate gadget name: "+t),O.$gadgets[t]=e.gadgets[t]}),e.dashboards&&Object.keys(e.dashboards).forEach(function(t){O.$dashboards[t]&&console.log("Duplicate dashboard name: "+t),O.$dashboards[t]=e.dashboards[t]})}var r=e("syracuse-tablet/html/js/sdata/entities/clientContract"),i=e("syracuse-tablet/html/js/sdata/entities/test/example"),s=e("syracuse-tablet/html/js/sdata/entities/test/testDatatypes"),o=e("syracuse-tablet/html/js/sdata/entities/test/testFormats"),u=e("syracuse-tablet/html/js/sdata/entities/test/testFormatsReference"),a=e("syracuse-tablet/html/js/sdata/entities/test/testCharts"),f=e("syracuse-tablet/html/js/sdata/entities/test/testConstraints"),l=e("syracuse-tablet/html/js/sdata/entities/test/testNavigateTo"),c=e("syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild"),h=e("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow"),p=e("syracuse-tablet/html/js/sdata/entities/test/testGaugeChart"),d=e("syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard"),v=e("syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard"),m=e("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard"),g=e("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard2"),y=e("syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard"),b=e("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard"),w=e("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard"),E=e("syracuse-tablet/html/js/sdata/entities/test/testChartsDashboard"),S=e("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2"),x=e("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2"),T=e("syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard"),N=e("syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard"),C=e("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard"),k=e("syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard"),L=e("syracuse-tablet/html/js/sdata/entities/test/testSyDevDashboard"),A=e("syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard"),O={$application:{$uuid:"clientTestApplication",applicationName:"clientTestApplication",title:"Client test application",description:"Application for testing client features without server dependencies",iconName:"gears",$homeDashboard:{$uuid:"testHomeDashboard",dashboardName:"testHomeDashboard"}},$dashboards:{},$gadgets:{}};t.register=function(){r.registerEntity(i.entity),r.registerEntity(s.entity),r.registerEntity(o.entity),r.registerEntity(u.entity),r.registerEntity(a.entity),r.registerEntity(f.entity),r.registerEntity(l.entity),r.registerEntity(c.entity),r.registerEntity(h.entity),r.registerEntity(p.entity),M(d),M(v),M(m),M(g),M(y),M(b),M(w),M(E),M(S),M(x),M(T),M(N),M(C),M(k),M(L),M(A),r.registerApp(O)}}),define("syracuse-tablet/html/js/sdata/entities/welcomeApplication",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){function o(e){e.$vignettes={testLayoutsDashboard:{$uuid:"testLayoutsDashboard",$displayStyle:"$link"}},e.$article={$layoutType:"stack",$items:[{$layoutType:"row",displayOptions:{rowHeight:"150px"},$widthXs:"1",$items:[{$bind:"testLayoutsDashboard"}]}]},s.$gadgets={},e.$vignettes={},e.$article={$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Applications",$items:[]}]};var t=i.getValidApplications();return Object.keys(t).forEach(function(n){var r=t[n];if(r.applicationName!==s.$application.applicationName){var i="$welcome_"+r.applicationName,o={$type:"$application",$title:r.title,applicationName:r.applicationName},u={$uuid:i};s.$gadgets[i]=o,e.$vignettes[i]=u,e.$article.$items[0].$items.push({$bind:i,$size:"wide"})}}),e}var r=e("syracuse-tablet/html/js/sdata/entities/clientContract"),i=e("syracuse-tablet/html/js/helpers/globals"),s={$application:{$uuid:"$welcomeApplication",applicationName:"$welcomeApplication",title:"Welcome",description:"Welcome",iconName:"gears",$homeDashboard:{$uuid:"$welcomeDashboard",dashboardName:"$welcomeDashboard"}},$dashboards:{$welcomeDashboard:{$pageInfo:{isWelcomePage:!0,disableAuthoring:!0},$update:function(e){return o(e)},$dashboardName:"$welcomeDashboard",$title:"Welcome",$description:"Welcome, this is your personal dashboard"}},$gadgets:{testLayoutsDashboard:{$type:"$representation",$title:"Query facet",entity:"testDataTypes",action:"$query",representation:"testDataTypes",facet:"$query",keyParameter:"5"}}};t.register=function(){r.registerApp(s)}}),define("syracuse-tablet/html/js/init/initModules",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/appFactory","syracuse-tablet/html/js/application/appFactoryDeps","syracuse-tablet/html/js/controls/ctrlFactoryDeps","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdataCache","syracuse-tablet/html/js/helpers/templating","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/sdata/entities/test/testApplication","syracuse-tablet/html/js/sdata/entities/welcomeApplication"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/application/appFactory"),o=e("syracuse-tablet/html/js/application/appFactoryDeps"),u=e("syracuse-tablet/html/js/controls/ctrlFactoryDeps"),a=e("syracuse-tablet/html/js/ajax/ajax"),f=e("syracuse-tablet/html/js/storage/storage"),l=e("syracuse-tablet/html/js/sdata/sdataCache"),c=e("syracuse-tablet/html/js/helpers/templating"),h=e("syracuse-tablet/html/js/ui/modal"),p=e("syracuse-tablet/html/js/sdata/entities/test/testApplication"),d=e("syracuse-tablet/html/js/sdata/entities/welcomeApplication");t.init=function(){var e,t,n=new $.Deferred;return e=f.getStorage(),e.init().then(function(){t=new l.SDataCache(e)}).then(function(){i.init(!0,e,t,r);var n="/html";c.setTmplRoot(n)}).then(function(){return o.init()}).then(function(){return u.init()}).then(function(){return c.init()}).then(function(){a.init()}).then(function(){d.register()}).then(function(){i.isDvlpMode()&&p.register()}).then(function(){var e=s.createApplication($("#s-m-app-id"));i.setApplication(e),i.setModal(h)}).then(function(){n.resolve()}).fail(function(e){n.reject(e)}),n.promise()}}),define("syracuse-tablet/html/js/init/initLogin",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/init/initContext"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/helpers/locale"),o=e("syracuse-tablet/html/js/application/authentication"),u=e("syracuse-tablet/html/js/ui/modal"),a=e("syracuse-tablet/html/js/helpers/globals"),f=e("syracuse-tablet/html/js/helpers/logger").getLogger("main"),l=e("syracuse-tablet/html/js/helpers/notifications"),c=e("syracuse-tablet/html/js/sdata/sdataCommonResources"),h=e("syracuse-tablet/html/js/init/initContext"),p=function(e){var t=a.getApplication();t&&t.changePage("login",{reason:e})},d={notifLogin:function(e,t){var n=function(e){t?t.reject(e):r.modalError("notifLogin failed",e)};try{var i={$user:e.user.$value,$role:e.selectedRole.code,$lang:e.selectedLocale.code};a.setUserCtx(i),a.setUserProfile(e),s.setUserLocales(e&&e.user&&e.user.locales),h.init(!1,!1).then(function(){t&&t.resolve()}).fail(function(e){n(e)})}catch(o){n(o)}}};t.init=function(){l.subscribe(d,["sm.login"],1);try{return i.waitWheelStart(),o.check().then(function(e){return e.authenticated===!0?c.getUserProfile():null}).then(function(e){return i.waitWheelStop(),e?l.publish("sm.login",e):p("Please enter your credentials"),$.smResolve()}).fail(function(e){i.waitWheelStop(),o.logout().then(function(){p("Please try login again")}).fail(function(e){r.modalError("exports.init failed",e)})})}catch(e){return p("Javascript exception"),$.smResolve()}}}),define("syracuse-tablet/html/js/main",["require","exports","module","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/init/initStyles","syracuse-tablet/html/js/init/initLocale","syracuse-tablet/html/js/init/initModules","syracuse-tablet/html/js/init/initLogin"],function(e,t,n){function c(){return u.init().then(function(){return a.init()}).then(function(){return f.init()}).then(function(){return l.init()}).fail(function(e){o.modalError("_startup error",e)})}var r=e("syracuse-tablet/html/js/ui/modal"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/helpers/utils"),u=e("syracuse-tablet/html/js/init/initStyles"),a=e("syracuse-tablet/html/js/init/initLocale"),f=e("syracuse-tablet/html/js/init/initModules"),l=e("syracuse-tablet/html/js/init/initLogin");window.onerror=function(e,t,n,u){s.application?s.application.waitWheelStop():i.waitWheelStop();try{r.error("Javascript error",{where:"window.onerror",exception:u,message:e+"\n"+(t?"Url : "+o.cleanStack(t)+"\nLineNumber : "+n:"")})}catch(a){var f=e+"\n"+(u?+JSON.stringify(u,null,2):t?"Url : "+t+"\nLineNumber : "+n:"");alert(f)}},$(document).ready(function(){document.location.href.indexOf("?circular")>-1?xrayquire.showCycles(undefined,!0):c()})});