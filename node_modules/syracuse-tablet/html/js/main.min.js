"use strict";
/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */

/*!

 handlebars v2.0.0

Copyright (C) 2011-2014 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

define("syracuse-tablet/html/js/ui/uiUtils",["require","exports","module"],function(e,t,n){var r=function(e){if(e)while(e.firstChild)e.removeChild(e.firstChild)},i=function(e,t,n){if(e){var r=e.className;n?r.indexOf(t)<0&&(e.className=r+(" "+t)):e.className=r.replace(t,"")}},s={className:"waiting-circles",elements:8,radius:30,auto:!0},o=null,u=function(e,t){e==null&&(o==null&&(o=a($(document.body))),e=o),t?(e.$$bckg.show(),l(e.$$wheel,"enable")):(e.$$bckg.hide(),l(e.$$wheel,"disable"))},a=function(e,t){var n={$$bckg:$('<div class="waiting-background" style="display:none;z-index:2000"></div>'),$$wheel:$('<div class="waiting-wheel"  style="display:none;z-index:2000"></div>')};return n.$$bckg.appendTo(e),n.$$wheel.appendTo(e),c(n.$$wheel,s),n},f=function(e){e&&e.data("waiting")&&(e.waiting("destroy"),e.remove())},l=function(e,t){e&&e.data("waiting")&&(e.waiting(t),e[t==="disable"?"hide":"show"]())},c=function(e,t){if(!t)throw new Error("opts is mandatory");return e&&e.waiting(t),e},h=function(e){e&&(f(e.$$wheel),e.$$bckg&&e.$$bckg.remove())},p=function(e,t,n,r,i){if(!e)throw new Error("tag parameter is necessary !");var s=document.createElement(e);if(t)if($.isArray(t))$.each(t,function(e,n){s.className+=n+(e==t.length-1?"":" ")});else{if(typeof t!="string")throw new Error("classList parameter must be an array or a string");s.className+=t}s.textContent=n?n:"";if(e==="a"||e==="img")r=r||{},r.draggable="false";return r&&$.each(r,function(e,t){s.setAttribute(e,t)}),i&&(i.jquery?i=i.append(s):i.appendChild(s)),s},d=function(e,t){if(!e)return;var n=document.createTextNode(t||"");return e.jquery?e=e.append(n):e.appendChild(n),e},v=function(e,t){$.each(e,function(e,n){var r=p(e,n.classList,n.textContent,n.attr,t);n.children&&$.each(n.children,function(e,t){v(t,r)})})};t.empty=r,t.toggleClass=i,t.waitWheelStart=function(e){u(e,!0)},t.waitWheelStop=function(e){u(e,!1)},t.waitWheelCreate=a,t.waitWheelDestroy=h,t.waitPluginDestroy=f,t.waitPluginCreate=c,t.waitPluginDisable=function(e){l(e,"disable")},t.waitPluginEnable=function(e){l(e,"enable")},t.createDomElement=p,t.buildDom=v,t.appendTextNode=d,t.triggerResizeInternal=function(e){$(window).triggerHandler("resizeInternal",[e])}}),define("syracuse-tablet/html/js/helpers/winjs",["require","exports","module"],function(e,t,n){var r={},i=0,s=function(e){if(!e)return;var t;try{t=JSON.parse(e)}catch(n){return}if(!t.$uuid)return;var i=r[t.$uuid];if(!i)return;delete r[t.$uuid];if(!i.$deferred)return;t.$error?i.$deferred.reject(t.$error):i.$deferred.resolve(t.$data)},o=function(e,t,n,s){var o=$.Deferred();if(u()){i+=1;var a={$domain:e,$funcName:t,$uuid:""+i,$data:n,$execCallback:!s},f=JSON.stringify(a),l;s!==!0&&(l={$uuid:a.$uuid,$deferred:o},r[l.$uuid]=l),window.external.notify(f),s===!0&&o.resolve()}else o.reject({$message:"No WinJS container"});return o.promise()},u=function(){try{return"notify"in window.external}catch(e){return!1}};window&&(window.winjsCallbackHook=s),t.callWinJS=o,t.isAvailable=u}),define("syracuse-tablet/html/js/helpers/jsutils",["require","exports","module"],function(e,t,n){var r=function(e,t){var n=e.constructor;return n&&n.$smClasses?n.$smClasses.indexOf(t)>-1:!1},i=function(e){function n(e){var r=e&&e.constructor&&e.constructor.name;if(r&&r!=="Object"){t.push(r);var i=e.constructor.prototype&&e.constructor.prototype.__proto__;i&&n(i)}}var t=[];e.name&&(t.push(e.name),n(e.prototype.__proto__),e.$smClasses=t)},s=function(e){return e&&Error.prototype.toString===e.toString},o=function(e){return e&&e.constructor&&e.constructor.name==="DOMException"},u,a=function(e,t,n){if(Array.isArray(e))return e;var r=window.$sm;if(!r)return e;!u&&r&&r.baseLocation()&&(u={r1:new RegExp(r.baseLocation().withPath,"g"),r2:new RegExp(r.baseLocation().requirePath,"g")}),t=t==null?5:t;if(e){var i=e.split&&e.split("\n")||e,s;i.length>0&&i.forEach(function(e){var t=e.lastIndexOf(".js");if(t>0){var n=e.lastIndexOf("/",t);t>0&&(s||(s=[]),s.push(e.substring(n)))}else s||(s=[]),s.push(e)}),!s&&u?e=u?e.replace(u.r1,"").replace(u.r2,""):e:e=s.join("\n")}else e="";return e=e.split("\n"),t&&(s=[],e.forEach(function(e){e.indexOf(".js")>-1?t>0&&(s.push(e),t--):s.push(e)}),e=s.join(n?"<br>&nbsp&nbsp&nbsp&nbsp&nbsp":"\n")),e},f=function(e,t){s(e)&&t==null&&(t=e);if(t==null)return{$diagnoses:[{$severity:"error",$message:e}]};if(typeof t=="string")return{$diagnoses:[{$severity:"error",$message:t}]};if(s(t)||o(t))return{$diagnoses:[{$message:t.message,$stackTrace:a(t.stack),$severity:"error"}]};if(t.$diagnoses&&Array.isArray(t.$diagnoses))return t;var n={$diagnoses:[{}]},r=n.$diagnoses[0];r.$message=t.message||e,r.$severity="error";var i=t.detail;return i&&(s(i)?(i.message&&(r.$stackTrace=(r.$stackTrace?r.$stackTrace+"\n":"")+i.message),i.stack&&(r.$stackTrace=(r.$stackTrace?r.$stackTrace+"\n":"")+a(i.stack))):r.$stackTrace=(r.$stackTrace?r.$stackTrace+"\n":"")+JSON.stringify(i)),n};t.addInheritanceInfo=i,t.isInstanceOf=r,t.isError=s,t.cleanStack=a,t.convertToDiagnoses=f}),define("syracuse-tablet/html/js/helpers/logger",["require","exports","module","syracuse-tablet/html/js/helpers/winjs","syracuse-tablet/html/js/helpers/jsutils"],function(e,t,n){function o(e,t){if(t!==!0)return null;var n=function(){var t,n;for(var r=0;r<arguments.length;r++)i.isError(arguments[r])?(n||(n=[]),n.push(arguments[r])):(t||(t=["["+e+"]: "]),t.push(arguments[r]));t&&t.length>1&&s(t.join(" ")),n&&n.forEach(function(t){s("["+e+"]: "+t.message),t.stack&&s(i.cleanStack(t.stack))})};return n}var r=e("syracuse-tablet/html/js/helpers/winjs"),i=e("syracuse-tablet/html/js/helpers/jsutils"),s;r.isAvailable()?s=function(){var e=[];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);r.callWinJS("logger","log",{args:e},!0)}:s=function(){var e=[];for(var t=0;t<arguments.length;t++){var n=arguments[t];n!=null&&(i.isError(n)?console&&console.log&&console.log(n.message,"\n",i.cleanStack(n.stack)):e.push(n))}console&&console.log&&console.log(e.join(e," "))},window&&(window.logger=s),t.log=s,t.getLogger=o}),define("syracuse-tablet/html/js/helpers/globals",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("globals"),i,s={$user:"none",$role:"none",$lang:"none"},o={showUnfoundFields:!1},u={tabletApplication:null,userCtx:null,isTestEnvironment:!1,baseLocation:null,isDvlpMode:!1,isOffLineMode:!1,storage:null,cache:null,modal:null,cacheCtx:$.extend({},s),lookAndFeel:"windows",userProfile:{}},a=function(e){r&&r("Set user context");var t=e==null?$.extend({},s):e;return u.cache.setContext(t),u.cacheCtx=t,u.userCtx=t},f=function(e){if(!e)throw new Error("Null tabletApplication object");return r&&r("Set tablet Application object"),u.tabletApplication=e,e},l=function(e,t,n,r){u.isOffLineMode=!1,u.isDvlpMode=e;var i=u.baseLocation={};i.host=window.location.protocol+"//"+window.location.host;var s=window.location.pathname.split("/").splice(0,2).join("/");i.withPath=i.host+s,i.requirePath=i.host+"/requireJS"+s,i.htmlRoot=i.withPath+"/html",r&&(i.query=r.parseQueryString()),u.isTestEnvironment=window.location.href.indexOf("/syracuse-tablet/test/index.html")>-1,u.storage=t,u.cache=n};t.isLoggedIn=function(){return u.userCtx!=null&&u.userCtx.$user!=="none"},t.getUserCtx=function(){return u.userCtx},t.getGlobalCtx=function(){return u},t.getStorage=function(){return u.storage},t.getCache=function(){return u.cache},t.getCacheCtx=function(){return u.cacheCtx},t.getEmptyCacheCtx=function(){return s},t.getEndpoint=function(){var e=u.endpoint;return e},t.setEndpoint=function(e){u.endpoint=e},t.$config=function(e){return u.tabletApplication.$config(e)},t.setUserProfile=function(e){u.userProfile=e},t.getUserProfile=function(){return u.userProfile},t.getUserName=function(){var e=u.userProfile;return e&&e.user&&(e.user.firstName?e.user.firstName+" ":"")+e.user.lastName||"unknown"},t.getUserRole=function(){var e=u.userProfile;return e&&e.selectedRole&&e.selectedRole.description||""},t.getUserPhotoUrl=function(){var e=u.userProfile,t=e&&e.user&&e.user.photo;return t&&e.user.$shortUrl?e.user.$shortUrl+"/photo":!1},t.getCurrentPage=function(){return u.tabletApplication.currentPage},t.setTabletApplication=f,t.getApplication=function(){return u.tabletApplication},t.setUserCtx=a,t.setModal=function(e){u.modal=e},t.getModal=function(){return u.modal},t.isOffLineMode=function(){return u.isOffLineMode},t.baseLocation=function(){return u.baseLocation},t.isDvlpMode=function(){return u.isDvlpMode},t.getDvlpOpt=function(e){return u.isDvlpMode&&o[e]},t.isTestEnvironment=function(){return u.isTestEnvironment},t.setLookAndFeel=function(e){u.lookAndFeel=e},t.getLookAndFeel=function(){return u.lookAndFeel},t.getSiteLayout=function(){return u.siteLayout},t.setSiteLayout=function(e){u.siteLayout=e},t.setMetaData=function(e){i=e},t.getMetaData=function(){return i},t.ROWIDXPROP="~ROWIDX~",t.SINGLEARRAYPROP="~data~",t.ACTROWDETAIL="rowDetail",t.ACTROWDEL="rowDelete",t.ACTROWSEL="rowSelect",t.RECORDCLASS="s-m-record",t.init=l,window&&(window.$sm=t)}),define("syracuse-tablet/html/js/helpers/notifications",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("notifs"),i=e("syracuse-tablet/html/js/helpers/globals"),s="sm",o={},u=function(e){throw r&&r("Error",e),typeof e=="string"?new Error("Notification - "+e):e},a=function(e,t,n){return setTimeout(function(){e.apply(t,n)},0)},f=function(e){try{if(!e)throw new Error("No topic to publish");var e=typeof e=="string"?[e]:e;r&&r("Publish "+e.join(" - "));var t,n,n,i,s=0,f,l,t=arguments;e.forEach(function(e){f=o[e];if(f){f=f.slice();for(var r=0,u=f.length;r<u;r++)n=f[r],n.object?(l||(l=Array.prototype.slice.call(t,1)),i=a(n.callBack,n.object,l)):(t[0]=e,i=a(n.callBack,null,t)),s++}})}catch(c){u(c)}},l=function(e,t){try{if(!e)throw new Error("No topic to publish");var e=typeof e=="string"?[e]:e;r&&r("Publish "+e.join(" - "));var n,i,i,s,f=0,l,c=t&&t.exclude||[],h,n=arguments;e.forEach(function(e){l=o[e];if(l){l=l.slice();for(var t=0,r=l.length;t<r;t++)i=l[t],i.object?(!c||c.indexOf(i.object))<0&&(h||(h=Array.prototype.slice.call(n,2)),s=a(i.callBack,i.object,h)):(n[0]=e,s=a(i.callBack,null,n)),f++}})}catch(p){u(p)}},c=function(e,t,n){t||u("No topic to publish"),e||u("Null object"),n=n||10;var t=typeof t=="string"?[t]:t;r&&r("Subscribe "+t.join(" - ")+" - priority="+n),t.forEach(function(t){var r,i;if(typeof e=="function")r=e,i=null;else{i=e;var a=t.split(".");a[0]!=s&&u("Bad event domain name"),a=$.camelCase("notif-"+a.splice(1).join("-")),r=e[a],r||u("Object must implement "+a)}var f=!1;o[t]||(o[t]=[]);var l={callBack:r,object:i,priority:n};for(var c=o[t].length-1;c>=0;c--)if(o[t][c].priority<=n){o[t].splice(c+1,0,l),f=!0;break}f||o[t].unshift(l)})},h=function(e,t){t?typeof t=="string"&&(t=[t]):t=Object.keys(o);var n=typeof e=="function"?"callBack":"object";t.forEach(function(t){var r=o[t];if(r)for(var i=0,s=r.length;i<s;i++)if(e==null||r[i][n]===e)r.splice(i,1),i--,s--})},p=function(e,t){r&&r("Reset"),h(null,null)},d=function(e){var t={},n=typeof e=="function"?"callBack":"object";return Object.keys(o).forEach(function(r){if(e==null)t[r]=o[r].length;else{t[r]=0;var i=o[r];for(var s=0,u=i.length;s<u;s++)i[s][n]===e&&(t[r]=t[r]+1)}}),t},v=function(e,t){try{if(!e)throw new Error("_pageNotify - Unexpected empty event");if(typeof e!="string")throw new Error("_pageNotify - string event expected");r&&r("PageNotify "+e);var n;t!==null?n=Array.prototype.slice.call(arguments,2):(t=i.getCurrentPage(),n=Array.prototype.slice.call(arguments,1));if(!t)throw new Error("_pageNotify - Unexpected null page");var s=o[e];if(s){for(var f=0,l=s.length;f<l;f++)if(s[f].object===t)return a(s[f].callBack,t,n)}else console.log("_pageNotify - No sunsciption for event "+e)}catch(c){u(c)}};t.check=d,t.reset=p,t.subscribe=c,t.unsubscribe=h,t.publish=f,t.publishEx=l,t.pageNotify=v}),define("syracuse-tablet/html/js/helpers/utils",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/jsutils"],function(e,t,n){function L(e,t){return function(){return e.apply(t,arguments)}}var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("report",!0),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/helpers/jsutils"),u=function(e,t,n){function r(e,t){for(var n in t||{}){var r=t[n];typeof r.get=="function"||typeof r.set=="function"?Object.defineProperty(e,n,r):e[n]=r}}return t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e,r(e.prototype,n),o.addInheritanceInfo(e),e},a=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},f=function(){var e=new Date,t=[e.getFullYear(),4,e.getMonth()+1,2,e.getDate(),2,e.getHours(),2,e.getMinutes(),2,e.getSeconds(),2],n;for(var r=0;r<t.length;r+=2){var i=""+t[r];while(i.length<t[r+1])i="0"+i;n?n+="-"+i:n=i}return n},l=0,c=function(e){return e.replace(/([^\w-_])/g,"_")},h=0,p=function(){return c($.camelCase((arguments.length>0?Array.prototype.join.call(arguments,"-")+"-":"")+h++))},d={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","querystring","anchor"],q:{name:"query",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},v=function(e){var t=d,n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=decodeURIComponent(i))}),r},m=function(e){if(!e)return"";var t=e.protocol+"://"+e.host;e.port.length!=0&&(t+=":"+e.port),t+=e.path;var n="";for(var r in e.query)n.length!=0&&(n+="&"),n+=r+"="+encodeURIComponent(e.query[r]);return n.length!=0&&(t+="?"+n),e.anchor&&(t+="#"+e.anchor),t},g=/([^&=;]*)=?([^&;]*)/g,y=function(e){e=e||window.location.search;var t={},e=decodeURIComponent(e),n=e.indexOf("?");return n>=0&&(e=e.substring(n+1)),e.replace(g,function(e,n,r){n&&n.length>0&&(t[n]=decodeURIComponent(r))}),t},b=function(e){return $("<div/>").text(e).html()},w=function(e){return $("<div/>").html(e).text()},E=function(e){if(e==null)return;e.jquery&&(e.unbind(),e.undelegate(),e.off(),e.remove(),e.smPageRemoveController&&e.smPageRemoveController()),s.unsubscribe(e)},S=/\{(.*?)\}/g,x=function(e,t,n,r){r=r||0,e=(e||"")+"";var i=null,s=e.replace(S,function(e,i){var s=t==null?null:t.getValue?t.getValue(i):t[i];return s!=null?s:n?i.smStartsWith("@")?n.localization(i):(s=n.data(i,t),s!=null&&s.indexOf("{")>=0?x(s,t,n,r+1):s==null?"":s):""});return s||""};t.isOnline=function(){return navigator.onLine},t.isDesktop=function(){var e=navigator.userAgent,t=e.match(/(iphone|ipod|ipad)/)||e.match(/(android)/i)||e.match(/(iemobile)/)||e.match(/iphone/i)||e.match(/ipad/i)||e.match(/ipod/i)||e.match(/blackberry/i)||e.match(/bada/i);return!t};var T=function(e){return e+="",e.indexOf("{")>=0?e.slice(1,e.length-1):e},N=function(e,t,n){if(t==null||e==null)return null;if(n&&n._cachePath&&n._cachePath[t]!=null)return n._cachePath[t];Array.isArray(t)||(t=t.split("."));var r=e[t[0]];for(var i=1;i<t.length;i++){if(r==null)return null;if(!$.isPlainObject(r)==null)throw new Error("_getPropByPath - Unexpected non-plainobject");r=r[t[i]]}return n&&(n._cachePath||(n._cachePath={}),n._cachePath[t]=r),r},C=function(e,t){var n=i.getApplication();if(n.currentPage&&n.currentPage.isDashboard()){var r=e.closest(".s-m-control.s-m-vignette"),s=r.attr("id");if(!t||s!=null&&s.length!==0){var o=n.currentPage.getControl(s);if(t&&!o)throw new Error("Vignette not found - id["+s+"]");return o}throw new Error("Vignette DOM elmt not found")}if(t)throw new Error("Current page is not a dashboard");return null},k=function(e,t){var n=i.getApplication(),r=C(e,n,!0),s=r.getPageControl(t);return s?{control:s,vignette:r}:null},A=function(e,t,n){if(e==null)return n===!0;if(e.angle==null)throw new Error("this is not a hammer.js event");return e.angle>45&&e.angle<135||e.angle<-45&&e.angle>-135?t=="v":t=="h"},O=function(e){return e.shiftKey!==!0&&e.altKey!==!0},M=(new Date).getTime(),_={ajax:!1,page:!1,pageLoader:!1},D=u(function(e,t){this.type=e,this.id=t},null,{log:function(e){var t=(new Date).getTime(),n=this._prevTime==null?0:t-this._prevTime;this._prevTime=t},start:function(e){this._start=(new Date).getTime(),this.log(e?"start "+e:"start")},step:function(e){this.log(e)},stop:function(e){this.log(e?"stop "+e:"stop")},reset:function(){return this._prevTime=null,this._start=null,this}}),P=function(e,t,n){try{if(n===!1)return;if(n!==!0&&_[e]!==!0)return null;if(e.indexOf("page")===-1&&t!=null){t+="";var r=t.indexOf("representation=");if(r>=0)t=t.substr(r+15);else{var r=t.indexOf("x3/erp/");if(r>=0)t=t.substr(r+7);else{var r=t.indexOf("collaboration/syracuse/");t=t.substr(r+23)}}t=decodeURIComponent(t)}return new D(e,t)}catch(i){console.log(i)}},H=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},B=function(e,t,n){if(n?e===t:e==t)return!0;if(e==null||t==null)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!B(e[r],t[r]))return!1;return!0}if(typeof e!="object"||typeof t!="object")return!1;var i=$.extend({},e);$.extend(i,t);for(var r in i)if(H(i,r)){var s=e[r],o=t[r];if(!B(s,o))return!1}return!0};t.areEqual=B,t.stopClickEvent=O,t.isEvtDirection=A,t.extractCode=T,t.UUID=a,t.defineClass=u,t.readableuid=p,t.domId=c,t.parseQueryString=y,t.parseURL=v,t.urlToString=m,t.htmlEncode=b,t.htmlDecode=w,t.getCurISODateTime=f,t.unbindObj=E,t.parseExpression=function(e,t,n){return x(e,t,n,0)},t.getPropByPath=N,t.findParentVignette=C,t.findCtrlInDashboard=k,t.bindFn=L,t.report=r,t.getTimeLine=P}),define("syracuse-tablet/html/js/ajax/ajaxInterface",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){function u(){}function c(e,t){var n=t.responseJSON;if(!n)try{n=JSON.parse(t.responseText)}catch(r){}var i=n&&n.$diagnoses&&n.$diagnoses[0],u=i&&i.$links&&i.$links.$redirect;if(!u){e.resolve(t);return}s.getApplication().gotoLogin(o.text("login.timeout.message"))}var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("ajax"),i=e("syracuse-tablet/html/js/helpers/utils"),s=e("syracuse-tablet/html/js/helpers/globals"),o,a={200:"Ok",201:"Created",400:"Bad Request",401:"Unauthenticated",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request URI Too Long",415:"Unsupported Media Type",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"},f=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,l=i.defineClass(u,null,{ajax:function(e,t,n,o,u){var l=$.Deferred();try{e=e?e.toUpperCase():"GET";if(e==="GET"&&n){t.indexOf("?")===-1&&(t+="?");var h=[];for(var p in n)n[p]!=null&&h.push(encodeURIComponent(p)+"="+encodeURIComponent(n[p].toString()));t+=h.join("&")}u=u||{};var d=function(){try{var h={Accept:"application/json;vnd.sage=syracuse"};o&&$.extend(h,o);var p={headers:h,type:e,url:t,timeout:u.timeout==null?0:u.timeout};if(["PUT","POST"].indexOf(e)>=0&&n!=null){p.contentType=u.contentType||"application/json;charset=utf-8";if(p.contentType.indexOf("application/json")>=0&&typeof n=="object")try{n=JSON.stringify(n)}catch(d){throw new Error("Error parsing send data\nurl: "+t)}p.data=n}var v=i.getTimeLine("ajax",t);v&&v.start("send");var m=h.Accept.indexOf("application/json")>=0&&u.noJsonParsing!==!0;m&&(p.dataType="json"),r&&r("'"+e+"':"+t);var g=$.ajax_original||$.ajax,y=g(p);y.complete(function(e,t){try{v&&v.step("completed");var n=e.status!=null?e.status:t=="success"?200:500,r={textStatus:t,status:n,descrHttpStatus:a[n]||"unknown: "+n,isSuccess:n>=200&&n<300||n===304,headers:{}};m?r.responseJSON=e.responseJSON:r.responseText=e.responseText;var i,s=e.getAllResponseHeaders();if(s)while(i=f.exec(s))r.headers[i[1].toLowerCase()]=i[2];n===401&&u.dontCatchHttp401!==!0?c(l,r):l.resolve(r)}catch(o){l.reject(o);return}})}catch(d){s.getModal().error("ajax.doAjax error",d,function(){l.resolve(d)})}finally{return y}};d()}catch(v){s.getModal().error("ajax error",v,function(){l.reject(v)})}finally{return l.promise()}}});t.AjaxInterfaceClass=l,t.init=function(e,t){o=t,e=e||{},$.ajaxSetup({timeout:e.timeout==null?2e4:e.timeout,async:!0})}}),define("syracuse-tablet/html/js/ajax/ajaxWinJS",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/winjs"],function(e,t,n){function o(){}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/winjs"),s,u=r.defineClass(o,null,{ajax:function(e,t,n,r,s){var o=$.Deferred();e=e||"GET";var u={Accept:"application/json;vnd.sage=syracuse"};r&&$.extend(u,r);var a={$method:e||"GET",$url:t,$send:n,$headers:u,$options:s};return i.callWinJS("winjsAjax","ajax",a).then(function(e){var t={status:e.$status,location:e.$headers&&e.$headers.location||""};e.$succeeded?o.resolve(e.$data,t):o.reject(e.$status,t)}).fail(function(e){o.reject(500,{})}),o.promise()}});t.AjaxInterfaceClass=u,t.init=function(e,t){}}),define("syracuse-tablet/html/js/ajax/ajax",["require","exports","module","syracuse-tablet/html/js/helpers/winjs","syracuse-tablet/html/js/ajax/ajaxInterface","syracuse-tablet/html/js/ajax/ajaxWinJS"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/winjs"),i=e("syracuse-tablet/html/js/ajax/ajaxInterface"),s=e("syracuse-tablet/html/js/ajax/ajaxWinJS"),o;t.getAjax=function(){return o||(r.isAvailable()?o=new s.AjaxInterfaceClass:o=new i.AjaxInterfaceClass),o},t.init=function(e,t){r.isAvailable()?s.init(e,t):i.init(e,t)}}),define("syracuse-tablet/html/js/helpers/locale",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ajax/ajax"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,s=null,o={},u="$datetimeInformation",a="$decimalInformation",f,l=/\{([\w-]+)\}/g,c="*",h={},p={},d=function(e,t){var n=o&&o[s];if(!n)return;var r=n[e]||"Resource key not found["+e+"]";return t&&(r=r.replace(l,function(e,n){var r=+n;return r>=0&&r<t.length?t[r]:"?"})),r},v=function(e){var t=o&&o[s];if(!t)return;return t[e]},m=function(){var e=o&&o[s];if(!e)return;return e[u]},g=function(){var e=o&&o[s];if(!e)return;return e[a]},y=function(e,t){var n=new $.Deferred;f=t;var i=r.getUserCtx();c=i&&i.$user||"*",h=p[e]||{};var l=o&&o[e];return l?(s=e,n.resolve()):e===s?n.resolve():b("/syracuse-tablet/html/js/resources","strings",e,"en").then(function(t){s=e,o[e]=t}).then(function(){return b("/syracuse-tablet/html/js/resources/locales","date",e,"en-GB")}).then(function(t){o[e][u]=t}).then(function(){return b("/syracuse-tablet/html/js/resources/locales","decimal",e,"en-GB")}).then(function(t){o[e][a]=t}).then(function(){n.resolve()}).fail(function(e){n.resolve()}),n.promise()},b=function(e,t,n,r){function u(){if(o.length===0){var n=e+"/"+t+"-"+r+".json";i("GET",n,null,null).then(function(e){e&&e.responseJSON&&s.resolve(e.responseJSON),s.resolve({})}).fail(function(e){s.reject(e)})}else{var a=o.join("-"),n=e+"/"+t+"-"+a+".json";i("GET",n,null,null).then(function(e){e&&e.responseJSON?s.resolve(e.responseJSON):e.status===404?(o.pop(),u()):s.reject(e.textStatus+" - "+e.status)}).fail(function(e){s.reject(e)})}}var s=new $.Deferred,o=n.split("-");return u(),s.promise()},w=function(e,t){return!e||!s?!1:s===e?!0:t?!1:e.split("-")[0]===s};t.getDateFormat=function(){var e=m();return h.shortDate||e&&e.formatPatterns&&e.formatPatterns.shortDate||"dd/MM/yyyy"},t.getDateTimeFormat=function(){var e=m(),t=h.shortDate||e&&e.formatPatterns&&e.formatPatterns.shortDate||"dd/MM/yyyy",n=h.shortTime||e&&e.formatPatterns&&e.formatPatterns.shortTime||"HH:mm:ss";return t+" "+n},t.getTimeFormat=function(){var e=m();return h.longTime||e&&e.formatPatterns&&e.formatPatterns.longTime||"HH:mm:ss"},t.getTimeFormatShort=function(){var e=m();return h.shortTime||e&&e.formatPatterns&&e.formatPatterns.shortTime||"HH:mm"},t.getNumberFormat=function(e){return e==="application/x-integer"?"#,##0":"#,##0.##"},t.getNumberGroupSeparator=function(){var e=g(),t=h.numberGroupSeparator||e&&e.numberGroupSeparator||",";return t},t.getNumberDecimalSeparator=function(){var e=g(),t=h.numberDecimalSeparator||e&&e.numberDecimalSeparator||".";return t},t.setLocale=y,t.text=d,t.textOpt=v,t.isCurrent=w,t.getDatetimeInfo=m,t.getCurrentLocale=function(){return s},t.getCurrentLocaleHash=function(){return s+"#"+c},t.setUserLocales=function(e){p={},e&&e.forEach(function(e){p[e.code]={shortDate:e.shortDate,shortTime:e.shortTime,longTime:e.longTime,numberDecimalSeparator:e.numberDecimalSeparator,numberGroupSeparator:e.numberGroupSeparator}})}}),define("syracuse-tablet/html/js/ui/modalDiagnoses",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/locale"),s=' 	<div class="modal fade" id="modal-error" tabindex="-1" role="dialog"> 		<div class="modal-dialog s-m-modal-layout s-m-modal-diagnoses">			<header>				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 			</header>			<section>				<div class="s-m-modal-content row">					<div class="col-md-3"></div>					<div class="col-md-1"> 						<a draggable="false" name="prev" href="#" class="glyphicon glyphicon-chevron-left" style="padding-top: 1em; font-size:30px;"></a> 					</div> 					<div class="col-md-4"> 						<header class="{{severity}}">{{title}}</header> 						{{#each diags}} 							<message id="s-m-msg-block-{{id}}" role="alert" style="display:{{this.display}}"> 								<label class="label label-{{this.severity}}">{{this.severityLabel}}</label> 								<div style="white-space: pre-line;">{{this.message}}</div> 								{{#if stack}} 									<a draggable="false" name="more" href="#">{{../../stackShow}}</a> 									<stack name="stack" style="display: none;">{{this.stack}}</stack> 								{{/if}} 							</message> 						{{/each}} 						<footer> 							<button type="button" class="btn btn-default pull-right" data-dismiss="modal">{{close}}</button> 						</footer> 					</div> 					<div class="col-md-1"> 						<a draggable="false" name="next" href="#" class="glyphicon glyphicon-chevron-right" style="padding-top: 1em; font-size:30px;"></a> 					</div> 					<div class="col-md-3"></div> 				</div> 			</section> 		</div> 	</div>';t.show=function(e,t,n){function o(){$("#s-m-msg-block-"+d,m).css("display","none"),d++,$("#s-m-msg-block-"+d,m).css("display","block"),f()}function u(){$("#s-m-msg-block-"+d,m).css("display","none"),d--,$("#s-m-msg-block-"+d,m).css("display","block"),f()}function a(){var e=$(this),t=$("[name=stack]",e.parent());t.css("display")==="none"?(t.css("display","block"),e.text(i.text("modal.diagnoses.btnstack_hide"))):(t.css("display","none"),e.text(i.text("modal.diagnoses.btnstack_show")))}function f(){d>=p-1?$("[name=next]",m).css("display","none"):$("[name=next]",m).css("display","block"),d<=0?$("[name=prev]",m).css("display","none"):$("[name=prev]",m).css("display","block"),p>1&&$(".s-m-modal-content header",m).text(e+" ("+(d+1)+"/"+p+")")}var l=r.getModal(),c={close:i.text("modal.btn.close"),stackShow:i.text("modal.diagnoses.btnstack_show"),severity:"info",diags:[]},h=Handlebars.compile(s),p=0,d=0;t.$diagnoses.forEach(function(e){var t;e.$severity==="success"||e.$severity==="info"||e.$severity==="warning"?t=e.$severity:(t="danger",c.severity="error"),c.diags.push({id:p,display:p===0?"block":"none",message:e.$message,severity:t,severityLabel:i.text("severity."+t),stack:e.$stackTrace}),p++}),e=e||(c.severity==="error"?i.text("modal.error.ttl"):i.text("modal.info.ttl")),c.title=e;var v=h(c),m=l.modal(v,n);return f(),$("[name=prev]",m).click(u),$("[name=next]",m).click(o),$("[name=more]",m).click(a),m}}),define("syracuse-tablet/html/js/ui/modal",["require","exports","module","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/ui/modalDiagnoses"],function(e,t,n){var r=e("syracuse-tablet/html/js/ui/uiUtils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/helpers/jsutils"),u=e("syracuse-tablet/html/js/ui/modalDiagnoses"),a=function(e){return e?e.replace(/\n/g,"<br>"):""},f={confirm:' 		<div class="modal fade" id="modal-confirm" tabindex="-1" role="dialog"> 			<div class="modal-dialog s-m-modal-layout">				<header>					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 				</header>				<section>					<div class="s-m-modal-content row">						<div class="col-md-4"></div>						<div class="col-md-4">							<header>{{title}}</header>							<section>{{message}}</section>							<footer>								<button type="button" class="btn btn-default" data-action="yes">{{yes}}</button> 				                <button type="button" class="btn btn-default" data-action="no">{{no}}</button> 							</footer>						</div>					<div class="col-md-4"></div>				</div>				</section>			</div> 		</div>',error:' 		<div class="modal fade" id="modal-error" tabindex="-1" role="dialog"> 			<div class="modal-dialog s-m-modal-layout">				<header>					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 				</header>				<section>					<div class="s-m-modal-content row">						<div class="col-md-4"></div>						<div class="col-md-4">							<header class="error">{{title}}</header>							<section>{{body}}</section>							<footer><button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button></footer>						</div>						<div class="col-md-4"></div>					</div>				</section>			</div> 		</div>',info:'		<div class="modal fade" id="modal-info" tabindex="-1" role="dialog"> 		    <div class="modal-dialog s-m-modal-layout">		    	<header>		    		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 		    	</header>		    	<section>		    		<div class="s-m-modal-content row">			    		<div class="col-md-4"></div>			    		<div class="col-md-4">			    			<header class="info">{{title}}</header>			    			<section>{{body}}</section>			    			<footer><button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button></footer>			    		</div>			    		<div class="col-md-4"></div>		    		</div>		    	</section>			</div> 		</div>',field:'		<div class="modal fade" id="modal-field" tabindex="-1" role="dialog"> 		    <div class="modal-dialog"> 				<div class="modal-content"> 				    <div class="modal-header"> 						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button> 						<h4 class="modal-title" id="myModalLabel">{{title}}</h4> 				    </div> 				    <div class="modal-body"> 				       {{{body}}} 				    </div> 				    <div class="modal-footer"> 				        <button type="button" class="btn btn-default" data-dismiss="modal">{{close}}</button> 					</div> 				</div> 			</div> 		</div>',actionMessage:'		<div class="s-m-act-msg {{severityClass}}">			<a draggable="false" href="#"><span class="glyphicon glyphicon-remove"></span></a>			<header>				<div>{{title}}</div>			</header>			<section>				<article>{{message}}</article>			</section>			<footer></footer>		</div>'},l=function(e,t){var n=e+"compiled",r=f[n];return r||(r=f[n]=Handlebars.compile(f[e])),r(t)},c=function(e,t,n){if(!e||arguments.length==0)return;var e=arguments[0],r=Array.prototype.slice.call(arguments,1);e.apply(null,r)},h=function(e,t,n){var r;return r=o.convertToDiagnoses(e,t),p(e,r,n)},p=function(e,t,n){return u.show(e,t,n)},d=function(e,t,n){return u.show(e,{$diagnoses:[{$severity:"info",$message:t}]},n)},v=function(e,t){return w("confirm",{title:i.text("modal.confirm.ttl"),message:a(i.text("modal.confirm.msg",[e])),yes:i.text("yes"),no:i.text("no")},function(e,n,r){t&&(e==="yes"||e==="no")&&c(t,"yes"===e)})},m=function(e,t){return w("confirm",{message:a(e),yes:i.text("yes"),no:i.text("no")},function(e,n,r){t&&(e==="yes"||e==="no")&&c(t,"yes"===e)})};t.simpleConfirmPromise=function(e){var t=$.Deferred();return w("confirm",{message:a(e.message),yes:i.text("yes"),no:i.text("no")},function(e,n,r){(e==="yes"||e==="no")&&t.resolve({action:e})}),t.promise()};var g=function(e,t,n){return w("field",{close:i.text("modal.btn.close"),title:e||"Warning",body:t},n)},y=function(e,t){if(!t||!t.$diagnoses||t.$diagnoses.length==0)return;var n=!1,r=!1,i=[];t.$diagnoses.forEach(function(e){i.push(e.$message),e.$severity=="error"&&(r=!0,n=n||e.$stackTrace!=null)});if(!n){var o={title:e,body:i.join("\n"),severityClass:r?"error":"success",$$parentSlot:s.getApplication().getMessageSlot()};b(o)}else p(e,t)},b=function(e){function s(){r.toggleClass("show")}function o(){s(),setTimeout(function(){r.remove(),e.$$parentSlot.children().length==0&&e.$$parentSlot.hide()},500)}var t=l("actionMessage",{title:e.title,message:e.body,severityClass:e.severityClass}),n,r=$(t);e.$$parentSlot.prepend(r),e.$$parentSlot.show();var i=r.find("a");i.bind("click",function(){o(),n=!0}),setTimeout(function(){s()},50);var u=setTimeout(function(){n||o()},5e3)},w=function(e,t,n){var r=l(e,t);return E(r,n)},E=function(e,t){r.waitWheelStop();var n=s.getApplication();n&&n.currentPage&&n.currentPage.waitWheelStop();var i=$(e).modal({keyboard:!1,backdrop:"static"}),o=$(window).height();$(".modal-body",i).css("max-height",o*.7);var u=!1;return i.on("shown.bs.modal",function(){try{c(t,"shown.bs.modal",i)}catch(e){alert("Modal open - call back error"+e.stack)}n.notifModalOpen()}),n.notifModalClose(),i.on("hide.bs.modal",function(){n.notifModalClose();if(!u&&t)try{c(t,"hide.bs.modal",i)}catch(e){alert("Modal close - call back error"+e.stack)}i.unbind(),i.remove()}),i.delegate("button[data-action]","click",function(e){var n=$(e.target),r=n.attr("data-action");r&&(u=!0,e.preventDefault(),e.stopPropagation(),c(t,r,i,n.attr("data-params"))),i.modal("hide")}),i};t.notify=function(e){e.$$parentSlot=e.$$parentSlot||s.getApplication()&&s.getApplication().getMessageSlot(),b(e)},t.error=h,t.info=d,t.diagnoses=p,t.field=g,t.confirm=v,t.simpleConfirm=m,t.modal=E,t.actionResult=y}),define("syracuse-tablet/html/js/init/initStyles",["require","exports","module","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){function i(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)}function s(){var e=/iphone|ipad|ipod|android|blackberry|mini|windows|palm/i.exec(navigator.userAgent.toLowerCase()),t={iphone:"ios",ipad:"ios",ipod:"ios",android:"android",windows:"windows"};return $.smUrlParam("forceLookAndFeel")||t[e||"windows"]||"windows"}function o(){return document.location.href.indexOf("index.html")>-1}var r=e("syracuse-tablet/html/js/helpers/globals");t.init=function(){var e=new $.Deferred,t=s(),n="./css/gen/"+t+(o()?".min":"")+".css";i(n);var u="./css/default.css";return i(u),e.resolve(),r.setLookAndFeel(t),e.promise()}}),define("syracuse-tablet/html/js/init/initLocale",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/locale");t.init=function(){var e="en-GB";return r.setLocale(e)}}),define("syracuse-tablet/html/js/application/gadget",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=r.defineClass(function(e){var t=this;t._data=e},null,{destroy:function(){var e=this;e._data=null},isRequest:function(){return this._data.$type==="$request"},data:function(e){return this._data?this._data[e]:null},getEndPoint:function(){return this._data.endpoint||i.getEndpoint()},isDefaultEndpoint:function(){return!this._data.endpoint},getPageName:function(){var e=this;if(!e.isValid())return null;var t=e.isRequest()?e.getRequestRepresentation():e._data.representation;return e.getEndPoint()+"."+t+"."+e._data.facet},getSDataUrl:function(e){var t=this,n;switch(t._data.$type){case"$representation":["$details","$edit"].indexOf(t._data.action)>-1?n=e.data("$url",{$key:t._data.keyParameter}):["$create"].indexOf(t._data.action)>-1?(n=e.data("$url"),n=n.replace(/\((.*?)\)/,"/$template")):n=e.data("$url");break;case"$request":n=e.data("$baseUrl"),n=n+"/QUERY('"+t._data.requestName+"')?representation="+t.getRequestRepresentation()+".$query"}return n},getRequestRepresentation:function(){return"QUERY~"+this._data.requestName+"~"+this._data.requestLevel},getJSON:function(){return $.extend(!0,{},this._data)},isValid:function(){return this.getInvalidReason()==null},getInvalidReason:function(){var e=this._data.$type;return e==="$representation"||e==="$stats"||e==="$request"?this._data.$uuid.smStartsWith("test")?null:(this.getEndPoint()||"").trim().length==0?"No endpoint":null:null},getParameters:function(){return this._data.parameters||{}}});t.Klass=s}),define("syracuse-tablet/html/js/sdata/sdataUtils",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=["$isMandatory","$isReadOnly","$isHidden","$isExcluded","$isDisabled","$actions","$format"],o=/^(.*)\(\'(.*)\'\)$/i,u=function(e){var t=r.parseURL(e);if(t.query&&t.query.representation){t.representation=t.query.representation,t.facet=null;var n=t.representation.indexOf(".");n!=-1&&(t.facet=t.representation.substr(n+1),t.facet.charAt(0)=="$"&&(t.facet=t.facet.substr(1)),t.representation=t.representation.substr(0,n))}var i;if(t.directory){var s=t.directory.indexOf("/$services/");s>-1&&(t.$services=t.directory.substring(s+11)),i=t.directory.split("/")}if(i==null||i.length<=4)throw new Error("Bad sdata url:"+e);t.dispatch=i[1],t.application=i[2],t.contract=i[3],t.dataset=i[4];if(i.length===4)return t;var u=o.exec(i[5]);return u&&u.length==3?(t.entity=u[1],t.id=u[2],t.id&&t.id.trim().Length===0&&(t.id=null)):(t.entity=i[5],t.id=null),i.length===5?t:t},a=function(e,t){e=t?t.parseExpression(e):e;var n=u(e);if(n.entity==="$mobileDashboards"){var i={page:n.query.dashboard+".$mobileDashboard"};return n.query.parameters&&(i.parameters=r.parseExpression(n.query.parameters,t)),i}if(n.query.representation){var s=n.application+"."+n.contract+"."+n.dataset,i={page:s+(n.query.representation?"."+n.query.representation:""),sDataUrl:e};return n.$services&&(i.$services=n.$services),i}throw new Error("getLinkInfo - Unexpected empty representaion in ul "+e)},f=function(e,t){typeof e=="string"&&(e=a(e,t));if(e.type==="navig")return'data-nav="'+e.page+'" data-sdata-url="'+encodeURIComponent(e.sDataUrl)+'"';if(e.type==="act")return'data-action="'+e.action+'" data-params="'+encodeURIComponent(e.params||"")+'"';throw new Error("_getLinkAttrs - unknonwn type\n"+e.type)},l=function(e){return e.$stackTrace&&e.$stackTrace.indexOf("node_modulessyracuse-x3")>=0&&(e.$message&&e.$stackTrace.indexOf(e.$message)>=0?delete e.$stackTrace:e.$stackTrace=e.$stackTrace.split("\n")[0]),e},c=function(e){var t=[],n=[],r=function(e,i,s){s||(s=[]);if(n.indexOf(e)>=0)return;if(Array.isArray(e))n.push(e),i&&s.push(i),e.forEach(function(e,t){r(e,t+"",s)}),i&&s.pop(i);else if($.isPlainObject(e)){n.push(e);for(var o in e)o==="$diagnoses"?e[o].forEach(function(e){var n=[].concat(s);i&&n.push(i),o&&n.push(o),e=l($.extend({},e)),e.$path=n.join("."),t.push(e)}):(i&&s.push(i),r(e[o],o,s),i&&s.pop(i))}};return e!=null&&r(e),t},h=function(e,t,n){n=n||{};var r=!0;t=t.value;var i=t.replace(/\{(\w*?)\}/g,function(e,t){var i=n[t];return i==null&&(r=!1),i!=null?i:""});return r&&(e=e+"&where="+i),e},p=function(e,t,n,r){var s,o=c(n);o.length>0?s={$diagnoses:o}:s={$diagnoses:[{$message:"Action: "+t+" "+(e?"succeeded":"failed"),$severity:e?"success":"error",$stackTrace:JSON.stringify(n)}]},i.getModal().actionResult("Action: "+t,s)};t.parseSDataURL=u,t.getLinkInfo=a,t.getLinkAttrs=f,t.scanDiagnoses=c,t.addWhereClause=h,t.displayActionMsg=p}),define("syracuse-tablet/html/js/ui/iconList",["require","exports","module"],function(e,t,n){t.fontAwesomeIconNames=["fa-adjust","fa-adn","fa-ambulance","fa-anchor","fa-android","fa-angellist","fa-apple","fa-archive","fa-arrows","fa-asterisk","fa-at","fa-automobile","fa-backward","fa-ban","fa-bank","fa-barcode","fa-bars","fa-beer","fa-behance","fa-bell","fa-bicycle","fa-binoculars","fa-bitbucket","fa-bitcoin","fa-bold","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-briefcase","fa-btc","fa-bug","fa-building","fa-bullhorn","fa-bullseye","fa-bus","fa-cab","fa-calculator","fa-calendar","fa-camera","fa-car","fa-cc","fa-certificate","fa-chain","fa-check","fa-child","fa-circle","fa-clipboard","fa-close","fa-cloud","fa-cny","fa-code","fa-codepen","fa-coffee","fa-cog","fa-cogs","fa-columns","fa-comment","fa-comments","fa-compass","fa-compress","fa-copy","fa-copyright","fa-crop","fa-crosshairs","fa-css3","fa-cube","fa-cubes","fa-cut","fa-cutlery","fa-dashboard","fa-database","fa-dedent","fa-delicious","fa-desktop","fa-deviantart","fa-digg","fa-dollar","fa-download","fa-dribbble","fa-dropbox","fa-drupal","fa-edit","fa-eject","fa-empire","fa-envelope","fa-eraser","fa-eur","fa-euro","fa-exchange","fa-exclamation","fa-expand","fa-eye","fa-eyedropper","fa-facebook","fa-fax","fa-female","fa-file","fa-film","fa-filter","fa-fire","fa-flag","fa-flash","fa-flask","fa-flickr","fa-folder","fa-font","fa-forward","fa-foursquare","fa-gamepad","fa-gavel","fa-gbp","fa-ge","fa-gear","fa-gears","fa-gift","fa-git","fa-github","fa-gittip","fa-glass","fa-globe","fa-google","fa-group","fa-header","fa-headphones","fa-heart","fa-history","fa-home","fa-html5","fa-ils","fa-image","fa-inbox","fa-indent","fa-info","fa-inr","fa-instagram","fa-institution","fa-ioxhost","fa-italic","fa-joomla","fa-jpy","fa-jsfiddle","fa-key","fa-krw","fa-language","fa-laptop","fa-lastfm","fa-leaf","fa-legal","fa-link","fa-linkedin","fa-linux","fa-list","fa-lock","fa-magic","fa-magnet","fa-male","fa-maxcdn","fa-meanpath","fa-medkit","fa-microphone","fa-minus","fa-mobile","fa-money","fa-music","fa-navicon","fa-openid","fa-outdent","fa-pagelines","fa-paperclip","fa-paragraph","fa-paste","fa-pause","fa-paw","fa-paypal","fa-pencil","fa-phone","fa-photo","fa-pinterest","fa-plane","fa-play","fa-plug","fa-plus","fa-print","fa-qq","fa-qrcode","fa-question","fa-ra","fa-random","fa-rebel","fa-recycle","fa-reddit","fa-refresh","fa-remove","fa-renren","fa-reorder","fa-repeat","fa-reply","fa-retweet","fa-rmb","fa-road","fa-rocket","fa-rouble","fa-rss","fa-rub","fa-ruble","fa-rupee","fa-save","fa-scissors","fa-search","fa-send","fa-share","fa-shekel","fa-sheqel","fa-shield","fa-signal","fa-sitemap","fa-skype","fa-slack","fa-sliders","fa-slideshare","fa-sort","fa-soundcloud","fa-spinner","fa-spoon","fa-spotify","fa-square","fa-star","fa-steam","fa-stethoscope","fa-stop","fa-strikethrough","fa-stumbleupon","fa-subscript","fa-suitcase","fa-superscript","fa-support","fa-table","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-terminal","fa-th","fa-ticket","fa-times","fa-tint","fa-trash","fa-tree","fa-trello","fa-trophy","fa-truck","fa-try","fa-tty","fa-tumblr","fa-twitch","fa-twitter","fa-umbrella","fa-underline","fa-undo","fa-university","fa-unlink","fa-unlock","fa-unsorted","fa-upload","fa-usd","fa-user","fa-users","fa-vine","fa-vk","fa-warning","fa-wechat","fa-weibo","fa-weixin","fa-wheelchair","fa-wifi","fa-windows","fa-won","fa-wordpress","fa-wrench","fa-xing","fa-yahoo","fa-yelp","fa-yen","fa-youtube"]}),define("syracuse-tablet/html/js/ui/fontUtils",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/ui/iconList"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("app"),i=e("syracuse-tablet/html/js/ui/iconList"),s={$first:"glyphicon glyphicon-step-backward",$previous:"glyphicon glyphicon-chevron-left",$next:"glyphicon glyphicon-chevron-right",$last:"glyphicon glyphicon-step-forward",$more:"glyphicon glyphicon-refresh"},o=function(e){if(e==null)e=Math.random()*(i.fontAwesomeIconNames.length-1);else if(e<i.fontAwesomeIconNames.length)e=Math.abs(e);else{var t=Math.round(Math.abs(e)/i.fontAwesomeIconNames.length);e-=t*i.fontAwesomeIconNames.length}return"fa "+i.fontAwesomeIconNames[e]},u=function(e){switch(e){case"$cancelEdit":return"fa fa-undo";case"$edit":return"fa fa-pencil-square-o";case"$query":return"fa fa-list";case"$save":return"fa fa-floppy-o";case"$details":return"fa fa-level-down";case"$delete":return"fa fa-trash-o";case"$create":return"fa fa-plus-square";default:if(i.fontAwesomeIconNames.indexOf("fa-"+e)>-1)return"fa fa-"+e;return r&&r("Icon name="+e+" not implemented yet"),"fa fa-warning"}return!0};t.getIconByIdx=o,t.getIconByName=u,t.checkBoxIcon=function(e){return["glyphicon",e?"glyphicon-ok":"glyphicon-remove"]},t.dateFieldIcon=function(e){return e.indexOf("date")!=-1?["glyphicon","glyphicon-calendar"]:["glyphicon","glyphicon-time"]},t.refFieldIcon=function(){return["glyphicon","glyphicon-eye-open"]},t.binaryIcon=function(e,t){return e==="s-m-img"?"glyphicon "+(t==="default"?"glyphicon-picture":""):e==="s-m-binary"?"glyphicon "+(t==="default"?"glyphicon-file":""):""},t.paginationIcon=function(e){return s[e]},t.pageIcon=function(e){if(e==="clearCache")return"fa fa-history";if(e==="switchContext")return"fa fa-user";if(e==="search")return"fa fa-search";if(e==="sidePanelL")return"fa fa-caret-square-o-left";if(e==="sidePanelR")return"fa fa-angle-double-right";if(e==="home")return"fa fa-home";if(e==="designPage")return"fa fa-paint-brush";if(e==="back")return"fa fa-arrow-circle-o-left";if(e==="developmentPage")return"fa fa-gear";if(e==="bars")return"fa fa-bars";if(e==="backIphone")return"fa fa-angle-left";if(e==="about")return"fa fa-info-circle";if(e==="logout")return"fa fa-sign-out";if(e==="pinPage_1")return"fa fa-star-o";if(e==="pinPage_2")return"fa fa-star"},t.ctrlIcon=function(e){if(e==="editrow")return"fa fa-pencil-square-o";if(e==="detailrow")return"fa fa-hand-o-right";if(e==="delrow")return"fa fa-remove";if(e==="addrow")return"fa fa-plus"},t.vignetteIcons=function(e){if(e==="home")return"fa fa-home";if(e==="back")return"fa fa fa-arrow-circle-o-left";if(e==="refresh")return"fa fa-history"},t.sortIcon=function(e){if(e==="asc")return"fa fa-long-arrow-up";if(e==="none")return"fa fa-times";if(e==="desc")return"fa fa-long-arrow-down"},t.filterIcon=function(e){if(e==="panel")return"fa fa-bars";if(e==="filtered")return"fa fa-filter"}}),define("syracuse-tablet/html/js/controls/ctrlFactory",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("factory"),i=e("syracuse-tablet/html/js/helpers/globals"),s={},o={string:"application/x-string",password:"application/x-password",text:"text/plain",integer:"application/x-integer",real:"application/x-real",decimal:"application/x-decimal",quantity:"application/x-quantity",choice:"application/x-choice","boolean":"application/x-boolean",date:"application/x-date",time:"application/x-time",datetime:"application/x-datetime",reference:"application/x-reference",array:"application/x-array",image:"image",doc:"application/x-document",binary:"application/x-binary",soapObject:"application/x-object",textRtf:"text/rtf",textHtml:"text/html",textPlain:"text/plain",vignette:"tablet/x-vignette",layout:"tablet/x-layout",pageheader:"tablet/x-pageheader",pagefooter:"tablet/x-pagefooter",pageactionpanelregular:"tablet/x-pageactionpanelregular",navigationpanel:"tablet/x-navigationpanel",userpanelsmartphone:"tablet/x-userpanelsmartphone",filtersortpanel:"tablet/x-filtersortpanel",icon:"tablet/x-icon",button:"tablet/x-button",unfound:"tablet/x-unfound"},u=function(e,t,n,r,i){return i=i||{},i.isArrayChild=!0,i.isTableCell=!0,a(t,null,n,r,i)},a=function(e,t,n,r,i,u){if(!e)throw new Error("Control - null parent or controller");i=i||{};var a,f=r.data("$type");switch(f){case o.string:case o.password:switch(r.data("$format")){case"$phone":a=new s.PhoneField(e,n,r,i);break;case"$email":a=new s.EmailField(e,n,r,i);break;default:a=new s.Alphanum(e,n,r,i)}break;case o.integer:case o.real:case o.decimal:n.$gauge?a=new s.Gauge(e,n,r,i):a=new s.Numeric(e,n,r,i);break;case o.quantity:a=new s.Quantity(e,n,r,i);break;case o.choice:a=new s.Combo(e,n,r,i);break;case o.boolean:a=new s.CheckBox(e,n,r,i);break;case o.date:case o.time:case o.datetime:a=new s.Date(e,n,r,i);break;case o.reference:a=new s.Reference(e,n,r,i);break;case o.array:r.data("$cube")?a=new s.CubeChart(e,n,r,i):a=new s.Array(e,n,r,i);break;case o.vignette:a=new s.Vignette(e,n,r,i);break;case o.image:case o.doc:case o.binary:a=new s.Binary(e,n,r,i);break;case o.icon:a=new s.Icon(e,n,r,i);break;case o.button:a=new s.Button(e,n,r,i);break;case o.textRtf:case o.textHtml:case o.textPlain:a=new s.Text(e,n,r,i);break;case o.soapObject:throw new Error("not implemented");case o.unfound:a=new s.FieldUnfound(e,n,r,i);break;default:a=new s.TypeUnknown(e,n,r,i)}u&&a.setAuthoringPath(u);if(i.isTableCell!==!0){if(!t)throw new Error("Parent's control is mandatory");t.appendStructElmt(a),i.isArrayChild!==!0&&e.addControl(a,!1)}return a},f=function(e,t,n,i,u){var a=n.$layoutType||"stack",f;if(a=="stack")f=s.LayoutStack;else if(a=="row")f=s.LayoutRow;else if(a=="tab")f=s.LayoutTab;else if(a=="hub")f=s.LayoutHub;else if(a=="hubGroup")f=s.LayoutHubGroup;else if(a=="tile")f=s.LayoutTile;else{if(a!="cell")return r&&r("layout type="+a+" is not implemented"),null;f=s.LayoutCell}var l=new f(e,o.layout,n,i);return l.setAuthoringPath(u),t?t.appendStructElmt(l):l.parent=e,l},l=function(e,t,n){n=n||{};var r;switch(o[e]){case o.pageheader:r=new s.PageHeader(t,n);break;case o.pagefooter:r=new s.PageFooter(t,n);break;default:throw new Error("Unknown page control["+e+"]")}return r&&t.addControl(r,!0),r},c=function(e,t,n){var r=i.getSiteLayout().getDeviceType();n=n||{deviceType:r};var u=o[t];if(!u)return null;switch(u){case o.pageactionpanelregular:return new s.PageActionPanelRegular(e,o.pageactionpanelregular,t,n);case o.userpanelsmartphone:return new s.UserPanelSmartphone(e,o.userpanelsmartphone,t,n);case o.filtersortpanel:return new s.FilterSortPanel(e,o.filtersortpanel,t,n);case o.navigationpanel:return new s.NavigationPanel(e,o.navigationpanel,t,n);default:throw new Error("Unknown page control["+t+"]")}};t.createPanel=c,t.createControl=a,t.createLayout=f,t.createPageControl=l,t.createCellFieldCtrl=u,t.type=function(e){return o[e]},t.setImpl=function(e,t){s[e]=t}}),define("syracuse-tablet/html/js/helpers/articleParser",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/helpers/jsutils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("articleParser"),i=e("syracuse-tablet/html/js/helpers/utils"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/controls/ctrlFactory"),u=e("syracuse-tablet/html/js/helpers/jsutils"),a=function(e){return e.$item.$properties==null||e.$type=="application/x-reference"},f=function(e){if(!e)return null;var t;return $.isPlainObject(e)?t=e:e.isArray()?t=e.json:e.parent&&(t=e.parent.json),t==null||t.$type!=="application/x-array"?null:t},l=function(e,t){var n=f(e);if(!n)return t;t.$article={$items:[]},t.$display="table";var r,i;a(n)?(r={},r[s.SINGLEARRAYPROP]=n):r=n.$item.$properties;for(var o in r)o.smStartsWith("$")||(i=r[o],i.$isExcluded!==!0&&t.$article.$items.push({$bind:o}));return t},c=function(e,t,n){var r=$.extend({},{$bind:e},n);return l(t,r)},h=i.defineClass(function(e){var t=this;t.page=e},null,{_doParse:function(e,t,n,i,s,u){var a=this;u=u||"0";var f=0;if(e.$layoutType){var c=o.createLayout(a.page,n,e,i,u);return c&&e.$items&&(t.isQuery()&&(t=t.getPrototype("$resources")),e.$items.forEach(function(e){a._doParse(e,t,c,i,s,u+"-"+f),f++})),c}if(e.$bind){var h=t.getPrototype(e.$bind);h==null&&e.$isUnfound!==!0?s.push(e):(e.$isUnfound&&(h=t.create({$type:"tablet/x-unfound"})),h.$isExcluded||(h.isArray()&&e.$article==null&&l(h,e),o.createControl(a.page,n,e,h,i,u)))}else r&&r("$layoutType or $bind exspected")},parse:function(e,t,n,i){var o=this;try{if(!e||!t)throw new Error("Not empty article and prototype are expected");if(!e.$layoutType)throw new Error("$layoutType expected for root layout");var a=[],f=o._doParse(e,t,null,n,a,i);if(a.length>0&&s.getDvlpOpt("showUnfoundFields")){var e={$layoutType:"stack",$items:[]};a.forEach(function(t){e.$items.push($.extend(!0,t,{$isUnfound:!0}))}),o._doParse(e,t,f,n,null,i)}return f}catch(l){throw r&&r("article parser error",l),new Error("Error parsing article ["+l.message+"]\n"+u.cleanStack(l.stack))}}}),p=function(e,t,n,r,i){var s=new h(e);return s.parse(t,n,r,i)},d=function(e,t,n,r){var i=c(n,r);return o.createCellFieldCtrl(t,e.controller,i,r)},v=function(e,t){var n=e.article.$article.$card,r=e.article.$article.$cardsPerRow;return r=Math.min(12,Math.max(0,r==null?1:parseInt(r,10))),n||(n={$layoutType:"stack",$items:[]},e.article.$article.$items.forEach(function(e){n.$items.push(e)})),t=t||{},t.isArrayChild=!0,t.isTableCell=!1,p(e.controller,n,e.prototype.getPrototype("$item"),t)},m={skipblock:!0,skipsection:!0,include:["$category","$layoutType","$title","$bind"],exclude:["$items","$widths"],protoExclude:["application/x-array","application/json"]},g=function(e){var t=[];e=e.split(",");if(e.length===0)throw new Error("Number of cells/rows must be > 0");if(e.length>12)throw new Error("Number of cells/rows must be <= 12");var n=0;e.forEach(function(e){e=parseInt(e,10),e=Math.ceil(e/12),n+=e,t.push(e)});if(n>12){var r=n-12;t.sort();while(r>0)for(var i=t.length-1;i>=0;i--)r>0&&t[i]>1&&(t[i]=t[i]-1,r--)}else if(n<12){var r=12-n;t.sort();while(r>0)for(var i=0;i<t.length;i++)r>0&&(t[i]=t[i]+1,r--)}return t.join(",")},y=function(e,t){if(!e)return null;var n;e.$layout?n=y(e.$layout,t):n={};if(e.$layoutType){if(!e.$items)throw new Error("$items is missing");n.$items=[],e.$items.forEach(function(e){n.$items.push(y(e,t))})}for(var r in e)r==="$widths"?n[r]=g(e[r]):t.exclude.indexOf(r)===-1&&t.include.indexOf(r)>=0&&(n[r]=e[r]);return n},b=function(e,t,n){return n=$.extend({},m,n),y(e,n)};t.tableCell2Control=d,t.cardV2Controls=v,t.article2Controls=p,t.convertDesktop=b,t.createArticle=c,t.isSingleArray=a,t.getArrayJsonProto=f}),define("syracuse-tablet/html/js/helpers/prototype",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/application/gadget","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/articleParser"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/logger").getLogger("prototype"),o=e("syracuse-tablet/html/js/application/gadget").Klass,u=e("syracuse-tablet/html/js/sdata/sdataUtils"),a=e("syracuse-tablet/html/js/ui/fontUtils"),f=e("syracuse-tablet/html/js/helpers/articleParser"),l=/representation=.*\.\$(.*)/,c=function(e,t){e.icon=a.getIconByName(t);switch(t){case"$edit":e.title="Edit";break;case"$query":e.title="List";break;case"$save":e.title="Save";break;case"$details":e.title="Detail";break;case"$delete":e.title="Delete";break;case"$create":e.title="Create";break;default:s&&s("Facet "+t+" not implemented yet"),e.title=t||"???"}},h=function(e){return e.smStartsWith("$word")||e.smStartsWith("$excel")},p=function(e){return e==="$first"||e==="$previous"||e==="$next"||e==="$last"||e==="$more"},d={header:{smartphone:{details:{$edit:!0,$delete:!0},edit:{$canceledit:!0,$save:!0},query:{$create:!0},create:{$save:!0,$canceledit:!0}},tablet:{}},footer:{smartphone:{},tablet:{details:{$edit:!0,$delete:!0,$query:!0},edit:{$save:!0,$canceledit:!0},query:{$create:!0},create:{$save:!0,$canceledit:!0}}},actionpanelparent:{tablet:{details:{},edit:{},query:{},create:{}},smartphone:{details:{$query:!0},edit:{},query:{},create:{}}},actionpanel:{}},v=null,m=/{[^}]+}/g,g=/[{}]/g,y=r.defineClass(function(e,t){var n=this;this.json=e||{},typeof this.json=="string"&&(this.json=JSON.parse(n.json)),t&&(this.parent=t),this.init()},null,{init:function(){var e=this.json.$properties;if(!e)return;for(var t in e)e[t].$type==="application/x-reference"&&this.initRefField(e[t],t)},destroy:function(){this.parent=null,this.json=null},data:function(e,t,n,r){if(!e||e.length==0)return null;var i=this.json[e];if(i==null){n==null&&["$title","$description"].indexOf(e)>-1&&(n=!0);var s=n!==!0&&this.parent?this.parent.data(e,t,null,!0):i;return s!=null&&(this.json[e]=s),s}return this.resolveExpression(i,t)},property:function(e,t,n){if(!e||e.length===0)return null;var r=this.json.$properties?this.json.$properties[e]:this.parent?this.parent.property(e):null;return!r||!t?r:this.resolveExpression(r[t],n)},isReference:function(e){var t;if(this._cacheRef!=null){t=this._cacheRef[e];if(t!=null)return t}var n=this.property(e);return t=n!=null&&n.$type==="application/x-reference",this._cacheRef||(this._cacheRef={}),this._cacheRef[e]=t,t},isArray:function(){return this.json.$type==="application/x-array"},isBlob:function(){var e=this.json.$type;return e==="image"||e==="application/x-document"||e==="application/x-array"},resolveExpression:function(e,t){return e&&e.indexOf&&e.indexOf("{")>=0&&(e=r.parseExpression(e,t,this)),e},localization:function(e){var t=this,n=t.json.$localization||{};return n[e]?n[e]:t.parent?t.parent.localization(e):null},getPrototype:function(e,n){var r;if(e.indexOf(".")>0)r=this.getDataByPath(e);else if(e==="$item"){r=this.data(e);if(this.isSingleArray(!0)){var s={$properties:{},$type:"application/json"};s.$properties[i.SINGLEARRAYPROP]=r,r=s}}else r=this.property(e);return r?t.create($.extend(!0,{},r,n),this):null},isQuery:function(){return this.isFacet("query")},isLookup:function(){return this.isFacet("lookup")},isFacet:function(){return Array.prototype.indexOf.call(arguments,this.getFacet())>=0},formatDisplay:function(e,t){var n=this,r=n.property(e)},addProperty:function(e,t){var n=this;t&&n.json.$properties&&!n.json.$properties[e]&&(n.json.$properties[e]=t)},getPropTitle:function(e){var t=this,n=t.property(e);return n&&n.$title?t.resolveExpression(n.$title):""},getFacet:function(){if(this._facet==null){var e=this,t;while(e!=null&&t==null)e.json.$url!=null&&e.json.$url.trim().length!=0&&(t=l.exec(e.json.$url),t=t!=null&&t.length==2?t[1]:null),e=e.parent;this._facet=t||""}return this._facet},getFieldNameForValue:function(e){var t=this.property(e),n=t&&t.$item;return n&&n.$refValue?n.$refValue:e},initRefField:function(e,t){var n=this;if(!e)throw new Error("Field proto expected["+t+"]");var r=e.$item;if(!r||r.$refValue)return;r.$refValue=t;if(r.$value&&typeof r.$value=="string"){var i=r.$value.match(m);if(!i||i.length!=1)throw new Error("Prototype.initRefField - Only one value is expected");var s=i[0].replace(g,"").trim();if(r[s]){var o=r[s].replace(g,"").trim();n.property(o)&&(r.$refValue=o)}else r.$refValue=s}return r.$refValue},getLookupInfo:function(){var e={},t=this.json;return t.$description&&(e.$description=t.$description.replace(g,"").trim()),t.$title&&(e.$title=t.$title.replace(g,"").trim()),t.$value&&(e.$value=t.$value.replace(g,"").trim()),e},getDataByPath:function(e){return r.getPropByPath(this.json,e,this)},getVignetteGadget:function(){var e=this.data("$gadget");return e?new o(e):null},getLinks:function(e,t,n){var r=this,i=[];if(!e)return[];n=n||{};if(!d[t])throw new Error("Unexpected toolbar parameter. Expected 'header', 'footer' or 'actionpanel', received"+t);var o=d[t],a=n.deviceType||"tablet";if(t!=="actionpanel"){o=d[t][a][e.prototype.getFacet()];if(!o)throw new Error("No facet set in prototype")}var f=$.extend(!0,{},r.data("$links",null,!0),e.getValue("$links"));return f&&!$.isEmptyObject(f)&&$.each(f,function(n,a){try{if(t!=="actionpanel"&&!o[n])return;if(t==="actionpanel"&&(n==="$edit"||n==="$create"||n==="$delete"||n==="$details"||n==="$query"||n==="$save"||n==="$canceledit"))return;if(a==null||a.$isExcluded===!0)return;if(a.$type!=null&&a.$type.length!==0&&a.$type!=="application/json;vnd.sage=syracuse")return;var f=n.smStartsWith("$");if(f&&h(n))return;var l;if(a.$url&&a.$url.length>0){var p=u.getLinkInfo(a.$url,e);l=$.extend(p,a),l.$services&&(l.$isAction=!0)}else l=$.extend({},a),l.$isAction=!0;l.name=n,t==="actionpanel"?(l.title=r.resolveExpression(a.$title),l.icon=""):c(l,n),i.push(l)}catch(d){a=a||{},s&&s("getLinks - invalid link - name:"+n+" - Title: "+r.resolveExpression(a.$title||"no title")+"\n	"+(a.$url||"no url"))}}),i},getUnitFieldInfo:function(){var e=this,n={};n.$unit=e.data("$unit");if(typeof n.$unit=="object")n.unitBindName="$unit",n.unitFieldProto=t.create($.extend({},e.$unit));else if(typeof n.$unit=="string"){n.unitBindName=n.$unit;var r=e.parent;while(r){var i=r.property(n.$unit);if(i){n.unitFieldProto=t.create($.extend({},i));break}r=r.parent}}return n},isSingleArray:function(e,t){var n;if(t!=null)n=this.property(t);else{if(this.$singleArray)return this.$singleArray;n=f.getArrayJsonProto(this)}if(n==null&&e)return!1;if(n==null)throw new Error("Unexpected parent array");var r=f.isSingleArray(n);return t!=null&&(this.$singleArray=r),r},create:function(e){return t.create($.extend(!0,{},e),this)}});t.getRowIdxProto=function(){return v?v:(v=t.create({$type:"application/x-integer"}),v)},t.create=function(e,t){return new y(e,t)}}),define("syracuse-tablet/html/js/authoring/authoringArticleGen",["require","exports","module","syracuse-tablet/html/js/helpers/jsutils"],function(e,t,n){function i(e,t){var n=this;e=$.isPlainObject(e)?e:e.json;var r=e.$properties,i;if(t==="horizontal"){v={$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"",$items:[]}]};var s=v.$items[0].$items,o=e.$url&&e.$url.indexOf(".$query")>0,u,a=4,f=a,l,c=["application/x-array","application/x-document","image"];for(var h in r){u=r[h];if(u.$isExcluded!==!0){if(c.indexOf(u.$type)>-1){var p={$layoutType:"tile",$size:"large",$items:[]};s.push(p),l=p.$items,f=a}else if(f>=a){f=0;var p={$layoutType:"tile",$size:"large",$items:[]};s.push(p),l=p.$items}f+=1;var d={$bind:h};o?d.$isTitleHidden=o:d.$labelPosition="top",l.push(d)}}}else{var v={$layoutType:"stack",$items:[]};i=v.$items;var o=e.$url&&e.$url.indexOf(".$query")>0,u;for(var h in r){u=r[h];if(u.$isExcluded!==!0){var d={$bind:h};o&&(d.$isTitleHidden=o),i.push(d)}}}return $.smResolve(v)}var r=e("syracuse-tablet/html/js/helpers/jsutils");t.genNewArticle=function(e){var n;return n=e.page.prototype,r.isInstanceOf(e.page,"DashboardPage")?t.generateDashboardArticle(n,e.orientation):i(n,e.orientation)},t.generateDashboardArticle=function(e,t){var n;e=$.isPlainObject(e)?e:e.json;var r=e.$properties;if(t==="horizontal")n={$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"",$items:[]}]},Object.keys(r).forEach(function(e){var t=r[e];n.$items[0].$items.push({$layoutType:"tile",$size:"medium",$items:[{$bind:e}]})});else{n={$layoutType:"stack",$items:[]};var i=4,s;Object.keys(r).forEach(function(e){i===4&&(i=0,s={$layoutType:"row",$rowHeight:"200px",$items:[]},n.$items.push(s));var t=r[e];s.$items.push({$layoutType:"cell",$widthXs:12,$widthSm:6,$widthMd:4,$widthLg:3,$items:[{$bind:e}]})})}return $.smResolve(n)}}),define("syracuse-tablet/html/js/helpers/dashboardUtils",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/authoring/authoringArticleGen"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/prototype"),s=e("syracuse-tablet/html/js/authoring/authoringArticleGen"),o=function(e){var t={$title:e.$title,$description:e.$description,$properties:{}},n=Object.keys(e.$vignettes||[]);for(var s=0;s<n.length;s++){var o=n[s],u=$.extend({},e.$vignettes[o]),a=u.$uuid;u.$gadget=e.$gadgets[a],u.$gadget?(u.$gadget=$.extend({},u.$gadget),u.$gadget.$uuid=a,u.$uuid=o,u.$type="tablet/x-vignette",u.$title=u.$gadget.$title,u.domId=r.readableuid("vgnt",u.$gadget.$type)):(u.$gadget={$uuid:a,$type:"$gadgetMissing"},u.$uuid=o,u.$type="tablet/x-vignette",u.domId=r.readableuid("vgnt",u.$gadget.$type)),t.$properties[o]=u}return i.create(t)},u=function(e){return s.generateDashboardArticle(e,"orientation")},a=function(e){return $.smResolve().then(function(){var t=e.$article,n=o(e);return t?{article:$.extend({},t),prototype:n}:u(n).then(function(t){return e.$article=t,{article:$.extend({},t),prototype:n}})})};t.getDashboardInfo=a,t.getDashboardArticle=u,t.getDashboardProto=o}),define("syracuse-tablet/html/js/application/appFactory",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/dashboardUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("factory"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/dashboardUtils"),o={Application:function(){throw new Error("Not implemented")},DashoardPage:function(){throw new Error("Not implemented")},RegularPage:function(){throw new Error("Not implemented")},RowDetailPage:function(){throw new Error("Not implemented")},LookupPage:function(){throw new Error("Not implemented")},LoginPage:function(){throw new Error("Not implemented")},AboutPage:function(){throw new Error("Not implemented")},DaoApp:function(){throw new Error("Not implemented")},DaoSdata:function(){throw new Error("Not implemented")}},u=function(e){var n=new o.Application(e,t);return n.init(),r&&r("Application","Create ok"),n},a=function(e,t,n){var u=null,a=t.type,f=$.Deferred(),l={};try{switch(a){case"static":if(t.subtype!=="html")throw new Error("_createPage - unknown static subtype ["+t.subtype+"]");switch(t.name){case"login":u=new o.LoginPage(e,t,l);break;case"about":u=new o.AboutPage(e,t,l);break;default:throw new Error("_createPage - unknown html page ["+t.name+"]")}break;case"dashboard":i.getMetaData().getDashboard(t.dashboardName).then(function(e){return s.getDashboardInfo(e)}).then(function(n){t.isWelcomePage===!0?u=new o.WelcomeDashoardPage(e,t,n.prototype,n.article,l):u=new o.DashoardPage(e,t,n.prototype,n.article,l),f.resolve(u)}).fail(function(e){f.reject(e)});break;case"regular":case"rowdetail":i.getMetaData().getPageDetails(t).then(function(r){r.prototype.isLookup()?u=new o.LookupPage(e,t,r.prototype,r.article,l):a==="rowdetail"?u=new o.RowDetailPage(e,t,r.prototype,r.article,n,l):u=new o.RegularPage(e,t,r.prototype,r.article,l),f.resolve(u)}).fail(function(e){f.reject(e)});break;default:throw new Error("Unknown page type["+a+"]")}u&&f.resolve(u),r&&r("New Page","Create ok")}catch(c){f.reject(c)}finally{return f.promise()}},f=function(e){var t=new o.DaoApp(e);return r&&r("New DAO Application","Create ok"),t},l=function(e,t,n,i){var s;switch(e){case"representation":case"process":case"request":case"statistics":case"dashboardpage":case"externallink":s=new o.DaoSdata(t,n,i);break;default:throw new Error("Unknown DaoSdata type["+e+"]")}return r&&r("New DAO View","Create ok"),s};t.setImpl=function(e,t){o[e]=t},t.createApplication=u,t.createPage=a,t.createDaoApp=f,t.createDaoSdata=l}),define("syracuse-tablet/html/js/sdata/sdataHttp",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("sDataHttp"),i=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,s=e("syracuse-tablet/html/js/helpers/locale"),o={noJsonParsing:!0},u=function(e){var t=$.Deferred(),e=e||{};e.options=$.extend(e.options||{},o),e.headers=e.headers||{},e.headers["Accept-Language"]=s.getCurrentLocale();try{r&&r("_httpSend - Begin - Method:"+e.method+"\n	"+e.url),i(e.method,e.url,e.send,e.headers,e.options).then(function(e){r&&r("_httpSend - End - status="+e.status+" - "+e.textStatus);var n=e.responseText?e.responseText.trim():"";n.length>0&&["{","["].indexOf(n.charAt(0))>=0?e.responseJSON=JSON.parse(n):e.responseJSON=null,t.resolve(e)}).fail(function(e){t.reject(e)})}catch(n){t.reject(n)}return t.promise()};t.send=u}),define("syracuse-tablet/html/js/sdata/sdataCommonResources",["require","exports","module","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/sdata/sdataHttp","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){function p(e){function s(e){var o={method:"GET",url:e};o.parsedUrl=r.parseSDataURL(o.url),i.send(o).then(function(e){var r=e&&e.responseJSON;r&&r.$resources&&r.$resources.forEach(function(e){n.push(e)}),r&&r.$links&&r.$links.$next&&r.$links.$next.$url?s(r.$links.$next.$url):t.resolve(n)})}var t=$.Deferred(),n=[];return s(e),t.promise()}var r=e("syracuse-tablet/html/js/sdata/sdataUtils"),i=e("syracuse-tablet/html/js/sdata/sdataHttp"),s=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,o=e("syracuse-tablet/html/js/helpers/utils"),u="/sdata/syracuse/collaboration/syracuse/mobileApplications/$service/availableApplications",a="/sdata/syracuse/collaboration/syracuse/localePreferences?representation=localePreference.$bulk",f="/sdata/syracuse/collaboration/syracuse/userProfiles/$service/current",l="/sdata/syracuse/collaboration/syracuse/endPoints?representation=endPoint.$bulk",c="/sdata/syracuse/collaboration/syracuse/roles?representation=role.$bulk",h=function(e,t,n){var i=e;i+="\nStatus: "+t.status+" - "+t.descrHttpStatus,n&&(i+="\n"+n);var s=r.scanDiagnoses(t.responseJSON);throw s.length>0&&(i+="\n\nDetails\n-------\n",s.forEach(function(e){e.$severity&&(i+=e.$severity+": "),e.$message&&(i+=e.$message+"\n"),e.$stackTrace&&(i+="Stack: "+e.$stackTrace+"\n")})),new Error(i)};t.queryAllApplications=function(){var e=$.Deferred(),t={method:"GET",url:u};return t.parsedUrl=r.parseSDataURL(t.url),i.send(t).then(function(n){if(n.isSuccess&&n.responseJSON){var r=n.responseJSON.$resources;e.resolve(r)}else h("Loading application list error",n,t.url)}).fail(function(t){e.reject(t)}),e.promise()},t.queryApplicationDetail=function(e){var t=$.Deferred(),n={method:"GET",url:e.$metaDataUrl};return n.parsedUrl=r.parseSDataURL(n.url),i.send(n).then(function(r){if(r.isSuccess&&r.responseJSON){var i=r.responseJSON;t.resolve(i)}else h("Error oading lapplication detail - Name: "+e.applicationName,r,n.url)}).fail(function(e){t.reject(e)}),t.promise()},t.getUserProfile=function(){var e=$.Deferred(),t={method:"GET",url:f};return t.parsedUrl=r.parseSDataURL(t.url),i.send(t).then(function(n){if(n.isSuccess&&n.responseJSON){var r=n.responseJSON;e.resolve(r)}else h("Loading user profile error",n,t.url)}).fail(function(t){e.reject(t)}),e.promise()},t.queryLocalePreferences=function(){return p(a).then(function(e){var t=[];return e.forEach(function(e){t.push({$uuid:e.$uuid,code:e.code,description:e.description})}),t})},t.queryEndpoints=function(){return p(l)},t.queryRoles=function(){return p(c)},t.updateUserProfile=function(e){function t(){return $.smResolve().then(function(){var e=o.UUID(),t={method:"POST",url:"/sdata/syracuse/collaboration/syracuse/userProfiles/$template/$workingCopies?representation=userProfile.$edit&role=&trackingId="+e};return t.parsedUrl=r.parseSDataURL(t.url),i.send(t).then(function(e){return e.isSuccess&&e.responseJSON?$.smResolve(e.responseJSON):$.smReject()})})}function n(t){return $.smResolve().then(function(){var n=$.extend({},t,e),s={method:"PUT",url:t.$url,send:n};return s.parsedUrl=r.parseSDataURL(s.url),i.send(s).then(function(e){return e.isSuccess&&e.responseJSON?$.smResolve(e.responseJSON):$.smReject()})})}function s(e){return $.smResolve().then(function(){var t={method:"DELETE",url:e.$url};return t.parsedUrl=r.parseSDataURL(t.url),i.send(t).then(function(e){return $.smResolve()})})}return t().then(function(e){return n(e)}).then(function(e){return s(e).always(function(){return $.smResolve()})})}}),define("syracuse-tablet/html/js/helpers/base64",["require","exports","module"],function(e,t,n){var r=t.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,i,s,o,u,a,f,l=0;e=r._utf8_encode(e);while(l<e.length)n=e.charCodeAt(l++),i=e.charCodeAt(l++),s=e.charCodeAt(l++),o=n>>2,u=(n&3)<<4|i>>4,a=(i&15)<<2|s>>6,f=s&63,isNaN(i)?a=f=64:isNaN(s)&&(f=64),t=t+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)+this._keyStr.charAt(f);return t},decode:function(e){var t="",n,i,s,o,u,a,f,l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(l<e.length)o=this._keyStr.indexOf(e.charAt(l++)),u=this._keyStr.indexOf(e.charAt(l++)),a=this._keyStr.indexOf(e.charAt(l++)),f=this._keyStr.indexOf(e.charAt(l++)),n=o<<2|u>>4,i=(u&15)<<4|a>>2,s=(a&3)<<6|f,t+=String.fromCharCode(n),a!=64&&(t+=String.fromCharCode(i)),f!=64&&(t+=String.fromCharCode(s));return t=r._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r,i,s,o=r=i=0;while(n<e.length)o=e.charCodeAt(n),o<128?(t+=String.fromCharCode(o),n++):o>191&&o<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((o&31)<<6|i&63),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t+=String.fromCharCode((o&15)<<12|(i&63)<<6|s&63),n+=3);return t},raw_decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t}};t.encode=function(e){return r.encode(e)}}),define("syracuse-tablet/html/js/application/authentication",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/helpers/base64"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("app"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,o=e("syracuse-tablet/html/js/sdata/sdataCommonResources"),u=e("syracuse-tablet/html/js/helpers/base64"),a={svcLogin:"/auth/login/submit",svcLogout:"/logout",userProfile:"/sdata/syracuse/collaboration/syracuse/userProfiles/$service/current"},f=function(){var e=new $.Deferred,t=function(t,n){r&&r(n||"Check login request rejected",t),e.reject(t)};try{return s("GET",a.userProfile,null,null,{dontCatchHttp401:!0}).then(function(t){t.status===200?e.resolve({authenticated:!0}):e.resolve(!1)}).fail(function(e){t(e)})}catch(n){t(n,"Check login request exception")}finally{return e.promise()}},l=function(e,t,n){var i=new $.Deferred,f=function(e,t){r&&r(t||"Login request rejected",e),i.reject(e)};try{var l="Basic "+u.encode(e+":"+t);return s("POST",a.svcLogin,null,{Authorization:l,accept:"application/json"}).then(function(e){if(e.status!==200&&e.status!==401)i.resolve(!1,null,"Httpstatus: "+e.status+(e.descrHttpStatus?"["+e.descrHttpStatus+"]":""));else try{var t=e.responseJSON.$diagnoses[0].$links.$redirect.$url;t==="/auth/login/page"?i.resolve(!1,null,"Httpstatus: "+e.status+(e.descrHttpStatus?"["+e.descrHttpStatus+"]":"")):o.getUserProfile().then(function(t){i.resolve(!0,t,"Httpstatus: "+e.status+(e.descrHttpStatus?"["+e.descrHttpStatus+"]":""))}).fail(function(e){f(e)})}catch(n){f(n)}}).fail(function(e){f(e)})}catch(c){f(c,"Do login request exception")}finally{return i.promise()}},c=function(){var e=new $.Deferred,t=function(t,n){r&&r(n||"Logout request rejected",t),e.reject(t)};try{var n=i.baseLocation().host+a.svcLogout;return s("GET",n,{device:"phone"}).then(function(t){var n,r="";t.isSuccess||(r="Httpstatus: "+t.status+(t.descrHttpStatus?"["+t.descrHttpStatus+"]":""));var i=t.responseJSON?t.responseJSON.$diagnoses:null;i&&i.forEach(function(e){r+=(r.lengthj>0?"\n":"")+e.$message}),e.resolve(t.isSuccess,r)}).fail(function(e){t(e)})}catch(o){t(o,"Do logout request exception")}finally{return e.promise()}};t.check=f,t.login=l,t.logout=c}),define("syracuse-tablet/html/js/application/eventListener",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("evts"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/locale"),o=e("syracuse-tablet/html/js/helpers/utils"),u=e("syracuse-tablet/html/js/ui/modal"),a=e("syracuse-tablet/html/js/helpers/notifications"),f=function(e,t){var n=e.closest(".s-m-control"+(t||"")+"[id]");return n.length>0?l(n,"id"):null},l=function(e,t,n,i){var s=(e.attr(t)||"").trim();if(i===!0){s=decodeURIComponent(s);if(s.smStartsWith("{")&&s.smEndsWith("}"))try{var o=JSON.parse(s);return o}catch(u){r.console("Error reading JSON attribute "+t+"\n	"+s)}}return n&&s.length===0?null:s},c=function(e){var t=e.split("&"),n={};for(var r=0;r<t.length;r++){var i=t[r].split("=");n[i[0]]=i[1]}return n},h=function(e,t,n,r){var a=i.getApplication(),l=function(e){var n=s.text("actions.error");e=e||{},e.stack=e.stack?e.stack+"\n---\n":"",e.stack=e.stack+"Action: "+t+"\nControl: "+(r||"?"),u.error(n,e)};try{if(a.currentPage==null)throw new Error("No current page");var c="_act"+$.camelCase("-"+t),h;r||(r=f(e,".s-m-array"));if(r){h=a.currentPage.getControl(r),h==null&&a.currentPage.isDashboard()&&(h=o.findCtrlInDashboard(e,r),h&&(h=h.control));if(h==null)throw new Error("Control not found "+r)}else{var p=o.findParentVignette(e,!1);if(p)if(p[c])h=p;else{var d=p.getPage();d&&d[c]&&(h=d)}h==null&&a.currentPage[c]&&(h=a.currentPage),h==null&&(h=a)}if(!h[c])throw new Error("Method ["+c+"] not found in object/application/current page)");var v=[];n&&typeof n=="string"?(n=n.split(","),n.forEach(function(e,t){v.push(e.trim())})):v.push(n),$.when(h[c].apply(h,v)).then(function(e){e&&e.page&&i.getApplication().changePage(e.page)}).fail(function(e){l(e)})}catch(m){l(m)}},p=function(e,t){var n=i.getApplication(),r={},s;s=l(e,"data-sdata-url"),s.length>0&&(r["sdata-url"]=decodeURIComponent(s)),s=l(e,"data-sdata-method"),s.length>0&&(r["sdata-method"]=decodeURIComponent(s)),s=l(e,"data-nav-type"),s.length>0&&(r.type=s),s=l(e,"data-parent-id"),s.length>0&&(r.parentId=s),s=l(e,"data-control-id"),s.length>0&&(r.controlId=s),s=l(e,"data-params",!1,!0),r.dataParams=s||"",s=l(e,"data-nav-target");var u;t&&(s==="vignette"?u=o.findParentVignette(t,!0):s!=="application"&&n.$config("openLinkInVignette")&&(u=o.findParentVignette(t,!1))),u||(u=n);var f=l(e,"data-nav-refresh");if(f==="true"){u.refreshPage(r);return}s=l(e,"data-application-name");var h;s.length>0&&(h=s);var p;s=l(e,"data-nav"),s.length>0&&(p=s);if(h&&!p){a.publish("sm.switch.app",h);return}h&&(r.applicationName=h),s=l(e,"data-gadget-id"),s.length>0&&(r["gadget-id"]=s),s=l(e,"data-sdata-parameters"),s&&s.length>0&&(r.sdataParameters=c(s)),s=l(e,"data-nav-noback"),r.noHistoryBack=s==="true",u.changePage(p,r)},d=function(e){var t=function(e){var t="_bindActions error";r&&r(t,e),u.error(t,e)},n=e.$$elmt;if(!n)throw new Error("_bindActions - null $$elmt");n.on("click select change","[data-nav], [data-nav-refresh], [data-action]",function(n){try{if(e.hasModalOpen()){r&&r("!!! Tries to execute an action data-action with a MODAL open.\nAction is skipped");return}var s=$(n.target),o=s.closest("[data-nav], [data-nav-refresh]");if(o.length>0){p(o,s),n.stopPropagation();return}o=s.closest("[data-action]");if(o.length>0){var u,a=l(o,"data-action");if(o.is("select"))u=$(this).val();else{if(a===i.ACTROWDETAIL||a===i.ACTROWDEL||a===i.ACTROWSEL)o=o.closest("."+i.RECORDCLASS);u=l(o,"data-params",!1,!0)}var f=l(o,"data-control-id",!0);h(s,a,u,f);return}}catch(c){t(c)}})},v=function(e){var t=function(e){var t="_bindControlEvents error";r&&r(t,e),u.error(t,e)},n=["click","blur","change"];n.forEach(function(n){e.$$elmt.on(n,".ctrl-evt-"+n,function(i){i.preventDefault(),i.stopPropagation();try{var s=$(i.target),u;s.hasClass("s-m-control")?u=l(s,"id"):(u=l(s,"data-control-id",!0),u||(u=f(s)));if(!e.currentPage)throw new Error("No current page");var a=e.currentPage.getControl(u);!a&&e.currentPage.isDashboard()&&(a=o.findCtrlInDashboard(s,u),a&&(a=a.control));if(!a)throw new Error("Control not found - ctrlid["+u+"] in currentpage or vignettes");var c="on"+n.smCapitalize();if(!a[c]){r&&r("!!! Method["+c+"] not found - ctrlid["+u+"]");return}a[c](i)}catch(h){t(h)}return})})},m=function(e){$(window).bind("popstate",function(t){var n=t.originalEvent.state;(n||/Firefox/.test(navigator.userAgent))&&e.historyPop(t)}),d(e),v(e),$(window).on("resize",i.getSiteLayout().updateLayout),$(window).on("resizeInternal",i.getSiteLayout().updateLayoutInternal)},g=function(e,t,n,r){if(!e)return;window.setTimeout(function(){h(e,t,n,r)})},y=function(e,t){var n=function(e){var t=e;this.attr=function(e){return t[e]}};p(new n(t),e)},b=function(e,t){t=t||{},t["data-nav-refresh"]="true",y(e,t)};t.bindEvents=m,t.triggerAction=g,t.triggerNavigation=y,t.triggerRefreshPage=b}),define("syracuse-tablet/html/js/application/pageLoader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/logger").getLogger("pageLoader"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/ui/modal"),u=e("syracuse-tablet/html/js/helpers/notifications"),a=r.defineClass(function(e){this.callerInterface=e,this.factory=s.getApplication().factory},null,{destroy:function(){this.callerInterface=null,this.factory=null},load:function(e,t){var n=$.Deferred(),s=this,o=function(t){s.waitStop(),s.loadingError(n,e,t)},u=r.getTimeLine("pageLoader",e.name);u&&u.start();var a=function(r,i){s.waitStop(),t!==!0&&(e.options==null||e.options.noHistoryBack!==!0)&&s.historyPush(r.state),s.succeeded(r,i,t),u&&u.stop(r.isNew?"newPage":"existingPage"),n.resolve(r)};try{if(e===null||typeof e!="object")throw new Error("Bad state object");i&&i("_gotoPage","start","page: "+e.uuid);var f=s.getCurrentPage();if(f&&f.getProp("uuid")===e.uuid){i&&i("	Page is current -> Skip");return}var l=null,c=null;f&&f.isChild&&(l=f.getParentNotif()),s.waitStart();var h=$("#"+e.uuid).smPageController();if(h!=null){i&&i("	Page found in dom -> Activate");if(!h)throw new Error("Unexpected null page data");return h.isNew=!1,s._pageActivate(h,function(){u&&u.step("activated"),h.destroySiblings(),a(h,l)},t),n.promise()}var p=null,d=e.type==="rowdetail"?f:null;s.factory.createPage(s.getRootElmt(),e,d).then(function(e){return u&&u.step("created"),h=e,h.isNew=!0,h.load()}).then(function(){u&&u.step("loaded"),h.isNew&&(!t&&h.isVignette&&f==null?p=s.savedCtxVignette():t&&(p=f?f.savedContext:null)),s._pageActivate(h,function(){u&&u.step("activated"),a(h,l)},t,p)}).fail(function(e){o(e)})}catch(v){o(v)}return n.promise()},_pageActivate:function(e,t,n,r){var i=this,s=i.getCurrentPage(),o=s&&(n===!0||s.getProp("cached")!==!0&&e.isChild!==!0);o&&n!==!0&&e.contextSave(s),e.activate(s,r,function(){i.setCurrentPage(s,e,o),t&&t()})},historyPush:function(e){this.callerInterface.historyPush(e)},waitStop:function(){this.callerInterface.waitStop()},waitStart:function(){this.callerInterface.waitStart()},getRootElmt:function(){return this.callerInterface.getRootElmt()},getCurrentPage:function(){return this.callerInterface.getCurrentPage()},savedCtxVignette:function(){var e=this.callerInterface.savedCtxVignette;return e?e():null},setCurrentPage:function(e,t,n){var r=this;e&&(n===!0?e.destroy():e.deactivate()),r.callerInterface.setCurrentPage(t)},loadingError:function(e,t,n){this.callerInterface.loadingError?this.callerInterface.loadingError(e,t,n):o.error("Loading page ["+t.name+"] error",n,function(){e.reject(n)})},succeeded:function(e,t,n){var r=this;u.publish("sm.page.loaded",r.getCurrentPage()),this.callerInterface.succeeded&&this.callerInterface.succeeded(e,t,n)}});t.Klass=a}),define("syracuse-tablet/html/js/ui/modalSelectContext",["require","exports","module","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/ui/modal"),i=e("syracuse-tablet/html/js/helpers/locale"),s='	<div class="modal fade" id="modal-endpoint" tabindex="-1" role="dialog">     <div class="modal-dialog"> 		<div class="modal-content"> 		    <div class="modal-header"> 				<h4 class="modal-title" id="myModalLabel">{{title}}</h4> 		    </div> 		    <div class="modal-body"> 				<div class="form-group"> 					<label>{{label_endpoints}}</label>					<select class="form-control" id="login-select-endpoint"> 					{{#each endpoints}}						<option value="{{this.application}}.{{this.contract}}.{{this.dataset}}" {{#if this.selected}}selected{{/if}}>						{{this.description}}						</option>					{{/each}}					</select>				</div> 			<div class="form-group"> 				<label>{{label_roles}}</label>				<select class="form-control" id="login-select-role"> 				{{#each roles}}					<option value="{{this.code}}" {{#if this.selected}}selected{{/if}}>					{{this.description}}					</option>				{{/each}}				</select>			</div> 			<div class="form-group"> 				<label>{{label_languages}}</label>				<select class="form-control" id="login-select-language"> 				{{#each languages}}					<option value="{{this.code}}" {{#if this.selected}}selected{{/if}}>					{{this.description}}					</option>				{{/each}}				</select>			</div> 			{{#if label_warning}}			<div class="alert alert-warning" role="alert">				{{label_warning}}			</div>			{{/if}}		    </div> 		    <div class="modal-footer"> 				<button type="button" class="btn pull-left" data-action="logout">{{label_logout}}</button> 		        <button type="button" class="btn" data-action="validate">{{label_ok}}</button>     			<button type="button" class="btn btn-default" data-action="cancel">{{label_cancel}}</button> 			</div> 		</div> 	</div> 	</div>',o=function(e,t,n,o,u){var a=$.Deferred();try{try{var f=Handlebars.compile(s),l={title:i.text("modal.context.title"),label_endpoints:i.text("modal.context.endpoints"),endpoints:t,label_roles:i.text("modal.context.roles"),roles:n,label_languages:i.text("modal.context.languages"),languages:o,label_logout:i.text("modal.context.logout"),label_ok:i.text("modal.context.ok"),label_cancel:i.text("modal.context.cancel"),label_warning:u&&i.text("modal.context.warning")};e&&(t.forEach(function(t){t.application+"."+t.contract+"."+t.dataset===e.endpoint?t.selected=!0:t.selected=!1}),n.forEach(function(t){t.code===e.role?t.selected=!0:t.selected=!1}),o.forEach(function(t){t.code===e.language?t.selected=!0:t.selected=!1})),f=f(l),r.modal(f,function(e,t){var n=t.find("#login-select-endpoint").val(),r=t.find("#login-select-role").val(),i=t.find("#login-select-language").val();e==="validate"?a.resolve({action:"ok",endpoint:n,role:r,language:i}):e==="cancel"?a.resolve({action:"cancel",endpoint:n,role:r,language:i}):e==="logout"&&a.resolve({action:"logout"})})}catch(c){a.reject(c)}}catch(c){a.reject(c)}finally{return a.promise()}};t.selectContext=o}),define("syracuse-tablet/html/js/storage/localStorage",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("sessstorage"),i=null,s=function(){if(i!==null)return i;i=!1;try{window.localStorage.setItem("__test_availability__","__test_availability__"),i=!0}catch(e){}return i},o=function(e,t){if(!s()){r&&r("local.unsupported.getItem("+e+"):"+n);return}var n=window.localStorage.getItem(e);return r&&r("local.getItem("+e+"):"+n),!0===t&&a(e),n},u=function(e,t){if(!s()){r&&r("local.unsupported.setItem("+e+"):"+t);return}return r&&r("local.setItem("+e+"):"+t),window.localStorage.setItem(e,t)},a=function(e){if(!s()){r&&r("local.unspported.removeItem("+e+")");return}return r&&r("local.removeItem("+e+")"),window.localStorage.removeItem(e)};t.removeItem=a,t.setItem=u,t.getItem=o}),define("syracuse-tablet/html/js/init/initContext",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modalSelectContext","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/storage/localStorage"],function(e,t,n){function f(e){return $.smResolve().then(function(){var e=$.Deferred();return o.publish("sm.context.changed",e),e.promise()}).then(function(){}).fail(function(e){r.getModal().error("context._contextChanged error",e)})}function l(e,t,n,r,i){return u.getUserProfile().then(function(t){var s=!1,o={};return s=n.some(function(n){return n.application+"."+n.contract+"."+n.dataset===e.endpoint&&n.$uuid!==t.selectedEndpoint.$uuid?(o.selectedEndpoint={$uuid:n.$uuid},!0):!1})||s,s=r.forEach(function(n){return n.code===e.role&&n.$uuid!==t.selectedRole.$uuid?(o.selectedRole={$uuid:n.$uuid},!0):!1})||s,i.forEach(function(n){return n.code===e.languages&&n.$uuid!==t.selectedLocale.$uuid?(o.selectedLocale={$uuid:n.$uuid},!0):!1})||s,s?u.updateUserProfile(o).then(function(){return e}):$.smResolve(e)})}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/ui/modalSelectContext"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=e("syracuse-tablet/html/js/sdata/sdataCommonResources"),a=e("syracuse-tablet/html/js/storage/localStorage");t.getLastUsedContext=function(e){var t;try{var n=e+"_lastContext",r=a.getItem(n);r&&r.length>0&&(t=JSON.parse(r))}catch(i){}return t},t.setLastUsedContext=function(e,t){try{var n=e+"_lastContext",r=JSON.stringify(t);a.setItem(n,r)}catch(i){}},t.init=function(e,n){var o=[],a=[],c=[],h=r.getUserCtx(),p=h&&h.$user,d=r.getUserProfile(),v=t.getLastUsedContext(p);return u.queryEndpoints().then(function(e){return e.forEach(function(e){d.endpoints&&d.endpoints.some(function(t){return t.$uuid===e.$uuid})&&o.push(e)}),u.queryLocalePreferences()}).then(function(e){return c=e,u.queryRoles()}).then(function(e){e.forEach(function(e){d.roles&&d.roles.some(function(t){return t.$uuid===e.$uuid})&&a.push(e)})}).then(function(){var t=$.Deferred(),i=function(u){var f;e||u==null?f=s.selectContext(u,o,a,c,n):(u.action="ok",f=$.smResolve(u)),f.then(function(n){n&&n.action==="ok"?t.resolve(n):n&&n.action==="cancel"?v==null?(e=!0,i(n)):t.resolve(null):n&&n.action==="logout"&&r.getApplication().logout().always(function(){t.resolve(null)})}).fail(function(e){t.reject(e)})};return i(v),t.promise()}).then(function(e){return e&&(i.setLocale(e.language),r.setEndpoint(e.endpoint),r.setUserCtx({$user:h.$user,$role:e.role,$lang:e.language})),e}).then(function(e){return e?(t.setLastUsedContext(p,e),f(e)):e}).then(function(e){return e?l(e,p,o,a,c):e}).fail(function(e){r.getModal().error("context.sdataCommonResources error",e)})}}),define("syracuse-tablet/html/js/sdata/entities/clientContract",["require","exports","module","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){function o(e,t,n){var r={$page:{},$cache:{}};return u(e,t,n,r.$page),r}function u(e,t,n,r){if(t==="$query"||t==="$lookup")r.$prototype={$properties:{$resources:{$type:"application/x-array",$item:a(e,t),$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$queryItem"}}},r.$prototype.$url="{$baseUrl}/"+e+"?representation="+e+"."+t,r.$prototype.$properties.$resources.$item.$key="{$uuid}",r.$prototype.$properties.$resources.$item.$value=n.$value,r.$prototype.$properties.$resources.$item.$links={$details:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$details",$title:"Details"},$edit:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$edit",$title:"Edit"}},r.$prototype.$links={$create:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$create",$title:"Create New"}},r.$prototype.$key="{$uuid}";else{r.$prototype=a(e,t),r.$prototype.$url="{$baseUrl}/"+e+"('{$key}')?representation="+e+"."+t,r.$prototype.$key="{$uuid}",r.$prototype.$links={};var i={$edit:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$edit",$title:"Edit"},$query:{$url:"{$baseUrl}/"+e+"?representation="+e+".$query",$title:"List"},$save:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$save",$title:"Save"},$details:{$url:"{$baseUrl}/"+e+"('{$key}')?representation="+e+".$details",$title:"Detail"}};switch(t){case"$create":r.$prototype.$links.$save=i.$save,r.$prototype.$links.$query=i.$query;break;case"$details":r.$prototype.$links.$edit=i.$edit,r.$prototype.$links.$query=i.$query;break;case"$edit":r.$prototype.$links.$save=i.$save,r.$prototype.$links.$details=i.$details,r.$prototype.$links.$query=i.$query;break;default:throw new Error(t?"facet "+t+" not handled yet":"No facet specified")}}var s=n.$articles&&n.$articles[t];s&&(r.$article=s),r.$prototype.$baseUrl="http://localhost:8124/mobile1/x3/erp/local",n.$prototype&&n.$prototype(r.$prototype,e,t)}function a(e,t){var n=i[e];if(!n)return null;var r={$properties:{}};return Object.keys(n.$properties).forEach(function(e){var t=n.$properties[e],i=t.$type||"application/x-string",o=r.$properties[e]={$type:i};for(var u=0;u<s.length;u++){var a=s[u],f=t[a];f&&(o[a]=f)}}),r}var r=e("syracuse-tablet/html/js/helpers/globals"),i={},s=["$title","$isExcluded","$isHidden","$isMandatory","$isReadOnly","$isDisabled","$format","$x3Format","$unit","$value","$shortTitle","$capabilities","$item","$minimum","$maximum","$exclusiveMinimum","$exclusiveMaximum","$minItems","$maxItems","$isNullable","$isUnique","$pattern","$minLength","$maxLength","$precision","$scale","$enum"];t.registerApp=function(e){r.getMetaData().registerStaticApp(e)},t.registerEntity=function(e){i[e.$entityName]=e},t.getEntity=function(e){return i[e]},t.getPageInfo=function(e,t){var n=e.split(".");n.length===5&&(n=n.slice(3,5));if(n[0].smStartsWith("QUERY~")){var r=n[0].split("~");n[0]=r[1]}var s=i[n[0]];if(!s)return null;var o={home:!1,type:"regular",subtype:n[1]?n[1].substring(1):"unknown",cached:!1,refreshed:!1,changeHash:!1};return o.name=e,o},t.getRegularPageInfo=function(e){var t=e.split(".");t.length===5&&(t=t.slice(3,5));if(t[0].smStartsWith("QUERY~")){var n=t[0].split("~");t[0]=n[1]}var r=i[t[0]],s;return r&&(s=o(t[0],t[1],r)),$.smResolve(s)},t.getPrototype=function(e,t){return a(e,t)}}),define("syracuse-tablet/html/js/application/pageRegistry",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/application/gadget"],function(e,t,n){function a(e,t,n){if(!n)throw new Error("_getRowdetailPage - Not null currentPage expected");if(!n.getControl)throw new Error("_getRowdetailPage - Unexpected currentPage object - getControl method not found");t=t||{};var r=n.getControl(t.controlId);if(!r)throw new Error("_getRowdetailPage - Array not found - id:"+t.controlId);var e=r.rowDetailGetPageName(n.state.name),i={name:e,home:!1,type:"rowdetail",subtype:n.isEditMode()?"edit":"details",cached:!1,refreshed:!1,changeHash:!1,rowDetailPrototype:r.rowDetailGetPrototype()};return i}function f(e,t,n,r){n=n||{},t.options=$.extend(!0,{},n),l(t,r)}function l(e,t){var n=e.options["gadget-id"];if(n){var r=t&&t.prototype&&t.prototype.property(n),i=r&&r.$gadget;e.options.gadget=i?new o(i):null}}function c(e){var t={name:e,home:!1,type:"regular",subtype:"",cached:!1,refreshed:!1,changeHash:!1};return t}function h(e){if(!e.authoringName){var t=e.name.split("."),n;t.length===5?n=t[0]+"."+t[1]+"."+t[3]+"."+t[4]:n=e.name,t.length===2&&(n="syracuse.collaboration."+n),e.authoringName=n}}function p(){["login","about"].forEach(function(e){var t={name:e,type:"static",subtype:"html",cached:!1,refreshed:!1,changeHash:!1,home:!1,disableAuthoring:!0,isLogin:e==="login",$prototype:{$properties:{}},$article:{$layoutType:"stack",$items:[]}};u[e]=t})}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/utils"),s=e("syracuse-tablet/html/js/sdata/entities/clientContract"),o=e("syracuse-tablet/html/js/application/gadget").Klass,u={};t.getPageInfo=function(e,t,n){return $.smResolve().then(function(){var t=u[e];return t}).then(function(n){return n||(n=s.getPageInfo(e,t)),n}).then(function(i){return e==="rowdetail"?a(e,t,n):(i||(i=r.getMetaData().getPageInfo(e)),i)}).then(function(t){return t?h(t):t=c(e),t}).then(function(r){return f(e,r,t,n),r.uuid=i.readableuid("page",r.type,r.name),$.extend(!0,{},r)})},p()}),define("syracuse-tablet/html/js/authoring/authoringSData",["require","exports","module","syracuse-tablet/html/js/sdata/sdataHttp"],function(e,t,n){function s(e,t){Object.keys(e).forEach(function(n){var r=e[n];n==="$diagnoses"?r.forEach(function(e){t.push(e)}):r&&typeof r=="object"&&s(r,t)})}var r=e("syracuse-tablet/html/js/sdata/sdataHttp"),i="mobile";t.getPageVariants=function(e){return $.smResolve().then(function(){e=$.extend(!0,{},{device:i},e);if(!e.application||!e.contract||!e.representation||!e.facet||!e.device)return $.smReject("Not all mandatory parameters present: "+JSON.stringify(e));var t=[e.application,e.contract,e.representation,e.facet,e.device].join("."),n={url:"/sdata/syracuse/collaboration/syracuse/pageDefs(code%20eq%20'"+t+"')?representation=pageDef.$details"};return r.send(n).then(function(e){return e&&e.isSuccess?e.responseJSON.variants||[]:e.status===404?[]:$.smReject("Unknown error")})})},t.deletePageVariants=function(e){return $.smResolve().then(function(){e=$.extend(!0,{},{device:i},e);if(!e.application||!e.contract||!e.representation||!e.facet||!e.device)return $.smReject("Not all mandatory parameters present: "+JSON.stringify(e));var t=[e.application,e.contract,e.representation,e.facet,e.device].join("."),n={url:"/sdata/syracuse/collaboration/syracuse/pageDefs(code%20eq%20'"+t+"')?representation=pageDef.$edit",method:"DELETE"};return r.send(n).then(function(e){if(e&&e.isSuccess)return;return $.smReject("Unknown error")})})},t.createPageDefinitionWC=function(e){var t={pageContext:[e.application,e.contract,e.representation,e.facet].join("."),device:i,representation:"pageAuth.$edit"},n="/sdata/syracuse/collaboration/syracuse/pageAuths"+(e.variant!=null?"('"+e.variant+"')":"/$template")+"/$workingCopies?"+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"),s={url:n,method:"POST"};return r.send(s).then(function(e){return e&&e.isSuccess?e.responseJSON:$.smReject("Unknown error")})},t.savePageDefinitionWC=function(e,t){var n={roles:e.roles,users:e.users,endpoints:e.endpoints,saveAsOption:e.saveAsOption,isFactory:!1,isModelRepresentation:!1,personalCopy:!1,variantCode:e.variantCode,variantTitle:e.variantTitle,variantDescription:e.variantDescription};switch(e.saveAsOption){case"factory_variant":n.isFactory=!0;break;case"personal_copy":n.personalCopy=!0;break;case"shared_copy":break;case"global_variant":}t.$actions={};var i;e.variant?(i=t.$actions.$save={},delete n.saveAsOption):i=t.$actions.saveAs={},i.$isRequested=!0,i.$parameters=n;var s={url:t.$url,method:"PUT",send:t};return r.send(s).then(function(e){return e&&e.isSuccess?e.responseJSON:$.smReject("Unknown error")})},t.savePageDefinition=function(e){return t.createPageDefinitionWC(e).then(function(n){var r=$.extend(!0,{},n);return r.content=r.content||{},r.content.$article=e.article,t.savePageDefinitionWC(e,r).then(function(e){var t=$.extend(!0,{},n,e),r=[];return s(t,r),{data:t,diags:r}}).fail(function(e){return $.smReject({data:null,diags:[{$severity:"error",$message:""+e}]})})})}}),define("syracuse-tablet/html/js/authoring/authoringHtml",["require","exports","module"],function(e,t,n){function s(e){var t=i[e];if(t)return t;var n=r[e];return t=Handlebars.compile(n),i[e]=t,t}var r={authPanelHeader:'		<div class="btn-group"> 			<div class="btn-group"> 				<button class="btn btn-auth-header" id="s-m-auth-settings-id" type="button"><label class="glyphicon glyphicon-cog"></label>{{label_settings}}</button> 			</div> 			<div class="btn-group" data-toggle="buttons" id="s-m-auth-orientation-id"> 				<button class="btn btn-auth-header active" id="s-m-auth-vertical-id" data-auth-orientation="portrait"> 					<input type="radio" name="orientation" checked> 					<label class="glyphicon glyphicon-resize-vertical"></label> 				</button> 				<button class="btn btn-auth-header" id="s-m-auth-horizontal-id" data-auth-orientation="landscape"> 					<input type="radio" name="orientation"> 					<label class="glyphicon glyphicon-resize-horizontal"></label> 				</button> 			</div> 			<div class="btn-group"> 				<button class="btn btn-auth-header" id="s-m-auth-scale-id" type="button"><label class="glyphicon glyphicon-fullscreen"></button> 			</div> 		</div> 		<div class="btn-group pull-right"> 			<button id="auth-btn-save-id"  class="btn btn-auth-header" type="button"><label class="glyphicon glyphicon-ok"></label></button> 			<button id="auth-btn-close-id" class="btn btn-danger" type="button"><label class="glyphicon glyphicon-remove"></label></button> 		</div>',authPanelFooter:"",authPanelRightStructure:'		<div class="s-m-site-auth-panel-content"> 			<ul class="nav nav-pills" role="tablist"> 				<li><a href="#authPanelControl" role="tab" data-toggle="tab">{{label_control}}</a></li> 			</ul> 			<div class="tab-content"> 				<div id="authPanelControl" class="tab-pane panel-body active"> 		 			<div class="s-m-auth-prop-list"> 						<label class="control-label">{{label_control_title}}</label> 				    	<p class="form-control-static" id="authPanelControlTitle"> </p> 						<label class="control-label">{{label_control_type}}</label> 						<p class="form-control-static" id="authPanelControlType"> </p> 					</div> 					<div id="authPanelControlSimple"> 					</div> 				</div> 			</div> 		</div>',authPanelLeftStructure:'		<div class="s-m-site-auth-panel-content"> 			<div id="s-m-auth-tree-box"> 				<ul class="s-m-auth-tree" id="auth-structure-root-id"></ul> 			</div> 		</div>',authPanelPropertyGroup:' 		<div class="panel panel-primary s-m-panel-auth-prop s-m-auth-prop-type-{{type}}"> 			<div class="panel-heading" role="tab" id="heading_{{id}}"> 				<h4 class="panel-title"> 					<a data-toggle="collapse" data-parent="#accordion" href="#collapse_{{id}}" {{#if expanded}} aria-expanded="true"{{/if}} aria-controls="collapse_{{id}}" {{#unless expanded}}class="collapsed"{{/unless}}>{{label}}</a> 				</h4> 			</div> 			<div id="collapse_{{id}}" class="panel-collapse collapse {{#if expanded}}in{{/if}}" role="tabpanel" aria-labelledby="heading_{{id}}"> 			</div> 		</div>',authPanelPropertySeperator:' 		<div class="auth-group-seperator"></div> 		',authPanelPropertyRadio:' 		<div class="btn-group" data-toggle="buttons" style="width: 100%;"> 			{{#each options}} 				<div class="btn-group" style="width: 100%; display: {{this.display}};" id="{{this.id}}"> 					<label class="s-m-auth-btn-radio-icon s-m-auth-btn-block" id="{{this.id}}_lab" data-s-m-auth-value="{{this.value}}"> 						<input type="radio" name="{{group}}" id="{{this.id}}">{{this.label}} 					</label> 				</div> 			{{/each}} 		</div>',authPanelPropertyRadioColor:' 		<div class="btn-group" data-toggle="buttons" style="width: 100%;"> 			{{#each options}} 				<div class="btn-group"> 					<label class="auth-btn-color s-m-bg-{{color}}" id="{{this.id}}_lab" data-s-m-auth-value="{{this.value}}"> 						<input type="radio" name="{{group}}" id="{{this.id}}"> 					</label> 				</div> 			{{/each}} 		</div>',authPanelPropertyInput:' 			<div class="form-group"> 				<input class="form-control" id="{{id}}" value="{{value}}" /> 			</div>',authPanelPropertyCellSize:' 		{{#each sizes}} 			<label class="{{class}} auth-size-device-header" style="width: 100%">{{this.label}}</label> 			<div class="btn-group" data-toggle="buttons" style="width: 100%;"> 				{{#each ../values}} 					<div class="btn-group"> 						<label class="auth-btn-size-sel" id="{{this.id}}_lab" data-s-m-auth-prop="{{../this.prop}}" data-s-m-auth-value="{{this}}"> 							<input type="radio" name="{{group}}" id="{{../this.prop}}={{this}}">{{this}} 						</label> 					</div> 				{{/each}} 			</div> 		{{/each}}',authPanelPropertyGenLayout:' 		<div class="btn-group" style="width: 100%;"> 			<label class="s-m-auth-btn-action" id="s-m-auth-new-layout-horizontal">{{label_horizontal}}</label> 			<label class="s-m-auth-btn-action" id="s-m-auth-new-layout-vertical">{{label_vertical}}</label> 		</div>',authPanelPropertyJSON:' 			<div class="form-group"> 				<textarea class="form-control" id="{{id}}" rows="10">{{value}}</textarea> 			</div>',authPanelPropertyPROTOTYPE:' 			<div class="form-group"> 				<textarea readonly class="form-control" id="{{id}}" rows="10">{{value}}</textarea> 			</div>'},i={};t.execute=function(e,t){var n=s(e);return n(t)}}),define("syracuse-tablet/html/js/authoring/authoringVal",["require","exports","module","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modal"],function(e,t,n){function s(e,t,n){var r=[];try{u(e,null,t,n,r)}catch(i){r.push(i.message)}return r}function u(e,t,n,r,i){Object.keys(o).forEach(function(s){n[s]!==undefined&&o[s](e,t,n,s,r,i)});var s;n.$items?s=n.$items:n.$article&&(s=[n.$article]),s&&s.forEach(function(t){u(e,n,t,r,i)})}function a(e,t,n,i,s,o){var u=n.$layoutType,a=t&&t.$layoutType,f=["stack","row","cell","hub","hubGroup","tile"];if(f.indexOf(u)<0){o.push(r.text("auth.err.unknown.layout",[u]));return}if(!e)return;switch(u){case"hub":t!=null&&o.push(r.text("auth.err.hub.notroot"));break;case"hubGroup":a!="hub"&&o.push(r.text("auth.err.hubgroup.nohub"));break;case"tile":a!="hubGroup"&&o.push(r.text("auth.err.tile.nohubgroup"))}}function f(e,t,n,i,s,o){var u=n[i];u.match(/^[0-9]+px$/)||o.push(r.text("auth.err.rowheight",[u]))}function l(e,t,n,i,s,o){var u=n[i],a=s.tileColor.values.map(function(e){return e.value});a.indexOf(u)<0&&o.push(r.text("auth.err.bgColor",[i,a.join(", "),u]))}function c(e,t,n,i,s,o){var u=+n[i];u>=1&&u<=12||o.push(r.text("auth.err.cellSize",[i,u]))}function h(e,t,n,i,s,o){var u=n[i],a=s.tileSize.values.map(function(e){return e.value});a.indexOf(u)<0&&o.push(r.text("auth.err.tileSize",[a.join(", "),u]))}var r=e("syracuse-tablet/html/js/helpers/locale"),i=e("syracuse-tablet/html/js/ui/modal");t.validateJSON=function(e,t,n){var o;try{if($.isPlainObject(t))o=t;else{if(!(t!=null&&t.length>0))throw new Error("Unexpected bad JSONtext");o=JSON.parse(t)}var u=s(e,o,n);if(!(u.length>0))return o;var a="\n"+u.join("\n");i.error(r.text("auth.panel.save_error_title"),{message:r.text("auth.panel.save_error_json"),detail:a})}catch(f){i.error(r.text("auth.panel.save_error_title"),{message:r.text("auth.panel.save_error_json"),detail:f})}},t.toSortedJSON=function(e){var t=function(){var e=this,t={},n,r;return Object.keys(e).forEach(function(i){i==="$items"?n=e[i]:i==="$article"?r=e[i]:t[i]=e[i]}),r&&(t.$article=r),n&&(t.$items=n),t};JSON.stringify(e,function(n,r){return $.isPlainObject(r)&&(r.toJSON=t),r});var n=JSON.stringify(e,null," ");return n},t.injectJSON=function(e,t){Object.keys(e.articleSelection).forEach(function(t){delete e.articleSelection[t]}),Object.keys(t).forEach(function(n){e.articleSelection[n]=t[n]})};var o={$layoutType:a,$rowHeight:f,$bgColor:l,$size:h,$widthXs:c,$widthSm:c,$widthMd:c,$widthLg:c}}),define("syracuse-tablet/html/js/authoring/authoringProperties",["require","exports","module","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringVal"],function(e,t,n){function l(e,t,n){var r=v(u.labelPosition,e,t),i=$.extend(!0,{},u.labelAlign);return i.values.forEach(function(e){r==="left"&&e.value==="center"?e.isHidden=!0:e.isHidden=!1}),i}function c(e,t){var n=v(u.arrayDisplay,e,t);return n!=="cardV"?d(u.arrayCardsPerRow,!0):d(u.arrayCardsPerRow,!1)}function h(e,t){var n=v(u.arrayDisplay,e,t);return n!=="cardH"?d(u.arrayCardsPerLine,!0):d(u.arrayCardsPerLine,!1)}function p(e,t){var n=v(u.arrayDisplay,e,t);return n==="table"?d(u.arrayEmptyCells,!0):d(u.arrayEmptyCells,!1)}function d(e,t){var n=$.extend(!0,{},e);return n.values.forEach(function(e){e.isHidden=t}),n}function v(e,t,n){var r=n.articleSelection&&n.articleSelection[e.key];return r=r!=null?r:e["default"],r}function m(e,t,n,r){n.articleSelection[e.key]=r}function g(e,t,n,r){var s={group:"auth_opt_"+t.name,options:[]},o=v(t,n,r),u=!0;t.values.forEach(function(e){s.options.push({id:s.group+"_"+e.value,value:""+e.value,label:e.label,display:e.isHidden?"none":"block"}),u=u&&e.isHidden});var a=i.execute("authPanelPropertyRadio",s),f=$(a);$("label[data-s-m-auth-value='"+(""+o)+"']",f).eq(0).button("toggle"),$("label",f).on("click",function(i){var s=$(i.currentTarget),o=s.attr("data-s-m-auth-value");s.eq(0).button("toggle"),o==="true"?o=!0:o==="false"&&(o=!1),m(t,n,r,o),N(e,n,r)}),e.append(f),u?e.parent(".s-m-panel-auth-prop").hide():e.parent(".s-m-panel-auth-prop").show()}function y(e,t,n,r){var i=!0;t.values.forEach(function(n){var r="auth_opt_"+t.name+"_"+n.value,s=$("#"+r,e),o=n.isHidden?"none":"block";s.css("display",o),i=i&&n.isHidden}),i?e.parent(".s-m-panel-auth-prop").hide():e.parent(".s-m-panel-auth-prop").show()}function b(e,t,n,r){var s={group:"auth_opt_"+t.name,options:[]},o=v(t,n,r);t.values.forEach(function(e){s.options.push({id:s.group+"_"+e.value,value:""+e.value,label:e.label,color:e.value})});var u=i.execute("authPanelPropertyRadioColor",s),a=$(u);$("label[data-s-m-auth-value='"+(""+o)+"']",a).eq(0).button("toggle"),$("label",a).on("click",function(i){var s=$(i.currentTarget),o=s.attr("data-s-m-auth-value");s.eq(0).button("toggle"),o==="true"?o=!0:o==="false"&&(o=!1),m(t,n,r,o),N(e,n,r)}),e.append(a)}function w(e,t,n,r){var s=v(t,n,r),o=i.execute("authPanelPropertyInput",{id:"auth_opt_"+t.name,value:s}),u=$(o);$("input",u).blur(function(){var i=$(this).val();m(t,n,r,i),N(e,n,r)}),e.append(u)}function E(e,t,n,s){var o=["1","2","3","4","5","6","7","8","9","10","11","12"],u=[{prop:"widthXs",label:r.text("auth.cellSize.$widthXs"),"class":"s-m-auth-highlight-xs"},{prop:"widthSm",label:r.text("auth.cellSize.$widthSm"),"class":"s-m-auth-highlight-sm"},{prop:"widthMd",label:r.text("auth.cellSize.$widthMd"),"class":"s-m-auth-highlight-md"},{prop:"widthLg",label:r.text("auth.cellSize.$widthLg"),"class":"s-m-auth-highlight-lg"}],a=i.execute("authPanelPropertyCellSize",{id:"auth_opt_"+t.name,sizes:u,values:o}),f=$(a),l="12";u.forEach(function(e){var t=s.articleSelection&&s.articleSelection["$"+e.prop];t=t||l,l=t,$("label[data-s-m-auth-prop='"+e.prop+"'][data-s-m-auth-value='"+t+"']",f).button("toggle")}),$("label",f).on("click",function(t){var r=$(t.currentTarget);r.eq(0).button("toggle"),u.forEach(function(e){r=f.find("label.active[data-s-m-auth-prop='"+e.prop+"']");if(r.length>0){var t=r.attr("data-s-m-auth-value");s.articleSelection["$"+e.prop]=t}}),N(e,n,s)}),e.append(f)}function S(e,t,n,o){var u=i.execute("authPanelPropertyGenLayout",{id:"auth_opt_"+t.name,label_horizontal:r.text("auth.panel.label_horizontal"),label_vertical:r.text("auth.panel.label_vertical")}),a=$(u);$("label",a).click(function(){$(this).attr("id")==="s-m-auth-new-layout-horizontal"?s.publish(["sm.auth.new.layout"],"horizontal"):s.publish(["sm.auth.new.layout"],"vertical")}),e.append(a)}function x(e,t,n,r){var a=o.toSortedJSON(r.articleSelection),f=i.execute("authPanelPropertyJSON",{id:"auth_opt_"+t.name,value:a}),l=$(f),c=function(t){if(r.type!=="page"){var i=o.validateJSON(!1,t,u);i&&(o.injectJSON(r,i),o.validateJSON(true,o.toSortedJSON(r.articlePage),u)!=null&&N(e,n,r))}else{var a=o.validateJSON(!0,t,u);if(a){var f=o.toSortedJSON(a);s.publish(["sm.auth.change.prop.ui"],f)}}};$("textarea",l).blur(function(){c($(this).val())}),e.append(l)}function T(e,t,n,s){var o=s.control&&s.control.prototype&&s.control.prototype.json;o?o=JSON.stringify(o,null," "):o=r.text("auth.PROTOTYPE_NONE");var u=i.execute("authPanelPropertyPROTOTYPE",{id:"auth_opt_"+t.name,value:o}),a=$(u);e.append(a)}function N(e,t,n){var r=$("textarea#auth_opt_JSON");r.val(o.toSortedJSON(n.articleSelection)),s.publish(["sm.auth.change.prop.ui"],o.toSortedJSON(n.articlePage))}var r=e("syracuse-tablet/html/js/helpers/locale"),i=e("syracuse-tablet/html/js/authoring/authoringHtml"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/authoring/authoringVal"),u={isTitleHidden:{key:"$isTitleHidden","default":!1,values:[{value:!0},{value:!1}],createMarkup:g,type:"default"},labelPosition:{key:"$labelPosition","default":"left",values:[{value:"left"},{value:"top"}],createMarkup:g},labelAlign:{key:"$labelAlign","default":"left",values:[{value:"left"},{value:"center",isHidden:!0},{value:"right"}],createMarkup:g,refreshMarkup:y},theme:{key:"$theme","default":"a",values:[{value:"a"},{value:"b"},{value:"c"}],createMarkup:g},refDescPosition:{key:"$refDescPosition","default":"right",values:[{value:"bottom"},{value:"right"},{value:"left"},{value:"top"},{value:"none"}],createMarkup:g},refDescFormat:{key:"$refDescFormat","default":"desc",values:[{value:"desc"},{value:"title"},{value:"desctitle"},{value:"titledesc"}],createMarkup:g},tileColor:{key:"$bgColor","default":"lime",values:[{value:"transparent"},{value:"purple"},{value:"magenta"},{value:"teal"},{value:"brown"},{value:"lime"},{value:"pink"},{value:"orange"},{value:"blue"},{value:"red"},{value:"green"}],createMarkup:b},tileSize:{key:"$size","default":"medium",values:[{value:"small"},{value:"medium"},{value:"wide"},{value:"large"},{value:"full"},{value:"all"}],createMarkup:g},layoutTitle:{key:"$title","default":"",createMarkup:w},rowHeight:{key:"$rowHeight","default":"200px",createMarkup:w},cellSize:{"default":4,createMarkup:E},arrayDisplay:{key:"$display","default":"table",values:[{value:"table"},{value:"cardV"},{value:"cardH"}],createMarkup:g},arrayCardsPerRow:{key:"$cardsPerRow","default":"1",values:[{value:"1"},{value:"2"},{value:"3"}],createMarkup:g,refreshMarkup:y},arrayCardsPerLine:{key:"$cardsPerLine","default":"1",values:[{value:"1"},{value:"2"},{value:"3"}],createMarkup:g,refreshMarkup:y},arrayEmptyCells:{key:"$emptycell","default":!0,values:[{value:"filled"},{value:"withtitle"},{value:"nodisplay"}],createMarkup:g,refreshMarkup:y},SEPARATOR:{},pageLAYOUTType:{key:"$pageLAYOUTType",createMarkup:S},JSON:{key:"$JSON",createMarkup:x,type:"expert"},PROTOTYPE:{key:"$PROTOYPE",createMarkup:T,type:"expert"}},a;t.initProperties=function(e){if(a)return;var t="auth";Object.keys(u).forEach(function(e){var n=t+"."+e,i=u[e];i.label=r.text(n),i.name=e,i.values&&i.values.forEach(function(e){var t=n+"."+(""+e.value);e.label=r.text(t)})}),a=!0},t.getAllProperties=function(){return u};var f={stack:[],row:[u.rowHeight],"hub-group":[u.layoutTitle],tile:[u.tileColor,u.tileSize],cell:[u.tileColor,u.cellSize]};t.getProperties=function(e,t,n){var r=e.$$elmt,i=[];if(r.hasClass("s-m-layout"))Object.keys(f).some(function(e){var t="s-m-"+e;return r.hasClass(t)?(f[e].forEach(function(e){i.push(e)}),!0):!1});else if(r.hasClass("s-m-field")){var s=l(e,t,n),i=[u.isTitleHidden,u.labelPosition,s,u.theme];t.type==="reference"&&(i.push(u.refDescFormat),i.push(u.refDescPosition))}else if(r.hasClass("s-m-array"))var s=l(e,t,n),o=c(e,t,n),a=h(e,t,n),d=p(e,t,n),i=[u.isTitleHidden,u.labelPosition,s,u.theme,u.arrayDisplay,o,a,d];return r.hasClass("s-m-page")&&i.push(u.pageLAYOUTType),i.push(u.SEPARATOR),i.push(u.JSON),i.push(u.PROTOTYPE),i},t.properties=u}),define("syracuse-tablet/html/js/authoring/authoringHelpers",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/authoring/authoringSData","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/authoring/authoringProperties","syracuse-tablet/html/js/authoring/authoringHtml"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/authoring/authoringSData"),o=e("syracuse-tablet/html/js/ui/modal"),u=e("syracuse-tablet/html/js/authoring/authoringProperties"),a=e("syracuse-tablet/html/js/authoring/authoringHtml"),f=[];t.selectElement=function(e){$(".s-m-auth-selected").removeClass("s-m-auth-selected");var t=$("[data-layout-path='"+e.layoutPath+"']",$("#s-m-app-id")),n=t[0]},t.findControl=function(e){var t=r.getApplication(),n,i=e.attr("id");if(!i)return null;if(t.currentPage.isDashboard()){var s=e.closest(".s-m-control.s-m-vignette").attr("id");if(!s)return null;var o=t.currentPage.getControl(s);if(!o)return null;if(s===i)return o;n=o.getPageControl(i)}else n=t.currentPage.getControl(i);return n},t.getSelectionByPath=function(e){var t=$("#s-m-app-id [data-layout-path="+e+"]");return{$$elmt:t,layoutPath:t.attr("data-layout-path")}},t.getSelectionData=function(e){if(!e||!e.layoutPath)return null;var n=r.getApplication(),s=$.extend(!0,{},n.currentPage.article),o={$items:[s]},u=e.layoutPath.split("-");while(u.length>0){var a=+u.shift();if(isNaN(a))return{articlePage:s,articleSelection:s,title:"Page",type:"page",control:null};var f;o&&o.$items?f=o.$items:o.$article&&(f=[o.$article]),o=f&&f[a]}var l,c,h=t.findControl(e.$$elmt);return h?(l=h.prototype&&h.prototype.data("$title")+" ("+h.$bind+")",c=h.typeName):(l=i.text("auth.label_layout"),c=e.$$elmt.attr("id"),c=c.replace(/\d/g,"")),{articlePage:s,articleSelection:o,title:l,type:c,control:h}},t.createPropertyPanel=function(e,t,n){var r=u.getProperties(t,n);if(!r)return;var i=$('<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">'),s,o=0,l=t.articleSelection;r.forEach(function(e){s="auth_prop_"+e.name;var r=f.indexOf("collapse_"+s)>-1;if(e.createMarkup){var u=$(a.execute("authPanelPropertyGroup",{id:s,expanded:r,label:e.label,type:e.type||"default"})),l=$("#collapse_"+s,u);e.createMarkup(l,e,t,n)}else var u=$(a.execute("authPanelPropertySeperator",{id:s,expanded:r,label:e.label,type:e.type||"default"}));i.append(u),o++}),e.append(i)},t.refreshPropertyPanels=function(e,t){var n=u.getProperties(e,t);if(!n)return;n.forEach(function(n){if(n.refreshMarkup){var r="#collapse_auth_prop_"+n.name,i=$(r);n.refreshMarkup(i,n,e,t)}})},t.destroyPropertyPanel=function(e){e.empty()},t.savePanelStates=function(){var e,t=$(".panel-collapse.collapse.in","#authPanelControlSimple");f=[];for(e=0;e<t.length;e++)f.push(t[e].id)},t.saveAuthoring=function(e,t){var n=e.split("."),r={application:n[0],contract:n[1],representation:n[2],facet:n[3],roles:[],users:[],endpoints:[],saveAsOption:t.saveAs,variantCode:t.code,variantTitle:t.title,variantDescription:t.description,article:t.article};return s.getPageVariants({application:n[0],contract:n[1],representation:n[2],facet:n[3]}).then(function(e){e&&e.some(function(e){var n=e.title===t.title&&e.code===t.code&&e.description===t.description;t.saveAs==="factory_variant"&&e.isFactory!==!0?n=!1:t.saveAs==="global_variant"&&e.isFactory===!0?n=!1:t.saveAs==="personal_copy"&&e.isFactory===!0&&(n=!1),n&&(r.variant=e.$uuid)})}).then(function(){return s.savePageDefinition(r)}).then(function(e){o.diagnoses(i.text("auth.panel.save_ok_title"),{$diagnoses:e.diags})}).fail(function(e){o.diagnoses(i.text("auth.panel.save_error_title"),e)})}}),define("syracuse-tablet/html/js/authoring/authoringPanelRight",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/authoring/authoringHelpers"),u=e("syracuse-tablet/html/js/authoring/authoringHtml"),a=e("syracuse-tablet/html/js/ui/uiUtils");t.Panel=r.defineClass(function(){var e=this;e.$$panel=null},null,{show:function(){var e=this;e._ensurePanel(),e.$$panel.show(),e.$$splitter.show(),e._initDefaults(),$(".btn",e.$$panelSave).eq(0).button("toggle"),$('.nav-pills a[href="#authPanelControl"]').tab("show")},hide:function(){var e=this;e._ensurePanel(),e.$$panel.hide(),e.$$splitter.hide()},notifMainLayoutChanged:function(){var e=this;e.$$panel.find(".tab-content").css({height:e.$$panel.height()-100})},_ensurePanel:function(){var e=this;if(this.$$panel)return;var t={label_control:i.text("auth.panel.label_control"),label_edit:i.text("auth.panel.label_page"),label_close:i.text("auth.panel.label_close"),label_apply:i.text("auth.panel.label_apply"),label_simple:i.text("auth.panel.label_simple"),label_expert:i.text("auth.panel.label_expert"),label_control_title:i.text("auth.panel.label_control_title"),label_control_type:i.text("auth.panel.label_control_type")};e.$$panel=$("#s-m-auth-panel-right-id"),e.$$panel.append($(u.execute("authPanelRightStructure",t))),e._getDomObjects(),e._initSplitter(),e._initDomEvents(),s.subscribe(e,["sm.main.layout.changed"]),s.subscribe(e,["sm.auth.set.page"]),s.subscribe(e,["sm.auth.set.selection"]),s.subscribe(e,["sm.auth.change.prop.ui"])},_getDomObjects:function(){var e=this;e.$$panelControlSimple=$("#authPanelControlSimple"),e.$$panelControlExpert=$("#authPanelControlExpert"),e.$$authPageName=$("#authPageName"),e.$$panelControlTitle=$("#authPanelControlTitle"),e.$$panelControlType=$("#authPanelControlType"),e.$$panelEdit=$("#authPanelEdit")},_initDomEvents:function(){var e=this},_initDefaults:function(){var e=this;e.$$panelControlTitle.text(""),e.$$panelControlType.text(""),o.destroyPropertyPanel(e.$$panelControlSimple)},notifAuthSetPage:function(e){var t=this;t.currentPageName=e.state.authoringName,t.currentPageId=e.id,t.$$authPageName.text(t.currentPageName)},notifAuthChangePropUi:function(e){var t=this},notifAuthSetSelection:function(e){var t=this;t.$$panelControlTitle.text(""),t.$$panelControlType.text("");var n=o.getSelectionByPath(e);o.savePanelStates(),o.savePanelStates(),o.destroyPropertyPanel(t.$$panelControlSimple);if(!n)return;var r=o.getSelectionData(n);if(r){t.$$panelControlTitle.text(r.title||""),t.$$panelControlType.text(r.type||"");var i=r.articleSelection;i&&o.createPropertyPanel(t.$$panelControlSimple,n,r)}},getPageArticle:function(){return this.getPage().article},getPage:function(){var e=$("#s-m-app-id").find("#"+this.currentPageId).smPageController();if(!e)throw new Error("Page not found "+this.currentPageId);if(!e.isActive())throw new Error("Page not active "+this.currentPageId);return e},_initSplitter:function(){var e=this;e.$$splitter=$("#s-m-auth-splitter-right-id"),e.$$splitter.draggable({axis:"x",stop:function(e,t){var n=$(this),r=n.position(),i=n.width(),s=$(window).width()-r.left-i;a.triggerResizeInternal({layout:{authPanelRight:{width:s}}})}})}})}),define("syracuse-tablet/html/js/authoring/authoringPanelLeft",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/authoring/authoringHtml"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/notifications"),s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/authoring/authoringHelpers"),u=e("syracuse-tablet/html/js/authoring/authoringHtml"),a;t.Panel=r.defineClass(function(){var e=this;e.$$panel=null,e.$$page=$("#s-m-app-id")},null,{show:function(){var e=this;e._ensurePanel(),e.$$panel.show(),e.$$splitter.show()},hide:function(){var e=this;e._ensurePanel(),e.$$panel.hide(),e.$$splitter.hide()},notifMainLayoutChanged:function(){var e=this;$("#s-m-auth-tree-box",e.$$panel).css({height:e.$$panel.height()})},_ensurePanel:function(){var e=this;if(this.$$panel)return;var t={};e.$$panel=$("#s-m-auth-panel-left-id"),e.$$panel.append($(u.execute("authPanelLeftStructure",t))),e._getDomObjects(),e._initSplitter(),i.subscribe(e,["sm.main.layout.changed"]),i.subscribe(e,["sm.auth.set.page"]),i.subscribe(e,["sm.auth.change.prop.ui"]),i.subscribe(e,["sm.auth.set.selection"]),i.subscribe(e,["sm.auth.remove.selection"]),i.subscribe(e,["sm.auth.hover.in"]),i.subscribe(e,["sm.auth.hover.out"])},_getDomObjects:function(){var e=this;e.$$structureRoot=$("#auth-structure-root-id",e.$$panel)},_initSplitter:function(){var e=this;e.$$splitter=$("#s-m-auth-splitter-left-id"),e.$$splitter.draggable({axis:"x",stop:function(e,t){var n=$(this),r=n.position(),i=n.width(),o=r.left;s.triggerResizeInternal({layout:{authPanelLeft:{width:o}}})}})},notifAuthSetPage:function(e){var t=this;t._buildPageStructTree(e.article),t._initDomEvents();var n=e.article.$layoutType==="hub"?"horizontal":"vertical";$("#page_design_"+n,t.$$panel).eq(0).parent().button("toggle")},notifAuthChangePropUi:function(e){var t=this,n=JSON.parse(e);t._buildPageStructTree(n),t._initDomEvents()},notifAuthSetSelection:function(e){var t=this,n=t._getItemByPath(e);n.length>0&&(n.addClass("s-m-auth-selected"),t.$$panel.animate({scrollTop:n.offset().top},500))},notifAuthRemoveSelection:function(e){var t=this,n=t._getItemByPath(e);n.removeClass("s-m-auth-selected")},notifAuthHoverIn:function(e){var t=this,n=t._getItemByPath(e);n.addClass("s-m-auth-hover")},notifAuthHoverOut:function(e){var t=this,n=t._getItemByPath(e);n.removeClass("s-m-auth-hover")},_getItemByPath:function(e){var t=this;return $("[data-layout-path="+e+"]",t.$$panel)},_buildPageStructTree:function(e){function n(e,t,r,i){var s,u,a=$("[data-layout-path="+r+"]",i);if(!a.hasClass("s-m-auth"))return;if(e.$layoutType)s=e.$title?e.$title+" ("+e.$layoutType+")":e.$layoutType,u=e.$layoutType;else{var f=o.findControl(a),l=f&&f.prototype&&f.prototype.data("$title");s=l?l+" ("+e.$bind+")":e.$bind+" ("+e.$bind+")",u=f&&f.typeName||"field"}var c=$('<li class="s-m-auth-tree s-m-auth-tree-'+u+'">').appendTo(t);c.append('<p data-layout-path="'+r+'">'+s+"</p>");if(e&&e.$items){var h=$('<ul class="s-m-auth-tree">').appendTo(c),p=0;e.$items.forEach(function(e){n(e,h,r+"-"+p,a),p++})}else if(e.$article&&e.$article.$items){var h=$('<ul class="s-m-auth-tree">').appendTo(c);n(e.$article,h,r+"-0",a)}}var t=this;t.$$structureRoot.empty();var r=$('<li class="s-m-auth-tree s-m-auth-tree-page">').appendTo(t.$$structureRoot);r.append('<p data-layout-path="0#page">page</p>');var i=$('<ul class="s-m-auth-tree">').appendTo(r);n(e,r,"0",t.$$page)},_initDomEvents:function(){var e=this;$("li.s-m-auth-tree > p").mouseover(function(t){var n=$(t.currentTarget);if(a){a.removeClass("s-m-auth-hover");var r=a.attr("data-layout-path");i.publishEx(["sm.auth.hover.out"],{exclude:[e]},r)}n.addClass("s-m-auth-hover"),a=n;var r=n.attr("data-layout-path");return i.publishEx(["sm.auth.hover.in"],{exclude:[e]},r),!1}),$("li.s-m-auth-tree > p").mouseout(function(t){var n=$(t.currentTarget);n.removeClass("s-m-auth-hover");var r=n.attr("data-layout-path");i.publishEx(["sm.auth.hover.out"],{exclude:[e]},r)}),$("li.s-m-auth-tree > p").click(function(t){var n=$(t.currentTarget),r,s=$(".s-m-auth-selected",e.$$panel);return s.removeClass("s-m-auth-selected"),r=s.attr("data-layout-path"),i.publishEx(["sm.auth.remove.selection"],{exclude:[e]},r),n.addClass("s-m-auth-selected"),r=n.attr("data-layout-path"),i.publishEx(["sm.auth.set.selection"],{exclude:[e]},r),!1})}})}),define("syracuse-tablet/html/js/authoring/authoringPage",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/utils"),s=e("syracuse-tablet/html/js/helpers/notifications"),o,u=[".s-m-array .s-m-control",".s-m-array .s-m-layout",".s-m-control.pageheader",".s-m-control.pagefooter",".s-m-control.navigationpanel",".s-m-control.pageactionpanelregular"];t.AuthPage=i.defineClass(function(){var t=this;s.subscribe(t,["sm.auth.hover.in"]),s.subscribe(t,["sm.auth.hover.out"]),s.subscribe(t,["sm.auth.set.selection"]),s.subscribe(t,["sm.auth.remove.selection"]),t.__onElementClick=t._onElementClick.bind(t),t.__onElementMouseOver=t._onElementMouseOver.bind(t),t.__onElementMouseOut=t._onElementMouseOut.bind(t),t.$$page=$("#s-m-app-id")},null,{enableAuthCss:function(){var e=this;$(".s-m-control").addClass("s-m-auth"),$(".s-m-layout").addClass("s-m-auth"),$(".s-m-layout").addClass("s-m-auth"),$(".s-m-page").addClass("s-m-auth"),u.forEach(function(e){$(e).removeClass("s-m-auth")}),$(".s-m-auth",e.$$page).on("click",e.__onElementClick),$(".s-m-auth",e.$$page).on("mouseover",e.__onElementMouseOver),$(".s-m-auth",e.$$page).on("mouseout",e.__onElementMouseOut),$("#s-m-app-container-id").css({overflow:"auto"})},disableAuthCss:function(){var e=this;$("#s-m-app-container-id").css({overflow:"hidden"}),$(".s-m-auth",e.$$page).off("click",e.__onElementClick),$(".s-m-auth",e.$$page).off("mouseover",e.__onElementMouseOver),$(".s-m-auth",e.$$page).off("mouseout",e.__onElementMouseOut),$(".s-m-auth",e.$$page).removeClass("s-m-auth")},_onElementClick:function(e){var t=this,n=$(e.currentTarget),r=$(".s-m-auth-selected",t.$$page);r.removeClass("s-m-auth-selected");var o=r.attr("data-layout-path");s.publishEx(["sm.auth.remove.selection"],{exclude:[t]},o),n.addClass("s-m-auth-selected"),o=n.attr("data-layout-path"),s.publishEx(["sm.auth.set.selection"],{exclude:[t]},o);if(i.stopClickEvent(e))return!1},_onElementMouseOver:function(e){var t=this,n=$(e.currentTarget);return o&&(o.removeClass("s-m-auth-hover"),s.publishEx(["sm.auth.hover.out"],{exclude:[t]},o.attr("data-layout-path"))),s.publishEx(["sm.auth.hover.in"],{exclude:[t]},n.attr("data-layout-path")),n.addClass("s-m-auth-hover"),o=n,!1},_onElementMouseOut:function(e){var t=this,n=$(e.currentTarget);n.removeClass("s-m-auth-hover"),s.publishEx(["sm.auth.hover.out"],{exclude:[t]},n.attr("data-layout-path"))},notifAuthHoverIn:function(e){var t=this,n=t._getItemByPath(e);n.addClass("s-m-auth-hover")},notifAuthHoverOut:function(e){var t=this,n=t._getItemByPath(e);n.removeClass("s-m-auth-hover")},notifAuthSetSelection:function(e){var t=this,n=t._getItemByPath(e);n&&n.length>0&&(n.addClass("s-m-auth-selected"),t._scrollToVisibleArea(n))},notifAuthRemoveSelection:function(e){var t=this,n=t._getItemByPath(e);n.removeClass("s-m-auth-selected")},_getItemByPath:function(e){var t=this;return $("[data-layout-path="+e+"]",t.$$page)},getCurrentSelectionPath:function(){var e=this,t=$(".s-m-auth-selected",e.$$page);return t.attr("data-layout-path")},_scrollToVisibleArea:function(e){var t=this,n=r.getApplication().currentPage,i=n&&n._gestureMgr||n&&n.rootLayout&&n.rootLayout._gestureMgr;i&&i.makeVisible(e)}})}),define("syracuse-tablet/html/js/ui/modalChooseDevice",["require","exports","module","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals"],function(e,t,n){var r=e("syracuse-tablet/html/js/ui/modal"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/globals"),o='	<div class="modal fade" id="modal-endpoint" tabindex="-1" role="dialog">     <div class="modal-dialog"> 		<div class="modal-content"> 		    <div class="modal-header"> 				<h4 class="modal-title" id="myModalLabel">{{title}}</h4> 		    </div> 		    <div class="modal-body"> 				<div class="form-group"> 					<div class="list-group" id="modal-device-select-list-id"> 						{{#each devices}} 							<a href="#" class="list-group-item" data-auth-device="{{name}}">{{label}}</a> 						{{/each}} 					</div> 				</div> 		    </div> 		    <div class="modal-footer">     			<button type="button" class="btn btn-default" data-action="cancel">{{label_cancel}}</button> 			</div> 		</div> 	</div> 	</div>',u=function(e){var t=$.Deferred();try{var n=[],u=s.getSiteLayout(),a=u.getDeviceTemplates();for(var f in a)n.push({name:f,label:i.textOpt("auth.device."+f+".title")||f});var l=Handlebars.compile(o),c={title:i.text("auth.device.title"),devices:n,label_cancel:i.text("auth.device.cancel")};l=l(c),r.modal(l,function(e,n){n.find("#modal-device-select-list-id a").on("click",function(){var e=$(this).attr("data-auth-device");n.modal("hide"),t.resolve({action:"ok",device:e})}),e==="cancel"&&t.resolve({action:"cancel"})})}catch(h){t.reject(h)}finally{return t.promise()}};t.chooseDevice=u}),define("syracuse-tablet/html/js/authoring/authoringHeader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHtml","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modalChooseDevice"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/authoring/authoringHtml"),u=e("syracuse-tablet/html/js/ui/uiUtils"),a=e("syracuse-tablet/html/js/helpers/globals"),f=e("syracuse-tablet/html/js/ui/modalChooseDevice");t.Panel=r.defineClass(function(){var e=this;e.$$panel=null},null,{show:function(){var e=this;e._ensurePanel(),e.$$panel.show(),e._initDefaults()},hide:function(){var e=this;e._ensurePanel(),e.$$panel.hide()},_ensurePanel:function(){var e=this;if(this.$$panel)return;var t={label_settings:i.text("auth.device.settings"),label_save:i.text("auth.panel.label_save"),label_close:i.text("auth.panel.label_close")};e.$$panel=$("#s-m-auth-panel-header-id"),e.$$panel.append($(o.execute("authPanelHeader",t))),e._getDomObjects(),e._initDomEvents(),s.subscribe(e,["sm.main.layout.changed"]),s.subscribe(e,["sm.auth.set.selection"]),s.subscribe(e,["sm.auth.change.prop.ui"])},_getDomObjects:function(){var e=this;e.$$orientation=$("#s-m-auth-orientation-id",e.$$panel)},_initDomEvents:function(){var e=this;$("#s-m-auth-settings-id").on("click",e._onChooseDevice.bind(e)),$("#s-m-auth-scale-id").on("click",e._onScaleDevice.bind(e)),$("#s-m-auth-vertical-id").on("click",e._onOrientation.bind(e)),$("#s-m-auth-horizontal-id").on("click",e._onOrientation.bind(e)),$("#auth-btn-save-id").on("click",e._onSave.bind(e)),$("#auth-btn-close-id").on("click",e._onClose.bind(e))},_initDefaults:function(){var e=this},notifMainLayoutChanged:function(){var e=this,t=a.getSiteLayout(),n=t.getCurrentLayoutSettings();n.pageParameters.forceAutoScale===!0?$("#s-m-auth-scale-id").addClass("active"):$("#s-m-auth-scale-id").removeClass("active"),n.pageParameters.orientation==="landscape"?($("#s-m-auth-horizontal-id").addClass("active"),$("#s-m-auth-vertical-id").removeClass("active")):($("#s-m-auth-horizontal-id").removeClass("active"),$("#s-m-auth-vertical-id").addClass("active"))},notifAuthChangePropUi:function(e){var t=this},notifAuthSetSelection:function(e){var t=this},_setDeviceSize:function(e,t){var n=this,r={layout:{pageParameters:{}}};e&&(r.layout.pageParameters.device=e),t&&(r.layout.pageParameters.orientation=t),u.triggerResizeInternal(r)},_onClose:function(){var e=this;s.publish(["sm.auth.close"])},_onSave:function(){var e=this;s.publish(["sm.auth.save"])},_onChooseDevice:function(e){var t=this,n=a.getSiteLayout(),r=n.getCurrentLayoutSettings();f.chooseDevice(r.pageParameters.device).then(function(e){e.action==="ok"&&t._setDeviceSize(e.device)}).fail(function(e){a.getModal().error(e)})},_onScaleDevice:function(e){var t=a.getSiteLayout(),n=t.getCurrentLayoutSettings(),r={layout:{pageParameters:{forceAutoScale:n.pageParameters.forceAutoScale===!1}}};u.triggerResizeInternal(r)},_onOrientation:function(e){var t=this,n=$(e.currentTarget).attr("data-auth-orientation");n&&t._setDeviceSize(null,n)}})}),define("syracuse-tablet/html/js/authoring/authoringFooter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHtml"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/notifications"),s=e("syracuse-tablet/html/js/authoring/authoringHtml");t.Panel=r.defineClass(function(){var e=this;e.$$panel=null},null,{show:function(){var e=this;e._ensurePanel(),e.$$panel.show(),e._initDefaults()},hide:function(){var e=this;e._ensurePanel(),e.$$panel.hide()},_ensurePanel:function(){var e=this;if(this.$$panel)return;var t={};e.$$panel=$("#s-m-auth-panel-footer-id"),e.$$panel.append($(s.execute("authPanelFooter",t))),e._getDomObjects(),e._initDomEvents(),i.subscribe(e,["sm.main.layout.changed"]),i.subscribe(e,["sm.auth.set.selection"]),i.subscribe(e,["sm.auth.change.prop.ui"])},_getDomObjects:function(){var e=this},_initDomEvents:function(){var e=this},_initDefaults:function(){var e=this},notifMainLayoutChanged:function(){var e=this},notifAuthChangePropUi:function(e){var t=this},notifAuthSetSelection:function(e){var t=this}})}),define("syracuse-tablet/html/js/ui/modalSaveAuth",["require","exports","module","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/ui/modal"),i=e("syracuse-tablet/html/js/helpers/locale"),s='	<div class="modal fade" id="modal-endpoint" tabindex="-1" role="dialog">     <div class="modal-dialog"> 		<div class="modal-content"> 		    <div class="modal-header"> 				<h4 class="modal-title">{{title}}</h4> 				<label>{{page}}</label> 		    </div> 		    <div class="modal-body"> 				<div class="form-group"> 					<label>{{label_code}}</label> 					<input class="form-control" id="authCode" value="{{authCodeDefault}}" /> 				</div> 				<div class="form-group"> 					<label>{{label_title}}</label> 					<input class="form-control" id="authTitle" value="{{authTitleDefault}}" /> 				</div> 				<div class="form-group"> 					<label>{{label_description}}</label> 					<input class="form-control" id="authDescription" value="{{authDescriptionDefault}}"  /> 				</div> 				<label>{{label_saveas_option}}</label> 				<div class="btn-group btn-group-justified" data-toggle="buttons"> 					<div class="btn-group"> 						<label class="btn btn-primary"> 							<input type="radio" name="options" id="personal_copy" checked>{{label_personal}} 						</label> 					</div> 					<div class="btn-group"> 						<label class="btn btn-primary"> 							<input type="radio" name="options" id="global_variant"> {{label_global}} 						</label> 					</div> 					<div class="btn-group"> 						<label class="btn btn-primary active"> 							<input type="radio" name="options" id="factory_variant">{{label_factory}} 						</label> 					</div> 				</div> 			</div> 		    <div class="modal-footer"> 		        <button type="button" class="btn" data-action="validate">{{label_save}}</button>     			<button type="button" class="btn btn-default" data-action="cancel">{{label_cancel}}</button> 			</div> 		</div> 	</div> 	</div>',o=function(e){var t=$.Deferred();try{try{var n=Handlebars.compile(s),o={title:i.text("auth.save.title"),page:e.pageName,authCodeDefault:e.code,authTitleDefault:e.title,authDescriptionDefault:e.description,label_code:i.text("auth.panel.label_code"),label_title:i.text("auth.panel.label_title"),label_description:i.text("auth.panel.label_description"),label_saveas_option:i.text("auth.panel.label_saveas_option"),label_personal:i.text("auth.panel.label_personal"),label_global:i.text("auth.panel.label_global"),label_factory:i.text("auth.panel.label_factory"),label_save:i.text("auth.panel.label_save"),label_cancel:i.text("auth.panel.label_cancel")};e,n=n(o),r.modal(n,function(e,n){var r=n.find("#authCode").val(),i=n.find("#authTitle").val(),s=n.find("#authDescription").val();e==="validate"?t.resolve({action:"ok",code:r,title:i,description:s,saveAs:$("input:radio:checked",n)[0].id}):e==="cancel"&&t.resolve({action:"cancel"})})}catch(u){t.reject(u)}}catch(u){t.reject(u)}finally{return t.promise()}};t.selectContext=o}),define("syracuse-tablet/html/js/authoring/authoring",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/authoring/authoringHelpers","syracuse-tablet/html/js/authoring/authoringPanelRight","syracuse-tablet/html/js/authoring/authoringPanelLeft","syracuse-tablet/html/js/authoring/authoringPage","syracuse-tablet/html/js/authoring/authoringHeader","syracuse-tablet/html/js/authoring/authoringFooter","syracuse-tablet/html/js/authoring/authoringArticleGen","syracuse-tablet/html/js/authoring/authoringVal","syracuse-tablet/html/js/ui/modalSaveAuth","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/authoring/authoringProperties","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/authoring/authoringHelpers"),u=e("syracuse-tablet/html/js/authoring/authoringPanelRight"),a=e("syracuse-tablet/html/js/authoring/authoringPanelLeft"),f=e("syracuse-tablet/html/js/authoring/authoringPage"),l=e("syracuse-tablet/html/js/authoring/authoringHeader"),c=e("syracuse-tablet/html/js/authoring/authoringFooter"),h=e("syracuse-tablet/html/js/authoring/authoringArticleGen"),p=e("syracuse-tablet/html/js/authoring/authoringVal"),d=e("syracuse-tablet/html/js/ui/modalSaveAuth"),v=e("syracuse-tablet/html/js/ui/modal"),m=e("syracuse-tablet/html/js/authoring/authoringProperties"),g=e("syracuse-tablet/html/js/ui/uiUtils"),y=e("syracuse-tablet/html/js/helpers/locale"),b,w;t.toggleDesignPage=function(){b||(b=new E),b.toggleDesignPage()};var E=r.defineClass(function(){var e=this;e.$$authPanel=null,e.isActive=!1,e.rightPanel=new u.Panel,e.leftPanel=new a.Panel,e.headerPanel=new l.Panel,e.footerPanel=new c.Panel,e.authPage=new f.AuthPage,s.subscribe(e,["sm.page.loaded"]),s.subscribe(e,["sm.auth.change.prop.ui"]),s.subscribe(e,["sm.auth.close"]),s.subscribe(e,["sm.auth.save"]),s.subscribe(e,["sm.auth.new.layout"]),s.subscribe(e,["sm.auth.set.page"]),m.initProperties(o)},null,{toggleDesignPage:function(){var e=this;e.isActive?e.disable():e.enable(),g.triggerResizeInternal()},enable:function(){var e=this;e.rightPanel.show(),e.leftPanel.show(),e.headerPanel.show(),e.footerPanel.show();var t=i.getApplication().currentPage;s.publish(["sm.auth.set.page"],t),g.triggerResizeInternal({layout:{authPanelLeft:{visible:!0},authPanelRight:{visible:!0},authPanelHeader:{visible:!0},authPanelFooter:{visible:!1},pageParameters:{forcePreview:!0}}}),e.authPage.enableAuthCss(),e.isActive=!0},disable:function(){var e=this;e.rightPanel.hide(),e.leftPanel.hide(),e.headerPanel.hide(),e.footerPanel.hide(),e.isActive=!1,e.authPage.disableAuthCss(),g.triggerResizeInternal({layout:{authPanelLeft:{visible:!1},authPanelRight:{visible:!1},authPanelHeader:{visible:!1},authPanelFooter:{visible:!1},pageParameters:{forcePreview:!1}}}),e.isActive=!1},notifPageLoaded:function(e){var t=this;if(!t.isActive)return;if(e&&e.state&&e.state.disableAuthoring){t.authPage.disableAuthCss(),t.toggleDesignPage();return}e&&!e.isVignette&&s.publish(["sm.auth.set.page"],e),t.authPage.enableAuthCss()},notifAuthSetPage:function(e){var t=this;t.currentPageName=e.state.authoringName},notifAuthChangePropUi:function(e){var t=this;t._updateLayoutPage(e)},notifAuthClose:function(e){var t=this;t.disable()},notifAuthSave:function(){var e=this,t=e.rightPanel.getPageArticle(),n=p.validateJSON(!0,t,m.getAllProperties());if(!n)return;w=w||{code:y.text("auth.panel.authCodeDefault"),title:y.text("auth.panel.authTitleDefault"),description:y.text("auth.panel.authDescriptionDefault"),saveAs:"personal_copy"},w.pageName=e.currentPageName,d.selectContext(w).then(function(t){if(t.action==="ok"){w=t;var r={code:t.code,title:t.title,description:t.description,saveAs:t.saveAs,article:n};o.saveAuthoring(e.currentPageName,r)}}).fail(function(e){i.getModal().error(e)})},notifAuthNewLayout:function(e){v.simpleConfirm(y.text("auth.layout.change"),function(t){if(t){var n=i.getApplication().currentPage;h.genNewArticle({page:n,orientation:e}).then(function(e){var t=p.toSortedJSON(e);s.publish(["sm.auth.change.prop.ui"],t)}).fail(function(e){v.error(e)})}})},_updateLayoutPage:function(e){var t=this,n=i.getApplication().currentPage;try{var r=JSON.parse(e)}catch(u){}if(!r)return;var a=t.authPage.getCurrentSelectionPath();o.savePanelStates(),n.updateLayout(r).then(function(){t.authPage.enableAuthCss(),a&&s.publish(["sm.auth.set.selection"],a)}).fail(function(e){v.error("Error",e)})}})}),define("syracuse-tablet/html/js/ui/developmentPage",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/storage/localStorage"],function(e,t,n){function a(e){s.setItem("devPanelOpen",e?"true":"false")}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/storage/localStorage"),o='	<div id="page_dev_mode" style="margin: 0; width: auto; position: absolute; z-index: 9999">     <div class="modal-dialog" style="margin: 0; width: auto;"> 		<div class="modal-content" style="width: 230px;"> 		    <div class="modal-header"> 				<h4 class="modal-title">{{title}}</h4> 		    </div> 		    <div class="modal-body"> 				<div class="form-group"> 					<label>{{label_device}}</label>					<select class="form-control" id="dev-select-device"> 					{{#each devices}}						<option value="{{this.device}}.{{this.orientation}}" {{#if this.selected}}selected{{/if}}>						{{this.description}}						</option>					{{/each}}					</select>					<span class="input-group"> 						<input id="dev-device-scale" type="checkbox" {{#if scaleChecked}}checked{{/if}}>{{label_scale}} 					</span> 				</div> 				<div class="form-group"> 					<span class="input-group"> 						<input id="dev-cache" type="checkbox" {{#if cacheChecked}}checked{{/if}}>{{label_cache}} 	  				</span> 				</div> 			</div> 		    <div class="modal-footer"> 				<button type="button" class="btn" id="btn_dev_close">{{label_close}}</button> 				<button type="button" class="btn btn-default" id="btn_dev_apply">{{label_apply}}</button>     			<button type="button" class="btn" id="btn_dev_ok">{{label_ok}}</button> 			</div> 		</div> 	</div> 	</div>',u=function(){a(!0);if($("#page_dev_mode").is(":visible"))return;var e=Handlebars.compile(o),t=r.getCache(),n=r.getSiteLayout(),u=n.getDeviceTemplates(),f=n.getCurrentLayoutSettings(),l=s.getItem("devPanelDevice"),c={title:"Development settings",label_device:"Device",devices:[],label_scale:"Scale if needed",label_cache:"Disable caching",label_close:"Cancel",label_ok:"Ok",label_apply:"Apply",scaleChecked:s.getItem("devPanelScale")==="true",cacheChecked:s.getItem("devPanelCache")==="true"};c.devices.push({device:"<No emulation>",orientation:"landscape",description:"<No emulation>",selected:l==="<No emulation>.landscape"});for(var h in u)u[h].orientations.forEach(function(e){var t=h,n=e,r={device:h,orientation:e,description:t+" ("+e+")"};r.selected=l===r.device+"."+r.orientation,c.devices.push(r)});e=e(c),$("body").append($(e));var p=$("#page_dev_mode");p.draggable(),$("#btn_dev_ok",p).on("click",function(){d(),p.remove()}),$("#btn_dev_apply",p).on("click",function(){d()}),$("#btn_dev_close",p).on("click",function(){a(!1),p.remove()});var d=function(){var e=p.find("#dev-select-device").val(),n=e.split("."),r={layout:{pageParameters:{}}};s.setItem("devPanelDevice",e),e==="<No emulation>.landscape"?(r.layout.pageParameters.forcePreview=!1,r.layout.pageParameters.forceAutoScale=!1):(r.layout.pageParameters.device=n[0],r.layout.pageParameters.orientation=n[1],r.layout.pageParameters.forcePreview=!0,$("#dev-device-scale",p).is(":checked")===!0?(r.layout.pageParameters.forceAutoScale=!0,s.setItem("devPanelScale","true")):(r.layout.pageParameters.forceAutoScale=!1,s.setItem("devPanelScale","false"))),$("#dev-cache",p).is(":checked")===!0?(s.setItem("devPanelCache","true"),t.disableCache(!0)):(s.setItem("devPanelCache","false"),t.disableCache(!1)),i.triggerResizeInternal(r)};d()};t.wasActive=function(){return s.getItem("devPanelOpen")==="true"},t.show=u}),define("syracuse-tablet/html/js/storage/storageInterface",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){function s(){this.infoString="Interface only"}function u(e,t,n,r,i){var s={$status:e};return t&&(s.$data=t),i&&(s.$metaData=i),n&&(s.$message=n),r&&(s.$exception=r),s}function a(e,t){return u(i.ERROR,null,e,t)}var r=e("syracuse-tablet/html/js/helpers/utils"),i={OK:1,NOT_FOUND:2,ERROR:3},o=r.defineClass(s,null,{getInfo:function(){return this.infoString},init:function(){throw new Error("Not implemented!")},query:function(e){throw new Error("Not implemented!")},put:function(e){throw new Error("Not implemented!")},read:function(e){throw new Error("Not implemented!")},remove:function(e){throw new Error("Not implemented!")},clearCollection:function(){throw new Error("Not implemented!")}});t.StorageInterface=o,t.StatusCodes=i,t.buildResult=u,t.buildErrResult=a,t.databaseName="sage-tablet-db"}),define("syracuse-tablet/html/js/storage/storageWinJS",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/helpers/winjs"],function(e,t,n){function u(){this.infoString="WinJS storage interface"}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/storage/storageInterface"),o=e("syracuse-tablet/html/js/helpers/winjs"),a=r.defineClass(u,s.StorageInterface,{init:function(){var e=i.isTestEnvironment();return o.callWinJS("winjsDB","init",{useTestDatabase:e})},queryAppConfigs:function(){return o.callWinJS("winjsDB","queryAppConfigs",{})},createAppConfig:function(e){return o.callWinJS("winjsDB","createAppConfig",{app:e})},readAppConfig:function(e){return o.callWinJS("winjsDB","readAppConfig",{appid:e})},deleteAppConfig:function(e){return o.callWinJS("winjsDB","deleteAppConfig",{appid:e})}});t.StorageInterface=a,t.isAvailable=function(){return o.isAvailable()}}),define("syracuse-tablet/html/js/storage/storageWebSQL",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){function f(){this.infoString="WebSQL storage interface",this.databaseVersion=u,this.databaseName=s.databaseName,this.useTestDatabase=!1,this.databaseSize=2097152,this.db=null}function c(e,t){return"CODE: "+t.code+" MESSAGE: "+t.message}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/storage/storageInterface"),o=e("syracuse-tablet/html/js/helpers/logger").getLogger("webSQL"),u=16,a=["DROP TABLE IF EXISTS sdata_meta","CREATE TABLE sdata_meta ( key text, collection text, endpoint text, context text, id text, etag text, last_read text, last_updated text)","DROP INDEX IF EXISTS sdata_meta_pk","CREATE UNIQUE INDEX sdata_meta_pk ON sdata_meta (key, collection, endpoint, context)","DROP INDEX IF EXISTS sdata_meta_id","CREATE UNIQUE INDEX sdata_meta_id ON sdata_meta (id)","DROP TABLE IF EXISTS sdata_objects","CREATE TABLE sdata_objects ( id text, data text )","DROP INDEX IF EXISTS sdata_objects_pk","CREATE UNIQUE INDEX sdata_objects_pk ON sdata_objects (id)"],l=r.defineClass(f,s.StorageInterface,{init:function(){var e=$.Deferred(),t=this,n=i.isTestEnvironment();t.databaseName=s.databaseName+"-test",t.useTestDatabase=n;try{t._openDB().then(function(t){e.resolve(t)}).fail(function(t){e.reject(t)})}catch(r){e.reject(s.buildErrResult("error initializing database",r))}finally{return e.promise()}},put:function(e){var t=$.Deferred(),n=this;try{var i=n.db;o&&o("PUT: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var u=JSON.stringify(e.$context),a=[e.$key,e.$collection,e.$endpoint,u],f=function(r){n._executeSql("INSERT INTO sdata_objects (data, id) values (?, ?)",[JSON.stringify(e.$data),r.$id]).then(function(){t.resolve(s.buildResult(s.StatusCodes.OK,e.$data))}).fail(function(e){t.reject(e)})},l=function(r){n._executeSql("UPDATE sdata_objects set data = ? where id = ?",[JSON.stringify(e.$data),r.$id]).then(function(n){t.resolve(s.buildResult(s.StatusCodes.OK,e.$data))}).fail(function(e){t.reject(e)})};n._readMetaData(u,a).then(function(i){i&&i.$etag===e.$data.$etag?t.resolve(s.buildResult(s.StatusCodes.OK,e.$data)):i?(i.$etag=e.$data.$etag,i.$lastUpdated=r.getCurISODateTime(),n._writeMetaData(i).then(function(){l(i)}).fail(function(e){t.reject(e)})):(i={$key:e.$key,$collection:e.$collection,$endpoint:e.$endpoint,$context:e.$context,$etag:e.$data.$etag,$lastUpdated:r.getCurISODateTime()},n._writeMetaData(i).then(function(e){f(e)}).fail(function(e){t.reject(e)}))}).fail(function(e){t.reject(e)})}catch(c){t.reject(s.buildErrResult("error writing to database",c))}finally{return t.promise()}},read:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("READ: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=JSON.stringify(e.$context),u=[e.$key,e.$collection,e.$endpoint,i];n._readMetaData(i,u).then(function(e){e?n._executeSql("SELECT * FROM sdata_objects where id = ?",[e.$id]).then(function(n){try{n.rows.length<=0?t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND)):t.resolve(s.buildResult(s.StatusCodes.OK,JSON.parse(n.rows.item(0).data),null,null,{$lastRead:e.$lastRead,$lastUpdated:e.$lastUpdated}))}catch(r){t.reject(s.buildErrResult("error reading from database",r))}}).fail(function(e){t.reject(e)}):t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND))}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error reading from database",a))}finally{return t.promise()}},query:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("QUERY: ",JSON.stringify(e));if(!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=JSON.stringify(e.$context),u=[e.$collection,e.$endpoint,i];n._executeSql("SELECT o.*, m.last_read, m.last_updated FROM sdata_objects o INNER JOIN sdata_meta m ON (o.id = m.id and m.collection = ? and m.endpoint = ? and m.context = ?)",u).then(function(e){var n=[],r=[];try{for(var i=0;i<e.rows.length;i++){var o=e.rows.item(i);n.push(JSON.parse(o.data)),r.push({$lastRead:o.last_read,$lastUpdated:o.last_updated})}}catch(u){t.reject(s.buildErrResult("error reading from database",u));return}t.resolve(s.buildResult(s.StatusCodes.OK,n,null,null,r))}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error reading from database",a))}finally{return t.promise()}},remove:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("REMOVE: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=JSON.stringify(e.$context),u=[e.$key,e.$collection,e.$endpoint,i];n._removeMetaData(i,u).then(function(e){e?n._executeSql("DELETE FROM sdata_objects where id = ?",[e.$id]).then(function(){t.resolve(s.buildResult(s.StatusCodes.OK))}).fail(function(e){t.reject(e)}):t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND))}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error writing to database",a))}finally{return t.promise()}},clearCollection:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("CLEAR: ",JSON.stringify(e));if(!e.$collection||!e.$context)throw new Error("Insufficient parameters");var i=JSON.stringify(e.$context),u=[i];n._executeSql("SELECT * FROM sdata_meta where context = ?",u).then(function(r){var i=[];try{for(var o=0;o<r.rows.length;o++){var u=r.rows.item(o);e.$collection.test(u.collection)&&i.push({$context:e.$context,$collection:u.collection,$endpoint:u.endpoint,$key:u.key})}i.forEachPromise(function(e){return n.remove(e)}).then(function(){t.resolve(s.buildResult(s.StatusCodes.OK))}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error reading from database",a))}}).fail(function(e){t.reject(e)})}catch(a){t.reject(s.buildErrResult("error reading from database",a))}finally{return t.promise()}},_readMetaData:function(e,t,n){var r=$.Deferred(),i=this;try{var u=i.db;i._executeSql("SELECT * FROM sdata_meta where key = ? and collection = ? and endpoint = ? and context = ?",t).then(function(e){try{if(e.rows.length<=0)r.resolve(null);else{var t=e.rows.item(0),u={$key:t.key,$collection:t.collection,$endpoint:t.endpoint,$context:t.context,$id:t.id,$etag:t.etag,$lastRead:t.last_read,$lastUpdated:t.last_updated};o&&o("Read meta data: "+JSON.stringify(u)),n===!0?r.resolve(u):i._writeMetaData(u).then(function(){r.resolve(u)}).fail(function(e){r.reject(s.buildErrResult("error reading from database",e))})}}catch(a){r.reject(s.buildErrResult("error reading from database",a))}}).fail(function(e){r.reject(e)})}catch(a){r.reject(s.buildErrResult("error reading from database",a))}finally{return r.promise()}},_writeMetaData:function(e){var t=$.Deferred(),n=this;try{var i=n.db;e.$lastRead=r.getCurISODateTime(),e.$id?n._executeSql("UPDATE sdata_meta set etag = ?, last_read = ?, last_updated = ? where id = ?",[e.$etag,e.$lastRead,e.$lastUpdated,e.$id]).then(function(n){t.resolve(e)}).fail(function(e){t.reject(e)}):(e.$id=r.UUID(),n._executeSql("INSERT INTO sdata_meta (key, collection, endpoint, context, id, etag, last_read, last_updated) values (?, ?, ?, ?, ?, ?, ?, ?)",[e.$key,e.$collection,e.$endpoint,JSON.stringify(e.$context),e.$id,e.$etag,e.$lastRead,e.$lastUpdated]).then(function(){t.resolve(e)}).fail(function(e){t.reject(e)}))}catch(o){t.reject(s.buildErrResult("error writing meta data",o))}finally{return t.promise()}},_removeMetaData:function(e,t){var n=$.Deferred(),r=this;try{r._readMetaData(e,t,!0).then(function(e){e?r._executeSql("DELETE FROM sdata_meta where id = ?",[e.$id]).then(function(){n.resolve(e)}).fail(function(e){n.reject(e)}):n.resolve(null)}).fail(function(e){n.reject(e)})}catch(i){n.reject(s.buildErrResult("error reading from database",i))}finally{return n.promise()}},_executeSql:function(e,t){var n=$.Deferred(),r=this;try{r.db.transaction(function(r){try{o&&o("SQL: "+e),o&&o(t),r.executeSql(e,t,function(e,t){n.resolve(t)},function(e,t){n.reject(s.buildErrResult("error initializing database: "+c(e,t)))})}catch(i){n.reject(s.buildErrResult("error running SQL statement",i))}})}catch(i){n.reject(s.buildErrResult("error running SQL statement",i))}return n.promise()},_openDB:function(){var e=$.Deferred(),t=this;t.useTestDatabase===!1&&t.db&&e.resolve(s.buildResult(s.StatusCodes.OK));var n;try{o&&o("Open database, request version: "+t.databaseVersion),t.db=openDatabase(t.databaseName,7,"Database",t.databaseSize),t._readCurrentVersion().then(function(n){o&&o("Current version: "+n),n===t.databaseVersion&&t.useTestDatabase!==!0?e.resolve(s.buildResult(s.StatusCodes.OK)):t._createTables().then(function(e){return t._writeCurrentVersion()}).then(function(t){e.resolve(t)}).fail(function(t){e.reject(t)})}).fail(function(t){e.reject(t)})}catch(r){o&&o("Open database, exception",r),t.db=null,e.reject(s.buildErrResult("error initializing database",r))}return e.promise()},_readCurrentVersion:function(){var e=$.Deferred(),t=this;return t._executeSql("SELECT version FROM version",null).then(function(t){try{var n=t.rows.length;if(n===1){var r=t.rows.item(0).version;o&&o("Read version: "+r),e.resolve(+r)}e.resolve(-1)}catch(i){e.reject(s.buildErrResult("error reading database version",i))}}).fail(function(n){o&&o("Creating version table"),t._executeSql("CREATE TABLE version (version TEXT)").then(function(t){e.resolve(-1)}).fail(function(t){i.getModal().error("Error Creating version table",t,function(){e.reject(t)})})}),e.promise()},_writeCurrentVersion:function(){var e=$.Deferred(),t=this;return t._executeSql("DELETE FROM version",null).then(function(e){return t._executeSql("INSERT INTO version (version) values (?)",[u])}).then(function(t){e.resolve(s.buildResult(s.StatusCodes.OK))}).fail(function(t){e.reject(t)}),e.promise()},_createTables:function(){var e=$.Deferred(),t=this,n=[];for(var r=0;r<a.length;r++)n.push(t._executeSql(a[r]));return $.when.apply($,n).then(function(){e.resolve(s.buildResult(s.StatusCodes.OK))}).fail(function(t){e.reject(t)}),e.promise()}});t.StorageInterface=l,t.isAvailable=function(){return window.openDatabase!=null}}),define("syracuse-tablet/html/js/storage/storageIndexedDB",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){function v(){this.infoString="IndexedDB storage interface",this.databaseVersion=p,this.databaseName=s.databaseName,this.useTestDatabase=!1,this.db=null}function g(e){return JSON.stringify(e)}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/storage/storageInterface"),o=e("syracuse-tablet/html/js/helpers/logger").getLogger("indexedDB"),u=window.indexedDB||window.webkitIndexedDB,a=window.IDBTransaction||window.webkitIDBTransaction,f=window.IDBKeyRange||window.webkitIDBKeyRange,l=window.IDBDatabaseException||window.webkitIDBDatabaseException,c=a&&a.READ_ONLY||"readonly",h=a&&a.READ_WRITE||"readwrite",p=11,d={sdata:{options:{autoIncrement:!0},indexes:{read_write_one:{key:"key_collection_endpoint_context",options:{unique:!0}},read_write_all:{key:"collection_endpoint_context",options:{unique:!1}},read_write_ctx:{key:"context",options:{unique:!1}}}}},m=r.defineClass(v,s.StorageInterface,{init:function(e){e=e||"",o&&o("_INIT "+e);var t=$.Deferred(),n=this,r=i.isTestEnvironment();try{var a=function(){o&&o("DATABASE INIT!"),n._openDB().then(function(n){o&&o("_openDB OK "+e),t.resolve(n)}).fail(function(n){o&&o("_openDB KO "+e),t.resolve(n)})};if(r===!0){n.db&&(n.db.close(),n.db=null),n.useTestDatabase=!0,n.databaseName=s.databaseName+"-test",o&&o("DATABASE IN TEST MODE! "+e);var f=u.deleteDatabase(n.databaseName);f.onsuccess=function(){a()},f.onerror=function(n){o&&o("REQUEST ERROR! "+e),t.reject(s.buildErrResult("error deleting database"))},f.onblocked=function(n){o&&o("REQUEST BLOCKED! "+e),t.reject(s.buildErrResult("error deleting database (blocked)"))}}else n.db||a()}catch(l){o&&o("init ERROR "+e),t.reject(s.buildErrResult("error initializing database",l))}finally{return t.promise()}},put:function(e){var t=$.Deferred(),n=this;try{var i=n.db;o&&o("PUT: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var u=i.transaction(["sdata"],h),a=u.objectStore("sdata"),c=JSON.stringify(e.$context),p=[e.$key,e.$collection,e.$endpoint,c].join("_"),d=a.index("read_write_one"),v=f.only(p),m=d.openCursor(v),y=!0,b=r.getCurISODateTime(),w=function(){var n={context:c,collection:e.$collection,endpoint:e.$endpoint,key:e.$key,last_updated:b,last_read:b,key_collection_endpoint_context:p,collection_endpoint_context:[e.$collection,e.$endpoint,c].join("_"),data:e.$data},r=a.add(n);r.onerror=function(e){t.reject(s.buildErrResult("error writing to database: "+g(e)))},r.onsuccess=function(n){t.resolve(s.buildResult(s.StatusCodes.OK,e.$data))}};m.onsuccess=function(n){try{var r=n.target.result;if(r){if(e.$data.$etag){var i=r.value&&r.value.data.$etag;if(i===e.$data.$etag){t.resolve(s.buildResult(s.StatusCodes.OK,e.$data));return}}r["delete"](),r["continue"]()}else w()}catch(o){t.reject(s.buildErrResult("error writing to database",o))}},m.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?w():t.reject(s.buildErrResult("error writing to database: "+g(e)))}}catch(E){t.reject(s.buildErrResult("error writing to database",E))}finally{return t.promise()}},read:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("READ: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=r.transaction(["sdata"],h),u=i.objectStore("sdata"),a=JSON.stringify(e.$context),c=[e.$key,e.$collection,e.$endpoint,a].join("_"),p=u.index("read_write_one"),d=f.only(c),v=p.openCursor(d);v.onsuccess=function(e){try{var n=e.target&&e.target.result&&e.target.result.value;n?t.resolve(s.buildResult(s.StatusCodes.OK,n.data,null,null,{$lastRead:n.last_read,$lastUpdated:n.last_updated})):t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND))}catch(r){t.reject(s.buildErrResult("error reading from database",r))}},v.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND)):t.reject(s.buildErrResult("error reading from database: "+g(e)))}}catch(m){t.reject(s.buildErrResult("error reading from database",m))}finally{return t.promise()}},query:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("QUERY: ",JSON.stringify(e));if(!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=r.transaction(["sdata"],h),u=i.objectStore("sdata"),a=JSON.stringify(e.$context),c=[e.$collection,e.$endpoint,a].join("_"),p=u.index("read_write_all"),d=f.only(c),v=p.openCursor(d),m=[],y=[];v.onsuccess=function(e){try{var n=e.target.result;if(n){var r=n.value.data;m.push(r),y.push({$lastRead:n.last_read,$lastUpdated:n.last_updated}),n["continue"]()}else t.resolve(s.buildResult(s.StatusCodes.OK,m,null,null,y))}catch(i){t.reject(s.buildErrResult("error reading from database",i))}},v.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?t.resolve(s.buildResult(s.StatusCodes.OK,m,null,null,y)):t.reject(s.buildErrResult("error reading from database: "+g(e)))}}catch(b){t.reject(s.buildErrResult("error reading from database",b))}finally{return t.promise()}},remove:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("REMOVE: ",JSON.stringify(e));if(!e.$key||!e.$collection||!e.$endpoint||!e.$context)throw new Error("Insufficient parameters");var i=r.transaction(["sdata"],h),u=i.objectStore("sdata"),a=JSON.stringify(e.$context),c=[e.$key,e.$collection,e.$endpoint,a].join("_"),p=u.index("read_write_one"),d=f.only(c),v=p.openCursor(d);v.onsuccess=function(e){try{var n=e.target.result;n?(n["delete"](),t.resolve(s.buildResult(s.StatusCodes.OK))):t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND))}catch(r){t.reject(s.buildErrResult("error deleting from database",r))}},v.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?t.resolve(s.buildResult(s.StatusCodes.NOT_FOUND)):t.reject(s.buildErrResult("error reading from database: "+g(e)))}}catch(m){t.reject(s.buildErrResult("error deleting from database",m))}finally{return t.promise()}},clearCollection:function(e){var t=$.Deferred(),n=this;try{var r=n.db;o&&o("CLEAR: ",JSON.stringify(e));var i=r.transaction(["sdata"],h),u=i.objectStore("sdata"),a=JSON.stringify(e.$context),c=a,p=u.index("read_write_ctx"),d=f.only(c),v=p.openCursor(d),m=[],y=function(){m.forEachPromise(function(t){return n.remove({$context:e.$context,$collection:t.collection,$endpoint:t.endpoint,$key:t.key})}).then(function(){t.resolve()}).fail(function(e){t.reject(e)})};v.onsuccess=function(n){try{var r=n.target.result;r?(e.$collection.test(r.value.collection)&&m.push(r.value),r["continue"]()):y()}catch(i){t.reject(s.buildErrResult("error reading from database",i))}},v.onerror=function(e){e.target.errorCode==l.NOT_FOUND_ERR?y():t.reject(s.buildErrResult("error reading from database: "+g(e)))}}catch(b){t.reject(s.buildErrResult("error reading from database",b))}finally{return t.promise()}},_openDB:function(){var e=$.Deferred(),t=this;t.useTestDatabase===!1&&t.db&&e.resolve(s.buildResult(s.StatusCodes.OK));var n;try{o&&o("Open database, request version: "+t.databaseVersion),n=u.open(t.databaseName,t.databaseVersion),n.onupgradeneeded=function(e){o&&o("Open database, need upgrade"),t.db=e.target.result||e.target.source,t._createObjectStore()},n.onsuccess=function(n){o&&o("Open database, success");var r=n.target.result||n.target.source;if(!r.setVersion&&t.databaseVersion!=r.version){o&&o("Open database, versions missmatch: "+t.DatabaseVersion+" != "+r.version);var i=r.setVersion(t.databaseVersion);i.onsuccess=function(n){o&&o("Open database, setting version, success"),t.db=r,t._createObjectStore(),o&&o("Open database, opened"),e.resolve(s.buildResult(s.StatusCodes.OK))},i.onerror=function(n){o&&o("Open database, setting version, error",n),t.db=null,e.reject(s.buildErrResult("error initializing database: "+g(n)))}}else o&&o("Open database, opened"),t.db=r,e.resolve(s.buildResult(s.StatusCodes.OK))},n.onerror=function(n){o&&o("Open database, error",n),t.db=null,e.reject(s.buildErrResult("error initializing database: "+g(n)))}}catch(r){o&&o("Open database, exception",r),t.db=null,e.reject(s.buildErrResult("error initializing database",r))}return e.promise()},_createObjectStore:function(){var e=this,t=e.db;o&&o("Updating database"),Object.keys(d).forEach(function(e){var n=d[e];t.objectStoreNames.contains(e)&&(o&&o("Deleting objectStore: "+e),t.deleteObjectStore(e)),o&&o("Creating objectStore: "+e);var r=t.createObjectStore(e,n.options);Object.keys(n.indexes).forEach(function(e){var t=n.indexes[e];o&&o("Creating index: "+e),r.createIndex(e,t.key,t.options)})})}});t.StorageInterface=m,t.isAvailable=function(){return u!=null}}),define("syracuse-tablet/html/js/storage/storage",["require","exports","module","syracuse-tablet/html/js/storage/storageInterface","syracuse-tablet/html/js/storage/storageWinJS","syracuse-tablet/html/js/storage/storageWebSQL","syracuse-tablet/html/js/storage/storageIndexedDB"],function(e,t,n){function o(){return s?s:(i.some(function(e){if(e.isAvailable()){var t=e.StorageInterface;return s=new t,!0}return!1}),s)}var r=e("syracuse-tablet/html/js/storage/storageInterface"),i=[e("syracuse-tablet/html/js/storage/storageWinJS"),e("syracuse-tablet/html/js/storage/storageWebSQL"),e("syracuse-tablet/html/js/storage/storageIndexedDB")],s;t.getStorage=o,t.StatusCodes=r.StatusCodes}),define("syracuse-tablet/html/js/application/settings",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/storage/storage"],function(e,t,n){function f(){var e=r.getUserCtx();return e?e:{$user:"none",$role:"none",$lang:"en-US"}}function l(){var e=f();if(s.user!=e.$user||s.role!=e.$role)s.user=e.$user,s.role=e.$role,s.lang=e.$lang,u=null}function c(){var e=r.getStorage(),t={$user:s.user,$role:s.role,$lang:"none"};return e.read({$context:t,$collection:"$settings",$endpoint:"$local",$key:"$user_and_role"}).then(function(e){return e.$status===i.StatusCodes.OK?e.$data:{}})}function h(){var e=f();if(o.user!=e.$user||o.role!=e.$role)o.user=e.$user,o.role=e.$role,o.lang=e.$lang,a=null}function p(){var e=r.getStorage(),t={$user:o.user,$role:"none",$lang:"none"};return e.read({$context:t,$collection:"$settings",$endpoint:"$local",$key:"$user"}).then(function(e){e.$status===i.StatusCodes.OK?a=e.$data:a={}})}function d(){var e=r.getStorage(),t={$user:o.user,$role:"none",$lang:"none"};return e.put({$context:t,$collection:"$settings",$endpoint:"$local",$key:"$user",$data:a}).then(function(e){return e.$status===i.StatusCodes.OK?e.$data:{}})}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/storage/storage"),s={},o={},u=null,a=null;t.getPinnedPages=function(){h();var e;return a==null?e=p():e=$.smResolve(),e.then(function(){return a.pinnedPages=a.pinnedPages||[],a.pinnedPages})},t.addPinnedPage=function(e){return t.getPinnedPages().then(function(t){return t.some(function(n,r){if(n.id===e.id)return t[r]=e,!0})||t.push(e),d(),e})},t.isPinnedPage=function(e){return t.getPinnedPages().then(function(t){return t.some(function(t,n){if(t.id===e)return!0})})},t.removePinnedPage=function(e){return t.getPinnedPages().then(function(t){t.some(function(n,r){if(n.id===e)return t.splice(r,1),!0})&&d()})}}),define("syracuse-tablet/html/js/application/application",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/application/pageLoader","syracuse-tablet/html/js/init/initContext","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/application/pageRegistry","syracuse-tablet/html/js/authoring/authoring","syracuse-tablet/html/js/ui/developmentPage","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/settings"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/modal"),s=e("syracuse-tablet/html/js/helpers/logger").getLogger("app"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=e("syracuse-tablet/html/js/helpers/globals"),a=e("syracuse-tablet/html/js/application/authentication"),f=e("syracuse-tablet/html/js/application/eventListener"),l=e("syracuse-tablet/html/js/application/pageLoader"),c=e("syracuse-tablet/html/js/init/initContext"),h=e("syracuse-tablet/html/js/ui/uiUtils"),p=e("syracuse-tablet/html/js/application/pageRegistry"),d=e("syracuse-tablet/html/js/authoring/authoring"),v=e("syracuse-tablet/html/js/ui/developmentPage"),m=e("syracuse-tablet/html/js/helpers/locale"),g=e("syracuse-tablet/html/js/application/settings"),y={transition:null,openLinkInVignette:!1,loadUserImage:!0},b=function(e){o.subscribe(e,["sm.context.changed","sm.switch.app","sm.modal.open","sm.modal.close","sm.main.layout.changed"],1)},w=r.defineClass(function(e,t){var n=this;n.$$elmt=e,n.currentPage=null,n._$config=$.extend(!0,{},y),n.factory=t,n._pageLoader=null,n._nbModals=0,n._wait=h.waitWheelCreate(e),n.homePageId=null,n.uuid="root",n.history=[],n.pushState=!0},null,{init:function(){var e=this;f.bindEvents(e),e.dao=e.factory.createDaoApp(e),b(e),e.$$elmt.show()},destroy:function(){var e=this;e._wait&&h.waitWheelDestroy(e._wait),o.unsubscribe(),e.removeAllChildPages(e.$$elmt),e.currentPage=null,e._pageLoader==null&&(e._pageLoader.destroy(),e._pageLoader=null),r.unbindObj(e),r.unbindObj(e.$$elmt),$(window).unbind()},isWelcomeApplication:function(){return this.uuid==="$welcomeApplication"},getTitle:function(){return this.dao.getApplicationTitle()},gotoHome:function(){var e=this;setTimeout(function(){e.changePage(e.homePageId)})},$config:function(e){return r.getPropByPath(this._$config,e,this._$config)},notifContextChanged:function(e){this.gotoWelcomeApplication(e)},notifModalOpen:function(){this._nbModals++,s&&s("notifModalOpen nbModals="+this._nbModals)},notifModalClose:function(){this._nbModals=Math.max(this._nbModals-1,0),s&&s("notifModalClose nbModals="+this._nbModals)},notifMainLayoutChanged:function(e,t,n){var r=this;r.$$elmt.width(e.application.width),r.$$elmt.height(e.application.height),r.currentPage&&r.currentPage.onMainPageResize(e,t,n)},getScrollOffset:function(){return{top:this.$$elmt.scrollTop(),left:this.$$elmt.scrollLeft()}},hasModalOpen:function(){return s&&s("_nbModals="+this._nbModals),this._nbModals>0},_actGotoWelcomeApplication:function(){this.gotoWelcomeApplication()},_actLogout:function(e){this.logout()},_actHistoryBack:function(){window.history.back()},_actSwitchContext:function(){var e=this;c.init(!0,!0).then(function(e){}).fail(function(e){i.error("Switch context error",e)})},_actDevelopmentPage:function(){v.show()},_actClearCache:function(){var e=this,t=$.Deferred();return i.confirm("clearCache",function(n){n?(e.waitWheelStart(),u.getCache().clearCache().then(function(n){e.waitWheelStop(),t.resolve(null)}).fail(function(n){setTimeout(function(){i.error("Clear cache error",n,function(){e.waitWheelStop(),t.resolve(null)})},10)})):t.resolve(null)}),t.promise()},_actDesignPage:function(){d.toggleDesignPage()},_actAbout:function(){this.changePage("about",{})},notifSwitchApp:function(e){var t=this;u.getMetaData().getApplication(e).then(function(e){t._setCurrentApplication(e)})},gotoWelcomeApplication:function(e){var t=this;u.isLoggedIn()?u.getMetaData().getApplication("$welcomeApplication").then(function(n){t._setCurrentApplication(n,{deferred:e})}):(e&&e.resolve(),this.gotoLogin())},gotoLogin:function(e){var t=this;t.historyReset(),setTimeout(function(){t.changePage("login",{reason:e||m.text("login.authentication")})},0)},_setCurrentApplication:function(e,t){var n=this;t=t||{};var r=t.deferred,o=function(e,t){n.waitWheelStop(),r?r.reject(t):i.error(e,t,function(){n.currentPage&&n.currentPage.activate()})},a=function(e){try{n.waitWheelStop();if(!e.$application.$uuid)throw new Error("No application $uuid - "+e.applicationName);n.uuid!==e.$application.$uuid&&(n.dao.setApplication(e),n.homePageId=u.getMetaData().getDashboardPageName(n.dao.getHomeDashboardName()),n.uuid=e.$application.$uuid),t.noPageChange!==!0&&n.gotoHome(),r&&r.resolve()}catch(i){o("Error loading new application",i)}};try{if(!e)throw new Error("Null appInfo");s&&s("Switch to Syracuse Mobile Application "+e.applicationName),n.currentPage&&n.currentPage.deactivate(),n.waitWheelStart(),a(e)}catch(f){o("Error switching application",f)}},_gotoPage:function(e,t){var n=this;return n._pageLoader||(n._pageLoader=new l.Klass({waitStop:function(){n.waitWheelStop()},getRootElmt:function(){return n.$$elmt},waitStart:function(){n.waitWheelStart()},getCurrentPage:function(){return n.currentPage},setCurrentPage:function(e){n.currentPage=e,e.state.isLogin===!0?n.historyReset(e):n.isWelcomeApplication()?e.state.isHomeDashboard&&n.historyReset(e):e.state.name===n.homePageId&&(s&&s("Home page "+n.homePageId+" - Destroy all pages except current"),n.removeAllChildPages(n.$$elmt,e))},historyPush:function(e){n.history.push(e),n.pushState?window.history.pushState({x:new Date},r.UUID(),null):window.history.replaceState({x:new Date},r.UUID(),null)},succeeded:function(e,t,r){s&&s("succeeded - win="+window.history.length+" - app="+n.history.length),h.triggerResizeInternal();if(t&&t.notifId){var u=e.id===t.parentId?e:null;u==null&&e.isDashboard()!=null&&(u=(e.findVignettePage(t.parentId)||{}).page),u?o.pageNotify(t.notifId,u,t.notifData,t.controlId):i.error("Child page notification warning","Parent page is not the current page")}}})),e.isLogin===!1&&!u.isLoggedIn()?(n.gotoLogin("Authentication is required"),$.smResolve()):n._pageLoader.load(e,t)},historyReset:function(e){this.removeAllChildPages(this.$$elmt,e),this.history=[]},historyScan:function(e){for(var t=this.history.length-1;t>=0;t--)if(e(this.history[t])===!0)break},historyLog:function(e){console.log(e),this.historyScan(function(e){console.log("	",e.name)})},historyPop:function(e,t,n){try{var r=this;s&&s("History pop before - win="+window.history.length+" - app="+r.history.length);if(r._nbModals>0){e&&e.preventDefault();return}if(r.uuid==="root"||r.history.length===0){window.history.back();return}if(n&&r.history.length>0){var o=-1;for(var u=r.history.length-1;u>=0;u--)if(n(r.history[u])){o=u;break}if(o<0){e&&e.preventDefault();return}while(r.history.length>o+2){var a=r.history.pop(),f=$("#"+a.uuid).smPageController();f&&f.destroy()}}var a=r.history.length>0?r.history.pop():null;if(a&&(a.isWelcomePage||a.isLogin)){window.history.back();return}a=r.history.length>0?r.history[r.history.length-1]:null,e&&e.preventDefault(),r.pushState=!0,a&&setTimeout(function(){var e;if(a.isWelcomePage){var n=$.Deferred();r.gotoWelcomeApplication(n),e=n.promise()}else e=r._gotoPage(a,!0);t&&t(e)},0)}catch(l){i.error("historyPop error",l,function(){t&&t($.smReject(l))})}},goBack:function(e){var t=$.Deferred();return this.historyPop(null,function(e){e?e.then(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}):t.resolve()},e),t.promise()},changePage:function(e,t){var n=this,r;if(t&&t.applicationName){var i=n.dao&&n.dao.getApplicationName();i!==t.applicationName&&(r=$.Deferred(),u.getMetaData().getApplication(t.applicationName).then(function(e){n._setCurrentApplication(e,{deferred:r,noPageChange:!0})}))}return r||(r=$.smResolve()),r.then(function(){return p.getPageInfo(e,t,n.currentPage)}).then(function(e){return n._gotoPage(e)})},logout:function(){var e=$.Deferred(),t=this,n=function(){s&&s("User Logged out"),u.setUserCtx(null),e.resolve(),t.gotoLogin("You have been logged out")};return t.waitWheelStart(),a.logout().then(function(e,r){t.waitWheelStop(),e?n():i.error(r,function(){n()})}).fail(function(e){t.waitWheelStop(),i.error("Logout error",e,function(){n()})}),e.promise()},refreshPage:function(e){var t=this;if(!t.currentPage)throw new Error("No current page");t.currentPage.refresh(e).then(function(){}).fail(function(e){t.modalError("Refresh page",e)})},waitWheelStart:function(){h.waitWheelStart(this._wait)},waitWheelStop:function(){h.waitWheelStop(this._wait)},modalError:function(e,t,n){i.error(e,t,n)},getMessageSlot:function(){this._$$actMsgSlot||(this._$$actMsgSlot={});var e=u.getSiteLayout().getDeviceType();if(this._$$actMsgSlot[e])return this._$$actMsgSlot[e];var t=this._$$actMsgSlot[e]=$("<div>").addClass("s-m-act-msg-slot").addClass(e);return(e!=="tablet"&&this.currentPage?this.currentPage.$$contentElmt:this.$$elmt).prepend(t),t},_actPinPage:function(){var e=this,t=e.currentPage,n=!1;g.isPinnedPage(t.getPinPageId()).then(function(e){var t;return e?(n=!0,t=m.text("pin.page.remove.confirm")):t=m.text("pin.page.add.confirm"),u.getModal().simpleConfirmPromise({message:t})}).then(function(r){if(r.action==="yes"){var i=t.getPinPageData(i);return n?g.removePinnedPage(i.id).then(function(){var e={severityClass:"success",title:"",body:m.text("pin.page.remove.ok",[i.title])};u.getModal().notify(e),o.publish("sm.page.pin.state.change",1)}):(i.applicationName=e.dao.getApplicationName(),i.endpoint=u.getEndpoint(),g.addPinnedPage(i).then(function(){var e={severityClass:"success",title:"",body:m.text("pin.page.add.ok",[i.title])};u.getModal().notify(e),o.publish("sm.page.pin.state.change",2)}))}}).fail(function(e){u.getModal().error(e)})},removeAllChildPages:function(e){if(!e)return;e.jquery||(e=$(e));var t=Array.prototype.slice.call(arguments,1);e.children(".s-m-page").each(function(e){var n=$(this).smPageController();n&&Array.prototype.indexOf.call(t,n)==-1&&n.destroy()})}});t.Application=w}),define("syracuse-tablet/html/js/ui/rect",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=r.defineClass(function(t,n,r,i){this.top=t,this.left=n,this.setHeight(r),this.setWidth(i)},null,{isPointInside:function(e,t){return(e==null||e>=this.left&&e<=this.right)&&(t==null||t>=this.top&&t<=this.bottom)},isEvtInside:function(e,t){if(e.type.smStartsWith("touch"))if(e.changedTouches&&e.changedTouches.length===1)e=e.changedTouches[0];else{if(!e.touches||e.touches.length!==1)return!0;e=e.touches[0]}var n=t!=null&&t.top!=null?e.pageY-t.top:e.pageY,r=t!=null&&t.left!=null?e.pageX-t.left:e.pageX;return this.isPointInside(r,n)},intersectsWith:function(e){return this.left<=e.right&&e.left<this.right&&this.top<e.bottom&&e.top<this.bottom},contains:function(e){return this.isPointInside(e.left,e.top)&&this.isPointInside(e.right,e.bottom)},equals:function(e,t){return e.width===this.width&&e.height===this.height?t===!0||e.top===this.top&&e.left===this.left:!1},intersectRect:function(e,t){if(!this.intersectsWith(e))return null;var n=Math.max(this.top,e.top),r=Math.max(this.left,e.left),s=Math.min(this.right,e.right),o=Math.min(this.bottom,e.bottom);return new i(t?0:n,t?0:r,o-n,s-r)},setHeight:function(e){this.height=Math.max(e,0),this.bottom=this.top+this.height},setWidth:function(e){this.width=Math.max(e,0),this.right=this.left+this.width},moveLeft:function(e){this.left=this.left+e,this.right=this.width+this.left},toString:function(){return"t:"+this.top+" l:"+this.left+" r:"+this.right+" b:"+this.bottom+" h:"+this.height+" w:"+this.width},toRelative:function(e){return e==null&&(e={}),e.top==null&&(e.top=0),e.left==null&&(e.left=0),new i(e.top,e.left,this.height,this.width)},showInDocument:function(e){e=e||{};var t="fixed",n=$(document.body),r=$('<div class = "s-m-rect">').appendTo(n).css({position:t,top:this.top+"px",left:this.left+"px",height:this.height+"px",width:this.width+"px",backgroundColor:e.color,zIndex:e.zIndex!=null?e.zIndex:undefined});return e.timeout!=null&&setTimeout(function(){r.remove()},e.timeout),r},clone:function(){return new i(this.top,this.left,this.height,this.width)},applyTransformScale:function(e,t){if(e==null||e<=0||typeof e!="number")return;var n=t===!0?this.clone():this;return n.width=n.width*e,n.height=n.height*e,n}}),s={outer:["outerWidth","outerHeight"],inner:["innerWidth","innerHeight"],computed:["width","height"],fixed:"position",relative:"offset"};t.elmtRect=function(e,t,n){var r=e[s[n||"relative"]](),o=s[t||"outer"];return new i(r.top,r.left,e[o[1]](),e[o[0]]())},t.newRect=function(e,t,n,r){return new i(e,t,n,r)}}),function(e,t,n,r){function l(e,t,n){return setTimeout(m(e,n),t)}function c(e,t,n){return Array.isArray(e)?(h(e,n[t],n),!0):!1}function h(e,t,n){var i;if(!e)return;if(e.forEach)e.forEach(t,n);else if(e.length!==r){i=0;while(i<e.length)t.call(n,e[i],i,e),i++}else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function p(e,t,n){var i=Object.keys(t),s=0;while(s<i.length){if(!n||n&&e[i[s]]===r)e[i[s]]=t[i[s]];s++}return e}function d(e,t){return p(e,t,!0)}function v(e,t,n){var r=t.prototype,i;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&p(i,n)}function m(e,t){return function(){return e.apply(t,arguments)}}function g(e,t){return typeof e==o?e.apply(t?t[0]||r:r,t):e}function y(e,t){return e===r?t:e}function b(e,t,n){h(x(t),function(t){e.addEventListener(t,n,!1)})}function w(e,t,n){h(x(t),function(t){e.removeEventListener(t,n,!1)})}function E(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return e.indexOf(t)>-1}function x(e){return e.trim().split(/\s+/g)}function T(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);var r=0;while(r<e.length){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function N(e){return Array.prototype.slice.call(e,0)}function C(e,t,n){var r=[],i=[],s=0;while(s<e.length){var o=t?e[s][t]:e[s];T(i,o)<0&&r.push(e[s]),i[s]=o,s++}return n&&(t?r=r.sort(function(n,r){return n[t]>r[t]}):r=r.sort()),r}function k(e,t){var n,s,o=t[0].toUpperCase()+t.slice(1),u=0;while(u<i.length){n=i[u],s=n?n+o:t;if(s in e)return s;u++}return r}function A(){return L++}function O(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function et(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){g(e.options.enable,[e])&&n.handler(t)},this.init()}function tt(e){var t,n=e.options.inputClass;return n?t=n:D?t=St:P?t=Ot:_?t=_t:t=gt,new t(e,nt)}function nt(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=t&q&&r-i===0,o=t&(U|z)&&r-i===0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,rt(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function rt(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=ot(t)),i>1&&!n.firstMultiple?n.firstMultiple=ot(t):i===1&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,u=o?o.center:s.center,a=t.center=ut(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=ct(u,a),t.distance=lt(u,a),it(n,t),t.offsetDirection=ft(t.deltaX,t.deltaY),t.scale=o?pt(o.pointers,r):1,t.rotation=o?ht(o.pointers,r):0,st(n,t);var l=e.element;E(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function it(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};if(t.eventType===q||s.eventType===U)i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y};t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function st(e,t){var n=e.lastInterval||t,i=t.timeStamp-n.timeStamp,s,o,u,f;if(t.eventType!=z&&(i>I||n.velocity===r)){var l=n.deltaX-t.deltaX,c=n.deltaY-t.deltaY,h=at(i,l,c);o=h.x,u=h.y,s=a(h.x)>a(h.y)?h.x:h.y,f=ft(l,c),e.lastInterval=t}else s=n.velocity,o=n.velocityX,u=n.velocityY,f=n.direction;t.velocity=s,t.velocityX=o,t.velocityY=u,t.direction=f}function ot(e){var t=[],n=0;while(n<e.pointers.length)t[n]={clientX:u(e.pointers[n].clientX),clientY:u(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:ut(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ut(e){var t=e.length;if(t===1)return{x:u(e[0].clientX),y:u(e[0].clientY)};var n=0,r=0,i=0;while(i<t)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:u(n/t),y:u(r/t)}}function at(e,t,n){return{x:t/e||0,y:n/e||0}}function ft(e,t){return e===t?W:a(e)>=a(t)?e>0?X:V:t>0?$:J}function lt(e,t,n){n||(n=Y);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function ct(e,t,n){n||(n=Y);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.atan2(i,r)*180/Math.PI}function ht(e,t){return ct(t[1],t[0],Z)-ct(e[1],e[0],Z)}function pt(e,t){return lt(t[0],t[1],Z)/lt(e[0],e[1],Z)}function gt(){this.evEl=vt,this.evWin=mt,this.allow=!0,this.pressed=!1,et.apply(this,arguments)}function St(){this.evEl=wt,this.evWin=Et,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Ct(){this.evTarget=Tt,this.evWin=Nt,this.started=!1,et.apply(this,arguments)}function kt(e,t){var n=N(e.touches),r=N(e.changedTouches);return t&(U|z)&&(n=C(n.concat(r),"identifier",!0)),[n,r]}function Ot(){this.evTarget=At,this.targetIds={},et.apply(this,arguments)}function Mt(e,t){var n=N(e.touches),r=this.targetIds;if(t&(q|R)&&n.length===1)return r[n[0].identifier]=!0,[n,n];var i,s,o=N(e.changedTouches),u=[],a=this.target;s=n.filter(function(e){return E(e.target,a)});if(t===q){i=0;while(i<s.length)r[s[i].identifier]=!0,i++}i=0;while(i<o.length)r[o[i].identifier]&&u.push(o[i]),t&(U|z)&&delete r[o[i].identifier],i++;if(!u.length)return;return[C(s.concat(u),"identifier",!0),u]}function _t(){et.apply(this,arguments);var e=m(this.handler,this);this.touch=new Ot(this.manager,e),this.mouse=new gt(this.manager,e)}function Rt(e,t){this.manager=e,this.set(t)}function Ut(e){if(S(e,Ft))return Ft;var t=S(e,It),n=S(e,qt);return t&&n?It+" "+qt:t||n?t?It:qt:S(e,jt)?jt:Bt}function Qt(e){this.id=A(),this.manager=null,this.options=d(e||{},this.defaults),this.options.enable=y(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function Gt(e){return e&Jt?"cancel":e&Vt?"end":e&Xt?"move":e&Wt?"start":""}function Yt(e){return e==J?"down":e==$?"up":e==X?"left":e==V?"right":""}function Zt(e,t){var n=t.manager;return n?n.get(e):e}function en(){Qt.apply(this,arguments)}function tn(){en.apply(this,arguments),this.pX=null,this.pY=null}function nn(){en.apply(this,arguments)}function rn(){Qt.apply(this,arguments),this._timer=null,this._input=null}function sn(){en.apply(this,arguments)}function on(){en.apply(this,arguments)}function un(){Qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function an(e,t){return t=t||{},t.recognizers=y(t.recognizers,an.defaults.preset),new cn(e,t)}function cn(e,t){t=t||{},this.options=d(t,an.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=tt(this),this.touchAction=new Rt(this,this.options.touchAction),hn(this,!0),h(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function hn(e,t){var n=e.element;h(e.options.cssProps,function(e,r){n.style[k(n.style,r)]=t?e:""})}function pn(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var i=["","webkit","moz","MS","ms","o"],s=t.createElement("div"),o="function",u=Math.round,a=Math.abs,f=Date.now,L=1,M=/mobile|tablet|ip(ad|hone|od)|android/i,_="ontouchstart"in e,D=k(e,"PointerEvent")!==r,P=_&&M.test(navigator.userAgent),H="touch",B="pen",j="mouse",F="kinect",I=25,q=1,R=2,U=4,z=8,W=1,X=2,V=4,$=8,J=16,K=X|V,Q=$|J,G=K|Q,Y=["x","y"],Z=["clientX","clientY"];et.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(O(this.element),this.evWin,this.domHandler)}};var dt={mousedown:q,mousemove:R,mouseup:U},vt="mousedown",mt="mousemove mouseup";v(gt,et,{handler:function(t){var n=dt[t.type];n&q&&t.button===0&&(this.pressed=!0),n&R&&t.which!==1&&(n=U);if(!this.pressed||!this.allow)return;n&U&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t})}});var yt={pointerdown:q,pointermove:R,pointerup:U,pointercancel:z,pointerout:z},bt={2:H,3:B,4:j,5:F},wt="pointerdown",Et="pointermove pointerup pointercancel";e.MSPointerEvent&&(wt="MSPointerDown",Et="MSPointerMove MSPointerUp MSPointerCancel"),v(St,et,{handler:function(t){var n=this.store,r=!1,i=t.type.toLowerCase().replace("ms",""),s=yt[i],o=bt[t.pointerType]||t.pointerType,u=o==H,a=T(n,t.pointerId,"pointerId");s&q&&(t.button===0||u)?a<0&&(n.push(t),a=n.length-1):s&(U|z)&&(r=!0);if(a<0)return;n[a]=t,this.callback(this.manager,s,{pointers:n,changedPointers:[t],pointerType:o,srcEvent:t}),r&&n.splice(a,1)}});var xt={touchstart:q,touchmove:R,touchend:U,touchcancel:z},Tt="touchstart",Nt="touchstart touchmove touchend touchcancel";v(Ct,et,{handler:function(t){var n=xt[t.type];n===q&&(this.started=!0);if(!this.started)return;var r=kt.call(this,t,n);n&(U|z)&&r[0].length-r[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:H,srcEvent:t})}});var Lt={touchstart:q,touchmove:R,touchend:U,touchcancel:z},At="touchstart touchmove touchend touchcancel";v(Ot,et,{handler:function(t){var n=Lt[t.type],r=Mt.call(this,t,n);if(!r)return;this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:H,srcEvent:t})}}),v(_t,et,{handler:function(t,n,r){var i=r.pointerType==H,s=r.pointerType==j;if(i)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;n&(U|z)&&(this.mouse.allow=!0),this.callback(t,n,r)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Dt=k(s.style,"touchAction"),Pt=Dt!==r,Ht="compute",Bt="auto",jt="manipulation",Ft="none",It="pan-x",qt="pan-y";Rt.prototype={set:function(e){e==Ht&&(e=this.compute()),Pt&&(this.manager.element.style[Dt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){g(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Ut(e.join(" "))},preventDefaults:function(e){if(Pt)return;var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var r=this.actions,i=S(r,Ft),s=S(r,qt),o=S(r,It);if(i||s&&n&K||o&&n&Q)return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var zt=1,Wt=2,Xt=4,Vt=8,$t=Vt,Jt=16,Kt=32;Qt.prototype={defaults:{},set:function(e){return p(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(c(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Zt(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return c(e,"dropRecognizeWith",this)?this:(e=Zt(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(c(e,"requireFailure",this))return this;var t=this.requireFail;return e=Zt(e,this),T(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(c(e,"dropRequireFailure",this))return this;e=Zt(e,this);var t=T(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function r(r){t.manager.emit(t.options.event+(r?Gt(n):""),e)}var t=this,n=this.state;n<Vt&&r(!0),r(),n>=Vt&&r(!0)},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Kt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(Kt|zt)))return!1;e++}return!0},recognize:function(e){var t=p({},e);if(!g(this.options.enable,[this,t])){this.reset(),this.state=Kt;return}this.state&($t|Jt|Kt)&&(this.state=zt),this.state=this.process(t),this.state&(Wt|Xt|Vt|Jt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},v(en,Qt,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Wt|Xt),i=this.attrTest(e);if(r&&(n&z||!i))return t|Jt;if(r||i)return n&U?t|Vt:t&Wt?t|Xt:Wt;return Kt}}),v(tn,en,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var e=this.options.direction,t=[];return e&K&&t.push(qt),e&Q&&t.push(It),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&K?(i=s===0?W:s<0?X:V,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=o===0?W:o<0?$:J,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return en.prototype.attrTest.call(this,e)&&(this.state&Wt||!(this.state&Wt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Yt(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),v(nn,en,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Wt)},emit:function(e){this._super.emit.call(this,e);if(e.scale!==1){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),v(rn,Qt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Bt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;this._input=e;if(!r||!n||e.eventType&(U|z)&&!i)this.reset();else if(e.eventType&q)this.reset(),this._timer=l(function(){this.state=$t,this.tryEmit()},t.time,this);else if(e.eventType&U)return $t;return Kt},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==$t)return;e&&e.eventType&U?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input))}}),v(sn,en,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Wt)}}),v(on,en,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:K|Q,pointers:1},getTouchAction:function(){return tn.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,n;return t&(K|Q)?n=e.velocity:t&K?n=e.velocityX:t&Q&&(n=e.velocityY),this._super.attrTest.call(this,e)&&t&e.direction&&e.distance>this.options.threshold&&a(n)>this.options.velocity&&e.eventType&U},emit:function(e){var t=Yt(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),v(un,Qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[jt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;this.reset();if(e.eventType&q&&this.count===0)return this.failTimeout();if(r&&i&&n){if(e.eventType!=U)return this.failTimeout();var s=this.pTime?e.timeStamp-this.pTime<t.interval:!0,o=!this.pCenter||lt(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!o||!s?this.count=1:this.count+=1,this._input=e;var u=this.count%t.taps;if(u===0)return this.hasRequireFailures()?(this._timer=l(function(){this.state=$t,this.tryEmit()},t.interval,this),Wt):$t}return Kt},failTimeout:function(){return this._timer=l(function(){this.state=Kt},this.options.interval,this),Kt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==$t&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),an.VERSION="2.0.4",an.defaults={domEvents:!1,touchAction:Ht,enable:!0,inputTarget:null,inputClass:null,preset:[[sn,{enable:!1}],[nn,{enable:!1},["rotate"]],[on,{direction:K}],[tn,{direction:K},["swipe"]],[un],[un,{event:"doubletap",taps:2},["tap"]],[rn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var fn=1,ln=2;cn.prototype={set:function(e){return p(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?ln:fn},recognize:function(e){var t=this.session;if(t.stopped)return;this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;if(!i||i&&i.state&$t)i=t.curRecognizer=null;var s=0;while(s<r.length)n=r[s],t.stopped!==ln&&(!i||n==i||n.canRecognizeWith(i))?n.recognize(e):n.reset(),!i&&n.state&(Wt|Xt|Vt)&&(i=t.curRecognizer=n),s++},get:function(e){if(e instanceof Qt)return e;var t=this.recognizers;for(var n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(c(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(c(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(T(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return h(x(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return h(x(e),function(e){t?n[e].splice(T(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&pn(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};var r=0;while(r<n.length)n[r](t),r++},destroy:function(){this.element&&hn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},p(an,{INPUT_START:q,INPUT_MOVE:R,INPUT_END:U,INPUT_CANCEL:z,STATE_POSSIBLE:zt,STATE_BEGAN:Wt,STATE_CHANGED:Xt,STATE_ENDED:Vt,STATE_RECOGNIZED:$t,STATE_CANCELLED:Jt,STATE_FAILED:Kt,DIRECTION_NONE:W,DIRECTION_LEFT:X,DIRECTION_RIGHT:V,DIRECTION_UP:$,DIRECTION_DOWN:J,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:Q,DIRECTION_ALL:G,Manager:cn,Input:et,TouchAction:Rt,TouchInput:Ot,MouseInput:gt,PointerEventInput:St,TouchMouseInput:_t,SingleTouchInput:Ct,Recognizer:Qt,AttrRecognizer:en,Tap:un,Pan:tn,Swipe:on,Pinch:nn,Rotate:sn,Press:rn,on:b,off:w,each:h,merge:d,extend:p,inherit:v,bindFn:m,prefixed:k}),typeof define==o&&define.amd?define("syracuse-tablet/html/deps/hammerjs-2.0.4/hammer",[],function(){return an}):typeof module!="undefined"&&module.exports?module.exports=an:e[n]=an}(window,document,"Hammer"),define("syracuse-tablet/html/js/helpers/hammerScroller",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/deps/hammerjs-2.0.4/hammer"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("scroll",!1),i=e("syracuse-tablet/html/js/helpers/utils"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/ui/rect"),u=e("syracuse-tablet/html/js/helpers/jsutils"),a=e("syracuse-tablet/html/js/helpers/notifications"),f=e("syracuse-tablet/html/deps/hammerjs-2.0.4/hammer"),l=!1;a.subscribe(function(e,t){t=t==null?!l:t===!0,l=t,a.publish("sm.scroller.toggle",!l)},["sm.hammer.scrolling.toggle"],1);var c=function(e,t,n){r&&r("Clicked canceled",n,e.id),t.stopPropagation(),t.preventDefault(),t.$stop=!0},h=400,p=!0,d=30,v=function(e){var t=Math.abs(Math.round(e*7));return Math.max(1,t*t/2)},m={pan:{v:"panup pandown panstart panend",h:"panleft panright panstart panend"},dir:{v:f.DIRECTION_VERTICAL,h:f.DIRECTION_HORIZONTAL},upEvt:{v:"panup",h:"panleft"}},g=i.defineClass(function(t,n,r,i){n=n||{},this.hammer=null,this.$$elmt=t,this.$$nativeScroll=i||t;if(t=="null")throw new Error("hammerScroller - null $$elmt");this.id=t.closest("[id]").attr("id"),this.valMax=n.valMax!=null?n.valMax:0,this.name=n.name||"scroller",this.parentMgr=r,this.callBack=n.callBack,this.isPageScroller=n.isPageScroller===!0,this.hammer=new f(this.$$elmt.get(0)),n.direction&&this._initDir(n.direction),this._evtsEnabled=!1,a.subscribe(this,["sm.scroller.toggle"],1)},null,{_initDir:function(e){this.dir=e;if(this.dir!=="v"&&this.dir!=="h")throw new Error("hammerScroller - Unexpected direction ["+this.dir+"]");this.upEvtType=m.upEvt[this.dir]},resetScrolling:function(e){this.val!=null&&(this.val=this.valMax,this.refresh(),this.reset()),e&&e()},init:function(e,t,n,r){if(e==null)throw new Error("hammerScroller - Unexpected null viewRect");r===!0&&this.val!=null&&(this.restoredVal=this.val),this.reset(),t!=null&&this.dir!=t&&this._initDir(t);if(this.dir==null)throw new Error("hammerScroller - Unexpected null direction");s.getSiteLayout().getTransformScale()!=1&&(e=e.applyTransformScale(s.getSiteLayout().getTransformScale(),!0)),this.viewRect=e,this.hammer.get("pan").set({threshold:1,direction:m.dir[this.dir]}),this.hammer.get("press").set({time:1}),this._panHandler=f.bindFn(this.onPan,this),this._pressHandler=f.bindFn(this.onPress,this),this._clickHandler=f.bindFn(this.onClick,this),this.$$elmt.on("click",this._clickHandler),this._originalRect=o.elmtRect(this.$$elmt),this._originalScrollOffset=this.isPageScroller?null:s.getCurrentPage().getScrollOffset(),this._enableEvents(!0),n!=null&&(this.valMax=n),this.val=this.restoredVal==null?this.valMax:this.restoredVal,this.restoredVal=null,this.refresh()},_enableEvents:function(e){if(!this.viewRect)return;e=e&&!l;var t=this._evtsEnabled===!1;e===!0&&this._evtsEnabled!==!0&&(this._evtsEnabled=!0,this.hammer.on(m.pan[this.dir],this._panHandler),this.hammer.on("press",this._pressHandler),this.$$elmt.addClass("s-m-scroll"+this.dir));if(e===!1&&this._evtsEnabled!==!1){if(this._evtsEnabled===!1)return;this._evtsEnabled=!1,this.hammer&&(this.hammer.off(m.pan[this.dir],this._panHandler),this.hammer.off("press",this._pressHandler)),this.$$elmt.removeClass("s-m-scroll"+this.dir)}t||(this.panStart=!1,this.stopSlowingDown(),this.cancelClick=!1,this.lastClickAllowed=null)},reset:function(){this._enableEvents(!1),this.$$elmt.off("click",this._clickHandler),this.viewRect=null,this.panStart=!1,this.stopSlowingDown(),this.cancelClick=!1,this.lastClickAllowed=null,this.val=null,this.isLocked=!1},destroy:function(){this.reset(),this.hammer&&(this.hammer.destroy(),this.hammer=null),this.$$elmt=null,this.$$nativeScroll=null,this.callBack=null,this._panHandler=null,this._pressHandler=null,this._toggleRect(!1),this._clickHandler=null,i.unbindObj(this)},refresh:function(){this.dir=="v"?this.$$elmt.css({top:this.val+"px"}):this.$$elmt.css({left:this.val+"px"})},_getScrollOffset:function(){if(this.isPageScroller||this._originalScrollOffset==null)return null;var e=s.getCurrentPage().getScrollOffset();return e==null?null:{top:e.top-this._originalScrollOffset.top,left:e.left-this._originalScrollOffset.left}},_toggleRect:function(e){if(this._$$viewRect)this._$$viewRect.remove(),this._$$docRect&&this._$$docRect.remove(),this._$$docRect=null,this._$$viewRect.off("click",this._clickHandler),this._$$viewRect=null;else if(e!==!1){this._$$viewRect=this.viewRect.showInDocument();var t=this._getScrollOffset();t&&this._$$viewRect.css({marginTop:"+="+t.top,marginLeft:"+="+t.left}),this._$$docRect=o.elmtRect(s.getCurrentPage().$$elmt).showInDocument({color:"green",zIndex:0}),this._$$viewRect.on("click",this._clickHandler)}},onClick:function(e){r&&r("onClick Status",this.slowingDown,this.panStart,this.cancelClick,this.lastClickAllowed?(new Date).getTime()-this.lastClickAllowed:null),e.$stop=!1;if(e.altKey)return a.publish("sm.hammer.scrolling.toggle"),c(this,e,"Disable/Enable events");if(e.shiftKey)return this._toggleRect(),c(this,e,"Show rectangle");if(this._evtsEnabled===!1)return;if(this.slowingDown)return c(this,e,"slowing down");if(this.cancelClick)return this.cancelClick=!1,c(this,e,"Click canceled");if(this.lastClickAllowed!=null&&(new Date).getTime()-this.lastClickAllowed<0)return this.lastClickAllowed=null,c(this,e,"Last click timeout");if(this.parentMgr&&this.parentMgr.dir!=this.dir){this.parentMgr.onClick(e);if(e.$stop===!0)return c(this,e,"Parent stopped click")}},onPress:function(e){this.lastPress=(new Date).getTime(),this.slowingDown&&(this.stopSlowingDown(),this.cancelClick=!0),this.parentMgr&&(this.parentMgr.isLocked=!1),r&&r(this.id,"onPress","slowingDown="+this.slowingDown,"panStart="+this.panStart,"cancelClick ="+this.cancelClick,"lastClickAllowed ="+this.lastClickAllowed)},onPan:function(e){r&&r(this.id,e.type,this.dir,i.isEvtDirection(e,this.dir),"isLocked",this.isLocked);if(!i.isEvtDirection(e,this.dir))return;if(this.isLocked===!0)return;try{if(!this.viewRect.isEvtInside(e.srcEvent,this._getScrollOffset())){r&&r("outside");return}if(e.type==="panstart")r&&r(e.type),this.panStart=!0,this.cancelClick=!0,this.stopSlowingDown(),this.parentMgr&&this.parentMgr.dir===this.dir&&(this.parentMgr.isLocked=!0);else if(e.type==="panend"){r&&r(e.type),this.panStart=!1,p&&this.lastVelocity!=null?(this.lastVelocity=Math.abs(this.lastVelocity),this.lastVelocity>.3&&this.lastVelocity<1?this.lastVelocity=1:this.lastVelocity=Math.min(this.lastVelocity,2),this.lastVelocity>=1?(this.slowingDown=!0,this.slowDown(this.lastVelocity,this.lastUp),this.lastVelocity=this.lastUp=null):this.parentMgr&&(this.parentMgr.isLocked=!1)):(this.lastClickAllowed=(new Date).getTime()+h,this.parentMgr&&(this.parentMgr.isLocked=!1));return}var t=e.type===this.upEvtType||e.type==="panstart"&&e.deltaY<0;this.move(v(e.velocity),t)?(this.lastVelocity=Math.abs(e.velocity),this.lastUp=t):this.lastVelocity=this.lastUp=null}catch(n){return r&&r(JSON.stringify(u.convertToDiagnoses("hammer scroller error",n),null,2)),this.destroy(),!1}},stopSlowingDown:function(){this.slowingDown=!1,this.parentMgr&&(this.parentMgr.isLocked=!1)},slowDown:function(e,t){var n=this;if(n.panStart||!n.slowingDown){this.stopSlowingDown();return}if(e<1){this.stopSlowingDown();return}n.move(v(e),t)?setTimeout(function(){n.slowDown(e,t)},d):this.stopSlowingDown()},move:function(e,t){try{if(e==0)return;var n=t?this.val-e:this.val+e,i=this.getValMin();n=Math.max(Math.min(this.valMax,n),i);if(n===this.valMax||n===i){r&&r(this.id,"end scrolling"),this.lastClickAllowed=(new Date).getTime()+h,this.cancelClick=!1;if(this.val===n)return!1}return this.val=n,this.callBack?this.callBack(this.val):(this.refresh(),!0)}catch(s){return r&&r("Page VerticalScroller onMove Error - disable scroll"),r&&r(JSON.stringify(u.convertToDiagnoses("VScrolling error",s),null,2)),this.destroy(),!1}},savedCtxCreate:function(){return this.hammer?{val:this.val}:null},savedCtxRestore:function(e,t){if(e==null||e.val==null)return;this.restoredVal=e.val,t&&this.refresh()},getOffset:function(){return{top:this.dir=="v"?this.val:0,left:this.dir=="h"?this.val:0}},notifScrollerToggle:function(e){this._enableEvents(e==null?!this._evtsEnabled:e===!0,!0);var t={overflow:l===!0?"auto":"hidden"},n=this.dir==="h"?"width":"height";t[n]=(l===!0?this.viewRect[n]:this._originalRect[n])+"px",this.$$nativeScroll.css(t);var t={overflow:l===!0?"auto":"hidden"};t[this.dir==="h"?"left":"top"]=this.valMax+"px",this.$$elmt.css(t),this.val=this.valMax},makeVisible:function(e){this.slowingDown&&(this.stopSlowingDown(),this.cancelClick=!0);if(!e||!e.jquery||e.length==0||this.viewRect==null)return;if(e.closest(this.$$elmt).length===0)return;if(l)return;if(!this._evtsEnabled)return;var t=this.dir==="v"?"top":"left",n=e.position()[t],r=e.parent();while(r.get(0)!=this.$$elmt.get(0)){var i=r.css("position");if(i==="relative"||i==="absolute"||i==="fixed")n+=r.position()[t];r=r.parent()}t=this.dir==="v"?"height":"width",n=-1*n+5,n=Math.max(Math.min(0,n),this.getValMin()),this.val=n,this.refresh();return},autoScroll:function(e){this.move(Math.abs(e),e<0)},getScrollValue:function(e){return this.val},getValMin:function(){var e=this.dir=="v"?"height":"width",t=this.$$elmt[e]();return this.valMax-t+this.viewRect[e]},adjust:function(){var e=o.elmtRect(this.$$elmt);if(e.contains(this.viewRect))return;var t=this.dir=="v"?"height":"width";this.val=this.viewRect[t]-e[t],this.refresh()}});t.Klass=g}),define("syracuse-tablet/html/js/pages/page",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/articleParser","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/application/settings"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/logger").getLogger("page"),o=e("syracuse-tablet/html/js/ui/uiUtils"),u=e("syracuse-tablet/html/js/ui/rect"),a=e("syracuse-tablet/html/js/helpers/articleParser"),f=e("syracuse-tablet/html/js/controls/ctrlFactory"),l=e("syracuse-tablet/html/js/helpers/notifications"),c=e("syracuse-tablet/html/js/helpers/hammerScroller").Klass,h=e("syracuse-tablet/html/js/application/settings"),p={fullpage:'		<section class="s-m-page s-m-full {{type}} {{subtype}}" id="{{pageid}}" {{#if parentId}}data-parent-id="{{parentId}}"{{/if}} class="ctrl-event-click" style=""> 			<header></header> 			<section class="s-m-main-content"></section> 			<footer></footer> 		</section> 	',vignette:'<section class= "s-m-page s-m-nested {{type}} {{subtype}}" id="{{pageid}}"></section>',panels:'		<div class="s-m-side-panel-dismiss" data-action="toggleSidePanel" data-params="close"></div> 		<aside class="s-m-panel s-m-left"></aside> 		<aside class="s-m-panel s-m-right"></aside>'},d=function(e,t){var n=e+"compiled",r=p[n];return r||(r=p[n]=Handlebars.compile(p[e])),r(t||{})},v=function(e){this.page=e,e.isVignette||(e.$$elmt.append($(d("panels"))),e.$$dismissPanel=e.$$elmt.children(".s-m-side-panel-dismiss")),this.destroy=function(){this.page=null},this.mainPage=function(){return this.page.isVignette?i.getCurrentPage():this.page},this.panelAttach=function(e,t,n){var r=this.mainPage();if(!r.$$dismissPanel||!t||e!="right"&&e!="left")return;r._pageControls.get(e)&&r._pageControls.get(e)!=t&&this._panelDetach(e);if(!t.isAttached(e)){var i=r.$$elmt.children("aside.s-m-panel.s-m-"+e);if(i.length!=1)return;r.controlsMap[t.id]=t,r._pageControls.add(e,t).attach(i,e)}return this.panelToggle(e,t,n)},this.panelToggle=function(e,t,n){var r=this.mainPage();t||(t=r._pageControls.get(e));if(!t||!t.$$elmt)return null;t.$$elmt.toggle(n==="close"?!1:undefined);var i=t.$$elmt.is(":visible")===!0,s=i?t.$$elmt.width():0;t.closeBox!=1&&(r.$$dismissPanel[i?"addClass":"removeClass"](e),r.$$dismissPanel.css(e,s));if(t.overlap!=1){var o=this,u=[r.$$contentElmt];["header","footer"].forEach(function(e){var t=r._pageControls.get(e);t&&u.push(t.$$elmt.parent())}),u.forEach(function(t){t.css("left",(i?(e==="right"?-1:1)*s:0)+"px")})}return t.notifyToggled(e,n,i),t},this._panelDetach=function(e){var t=this.mainPage();if(!t.$$dismissPanel)return;var n=t._pageControls.remove(e);if(!n)return;return this.panelToggle(e,n,"close"),delete t.controlsMap[n.id],n.detach()},this.panelCreate=function(e,t){return f.createPanel(this.page,e,t)},this.panelResize=function(){var e=this.mainPage();["right","left"].forEach(function(t){var n=e._pageControls.get(t);n&&n.onResize&&n.onResize()})}},m=function(e){this.page=e,this.map={},this.statics={},this.add=function(e,t){this.map[e]&&alert("Control "+e+" already exists"),this.map[e]=t;if(e==="header"||e==="footer")this.statics[e]=t;return t},this.get=function(e){return this.map[e]},this.remove=function(e){var t=this.map[e];return this.map[e]=undefined,t},this.destroy=function(){this.page=null;if(!this.map)return;for(var e in this.map)this.map[e]&&this.map[e].destroy();this.map=null,this.statics=null},this.buildHtml=function(e,t){for(var n in this.statics)this.statics[n].buildHtml(this.page.$$elmt.children(n),e,t)},this.afterRender=function(e){for(var t in this.statics)this.statics[t].afterRender&&this.statics[t].afterRender(e)},this.forAllCtrls=function(e){for(var t in this.map)e(t,this.map[t])},this.addToControlMap=function(){for(var e in this.map)this.page.addControl(this.map[e],!0)},this.closeSidePanel=function(){}},g={header:!0,footer:!0},y=r.defineClass(function(t,n,r,i,s){this.options=$.extend({},g,s),this.prototype=r,this.article=i,this.rootLayout=null,this._pageControls=null,this._panelsManager=null,this._$$parent=t,this.state=n,this.state.options=n.options||{},this.id=n.uuid,this._initMaps(),this.dao=null,this.isVignette=n.options.vignette===!0,this.isChild=n.options.parentId!=null,this.isChild&&(this.state.cached=!0),this._initRootElmt(t),l.subscribe(this,["sm.action.link","sm.select.row"],1),this.$activity="read",this.isNew=!1,this.lastSelectedRow=null,this._gestureMgr=null},null,{_initMaps:function(){this.controlsMap={},this.ctrlAfterRenderCalls=[],this.ctrlSaveCtxCalls=[]},_initRootElmt:function(e){var t=this,n=t.state.type,r,i={pageid:t.id,type:n,subtype:t.state.subtype,parentId:t.getParentId()};t.isVignette?t.$$contentElmt=t.$$elmt=$(d("vignette",i)):(t.$$elmt=$(d("fullpage",i)),t.$$contentElmt=t.$$elmt.children("section.s-m-main-content"),t._pageControls=new m(t)),t._panelsManager=new v(t),this.scrollAllowed()?(t.$$scrollWrapper=$('<div class="s-m-scroll-wrapper"/>').appendTo(t.$$contentElmt),t.$$scrollWrapper.css({height:"auto"}),t.$$ctrlsRootElmt=t.$$scrollWrapper):t.$$ctrlsRootElmt=t.$$contentElmt,t.$$elmt.hide(),t.$$elmt.appendTo(e),t.$$elmt.smPageController(t)},isDashboard:function(){return this.getType()==="dashboard"},destroy:function(){var e=this;s&&s("destroy page "+e.state.name),e.dao&&(e.dao.destroy(),e.dao=null),e.$$elmt&&(r.unbindObj(e.$$elmt),e.$$elmt=null),e._pageControls&&(e._pageControls.destroy(),e._pageControls=null),this._panelsManager&&(this._panelsManager.destroy(),this._panelsManager=null),e._waiting&&(o.waitWheelDestroy(e._waiting),e._waiting=null),e.rootLayout&&(e.rootLayout.destroy(),e.rootLayout=null),e.prototype&&(e.prototype.destroy(),e.prototype=null),e._initMaps(),r.unbindObj(e),e.article=null,e.prototype=null,e._$$parent=null,e._gestureMgr&&(e._gestureMgr.destroy(),e._gestureMgr=null)},destroySiblings:function(){if(this.$$elmt){s&&s("Page destroySiblings","destroySiblings");var e=this.$$elmt.siblings(function(e){var t=$(this).smPageController();t&&t.destroy()})}},getType:function(){return this.state.type},getProp:function(e){return r.getPropByPath(this.state,e)},openLinkInVignette:function(){return this.state.options.openLinkInVignette===!0},setDao:function(e){this.dao&&this.dao.destroy&&this.dao.destroy(),this.dao=e},refresh:function(e,t){throw new Error("Not implemeneted")},refreshControls:function(e,t){var n=this,r=[],i=function(e){if(!e)return;e.refresh(n.dao,t),e.hasError()&&r.push(e)};return e&&e.length>0?e.forEach(function(e){i(n.controlsMap[e])}):Object.keys(n.controlsMap).forEach(function(e){i(n.controlsMap[e])}),r},load:function(e){var t=this,e=e===!0,n=$.Deferred(),i=r.getTimeLine("page",t.state.name);i&&i.start();try{t.buildHtmlOption().then(function(e){t.buildOpts=e}).then(function(){return t.loadStructure(e)}).then(function(){return e?$.smResolve():(i&&i.step("loadStructure"),t.loadData())}).then(function(){return i&&i.step("loadData"),t.render(e,t.buildOpts)}).then(function(){return i&&i.step("render"),t.afterRender(e,t.buildOpts)}).then(function(){n.resolve(),i&&i.stop()}).fail(function(e){n.reject(e)})}catch(s){n.reject(s)}finally{return n.promise()}},loadStructure:function(e){var t=$.Deferred();try{if(!this.article||!this.prototype)throw new Error("loadStructure - NULL article or prototype");this._pageControls&&e!==!0&&(this.options.header===!0&&this._pageControls.add("header",f.createPageControl("pageheader",this)),this.options.footer===!0&&this._pageControls.add("footer",f.createPageControl("pagefooter",this))),this.$$elmt.attr("data-layout-path",(this.state.options.layoutPath||0)+"#page"),this.rootLayout=a.article2Controls(this,this.article,this.prototype,{},this.state.options.layoutPath),t.resolve()}catch(n){t.reject(n)}finally{return t.promise()}},loadData:function(){var e=$.Deferred(),t=this;try{t.setDao(null),e.resolve()}catch(n){e.reject(n)}finally{return e.promise()}},render:function(e,t){try{if(!this.rootLayout)throw new Error("buildHtml - NULL rootLayout");this._pageControls&&e!==!0&&this._pageControls.buildHtml(this.dao,t),this.$$ctrlsRootElmt&&(this.beforeAddContent(),this.rootLayout.buildHtml(this.$$ctrlsRootElmt,this.dao,t))}catch(n){return $.smReject(n)}return $.smResolve()},buildHtmlOption:function(){var e=this;return h.isPinnedPage(e.getPinPageId()).then(function(e){return{makeFullHeight:this.isVignette,toolBars:{showAuthoring:!this.isChild&&this.state.disableAuthoring!==!0,showLinks:!this.isChild,showHome:!this.isChild&&!this.state.isWelcomePage,statusPinPage:e?2:1}}})},updateLayout:function(e){var t=this;return t.article=e,t._initMaps(),t.rootLayout.destroy(),t.$$ctrlsRootElmt.empty(),t.load(!0).then(function(){t._pageControls.addToControlMap(),o.triggerResizeInternal()})},onMainPageResize:function(e,t,n){var r=this;if(!this.isVignette){this._deviceType&&this.$$elmt.removeClass(this._deviceType),this._deviceType=i.getSiteLayout().getDeviceType(),this.$$elmt.addClass(this._deviceType);var s=0,o=0,a=e.application.height,f=e.application.width;if(r._pageControls){var l={application:e.application,contentWidth:f,contentHeight:a};r._pageControls.forAllCtrls(function(e,r){r.onMainPageResize&&(r.onMainPageResize(l,t,n),r.isVisible()&&(e==="header"||e==="footer")&&(a-=r.getHeight(),e==="header"&&(s+=r.getHeight())))})}r.$$contentElmt.css({top:s+"px",left:o+"px",width:f+"px",height:a+"px"})}r._mainContentRect=u.elmtRect(r.$$contentElmt,"computed"),r._mainContentRect.moveLeft(parseInt(r.$$contentElmt.css("padding-left"),10)),r._gestureMgr==null&&r.$$scrollWrapper&&(r._gestureMgr=new c(this.$$scrollWrapper,{isPageScroller:!this.isVignette})),this._initScroll(),r.onResize()},getMainContentRect:function(){return this._mainContentRect},onResize:function(){this.rootLayout&&this.rootLayout.onResize&&this.rootLayout.onResize(),this._panelsManager&&this._panelsManager.panelResize()},afterRender:function(e,t){this.ctrlAfterRenderCalls.forEach(function(e){e.afterRender(t)}),this._pageControls&&e!==!0&&this._pageControls.afterRender(t)},isEditMode:function(){return!1},beforeAddContent:function(){},addTitle:function(e,t){var n="";e&&(n='<header class="s-m-page-title">'+e+"</header>"),t&&(n+="<p>"+t+"<p>"),n.length>0&&$(n).prependTo(this.$$ctrlsRootElmt)},addControl:function(e,t){if(!e)return;this.controlsMap[e.id]=e,t!==!0&&(e.afterRender&&this.ctrlAfterRenderCalls.push(e),e.savedCtxCreate&&e.savedCtxRestore&&this.ctrlSaveCtxCalls.push(e))},getControl:function(e){return this.controlsMap&&this.controlsMap[e]},activate:function(e,t,n){var r=this;r._show(e,function(){t?(r.savedContext=t.parent,r.savedCtxRestore(t.current)):r.lastSelectedRow&&r._hilightLastSelectedRow(r.lastSelectedRow),n&&n()})},deactivate:function(e){this._hide(e)},contextSave:function(e){var t=this;if(!e)return;t.savedContext={parent:e.savedContext,current:e.savedCtxCreate()}},savedCtxCreate:function(){var e=this,t={pageName:this.state.name,lastSelectedRow:e.lastSelectedRow};e._gestureMgr&&(t.scroll=e._gestureMgr.savedCtxCreate());if(e.ctrlSaveCtxCalls.length>0){var n=Object.keys(e.controlsMap);t.ctxCtrls={},e.ctrlSaveCtxCalls.forEach(function(e){var r=e.savedCtxCreate();r&&(t.ctxCtrls[n.indexOf(e.id)+""]=r)})}return t},savedCtxRestore:function(e){var t=this;this._lastScrollCtx=null;if(!e)return;if(e.pageName!=this.state.name)return;t._gestureMgr&&e.scroll&&t._gestureMgr.savedCtxRestore(e.scroll,!0),t._hilightLastSelectedRow(e.lastSelectedRow);if(e.ctxCtrls){this._lastScrollCtx;var n=Object.keys(t.controlsMap);Object.keys(e.ctxCtrls).forEach(function(r){t.getControl(n[r]).savedCtxRestore(e.ctxCtrls[r+""])})}},_hilightLastSelectedRow:function(e,t){var n=this,r=function(e,t){var r=Object.keys(n.controlsMap)[e.arrayKeyIdx];r&&n.controlsMap[r]&&n.controlsMap[r].selectLastSelectedRow(e.rowId,t)};t&&r(t,!1),e&&r(e,!0)},_show:function(e,t){var n=this,r=n.getProp("transition");if(e){e._hide(function(){n.$$elmt.show(r||0,function(){t&&t()})});return}n.$$elmt.show(r==null?0:r,t)},_hide:function(e){if(!this.$$elmt){e&&e();return}this._pageControls&&this._pageControls.closeSidePanel("all");var t=this.getProp("transition");this.$$elmt.hide(t==null?0:t,e)},isActive:function(){return this.$$elmt&&this.$$elmt.is(":visible")},isLookup:function(){return this.prototype&&this.prototype.isLookup()},getParentNotif:function(){throw new Error("not implemented")},getParentId:function(){return this.isChild?this.state.options.parentId:null},getOpenLinkAttrs:function(){return{"data-nav":this.state.name}},_actTest:function(e){var t=$('<h5 style="color:red">Action test succeeded</h5>').prependTo(this.$$elmt);window.setTimeout(function(){t.remove()},2e3)},_actHome:function(){i.getApplication().gotoWelcomeApplication()},waitWheelStart:function(e){var t=this;if(e){var n=t.controlsMap[e];n&&n.waitStart&&n.waitStart();return}t._waiting||(t._waiting=o.waitWheelCreate(t.$$elmt)),o.waitWheelStart(t._waiting)},waitWheelStop:function(e){var t=this;if(e){var n=t.controlsMap[e];n&&n.waitStop&&n.waitStop();return}t._waiting&&o.waitWheelStop(t._waiting)},notifActionLink:function(e,t){throw new Error("not implemented")},notifSelectRow:function(e,t,n,r){var i=this.lastSelectedRow;this.lastSelectedRow={arrayKeyIdx:Object.keys(this.controlsMap).indexOf(e),rowId:t},r&&this._hilightLastSelectedRow(this.lastSelectedRow,i)},goBack:function(){window.history.back()},initVignetteScroll:function(e){if(!this._gestureMgr)return;var t=this.getParentVignette().getScrollViewRect(),n=e===!0;this._gestureMgr.init(t,"v",0,n)},_initScroll:function(e){if(!this._gestureMgr)return;if(this.scrollAllowed()){var t=this.isVignette?this.getParentVignette().getScrollViewRect():this._mainContentRect;if(e===!0||t.height<this.$$scrollWrapper.height()){var n=0,r=this.isNew!==!0;this._gestureMgr.init(t,"v",n,r);var i=this.state.options["auto-scroll"];i!=null&&(this.autoScroll(i),this.state.options["auto-scroll"]=undefined)}}else this._gestureMgr.reset()},autoScroll:function(e){this._gestureMgr&&this._gestureMgr.autoScroll(e)},scrollAllowed:function(){return!this.isDashboard()&&!this.isVignette},getScrollOffset:function(){var e=i.getApplication().getScrollOffset();if(this.isDashboard()){var t=this.rootLayout?this.rootLayout.getGestureMgr():null;if(!t)return e;var n=t.getOffset();return e.top+=n.top,e.left+=n.left,n}return e},getScrollValue:function(){return this._gestureMgr?this._gestureMgr.getScrollValue():0},setParentVignette:function(e){this._parentVignette=e},getParentVignette:function(){return this._parentVignette},getMainPageGestureMgr:function(){var e=i.getCurrentPage();return e.isDashboard()?e.rootLayout?e.rootLayout.getGestureMgr():null:e._gestureMgr},makeVisible:function(e){if(!e||!this._gestureMgr)return;e.$$elmt&&(e=e.$$elmt),this._gestureMgr.makeVisible(e)},panelAttach:function(e,t,n){return this._panelsManager?this._panelsManager.panelAttach(e,t,n):null},panelCreate:function(e,t){return this._panelsManager?this._panelsManager.panelCreate(e,t):null},_actToggleSidePanel:function(e,t){if(!this._panelsManager)return;var n=this,t=t==null||t==="all"?["left","right"]:[t];t.forEach(function(t){n._panelsManager.panelToggle(t,null,e)})},getPinPageId:function(){},getPinPageData:function(){var e=this,t={name:e.state.name,title:e.prototype.data("$title"),id:e.getPinPageId()};return t}});t.Page=y}),define("syracuse-tablet/html/js/pages/pageDashboard",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/page","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/page").Page,s=e("syracuse-tablet/html/js/helpers/locale"),o=r.defineClass(function(t,n,r,s,o){i.call(this,t,n,r,s,o),this.vignettes=[]},i,{destroy:function(){i.prototype.destroy.call(this),this.vignettes=null},loadData:function(){return null},beforeAddContent:function(){this.addTitle(this.prototype.data("$title"),this.prototype.data("$description"))},addControl:function(e,t){i.prototype.addControl.call(this,e,t),e&&e.isVignette()&&this.vignettes.push(e)},afterRender:function(e){var t=this;i.prototype.afterRender.call(this,e),!this.vignettes||this.vignettes.length<1?this.renderEmptyDashboardMessage():this.vignettes.forEach(function(e){var n={sdataParameters:t.state.options&&t.state.options.sdataParameters||{}};e.load(null,n)})},findVignetteControl:function(e){if(!this.vignettes)return null;var t,n;for(var r=0;r<this.vignettes.length;r++){n=this.vignettes[r],t=n.getPageControl(e);if(t)return{control:t,vignette:n}}return null},findVignettePage:function(e){if(!this.vignettes)return null;for(var t=0,n;t<this.vignettes.length;t++){n=this.vignettes[t];if(n.getPage()&&n.getPage().id===e)return{page:n.getPage(),vignette:n}}return null},onMainPageResize:function(e,t,n){i.prototype.onMainPageResize.call(this,e,t,n),this.vignettes.forEach(function(r){r.onMainPageResize(e,t,n)})},updateLayout:function(e){return this.vignettes=[],i.prototype.updateLayout.call(this,e)},savedCtxCreate:function(){var e=i.prototype.savedCtxCreate.call(this);e.vignettes=[];var t;return this.vignettes&&this.vignettes.forEach(function(n){t=n.getPage(),e.vignettes.push(t?t.savedCtxCreate():null)}),this.rootLayout&&this.rootLayout.getGestureMgr()&&(e.hubScroll=this.rootLayout.getGestureMgr().savedCtxCreate()),e},savedCtxRestore:function(e){i.prototype.savedCtxRestore.call(this,e),this._savedVignetteContext=e.vignettes,e.hubScroll&&this.rootLayout&&this.rootLayout.getGestureMgr()&&this.rootLayout.getGestureMgr().savedCtxRestore(e.hubScroll)},savedCtxVignette:function(e){if(e==null||this._savedVignetteContext==null)return null;var t=this.vignettes.indexOf(e);return t==-1||t>this._savedVignetteContext.length-1?null:{current:this._savedVignetteContext[t]}},renderEmptyDashboardMessage:function(){var e;this.state.isWelcomePage?e=s.text("dashboard.welcome.empty"):e=s.text("dashboard.all.empty"),this.rootLayout.$$elmt.prepend('<div class="s-m-dashboard-msg-empty">'+e+"</div>")},getPinPageId:function(){var e=this;return e.state.dashboardName+"_"+JSON.stringify(e.state.options.sdataParameters)},getPinPageData:function(){var e=this,t;e.state.options.sdataParameters&&Object.keys(e.state.options.sdataParameters).forEach(function(n){var r=n+"="+e.state.options.sdataParameters[n];t?t+="&"+r:t=r});var n=i.prototype.getPinPageData.call(e);return n.dashboardName=e.state.dashboardName,n.sdataParameters=t,n}});t.Page=o}),define("syracuse-tablet/html/js/pages/pageWelcomeDashboard",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageDashboard","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/pageDashboard").Page,s=e("syracuse-tablet/html/js/helpers/locale"),o=r.defineClass(function(t,n,r,s){i.call(this,t,n,r,s),this.vignettes=[]},i,{destroy:function(){i.prototype.destroy.call(this)},loadData:function(){return null},beforeAddContent:function(){this.addTitle(this.prototype.data("$title"),this.prototype.data("$description"))},addControl:function(e,t){i.prototype.addControl.call(this,e,t),e&&e.isVignette()&&this.vignettes.push(e)},afterRender:function(e){var t=this;i.prototype.afterRender.call(this,e),!this.vignettes||this.vignettes.length<1?this.renderEmptyDashboardMessage():this.vignettes.forEach(function(e){var n={sdataParameters:t.state.options&&t.state.options.sdataParameters||{}};e.load(null,n)})},buildHtmlOption:function(){var e=this;return i.prototype.buildHtmlOption.call(e).then(function(e){return e.makeFullHeight=!1,e.toolBars={showAuthoring:!1,showLinks:!0,showHome:!1,statusPinPage:0},e})}});t.Page=o}),define("syracuse-tablet/html/js/sdata/sdatawhere/operator",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils");t.Operator=function(e,t,n,r,i,s,o){var u=this;u.code=e,u.text=t,u.precedence=n,u.isPrefix=r,u.isInfix=i,u.isAssociative=s,u.isPredicate=o},r.defineClass(t.Operator,null,{toString:function(){return this.text}}),t.operators=new function(){function n(n,r,i,s,o,u,a){var f=new t.Operator(n||r,r,i,s,o,u,a);e.operators[f.text]=f}function r(){n(null,".",1,!1,!0,!0,!1),n(null,"not",2,!0,!1,!1,!1),n("*","mul",3,!1,!0,!0,!1),n("/","div",3,!1,!0,!0,!1),n("%","mod",3,!1,!0,!0,!1),n(null,"+",4,!1,!0,!0,!1),n(null,"-",4,!0,!0,!0,!1),n("=","eq",5,!1,!0,!1,!0),n("<>","ne",5,!1,!0,!1,!0),n("<","lt",5,!1,!0,!1,!0),n("<=","le",5,!1,!0,!1,!0),n(">","gt",5,!1,!0,!1,!0),n(">=","ge",5,!1,!0,!1,!0),n(null,"between",5,!1,!0,!1,!0),n(null,"in",5,!1,!0,!1,!0),n(null,"like",5,!1,!0,!1,!0),n(null,"and",6,!1,!0,!0,!0),n(null,"or",7,!1,!0,!0,!0),n(null,"(",8,!0,!1,!1,!1),n(null,")",8,!1,!1,!1,!1),n(null,",",8,!1,!1,!1,!1)}var e=this;return e.operators={},r(),e}}),define("syracuse-tablet/html/js/sdata/sdatawhere/token",["require","exports","module","syracuse-tablet/html/js/helpers/utils","./operator"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("./operator");t.tokenType={identifier:"identifier",operator:"operator",literal:"literal"},t.Token=function(e,t,n,r,i){var s=this;s.type=e,s.value=i;var o=t,u=n,a=r;s.getRemainingText=function(){return o.substring(u,o.length)}},r.defineClass(t.Token,null,{matches:function(e){return this.value instanceof i.Operator&&this.value.code==e}})}),define("syracuse-tablet/html/js/sdata/sdatawhere/tokenizer",["require","exports","module","./token","./operator"],function(e,t,n){var r=e("./token"),i=e("./operator");t.Tokenizer=new function(){function t(e,t){while(t<e.length&&e[t]===" ")t++;return t}function n(e){return(new RegExp("[0-9]")).test(e)}function s(e){return(new RegExp("[$a-zA-Z%']")).test(e)}function o(e){return(new RegExp("[$a-zA-Z0-9_%']")).test(e)}function u(e,t,i,s){var o=i+1;while(o<t.length&&n(t[o]))o++;var u;if(o<t.length&&t[o]==="."){o++;while(o<t.length&&n(t[o]))o++;u=parseFloat(e.substring(i,o))}else u=parseInt(e.substring(i,o),10);return s.push(new r.Token(r.tokenType.literal,e,i,o-i,u)),o}function f(e,t,n,s){var u=n+1;while(u<t.length&&o(t[u]))u++;var f=t.substr(n,u-n),l=i.operators.operators[f.toLowerCase()];if(l!=null)s.push(new r.Token(r.tokenType.operator,e,n,u-n,l));else{var c;(c=a[f])!==undefined?s.push(new r.Token(r.tokenType.literal,e,n,u-n,c)):s.push(new r.Token(r.tokenType.identifier,e,n,u-n,f))}return u}function l(e,t,n,i){var s=t[n],o=n+1,u=0,a="";while(o<t.length){if(t[o]===s){o++;if(o===t.length||t[o]!==s)return i.push(new r.Token(r.tokenType.literal,e,n,o-n,a)),o}a+=t[o++]}throw new Error("quoted string not terminated: "+e.substring(n))}function c(e,t,n,s){var o=i.operators.operators[t];return s.push(new r.Token(r.tokenType.operator,e,n,1,o)),n+1}function h(e,t,n,i){var s=n+1,o=t.length;while(s<o){if(t[s]=="@")break;s++}if(s===t.length)throw new Error("Where parser: date constant not terminated:"+e.substring(n,e.length));var u=t.substr(n+1,s-n-1),a=new Date(u);if(a!=null){var f=new r.Token(r.tokenType.literal,e,n,s+1-n,a);f.dataType="datetime",f.svalue=u,i.push(f)}return s+1}var e=this,a={"true":!0,"false":!1,"null":null};return e.tokenize=function(e){var r=[],i=0;while(i<e.length){i=t(e,i);var o=e[i];switch(o){case"@":i=h(e,e,i,r);break;case'"':case"'":i=l(e,e,i,r);break;case".":case"-":case"+":case"(":case")":case",":i=c(e,o,i,r);break;default:if(s(o))i=f(e,e,i,r);else{if(!n(o))throw new Error("invalid character: "+e.substring(i));i=u(e,e,i,r)}}}return r},e}}),define("syracuse-tablet/html/js/sdata/sdatawhere/expression",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils");t.Expression=function(e){var t=this;t.children=null,e.operator?(t.type="operator",t.value=e.operator,t.children=[],e.expression1&&t.children.push(e.expression1),e.expression2&&t.children.push(e.expression2)):e.expressionType&&(t.type=e.expressionType,t.value=e.value,t.svalue=e.svalue,t.dataType=e.dataType,t.type==="function"&&(t.children=[]))},r.defineClass(t.Expression,null,{isPredicate:function(){switch(this.type){case"operator":return this.value.isPredicate;case"identifier":return!0;case"function":return!0;case"literal":return!1;default:throw new Error("invalid expression type: "+this.type)}},toString:function(){if(this.children==null)return this.value.toString();var e=[];e.push("["+this.value.toString());for(var t=0;t<this.children.length;t++)e.push(" "+this.children[t].toString());return e.push("]"),e.join("")}})}),define("syracuse-tablet/html/js/sdata/sdatawhere/parser",["require","exports","module","./token","./operator","./tokenizer","./expression"],function(e,t,n){var r=e("./token"),i=e("./operator"),s=e("./tokenizer"),o=e("./expression");t.Parser=new function(){function n(e,t,n,r){if(t[0]==e.length||!e[t[0]].matches("and"))throw new Error("invalid expression: expected 'and' after "+e[t[0]-1].getRemainingText());t[0]++;var i=u(e,t,r);n.children.push(i)}function u(e,t,r){var s=a(e,t);while(t[0]<e.length){var l=e[t[0]],c=l.value instanceof i.Operator?l.value:null;if(c==null||!c.isInfix||c.precedence>r)break;t[0]++;if(c.code=="in"){if(t[0]===e.length||!e[t[0]].matches("("))throw new Error("invalid expression: '(' expected after "+l.getRemainingText());t[0]++,s=new o.Expression({operator:c,expression1:s}),f(e,l,t,s.children)}else{var h=u(e,t,c.precedence-1);s=new o.Expression({operator:c,expression1:s,expression2:h}),c.code=="between"&&n(e,t,s,c.precedence)}if(!c.isAssociative&&c.precedence==r)return s}return s}function a(e,t){if(t[0]==e.length)throw new Error("premature end of expression");var n=e[t[0]];switch(n.type){case r.tokenType.identifier:return t[0]++,t[0]<e.length&&e[t[0]].matches("(")?c(e,n,t):new o.Expression({expressionType:"identifier",value:n.value});case r.tokenType.literal:return t[0]++,new o.Expression({expressionType:"literal",value:n.value,svalue:n.svalue,dataType:n.dataType});case r.tokenType.operator:var i=n.value;if(!i.isPrefix)throw new Error("invalid expression: expected beginning of term at "+n.getRemainingText());return t[0]++,l(e,i,t);default:throw new Error("internal error: bad token type "+n.type)}}function f(e,n,r,i){if(r[0]<e.length&&e[r[0]].matches(")")){r[0]++;return}while(r[0]<e.length){var s=u(e,r,t);i.push(s);if(r[0]<e.length&&e[r[0]].matches(")")){r[0]++;return}if(r[0]==e.length||!e[r[0]].matches(","))throw new Error("invalid expression: expected ',' or ')' at "+e[r[0]].getRemainingText());r[0]++}throw new Error("invalid function call syntax: argument missing after "+n.getRemainingText())}function l(e,t,n){var r;switch(t.code){case"-":case"not":return r=u(e,n,1),new o.Expression({operator:t,expression1:r});case"(":r=u(e,n,t.precedence);if(n[0]==e.length||!e[n[0]].matches(")"))throw new Error("invalid expression: expected ')' after "+e[n[0]-1].getRemainingText());return n[0]++,r;default:throw new Error("internal error: bad prefix operator "+t.code)}}function c(e,t,n){n[0]++;var r=new o.Expression({expressionType:"function",value:t.value});return f(e,t,n,r.children),r}var e=this,t=8;return e.parse=function(e){if(e==null||e.length==0)return null;var n=s.Tokenizer.tokenize(e),r=[];r[0]=0;var i=u(n,r,t);if(r[0]!=n.length)throw new Error("invalid expression: unexpected token at "+n[r[0]].getRemainingText());return i},e}}),define("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils",["require","exports","module"],function(e,t,n){function r(e,t,n){if(t.type=="identifier"){t.property=e[t.value];var i=n&&n.$properties&&n.$properties.$resources?n.$properties.$resources.$item:null;i&&i.$properties&&i.$properties[t.value]&&i.$properties[t.value].$type==="application/x-boolean"&&(t.property=t.property===!0?2:1)}else if(t.type=="literal")t.property=t.dataType=="datetime"?t.svalue:t.value;else if(t.children){var s=null;if(t.type=="operator")switch(t.value.code){case"and":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property&&t.children[1].property;break;case"or":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property||t.children[1].property;break;case"between":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property>=t.children[1].property&&t.children[0].property<=t.children[2].property;break;case">=":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property>=t.children[1].property;break;case">":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property>t.children[1].property;break;case"<=":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property<=t.children[1].property;break;case"<":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property<t.children[1].property;break;case"like_s":t.children.forEach(function(t){r(e,t,n)}),t.property=t.children[0].property.toUpperCase().indexOf(t.children[1].property.toUpperCase())===0;break;case"like":t.children.forEach(function(t){r(e,t,n)});var o=t.children[1].property.toUpperCase().replace(/%/g,"");t.property=t.children[0].property.toUpperCase().indexOf(o)>=0;break;case"=":t.children.forEach(function(t){r(e,t,n)}),t.children[0].property=="0000-00-00"&&t.children[1].dataType==="datetime"&&(t.children[0].property=""),t.children[1].property=="0000-00-00"&&t.children[0].dataType==="datetime"&&(t.children[1].property=""),t.property=t.children[0].property==t.children[1].property;break;case"<>":t.children.forEach(function(t){r(e,t,n)}),t.children[0].property=="0000-00-00"&&t.children[1].dataType==="datetime"&&(t.children[0].property=""),t.children[1].property=="0000-00-00"&&t.children[0].dataType==="datetime"&&(t.children[1].property=""),t.property=t.children[0].property!=t.children[1].property;break;case".":r(e,t.children[0],n),r(t.children[0].property,t.children[1],n),t.property=t.children[1].property;break;default:t.property=s,t.children.forEach(function(t){r(e,t,n),t.type=="literal"&&(t.property=s)})}else if(t.type=="function")throw new Error("exp.type == 'function' not implemented")}}t.execWhere=function(e,t,n){return t==null?!0:(r(e,t,n),t.property)}}),define("syracuse-tablet/html/js/sdata/sdataDispatcherLocal",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/sdata/sdatawhere/parser","syracuse-tablet/html/js/sdata/sdatawhere/whereUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/sdata/entities/clientContract"),s=e("syracuse-tablet/html/js/sdata/sdatawhere/parser").Parser,o=e("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils");t.Dispatcher=r.defineClass(function(){},null,{getEntity:function(e){var t=e&&e.split(".");return t&&t[0]&&t[0].smStartsWith("QUERY~")?t=t[0].split("~")[1]:t=t&&t[0],t&&i.getEntity(t)},accept:function(e,t){var n=this,r=$.Deferred();return r.resolve(n.getEntity(e.$representation)!=null),r.promise()},prototype:function(e,t){var n=$.Deferred();return n.reject("Dispatcher should never request for prototypes since they are cached in the application model on client side"),n.promise()},"new":function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services.$new(e,t)},read:function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services.$read(e,t)},query:function(e,t){var n=this,r=n.getEntity(e.$representation),u=r.$services.$query(e,t);if(e.$where){var a=$.Deferred();return u.then(function(t){var n=t.$resources,r=s.parse(e.$where),u=e.$representation&&e.$representation.split("."),f=i.getPrototype(u[0],u[1]),l=[];n.forEach(function(e,t){o.execWhere(e,r,f)&&l.push(e)}),a.resolve({$resources:l})}).fail(function(e){a.reject(e)}),a.promise()}return u},save:function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services.$save(e,t)},"delete":function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services.$delete(e,t)},service:function(e,t){var n=this,r=n.getEntity(e.$representation);return r.$services[e.$service](e,t)}})}),define("syracuse-tablet/html/js/sdata/sdataDispatcherHttp",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/sdata/sdataHttp"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/helpers/logger").getLogger("sdataDispatcher"),u=e("syracuse-tablet/html/js/sdata/sdataHttp");t.Dispatcher=r.defineClass(function(){},null,{accept:function(){var e=$.Deferred();return e.resolve(!0),e.promise()},_useCache:function(e,t,n){var r=s.getCache();if(r.isDisabled())return!1;var i=e.$parsedUrl&&e.$parsedUrl.query&&e.$parsedUrl.query.nocache;return i&&n==="read"?!1:e.$representation.indexOf(".$edit")>0&&n==="read"?!1:!0},prototype:function(e,t){var n=$.Deferred();return n.reject("Dispatcher should never request for prototypes since they are cached in the application model on client side"),n.promise()},"new":function(e,t){var n=this,i=$.Deferred();try{n._newGetCache(e,t).then(function(i){return i?(o&&o("Read template from cache: "+e.$representation),i.$uuid=r.UUID(),i):n._newDoHttp(e,t).then(function(t){if(t.isSuccess){var r=t.responseJSON;return n._newPutCache(e,r).then(function(){return r})}throw new Error("Error reading $template: "+JSON.stringify(t))}).fail(function(e){return $.smReject(e)})}).then(function(e){i.resolve(e)}).fail(function(e){i.reject(e)})}catch(s){i.reject(s)}return i.promise()},_newGetCache:function(e){var t=this;if(t._useCache(e,null,"read")){var n=s.getCache();return o&&o("Reading template from cache: "+e.$representation),n.read({$representation:"$templates",$endpoint:e.$endpoint,$key:e.$representation})}return o&&o("Disabled reading template from cache : "+e.$representation),$.smResolve()},_newDoHttp:function(e,t){var n={method:"GET",url:e.$link.$url};return u.send(n)},_newPutCache:function(e,t){var n=this;if(n._useCache(e,t,"write")){o&&o("Writing template to cache: "+e.$representation);var r=s.getCache();return r.put({$representation:"$templates",$key:e.$representation,$endpoint:e.$endpoint,$data:t})}return o&&o("Disabled writing template to cache : "+e.$representation),$.smResolve()},read:function(e,t){var n=this,r=$.Deferred();try{n._readGetCache(e,t).then(function(r){return r?(o&&o("Read data from cache: "+e.$representation),r):n._readDoHttp(e,t).then(function(t){if(t.isSuccess){var r=t.responseJSON;return n._readPutCache(e,r).then(function(){return r})}throw new Error("Error reading data: "+JSON.stringify(t))}).fail(function(e){return $.smReject(e)})}).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)})}catch(i){r.reject(i)}return r.promise()},_readGetCache:function(e){var t=this;if(t._useCache(e,null,"read")){var n=s.getCache();return o&&o("Reading data from cache: "+e.$representation),n.read({$representation:e.$representation,$endpoint:e.$endpoint,$key:e.$key})}return o&&o("Disabled reading data from cache : "+e.$representation),$.smResolve()},_readDoHttp:function(e,t){var n={method:"GET",url:e.$link.$url};return u.send(n)},_readPutCache:function(e,t){var n=this;if(n._useCache(e,t,"write")){o&&o("Writing data to cache: "+e.$representation);var r=s.getCache();return r.put({$representation:e.$representation,$key:e.$key,$endpoint:e.$endpoint,$data:t})}return o&&o("Disabled writing data to cache : "+e.$representation),$.smResolve()},query:function(e,t){var n=this,r=$.Deferred();try{n._queryGetCache(e,t).then(function(r){var i;if(r&&r.length>0){o&&o("Queried data from cache: "+e.$representation);var s={};i=n._queryCutAndAddLinks(e,t,r,s).then(function(){if(s.$resources.length>0)return s})}else i=$.smResolve(null);return i.then(function(r){return r&&r.$resources&&r.$resources.length>0?r:n._queryDoHttp(e,t).then(function(t){if(t.isSuccess){var r=t.responseJSON;return n._queryPutCache(e,r).then(function(){return r})}throw new Error("Error querying data: "+JSON.stringify(t,null,2))}).fail(function(e){return $.smReject(e)})})}).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)})}catch(i){r.reject(i)}return r.promise()},_queryCutAndAddLinks:function(e,t,n,r){var i=this,o=e.$parsedUrl.source.split("?")[0],u="",a,f=30;e.$parsedUrl.query&&e.$parsedUrl.query.where&&(u+="&where="+e.$parsedUrl.query.where),a=e.$parsedUrl.query&&e.$parsedUrl.query.key;var l,c,h=r.$resources=[],p=!1,d=!1,v,m=e.$endpoint+"."+e.$representation;return s.getMetaData().getPrototype(m).then(function(t){var s,m;t=t.$properties&&t.$properties.$resources&&t.$properties.$resources.$item||t;var g;t.$key?g=t.$key.replace(/{/g,"").replace(/}/g,""):g="$uuid";var y=t.$properties[g],b=y&&y.$type&&y.$type!=="application/x-string";if(a&&a.smStartsWith("gt")){s=b?0+a.substr(3):""+a.substr(3);for(v=0;v<n.length;v++){m=i._calculateKey(t,n[v]),m=b?+m:""+m;if(m>s){h.push(n[v]);if(h.length>f)break}else d=!0}h.length>0&&(h.length>f&&(h.pop(),p=!0),l=i._calculateKey(t,h[0]),c=i._calculateKey(t,h[h.length-1]))}else if(a&&a.smStartsWith("lt")){if(a.length>3){s=b?+a.substr(3):""+a.substr(3);for(v=n.length-1;v>=0;v--){m=i._calculateKey(t,n[v]),m=b?0+m:""+m;if(m<s){h.push(n[v]);if(h.length>f)break}else p=!0}h.length>f&&(d=!0,h.pop())}else for(v=n.length-1;v>=0;v--){h.push(n[v]);if(h.length>f)break}h.length>0&&(h.length>f&&(d=!0,h.pop()),r.$resources=h=h.reverse(),l=i._calculateKey(t,h[0]),c=i._calculateKey(t,h[h.length-1]))}else{for(v=0;v<n.length;v++){h.push(n[v]);if(h.length>f)break}h.length>0&&(h.length>f&&(p=!0,h.pop()),l=i._calculateKey(t,h[0]),c=i._calculateKey(t,h[h.length-1]))}var w=r.$links={};a&&(w.$first={$url:o+"?representation="+e.$representation+u}),a&&l&&d&&a!=="gt"&&(w.$previous={$url:o+"?representation="+e.$representation+u+"&key=lt."+l}),a!=="lt"&&c&&p&&(w.$next={$url:o+"?representation="+e.$representation+u+"&key=gt."+c}),a!=="lt"&&(w.$last={$url:o+"?representation="+e.$representation+u+"&key=lt"}),w.$more={$url:e.$parsedUrl.source+"&nocache=true"}})},_queryGetCache:function(e){var t=this;if(t._useCache(e,null,"read")){var n=s.getCache();o&&o("Querying data from cache: "+e.$representation);var r=e.$endpoint+"."+e.$representation;return s.getMetaData().getPrototype(r).then(function(r){return t._checkQueryPrototype(e,r),n.query({$proto:r,$endpoint:e.$endpoint,$where:e.$where}).fail(function(e){return $.smReject(e)})})}return o&&o("Disabled querying data from cache : "+e.$representation),$.smResolve()},_queryDoHttp:function(e,t){var n={method:"GET",url:e.$link.$url};return u.send(n)},_queryPutCache:function(e,t){var n=this;if(n._useCache(e,t,"write")){o&&o("Writing data to cache: "+e.$representation);var r=s.getCache(),i=e.$endpoint+"."+e.$representation;return s.getMetaData().getPrototype(i).then(function(i){return i=i.$properties&&i.$properties.$resources&&i.$properties.$resources.$item||i,t.$resources.forEachPromise(function(t){var s=n._calculateKey(i,t);return r.put({$representation:e.$representation,$key:s,$endpoint:e.$endpoint,$data:t})})})}return $.smResolve(t)},save:function(e,t){var n=this,r=$.Deferred();try{n._saveDoHttp(e,t).then(function(t){if(t.isSuccess){var i=t.responseJSON;return n._savePutCache(e,i).then(function(){return i})}r.reject(t)}).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)})}catch(i){r.reject(i)}return r.promise()},_saveDoHttp:function(e,t){var n={method:e.$link.$method,url:e.$link.$url,send:t};return u.send(n)},_savePutCache:function(e,t){var n=this;try{if(n._useCache(e,t,"write")){o&&o("Writing data to cache: "+e.$representation);var r=s.getCache(),i=e.$key,u;if(!i){var a=e.$endpoint+"."+e.$representation;u=s.getMetaData().getPrototype(a).then(function(e){return e=e.$properties&&e.$properties.$resources&&e.$properties.$resources.$item||e,i=n._calculateKey(e,t),i})}else u=$.smResolve(i);u.then(function(i){n._removeFromCache({$representation:e.$representation,$key:i,$endpoint:e.$endpoint}).then(function(){return r.put({$representation:e.$representation,$key:i,$endpoint:e.$endpoint,$data:t})})})}return o&&o("Disabled writing data to cache : "+e.$representation),$.smResolve()}catch(f){return $.smReject(f)}},"delete":function(e,t){var n=this,r=$.Deferred();try{n._deleteDoHttp(e,t).then(function(t){if(t.isSuccess){var r=t.responseJSON;return n._deleteRemoveCache(e,r).then(function(){return r})}return $.smReject(t)}).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)})}catch(i){r.reject(i)}return r.promise()},_deleteDoHttp:function(e,t){var n={method:e.$link.$method,url:e.$link.$url};return u.send(n)},_deleteRemoveCache:function(e,t){var n=this;if(n._useCache(e,t,"write")){o&&o("Deleting data from cache: "+e.$representation);var r=s.getCache();n._removeFromCache({$representation:e.$representation,$key:e.$key,$endpoint:e.$endpoint}).then(function(){return r.remove({$representation:e.$representation,$key:e.$key,$endpoint:e.$endpoint})})}return o&&o("Disabled deleting data from cache : "+e.$representation),$.smResolve()},service:function(e,t){if(r.isOnline()){var n={method:e.$link.$method,url:e.$link.$url,data:t};return u.send(n)}return $.smResolve({$diagnoses:[{$severity:"error",$message:i.text("error.service.offline")}]})},_calculateKey:function(e,t){var n;return e.$key?n=e.$key.replace(/\{(.*?)\}/g,function(e,n){return t[n]}):n=t.$uuid,n},_getKeyFields:function(e){var t=e.$key||e.$properties&&e.$properties.$resources&&e.$properties.$resources.$item&&e.$properties.$resources.$item.$key;if(t){var n=[];return t.replace(/\{(.*?)\}/g,function(e,t){n.push(t)}),n.length<1?["$uuid"]:n}return["$uuid"]},_checkQueryPrototype:function(e,t){e.$representation.smStartsWith("QUERY~")&&t.$properties.$resources.$item&&!t.$properties.$resources.$item.$type&&(t.$properties.$resources.$item.$type="{$baseType}."+e.$representation)},_removeFromCache:function(e){var t=this,n=s.getCache(),r=["$edit","$create","$details","$query","$lookup"],i=e.$representation.split(".")[0];return r.forEachPromise(function(t){return e.$representation.indexOf("."+t)>0?$.smResolve():n.remove({$representation:i+"."+t,$key:e.$key,$endpoint:e.$endpoint})})}})}),define("syracuse-tablet/html/js/sdata/sdataDispatcher",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/sdata/sdataDispatcherLocal","syracuse-tablet/html/js/sdata/sdataDispatcherHttp"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("sdataDispatcher"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/sdata/sdataDispatcherLocal").Dispatcher,o=e("syracuse-tablet/html/js/sdata/sdataDispatcherHttp").Dispatcher,u=[new s,new o];t.dispatch=function(e,n,i){var s=$.Deferred();try{r&&r("Dispatch: "+e.$method+": "+e.$url);var o=t.parseLink(e),a;u.forEachPromise(function(e){return e.accept(o,n)},function(e,t){return t===!0?(a=e,!0):!1});var f=a[o.$operation](o,n);if(!f)throw new Error("Could not dispatch: "+e.$method+": "+e.$url+" ("+o.$operation+")");f.then(function(e){s.resolve(e)}).fail(function(e){s.reject(e)})}catch(l){s.reject(l)}return s.promise()};var a=/\$prototypes\('(.*?)'\)/,f=/\('(.*?)'\)/;t.parseLink=function(e){var t=e.$url,n={$link:e,$parsedUrl:i.parseSDataURL(e.$url)};n.$endpoint=n.$parsedUrl.application+"."+n.$parsedUrl.contract+"."+n.$parsedUrl.dataset;var r=n.$parsedUrl.directory,s;if(e.$method==="GET"){if(t.indexOf("$prototypes")>-1)n.$operation="prototype",n.$representation=a.exec(t)[1];else if(r.indexOf("$template")>-1)n.$operation="new",n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation;else if(n.$parsedUrl.$services)n.$operation="service",n.$service=n.$parsedUrl.$services,n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation;else{var o=f.exec(r),u=r.indexOf("/QUERY(")>-1;o&&!u?(n.$operation="read",n.$key=o[1],n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation):(n.$operation="query",n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation)}n.$parsedUrl.query&&n.$parsedUrl.query.where&&(n.$where=n.$parsedUrl.query.where)}else if(n.$parsedUrl.$services)n.$operation="service",n.$service=n.$parsedUrl.$services,n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation;else if(e.$method==="DELETE"){var o=f.exec(r);n.$operation="delete",n.$key=o[1],n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation}else{var o=f.exec(r);o?(n.$operation="save",n.$key=o[1],n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation):(n.$operation="save",n.$representation=n.$parsedUrl.query&&n.$parsedUrl.query.representation)}return n}}),define("syracuse-tablet/html/js/storage/sessionStorage",["require","exports","module","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("sessstorage"),i=null,s={},o=function(){if(i!==null)return i;i=!1;try{window.sessionStorage.setItem("__test_availability_session__","__test_availability_session__"),i=!0}catch(e){}return i},u=function(e){if(!o())return r&&r("session.fallback.getItem("+e+"):"+t),s[e];var t=window.sessionStorage.getItem(e);return r&&r("session.getItem("+e+"):"+t),t},a=function(e,t){if(!o()){r&&r("session.fallback.setItem("+e+"):"+t),s[e]=t;return}return r&&r("session.setItem("+e+"):"+t),window.sessionStorage.setItem(e,t)},f=function(e){if(!o()){r&&r("session.fallback.removeItem("+e+")"),delete s[e];return}return r&&r("session.removeItem("+e+")"),window.sessionStorage.removeItem(e)};t.removeItem=f,t.setItem=a,t.getItem=u}),define("syracuse-tablet/html/js/pages/pageRegular",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/pages/page","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/application/appFactory","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/controls/ctrlFactory","syracuse-tablet/html/js/storage/sessionStorage","syracuse-tablet/html/js/application/eventListener"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/logger").getLogger("page"),s=e("syracuse-tablet/html/js/pages/page").Page,o=e("syracuse-tablet/html/js/helpers/globals"),u=e("syracuse-tablet/html/js/sdata/sdataDispatcher"),a=e("syracuse-tablet/html/js/application/appFactory"),f=e("syracuse-tablet/html/js/sdata/sdataUtils"),l=e("syracuse-tablet/html/js/helpers/notifications"),c=e("syracuse-tablet/html/js/controls/ctrlFactory"),h=e("syracuse-tablet/html/js/storage/sessionStorage"),p=e("syracuse-tablet/html/js/application/eventListener"),d=function(e){var e=r.parseURL(e);return e.query&&Object.keys(e.query).forEach(function(t){t!="representation"&&delete e.query[t]}),r.urlToString(e)},v=r.defineClass(function(t,n,r,i,o){s.call(this,t,n,r,i,o),this.gadget=this.state.options.gadget,this._initSdataInfo(this.state.options["sdata-url"],this.state.options["sdata-method"]),l.subscribe(this,["sm.lookup.selection","sm.rowdetail.update","sm.rowdetail.delete"],1),this.prototype.data("$url")&&(this.$facet=f.parseSDataURL(this.prototype.data("$url")).facet,this.$activity=this.$facet==="edit"?"edit":this.$facet==="create"?"create":"read")},s,{_initSdataInfo:function(e,t){e||(this.gadget?e=this.gadget.getSDataUrl(this.prototype):e=this.prototype.data("$url"));if(this.gadget){var n=this.gadget.getParameters();n.where&&(e=f.addWhereClause(e,n.where,this.state.options.sdataParameters))}if(!e)throw new Error("$url (sDataUrl) is expected");this.state.options["sdata-url"]=this.sDataUrl=e,this.sDataMethod=t||"GET"},destroy:function(){s.prototype.destroy.call(this),this.gadget=null},isEditMode:function(){return this.$activity==="edit"||this.$activity==="create"},beforeAddContent:function(){if(!this.isVignette){var e=this.prototype.data("$title");this.addTitle(o.getApplication().getTitle()+(e?" - "+e:""))}},getOpenLinkAttrs:function(){var e=s.prototype.getOpenLinkAttrs.call(this);return e["data-sdata-url"]=this.sDataUrl,e["data-sdata-method"]=this.sDataMethod,e["data-gadget-id"]=this.gadget.data("$uuid"),e},refresh:function(e,t){var n=this;e=e||{};var r=$.Deferred(),i=e["sdata-url"],s=e.controlId,o=e.type||"",u=o==="filtersort",a=function(e){n["waitWheel"+e.smCapitalize()].call(n,s)};try{var f=function(){a("stop"),n.refreshControls(s?[s]:null,e),r.resolve()};!i&&u!==!0?f():(a("start"),i&&n._initSdataInfo(i),n.loadData().then(function(){f()}).fail(function(e){a("stop"),r.reject(e)}))}catch(l){r.reject(l)}finally{return r.promise()}},loadData:function(){var e=$.Deferred(),t=this,n=function(t){i&&i("loadData failed",t),e.reject(t)};try{u.dispatch({$url:t._filterSortAllowed(!1)?t._filterSortUpdateUrl():t.sDataUrl,$method:t.sDataMethod}).then(function(n){return n?t.setDao(a.createDaoSdata("representation",n,t.prototype,null)):o.getModal().actionResult("updateDao",{$diagnoses:[{$message:"NO DATA",$severity:"info"}]}),e.resolve()}).fail(function(e){n(e)})}catch(r){n(r)}finally{return e.promise()}},notifLookupSelection:function(e,t){if(!this.isActive())return;try{var n=this.getControl(t);if(!n)throw new Error("Control not found '"+t+"'");n.setFieldValue(e)}catch(r){o.getModal().error("notifLookupSelection failed",r)}},notifActionLink:function(e,t,n,r){if(!this.isActive())return;try{var i=n?n.responseJSON||{}:{};switch(t.name){case"$save":this._doActSave(e,t,i,r);break;case"$delete":o.getApplication().goBack().always(function(){f.displayActionMsg(e,t.name,i)});break;case"$canceledit":var s=this.getScrollValue();o.getApplication().goBack().always(function(e){e&&setTimeout(function(){e.autoScroll(s*.8)})});break;default:t.$isAction===!0&&this._updateMeta(i),f.displayActionMsg(e,t.name,i)}}catch(u){o.getModal().error("notifActionLink failed",u)}},validateBeforeActionLink:function(e){if(e&&e.name==="$save"){if(!this.isEditMode())return!0;var t=this,n=!0,r,i;return Object.keys(t.controlsMap).forEach(function(e){i=t.controlsMap[e],i&&(n=n&&i.checkData(),!n&&r==null&&(r=i))}),r&&r.setFocus(),n}return!0},_doActSave:function(e,t,n,r){var i=this;e?o.getApplication().goBack().always(function(){f.displayActionMsg(e,t.name,n)}):(i._updateMeta(n),!e&&(n==null||!n.$diagnoses||n.$diagnoses.length==0)&&(n.$diagnoses=[{$message:"Save action failed without message",$severity:"error"}]),o.getModal().actionResult("Action: "+t.name,n))},_updateMeta:function(e){if(this.dao.updateMeta(e)){var t=this.refreshControls(null,{});t.length>0&&t[0].setFocus(),this._gestureMgr&&this._gestureMgr.adjust()}},scrollAllowed:function(){return this.prototype.isLookup()||this.prototype.isQuery()?!1:!0},onMainPageResize:function(e,t,n){s.prototype.onMainPageResize.call(this,e,t,n),(this.prototype.isLookup()||this.prototype.isQuery()&&!this.isVignette)&&this.$$contentElmt.css({height:this.getMainContentRect().height+"px"})},notifRowdetailUpdate:function(e,t){if(!e)return;var n=e.dao;if(!n)return;var r=this.getControl(t);if(!r)return;var i=e.activity==="create",s;!i&&r.prototype.isSingleArray()&&(s=r.rowId2Idx(n.getValue("$uuid")));if(n.updateParentRow(i,s)){var o=this.refreshControls([t],{});o.length>0&&o[0].setFocus()}n.destroy()},notifRowdetailDelete:function(e,t){if(!e||!e.uuid)return;var n=this.getControl(t);if(!n)return;var r=e.uuid;n.prototype.isSingleArray()&&(r=n.rowId2Idx(e.uuid)),this.dao.deleteRow(n.$bind,r),n.removeRow(e.uuid)},getPinPageId:function(){var e=this;return e.state.name+"_"+e.sDataUrl},getPinPageData:function(){var e=this,t=s.prototype.getPinPageData.call(e);t.sDataUrl=e.sDataUrl,t.key=e.prototype.data("$key",e.dao);var n=r.parseURL(t.sDataUrl),i=n.query.representation.split(".");t.representation=i[0],t.facet=i[1],t.action=i[1];var o=n.path.split("/");t.entity=o[5];var u=e.prototype.data("$value",e.dao);return u&&(t.title=e.prototype.data("$title")+" - "+u),t},filterSortRead:function(e,t){if(!this._filterSortAllowed(!0))return;var n=this._filterInfoSaveId(e,t);this._filterSortInfo||(this._filterSortInfo={});var r=this._filterSortInfo[n];if(r)return r;r=h.getItem(n);if(r)try{return r=JSON.parse(r),r}catch(i){}return null},filterSortWrite:function(e,t,n,r){if(!this._filterSortAllowed(!0))return;if(t&&t.length>0){var i=this._filterInfoSaveId(e,n),s=this.filterSortRead(e,n);if(s==null||!this._filterSorEquals(e,t,s)){this._filterSortInfo[i]=t,h.setItem(i,JSON.stringify(t));if(r===!0){var o={"data-control-id":n.id,"data-nav-target":this.isVignette?"vignette":"application","data-nav-type":"filtersort"};this.sDataUrl=d(this.sDataUrl),setTimeout(function(){p.triggerRefreshPage(n.$$elmt,o)})}}}},_filterSortAllowed:function(e){return this.prototype.isLookup()||this.prototype.isQuery()?!0:(e&&console.log("!! filterSort is allowed only for facets lookup and query"),!1)},_filterInfoSaveId:function(e,t){this._filtersortUrlId||(this._filtersortUrlId=d(this.sDataUrl));var n=this._filtersortUrlId+"#"+e;return this.prototype.isLookup()||this.prototype.isQuery()?n:n+"_"+t.$bind},_filterSorEquals:function(e,t,n){if(t==null||n==null)return!0;if(e=="sort"){if(n.length!=t.length)return!1;for(var r=0;r<t.length;r++){if(t[r].sort!==n[r].sort)return!1;if(t[r].field!==n[r].field)return!1}return!0}e=="filter"},_filterSortUpdateUrl:function(){if(!this._filterSortAllowed(!0))return this.sDataUrl;var e=null,t=this.filterSortRead("sort");t!=null&&t.length!=0&&t.some(function(t){if(t.sort!="none")return e={order:t.sort,field:t.id},!0});var n=null;t=this.filterSortRead("filter"),t!=null&&t.length!=0;if(!e&&!n)return this.sDataUrl;var i=r.parseURL(this.sDataUrl);if(e&&i.query.key==null){var s=i.query.orderBy;i.query.orderBy=e.field+" "+e.order,s&&i.query.orderBy==", "+s}return n,r.urlToString(i)}});t.Page=v}),define("syracuse-tablet/html/js/pages/pageRowDetail",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/pages/pageRegular","syracuse-tablet/html/js/sdata/sdataUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/pages/pageRegular").Page,o=e("syracuse-tablet/html/js/sdata/sdataUtils"),u=r.defineClass(function(e,t,n,r,i,o){this.parentPage=i,this.parentPage.state.type==="rowdetail"?this.mainPageId=this.parentPage.mainPageId:this.mainPageId=this.parentPage.state.uuid;if(!this.parentPage)throw new Error("rowdetail page - Unexpected empty parent page");s.call(this,e,t,n,r,o),this.$activity=this.parentPage.$activity},s,{_initSdataInfo:function(e,t){},destroy:function(){s.prototype.destroy.call(this),this.parentPage=null,this._notifData=null},isEditMode:function(){return this.parentPage&&this.parentPage.isEditMode()},buildHtmlOption:function(){return s.prototype.buildHtmlOption.call(this).then(function(e){return e.toolBars.showHome=!0,e})},_actHome:function(){var e=this;if(!e.parentPage)return;i.getApplication().goBack(function(t){return t.uuid===e.mainPageId})},loadData:function(){var e=this.parentPage.getControl(this.state.options.controlId);if(!e)throw new Error("rowdetail page - Array datasource not found");var t=e.rowDetailGetInfo(),n=t.dao;if(!n)throw new Error("rowdetail page - Row data not found");return this.setDao(n),this.$activity=t.activity,this.singleArrayRowIdx=t.singleArrayRowIdx,$.smResolve()},notifActionLink:function(e,t,n,r){try{switch(t.name){case"$save":this._doActSave(e,t,r);break;case"$delete":this._doActDelete(e,t,r);break;default:o.displayActionMsg(e,t.name)}}catch(s){i.getModal().error("notifActionLink failed",s)}},_doActSave:function(e,t,n,r){e&&(this.dao.checkArrayUpdateError(),this._notifData={notifId:"sm.rowdetail.update",notifData:{dao:this.dao,activity:this.$activity,singleArrayRowIdx:this.singleArrayRowIdx}},this.dao=null,i.getApplication().goBack())},_doActDelete:function(e,t,n,r){this._notifData={notifId:"sm.rowdetail.delete",notifData:{uuid:this.dao.getValue("$uuid")}},i.getApplication().goBack()},getParentNotif:function(){if(this._notifData)return this._notifData.parentId=this.state.options.parentId,this._notifData.controlId=this.state.options.controlId,this._notifData}});t.Page=u}),define("syracuse-tablet/html/js/pages/pageLookup",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageRegular","syracuse-tablet/html/js/application/eventListener"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/pageRegular").Page,s=e("syracuse-tablet/html/js/application/eventListener"),o='	<br><br><br>					<h3 class="alert alert-info" style= "text-align:center" role="alert">					No data					</h3>					<br>					<div  style= "font-size:xx-large;text-align:center">					<a draggable="false" href="#" data-action="lookupBack" class="fa fa fa-arrow-circle-o-left" style="display: inline-block;"/>					</div>',u=r.defineClass(function(e,t,n,r,s){s.footer=!1,i.call(this,e,t,n,r,s),this.selectedRowJson=null},i,{destroy:function(){i.prototype.destroy.call(this),this.selectedRowJson=null},notifSelectRow:function(e,t,n){if(!n)return;this.selectedRowJson=n,this._actLookupBack()},afterRender:function(e,t){i.prototype.afterRender.call(this,e,t);var n;for(var r in this.controlsMap){n=this.controlsMap[r];if(n&&n.$type==="application/x-array")break;n=null}n&&n.isEmpty==1&&this.$$elmt.html(o)},getParentNotif:function(){return this.selectedRowJson?{parentId:this.state.options.parentId,controlId:this.state.options.controlId,notifId:"sm.lookup.selection",notifData:this.selectedRowJson}:null},_actLookupBack:function(){this.isVignette?s.triggerAction(this.$$elmt,"vignetteBack"):this.goBack()}});t.Page=u}),define("syracuse-tablet/html/js/pages/pageHtml",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/pages/page"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/prototype"),s=e("syracuse-tablet/html/js/pages/page").Page,o=r.defineClass(function(e,t,n){s.call(this,e,t,i.create(t.$prototype),t.$article,n)},s,{afterRender:function(e,t){s.prototype.afterRender.call(this,e,t),this.$$htmlRoot=this.rootLayout.$$elmt,this.appendHtml(this.$$htmlRoot,t)},appendHtml:function(e,t){}});t.Page=o}),define("syracuse-tablet/html/js/pages/pageLogin",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageHtml","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/jsutils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/pageHtml").Page,s=e("syracuse-tablet/html/js/application/authentication"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=e("syracuse-tablet/html/js/helpers/locale"),a=e("syracuse-tablet/html/js/helpers/jsutils"),f='	<div class="s-m-loginform" style="display:none">		<div class="row">			<div class="col-xs-offset-1 col-xs-10 col-sm-offset-3 col-sm-6 col-md-offset-4 col-md-4 col-lg-offset-4 col-lg-4">				<div class="panel panel-default">					<div class="panel-heading s-m-login-header"><span class="s-m-signin">{{label_signin}} </span> <span class="s-m-brand">{{label_brand}}</span> <span class="s-m-product">{{label_product}}</span></div>					<div class="panel-body s-m-login-body">						<br>						<div class="form-group">							<input type="text" value="" class="form-control s-m-login-form-input" placeholder="{{label_user}}"	id="login-user">						</div>						<br>						<div class="form-group">							<input type="password" class="form-control s-m-login-form-input" placeholder="{{label_password}}" id="login-password">						</div>						<br>						<br>						<button id="login-login" data-action="login" type="button" class="btn btn-primary s-m-signin-btn">{{act_login}}</button>					</div>				</div>			</div>		</div>		<div class="row">			<div class="col-xs-offset-1 col-xs-10 col-sm-offset-3 col-sm-6 col-md-offset-4 col-md-4 col-lg-offset-4 col-lg-4">				<div id="login-reason" style="display: none" class="alert alert-info" role="alert"></div>				<div id="login-success" style="display: none" class="alert alert-success" role="alert"></div>				<div id="login-fail" style="display: none" class="alert alert-danger" role="alert"></div>			</div>		</div>	</div>',l,c=r.defineClass(function(e,t,n){n.header=!1,n.footer=!1,i.call(this,e,t,n)},i,{appendHtml:function(e,t){this.$$elmt.addClass("login");var n={label_user:u.text("login.label.user"),label_password:u.text("login.label.password"),act_login:u.text("login.label.signinaction"),label_signin:u.text("login.label.signin"),label_brand:u.text("login.label.brand"),label_product:u.text("login.label.product")},r=Handlebars.compile(f);e.html(r(n)),this.state.options.reason&&e.find("#login-reason").text(this.state.options.reason).show()},_actLogin:function(){var e=this,t=$.Deferred(),n=!1;try{e.$$elmt.find("#login-reason").remove();var r=e.$$elmt.find("#login-success").hide(),i=e.$$elmt.find("#login-fail").hide(),u=e.$$elmt.find("#login-user").val(),f=e.$$elmt.find("#login-password").val(),l=e.$$elmt.find("#login-locale").val(),c=null;e.waitWheelStart(),s.login(u,f).then(function(e,t,n){return e?(c=t,$.smResolve()):$.smReject(n)}).then(function(){e.waitWheelStop();var t=$.Deferred();return o.publish("sm.login",c,t),t.promise()}).then(function(e){}).fail(function(t){var n,r;a.isError(t)?(r=t.message,n=a.cleanStack(t.stack,3,!0)):r=t,i.show().html("Login failed<p>"+r+"</p>"+(n?n:"")),e.waitWheelStop()})}catch(h){t.reject(h)}finally{return t.promise()}},onMainPageResize:function(e,t,n){i.prototype.onMainPageResize.call(this,e,t,n);var r=this.$$elmt.outerHeight(),s=this.$$htmlRoot.children("div.s-m-loginform"),o=s.height();this.$$htmlRoot.css({top:Math.max(0,Math.round((r-o)/2)),position:"relative"}),s.show()},scrollAllowed:function(){return!1}});t.Page=c}),define("syracuse-tablet/html/js/application/daoApp",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=r.defineClass(function(e){var t=this;t._appli=e,t.appMetaData=null},null,{destroy:function(){var e=this;e._appli=null},isApplicationLoaded:function(){var e=this;return e.appMetaData!=null},setApplication:function(e){var t=this;e&&(t.appMetaData=$.extend(!0,{},e))},getApplicationName:function(){var e=this;return e.appMetaData&&e.appMetaData.$application.applicationName||""},getApplicationTitle:function(){var e=this;return e.appMetaData&&(e.appMetaData.$application.title||e.appMetaData.$application.applicationName)||""},getHomeDashboardName:function(){var e=this,t;if(e.appMetaData&&e.appMetaData.$dashboards)for(var n in e.appMetaData.$dashboards){var r=e.appMetaData.$dashboards[n];r.$dashboardName===e.appMetaData.$application.$homeDashboard.dashboardName&&(t=r.$dashboardName)}return t}});t.Dao=i}),define("syracuse-tablet/html/js/application/daoSdata",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/articleParser","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/helpers/articleParser"),u=e("syracuse-tablet/html/js/helpers/locale"),a={$properties:{$isExcluded:!1,$isHidden:!1,$isMandatory:!1,$isReadOnly:!1,$isDisabled:!1,$diagnoses:null,$x3Format:null},$links:{$isDisabled:!1,$isHidden:!1,$style:!1,$isRequested:!1}},f=function(e,t){var n={},r;for(var i in a)r=e[i],r&&!$.isEmptyObject(r)&&(n[i]=r);return $.isEmptyObject(n)?null:($.extend(t,n),n)},l=function(e,t,n,r){if(!e||!t)return!1;var i=f(e,t);if(r==1&&i&&i.$properties)for(var s in i.$properties)if(i.$properties[s].$diagnoses!=null){t.$arrayUpdateError=!0;break}var u=i!=null;if(n)for(var a in n){var c=n[a];if(c&&c.$type==="application/x-array"&&e[a]&&!o.isSingleArray(c)){var h=e[a],p=t[a];if(!p)throw new Error("Unexpected empty data array - "+a);for(var d=0;d<h.length&&d<p.length;d++){var v=p[d];i=l(h[d],v,c.$item.$properties,!0),v.$arrayUpdateError&&r&&(t.$arrayUpdateError=!0),u=i!=null||u}}}return u},c=function(e){switch(e.$type){case"application/x-password":case"application/x-string":return"";case"application/x-quantity":return 0;case"application/x-decimal":case"application/x-real":return 0;case"application/x-integer":return 0;case"application/x-boolean":return!1;case"application/x-date":return"";case"application/x-datetime":return"";case"application/x-time":return"";case"application/x-choice":return e.$value.$enum[0].$value;case"application/x-reference":return{$value:"",$description:"",$title:""};case"application/x-array":return[];default:return null}},h=["$isMandatory","$isReadOnly","$isHidden","$isExcluded","$isDisabled","$actions","$format"],p=function(e){var t;if(e.isSingleArray())t={$properties:{"~data~":""}};else{t={$properties:{}};var n=e.getDataByPath("$item.$properties");for(var r in n)if(!r.smStartsWith("$")){var i=n[r];t[r]=c(i);var s=t.$properties[r]={};h.forEach(function(e){i[e]!=null&&(s[e]=i[e])})}}return t},d=function(e,t,n,i){var s;return s=p(t),s.$uuid=r.UUID(),new m(s,v(e,t),i,n)},v=function(e,t){var n={$url:"",$typ:"rowdetail",$links:{}};e.controller.isEditMode()&&(n.$links.$save={$title:"Save"},n.$links.$delete={$title:"Delete",$confirm:u.text("actions.del.confirm")});if(t.isSingleArray()){var r=$.extend({},t.getDataByPath("$item"));return r.$isMandatory=!0,r.$isReadOnly=r.$isHidden=r.$isDisabled=!1,n.$properties={"~data~":r},t.create(n)}return t.getPrototype("$item",n)},m=r.defineClass(function(e,t,n,r){var i=this;i.$bind=r||"",i.data=e||{};if(!t)throw new Error("Prototype is mandatory");if(!e)throw new Error("jsonData is mandatory");i.prototype=t,i.resetCache(),i.parent=n},null,{destroy:function(){var e=this;e.parent=null,e.data=null,e.prototype=null},resetCache:function(){this._cache={metaData:{},queryData:null}},setValue:function(e,t,n){var r=!1,i=this.data[e];if(this.prototype.isReference(e)){var o=this.prototype.getFieldNameForValue(e);if(o!==e){var u;typeof t=="object"?u=t.$value||"":u=t+"";if(u!=this.data[o]){this.data[e]=i={},this.data[o]=u;if(u===t)i.$value=u;else for(var a in t)i[a]=t[a];i[o]=u,r=!0}}else if(i==null||i.$value!=t)throw new Error("Syracuse entities - x-refrence setValue not implemented")}else if(i==null||i!==t)this.data[e]=t,r=!0;return r&&n===!0&&s.publish("sm.dao.updated",this,e,t),r},getValue:function(e,t,n,r){if(!e||e.length===0)return t;var i=this.data[e];if(i!=null&&this.prototype.isReference(e)&&typeof i=="object"&&i.$value==null){var s=this.prototype.getFieldNameForValue(e);return s!=e?i.$value=this.getValue(s,t):i.$value=i,i}if(i!=null)return i;if(n&&i==null&&this.parent){var o=this.parent.getValue(e,t,n,!0);o!=null&&r!==!0&&console.log("dao.getValue - Field "+e+" - value comes from parent - $bind"+(this.$bind?this.$bind:"")),i=o}return i!=null?i:t},getMetaData:function(e,t){if(!e)throw new Error("getMetaData - type expected");t!=null&&e=="$properties"&&this.prototype.isReference(t)&&(t=this.prototype.getFieldNameForValue(t));var n=this._cache.metaData[e];if(n){if(t==null)return n;if(t!=null&&n[t]!=null)return n[t];n=n[t]={}}else n=this._cache.metaData[e]={},t!=null&&(n=n[t]={});var r=this.prototype.data(e);r&&t!=null&&(r=r[t]);var i=this.data[e];i&&t!=null&&(i=i[t]);var s=a[e];if(!s)throw new Error("getMetaData - unexpected type["+e+"]");for(var o in s){if(i&&i[o]!=null){n[o]=i[o];continue}r&&r[o]!=null?n[o]=r[o]:n[o]=s[o]}return n},removeMetaDiagnoses:function(e){this.prototype.isReference(e)&&(e=this.prototype.getFieldNameForValue(e)),[this.data,this._cache.metaData].forEach(function(t){var n=t.$properties;n&&n[e]&&(n[e].$diagnoses=undefined)})},getFieldInfo:function(e){return{meta:this.getMetaData(),value:this.getValue()}},getArrayData:function(e,t){var n=this,s={$resources:[]},o=n.getValue(e)||[];if(t.isSingleArray())o.forEach(function(o){var u={};u[i.SINGLEARRAYPROP]=o,u.$uuid=r.UUID();var a=t.getPrototype("$item");if(a.property(i.SINGLEARRAYPROP).$type==="application/x-reference"){var f=a.getFieldNameForValue(i.SINGLEARRAYPROP);f&&(u[f]=o[f])}s.$resources.push(new m(u,a,n,e))});else{var u=t.getPrototype("$item");o.forEach(function(t){s.$resources.push(new m(t,u,n,e))})}return s},getQueryData:function(e){var t=this,n={$itemsPerPage:t.getValue("$itemsPerPage"),$resources:[],$links:t.getValue("$links")};if(!e)throw new Error("getQueryData - Prototype Array is mandatory");var r=e.getPrototype("$item"),i="$resources",s=t.getValue(i);return s.forEach(function(e){n.$resources.push(new m(e,r,t,i))}),n},getLookupData:function(e){return this.getQueryData(e)},getQueryResources:function(){return this.getValue("$resources")},parseExpression:function(e){return r.parseExpression(e,this,this.prototype)},setRowIndex:function(e){this.setValue(i.ROWIDXPROP,e,!1)},getActionPayload:function(e){switch(e.name){case"$save":case"$edit":return $.extend({},this.data);default:return null}},clone:function(){return new m($.extend(!0,{},this.data),this.prototype,this.parent,this.$bind)},updateMeta:function(e){if(!e)return;this.resetCache();var t=l(e,this.data,this.prototype.data("$properties"));return t},updateParentRow:function(e,t){if(!this.parent||!this.data||$.isEmptyObject(this.data))return!1;var n=this.data.$uuid,s=this.parent.data[this.$bind];if(!s){if(!e)return!1;s=this.parent.data[this.$bind]=[]}var o=this.prototype.isSingleArray();if(e){var u=o?this.data[i.SINGLEARRAYPROP]:this.data;s.push($.isPlainObject(u)?$.extend({},u):u)}else{var a=-1,u=this.data;if(o){s.length>t&&(a=t);if(a<0)return!1;u=this.data[i.SINGLEARRAYPROP]}else{s.some(function(e,t){if(e.$uuid==n)return a=t,!0});if(a<0)return!1}if(r.areEqual(u,s[a]))return!1;s[a]=$.isPlainObject(u)?$.extend({},u):u}return!0},deleteRow:function(e,t){var n=this.data[e];if(!n)return!1;var r=-1;return this.prototype.isSingleArray(!1,e)?(t=parseInt(t,10),n.length>t&&(r=t)):n.some(function(e,n){if(e.$uuid==t)return r=n,!0}),r<0?!1:(n.splice(r,1),!0)},checkArrayUpdateError:function(){var e=this.data,t=!1;if(e.$properties)for(var n in e.$properties)if(n.$diagnoses&&n.$diagnoses.length>0){t=!0;break}if(!t){var r=this.prototype.data("$properties")||{};for(var n in r)if(r[n].$type==="application/x-array"&&this.data[n]&&this.data[n].some(function(e){if(e.$arrayUpdateError)return!0})){t=!0;break}}t||(e.$arrayUpdateError=!1)}});t.Dao=m,t.emptyDao=function(e,t){return new m({$properties:{}},e,t)},t.getArrayEmptyRow=d,t.getProtoRowDetail=v}),define("syracuse-tablet/html/js/pages/pageAbout",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/pages/pageHtml"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/pages/pageHtml").Page,s="	<div>		<p>About Sage ERP X3</p>		<p>Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit</p>	</div>",o=r.defineClass(function(e,t,n,r,s){i.call(this,e,t,n,r,s)},i,{appendHtml:function(e,t){e.html(s)}});t.Page=o}),define("syracuse-tablet/html/js/application/appFactoryDeps",["require","exports","module","syracuse-tablet/html/js/application/application","syracuse-tablet/html/js/pages/pageDashboard","syracuse-tablet/html/js/pages/pageWelcomeDashboard","syracuse-tablet/html/js/pages/pageRegular","syracuse-tablet/html/js/pages/pageRowDetail","syracuse-tablet/html/js/pages/pageLookup","syracuse-tablet/html/js/pages/pageLogin","syracuse-tablet/html/js/application/daoApp","syracuse-tablet/html/js/application/daoSdata","syracuse-tablet/html/js/pages/pageAbout","syracuse-tablet/html/js/application/appFactory"],function(e,t,n){var r=e("syracuse-tablet/html/js/application/application").Application,i=e("syracuse-tablet/html/js/pages/pageDashboard").Page,s=e("syracuse-tablet/html/js/pages/pageWelcomeDashboard").Page,o=e("syracuse-tablet/html/js/pages/pageRegular").Page,u=e("syracuse-tablet/html/js/pages/pageRowDetail").Page,a=e("syracuse-tablet/html/js/pages/pageLookup").Page,f=e("syracuse-tablet/html/js/pages/pageLogin").Page,l=e("syracuse-tablet/html/js/application/daoApp").Dao,c=e("syracuse-tablet/html/js/application/daoSdata").Dao,h=e("syracuse-tablet/html/js/pages/pageAbout").Page,p=e("syracuse-tablet/html/js/application/appFactory");t.init=function(){p.setImpl("Application",r),p.setImpl("DashoardPage",i),p.setImpl("WelcomeDashoardPage",s),p.setImpl("RegularPage",o),p.setImpl("RowDetailPage",u),p.setImpl("LookupPage",a),p.setImpl("LoginPage",f),p.setImpl("DaoApp",l),p.setImpl("DaoSdata",c),p.setImpl("AboutPage",h)}}),define("syracuse-tablet/html/js/controls/structElmt",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/logger"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/helpers/logger").getLogger("ctrls",!1),o={},u=/-|\//g,a=r.defineClass(function(t,n,r,i){var s=this;s.options=i||{},s.controller=t,s.$type=n,s.typeName=o[n];if(!s.typeName){var a=n.split(u);s.typeName=o[n]=a[a.length-1]}s.article=r||{},s.children=null,s.parent=null,s.initReuseProperties()},null,{initReuseProperties:function(){this.$$elmt=null,this.id=this.createId(this.typeName)},destroy:function(){this.controller=null,this.parent=null,this._gestures&&(this._gestures.destroy(),this._gestures=null),r.unbindObj(this.$$elmt),r.unbindObj(this),this.children&&(this.children.forEach(function(e){e&&e.destroy()}),this.children=null),this.$$elmt&&(this.$$elmt.remove(),this.$$elmt=null)},generateHtml:function(e,t,n){var r=this.options;return n&&(r.htmlRootCtrl=n),r.isHtmlGenerator=!0,this.buildHtml(e,t,r),this.$$elmt},buildHtml:function(e,t,n){n&&n.isHtmlGenerator===!0&&(this._needReuse?this.initReuseProperties():this._needReuse=!0)},getMetaData:function(e){return null},getAuthoring:function(e,t){var n=this;if(!e||!n.article)return t;if(typeof e=="string")e=e.split(".");else if(!Array.isArray(e))throw new Error("Unexpected path type");var r=n.article;for(var i=0;i<e.length;i++){r=r[e[i]];if(r==null)return t;if(!$.isPlainObject(r)==null)return s&&s("Unexpected non-plainobject"),t}return r!=null?r:t},appendStyleAuthoring:function(e,t){e=e||[];if(!t)return e;if($.isPlainObject(t))var n=t;else var n=this.getAuthoring(t);if(!n)return e;for(var r in n)["$theme","$fontStyle","$fontSize"].indexOf(r)>=0&&e.push(n[r]);return e},empty:function(){var e=this;e.children&&e.children.forEach(function(e){e&&e.empty()}),e.$$elmt&&e.$$elmt.empty()},isLayout:function(){return this.typeName==="layout"},isVignette:function(){return this.typeName==="vignette"},isControl:function(){return this.isLayout()&&!this.isVignette()},createId:function(e){return r.readableuid(e)},appendStructElmt:function(e){var t=this;if(!e)return;t.children||(t.children=[]),e.parent=t,t.children.push(e)},getNbChilds:function(){return this.children&&this.children.length>0},createRootElement:function(e,t){var n=this,r=n.setRootElement(i.createDomElement("div",e,null,n.options.isHtmlGenerator===!0?null:{id:n.id}),t);return r},setRootElement:function(e,t){return e?(e.jquery||(e=$(e)),this.$$elmt=e,t&&(t.jquery||(t=$(t)),e.appendTo(t)),this.options.isHtmlGenerator!==!0&&e.attr("data-layout-path",this.getAuthoringPath()),e):null},log:function(){s&&s.apply(null,arguments)},setAuthoringPath:function(e){this.layoutPath=e},getAuthoringPath:function(){return this.layoutPath},isVisible:function(){return this.$$elmt&&this.$$elmt.is(":visible")},isHidden:function(){return!this.isVisible()},show:function(){this.$$elmt&&this.$$elmt.show()},hide:function(){this.$$elmt&&this.$$elmt.hide()},setFocus:function(){}});t.Klass=a}),define("syracuse-tablet/html/js/controls/ctrlBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/structElmt"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/structElmt").Klass,s=function(e,t,n,r){var i=this;n=n||{};var s=[],o=e.data("$url"),u=n.tag||"a",a=n.css||"a";if(o&&o.length)s.push("<"),s.push(u),s.push(' href="'+o+'"'),a&&s.push(' class="'+a+'"'),s.push(">");else{var f=e.data("$action")||i.prototype.data("$navigation");if(f){s.push("<"),s.push(u),s.push(' href="#"');for(var l in f)s.push(" "+l+'="'+encodeURIComponent(t?t.parseExpression(f[l]):f[l])+'"');a&&s.push(' class="'+a+'"'),s.push(">")}}return r&&r(s),s.length>1&&(s.push("</"),s.push(u),s.push(">")),s.join("")},o=r.defineClass(function(t,n,r,s){var o=this;s=s||{},o.prototype=r,o.$bind=n.$bind,i.call(o,t,r.data("$type"),n,s),o.$isEditMode=t.isEditMode()&&n.$isEditMode!==!1&&s.isTableCell!==!0,o._dao=null},i,{destroy:function(){var e=this;i.prototype.destroy.call(e),e.prototype&&(e.prototype.destroy(),e.prototype=null),e._dao=null},createId:function(e){return r.readableuid(this.$bind,e.substr(0,3))},buildHtml:function(e,t,n,r){i.prototype.buildHtml.call(this,e,t,n),this._dao=t;var s=["s-m-control"];r&&s.push(r.join(" ")),this.createRootElement(s,e)},afterRender:function(e){this.applyMetaData(this.getMetaData())},getDao:function(){return this._dao?this._dao:this.controller.dao},refresh:function(e,t){this._dao=e,this.applyMetaData(this.getMetaData())},getMetaData:function(e){var t=this.getDao(),n=t?t.getMetaData("$properties",this.$bind):null;return e?n?n[e]:null:n},getTitle:function(){return this.article&&this.article.$title||this.prototype.data("$title")||this.prototype.getPropTitle(this.$bind)},applyMetaData:function(e){var t=this;if(e==null)return;if(t.$isEditMode){var n=t.$$elmt.find(".s-m-meta");n.length>0&&(n.is("input")&&!n.is(".btn")?(n[e.$isReadOnly===!0?"attr":"removeAttr"]("readonly",""),n[e.$isDisabled===!0?"attr":"removeAttr"]("disabled","")):n[e.$isReadOnly===!0||e.$isDisabled===!0?"attr":"removeAttr"]("disabled",""))}var r=t.$$elmt.is(":visible");(e.$isHidden===!0&&r===!1||e.$isHidden===!1&&r===!0)&&t.$$elmt.toggle(e.$isHidden!==!0)},getValue:function(){return this.getDao().getValue(this.$bind)},setValue:function(e){this.getDao().setValue(this.$bind,e)},checkData:function(){return!0},setErrorStatus:function(e){if(!this.$$elmt)return;this.$$elmt[e===!0?"addClass":"removeClass"]("error")},hasError:function(){return this.$$elmt&&this.$$elmt.hasClass("error")},setFocus:function(){if(!this.controller)return;this.controller.makeVisible(this)}});t.genHtmlCtrlLink=s,t.Klass=o}),define("syracuse-tablet/html/js/helpers/types/date",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function o(e,t,n){e=e?e.toString():"";if(!n||n.length==0)n=" ";while(e.length<t)e=n+e;return e}function f(e){this._value=e}function l(e,t){return t?s().abbreviatedDayNames[e]:s().dayNames[e]}function c(e,t){return t?s().abbreviatedMonthNames[e-1]:s().monthNames[e-1]}function h(e){var t=e.toString();return t.length==1?"0"+t:t}function p(e){var t=e.year,n=e.month,r=e.day,i=n<=2?t-1:t,s=Math.floor(i/4)-Math.floor(492.5),o=Math.floor(i/100)-Math.floor(19.7),a=Math.floor(i/400)-Math.floor(4.925),f=s-o+a;return(t-1970)*365+f+u[n-1]+r-1}function d(e){var t=2440588+e,n=t+68569,r=Math.floor(4*n/146097);n-=Math.floor((146097*r+3)/4);var i=Math.floor(4e3*(n+1)/1461001);n=n-Math.floor(1461*i/4)+31;var s=Math.floor(80*n/2447),o=n-Math.floor(2447*s/80);n=Math.floor(s/11);var u=s+2-12*n,a=100*(r-49)+i+n;return new f(a*1e4+u*100+o)}function v(e,t,n){return new f(e*1e4+t*100+n)}function m(e){return e%4===0&&(e%100!==0||e%400===0)}function g(e,t){return t==2?m(e)?29:28:a[t-1]}function y(e){return e!=0&&e!=6}function b(){return s().amDesignator||"AM"}function w(){return s().pmDesignator||"PM"}function E(e,t){function i(t){var n=e[t],r=1;while(e[t+r]===n)r++;return r}var n=0,r=e.length;while(n<r){var s=e[n];switch(s){case"'":n++;var o="";for(;n<r;n++)if(e[n]==="'"){n++;if(e[n]!=="'")break;o+="'"}else o+=e[n];t.literal(o);break;case"d":case"M":case"y":var u=i(n);t[s](u),n+=u;break;default:t.literal(s),n++}}}function S(e,t){function f(t){if(!/\d/.test(e[a]))throw new Error(i.text("date.notNumber",e.substring[a]));var n=a++;while(a<n+t&&/\d/.test(e[a]))a++;return parseInt(e.substring(n,a),10)}function l(t){for(var n=0;n<t.length;n++){var r=t[n],s=r.length;if(e.substring(a,a+s).toUpperCase()==r.toUpperCase())return a+=s,n}throw new Error(i.text("date.unknown",e.substring(a)))}var n,r,o,u,a=0;return E(t,{literal:function(t){if(e.substring(a,a+t.length)!==t)throw new Error(i.text("date.wrongFormat",t,e.substring(a)));a+=t.length},d:function(e){switch(e){case 1:case 2:n=f(2);break;case 3:r=l(s().abbreviatedDayNames);break;case 4:r=l(s().dayNames);break;default:throw new Error(i.text("date.badDay",t.substring(a)))}},M:function(e){switch(e){case 1:case 2:o=f(2);break;case 3:o=l(s().abbreviatedMonthNames)+1;break;case 4:o=l(s().monthNames)+1;break;default:throw new Error(i.text("date.badDay",t.substring(a)))}},y:function(e){switch(e){case 2:u=f(2),u=u<40?2e3+u:1900+u;break;case 4:u=f(4),u=u>99?u:u<40?2e3+u:1900+u;break;default:throw new Error(i.text("date.badYear",t.substring(a)))}}}),v(u,o,n)}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=i.getDatetimeInfo;t.validate=function(e,t,n){if(e==null){if(t.$isMandatory)return n.push(i.text("date.valMan"));if(!t.$isNullable)return n.push(i.text("date.valNull"));return}if(!(e instanceof f)){n.push(i.text("date.valDate"));return}if(!(e.month>=1&&e.month<=12)){n.push(i.text("date.invMonth"));return}if(!(e.day>=1&&e.day<=g(e.year,e.month))){n.push(i.text("date.invDay"));return}};var u=[0,31,59,90,120,151,181,212,243,273,304,334],a=[31,28,31,30,31,30,31,31,30,31,30,31];t.amDesignator=b,t.pmDesignator=w,r.defineClass(f,null,{year:{get:function(){return Math.floor(this._value/1e4)}},month:{get:function(){return Math.floor(this._value/100)%100}},day:{get:function(){return this._value%100}},weekDay:{get:function(){return(2440589+p(this))%7}},yearDay:{get:function(){var e=this.month,t=e>2&&m(this.year)?1:0;return u[e-1]+t+this.day}},week:{get:function(){var e=v(this.year,1,4).begOfWeek(1);return Math.floor((7+p(this)-p(e))/7)}},valueOf:function(){return this.toString()},compare:function(e){return this._value-e._value},equals:function(e){return this._value===e._value},between:function(e,t){return e._value<=this._value&&this._value<=t._value},isLeapYear:function(){return m(this.year)},isWorkDay:function(){return y(this.weekDay)},daysInMonth:function(){return g(this.year,this.month)},begOfYear:function(){return v(this.year,1,1)},endOfYear:function(){return v(this.year,12,31)},begOfQuarter:function(){return v(this.year,Math.floor((this.month-1)/3)*3+1,1)},endOfQuarter:function(){return this.begOfQuarter().addMonths(2).endOfMonth()},begOfMonth:function(){return v(this.year,this.month,1)},endOfMonth:function(){return v(this.year,this.month,this.daysInMonth())},sameMonth:function(e){return e=Math.min(e,this.daysInMonth()),v(this.year,this.month,e)},pastDay:function(e,t){var n=e-this.day;return n>0||n==0&&!t?this.addMonths(-1).sameMonth(e):this.sameMonth(e)},futureDay:function(e,t){var n=e-this.day;return n<0||n==0&&!t?this.addMonths(1).sameMonth(e):this.sameMonth(e)},pastMonth:function(e,t){var n=this.month-e;return n=n==0?t?0:12:n>0?n:n+12,this.addMonths(-n)},futureMonth:function(e,t){var n=e-this.month;return n=n==0?t?0:12:n>0?n:n+12,this.addMonths(n)},begOfWeek:function(e){var t=this.weekDay-(e||0);return t==0?this:t>0?this.addDays(-t):this.addDays(-t-7)},endOfWeek:function(e){return this.begOfWeek(e).addDays(6)},sameWeek:function(e,t){return this.begOfWeek(t).futureWeekDay(e,!0)},pastWeekDay:function(e,t){var n=this.begOfWeek(e);return!t&&n.equals(this)?this.addWeeks(-1):n},futureWeekDay:function(e,t){return this.pastWeekDay(e,!t).addWeeks(1)},addYears:function(e){if(e==0)return this;var t=this.year+e,n=this.month,r=Math.min(this.day,g(t,n));return v(t,n,r)},addMonths:function(e){if(e==0)return this;var t=this,n=t.day,r=t.month-1,i=t.year;r+=e,i+=Math.floor(r/12);var s=(r+12e4)%12+1,o=g(i,s);return n=n<o?n:o,v(i,s,n)},addWeeks:function(e){return this.addDays(7*e)},addDays:function(e){return e==0?this:d(p(this)+e)},daysDiff:function(e){return p(this)-p(e)},add:function(e){return this.addYears(e.years||0).addMonths(e.months||0).addWeeks(e.weeks||0).addDays(e.days||0)},toString:function(e){var t=this;if(e==null){var n=t._value.toString();return n=o(n,8,"0"),n.substring(0,4)+"-"+n.substring(4,6)+"-"+n.substring(6,8)}var r="";return E(e,{literal:function(e){r+=e},d:function(e){switch(e){case 1:r+=t.day.toString();break;case 2:r+=h(t.day);break;case 3:r+=l(t.weekDay,!0);break;case 4:r+=l(t.weekDay);break;default:throw new Error(i.text("date.formatd",e))}},M:function(e){switch(e){case 1:r+=t.month.toString();break;case 2:r+=h(t.month);break;case 3:r+=c(t.month,!0);break;case 4:r+=c(t.month);break;default:throw new Error(i.text("date.formatM",e))}},y:function(e){switch(e){case 2:r+=t.year.toString().substring(2,4);break;case 4:r+=t.year.toString();break;default:throw new Error(i.text("date.formatM",e))}}}),r},at:function(e,t){throw new Error(i.text("date.notInstalled"))},toJsDate:function(e){return e?new Date(Date.UTC(this.year,this.month-1,this.day)):new Date(this.year,this.month-1,this.day)},isNull:function(){return this._value==0}}),t.monthName=c,t.monthFromName=function(e){var t=s().monthNames,n=s().abbreviatedMonthNames,r=e.toLowerCase();for(var i=0;i<t.length;i++)if(t[i].toLowerCase()==r||n[i].toLowerCase()==r)return i+1;return-1},t.dayName=l,t.weekDayFromName=function(e){var t=s().dayNames,n=s().abbreviatedDayNames,r=s().shortestDayNames,i=e.toLowerCase();for(var o=0;o<t.length;o++)if(t[o].toLowerCase()==i||n[o].toLowerCase()==i)return o;return-1},t.isLeap=m,t.daysInMonth=g,t.today=function(e){return t.fromJsDate(new Date,e)},t.parse=function(e,t){if(e==null)throw new Error(i.text("date.dateNull"));if(t==null){if(e.length!=10)throw new Error(i.text("date.badFormat",e));var n=parseInt(e.replace(/-/g,""),10);return new f(n)}return S(e,t)},t.walkFormat=E,t.fromJsDate=function(e,t){return t?v(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()):v(e.getFullYear(),e.getMonth()+1,e.getDate())},t.fromInternalValue=function(e){return new f(e)},t.makeInWeek=function(e,t,n){var r=n?n-1:6;return v(e,1,4).begOfWeek(1).addDays(7*(t-1)+r)},t.isDate=function(e){return e instanceof f},t.sunday=0,t.Sunday=0,t.monday=1,t.Monday=1,t.tuesday=2,t.Tuesday=2,t.wednesday=3,t.Wednesday=3,t.thursday=4,t.Thursday=4,t.friday=5,t.Friday=5,t.saturday=6,t.Saturday=6,t.make=v}),define("syracuse-tablet/html/js/helpers/types/time",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function o(e){e=(e+31536e7)%86400,this._value=e}function u(e){var t=e.toString();return t.length==1?"0"+t:t}function a(e,t,n){return parseInt(e.substring(t,n),10)}function f(e,t,n){return new o(e*3600+(t||0)*60+(n||0))}function l(){return s().amDesignator||"AM"}function c(){return s().pmDesignator||"AM"}function h(e,t){function i(t){var n=e[t],r=1;while(e[t+r]===n)r++;return r}var n=0,r=e.length;while(n<r){var s=e[n];switch(s){case"'":n++;var o="";for(;n<r;n++)if(e[n]==="'"){n++;if(e[n]!=="'")break;o+="'"}else o+=e[n];t.literal(o);break;case"H":case"h":case"m":case"s":case"t":var u=i(n);t[s](u),n+=u;break;default:t.literal(s),n++}}}function p(e,t){function v(t){if(!/\d/.test(e[d]))throw new Error(i.text("time.noNumber",e.substring[d]));var n=d++;while(d<n+t&&/\d/.test(e[d]))d++;return parseInt(e.substring(n,d),10)}function m(t){for(var n=0;n<t.length;n++){var r=t[n],s=r.length;if(e.substring(d,d+s).toUpperCase()==r.toUpperCase())return d+=s,n}throw new Error(i.text("time.unknown",e.substring(d)))}function g(e,t){switch(e[t]){case e[0]:n=n===12?0:n;break;case e[1]:n>=1&&n<=11&&(n+=12)}}var n,r,s,o,u,a=[l(),c()],p=[a[0].substring(0,1),a[1].substring(0,1)],d=0;h(t,{literal:function(t){if(e.substring(d,d+t.length)!==t)throw new Error(i.text("time.wrongFormat",t,e.substring(d)));d+=t.length},H:function(e){switch(e){case 1:case 2:n=v(2);break;default:throw new Error(i.text("time.badHour",t.substring(d)))}},h:function(e){switch(e){case 1:case 2:n=v(2);break;default:throw new Error(i.text("time.badHour",t.substring(d)))}},m:function(e){switch(e){case 2:r=v(2);break;default:throw new Error(i.text("time.badMin",t.substring(d)))}},s:function(e){switch(e){case 2:s=v(2);break;default:throw new Error(i.text("time.badSec",t.substring(d)))}},t:function(e){switch(e){case 1:u=m(p);break;case 2:o=m(a);break;default:throw new Error(i.text("time.badMarker",t.substring(d)))}}});if(o!=null||u!=null){if(n>12)throw new Error(i.text("time.badHourVal",n,o));var y=o!=null?a:p,b=o!=null?o:u;g(y,b)}return f(n,r,s)}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=i.getDatetimeInfo;t.validate=function(e,t,n){if(e==null){if(t.$isMandatory)return n.push(i.text("time.valMan"));if(!t.$isNullable)return n.push(i.text("time.valNull"));return}if(!(e instanceof o)){n.push(i.text("time.valTime"));return}},r.defineClass(o,null,{hour:{get:function(){return Math.floor(this._value/3600)}},minute:{get:function(){return Math.floor(this._value/60)%60}},second:{get:function(){return this._value%60}},value:{get:function(){return this._value}},valueOf:function(){return this.toString()},compare:function(e){return this._value-e._value},equals:function(e){return this._value===e._value},between:function(e,t){return e._value<=this._value&&this._value<=t._value},begOfDay:function(){return f(0,0,0)},endOfDay:function(){return f(23,59,59)},begOfHour:function(){return f(this.hour,0,0)},endOfHour:function(){return f(this.hour,59,59)},begOfMinute:function(){return f(this.hour,this.minute,0)},endOfMinute:function(){return f(this.hour,this.minute,59)},toString:function(e){var t=this;if(e==null)return u(t.hour)+":"+u(t.minute)+":"+u(t.second);var n="";return h(e,{literal:function(e){n+=e},H:function(e){switch(e){case 1:n+=t.hour;break;case 2:n+=u(t.hour);break;default:throw new Error(i.text("time.formatH",e))}},h:function(e){switch(e){case 1:var r=t.hour;r===0?n+=12:n+=r>12?r-12:r;break;case 2:var r=t.hour;r===0?n+=12:n+=r>12?u(r-12):u(r);break;default:throw new Error(i.text("time.formath",e))}},m:function(e){switch(e){case 2:n+=u(t.minute);break;default:throw new Error(i.text("time.formatm",e))}},s:function(e){switch(e){case 2:n+=u(t.second);break;default:throw new Error(i.text("time.formats",e))}},t:function(e){switch(e){case 1:n+=t.hour<12?l().substring(0,1):c().substring(0,1);break;case 2:n+=t.hour<12?l():c();break;default:throw new Error(i.text("time.formata",e))}}}),n},secondsDiff:function(e){return this._value-e._value},addHours:function(e){return e==0?this:new o(this._value+e*3600)},addMinutes:function(e){return e==0?this:new o(this._value+e*60)},addSeconds:function(e){return e==0?this:new o(this._value+e)},add:function(e){return this.addHours(e.hours||0).addMinutes(e.minutes||0).addSeconds(e.seconds||0)},isNull:function(){return this._value==0}}),t.make=f,t.fromSeconds=function(e){return new o(e)},t.fromJsDate=function(e,t){return t?f(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()):f(e.getHours(),e.getMinutes(),e.getSeconds())},t.now=function(e){return t.fromJsDate(new Date,e)},t.parse=function(e,t){if(e==null)throw new Error(i.text("time.isNull"));if(t==null){if(e.length!=5&&e.length!=8)throw new Error(i.text("time.badFormat",e));var n=e.length==8?a(e,0,2)*3600+a(e,3,5)*60+a(e,6,8):a(e,0,2)*3600+a(e,3,5)*60;return new o(n)}return p(e,t)},t.amDesignator=l,t.pmDesignator=c}),define("syracuse-tablet/html/js/helpers/types/datetime",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function a(e){var t=e.toString();return t.length==1?"0"+t:t}function f(e){var t=e.toString();switch(t.length){case 1:return"00"+t;case 2:return"0"+t;default:return t}}function l(e,t){this._value=e,t!=null&&(this._tzOffset=t)}function c(e){return(e._value+63072e9)%1e3}function h(e){var t=e._utc;if(!t){var n=new Date(e._value);t=n.getUTCFullYear()*1e4*1e5+(n.getUTCMonth()+1)*100*1e5+n.getUTCDate()*1e5+n.getUTCHours()*3600+n.getUTCMinutes()*60+n.getUTCSeconds(),n._utc=t}return t}function p(e){var t=e._local;if(!t){var n=new Date(e._value);t=n.getFullYear()*1e4*1e5+(n.getMonth()+1)*100*1e5+n.getDate()*1e5+n.getHours()*3600+n.getMinutes()*60+n.getSeconds(),n._local=t}return t}function d(e,t){var n="-";e<0&&(n="+",e=-e);var r=Math.round(e/60),i=e-r*60;return n+=t>1?a(r):r,n+=t>2||i?":"+(t>1?a(i):i):"",n}function v(e){var t=0,n=0,r=0,i=0,s=0,u=0,a=0,f=0,c=!0,h=/(\d{4})-(\d{2})-(\d{2})([T\s]?)(\d{2})?(:)?(\d{2})?(:)?(\d{2})?(\.(\d{3}))?(Z)?(([+-])(\d{2}))?(.*$)/.exec(e);if(h){c=!1,t=+h[1],n=h[2]-1,r=+h[3],i=+(h[5]||0),s=+(h[7]||0),u=+(h[9]||0),a=+(h[11]||0);if(h[12]==="Z"){h[14]==="-"?f=(h[15]||0)*60:h[14]==="+"&&(f=-(h[15]||0)*60);var p=Date.UTC(t,n,r,i,s+f,u,a);return new l(p)}var d=new Date(t,n,r,i,s+f,u,a);return new l(d.getTime(),d.getTimezoneOffset())}if(c)throw new Error(o.text("datetime.noParse",e))}function m(e,t,n,r,i,s,o){var u=new Date(e,t-1,n,r||0,i||0,s||0,o||0);return new l(u.getTime(),u.getTimezoneOffset())}function g(e,t,n,r,i,s,o){var u=new Date(Date.UTC(e,t-1,n,r||0,i||0,s||0,o||0));return new l(u.getTime(),u.getTimezoneOffset())}function y(e,t){function i(t){var n=e[t],r=1;while(e[t+r]===n)r++;return r}var n=0,r=e.length;while(n<r){var s=e[n];switch(s){case"'":n++;var o="";for(;n<r;n++)if(e[n]==="'"){n++;if(e[n]!=="'")break;o+="'"}else o+=e[n];t.literal(o);break;case"H":case"h":case"m":case"s":case"S":case"t":case"d":case"M":case"y":var u=i(n);t[s](u),n+=u;break;default:t.literal(s),n++}}}function b(e,t){function w(t){if(!/\d/.test(e[b]))throw new Error(o.text("datetime.noNumber",e.substring[b]));var n=b++;while(b<n+t&&/\d/.test(e[b]))b++;return parseInt(e.substring(n,b),10)}function E(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.length;if(e.substring(b,b+i).toUpperCase()==r.toUpperCase())return b+=i,n}throw new Error(o.text("datetime.unknown",e.substring(b)))}function S(e,t){switch(e[t]){case e[0]:f=f===12?0:f;break;case e[1]:f>=1&&f<=11&&(f+=12)}}var n,r,s,a,f,l,c,h,p,d,v=[i.amDesignator(),i.pmDesignator()],g=[v[0].substring(0,1),v[1].substring(0,1)],b=0;y(t,{literal:function(t){if(e.substring(b,b+t.length)!==t)throw new Error(o.text("datetime.formatMis",t,e.substring(b)));b+=t.length},d:function(e){switch(e){case 1:case 2:n=w(2);break;case 3:r=E(u().abbreviatedDayNames);break;case 4:r=E(u().dayNames);break;default:throw new Error(o.text("datetime.badDay",t.substring(b)))}},M:function(e){switch(e){case 1:case 2:s=w(2);break;case 3:s=E(u().abbreviatedMonthNames)+1;break;case 4:s=E(u().monthNames)+1;break;default:throw new Error(o.text("datetime.badDay",t.substring(b)))}},y:function(e){switch(e){case 2:a=w(2),a=a<40?2e3+a:1900+a;break;case 4:a=w(4),a=a>99?a:a<40?2e3+a:1900+a;break;default:throw new Error(o.text("datetime.badYear",t.substring(b)))}},H:function(e){switch(e){case 1:case 2:f=w(2);break;default:throw new Error(o.text("datetime.badHour",t.substring(b)))}},h:function(e){switch(e){case 1:case 2:f=w(2);break;default:throw new Error(o.text("datetime.badHour",t.substring(b)))}},m:function(e){switch(e){case 2:l=w(2);break;default:throw new Error(o.text("datetime.badMin",t.substring(b)))}},s:function(e){switch(e){case 2:c=w(2);break;default:throw new Error(o.text("datetime.badSec",t.substring(b)))}},t:function(e){switch(e){case 1:d=E(g);break;case 2:p=E(v);break;default:throw new Error(o.text("datetime.badMarker",t.substring(b)))}}});if(p!=null||d!=null){if(f>12)throw new Error(o.text("datetime.badHourVal",f,p));var x=p!=null?v:g,T=p!=null?p:d;S(x,T)}return m(a,s,n,f,l,c,h)}function w(e){function r(t){var n=e[t],r=1;while(e[t+r]===n)r++;return r}var t=0,n=e.length;while(t<n){var i=e[t];if(i==="'"){t++;var s="";for(;t<n;t++)if(e[t]==="'"){t++;if(e[t]!=="'")break;s+="'"}else s+=e[t]}else{if(i==="Z")return t;t++}}}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/types/date"),s=e("syracuse-tablet/html/js/helpers/types/time"),o=e("syracuse-tablet/html/js/helpers/locale"),u=o.getDatetimeInfo;t.validate=function(e,t,n){if(e==null){if(t.$isMandatory)return n.push(o.text("datetime.valMand"));if(!t.$isNullable)return n.push(o.text("datetime.valNull"));return}if(!(e instanceof l)){n.push(o.text("datetime.valDT"));return}if(!(e.month>=1&&e.month<=12)){n.push(o.text("datetime.valMon"));return}if(!(e.day>=1&&e.day<=i.daysInMonth(e.year,e.month))){n.push(o.text("datetime.valDay"));return}},t.Datetime=r.defineClass(l,null,{date:{get:function(){return i.fromInternalValue(Math.floor(p(this)/1e5))}},time:{get:function(){return s.fromSeconds(p(this)%1e5)}},year:{get:function(){return this.date.year}},month:{get:function(){return this.date.month}},day:{get:function(){return this.date.day}},weekDay:{get:function(){return this.date.weekDay}},yearDay:{get:function(){return this.date.yearDay}},hour:{get:function(){return this.time.hour}},minute:{get:function(){return this.time.minute}},second:{get:function(){return this.time.second}},millisecond:{get:function(){return c(this)}},utcDate:{get:function(){return i.fromInternalValue(Math.floor(h(this)/1e5))}},utcTime:{get:function(){return s.fromSeconds(h(this)%1e5)}},utcYear:{get:function(){return this.utcDate.year}},utcMonth:{get:function(){return this.utcDate.month}},utcDay:{get:function(){return this.utcDate.day}},utcWeekDay:{get:function(){return this.utcDate.weekDay}},utcYearDay:{get:function(){return this.utcDate.yearDay}},utcHour:{get:function(){return this.utcTime.hour}},utcMinute:{get:function(){return this.utcTime.minute}},utcSecond:{get:function(){return this.utcTime.second}},utcMillisecond:{get:function(){return c(this)}},value:{get:function(){return this._value}},timezoneOffset:{get:function(){return this._tzOffset==null&&(this._tzOffset=this.toJsDate().getTimezoneOffset()),this._tzOffset}},compare:function(e){return this._value-e._value},equals:function(e){return this._value===e._value},between:function(e,t){return e._value<=this._value&&this._value<=t._value},addYears:function(e){return this.date.addYears(e).at(this.time,this.millisecond)},addMonths:function(e){return this.date.addMonths(e).at(this.time,this.millisecond)},addWeeks:function(e){return this.date.addWeeks(e).at(this.time,this.millisecond)},addDays:function(e){return this.date.addDays(e).at(this.time,this.millisecond)},addHours:function(e){return new l(this._value+e*3600*1e3)},addMinutes:function(e){return new l(this._value+e*60*1e3)},addSeconds:function(e){return new l(this._value+e*1e3)},addMilliseconds:function(e){return new l(this._value+e)},addDayFractions:function(e){return new l(this._value+e*86400*1e3)},millisDiff:function(e){return this._value-e._value},begOfMonth:function(){return m(this.year,this.month,1)},begOfWeek:function(e){var t=this.weekDay-(e||0);return t==0?this:t>0?this.addDays(-t):this.addDays(-t-7)},add:function(e){return this.addYears(e.years||0).addMonths(e.months||0).addWeeks(e.weeks||0).addDays(e.days||0).addHours(e.hours||0).addMinutes(e.minutes||0).addSeconds(e.seconds||0).addMillis(e.millis||0)},toString:function(e){var t=this;if(e==null)return(new Date(this._value)).toISOString();var n=w(e),r=n?t.utcDate:t.date,s=n?t.utcTime:t.time,l="";return y(e,{literal:function(e){l+=e},H:function(e){switch(e){case 1:l+=s.hour.toString();break;case 2:l+=a(s.hour);break;default:throw new Error(o.text("datetime.formatH",e))}},h:function(e){switch(e){case 1:l+=s.hour<13?s.hour:s.hour-12;break;case 2:l+=a(s.hour<13?s.hour:s.hour-12);break;default:throw new Error(o.text("datetime.formath",e))}},m:function(e){switch(e){case 2:l+=a(s.minute);break;default:throw new Error(o.text("datetime.formatm",e))}},s:function(e){switch(e){case 2:l+=a(t.second);break;default:throw new Error(o.text("datetime.formats",e))}},t:function(e){switch(e){case 1:l+=t.hour<12?u().amDesignator.substring(0,1):u().pmDesignator.substring(0,1);break;case 2:l+=t.hour<12?u().amDesignator:u().pmDesignator;break;default:throw new Error(o.text("datetime.formata",e))}},d:function(e){switch(e){case 1:l+=r.day.toString();break;case 2:l+=a(r.day);break;case 3:l+=i.dayName(r.weekDay,!0);break;case 4:l+=i.dayName(r.weekDay);break;default:throw new Error(o.text("datetime.formatd",e))}},M:function(e){switch(e){case 1:l+=r.month.toString();break;case 2:l+=a(r.month);break;case 3:l+=i.monthName(r.month,!0);break;case 4:l+=i.monthName(r.month);break;default:throw new Error(o.text("datetime.formatM",e))}},y:function(e){switch(e){case 2:l+=r.year.toString().substring(2,4);break;case 4:l+=r.year.toString();break;default:throw new Error(o.text("datetime.formaty",e))}},S:function(e){e===3?l+=f(t.millisecond):new Error(o.text("datetime.formatS",e))}}),l},toJsDate:function(){return new Date(this._value)},withoutTimezoneOffset:function(){return new l(this._value)},isNull:function(){return this._value==0}}),t.now=function(e){var t=new Date,n=t.getTime();return e||(n=Math.floor(n/1e3)*1e3),new l(n,t.getTimezoneOffset())},t.parse=function(e,t){if(e==null)throw new Error(o.text("datetime.isNull"));return t==null?v(e):b(e,t)},t.fromJsDate=function(e){return new l(e.getTime(),e.getTimezoneOffset())},t.isDatetime=function(e){return e instanceof l},t.fromInternalValue=function(e){return new l(e)},t.dayName=function(e,t){return t?u().abbreviatedDayNames[e]:u().dayNames[e]},t.monthName=function(e,t){return t?u().abbreviatedMonthNames[e-1]:u().monthNames[e-1]},t.make=m,t.makeUtc=g,i.make(1,1,1).constructor.prototype.at=function(e,n){return t.make(this.year,this.month,this.day,e.hour,e.minute,e.second,n)},t.sunday=0,t.Sunday=0,t.monday=1,t.Monday=1,t.tuesday=2,t.Tuesday=2,t.wednesday=3,t.Wednesday=3,t.thursday=4,t.Thursday=4,t.friday=5,t.Friday=5,t.saturday=6,t.Saturday=6,t.walkFormat=y}),define("syracuse-tablet/html/js/helpers/types/numberFormat",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function i(e,t,n){this.prefix=e,this.postfix=t,this.properties=n}function s(e,t){var n=new i(t.prefix,t.postfix,t.properties),r,s,o=e.indexOf("."),u=e.indexOf(",");n.properties.hasDecimalSeparator=r=o>-1,n.properties.hasGroupSeparator=s=u>-1;if(r){var a=e.substring(o+1);n.properties.mandatoryAfter=a.indexOf("0")>-1?a.match(/0/g).length:0,n.properties.maxAfter=a.length}s&&(n.properties.groupSize=r?o-u-1:e.substring(u+1).length);var f=r?e.substring(0,o):e;return n.properties.mandatoryBefore=f.indexOf("0")>-1?f.match(/0/g).length:0,n.properties.directive=e,n.properties.hasPercent=e.indexOf("%")>-1,n.properties.hasPermil=e.indexOf("")>-1,n.properties.hasSignFormat=e.indexOf("+")>-1&&e.indexOf("+")===0,n}function o(e,t){function s(t){var n=e[t],r=1;while(i.indexOf(e[t+r])>-1)r++;return r}var n=0,r=e.length,i="0#.,%+";while(n<r){var o=e[n];switch(o){case"'":n++;var u="";for(;n<r;n++)if(e[n]==="'"){n++;if(e[n]!=="'")break;u+="'"}else u+=e[n];t.literal(u);break;case"0":case"#":case".":case"%":case"":case"+":var a=s(n);t.directive(n,n+a),n+=a;break;case";":t.listSeparator(),n++;break;default:t.literal(o),n++}n===r&&t.listSeparator()}}function u(e,t,n){var r="",i=e.length,s="",o=0;for(var u=i-1;u>=0;u--)s=e[u],r+=s,++o,o%n===0&&u>0&&(r+=t);return r.split("").reverse().join("")}function a(e,t){var n,u,a=0,c=[],h=!1,p=new i("","",{});o(t,{literal:function(e){h?p.postfix+=e:p.prefix+=e},directive:function(e,n){var r=t.substring(e,n);p=s(r,p),h=!0},listSeparator:function(){h=!1,c.push(p),p=new i("","",{}),n="",u=""}});var d=c.length;switch(d){case 1:return l(e,c[0]);case 2:case 3:return e===0?f(c[2]):e<0?l(e.toString().substring(1),c[1]):l(e,c[0]);default:throw new Error(d===0?r.text("numberFormat.noFormat"):r.text("numberFormat.manyFormat"))}}function f(e){return e.prefix}function l(e,t){var n="",i=r.getNumberGroupSeparator(),s=r.getNumberDecimalSeparator(),o=t.properties.directive;e=t.properties.hasPercent?e*100:e,e=t.properties.hasPermil?e*1e3:e;if(t.properties.hasDecimalSeparator){var a="",f=t.properties.maxAfter,l=o.substr(o.indexOf(".")+1,f),c=e%1,h=""+c.toFixed(f);h=h.substring(h.indexOf(".")+1);for(var p=0;p<f;p++){var d=l.charAt(p),v=h.charAt(p);if(d==="0")a+=v;else if(d==="#"&&v!=="0")a+=v;else if(d==="#"&&v==="0"){var m=h.substring(p);if(!m.match("[1-9]"))break;a+=v}}n=a?s+a:n}else e=Math.round(e);var g=e<0?""+Math.ceil(e):""+Math.floor(e);g=g.replace(/[^\d]+/g,"");var y=o.indexOf(".")===-1?o:o.substring(0,o.indexOf("."));if(g.length<t.properties.mandatoryBefore){var b=t.properties.mandatoryBefore-g.length,w="";for(var p=0;p<b;p++)w+="0";g=w+g}return t.properties.hasGroupSeparator&&t.properties.groupSize<g.length&&(g=u(g,i,t.properties.groupSize)),g=parseInt(g,10)===0&&t.properties.mandatoryBefore===0?"":g,g=g&&e<0?"-"+g:g,n=g+n,n=t.properties.hasSignFormat&&e>0?"+"+n:n,n+=t.properties.hasPercent?"%":"",n+=t.properties.hasPermil?"":"",t.prefix+n+t.postfix}function c(e,t){var n,r,u=0,a=[],f=!1,l=new i("","",{});return o(t,{literal:function(e){f?l.postfix+=e:l.prefix+=e},directive:function(e,n){var r=t.substring(e,n);l=s(r,l),f=!0},listSeparator:function(){f=!1,a.push(l),l=new i("","",{}),n="",r=""}}),h(e,a)}function h(e,t,n){var i=t.length,s,o=r.getNumberGroupSeparator(),u=r.getNumberDecimalSeparator();switch(i){case 1:var a=t[0],f=e,l,c,p=a.prefix,d=a.postfix;f=p?f.substring(p.length):f,f=d?f.substring(0,f.length-d.length):f;var v=f.split(u);if(v.length>2)throw new Error(r.text("numberFormat.oneSep",f));l=v[0]?v[0].match(/[0-9]/g).join(""):"0",c=v.length>1?v[1].match(/[0-9]/g).join(""):"",s=parseFloat(c?l+"."+c:l),s=f.charAt(0)==="-"?parseFloat("-"+s):s,s=a.properties.hasPercent?s/100:s,s=a.properties.hasPermil?s/1e3:s,s=n?parseFloat("-"+s):s;break;case 2:case 3:var m="1234567890"+u+o+"%-+",g=t.length,y=e.length;for(var b=0;b<g;b++){var w=t[b],p=w.prefix,d=w.postfix,E=p?!0:!1,S=d?!0:!1,x,T;x=E?e.substring(0,p.length):"",T=S?e.substring(y-d.length):"";if(E&&!S&&x.indexOf(p)>-1||E&&S&&x.indexOf(p)>-1&&T.indexOf(d)>-1||!E&&S&&T.indexOf(d)>-1||!E&&!S&&m.indexOf(e.charAt(0))>-1&&m.indexOf(e.charAt(y-1))>-1)break}var N=[];N.push(t[b]);switch(b){case 0:s=h(e,N);break;case 1:s=h(e,N,!0);break;case 2:s=0;break;default:throw new Error(r.text("numberFormat.cannotParse"))}break;default:throw new Error(i===0?r.text("numberFormat.noFormat"):r.text("numberFormat.manyFormats"))}return s}var r=e("syracuse-tablet/html/js/helpers/locale");t.format=function(e,t){if(isNaN(e))throw new Error(r.text("numberFormat.notNumber",e));if(t==null){e=e.toString();var n=e.indexOf("."),i=n>-1,s=i?e.substring(0,n):e,o=i?e.substring(n+1):"",f=r.getNumberGroupSeparator()||"",l=i?r.getNumberDecimalSeparator()||".":"";return u(s,f,3)+l+o}return a(e,t)},t.parse=function(e,t){return e?t==null?parseFloat(e):c(e,t):0}}),define("syracuse-tablet/html/js/helpers/formatApi",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/helpers/types/datetime","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/types/numberFormat"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/types/date"),o=e("syracuse-tablet/html/js/helpers/types/datetime"),u=e("syracuse-tablet/html/js/helpers/types/time"),a=e("syracuse-tablet/html/js/helpers/types/numberFormat"),f={},l;t.getFormatter=function(e,t){var n=m[e];if(!n)return null;var r=i.getCurrentLocaleHash();r!==l&&(l=r,f={});var s=f[e];s||(s=f[e]={});var o=t||"noformat",u=s[o];return u?u:(u=new n(e,t),s[o]=u,u)};var c=r.defineClass(function(e,t){this.$format=t,this.$type=e},null,{_isEmpty:function(e){return e==null?!0:(e=""+e,e=e.trim(),e===""?!0:!1)},formatValue:function(e){return e},formatValueEdit:function(e){return e},parseValue:function(e,t){t.push("No parser for this type, return this dummy error to not override value by null")},getFormat:function(){return this.format}}),h=r.defineClass(function(e,t){c.call(this,e,t),this.format=i.getDateFormat(),this.twoDigitYearSwitch=40},c,{_isEmpty:function(e){return e==null?!0:(e=""+e,e=e.trim(),e===""?!0:e==="0000-00-00"?!0:!1)},_checkShortYear:function(e){if(e.year){var t=e.year;t<100&&e.add({years:t<this.twoDigitYearSwitch?2e3:1900})}else e=e>99?e:e<this.twoDigitYearSwitch?2e3+e:1900+e;return e},formatValue:function(e){if(this._isEmpty(e))return"";var t=e.split(/[^\d]+/),n;if(t.length>=3){t[0]=this._checkShortYear(+t[0]);var r=s.make(+t[0],+t[1],+t[2]);n=r.toString(this.format)}else n=e;return n},parseValue:function(e,t){var n;if(this._isEmpty(e))return"";try{n=s.parse(e,this.format),n=this._checkShortYear(n)}catch(r){return t.push(i.text("field.invalidInput",[this.format])),e}return n.toString("yyyy-MM-dd")}}),p=r.defineClass(function(e,t){h.call(this,e,t),this.format=i.getDateTimeFormat()},h,{_isEmpty:function(e){return e==null?!0:(e=""+e,e=e.trim(),e===""?!0:e==="0000-00-00T00:00:00Z"?!0:!1)},formatValue:function(e){if(this._isEmpty(e))return o.now().toString(this.format);var t=e.split(/[^\d]+/),n;if(t.length>=6){t[0]=this._checkShortYear(+t[0]);var r=o.make(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]);n=r.toString(this.format)}else n=e;return n},parseValue:function(e,t){var n;if(this._isEmpty(e))return"";try{n=o.parse(e,this.format),n=this._checkShortYear(n)}catch(r){return t.push(i.text("field.invalidInput",[this.format])),e}return n.toString("yyyy-MM-ddTHH:mm:ss.SSS")+"Z"}}),d=r.defineClass(function(e,t){c.call(this,e,t),this.$format==="TT"?this.format=i.getTimeFormat():this.format=i.getTimeFormatShort()},c,{formatValue:function(e){if(this._isEmpty(e))return"";var t=e.split(/[^\d]+/),n;if(t.length>=2){var r=u.make(+t[0],+t[1],+t[2]);n=r.toString(this.format)}else n=e;return n},parseValue:function(e,t){if(this._isEmpty(e))return"";var n=e.split(/[^\d]+/);if(n.length>=1){var r=u.make(+n[0],+n[1],+n[2]);return r.toString("HH:mm:ss")}}}),v=r.defineClass(function(e,t){c.call(this,e,t),this.format=this.$format||i.getNumberFormat(this.$type)},c,{formatValue:function(e){if(this._isEmpty(e))return"";var t=a.format(e,this.format);return t},parseValue:function(e,t){if(this._isEmpty(e))return"";try{var n=a.parse(e,this.format)}catch(r){return t.push(i.text("field.invalidInput",[this.format])),e}return n}}),m={"application/x-integer":v,"application/x-decimal":v,"application/x-real":v,"application/x-date":h,"application/x-time":d,"application/x-datetime":p}}),define("syracuse-tablet/html/js/controls/validator",["require","exports","module","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/locale"),i={validate:function(e,t,n,s){var o=e.prototype,u=!0;for(var a=0;a<s.length;a++){var f=s[a],l=null;e&&e.getMetaData&&(l=e.getMetaData(f)),l==null&&(l=o&&o.data(f));if(l!=null){var c=i[f];c?u=c(t,n,l)&&u:(n.push(r.text("field.unknownConstraint",[f])),u=!1)}}return u},$isMandatory:function(e,t,n){return!n||e!=null&&e!=""?!0:(t.push(r.text("field.valMand")),!1)},$pattern:function(e,t,n){var i=this;if(e&&n){var s=new RegExp(n);if(!s.test(e))return t.push(r.text("field.patternError",[n])),!1}return!0},$minimum:function(e,t,n){var i=this;return e!=null&&e<n?(t.push(r.text("field.minimum",[n])),!1):!0},$maximum:function(e,t,n){var i=this;return e!=null&&e>n?(t.push(r.text("field.maximum",[n])),!1):!0},$exclusiveMinimum:function(e,t,n){var i=this;return e!=null&&e<=n?(t.push(r.text("field.exclusiveMinimum",[n])),!1):!0},$exclusiveMaximum:function(e,t,n){var i=this;return e!=null&&e>=n?(t.push(r.text("field.exclusiveMaximum",[n])),!1):!0},$minLength:function(e,t,n){var i=this;return!e||e.length<n?(t.push(r.text("field.minLength",[n])),!1):!0},$maxLength:function(e,t,n){var i=this;return e&&e.length>n?(t.push(r.text("field.maxLength",[n])),!1):!0},$precision:function(e,t,n){var i=this;if(e){var s=(""+e).split(".").join("");if(s.length>n)return t.push(r.text("field.precision",[n])),!1}return!0},$scale:function(e,t,n){var i=this;if(e){var s=(""+e).split(".");s=s&&s[1]||"";if(s.length>n)return t.push(r.text("field.scale",[n])),!1}return!0}};t.Validator=i}),define("syracuse-tablet/html/js/controls/field/ctrlFieldBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/controls/validator","syracuse-tablet/html/js/authoring/authoringProperties"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/helpers/formatApi"),u=e("syracuse-tablet/html/js/controls/validator").Validator,a=e("syracuse-tablet/html/js/authoring/authoringProperties").properties,f=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s),o.formatter=o.initFormatter(),o.cssType=null},i,{initFormatter:function(){return o.getFormatter(this.$type,this.prototype.data("$format"))},initReuseProperties:function(){i.prototype.initReuseProperties.call(this),this.domInput=null,this.$$message=null},destroy:function(){var e=this;i.prototype.destroy.call(e),e.formatter=null},buildHtml:function(e,t,n){var r=["s-m-field"];this.cssType&&r.push(this.cssType),this.getAuthoring("$value.$valueFirst",!1)&&r.push("s-m-valueFirst"),i.prototype.buildHtml.call(this,e,t,n,r);var s=this.$$elmt.get(0);this.buildFieldTitle(s,n),this.buildFieldValue(s,n),this._applyLabelAuthoring(),this._applyThemeAuthoring(),this.$$value=this.$$elmt.find("div.s-m-value"),this.checkDiagnoses()},_applyThemeAuthoring:function(){var e=this,t=e.getAuthoring("$theme");if(t){var n=a.theme.values.map(function(e,t,n){return e.value});$.each(n,function(t,n){e.$$elmt.toggleClass("s-m-control-"+n,!1)}),e.$$elmt.toggleClass("s-m-control-"+t)}},_applyLabelAuthoring:function(){var e=this,t=e.getAuthoring("$labelPosition");t&&e.setLabelPosition(t);var n=e.getAuthoring("$labelAlign");n&&e.setLabelAlign(n)},setLabelPosition:function(e){if(e){var t=this,n=t.$$elmt.find("div.s-m-title"),r;switch(e){case"top":r=[n,t.$$value],$.each(r,function(e,t){t&&t.css("float","none").css("width","inherit")});break;default:n.css("float","left").css("width","30%")}}},setLabelAlign:function(e){var t=this,n=t.$$elmt.find("div.s-m-title");n.css("text-align",e||"inherit")},createMainInput:function(e,t,n){var r=this;n=n||"text";var i=["s-m-meta"],o={type:n};return"text"===n?(i.push("form-control"),i.push("ctrl-evt-blur"),o.value=t):"checkbox"===n&&i.push("ctrl-evt-click"),r.domInput=s.createDomElement("input",i,null,o,e),"checkbox"===n&&(r.domInput.checked=t),r.domInput},buildFieldTitle:function(e,t){var n=this;if(n.getAuthoring("$isTitleHidden")!==!0&&t.isTableCell!==!0){var r=(n.getTitle()||"").trim();if(r.length>0)return n.getMetaData("$isMandatory")===!0&&(r+="*"),s.createDomElement("div",["s-m-title"],r,null,e)}return null},buildFieldValue:function(e,t){return s.createDomElement("div",["s-m-value"],null,null,e)},appendTextValue:function(e,t){if(e==null||t==null)return;typeof t!="string"&&(t=t.toString?t.toString():"??Can't display??"),t=t.trim(),t.length>0&&s.appendTextNode(e,t)},validateValue:function(e,t){return u.validate(this,e,t,["$isMandatory"])},parseValue:function(e,t){return this.formatter?this.formatter.parseValue(e,t):e},applyMetaData:function(e){i.prototype.applyMetaData.call(this,e);if(e&&e.$diagnoses){var t=[];e.$diagnoses.forEach(function(e){t.push(e.$message)}),this.showInputErrors(t)}},showInputErrors:function(e){var t=this;t.$$message||(t.$$message=$('<span class="s-m-error"/>').appendTo(t.$$value)),t.$$message.empty(),t.$$elmt.removeClass("error"),e&&e.length>0&&(t.$$elmt.addClass("error"),e.forEach(function(e){e!=null&&(e+"").trim().length>0&&t.$$message.append($("<p>").text(e))}))},clearInputErrors:function(){this.showInputErrors(null)},getFormattedValue:function(e){return this.formatter?this.formatter.formatValue(e):e||""},setFieldValue:function(e){this.setDisplayValue(this.getFormattedValue(e)),this.setValue(e)},onBlur:function(e){var t=this;t.clearInputErrors();if(!t.domInput)return!0;var n=t.domInput.value,r=[];return n=t.parseValue(n,r),r.length===0&&(t.validateValue(n,r),e!==!0&&(t.setDisplayValue(t.getFormattedValue(n)),r.length===0&&t.setValue(n))),r.length>0&&t.showInputErrors(r),r.length==0},setDisplayValue:function(e){this.domInput&&(this.domInput.value=e),this.clearInputErrors(),this.removeDiagnoses()},refresh:function(e,t){i.prototype.refresh.call(this,e,t),this.checkDiagnoses()},checkDiagnoses:function(){var e=[],t=this.getMetaData("$diagnoses");return t&&t.length>0&&t.forEach(function(t){t.$severity==="error"&&e.push(t.$message)}),e.length>0&&this.showInputErrors(e),e.length===0},checkData:function(e){this.clearInputErrors();var t=this.getMetaData();if(!t||t.$isDisabled!==!0&&t.$isReadOnly!==!0&&t.$isHidden!==!0){if(!this.onBlur(!0))return!1;var n=[],r=this.getValue();return this.validateValue(r,n),n.length>0&&this.showInputErrors(n),n.length===0}return!0},removeDiagnoses:function(){this.getDao()&&this.getDao().removeMetaDiagnoses(this.$bind)},setFocus:function(){i.prototype.setFocus.call(this),this.domInput&&this.domInput.focus()}});t.Klass=f}),define("syracuse-tablet/html/js/controls/field/ctrlAlphanum",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/validator"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/controls/validator").Validator,u=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{validateValue:function(e,t){var n=this,r=i.prototype.validateValue.call(n,e,t);return r&&o.validate(n,e,t,["$pattern","$minLength","$maxLength"])},buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),s=n.getFormattedValue(n.getValue());n.$isEditMode?n.createMainInput(r,s):n.appendTextValue(r,s)}}),a=r.defineClass(function(t,n,r,i){var s=this;u.call(s,t,n,r,i),s.cssType="s-m-phone"},u,{buildFieldValue:function(e,t){var n=this;if(n.$isEditMode)u.prototype.buildFieldValue.call(n,e,t);else{var r=n.getFormattedValue(n.getValue()),i=s.createDomElement("a",[],r,{href:"phoneto:"+r});i.appendChild(s.createDomElement("span",["badge","pull-left"])),e.appendChild(i)}}}),f=r.defineClass(function(t,n,r,i){var s=this;u.call(s,t,n,r,i),s.cssType="s-m-email"},u,{buildFieldValue:function(e,t){var n=this;if(n.$isEditMode)u.prototype.buildFieldValue.call(n,e,t);else{var r=n.getFormattedValue(n.getValue()),i=s.createDomElement("a",[],r,{href:"mailto:"+r});i.appendChild(s.createDomElement("span",["badge","pull-left"])),e.appendChild(i)}}});t.Klass=u,t.PhoneField=a,t.EmailField=f}),define("syracuse-tablet/html/js/controls/field/ctrlProgress",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o={$valueMin:0,$valueMax:100},u=r.defineClass(function(t,n,r){var i=this;s.call(i,t,n,r)},s,{buildFieldValue:function(e,t){var n=this,r=s.prototype.buildFieldValue.call(n,e,t),u=n.getValue(),a=i.createDomElement("div",["progress"]),f=i.createDomElement("div",["progress-bar"],u,{role:"progressbar","aria-valuenow":u,"aria-valuemin":n.article.$valueMin||o.$valueMin,"aria-valuemax":n.article.$valueMax||o.$valueMax,style:"width:"+u+"%;"})}});t.Klass=u}),define("syracuse-tablet/html/js/controls/field/ctrlNumeric",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/controls/validator","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/controls/validator").Validator,o=e("syracuse-tablet/html/js/helpers/locale"),u=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),s=n.getFormattedValue(n.getValue());n.$isEditMode?n.createMainInput(r,s):n.appendTextValue(r,s)},parseValue:function(e,t){var n=this;if(n.formatter){var r=n.formatter.getFormat();if(r){var s=o.getNumberGroupSeparator(),u=o.getNumberDecimalSeparator();r.indexOf(",")<0&&s&&s.length>0&&(e=e.replace(new RegExp("\\"+s,"g"),u)),r.indexOf(",")>0&&r.indexOf(".")>0&&s&&s.length>0&&e.indexOf(s)>-1&&e.indexOf(u)<0&&(e=e.replace(new RegExp(s,"g"),u))}}return i.prototype.parseValue.call(n,e,t)},validateValue:function(e,t){var n=this,r=i.prototype.validateValue.call(n,e,t);return r=s.validate(n,e,t,["$minimum","$maximum","$exclusiveMinimum","$exclusiveMaximum","$precision"])&&r,n.$type!=="application/x-integer"&&(r=s.validate(n,e,t,["$scale"])&&r),r}});t.Klass=u}),define("syracuse-tablet/html/js/controls/field/ctrlQuantity",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/controls/ctrlFactory"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/helpers/formatApi"),o=e("syracuse-tablet/html/js/controls/ctrlFactory"),u=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s),o.unitFieldInfo=r.getUnitFieldInfo(),o.displayUnit=!s.isTableCell&&o.unitFieldInfo&&o.unitFieldInfo.unitFieldProto&&!o.unitFieldInfo.unitFieldProto.data("$isExcluded"),o.unitCtrl=null},i,{initFormatter:function(){var e=this.prototype.data("$value");return s.getFormatter(e.$type,e.$format)},destroy:function(){var e=this;i.prototype.destroy.call(e),e.unitCtrl&&(e.unitCtrl.destroy(),e.unitCtrl=null)},buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-qty"),r.displayUnit&&(r.unitCtrl=o.createControl(r.controller,r,{$bind:r.unitFieldInfo.unitBindName},r.unitFieldInfo.unitFieldProto,{isUnit:!0}),r.unitCtrl.buildHtml(r.$$elmt,t,n))},buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),s=n.getFormattedValue(n.getValue());n.$isEditMode?n.createMainInput(r,s):n.appendTextValue(r,s)}});t.Klass=u}),define("syracuse-tablet/html/js/controls/field/ctrlCheckBox",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/ui/fontUtils"),u=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n)},buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),u=n.getValue();if(u==null)return;u=u===!0,n.$isEditMode?n.createMainInput(r,u,"checkbox"):r.appendChild(s.createDomElement("span",o.checkBoxIcon(u)))},onClick:function(e){var t=this;setTimeout(function(){t.domInput.checked=!t.domInput.checked,t.setValue(t.domInput.checked)},50)}});t.Klass=u}),define("syracuse-tablet/html/js/controls/field/ctrlCombo",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o=r.defineClass(function(t,n,r,i){var o=this;s.call(o,t,n,r,i)},s,{initReuseProperties:function(){s.prototype.initReuseProperties.call(this),this.radioItemList=null,this.choiceList=null},buildFieldValue:function(e,t){var n=this,r=s.prototype.buildFieldValue.call(n,e,t);n.choiceList=n.prototype.data("$value").$enum;if(n.$isEditMode){var o=n.prototype.data("$format");if(o&&o!="$radios"&&o!="$combo")throw new Error("Choice can only have formats '$radios' or '$combo'");var u=n.currentValue=n.getValue(),a;if(n.choiceList.length>0)if(o=="$radios")n.radioItemList=[],$.each(n.choiceList,function(e,t){var s=i.createDomElement("div",["s-m-field-radio-item"]),o=i.createDomElement("input",["s-m-field-choice-radio","ctrl-evt-click","s-m-meta"],null,{type:"radio",value:e,name:"s-m-radio-"+n.id});u&&t.$value==u&&o.setAttribute("checked",!0);var a=i.createDomElement("div",["s-m-field-choice-radio-title"],t.$title);n.radioItemList.push({inputDom:o,titleDom:a}),r.appendChild(o),r.appendChild(a)});else{var f=i.createDomElement("select",["form-control ctrl-evt-change","s-m-meta"]);$.each(n.choiceList,function(e,t){var r=n.prototype.resolveExpression(t.$title),s=i.createDomElement("option",null,r,{value:t.$value},f);(t.$value==u||!u&&e==0)&&s.setAttribute("selected",!0)}),r.appendChild(f)}}else n.choiceList.length>0&&n.appendTextValue(r,n._getChoiceTitle(u))},_getChoiceTitle:function(e){var t=this,n;return $.each(t.choiceList,function(t,r){n=r.$value==e?r.$title:n;if(n)return!1}),n},_getChoiceValue:function(e){var t=this,n;return $.each(t.choiceList,function(t,r){n=r.$title==e?r.$value:n;if(n)return!1}),n},setDisplayValue:function(e,t,n){var r=this;r.$isEditMode&&r.prototype.data("$format")=="$radios"&&e!=r.currentValue&&$.each(r.radioItemList,function(n,i){setTimeout(function(){t?i.inputDom.checked=t==n:i.inputDom.checked=r.choiceList[n].$value==e},5)})},setFieldValue:function(e,t,n){var r=this;r.setDisplayValue(e,t,n),r.currentValue=e,r.setValue(e)},onClick:function(e){var t=this;t.prototype.data("$format")=="$radios"&&t.setFieldValue(t._getChoiceValue(e.target.nextElementSibling.textContent),$(e.target.parentNode).index())},onChange:function(e){this.setFieldValue(e.target.value,e.target.selectedIndex,e.target.options[e.target.options.selectedIndex].textContent)}});t.Klass=o}),define("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/types/date"),s=r.defineClass(function(){},null,{create:function(e,t,n){this.parent=e,this.handler=n,this.domItem=document.createElement("nav"),this.domItem.className="s-calendar-quick-list",this._dateValue=t;var r=document.createElement("table");r.className="s-calendar-month-choice";var s=document.createElement("tbody");for(var o=0;o<6;o++){var u=document.createElement("tr");u.appendChild(this.drawCell(o+1,i.monthName(o+1,!0),this._dateValue.month)),u.appendChild(this.drawCell(o+7,i.monthName(o+7,!0),this._dateValue.month)),s.appendChild(u)}r.appendChild(s),this.domItem.appendChild(r),this.parent.appendChild(this.domItem),this.bindEvents(!0)},drawCell:function(e,t,n){var r=document.createElement("td");return r.className="s-calendar-my-item",r.syraOnClick="onMonthClick",r.syraValue=e,r.textContent=t,e==n&&(r.className+=" s-calendar-select",this.selectedCell=r),r},toggle:function(e){e?this.domItem.style.display="":this.domItem.style.display="none"},onMonthClick:function(e){this.selectedCell&&(this.selectedCell.className="s-calendar-my-item"),(this.selectedCell=e).className="s-calendar-my-item s-calendar-select",this._selectedMonth=e.syraValue;var t=this._selectedMonth?this._selectedMonth:this._dateValue.month;this._currentDate=this._dateValue=i.fromJsDate(new Date(this._dateValue.year,t-1,this._dateValue.day)),this.handler.onEvent("onCalendarUpdate",this)},bindEvents:function(e){var t=this;e?$(t.domItem).delegate("td","click",function(e){t.onClick(e),e.preventDefault(),e.stopPropagation()}):$(t.domItem).undelegate()},onClick:function(e){var t=this;while(e.target){if(e.target.syraOnClick){this[e.target.syraOnClick](e.target,e);return}e.target=e.target.parentNode}},destroy:function(){this.bindEvents(!1),this.domItem=this._dateValue=this.selectedCell=null}});t.MonthChoice=s}),define("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/helpers/types/date"),o=r.defineClass(function(){},null,{create:function(e,t,n){this.parent=e,this.domItem=document.createElement("nav"),this.domItem.className="s-calendar-quick-list",this.handler=n,this._dateValue=t,this._selectedYear=this._dateValue.year;var r=document.createElement("table");r.className="s-calendar-year-choice";var i=document.createElement("tbody");this.rows=[];for(var s=0;s<6;s++){var o=document.createElement("tr");if(s==0)this.addPrevNextCell(o,!0),this.addPrevNextCell(o,!1);else{var u=this._dateValue.year+s-4;o.appendChild(this.drawCell(u,u)),o.appendChild(this.drawCell(u+5,u+5))}i.appendChild(o),this.rows.push(o)}r.appendChild(i),this.domItem.appendChild(r),this.parent.appendChild(this.domItem),this.bindEvents(!0)},addPrevNextCell:function(e,t){var n=document.createElement("td");n.className="s-calendar-my-link-cell";var r=document.createElement("a");r.className=(r.syraIsPrev=t)?"s-calendar-prev-year":"s-calendar-next-year",r.textContent=(r.syraIsPrev=t)?i.text("date.month.label.prev"):i.text("date.month.label.next"),r.syraOnClick="onChangeYear",n.appendChild(r),e.appendChild(n)},drawCell:function(e,t){var n=document.createElement("td");return n.className="s-calendar-my-item",n.syraOnClick="onSelectYear",n.syraValue=e,n.textContent=t,e==this._selectedYear&&(n.className+=" s-calendar-select",this.selectedCell=n),n},toggle:function(e){e?this.domItem.style.display="":this.domItem.style.display="none"},_refreshYearCell:function(e,t){e.syraValue+=t,e.textContent=e.syraValue,e.syraValue==this._selectedYear&&(e.className+=" s-calendar-select",this.selectedCell=e)},onChangeYear:function(e){var t=e.syraIsPrev?-10:10;for(var n=1,r=this.rows.length;n<r;n++){var i=this.rows[n].childNodes;this._refreshYearCell(i[0],t),this._refreshYearCell(i[1],t)}},onSelectYear:function(e){this.selectedCell&&(this.selectedCell.className="s-calendar-my-item"),(this.selectedCell=e).className="s-calendar-my-item s-calendar-select",this._selectedYear=e.syraValue;var t=this._selectedYear?this._selectedYear:this._dateValue.year;this._currentDate=this._dateValue=s.fromJsDate(new Date(t,this._dateValue.month,this._dateValue.day)),this.handler.onEvent("onCalendarUpdate",this)},bindEvents:function(e){var t=this;e?$(t.domItem).delegate("td","click",function(e){t.onClick(e),e.preventDefault(),e.stopPropagation()}):$(t.domItem).undelegate()},onClick:function(e){var t=this;while(e.target){if(e.target.syraOnClick){this[e.target.syraOnClick](e.target,e);return}e.target=e.target.parentNode}},destroy:function(){this.bindEvents(!1),this.rows=this.domItem=this._dateValue=this.selectedCell=null}});t.YearChoice=o}),define("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice","syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/helpers/locale"),o=e("syracuse-tablet/html/js/helpers/types/date"),u=e("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice").MonthChoice,a=e("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice").YearChoice,f=r.defineClass(function(){},null,{onClick:function(e){var t=this,n;while(e.target&&e.target!=t.handler.parentSlot){if(e.target.getAttribute("data-s-syraOnClick")){n=this[e.target.getAttribute("data-s-syraOnClick")](e.target,e),n&&this.handler.closeContainer();return}e.target=e.target.parentNode}},onTodayClick:function(){return this._currentDate=o.today(),this.field.setFieldValue(o.fromInternalValue(this._currentDate._value).toString()),!0},onDayClick:function(e){return this.field.setFieldValue(o.fromInternalValue(e.getAttribute("data-s-syraValue")).toString()),!0},onChangePeriode:function(e){e.getAttribute("data-s-syraPeriod")=="month"?this._currentDate=this._currentDate.addMonths(e.getAttribute("data-s-syraIsPrev")?-1:1):e.getAttribute("data-s-syraPeriod")=="year"?this._currentDate=this._currentDate.addYears(e.getAttribute("data-s-syraIsPrev")?-1:1):this._currentDate=this._currentDate.addDays(e.getAttribute("data-s-syraIsPrev")?-7:7),this.handler.onEvent("onCalendarUpdate",this)},onMonthClick:function(){this.handler.onEvent("onMonthClick",this)},onYearClick:function(){this.handler.onEvent("onYearClick",this)},getValueForSelector:function(e){return e.getValue()&&e.getValue().slice(0,10)},create:function(e,t){this.domItem=document.createElement("div"),this.domItem.className="s-calendar";var n=this.getValueForSelector(e)||"";return this._selectedDate=n?o.parse(n):o.today(),this._selectedDate=this._selectedDate._value==0?o.today():this._selectedDate,this._currentDate=t._currentDate||o.fromInternalValue(this._selectedDate._value),this.field=e,this.handler=t,this._table=document.createElement("table"),this._table.setAttribute("cellspacing",0),this._table.className="s-calendar-content",this._table.appendChild(this._appendHead()),this._table.appendChild(this.body=document.createElement("tbody")),this._table.appendChild(this._appendFoot()),this.domItem.appendChild(this._table),this._drawBody(),this.domItem},_appendHead:function(){var e=document.createElement("thead"),t=document.createElement("tr"),n=document.createElement("th");n.setAttribute("colspan",8),n.className="s-calendar-month-year";var r=document.createElement("div");r.className="s-calendar-month-year-slot",n.appendChild(r);var i=document.createElement("a");i.setAttribute("data-s-syraOnClick","onChangePeriode"),i.setAttribute("data-s-syraIsPrev",!0),i.setAttribute("data-s-syraPeriod","year"),i.className="s-calendar-prev s-calendar-prev-year glyphicon glyphicon-fast-backward",r.appendChild(i),i=document.createElement("a"),i.setAttribute("data-s-syraOnClick","onChangePeriode"),i.setAttribute("data-s-syraIsPrev",!0),i.setAttribute("data-s-syraPeriod","month"),i.className="s-calendar-prev s-calendar-prev-month glyphicon glyphicon-step-backward",r.appendChild(i),this._monthLink=document.createElement("a"),this._monthLink.className="s-month s-calendar-month-year-link",r.appendChild(this._monthLink).setAttribute("data-s-syraOnClick","onMonthClick"),this._yearLink=document.createElement("a"),this._yearLink.className="s-year s-calendar-month-year-link",r.appendChild(this._yearLink).setAttribute("data-s-syraOnClick","onYearClick"),i=document.createElement("a"),i.setAttribute("data-s-syraOnClick","onChangePeriode"),i.setAttribute("data-s-syraPeriod","month"),i.className="s-calendar-next s-calendar-next-month glyphicon glyphicon-step-forward",r.appendChild(i),i=document.createElement("a"),i.setAttribute("data-s-syraOnClick","onChangePeriode"),i.setAttribute("data-s-syraPeriod","year"),i.className="s-calendar-next s-calendar-next-year glyphicon glyphicon-fast-forward",r.appendChild(i),t.appendChild(n),e.appendChild(t),t=document.createElement("tr");var n=document.createElement("th");n.className="s-calendar-week-day",t.appendChild(n);var s=[1,2,3,4,5,6,0];for(var u=0,a=s.length;u<a;u++){var n=document.createElement("th");n.className="s-calendar-week-day",n.title=o.dayName(s[u]),n.textContent=o.dayName(s[u],!0),t.appendChild(n)}return e.appendChild(t),e},_appendFoot:function(){var e=document.createElement("tr"),t=document.createElement("td");t.setAttribute("colspan",3),t.className="s-calendar-foot-week";var n=document.createElement("a");n.setAttribute("data-s-syraOnClick","onChangePeriode"),n.setAttribute("data-s-syraPeriod","week"),n.className="s-calendar-prev s-calendar-prev-week glyphicon glyphicon-chevron-left",n.setAttribute("data-s-syraIsPrev",!0),t.appendChild(n);var r=document.createElement("label");r.className="s-calendar-foot-week-title",r.textContent=s.text("date.label.week"),t.appendChild(r),this._weekNumber=document.createElement("label"),this._weekNumber.className="s-calendar-foot-week-title-num",t.appendChild(this._weekNumber),n=document.createElement("a"),n.setAttribute("data-s-syraOnClick","onChangePeriode"),n.setAttribute("data-s-syraPeriod","week"),n.className="s-calendar-next s-calendar-next-week glyphicon glyphicon-chevron-right",t.appendChild(n),e.appendChild(t),t=document.createElement("td"),t.setAttribute("colspan",3),t.className="s-calendar-foot-today",n=document.createElement("a"),n.className="s-calendar-today-link",n.setAttribute("data-s-syraOnClick","onTodayClick"),n.textContent=s.text("date.label.today"),t.appendChild(n),e.appendChild(t),t=document.createElement("td"),t.setAttribute("colspan",2),e.appendChild(t);var i=document.createElement("tfoot");return i.appendChild(e),i},_drawBody:function(){var e=this._currentDate.month||9,t=o.monthName(e);this._monthLink.textContent=t,this._yearLink.textContent=this._currentDate.year||2014,i.empty(this.body);var n=o.fromInternalValue(this._currentDate._value),r=n=n.begOfMonth();n=n.begOfWeek(1);for(var s=0;s<6;s++){var u=document.createElement("tr"),a=s==0?r:n,f=document.createElement("td");f.className="s-calendar-week-num",u.appendChild(f),f.textContent=a.week;for(var l=0;l<7;l++){var f=document.createElement("td");f.className="s-calendar-day-link",f.setAttribute("data-s-syraOnClick","onDayClick"),f.setAttribute("data-s-syraValue",n._value);var c=document.createElement("a");c.textContent=n.day,e!=n.month&&(f.className+=" s-calendar-other-month"),this._currentDate.equals(n)&&(f.className+=" s-calendar-select",c.className="s-calendar-select"),f.appendChild(c),u.appendChild(f),n=n.addDays(1)}this.body.appendChild(u)}this._weekNumber.textContent=this._currentDate.week},bindEvents:function(e){var t=this,n=t.handler.getParentSlot();e?$(n).delegate("td, a","click",function(e){t.onClick(e),e.preventDefault(),e.stopPropagation()}):($(n).undelegate(),t._month&&t._month.bindEvents(!1),t._year&&t._year.bindEvents(!1))},destroy:function(){this.bindEvents(!1),this._currentDate=this.field=this._currentDate=this.quickList=this._month=this._year=this._selectedDate=this._monthLink=this._yearLink=this._weekNumber=this._quick=this.body=this.domItem=null}});t.Klass=f}),define("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/time","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/types/time"),s=e("syracuse-tablet/html/js/helpers/locale"),o=r.defineClass(function(){},null,{onClick:function(e){var t=this,n;while(e.target){if(e.target.getAttribute("data-s-syraOnClick")){n=this[e.target.getAttribute("data-s-syraOnClick")](e.target,e),n&&this.handler.closeContainer();return}e.target=e.target.parentNode}},setContainer:function(e){this.$$modalElmt=e},create:function(e,t,n){this.domItem=document.createElement("div"),this.domItem.className="s-time-choice";var r=r||{};this.columns=r.columns||2,this.interval=r.interval||60,this.field=e,this.handler=t,this.cb=n,this.curTime=i.now();var o=1440/this.interval,u=o/this.columns,a=document.createElement("table");a.className="s-time-choice-table",a.setAttribute("cellspacing","0"),a.setAttribute("cellpadding","0");var f,l,c=0,h=i.parse("00:00:00");for(var p=0;p<u;p++){f=document.createElement("tr");for(var d=0;d<this.columns;d++){l=document.createElement("td"),l.className="s-time-choice-td";if(c<o){var v=document.createElement("a");v.className="s-time-choice-a",v.setAttribute("data-s-syraOnClick","onTimeClick"),h.hour==this.curTime.hour&&(v.className+=" s-time-select"),v.textContent=h.toString(s.getTimeFormat()),l.appendChild(v)}f.appendChild(l),h=h.addMinutes(this.interval),c++}a.appendChild(f)}return this.domItem.appendChild(a),this.domItem},onTimeClick:function(e){var t=this,n=i.parse(e.textContent,s.getTimeFormat()).toString();if(!this.cb)return t.field.setFieldValue(n),!0;t.cb(n,t.handler)},bindEvents:function(e){var t=this,n=t.handler.getParentSlot();e?$(n).delegate("a","click",function(e){t.onClick(e),e.preventDefault(),e.stopPropagation()}):$(n).undelegate()},destroy:function(){this.bindEvents(!1),this.domItem=this.field=this.selectedLink=null}});t.Klass=o}),define("syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice","syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector","syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/ui/datetimeSelectors/monthChoice").MonthChoice,o=e("syracuse-tablet/html/js/ui/datetimeSelectors/yearChoice").YearChoice,u=e("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass,a=e("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector").Klass,f=r.defineClass(function(e){this.field=e},null,{onEvent:function(e,t){this[e](t)},setContainer:function(e){this.$$container=e},setParentSlot:function(e){this.parentSlot=e},getParentSlot:function(){return this.parentSlot},onMonthClick:function(e){var t=this,n=e._currentDate;i.empty(t.parentSlot),e.destroy();var r=new s;r.create(this.parentSlot,n,t)},onYearClick:function(e){var t=this,n=e._currentDate;i.empty(t.parentSlot),e.destroy();var r=new o;r.create(t.parentSlot,n,t)},onOpenTime:function(e){var t=this;t.dateValue=e.dateValue,i.empty(t.parentSlot),e.destroy();var n=new a,r=n.create(t.field,t,t.onSelectTime);t.parentSlot.appendChild(r),n.bindEvents(!0)},onCalendarUpdate:function(e){var t=this;t._currentDate=e._currentDate,i.empty(t.parentSlot),e.destroy();var n=new u,r=n.create(t.field,t);t.parentSlot.appendChild(r),n.bindEvents(!0)},onSelectTime:function(e,t){var n=t;n.field.setFieldValue(n.dateValue+" "+e),n.closeContainer()},closeContainer:function(){this.$$container.modal("hide")}});t.Klass=f}),define("syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/types/date","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/types/date"),s=e("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass,o=r.defineClass(function(){},s,{onTodayClick:function(){this._currentDate=i.today(),this.dateValue=i.fromInternalValue(this._currentDate._value).toString(),this.handler.onEvent("onOpenTime",this)},onDayClick:function(e){this.dateValue=i.fromInternalValue(e.getAttribute("data-s-syraValue")).toString(),this.handler.onEvent("onOpenTime",this)}});t.Klass=o}),define("syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler","syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector","syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector","syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/ui/modal"),s=e("syracuse-tablet/html/js/ui/datetimeSelectors/selectorSwitchHandler").Klass,o={date:{windows:null,android:null,ios:null,"default":e("syracuse-tablet/html/js/ui/datetimeSelectors/dateSelector").Klass},datetime:{windows:null,android:null,ios:null,"default":e("syracuse-tablet/html/js/ui/datetimeSelectors/datetimeSelector").Klass},time:{windows:null,android:null,ios:null,"default":e("syracuse-tablet/html/js/ui/datetimeSelectors/timeSelector").Klass}},u=function(e){var t;switch(e){case"application/x-date":t="date";break;case"application/x-datetime":t="datetime";break;case"application/x-time":t="time";break;default:throw new Error("Expected date/time/datetime type. Got "+e)}var n=r.getLookAndFeel(),i=o[t];i&&(i=i[n]||i["default"]);if(!i)throw new Error("Expected date/time/datetime type. Got "+e);return new i},a=function(e){var t=new s(e),n=u(e.$type),r=n.create(e,t),o=i.field(e.getTitle(),r.outerHTML,function(e,r){e=="shown.bs.modal"?(t.setContainer(r),t.setParentSlot(r.find(".modal-body")[0]),n.bindEvents(!0)):n.destroy()})};t.createSelector=a}),define("syracuse-tablet/html/js/controls/field/ctrlDate",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/ui/datetimeSelectors/selectorFactory"),u=e("syracuse-tablet/html/js/ui/fontUtils"),a=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{initReuseProperties:function(){i.prototype.initReuseProperties.call(this),this.picker=null},buildFieldValue:function(e,t){var n=this,r=i.prototype.buildFieldValue.call(n,e,t),a=n.getFormattedValue(n.getValue());if(n.$isEditMode){var f=s.createDomElement("div",["input-group"],null,null,r);n.createMainInput(f,a);var l=s.createDomElement("span",["input-group-btn"],null,null,f);n.picker=s.createDomElement("button",["btn","btn-default","s-m-meta"],null,null,l),s.createDomElement("span",u.dateFieldIcon(n.$type),null,null,n.picker),$(n.picker).click(function(){o.createSelector(n)})}else n.appendTextValue(r,a)},setFieldValue:function(e){this.$type.indexOf("datetime")>-1&&e.length<=10&&(e+="T00:00:00.0Z"),i.prototype.setFieldValue.call(this,e)},getFieldFormat:function(){return this.formatter.format}});t.Klass=a}),define("syracuse-tablet/html/js/controls/array/builderBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/hammerScroller"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/ui/rect"),u=e("syracuse-tablet/html/js/ui/fontUtils"),a=e("syracuse-tablet/html/js/helpers/hammerScroller").Klass,f="filtersortpanel",l={pagin:'			<nav class="s-m-pagin"> 				<ul class="pagination"> 					{{#each links}}						<li>							<a class="s-m-link {{css}}"								href = "#"								{{#if url}}									data-nav-refresh="true"									data-nav-type="{{type}}"									data-sdata-url="{{url}}"									data-control-id="{{id}}"									data-nav-target="{{target}}"								{{/if}}								draggable="false">							</a>						</li>					{{/each}}				</ul> 			</nav> 		',filterSort:'		<div class="s-m-filterSort" data-action="actionArray" data-params="{{panelId}}">			<i class="s-m-sorted" style="display:none"></i>			<i class="s-m-filtered '+u.filterIcon("filtered")+'" style="display:none"></i>			<i class="'+u.filterIcon("panel")+'"></i>		</div>'},c=function(e,t){var n=e+"compiled",r=l[n];return r||(r=l[n]=Handlebars.compile(l[e])),r||alert("template "+e+" not found"),r(t)},h=["application/x-password"],p=["$first","$previous","$more","$next","$last"],d=r.defineClass(function(e,t){var n=this;n.options=t||{};if(e==null)throw new Error("Null control");n.control=e,n.$article=e.article.$article,n.$articleArray=e.article,n.$itemProto=e.prototype.getPrototype("$item"),n.displayRowIdx=n.$article.$rowIdx===!0,n._gestureMgr=null},null,{initReuseProperties:function(){},destroy:function(){this.control=null,this.$itemProto&&(this.$itemProto.destroy(),this.$itemProto=null),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},refresh:function(e,t){t=t||{},t.refresh=!0,this.buildHtml(e,t),this._gestureMgr&&(this._gestureMgr.reset(),this._initGestureMgr())},buildHtml:function(e,t,n){(!this.$article||!this.$article.$items)&&this.insertError("<b>No $article found for array "+this.control.$bind+"<b>")},onResize:function(){this._initGestureMgr()},_initGestureMgr:function(){if(!this._gestureMgr)return;var e=!0;if(this.control.getArrayData().$resources.length>0){var t=this.control.getScrollViewRect();if(t){var n=o.elmtRect(this._gestureMgr.$$elmt,"computed"),r=t.intersectRect(n,!1);r!=null&&(this._gestureMgr.init(r),e=!1)}}e&&this._gestureMgr.reset()},insertError:function(e){var t=['<div class="s-m-error">'];t.push(e),t.push("</div>"),$(t.join("")).appendTo(this.control.$$elmt)},buildArrayHeader:function(e,t){t=t||{},(t.paginEnabled===!0||this._$$pagin&&t.refresh)&&this.buildPagin(e,t),(t.filterEnabled===!0||t.sortEnabled===!0)&&this.buildSortFilter()},buildPagin:function(e,t){var n=this;t.refresh==1&&n._$$pagin&&n._$$pagin.remove();var r=function(e,t,n){$(s.createDomElement("a",["s-m-link",u.paginationIcon(t),t.substr(1)],null,n)).appendTo(e)};if(e.$links){var o={links:[]},a;p.forEach(function(t){if(t==="$more"&&i.getCache().isDisabled())return;a={css:u.paginationIcon(t)},e.$links[t]?(a.type=t,a.url=e.$links[t].$url,a.id=n.control.id,a.target=n.control.controller.isVignette?"vignette":"application"):a.css+=" disabled",o.links.push(a)}),n._$$pagin=$(c("pagin",o)),n.control.$$header.prepend(n._$$pagin)}},buildSortFilter:function(){if(this._$$sortFilter)return;this._$$sortFilter=$(c("filterSort",{ctrlId:this.control.id,panelId:f})),this.control.$$header.append(this._$$sortFilter)},sortInfoUpdate:function(e){var t=this.control.$$header.find(".s-m-sorted");t.toggle(e!=null);if(e==null)return;t.removeClass().addClass("s-m-sorted "+u.sortIcon(e))},buildRecordMainElmt:function(e,t,n){if(t==null)throw new Error("Null options");var r=this,o=t.attrs||{};e&&(o["data-params"]=encodeURIComponent(e.getValue("$uuid")||"")),t.css=t.css||[],t.css.unshift(i.RECORDCLASS);var u=r.control.prototype.isLookup();if(!u){var a=r.$itemProto.data("$links");u=(a&&a.DASHBOARD||a&&a.$details)!=null}return u&&(t.tag==="a"&&(o.href="#"),o["data-action"]=i.ACTROWSEL),u||t.createIfNoLink?s.createDomElement(t.tag,t.css,t.title,o,t.parent):null},isExcluded:function(e){return e==null||e.$isExcluded===!0||h.indexOf(e.$type)>=0},getId:function(){var e=this;return arguments.length>0?e.control.id+" - "+Array.prototype.join.call(arguments,"-"):e.control.id},_getRowById:function(e){return this.control.$$elmt.find("tbody ."+i.RECORDCLASS+'[data-params="'+e+'"]')},removeRowById:function(e){this._getRowById(e).remove()},selectLastSelectedRow:function(e,t){this._getRowById(e)[t?"addClass":"removeClass"]("s-m-last-selected")},getSelectedRowId:function(){return this.control.$$elmt.find("."+i.RECORDCLASS+".s-m-last-selected").attr("data-params")},callGenerateHtml:function(e,t,n,r,s,o){var u=s&&s.htmlRootCtrl?s.htmlRootCtrl:this.control,a=e.generateHtml(t,n,r,u),f=e.getMetaData();if(this.control.prototype.isSingleArray()&&o!=null){var l;e.$type==="application/x-reference"?l=n.getValue(i.SINGLEARRAYPROP):n.parent&&n.parent.data.$properties&&(l=n.parent.data.$properties,l&&l[n.$bind]&&(l=l[n.$bind].$items[o])),l&&(f||(f={}),["$isHidden","$isReadOnly","$isDisabled"].forEach(function(e){l[e]!=null&&(f[e]=l[e])})),(f.$isHidden===!0||f.$isReadOnly)&&a.closest(".s-m-record").addClass(f.$isHidden?"hidden":"readonly")}f&&e.applyMetaData(f),e.$$elmt=null,r===!0&&e.destroy()},addEmptyCells:function(e,t,n){var r=this;if(t<1)return;var i=r.$articleArray.$emptycell;if(i==="withtitle"||i==="filled"){var s='<td class="s-m-empty s-m-'+i+' nohover">';for(var o=0;o<t;o++)this.callGenerateHtml(this._layoutRoot,$(s).appendTo(e),null,!1,n)}return e.children("td")},savedCtxCreate:function(){if(this._gestureMgr)return this._gestureMgr.savedCtxCreate()},savedCtxRestore:function(e){this._gestureMgr&&this._gestureMgr.savedCtxRestore(e,!0)},newScroller:function(e,t){this._gestureMgr&&this._gestureMgr.destroy();var n=t.wrap('<div class="s-m-scroll-wrapper"/>').parent();this._gestureMgr=new a(t,{direction:e,valMax:0,name:this.control.$bind,isPageScroller:!1},this.control.controller.getMainPageGestureMgr(),n)}});t.Klass=d}),define("syracuse-tablet/html/js/controls/array/builderTable",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/application/daoSdata","syracuse-tablet/html/js/helpers/articleParser","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/controls/array/builderBase"),o=s.Klass,u=e("syracuse-tablet/html/js/ui/uiUtils"),a=e("syracuse-tablet/html/js/helpers/prototype"),f=e("syracuse-tablet/html/js/application/daoSdata"),l=e("syracuse-tablet/html/js/helpers/articleParser"),c=e("syracuse-tablet/html/js/ui/fontUtils"),h=["application/json","application/x-array","application/x-document","application/x-binary"],p="$ADDROW",d={$activity:"create",$type:"tablet/x-button",$icon:"addrow",$bind:p,$text:"Add row",$action:"rowCreate"},v=[{$type:"tablet/x-icon",css:["s-m-icon"],$activity:"edit",$icon:"editrow",$bind:"$EDITROW",$action:i.ACTROWDETAIL},{$type:"tablet/x-icon",css:["s-m-icon"],$activity:"edit",$icon:"delrow",$bind:"$DELETEROW",$action:i.ACTROWDEL},{$type:"tablet/x-icon",css:["s-m-icon"],$activity:"read",$icon:"detailrow",$bind:"$DETAILROW",$action:i.ACTROWDETAIL}],m={sortedHeader:'<div><span>{{title}}</span><i class="{{css}}"></i></div>'},g=function(e,t){var n=e+"compiled",r=m[n];return r||(r=m[n]=Handlebars.compile(m[e])),r(t)},y=r.defineClass(function(e,t){var n=this;o.call(n,e,t),n._columnInfo=null},o,{destroy:function(){o.prototype.destroy.call(this),this._columnInfo&&(this._columnInfo.forEach(function(e){e.control&&e.control.destroy()}),this._columnInfo=null),this.$$tbl=null},buildHtml:function(e,t){o.prototype.buildHtml.call(this,e,t);if(!this.$article)return;if(this._createColumnInfo(t).length>0){this.$$tbl=$(u.createDomElement("table",["table table-condensed"],null,null,this.control.$$value)),this._buildTableHead(this.$$tbl,t);if(e.$resources.length>0||this.control.controller.isEditMode){var n=!this.control.isArrayField();n&&(this.$$tbl=$('<table class="table table-condensed"/>').appendTo(this.control.$$value)),this._buildTableBody(this.$$tbl,e,t),this._buildTableFoot(this.$$tbl,e,t),this.buildArrayHeader(e,t),n&&this.newScroller("v",this.$$tbl)}}else this.control.$$value.addClass("empty")},_createColumnInfo:function(e){var t=this;if(t._columnInfo)return t._columnInfo;t._columnInfo=[],t.displayRowIdx&&t._columnInfo.push({$bind:i.ROWIDXPROP,proto:a.getRowIdxProto(),css:"s-m-rowidx"});var n,r=0,s=[],o;t.$article.$items.forEach(function(e,i){n=t.$itemProto.property(e.$bind),n?(r++,t.isExcluded(e,n)||(o={$bind:e.$bind,proto:t.$itemProto.create(n),article:e},o.css=[t.$itemProto.getFieldNameForValue(e.$bind)],o.article.$isTitleHidden===!0?o.title="":o.article.$title!=null?o.title=t.$itemProto.resolveExpression(o.article.$title)||"":o.title=o.proto.data("$title")||"",t._columnInfo.push(o))):s.push(e)});var u=t.control.controller.isEditMode(),f=t._columnInfo.length!=r;v.forEach(function(e){(u&&e.$activity==="edit"||!u&&f&&e.$activity==="read")&&t._columnInfo.push($.extend(!0,{},e))});if(s.length>0&&i.getDvlpOpt("showUnfoundFields")){var l=["Field(s) not found<ul>"];s.forEach(function(e){l.push("<li><b>"+e.$bind+"</b></li>")}),l.push("</ul>"),t.insertError(l.join(""))}return t._columnInfo},isExcluded:function(e,t){var n=this;return o.prototype.isExcluded.call(n,t)?!0:h.indexOf(t.$type)>=0||e.$isAdvanced===!0},_buildTableHead:function(e,t){var n=this;this.$$tabHead=$(u.createDomElement("thead",null,null,null,e));var r=u.createDomElement("tr",null,null,null,this.$$tabHead),i,s;n._columnInfo.forEach(function(e){i=u.createDomElement("th",e.css,e.title,null,r),e.article&&(s={},e.article.$width!=null&&(s["max-width"]=s.width=e.article.$width),$(i).css(s))})},_buildTableFoot:function(e,t,n){var r=this;if(r.control.controller.isEditMode()){if(this.control.prototype.isSingleArray()){if(e.find(".s-m-record.readonly").length===t.$resources.length)return;if(e.find(".s-m-record.hidden").length===t.$resources.length)return}var i=$('<tfoot><tr><td colspan="'+r._columnInfo.length+'"></td></tr></tfoot>').appendTo(e).find("td"),s=r._getOtherColProto(d,""),o=l.tableCell2Control(r.control,i,d.$bind,s);r.callGenerateHtml(o,i,f.emptyDao(s),!0,n)}},_buildTableBody:function(e,t,n){var r=$(u.createDomElement("tbody",null,null,null,e)).get(0);for(var i=0;i<t.$resources.length;i++)this._buildTableRow(r,t.$resources[i],i,n)},_buildTableRow:function(e,t,n,r){var i=this,s;i.displayRowIdx&&t.setRowIndex(n);var o=[],a=t.data.$uuid;a===i.control.controller.lastSelectedRowId&&o.push("s-m-selected");var f=t.data.$arrayUpdateError;f===!0&&o.push("error");var c=i.buildRecordMainElmt(t,{tag:"tr",parent:e,createIfNoLink:!0,css:o},n),h,p;i._columnInfo.forEach(function(e,n){h=$(u.createDomElement("td",e.css||"",null,null,c)),p=e.$activity!=null?i._getOtherColProto(e,a,t,r):e.proto,e.control||(e.control=l.tableCell2Control(i.control,h,e.$bind,p)),i.callGenerateHtml(e.control,h,t,!1,r,n)})},_getOtherColProto:function(e,t,n,i){var s=this,o=i&&i.htmlRootCtrl?i.htmlRootCtrl:s.control,u=e.$action,f={pathBind:[],pathId:[],activity:e.$activity},l=e.$activity==="create";if(l)t=r.UUID(),f.pathId.unshift(t),f.pathBind.unshift(s.control.$bind);else{if(!n)throw new Error("unexpected null row data");var c=n;f.pathId.unshift(t),f.pathBind.unshift(c.$bind);while(c.$bind!==o.$bind)f.pathId.unshift(c.parent.getValue("$uuid")),f.pathBind.unshift(c.parent.$bind),c=c.parent}o.rowDetailAdd(t,f);var h={$action:{"data-action":u}};return l&&(h.$action["data-params"]=t),["$type","$icon","$text"].forEach(function(t){t!=null&&t!="$activity"&&(h[t]=e[t])}),a.create(h)},sortInfoUpdate:function(e,t){o.prototype.sortInfoUpdate.call(this,e);if(e&&t&&this.$$tabHead){var n=this.$$tabHead.find(".s-m-sorted");if(n.length>1){var r=n.find("div > span")[0].text();n.removeClass()}n=this.$$tabHead.find("."+t);if(n.length>0){var i=n.text();n.html(g("sortedHeader",{title:i,css:c.sortIcon(e)})),n.addClass("s-m-sorted "+e)}}}});t.Klass=y}),define("syracuse-tablet/html/js/controls/array/builderCardV",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/helpers/articleParser"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/array/builderBase").Klass,s=e("syracuse-tablet/html/js/helpers/articleParser"),o="<table>",u="<tr>",a="<tbody>",f="<thead>",l="<td>",c=function(e,t){this.hammer=null,this.builder=e,this.buildOptions=t,this.init=function(){return this.reset(),this.hammer=new Hammer(this.builder.control.$$value.get(0)),this.hammer.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),this.hammer.on("swipeleft swiperight",Hammer.bindFn(this.onSwipe,this)),this},this.reset=function(){this.hammer&&this.hammer.destroy(),this.hammer=null,this.curIdx=0},this.destroy=function(){this.reset(),this.builder=null},this.triggerSwipe=function(){return this.onSwipe(null),this},this.onSwipe=function(e){if(r.isEvtDirection(e,"v"))return;var t=this;setTimeout(function(){var n=e?e.type==="swipeleft":null;t.curIdx=n==null?t.curIdx:n===!0?t.curIdx+1:t.curIdx-1,t.builder.singleCardUpdate(t.curIdx,t.buildOptions)})},this.savedCtxCreate=function(){return{curIdx:this.curIdx}},this.savedCtxRestore=function(e){this.curIdx=e&&e.curIdx!=null?e.curIdx:0}},h=function(e,t,n){this.nbRecords=Math.max(0,n),this.$$root=$('<tfoot><tr><td colspan="'+t+'"></td></tr></tfoot>').appendTo(e),this.$$text=this.$$root.find("td"),this.update=function(e){this.$$root.removeClass().addClass("s-m-card-pagin"),this.nbRecords>0&&e>=0&&e<this.nbRecords&&(this.$$text.html("Card "+(e+1)+"/"+this.nbRecords),e===this.nbRecords?this.$$root.addClass("s-m-first"):e===0&&this.$$root.addClass("s-m-last"))}},p=function(e,t,n){this.nbRecords=Math.max(0,n),this.$$root=$("<caption/>").appendTo(e),this.update=function(e){this.$$root.removeClass().addClass("s-m-card-pagin"),this.nbRecords>0&&e>=0&&e<this.nbRecords&&(this.$$root.html("Page "+(e+1)+"/"+this.nbRecords),e===this.nbRecords?this.$$root.addClass("s-m-first"):e===0&&this.$$root.addClass("s-m-last"))}},d=r.defineClass(function(e,t){var n=this;i.call(n,e,t),n._layoutRoot=null,n.cardsPerRow=n.$articleArray.$cardsPerRow,n.cardsPerRow=Math.min(20,Math.max(0,n.cardsPerRow==null?1:parseInt(n.cardsPerRow,10))),n.cardMode=n.$articleArray.$cardMode||(n.control.isArrayField()?"single":"multiple")},i,{destroy:function(){i.prototype.destroy.call(this),this._layoutRoot&&(this._layoutRoot.destroy(),this._layoutRoot=null),this._oneCardSwiper&&(this._oneCardSwiper.destroy(),this._oneCardSwiper=null)},buildHtml:function(e,t){i.prototype.buildHtml.call(this,e,t);if(!this.$article)return;this._layoutRoot||(this._layoutRoot=s.cardV2Controls(this.control)),this.$$tbl=$(o).appendTo(this.control.$$value),this.buildArrayHeader(e,t),this.cardMode==="single"?this.singleCardBuild(t):this.multipleCardsBuild(e,t)},singleCardBuild:function(e){var t=this.control.getArrayData().$resources;t.length>1&&(this._pagin=new p(this.$$tbl,1,t.length)),this.$$cardRow=$(u).appendTo($(a)).appendTo(this.$$tbl),this._oneCardSwiper=(new c(this,e)).init().triggerSwipe()},multipleCardsBuild:function(e,t){var n=this;this.newScroller("v",this.$$tbl);var r=n.cardsPerRow;n.$$tbody=$(a).appendTo(n.$$tbl);var h=0,p,d;e.$resources.forEach(function(e,i){h===0&&(h=r,p=$(u).appendTo(n.$$tbody)),d=$(n.buildRecordMainElmt(e,{tag:"td",parent:p,createIfNoLink:!0},i)),n.callGenerateHtml(n._layoutRoot,d,e,!1,t,i),h--}),n.addEmptyCells(p,h,t)},singleCardUpdate:function(e,t){try{var n=this,r=n.control.getArrayData().$resources;if(e<0||e>=r.length)return;var i=r[e];n.$$cardCell&&n.$$cardCell.remove(),n.$$cardCell=$(n.buildRecordMainElmt(i,{tag:"td",parent:n.$$cardRow,createIfNoLink:!0,css:["nohover"]},e)),n.callGenerateHtml(n._layoutRoot,n.$$cardCell,i,!1,t,e),n._pagin&&n._pagin.update(e)}catch(s){alert(s)}}});t.Klass=d}),define("syracuse-tablet/html/js/controls/array/builderCardH",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/array/builderBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/articleParser"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/array/builderBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/array/builderBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/helpers/articleParser"),u=r.defineClass(function(e,t){var n=this;i.call(n,e,t),n._layoutRoot=null},i,{destroy:function(){var e=this;i.prototype.destroy.call(e),e._layoutRoot&&(e._layoutRoot.destroy(),e._layoutRoot=null)},buildHtml:function(e,t){var n=this;i.prototype.buildHtml.call(n,e,t);if(!n.$article)return;var r=n.$articleArray.$cardsPerLine;r=Math.min(20,Math.max(0,r==null?1:parseInt(r,10))),n._layoutRoot||(n._layoutRoot=o.cardV2Controls(n.control));var s=$("<table/>").appendTo(n.control.$$value),u=Math.round(100/r),a=100-u*r,f=$("<thead><tr>").appendTo(s).children(":first-child");for(var l=0;l<r;l++)$("<th>").css({width:(l===r-1?u+a:u)+"%"}).appendTo(f);var f=$('<tbody data-bind="'+n.control.$bind+'">').appendTo(s),c=0,h,p;e.$resources.forEach(function(e,i){c=i%r,c===0&&(h=$("<tr>").appendTo(f)),p=$(n.buildRecordMainElmt(e,{tag:"td",parent:h,createIfNoLink:!0},i)),n.callGenerateHtml(n._layoutRoot,p,e,!1,t,i)}),n.addEmptyCells(h,c,t)}}),a=r.defineClass(function(e,t){var n=this;i.call(n,e,t),n.pageContentHeightSubstraction=190,n.minLandscapeHeight=550,n._itemWidth=140,n._itemHeight=140,n._itemSpacing=10,n.recordItems={}},i,{destroy:function(){var e=this;i.prototype.destroy.call(e),e.recordItems=null},buildHtml:function(e,t){var n=this;i.prototype.buildHtml.call(n,e,t,["s-m-card s-m-horizontal"]),n.$$domItems=$(s.createDomElement("div",["s-m-grid-items s-m-horizontal"],null,{id:n.getId("items")})).appendTo(n.control.$$elmt),e.$resources.forEach(function(e,t){var r=s.createDomElement("div",["s-m-grid-item"],null,null,n.$$domItems);n.recordItems[e.getValue("$uuid")]=r,n._buildRecord(e,r,t)}),n.onResizeWindow(),n.buildArrayHeader(e,t)},_buildRecord:function(e,t,n){var r=this,i=r.$itemProto.data("$value",e)||"Rank;"+(n+1),s=r.buildRecordMainElmt(e,{tag:"a",parent:t,title:i,css:["s-m-link"]},n)},onResizeWindow:function(){var e=this,t=e.control.getArrayData();if(!t)return;var n=window.innerWidth,r=window.innerHeight;r-=e.pageContentHeightSubstraction,e._maxItemHeight=r,e.$$domItems.height(e._maxItemHeight-20);var i=0,s=0;t.$resources.forEach(function(t){s+e._itemHeight>e._maxItemHeight&&(s=0,i+=e._itemWidth+e._itemSpacing);var n=e.recordItems[t.getValue("$uuid")];if(n){var r=n.style;r.left=i+"px",r.top=s+"px",r.width=e._itemWidth+"px",r.height=e._itemHeight+"px",s+=e._itemHeight+e._itemSpacing}})}});t.Klass=u}),define("syracuse-tablet/html/js/controls/array/ctrlArray",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/application/daoSdata","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/controls/array/builderTable","syracuse-tablet/html/js/controls/array/builderCardV","syracuse-tablet/html/js/controls/array/builderCardH"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/fontUtils"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,u=e("syracuse-tablet/html/js/ui/uiUtils"),a=e("syracuse-tablet/html/js/helpers/notifications"),f=e("syracuse-tablet/html/js/ui/modal"),l=e("syracuse-tablet/html/js/application/eventListener"),c=e("syracuse-tablet/html/js/sdata/sdataUtils"),h=e("syracuse-tablet/html/js/application/daoSdata"),p=e("syracuse-tablet/html/js/helpers/locale"),d="filtersortpanel",v=function(e){throw new Error("The following feature in not implemented -> "+e)},m={table:e("syracuse-tablet/html/js/controls/array/builderTable").Klass,cardV:e("syracuse-tablet/html/js/controls/array/builderCardV").Klass,cardH:e("syracuse-tablet/html/js/controls/array/builderCardH").Klass},g=function(e){return!e||!e.$resources?null:(e.$resources.forEach(function(e){e&&e.destroy()}),null)},y=r.defineClass(function(e,t,n,r){var i=this;o.call(i,e,t,n,r),t.$article=t.$article||{};var s=m[t.$display];s||(s=m.table),i.builder=new s(i,r),i._arrayData=null,i._rowDetailCache={},i._rowDetailInfo=null},o,{initReuseProperties:function(){o.prototype.initReuseProperties.call(this),this._arrayData&&(this._arrayData=g(this._arrayData)),this.builder&&this.builder.initReuseProperties()},destroy:function(){this._rowDetailInfo=null,this._rowDetailCache=null,o.prototype.destroy.call(this),this.prototype=null,this.builder&&(this.builder.destroy(),this.builder=null),this._arrayData&&(this._arrayData=g(this._arrayData),this._arrayData=null),this._waiting&&(u.waitWheelDestroy(this._waiting),this._waiting=null),this._waiting&&(this._filterSortPanel.destroy(),this._filterSortPanel=null)},isArrayField:function(){return!this.prototype.isLookup()&&!this.prototype.isQuery()},buildHtml:function(e,t,n){if(this.builder==null)throw new Error("Null builder");var r=this.article.$display||"table",i="s-m-";r==="cardV"?i+="card s-m-V":r==="cardH"?i+="card s-m-H":i+=r,o.prototype.buildHtml.call(this,e,t,n,["s-m-array",i]),this._setArrayData(t,!1),this._displayArray()&&(this.isArrayField()||(n.filterEnabled=n.sortEnabled=n.paginEnabled=!0,this._filterSortPanel=this.controller.panelCreate(d,{parentArray:this,filter:n.filterEnabled,sort:n.sortEnabled})),this.builder.buildHtml(this._arrayData,n),n.sortEnabled===!0&&this._filterSortUpdateHeader())},refresh:function(e,t){this._rowDetailInfo=null;if(this.builder==null)throw new Error("Null builder");var n=this.builder.getSelectedRowId();this.builder.refresh(this._setArrayData(e,!0),t),n&&this.builder.selectLastSelectedRow(n,!0),this._filterSortPanel&&this._filterSortUpdateHeader()},onResize:function(){this.builder.onResize&&this.builder.onResize()},_notifSelectedRow:function(e,t){a.pageNotify("sm.select.row",this.controller,this.id,e,t,!1)},_actRowSelect:function(e){var t=this._getRowById(e);if(!t)return;t=t.row;if(this.controller.isLookup()){var n=t.prototype.getLookupInfo(),i={};for(var s in n)i[s]=t.getValue(n[s]);this._notifSelectedRow(e,i)}else{this._notifSelectedRow(e,t);var o=this.builder.$itemProto.data("$links"),u=o&&o.DASHBOARD||o&&o.$details;if(u){var a={},f=c.getLinkInfo(u.$url,t);a["data-nav"]=f.page,a["data-nav-target"]=this.controller.openLinkInVignette()?"vignette":"application",f.sDataUrl&&(a["data-sdata-url"]=f.sDataUrl);if(f.parameters){var h=r.parseExpression(f.parameters,t);a["data-sdata-parameters"]=h}l.triggerNavigation(this.$$elmt,a)}}},_openDetailRow:function(e){var t=this;try{var n=t._rowDetailCache[e];if(!n)throw new Error("rowDetailGetDao - Unexpected null row info");var r=n.activity==="create",i=n.pathBind;r&&i.length>1&&v("Creating row in an array embedded inside a card");var o=n.pathId,u=t.prototype.parent,f=["$properties"],c=t.getDao();for(var p=0;p<i.length;p++){f.push(i[p]),u=u.getPrototype(f.join("."));var d;if(t.$bind===i[p])d=t._arrayData;else{if(!c)throw new Error("Unexpected null dao");d=c.getArrayData(i[p],u)}var m=t._getRowById(o[p],d);if(!m){if(!r)throw new Error("Unexpected empty row");m={row:h.getArrayEmptyRow(this,u,i[p],c)}}c=m.row,f=["$item.$properties"]}if(!c||c===t.getDao())return;u=h.getProtoRowDetail(this,u),i=n.pathBind.join("."),t._rowDetailInfo={pathBind:i,dao:c.clone(),proto:u,activity:n.activity};var g={"data-control-id":t.id,"data-parent-id":t.controller.id,"data-nav":"rowdetail","data-params":c.getValue("$uuid")};t.controller.isVignette&&(g["data-nav-target"]="vignette"),r||a.pageNotify("sm.select.row",t.controller,t.id,c.getValue("$uuid"),null,!0),l.triggerNavigation(t.$$elmt,g)}catch(y){s.getModal().error("Error loading row detail page",y)}},_actRowDetail:function(e){this._openDetailRow(e)},_actRowCreate:function(e){this._openDetailRow(e)},_actRowDelete:function(e){var t=this,n=t._rowDetailCache[e];if(!n)return;f.simpleConfirm(p.text("actions.del.confirm"),function(r){if(r){var i=n.pathBind,s=n.pathId;while(i.length!=0&&i[0]!=t.$bind)i.shift(),s.shift();if(i.length==0)throw new Error("Unexpected null pathBind");var o=i.pop();(i.length>1||o!==t.$bind)&&v("Deleting row in an array embedded inside a card"),t.removeRow(e)}})},removeRow:function(e){var t=this._arrayData;if(!t||!t.$resources||t.$resources.length==0)return;var n=-1;t.$resources.some(function(t,r){if(t.getValue("$uuid")===e)return n=r,!0});if(n<0||n>=t.$resources.length)return;t.$resources.splice(n,1),this.builder.removeRowById(e),this.getDao().deleteRow(this.$bind,this.prototype.isSingleArray()?n:e)},rowDetailAdd:function(e,t){this._rowDetailCache[e+""]=t},rowDetailGetInfo:function(e){return this._rowDetailInfo},rowDetailGetPrototype:function(){return this._rowDetailInfo.proto},rowDetailGetPageName:function(e){if(!this._rowDetailInfo)throw new Error("rowDetailGetPageName - Null details row data");return e+"."+this._rowDetailInfo.pathBind},selectLastSelectedRow:function(e,t){this.builder.selectLastSelectedRow(e,t)},readArrayData:function(e){var t=this;return t.prototype.isQuery()?e.getQueryData(t.prototype):t.prototype.isLookup()?e.getLookupData(t.prototype):e.getArrayData(t.$bind,t.prototype)},_setArrayData:function(e,t){this.isEmpty=!0,t?this.$$value.empty():this.$$elmt.empty(),g(this._arrayData),this._arrayData=e?this.readArrayData(e):{$resources:[]};if(this._arrayData==null)throw new Error("Null arrayData");this.isEmpty=this._arrayData.$resources.length===0;if(!t){var n=this.getTitle();this._displayTitle(n)?(this.$$ttl||(this.$$ttl=$(u.createDomElement("div",["s-m-title"])).appendTo(this.$$elmt)),this.$$ttl.text(n)):this.$$ttl&&this.$$ttl.empty(),this.$$value=$(u.createDomElement("div",["s-m-value"],null,null,this.$$elmt)),this.$$value.before(this.$$header=$("<header/>"))}return this._arrayData},_displayTitle:function(e){return e==null||e.trim().length===0?!1:this.getAuthoring("$isTitleHidden")===!0?!1:this._displayArray()},_displayArray:function(){return this.controller.isEditMode()===!0||this.isEmpty!==!0||this.getAuthoring("$displayIfEmpty")===!0},getArrayData:function(){return this._arrayData},waitStart:function(){this._waiting||(this._waiting=u.waitWheelCreate(this.$$elmt.parent()),this._waiting.$$bckg.css({position:"absolute"}),this._waiting.$$wheel.css({position:"absolute"})),u.waitWheelStart(this._waiting)},waitStop:function(){this._waiting&&u.waitWheelStop(this._waiting)},_getRowById:function(e,t){var n=this;t=t||n._arrayData;if(!t||!t.$resources||t.$resources.length==0)return null;var r=0,i=null;return t.$resources.some(function(t){if(t.getValue("$uuid")===e)return i=t,!0;r++}),i?{row:i,idx:r}:null},_getRowByIdx:function(e,t){return t=t||this._arrayData,e=parseInt(e,10),!t||!t.$resources||t.$resources.length<=e?null:{row:t.$resources[e],idx:e}},savedCtxCreate:function(){return this.builder.savedCtxCreate()},savedCtxRestore:function(e){this.builder.savedCtxRestore(e)},getScrollViewRect:function(){if(this.controller.isVignette){var e=this.controller.getParentVignette();return e?e.getScrollViewRect():null}return this.controller.getMainContentRect()},rowId2Idx:function(e){if(!this._arrayData||!this._arrayData.$resources)return-1;var t=-1;return this._arrayData.$resources.some(function(n,r){if(n.getValue("$uuid")===e)return t=r,!0}),t},_actActionArray:function(e){e===d&&this.controller.panelAttach("right",this._filterSortPanel,"toggle")},_filterSortUpdateHeader:function(e){if(e==="sort"||e==null){var t=this.sortInfoGet(),n=null,r;t.some(function(e){if(e.sort!="none")return n=e.sort,r=e.id,!0}),this.builder.sortInfoUpdate(n,r)}if(e==="filter"||e==null){var t=this.filterInfoGet();if(t){var i=this.$$header.find(".s-m-filtered");i.toggle(t&&t.length>0)}}},sortInfoGet:function(){var e=this.controller.filterSortRead("sort",this);if(e==null){var t=this.prototype.create(this.prototype.getDataByPath("$item")),n=t.data("$properties");n&&(e=[],$.each(n,function(n,r){r.$isExcluded||e.push({name:t.resolveExpression(r.$title),id:t.getFieldNameForValue(n),sort:"none"})})),this.sortInfoSet(e,!1)}return e},sortInfoSet:function(e,t){this.controller.filterSortWrite("sort",e,this,t)},filterInfoGet:function(){var e=this.controller.filterSortRead("filter",this);return e==null&&this.filterInfoSet(e,!1),e},filterInfoSet:function(e,t){this.controller.filterSortWrite("filter",e,this,t)}});t.Klass=y}),define("syracuse-tablet/html/js/controls/field/ctrlReference",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,u=e("syracuse-tablet/html/js/ui/fontUtils"),a=r.defineClass(function(t,n,r,i){var s=this;o.call(s,t,n,r,i),s.isUnit=s.options.isUnit===!0,s.isUnit?(s.$isEditMode=!1,s.cssType="s-m-unit"):s.cssType="s-m-ref"},o,{initReuseProperties:function(){o.prototype.initReuseProperties.call(this),this.picker=null},getValue:function(e){var t=o.prototype.getValue.call(this);return t?t[e||"$value"]||"":""},buildFieldTitle:function(e,t){var n=this;return n.isUnit?null:o.prototype.buildFieldTitle.call(n,e,t)},buildFieldValue:function(e,t){var n=this,r=o.prototype.buildFieldValue.call(n,e),i=n.getValue();if(n.$isEditMode)n.buildEditValue(r,n.getValue());else{var s=(n.getValue("$description")||"").trim(),u=(n.getValue("$title")||"").trim();n.isUnit?n.buildUnitValue(r,i,s,u):n.buildDetailValue(r,i,s,u)}},buildEditValue:function(e,t){var n=this,r=s.createDomElement("div",["input-group"],null,null,e);n.createMainInput(r,n.getFormattedValue(t));var o=n.prototype.getDataByPath("$item.$links.$lookup");if(!o)throw new Error("ctrlReference - Expected $lookup link");var a=s.createDomElement("span",["input-group-btn"],null,null,r),f=n._getLinkAttrs(i.getLinkInfo(o.$url,n.getDao()),{"data-param":n.id,"data-parent-id":n.controller.id,"data-control-id":n.id,title:n.prototype.resolveExpression(o.$title)||"Lookup"});n.picker=s.createDomElement("a",["btn","btn-default","s-m-meta"],null,f,a),s.createDomElement("span",u.refFieldIcon(),null,null,n.picker)},buildDetailValue:function(e,t,n,r){var i=this,s=i.addLink(e);if(t.length>0){var o,u=i.getAuthoring("$refDescFormat");switch(u){case"title":o=r;break;case"desctitle":o=i._combineTexts(n,r);break;case"titledesc":o=i._combineTexts(r,n);break;default:o=n}var a=i.getAuthoring("$refDescPosition"),f=$("<div>").addClass("s-m-ref-val").text(t),l=$("<div>").addClass("s-m-descr").text(o),c;switch(a){case"bottom":$(s).append(f).append(l);break;case"left":$(s).append(l).append(f),c=[f,l],$.each(c,function(e,t){t.css("display","inline-block")}),l.css("padding-right","5px");break;case"top":$(s).append(l).append(f);break;case"none":$(s).append(f);break;case"right":default:c=[f,l],$(s).append(f).append(l),$.each(c,function(e,t){t.css("display","inline-block")}),l.css("padding-left","5px")}}},buildUnitValue:function(e,t,n,r){var i=this,o=n.length>0?n:r.length>0?r:t;o=t||"",o&&o.toLowerCase&&(o=o.toLowerCase().smCapitalize()),s.createDomElement("span",["s-m-descr"],o,null,i.addLink(e))},addLink:function(e){var t=this;if(t.options.isArrayChild===!0)return e;var n=t.prototype.getDataByPath("$item.$links.$details");return n?s.createDomElement("a",null,null,t._getLinkAttrs(i.getLinkInfo(n.$url,t.getDao()),{title:t.prototype.resolveExpression(n.$title)||"Detail"}),e):e},getFormattedValue:function(e){return e},setDisplayValue:function(e){var t;$.isPlainObject(e)?t=e.$value||"":t=e||"",o.prototype.setDisplayValue.call(this,t)},_getLinkAttrs:function(e,t){var n=this,r={href:"#","data-nav":e.page,"data-sdata-url":e.sDataUrl};n.controller.isVignette&&(r["data-nav-target"]=n.controller.openLinkInVignette()?"vignette":"application");if(t)for(var i in t)r[i]=t[i];return r},_combineTexts:function(e,t){var n;return n=e&&t?e===t?e:e+"-"+t:e||t||"",n}});t.Klass=a}),define("syracuse-tablet/html/js/controls/layout/layoutBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/structElmt","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/structElmt").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s),o.title=r.$title},i,{initReuseProperties:function(){i.prototype.initReuseProperties.call(this),this.$$header=null},destroy:function(){var e=this;i.prototype.destroy.call(e)},createId:function(e){var t=this;return r.readableuid(e,t.article.$layoutType)},buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.createRootElement(["s-m-layout"],e),r.article.$title&&(n==null||n.noTitle)&&r.buildTitle()},onResize:function(){if(!this.children)return;this.children.forEach(function(e){e.onResize&&e.onResize()})},buildTitle:function(e,t,n,r){this.$$header=$(s.createDomElement("header",null,this.article.$title,null,this.$$elmt))},getGestureMgr:function(){return null}});t.Klass=o}),define("syracuse-tablet/html/js/controls/layout/layoutRow",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-row"),r.$$elmt.addClass("row"),r._setHeight(),$.each(r.children,function(e,i){i.buildHtml(r.$$elmt,t,n)})},_setHeight:function(){var e=this;e.article.$rowHeight&&e.$$elmt.css("height",e.article.$rowHeight)}});t.Klass=s}),define("syracuse-tablet/html/js/controls/layout/layoutStack",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-stack"),n&&n.makeFullHeight===!0&&r.$$elmt.height("100%"),r.children&&$.each(r.children,function(e,i){i.buildHtml(r.$$elmt,t,n)})}});t.Klass=s}),define("syracuse-tablet/html/js/controls/layout/layoutTab",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-tabs");var o=s.createDomElement("div",[r.article.$layoutType]);$.each(r.children,function(e,r){r.isTabSection=!0;var i=s.createDomElement("div",["s-m-layout-cell"],null,{style:"display:"+(e!=0?"none":"")},o);r.buildHtml($(i),t,n)})},buildTitle:function(){}});t.Klass=o}),define("syracuse-tablet/html/js/controls/layout/layoutHubGroup",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=["small","medium","wide","large","full","all"],u={landscapeBaseSize:66,landscapePadX:5,landscapePadY:5,portraitPadX:5,portraitPadY:5,portraitWideMinWidth:570};t.minLandscapeHeigth=u.landscapeBaseSize*4+u.landscapePadY*5+40;var a=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-hub-group"),r._buildCellStructure(t,n)},_buildCellStructure:function(e,t){var n=this;n.cells=[];var r=null;n.children&&n.children.forEach(function(i){var u=i.article&&i.article.$size||"medium";o.indexOf(u)<0&&(u=o[1],i.article=i.article||{},i.article.$size=u),r||(r=n._createCell(u),r.domItem=s.createDomElement("div",null,null,null,n.$$elmt),n.cells.push(r)),u==="small"?(i.buildHtml($(r.domItem),e,t),r.children.push(i),r.children.length===4&&(r=null)):(r.children.length>0&&(r=n._createCell(u),r.domItem=s.createDomElement("div",null,null,null,n.$$elmt),n.cells.push(r)),i.buildHtml($(r.domItem),e,t),r.children.push(i),r=null)})},_createCell:function(e){var t=this;e=e==="small"?"medium":e;var n={size:e,children:[]};return n},onResize:function(e){this.calculateLayout(e),i.prototype.onResize.call(this)},calculateLayout:function(e){var t=this,n;t._headerSpace=t.$$header&&t.$$header.height()||0,t._width=0,t._height=0,t.hubGroupOptions=e,t.hubGroupOptions.scrollDirection==="h"?t._calculateLayoutHorizontal():t._calculateLayoutVertical(),t.cells.forEach(function(e){n=e.size,e.domItem.style.left=e.x+"px",e.domItem.style.top=e.y+t._headerSpace+"px",e.domItem.style.width=t._sizes[n].width+"px",e.domItem.style.height=t._sizes[n].height+"px",e.domItem.style.position="absolute",e.x+t._sizes[n].width>t._width&&(t._width=e.x+t._sizes[n].width),e.y+t._sizes[n].height>t._height&&(t._height=e.y+t._sizes[n].height);var r=0,i=0;e.children.forEach(function(e){n=e.article&&e.article.$size||"medium";var s=e.$$elmt[0];s.style.left=r+"px",s.style.top=i+"px",s.style.width=t._sizes[n].width+"px",s.style.height=t._sizes[n].height+"px",s.style.position="absolute";var o=t._sizes[n].paddingY+"px "+t._sizes[n].paddingX+"px";s.style.padding=o,r!==0?(r=0,i+=t._sizes[n].height+t.hubGroupOptions.padY):r+=t._sizes[n].width+t.hubGroupOptions.padX})});var r=t.$$elmt.get(0).style;t.hubGroupOptions.scrollDirection==="h"?(r.top="0px",r.left=t.hubGroupOptions.posX+"px",r.width=6+t._width+"px",r.height=t.hubGroupOptions.maxHeight-6+"px"):(r.top=t.hubGroupOptions.posY+"px",r.left="0px",t._width=t._width,r.width=t._width+"px",t._height+=t._headerSpace+u.portraitPadY,r.height=t._height+"px")},_calculateLayoutHorizontal:function(){var e=this;e.hubGroupOptions.baseSize=u.landscapeBaseSize,e.hubGroupOptions.padX=u.landscapePadX,e.hubGroupOptions.padY=u.landscapePadY,e.hubGroupOptions.maxGroupHeight=e.hubGroupOptions.maxHeight-e._headerSpace-6;var t=e.hubGroupOptions.maxGroupHeight/(e.hubGroupOptions.baseSize+e.hubGroupOptions.padY),n=e.hubGroupOptions.maxGroupHeight-Math.floor(t)*(e.hubGroupOptions.baseSize+e.hubGroupOptions.padY),r=Math.floor(n/t),i=Math.floor(n/t/2);e.hubGroupOptions.baseSize+=r,e.hubGroupOptions.paddingPerTile=i,e.hubGroupOptions.maxGroupWidth=4*e.hubGroupOptions.baseSize+3*e.hubGroupOptions.padX,e.hubGroupOptions.maxFullTileHeight=Math.floor((e.hubGroupOptions.maxGroupHeight+e.hubGroupOptions.padY)/(e.hubGroupOptions.baseSize+e.hubGroupOptions.padY)/2)*(e.hubGroupOptions.baseSize+e.hubGroupOptions.padY)*2-e.hubGroupOptions.padY,e.hubGroupOptions.maxAllTileHeight=e.hubGroupOptions.maxFullTileHeight,e.hubGroupOptions.maxAllTileWidth=Math.floor((e.hubGroupOptions.maxWidth+e.hubGroupOptions.padX)/(e.hubGroupOptions.baseSize+e.hubGroupOptions.padX)/2)*(e.hubGroupOptions.baseSize+e.hubGroupOptions.padX)*2-e.hubGroupOptions.padX,e._sizes={small:{width:e.hubGroupOptions.baseSize,height:e.hubGroupOptions.baseSize,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},medium:{width:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padX,height:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padY,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},wide:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padY,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},large:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padY*3,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},full:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.maxFullTileHeight,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},all:{height:e.hubGroupOptions.maxAllTileHeight,width:e.hubGroupOptions.maxAllTileWidth,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile}};var s=0,o=0,a=0,f=0;e.cells.forEach(function(t){t.w=e._sizes[t.size].width,t.h=e._sizes[t.size].height;if(f+t.h>e.hubGroupOptions.maxGroupHeight||f!==0&&(t.size==="full"||t.size==="all"))f=0,s+=e.hubGroupOptions.maxGroupWidth+e.hubGroupOptions.padX,a=s;t.size==="medium"?(a-s+t.w>e.hubGroupOptions.maxGroupWidth&&(a=s,f+=t.h+e.hubGroupOptions.padY),f+t.h>e.hubGroupOptions.maxGroupHeight&&(f=0,s+=e.hubGroupOptions.maxGroupWidth+e.hubGroupOptions.padX,a=s),t.x=a,t.y=f,a+=t.w+e.hubGroupOptions.padX):(a!==s&&(a=s,f+=e._sizes.medium.height+e.hubGroupOptions.padY),f+t.h>e.hubGroupOptions.maxGroupHeight&&(f=0,s+=e.hubGroupOptions.maxGroupWidth+e.hubGroupOptions.padX,a=s),t.x=a,t.y=f,f+=t.h+e.hubGroupOptions.padY,t.size==="all"&&(f=0,s+=t.w+e.hubGroupOptions.padX,a=s))})},_calculateLayoutVertical:function(){var e=this,t;e.hubGroupOptions.maxWidth>=u.portraitWideMinWidth?(e.hubGroupOptions.padX=u.portraitPadX,e.hubGroupOptions.padY=u.portraitPadY,e.hubGroupOptions.baseSize=Math.floor((e.hubGroupOptions.maxWidth-7*e.hubGroupOptions.padX)/8),e.hubGroupOptions.maxGroupWidth=8*e.hubGroupOptions.baseSize+7*e.hubGroupOptions.padX,e.hubGroupOptions.maxGroupHeight=e.hubGroupOptions.maxHeight-e._headerSpace,e.hubGroupOptions.maxFullTileHeight=e.hubGroupOptions.maxGroupHeight-e.hubGroupOptions.padY):(e.hubGroupOptions.padX=u.portraitPadX,e.hubGroupOptions.padY=u.portraitPadY,e.hubGroupOptions.baseSize=Math.floor((e.hubGroupOptions.maxWidth-3*e.hubGroupOptions.padX)/4),e.hubGroupOptions.maxGroupWidth=4*e.hubGroupOptions.baseSize+3*e.hubGroupOptions.padX,e.hubGroupOptions.maxGroupHeight=e.hubGroupOptions.maxHeight-e._headerSpace,e.hubGroupOptions.maxFullTileHeight=e.hubGroupOptions.maxGroupHeight-e.hubGroupOptions.padY),e.hubGroupOptions.maxAllTileHeight=e.hubGroupOptions.maxFullTileHeight,e.hubGroupOptions.maxAllTileWidth=Math.floor((e.hubGroupOptions.maxWidth+e.hubGroupOptions.padX)/(e.hubGroupOptions.baseSize+e.hubGroupOptions.padX)/2)*(e.hubGroupOptions.baseSize+e.hubGroupOptions.padX)*2-e.hubGroupOptions.padX,t=(e.hubGroupOptions.maxWidth-e.hubGroupOptions.maxGroupWidth)/2,e.hubGroupOptions.maxGroupWidth+=t,e._sizes={small:{width:e.hubGroupOptions.baseSize,height:e.hubGroupOptions.baseSize,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},medium:{width:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padX,height:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padY,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},wide:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.baseSize*2+e.hubGroupOptions.padY,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},large:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padY*3,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},full:{width:e.hubGroupOptions.baseSize*4+e.hubGroupOptions.padX*3,height:e.hubGroupOptions.maxFullTileHeight,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile},all:{width:e.hubGroupOptions.maxAllTileWidth,height:e.hubGroupOptions.maxAllTileHeight,paddingX:e.hubGroupOptions.paddingPerTile,paddingY:e.hubGroupOptions.paddingPerTile}};var n=t,r=0,i=0;e.cells.forEach(function(s){s.w=e._sizes[s.size].width,s.h=e._sizes[s.size].height,s.x=n,s.y=r,n+s.w>e.hubGroupOptions.maxGroupWidth?(n=t,r+=i+e.hubGroupOptions.padY,s.x=n,s.y=r,i=s.h,n+=s.w+e.hubGroupOptions.padX):(n+=s.w+e.hubGroupOptions.padX,i=s.h>i?s.h:i)})},getWidth:function(){return this._width},getHeight:function(){return this._height}});t.Klass=a}),define("syracuse-tablet/html/js/controls/layout/layoutHub",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/controls/layout/layoutHubGroup","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/hammerScroller"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=e("syracuse-tablet/html/js/controls/layout/layoutHubGroup"),o=e("syracuse-tablet/html/js/ui/rect"),u=e("syracuse-tablet/html/js/helpers/hammerScroller").Klass,a=10,f=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s),this._gestureMgr=null},i,{destroy:function(){i.prototype.destroy.call(this),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},buildHtml:function(e,t,n){var r=this;n=n||{},n.noTitle=!0,i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-hub"),r.$$scrollElmt=$('<div class="s-m-scroll-wrapper">').appendTo(r.$$elmt),r.children&&r.children.forEach(function(e){e.buildHtml(r.$$scrollElmt,t,n)}),r._gestureMgr?r._gestureMgr.reset():r._gestureMgr=new u(r.$$scrollElmt,{isPageScroller:!0})},onResize:function(){var e=this,t=e.controller.getMainContentRect(),n=e.$$elmt.position(),r=t.width,i=t.height-n.top-10,u=r/i,f=0,l=0,c;e.scrollDirection=u>1.2&&i>=s.minLandscapeHeigth?"h":"v",e.scrollDirection==="h"?e.$$elmt.css({width:"100%",height:i+"px"}):e.$$elmt.css({width:r+"px",height:"100%"});var h=e.children.length-1;e.children.forEach(function(t,n){c={posX:f,posY:l,maxHeight:i,maxWidth:r,scrollDirection:e.scrollDirection},t.onResize(c),e.scrollDirection==="h"?f+=t.getWidth()+(n<h?a:0):l+=t.getHeight()+(n<h?a:0)});var p,d;e.scrollDirection==="h"?(p=f,d=i):(p=r,d=l),e._gestureMgr.resetScrolling(function(){e.$$scrollElmt.width(p),e.$$scrollElmt.height(d);var n=o.elmtRect(e.$$scrollElmt,"outer"),r=t.intersectRect(n);r!=null&&!r.contains(n)?r:null,r?e._gestureMgr.init(r,e.scrollDirection,0):e._gestureMgr.reset()})},getGestureMgr:function(){return this._gestureMgr}});t.Klass=f}),define("syracuse-tablet/html/js/controls/layout/layoutTile",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-tile"),r._setCellColorClass(),r.children&&$.each(r.children,function(e,i){i.buildHtml(r.$$elmt,t,n)})},_setCellColorClass:function(){var e=this,t=e.article.$bgColor;t||(t="lime"),e.$$elmt.addClass("s-m-bg-"+t)}});t.Klass=s}),define("syracuse-tablet/html/js/controls/layout/layoutCell",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/layout/layoutBase","syracuse-tablet/html/js/ui/uiUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/layout/layoutBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s)},i,{initReuseProperties:function(){i.prototype.initReuseProperties.call(this),this.$$cell=null},buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n),r.$$elmt.addClass("s-m-cell"),r.$$cell=$(s.createDomElement("div",["cell"],null,null,r.$$elmt)),r._setCellColorClass(),r._setCellSizeClasses(),$.each(r.children,function(e,i){i.buildHtml(r.$$cell,t,n)})},_setCellColorClass:function(){var e=this,t=e.article.$bgColor;t||(t="lime"),e.$$cell.addClass("s-m-bg-"+t)},_setCellSizeClasses:function(){var e=this,t=[{$prop:"$widthXs",$prefix:"col-xs-"},{$prop:"$widthSm",$prefix:"col-sm-"},{$prop:"$widthMd",$prefix:"col-md-"},{$prop:"$widthLg",$prefix:"col-lg-"}],n=12;t.forEach(function(t){var r=e.article[t.$prop];r!=null&&r>0&&r<=12?n=r:r=n;var i=t.$prefix+r;e.$$elmt.addClass(i)})}});t.Klass=o}),define("syracuse-tablet/html/js/application/actionManager",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/sdataDispatcher","syracuse-tablet/html/js/sdata/sdataUtils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/jsutils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/sdata/sdataDispatcher"),i=e("syracuse-tablet/html/js/sdata/sdataUtils"),u=e("syracuse-tablet/html/js/ui/fontUtils"),a=e("syracuse-tablet/html/js/helpers/notifications"),f=e("syracuse-tablet/html/js/helpers/jsutils"),l=function(e,t,n){if(!e||!t||!n)return;e.getScrollValue()!==0&&(n["auto-scroll"]=e.getScrollValue()*1.2)},c=function(e,t,n){t===null&&(t="");if(f.isError(t))t=t.message;else if(typeof t!="string"){var r=i.scanDiagnoses(t);if(r.length>0){var o=[];r.forEach(function(e){o.push(e.$message)}),t=o.join("\n")}else t=JSON.stringify(t,null,2)}s.getModal().info(e,t,n)},h=r.defineClass(function(e){var t=this;t.options=e||{},t.options.$links=t.options.$links||[],t.options.$links.forEach(function(e,t){e.css=[],e.$isHidden===!0&&e.css.push("hidden"),e.$isDisabled===!0&&e.css.push("disabled"),e.css=e.css.join(" "),e.icon||(e.icon=u.getIconByIdx(20+t)),e.$uuid||(e.$uuid=r.UUID())})},null,{destroy:function(){this.options=null},getLinks:function(){return this.options.$links},triggerLink:function(e,t){var n=$.Deferred();try{var r=this,i=null;if(r.getLinks().some(function(t){if(t.$uuid===e)return i=t,!0})){if(i.isPageAction){if(!t)throw new Error("triggerLink - Page is expected");r._notifyAndResolve(t,n,!0,i);return}if(i.$confirm){s.getModal().simpleConfirm(i.$confirm,function(e){e&&r._doLinkAction(t,i).then(function(e,t){r._resolve(n,e,i,t)}).fail(function(e){n.reject(e)})});return}if(i.$isAction){r._doLinkAction(t,i).then(function(e,t){r._resolve(n,e,i,t)}).fail(function(e){n.reject(e)});return}if(i.page){var o={"sdata-url":i.sDataUrl,"sdata-method":i.$method};t&&t.state.name.replace(".$details",".$edit")===i.page&&l(t,i,o),r.options.noRedirection===!0?r._notifyAndResolve(t,n,!0,i,{gotoPage:{name:i.page,options:o}},r.options):(setTimeout(function(){s.getApplication().changePage(i.page,o)}),n.resolve());return}c("Unexpected link type",i,function(){r._notifyAndResolve(t,n,!1,i,null,r.options)})}}catch(u){n.reject(u)}finally{return n.promise()}},_doLinkAction:function(e,t){var n=this,r=$.Deferred(),i=function(i,s){n._notify(e,i,t,s),r.resolve(i,s)};try{if(e&&e.validateBeforeActionLink&&e.validateBeforeActionLink(t)===!1){r.resolve(!1);return}if(t.sDataUrl){e&&e.waitWheelStart();var s=e?e.dao.getActionPayload(t):null;o.dispatch({$url:t.sDataUrl,$method:t.$method||"GET"},s).then(function(t){e&&e.waitWheelStop(),i(!0,t)}).fail(function(n){e&&e.waitWheelStop(),!f.isError(n)&&$.isPlainObject(n)?i(!1,n):c("Action '"+t.title+"' failed",n,function(){r.reject(n)})})}else i(!0)}catch(u){c("Action '"+t.title+"' javascript exception",u,function(){r.reject(u)})}finally{return r.promise()}},_notifyAndResolve:function(e,t,n,r,i){this._notify(e,n,r,i),this._resolve(t,n,r,i)},_notify:function(e,t,n,r){e&&a.pageNotify("sm.action.link",e,t,n,r,this.options)},_resolve:function(e,t,n,r){e&&e.resolve(t,n,r,this.options)}}),p=function(e){return e.push({name:"$canceledit",title:"Cancel",icon:u.getIconByName("$cancelEdit"),isPageAction:!0,action:"cancelEdit"}),e};t.addCancelEditAction=p,t.Klass=h}),define("syracuse-tablet/html/js/controls/vignetteBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/application/pageLoader","syracuse-tablet/html/js/application/pageRegistry","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/application/actionManager","syracuse-tablet/html/js/sdata/sdataUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/ui/rect"),o=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,u=e("syracuse-tablet/html/js/ui/uiUtils"),a=e("syracuse-tablet/html/js/ui/fontUtils"),f=e("syracuse-tablet/html/js/application/pageLoader").Klass,l=e("syracuse-tablet/html/js/application/pageRegistry"),c=e("syracuse-tablet/html/js/ui/modal"),h=e("syracuse-tablet/html/js/helpers/notifications"),p=e("syracuse-tablet/html/js/helpers/logger").getLogger("app"),d=e("syracuse-tablet/html/js/application/actionManager").Klass,v=e("syracuse-tablet/html/js/sdata/sdataUtils"),m={className:"waiting-blocks",elements:5,auto:!0,speed:200},g={main:'		<section/>		<footer style="display:none"/> 		<div class="s-m-waiting bckg" style="display:none"/> 		<div class="s-m-waiting wheel" style="display:none"/> 	',iframe:'		<br><iframe src="{{url}}" style="position: absolute; top: 0px; left: 0px; height: 100vh; width: 100vh;"/>	',refreshbtn:'		<a draggable="false" href="#" data-action="vignetteRefresh" class="'+a.vignetteIcons("refresh")+'" style="float:right"></a>	',navbtns:'		<a draggable="false" href="#" data-action="vignetteBack" class="'+a.vignetteIcons("back")+'" style="display:none"></a>		<a draggable="false" href="#" data-action="vignetteHome" class="'+a.vignetteIcons("home")+'" style="display:none"></a>	',vignetteError:'		<a draggable="false" href="#" data-action="vignetteError">{{text}}</a>	',linkPage:'<a draggable="false" href="{{href}}" data-nav-target="application" data-nav="{{data-nav}}" data-gadget-id="{{data-gadget-id}}" data-application-name="{{data-application-name}}" data-sdata-parameters="{{data-sdata-parameters}}" class="s-m-link-page">{{title}}</a>',leftpanelactions:'		<div class="dropdown" style="float:right">		<a id="{{uid}}" type="button" data-toggle="dropdown" aria-haspopup="true" role="button" aria-expanded="false" class="fa fa-caret-square-o-right"></a>			<ul class="dropdown-menu" role="menu" aria-labelledby="{{uid}}" style="bottom:100%;top:initial;right: 0px;left: initial;">				{{#each links}}					<li>						<a draggable="false" href="#" class="{{css}}" data-action="leftPanel" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">							<i style="font-size: large" class="{{icon}}"/>							<span>{{title}}</span>						</a>					</li>				{{/each}}	    	</ul>		</div>		'},y=function(e,t){var n=e+"compiled",r=g[n];return r||(r=g[n]=Handlebars.compile(g[e])),r(t)},b=r.defineClass(function(e,t,n,r){var s=this;t.$article=t.$article||{},o.call(s,e,t,n,r),s._currentPage=null,s._pageLoader=null,s._$$wait=null,s._stateStack=[],s._error=null,s.displayStyle=n.data("$displayStyle"),s.openLinkInVignette=i.$config("openLinkInVignette"),s.enableRefresh=!1,s.enableLeftPanelAcions=!0},o,{destroy:function(){var e=this;e._error=null,e.clearContent(),u.waitPluginDestroy(e._$$wait);if(e._pageLoader=null)e._pageLoader.destroy(),e._pageLoader=null;o.prototype.destroy.call(e)},getPageControl:function(e){return this._currentPage&&this._currentPage.getControl?this._currentPage.getControl(e):null},getPage:function(){return this._currentPage},onMainPageResize:function(e,t,n){if(this._currentPage==null||this._currentPage.state.options.$displayStyle!=="$full")return;this._currentPage.onMainPageResize()},changePage:function(e,t){t=t||{},t.openLinkInVignette=this._openLinkInsideVignette(),t.$displayStyle="$full",this._loadPage(e,t)},refreshPage:function(e){var t=this;if(!t._currentPage)throw new Error("No current page");t._error&&this._removeError(),t._currentPage.refresh(e,{waitStart:function(e){t.waitStart()},waitStop:function(e){t.waitStop()}}).then(function(){}).fail(function(e){c.error("Refresh page on vignette",e)})},hasBtnsBar:function(){return this._openLinkInsideVignette()||this.enableRefresh||this.enableLeftPanelAcions},clearContent:function(){var e=this;e._$$content&&(i.getApplication().removeAllChildPages(e._$$content),e._$$content.empty()),e._currentPage&&(e._currentPage=null),e._stateStack=[]},_openLinkInsideVignette:function(e){if(this.openLinkInVignette===!0)return!0;var t;return e==null?t=this._currentPage?this._currentPage.state.name:null:$.isPlainObject(e)?t=e.name:t=e,typeof t=="string"&&(t==="rowdetail"||t.smEndsWith("$lookup"))&&(this.openLinkInVignette=!0),this._currentPage&&this._currentPage.isChild&&(this.openLinkInVignette=!0),this.openLinkInVignette},_loadPage:function(e,t,n){var r=this;return r._error=null,r._actionManager&&(r._actionManager.destroy(),r._actionManager=null),!r._openLinkInsideVignette(e)&&r._stateStack.length>0&&r.clearContent(),r._pageLoader||r._initPageLoader(),$.smResolve().then(function(){var i,s;if(typeof e=="string")return t=t||{},t.vignette=!0,s=t.article,l.getPageInfo(e,t,r._currentPage).then(function(e){return s&&e.options&&(e.options.article=s),e});if(n==="back"||n==="home")return e;throw new Error("Unexpected object state")}).then(function(e){if(e.options&&e.options.$displayStyle==="$full")return r._pageLoader.load(e,n==="back");if(t.gadget)return r._addPicker({"data-nav":e.name,"data-gadget-id":t.gadget.data("$uuid"),"data-application-name":t.gadget.data("applicationName"),title:t.gadget.data("$title")}),$.smResolve();throw new Error("Unexpected vignette page")}).fail(function(e){r._displayError("Loading page error",e)})},_initPageLoader:function(){var e=this;e._pageLoader=new f({waitStop:function(){e.waitStop()},waitStart:function(){e.waitStart()},getRootElmt:function(){return e._$$content},getCurrentPage:function(){return e._currentPage},setCurrentPage:function(t){e._currentPage=t,e._currentPage.setParentVignette(e)},historyPush:function(t){e._stateStack.push(t)},succeeded:function(t,n,r){if(!e.controller)return;if(e.enableLeftPanelAcions){var i=t.prototype.getLinks(t.dao,"actionpanel");i&&i.length>0&&(e._actionManager=new d({$links:i,noMessage:!1}))}e.hasBtnsBar()&&e.refreshBtnsBar(),n&&n.notifId&&(t.id===n.parentId?h.pageNotify(n.notifId,e._currentPage,n.notifData,n.controlId):c.error("Child page notification warning","Parent page is not the current page")),p&&p("vignette loaded"+e.id),t.state.options.$displayStyle==="$full"&&t.onMainPageResize()},loadingError:function(t,n,r){e._displayError("Loading page ["+n.name+"] error",r),t.resolve()},savedCtxVignette:function(){if(!e.controller)return;return e.controller.savedCtxVignette(e)}})},_loadRepresentation:function(e,t,n){var r=this,t=t||e.getPageName();return n=$.extend({},n),n.openLinkInVignette=r._openLinkInsideVignette(t),n.$displayStyle=r.displayStyle,n.gadget=e,n.article=r.article.$article,n.layoutPath=r.getAuthoringPath()+"-0",r._loadPage(t,n)},_displayError:function(e,t){var n=this;n._error={message:e,detail:t},n.$$elmt?(n._$$content.hide(),n.$$elmt.addClass("s-m-error"),n.$$elmt.prepend(y("vignetteError",{text:"Loading failed"})),n.refreshBtnsBar()):alert(e+"\n\n"+t)},_removeError:function(){this.$$elmt.children('a[data-action="vignetteError"]').remove(),this.$$elmt.removeClass("s-m-error"),this._$$content.show(),this._error=null},buildHtml:function(e,t,n){var r=this;r._stateStack.length>0||(o.prototype.buildHtml.call(r,e,t,n,["s-m-vignette"]),r.$$elmt.html(y("main",{})),r._$$content=r.$$elmt.children("section"),r.$$footer=r.$$elmt.children("footer"),r._$$wait=u.waitPluginCreate(r.$$elmt.children(".s-m-waiting.wheel"),m),r._$$waitBckg=r.$$elmt.children(".s-m-waiting.bckg"))},load:function(e,t){var n=this;t=t||{};var r=$.Deferred(),i=function(){r.resolve()},s=function(e){n._displayError(e),i()};try{var o=n.prototype.getVignetteGadget();if(o&&o.isValid()){t.resize===!0&&this.clearContent();switch(o.data("$type")){case"$representation":case"$stats":case"$request":n._loadRepresentation(o,e,t).then(function(){i()}).fail(function(e){s(e)});break;case"$dashboard":n._loadDashboard(o);break;case"$application":n._loadApplication(o);break;case"$external":n._loadExternal(o);break;case"$gadgetMissing":n._displayError("Referenced gadget does not exist: "+o.data("$uuid"));break;default:n._displayError("Unsupported gadget type: "+o.data("$type"))}}else n._displayError("Invalid gadget"+(o?" ["+o.getInvalidReason()+"]":""),o?o.getJSON():"Null gadget");i()}catch(u){s(u)}finally{return r.promise()}},_loadDashboard:function(e){this._addPicker({"data-nav":i.getMetaData().getDashboardPageName(e.data("dashboardName")),"data-application-name":e.data("applicationName"),"data-gadget-id":e.data("$uuid"),"data-sdata-parameters":e.data("sdataParameters"),title:e.data("$title")})},_loadApplication:function(e){this._addPicker({"data-application-name":e.data("applicationName"),title:e.data("$title")})},_loadExternal:function(e){var t=this,n=e.data("externalUrl");t._addPicker({href:n,title:e.data("$title")});if(t.displayStyle!=="$link"){var r=y("iframe",{url:n});$(r).appendTo(t._$$content)}},_addPicker:function(e){e.href||(e.href="#"),$(y("linkPage",e)).appendTo(this._$$content)},waitStart:function(){u.waitPluginEnable(this._$$wait),this._$$waitBckg.show()},waitStop:function(){u.waitPluginDisable(this._$$wait),this._$$waitBckg.hide()},refreshBtnsBar:function(){var e=this,t=!1;e._actionManager&&(e.$$leftPanelActs||(e.$$leftPanelActs=$(y("leftpanelactions",{ctrlId:e.id,links:e._actionManager.getLinks(),uid:r.UUID()})),e.$$footer.prepend(e.$$leftPanelActs)),t=!0);if(e._openLinkInsideVignette()){e.$$icnBack||(e.$$footer.prepend(y("navbtns")),e.$$icnBack=e.$$footer.children("[data-action=vignetteBack]"),e.$$icnHome=e.$$footer.children("[data-action=vignetteHome]"));var n=e._stateStack.length;e.$$icnBack.toggle(n>1),e.$$icnHome.toggle(n>2),t=e._stateStack.length>1}e.enableRefresh&&(e.$$refresh||(e.$$footer.prepend(y("refreshbtn")),e.$$refresh=e.$$footer.children("[data-action=vignetteRefresh]")),t=!0),e.$$footer.toggle(t),e.$$elmt.toggleClass("footer",t)},_actVignetteHome:function(){var e=this;if(e._stateStack.length==0)return;var t=e._stateStack[0];e._stateStack=[],e._loadPage(t,null,"home")},_actVignetteBack:function(){var e=this;if(e._stateStack.length<=1)return;e._stateStack.pop(),e._loadPage(e._stateStack[e._stateStack.length-1],null,"back")},_actVignetteError:function(){var e=this;c.error("Vignette load error",e._error)},_actVignetteRefresh:function(){this.refreshPage({})},_actLeftPanel:function(e){var t=this;t.$$leftPanelActs.find('[data-toggle="dropdown"]').dropdown("toggle"),t._actionManager.triggerLink(e).then(function(e,t,n,r){v.displayActionMsg(e,t.name,n)}).fail(function(){})},isOverflow:function(){if(!this._currentPage)return;return this._currentPage.$$elmt.height()-this.$$elmt.height()>0},getScrollViewRect:function(){return s.elmtRect(this._$$content,"inner")}});t.Klass=b}),define("syracuse-tablet/html/js/controls/page/ctrlPageHeader",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/application/actionManager","syracuse-tablet/html/js/helpers/jsutils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/ui/fontUtils"),u=e("syracuse-tablet/html/js/helpers/locale"),a=e("syracuse-tablet/html/js/application/eventListener"),f=e("syracuse-tablet/html/js/helpers/prototype"),l=e("syracuse-tablet/html/js/application/actionManager"),c=e("syracuse-tablet/html/js/helpers/jsutils"),h=l.Klass,p="userpanelsmartphone",d="pageactionpanelregular",v={main:'		<div class="s-m-header container-fluid {{deviceType}}">			{{{contentHtml}}}		</div>	',tablet:{main:'			<div class="s-m-header-nav">				{{#if showBack}} 					<a href="#" draggable="false" data-action="historyBack">						<span class="'+o.pageIcon("back")+'" />						</a>				{{/if}} 			</div>			<div class="s-m-header-labels">				{{#if showBrand}}					<div class="s-m-header-brand"><span class="s-m-brand">{{labelBrand}}</span> <span class="s-m-product">{{labelProduct}}</span></div>				{{/if}}				<div class="s-m-header-label">{{headerLabel}}</div>			</div>			<div class="s-m-header-links">				{{{userContent}}}			</div>',userInfo:'			<div>				<span class="s-m-nav-text username">{{username}}</span>				<span class="s-m-nav-text userrole">{{userrole}}</span>			</div>			{{#if userPhotoUrl}}				<img src="{{userPhotoUrl}}"/>			{{else}}				<span style="font-size:32px" class="'+o.pageIcon("switchContext")+'" />			{{/if}}',infoOnly:"			<div>{{{userInfo}}}</div>}}}",dropDown:'			<div class="dropdown">				<a href="#" draggable="false" data-toggle="dropdown" role="button" id="{{dropdownId}}" aria-haspopup="true" aria-expanded="false">					{{{userInfo}}}				</a>				{{{dropDownMenu}}}			</div>',dropDownMenu:'			<ul class="dropdown-menu" role="menu" aria-labelledby="{{dropdownId}}">				{{#each links}}					{{#if divider}} 						<li role="presentation" class="divider"></li>					{{/if}} 					<li>						<a href="#" data-action="linkClicked" draggable="false" data-params="{{data-params}}" data-control-id="{{ctrlId}}" class="list-group-item {{css}}">							<span class="{{icon}}" />							<span>{{label}}</span>						</a>					</li>				{{/each}}			</ul>',search:'			<div class="s-m-header-search" style="display:none">				<form style="display:none" class="navbar-form navbar-right" role="search">					<div class="form-group input-group-sm"">						<input type="text" class="form-control" placeholder="Search">					</div>					<button type="submit" class="btn btn-success">						<span class="'+o.pageIcon("search")+'"></span>					</button>				</form>			</div>'},smartphone:{main:'			<div class="s-m-header-nav">				{{{backDom}}}				<a href="#" draggable="false" data-action="headerAction" data-params="{{panelId}}" data-control-id="{{ctrlId}}">					<span class="'+o.pageIcon("bars")+'" />				</a>			</div>			<div class="s-m-header-labels">				{{{labelContent}}}			</div>			<div class="s-m-header-links">				{{{linksContent}}}			</div>',backDom:'			<a href="#" draggable="false" data-action="historyBack">				<span class="'+o.pageIcon("backIphone")+'" />			</a>',brandDom:'			<div class="s-m-header-brand">				<span class="s-m-brand">{{labelBrand}}</span>				<span class="s-m-product">{{labelProduct}}</span>			</div>',labelDom:'			<div class="s-m-header-label">{{label}}</div>',actionLink:'			<a href="#" draggable="false" class="{{css}}" data-action="headerLink" data-params="{{$uuid}}" data-control-id="{{ctrlId}}">				<i class="{{icon}}"></i>			</a>',actionPanelToggle:'			<a href="#" data-action="headerAction" draggable="false" data-params="{{panelId}}" data-control-id="{{ctrlId}}">				<span class="'+o.pageIcon("sidePanelR")+'" />			</a>'}},m={showAuthoring:{items:[{"data-params":"designPage",icon:"designPage",label:"header.links.designPage"}]},showLinks:{items:[{"data-params":"clearCache",icon:"clearCache",label:"header.links.clearCache"},{"data-params":"switchContext",icon:"switchContext",label:"header.links.switchContext"},{"data-params":"about",icon:"about",label:"header.sm.links.about"}]},showDevelopment:{divider:!0,items:[{"data-params":"developmentPage",icon:"developmentPage",label:"header.links.development"}]}},g=function(e,t,n){e=e||"";var r=e+t+"compiled",i=v[r];return i||(i=e.length==0?v[t]:v[e][t],i=v[r]=Handlebars.compile(i)),i(n)},y={$type:"tablet/x-pageheader"},b={$bind:"header"},w={tablet:50,smartphone:50},E=function(e){return w[s.getSiteLayout().getDeviceType(e)]},S=r.defineClass(function(e,t){i.call(this,e,b,f.create(y),t)},i,{destroy:function(){this.resetPanels(),i.prototype.destroy.call(this)},resetPanels:function(){this._smphUserpanel&&this._smphUserpanel.destroy(),this._smphPageactionpanel&&this._smphPageactionpanel.destroy()},buildHtml:function(e,t,n){this.buildOptions=n.toolBars||{},this.buildOptions.showDevelopment=s.isDvlpMode(),this.buildOptions.showAuthoring=r.isDesktop()===!0?this.buildOptions.showAuthoring:!1,i.prototype.buildHtml.call(this,e,t,n,[this.typeName]),this._build()},applyMetaData:function(e){return},_actLinkClicked:function(e){a.triggerAction(this.$$elmt,e)},onMainPageResize:function(e,t,n){this.$$elmt.parent().css({width:e.contentWidth+"px"}),this._build(n),this._updateHeaderStyle(this._deviceType)},getHeight:function(){return this.$$elmt&&this.$$elmt.is(":visible")?this.$$elmt.height():0},_build:function(e){var t=s.getSiteLayout().getDeviceType(e);if(this._deviceType!=null&&this._deviceType===t)return;this._deviceType=t,this.$$header&&this.$$header.remove();var n=w[t];this.$$elmt.height(n);var r=this.$$elmt.parent();r.css({left:"0px",height:n+"px"});var i=this.buildOptions,o;t==="smartphone"?o=this._smartPhoneHtml(i):o=this._tabletHtml(i),this.$$header=$(g(null,"main",{contentHtml:o,deviceType:t})),this.$$header.appendTo(this.$$elmt)},_updateHeaderStyle:function(e){var t=this,n=t.$$elmt.find(".s-m-header"),r=t.$$elmt.find(".s-m-header-links"),i=t.$$elmt.find(".s-m-header-nav"),s=t.$$elmt.find(".s-m-header-label"),o=10;if(e==="tablet")if(!t.controller.state.isWelcomePage){var u=n.width()-(i[0].scrollWidth+r[0].scrollWidth+o);s.css("max-width",u)}else{s.css("max-width","inherit");var a=t.$$elmt.find(".s-m-header-brand"),f=a.width()+s.width()+i.width()+r.width()+o>n.width();s.toggle(f?!1:!0);var l=a.width()+i.width()+r.width(),c=3;if(f==1&&l>n.width())while(l>n.width())a.css("font-size",a.css("font-size").match(/\d+/)[0]-c+"px"),c+=3,l=a.width()+i.width()+r.width();else a.css("font-size","2.5em")}else if(!t.controller.state.isWelcomePage){var u=n.width()-(i[0].scrollWidth+r[0].scrollWidth+o);s.css("max-width",u)}},_tabletHtml:function(){var e=this,t={dropdownId:r.UUID(),links:[]},n=e.buildOptions,i=0;for(var a in m)if(n[a]===!0){var f=m[a];f.items.forEach(function(n,r){n=$.extend({},n),n.label=u.text(n.label),n.ctrlId=e.id,n.icon=o.pageIcon(n.icon),r===0&&t.links.length>1&&(n.divider=f.divider),n["data-params"]=="clearCache"&&s.getCache().isDisabled()?n.css="disabled":n.css="",t.links.push(n)})}var l={showBack:n.showHome,showHome:n.showHome,showBrand:e.controller.state.isWelcomePage,labelBrand:n.labelBrand||"Sage",labelProduct:n.labelProduct||"ERP X3",headerLabel:e.controller.state.isWelcomePage?s.getApplication().getTitle():e.controller.prototype.data("$title")},c=g("tablet","userInfo",{username:s.getUserName(),userrole:s.getUserRole(),userPhotoUrl:s.getUserPhotoUrl});return t.links.length===0?l.userContent=g("tablet","infoOnly",{userInfo:c}):(l.userContent=g("tablet","dropDown",{userInfo:c,dropDownMenu:g("tablet","dropDownMenu",t)}),e.$$elmt.css({overflow:"visible"})),g("tablet","main",l)},_smartPhoneHtml:function(e){var t=this,n="",r="",i="";e.showHome&&s.getLookAndFeel()==="ios"&&(n=g("smartphone","backDom",{})),r=t._getLabelContent(e),i=t._getLinksContent();var o={backDom:n,labelContent:r,linksContent:i,panelId:p,ctrlId:t.id};return this.resetPanels(),this._smphUserpanel=this.controller.panelCreate(p),i&&i.length>0&&(this._smphPageactionpanel=this.controller.panelCreate(d)),g("smartphone","main",o)},_getLabelContent:function(e){function r(e,t,n){return e?g("smartphone","labelDom",{label:t}):g("smartphone","brandDom",{labelBrand:n.labelBrand||"Sage",labelProduct:n.labelProduct||"ERP X3"})}var t=this,n;return this.controller.state.isWelcomePage?n=r(!1,null,e):t.controller.state.isWelcomePage?n=r(!0,s.getApplication().getTitle()):t.controller.prototype.data("$title")?n=r(!0,t.controller.prototype.data("$title")):n=r(!1,null,e),n},_getLinksContent:function(){var e=this,t="",n=this.controller.prototype.getLinks(this.getDao(),"header",{deviceType:e.deviceType||"smartphone"});!this.controller.isChild&&this.controller.isEditMode()&&l.addCancelEditAction(n),this.actionManager&&this.actionManager.destroy(),this.actionManager=new h({$links:n,noMessage:!1});var r=this.actionManager.getLinks();if(r&&r.length>0){var i=[];r.forEach(function(t,n){i.push(g("smartphone","actionLink",$.extend(t,{ctrlId:e.id})))}),t=i.join("")+g("smartphone","actionPanelToggle",{panelId:d,ctrlId:e.id})}return t},_actHeaderLink:function(e){this.actionManager.triggerLink(e,this.controller).then(function(e,t,n,r){}).fail(function(e){c.isError(e)&&s.getModal().error("Header action error (smartphone)",e)})},_actHeaderAction:function(e){var t=e===d?this._smphPageactionpanel:this._smphUserpanel,n=e===d?"right":"left";this.controller.panelAttach(n,t,"toggle")}});t.Klass=S}),define("syracuse-tablet/html/js/controls/page/ctrlPageFooter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/actionManager","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/application/actionManager"),u=e("syracuse-tablet/html/js/helpers/locale"),a=o.Klass,f=e("syracuse-tablet/html/js/ui/fontUtils"),l=e("syracuse-tablet/html/js/helpers/jsutils"),c=e("syracuse-tablet/html/js/helpers/prototype"),h=e("syracuse-tablet/html/js/helpers/notifications"),p="pageactionpanelregular",d={main:'		<div class="s-m-footer container-fluid {{deviceType}}">			{{{contentHtml}}}		</div>',tablet:{main:'			<div class="s-m-footer-left">				{{{homeLink}}}				{{{pinPage}}}			</div>			<div class="s-m-footer-right">				{{{rightLinks}}}			</div>		',rightLinks:'			{{#each links}}				<a draggable="false"  href="#" class="{{css}}" data-action="footerLink" data-params="{{$uuid}}" data-control-id="{{../ctrlId}}">					<i class="{{icon}}"/>				</a>			{{/each}}		',homeLink:'			<a href="#" data-action="home">				<i class="{{icon}}"/>			</a>',pinPage:'			<a href="#" data-action="pinPage">				<i class="{{icon}}"/>			</a>'},smartphone:{main:""}};d[p]='	<a draggable="false"  href="#" data-action="footerAction" data-params="{{panelId}}" style="display:none;" data-control-id="{{controlId}}">	<i class="{{icon}}"/></a>';var v=function(e,t,n){e=e||"";var r=e+t+"compiled",i=d[r];return i||(i=e.length==0?d[t]:d[e][t],i=d[r]=Handlebars.compile(i)),i||alert("footer template "+t+" not found"),i(n)},m={$type:"tablet/x-pagefooter"},g={$bind:"footer"},y={tablet:50,smartphone:50},b=r.defineClass(function(e,t){i.call(this,e,g,c.create(m),t),this.actionManager=null,this._actionPanel=null,h.subscribe(this,["sm.page.pin.state.change"])},i,{destroy:function(){this.actionManager&&(this.actionManager.destroy(),this.actionManager=null),this.resetActionPanel(),i.prototype.destroy.call(this),h.unsubscribe(this)},resetActionPanel:function(){this._actionPanel&&(this._actionPanel.destroy(),this._actionPanel=null)},buildHtml:function(e,t,n){this.buildOptions=$.extend(n.footer,n.toolBars)||{},i.prototype.buildHtml.call(this,e,t,n,[this.typeName]),this._$$parent=this.$$elmt.closest("footer"),this._build(),this.$$footer&&this._$$parent.css({marginTop:"5px",bottom:"-5px"})},applyMetaData:function(e){return},_enableActionPanel:function(e){var t=this.$$elmt.find(".s-m-footer-right"),n=t.find('[data-action="actionPanel"]');n.length==0&&(n=$(v(null,p,{icon:f.pageIcon("sidePanelR"),title:u.text("footer.links.actions"),controlId:this.id,panelId:p})).appendTo(t)),n.toggle(e===!0)},_actFooterLink:function(e){this.actionManager.triggerLink(e,this.controller).then(function(e,t,n,r){}).fail(function(e){l.isError(e)&&s.getModal().error("Footer action error",e)})},_actFooterAction:function(e){e===p&&this.controller.panelAttach("right",this._actionPanel,"toggle")},onMainPageResize:function(e,t,n){var r=s.getSiteLayout().getDeviceType(n);this._build(r),this.$$footer?(this._$$parent.css({top:e.contentHeight-this._height+"px",width:e.contentWidth+"px"}),this.controller.state.type==="regular"&&!this._actionPanel&&(this._actionPanel=this.controller.panelCreate(p),this._enableActionPanel(this._actionPanel.isEnabled()))):this.resetActionPanel()},getHeight:function(){return this.$$elmt&&this.$$elmt.is(":visible")?this.$$elmt.height():0},_build:function(e){e=e||s.getSiteLayout().getDeviceType();if(this._deviceType!=null&&this._deviceType===e)return;this._deviceType=e,this.$$footer&&(this.$$footer.remove(),this.$$footer=null);if(e==="smartphone")return;this._height=y[e],this._$$parent.css({left:"0px",height:this._height+"px"}),this.$$footer=$(v(null,"main",{contentHtml:this._tabletHtml(this.buildOptions),deviceType:e})),this.$$footer.appendTo(this.$$elmt)},_tabletHtml:function(e){var t=this,n={},r=t.controller.prototype.getLinks(t.getDao(),"footer",{deviceType:"tablet"});!t.controller.isChild&&t.controller.isEditMode()&&o.addCancelEditAction(r),t.actionManager&&t.actionManager.destroy(),t.actionManager=new a({$links:r,noMessage:!1});var i=v("tablet","rightLinks",{ctrlId:t.id,links:t.actionManager.getLinks()}),s="";e.showHome&&(s=v("tablet","homeLink",{icon:f.pageIcon("home")}));var u="";return e.statusPinPage>0&&(u=v("tablet","pinPage",{icon:f.pageIcon("pinPage_"+e.statusPinPage)})),v("tablet","main",{homeLink:s,pinPage:u,rightLinks:i})},notifPagePinStateChange:function(e){var t=this.$$elmt.find("[data-action=pinPage] i");t.length>0&&t.attr("class",f.pageIcon("pinPage_"+e))}});t.Klass=b}),define("syracuse-tablet/html/js/controls/page/panels/sidePanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/eventListener"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=e("syracuse-tablet/html/js/helpers/prototype"),o=e("syracuse-tablet/html/js/helpers/globals"),u=e("syracuse-tablet/html/js/application/eventListener"),a=r.defineClass(function(e,t,n,r){this.panelId=n,this.closeBox=r.closeBox===!0,this.overlap=r.overlap!==!1,i.call(this,e,{$bind:this.panelId+"panel"},s.create({$type:t}),r)},i,{destroy:function(){i.prototype.destroy.call(this)},buildHtml:function(e){this.side=e,i.prototype.buildHtml.call(this,null,this.controller.dao,{},[this.typeName]),this.$$elmt.hide()},attach:function(e,t){this.$$elmt&&this.side!=null&&t!=this.side&&(this.$$elmt.remove(),this.$$elmt=null),this.$$elmt||this.buildHtml(t),this.isAttached()&&(console.log("sidePanel.attach - Unexpected attached $$elmt"),this.detach());if(!e)return;e.append(this.$$elmt)},isAttached:function(e){return this.$$elmt!=null&&this.$$elmt.parent()!=null&&this.side==e},detach:function(){if(!this.$$elmt)return;this.$$elmt.detach()},isEnabled:function(){return!0},notifyToggled:function(e,t,n){},applyMetaData:function(e){return},onClick:function(e){this.close()},close:function(){u.triggerAction(this.$$elmt,"toggleSidePanel","close,"+this.side)}});t.Klass=a}),define("syracuse-tablet/html/js/controls/page/panels/actionPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sidePanel","syracuse-tablet/html/js/application/eventListener","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/helpers/hammerScroller","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/actionManager"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/panels/sidePanel").Klass,s=e("syracuse-tablet/html/js/application/eventListener"),o=e("syracuse-tablet/html/js/helpers/notifications"),u=e("syracuse-tablet/html/js/helpers/prototype"),a=e("syracuse-tablet/html/js/helpers/hammerScroller").Klass,f=e("syracuse-tablet/html/js/ui/rect"),l=e("syracuse-tablet/html/js/helpers/globals"),c=e("syracuse-tablet/html/js/helpers/locale"),h=e("syracuse-tablet/html/js/application/actionManager").Klass,p={main:'			<nav class="navbar s-m-side-panel {{side}} navbar-inverse ctrl-evt-click" role="navigation">				<div class="s-m-scroll-elmt">				{{#if facetlink}}					<div class="container-fluid">						<div class="navbar-header">							<span class="navbar-brand" href="#"><span>{{linksHeaderTitle}}</span></a>						</div>					</div>					<ul class="nav navbar-nav">						{{{facetLinksHtml}}}					</ul>				{{/if}}				<div class="container-fluid">					<div class="navbar-header">						<span class="navbar-brand" href="#"><span>{{title}}</span></a>					</div>				</div>					<ul class="nav navbar-nav">						{{{actionsHtml}}}					</ul>				</div>			</nav>',facetLinks:'		{{#each links}}			<li>		 		{{#if $isAction}} 					<a draggable="false" href="#" class="{{css}}" data-action="actionLink" data-params="{{$uuid}}" data-control-id="{{../../ctrlId}}">						<i style="font-size: large" class="{{icon}}"/>						<span>{{title}}</span>					</a>				{{else}} 					<a draggable="false" href="#" class="{{css}}" data-nav="{{page}}" data-params="{{$uuid}}" data-sdata-parameters="{{parameters}}" data-control-id="{{../ctrlId}}">						<i style="font-size: large" class="{{icon}}"/>						<span>{{title}}</span>					</a>				{{/if}} 			</li>		{{/each}}'},d=r.defineClass(function(e,t,n,r){this.enableGesture=r.enableGesture!==!1,i.call(this,e,t,n,r)},i,{destroy:function(){i.prototype.destroy.call(this),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},buildHtml:function(e){i.prototype.buildHtml.call(this,e),this.$$elmt.addClass(this.typeName);var t={ctrlId:this.id,side:e};this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null),this.$$panel&&this.$$panel.remove(),this.$$panel=this.buildPanel(t,e),this.$$panel&&this.$$panel.length&&this.$$elmt.append(this.$$panel)},buildPanel:function(e,t){var n=this.controller.prototype.getLinks(this.getDao(),"actionpanelparent",{deviceType:l.getSiteLayout().getDeviceType()});if(n&&Object.keys(n).length>0){var r=new h({$links:n,noMessage:!1});e.facetlink=!0,e.linksHeaderTitle=c.text("actionpanel.label.links"),e.facetLinksHtml=Handlebars.compile(p.facetLinks)({links:r.getLinks()})}return $(Handlebars.compile(p.main)(e))},isEnabled:function(){return!0},notifyToggled:function(e,t,n){this.enableGesture&&n&&this.updateGesture()},updateGesture:function(){if(this.$$elmt.is(":visible")&&this.$$panel){this._gestureMgr||(this.$$scrollElmt=this.$$panel.find(".s-m-scroll-elmt"),this.$$scrollElmt.css({height:"auto",position:"relative"}),this.$$scrollWrapper=this.$$panel,this._gestureMgr=new a(this.$$scrollElmt,{direction:"v",valMax:0,name:this.$bind,isPageScroller:!1}));var e=f.elmtRect(this.$$scrollElmt,"outer"),t=f.elmtRect(this.$$scrollWrapper,"outer"),n=t.intersectRect(e);n&&!n.contains(e)?this._gestureMgr.init(n):this._gestureMgr.reset()}else this._gestureMgr&&this._gestureMgr.reset()}});t.Klass=d}),define("syracuse-tablet/html/js/controls/page/panels/pageActionPanelRegular",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/actionPanel","syracuse-tablet/html/js/application/actionManager"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/panels/actionPanel").Klass,s=e("syracuse-tablet/html/js/application/actionManager").Klass,o={actionLink:'		{{#each links}}			<li>		 		{{#if $isAction}} 					<a draggable="false" href="#" class="{{css}}" data-action="actionLink" data-params="{{$uuid}}" data-control-id="{{../../ctrlId}}">						<i style="font-size: large" class="{{icon}}"/>						<span>{{title}}</span>					</a>				{{else}} 					<a draggable="false" href="#" class="{{css}}" data-nav="{{page}}" data-params="{{$uuid}}" data-sdata-parameters="{{parameters}}" data-control-id="{{../ctrlId}}">						<i style="font-size: large" class="{{icon}}"/>						<span>{{title}}</span>					</a>				{{/if}} 			</li>		{{/each}}'},u=function(e,t){var n=e+"compiled",r=o[n];return r||(r=o[n]=Handlebars.compile(o[e])),r(t)},a=r.defineClass(function(e,t,n,r){i.call(this,e,t,n,r)},i,{buildPanel:function(e,t){return this.actionManager&&this.actionManager.destroy(),this.actionManager=new s({$links:this.controller.prototype.getLinks(this.getDao(),"actionpanel"),noMessage:!1}),e.title="Actions",e.actionsHtml=u("actionLink",{ctrlId:this.id,links:this.actionManager.getLinks()}),i.prototype.buildPanel.call(this,e)},_actActionLink:function(e){this.close("close"),this.actionManager.triggerLink(e,this.controller).then(function(e,t,n,r){}).fail(function(){})}});t.Klass=a}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=r.defineClass(function(e,t,n){this.id=t,this.options=n||{},this.panel=e,this.$$tab=this.panel.$$panel.find('[href="#'+t+'"]'),this.$$btnBar=this.panel.$$panel.find(".tab-content > .btn-group"),this.$$content=this.panel.$$panel.find("#"+this.id);if(this.isHidden())this.$$tab.parent().hide(),this.$$content.hide();else{this.$$tab.on("shown.bs.tab",r.bindFn(this.onTabShown,this)),this.$$tab.on("hidden.bs.tab",r.bindFn(this.onTabHidden,this)),this.$$btnBar.on("click","[data-params]",r.bindFn(this.onBtnBarClick,this));if(this.options.isActive){var i=this;window.setTimeout(function(){i.activate(!0)})}}},null,{destroy:function(){this.panel=null,r.unbindObj(this.$$tab),this.$$tab=null,r.unbindObj(this.$$content),this.$$content=null,r.unbindObj(this.$$btnBar),this.$$btnBar=null},isHidden:function(){return this.options.hidden===!0},isActive:function(){return this.$$tab.hasClass("active")},activate:function(e){this.$$tab.tab(e!=0?"show":"hide")},setAlone:function(){this.$$tab.parent().width("100%")},onTabShown:function(e){this.$$content.is(":empty")&&(this.$$content.append(this.buildHtml()),this.$$content.on("click","[data-params]",r.bindFn(this.onTabContentClick,this)))},onTabHidden:function(e){},notifyToggled:function(e,t,n){},buildHtml:function(){},onTabContentClick:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target),n=t.attr("data-params");if(n==="apply"){this.apply(e,t)===!0&&this.close();return}this.doAction(e,t,n)},onBtnBarClick:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target),n=t.attr("data-params");switch(n){case"apply":this.apply(e,t)===!0&&this.close();break;case"close":this.close()}},doAction:function(e,t,n){},apply:function(e,t){},close:function(){this.panel.close()},onResize:function(){}});t.Klass=i}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabSort",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/ui/rect","syracuse-tablet/html/js/helpers/hammerScroller"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase").Klass,s=e("syracuse-tablet/html/js/ui/fontUtils"),o=e("syracuse-tablet/html/js/ui/rect"),u=e("syracuse-tablet/html/js/helpers/hammerScroller").Klass,a={sort:'		<div class="s-m-scroll-wrapper">			<ul class="list-group">				{{#each items}}					<li class="list-group-item" data-params="{{id}}">						<span>{{name}}</span>						<span class="s-m-order '+s.sortIcon("desc")+'  {{#smCompare sort "desc"}}enabled{{/smCompare}}" data-params="desc"></span>						<span class="s-m-order '+s.sortIcon("asc")+'  {{#smCompare sort "asc"}}enabled{{/smCompare}}" data-params="asc"></span>					</li>				{{/each}}			</ul>		</div>'},f=function(e,t){var n=e+"compiled",r=a[n];return r||(r=a[n]=Handlebars.compile(a[e])),r(t)},l=r.defineClass(function(e,t,n){this.sortInfo=$.extend(!0,[],e.getParentArray().sortInfoGet(!0)),n.hidden=n.hidden===!0||this.sortInfo.length===0,i.call(this,e,t,n)},i,{destroy:function(){i.prototype.destroy.call(this),this._gestureMgr&&(this._gestureMgr.destroy(),this._gestureMgr=null)},buildHtml:function(){this.$$content.append($(f("sort",{items:this.sortInfo}))),this.updateGesture(!0)},apply:function(e,t,n){var r={};return this.$$content.find(".s-m-order.enabled").each(function(e,t){t=$(t),r[t.parent().attr("data-params")]=t.attr("data-params")}),this.sortInfo.forEach(function(e){e.sort=r[e.id]||"none"}),this.panel.getParentArray().sortInfoSet($.extend(!0,[],this.sortInfo),!0),!0},doAction:function(e,t,n){if(n!=="none"&&t.hasClass("enabled")){t.removeClass("enabled");return}(this.options.singleCriteria===!0?this.$$content:t.parent()).find(".s-m-order.enabled").removeClass("enabled"),n!=="none"&&t.addClass("enabled")},notifyToggled:function(e,t,n){i.prototype.notifyToggled.call(this,e,t,n),this.$$content.is(":visible")&&this.updateGesture()},onResize:function(){i.prototype.onResize.call(this),this.$$content.is(":visible")&&this.updateGesture()},updateGesture:function(e){!this._gestureMgr&&e===!0&&(this.$$scrollWrapper=this.$$content.find(".s-m-scroll-wrapper"),this.$$scrollElmt=this.$$scrollWrapper.find("ul.list-group"),this.$$scrollElmt.css({height:"auto",position:"relative"}),this._gestureMgr=new u(this.$$scrollElmt,{direction:"v",valMax:0,name:"SORTTAB",isPageScroller:!1}));if(!this._gestureMgr)return;var t=o.elmtRect(this.$$scrollWrapper,"outer"),n=t.intersectRect(o.elmtRect(this.panel.$$elmt,"outer"));n&&!n.contains(t)?this._gestureMgr.init(n):this._gestureMgr.reset()}});t.Klass=l}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilter",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabBase").Klass,s=e("syracuse-tablet/html/js/ui/fontUtils"),o=e("syracuse-tablet/html/js/helpers/locale"),u={filter:'<b style="color:white">Under construction</b>'},a=function(e,t){var n=e+"compiled",r=u[n];return r||(r=u[n]=Handlebars.compile(u[e])),r(t)},f=r.defineClass(function(e,t,n){this.filterInfo=e.getParentArray().filterInfoGet(!0),i.call(this,e,t,n)},i,{buildHtml:function(){this.$$content.append($(a("filter",{items:this.filterInfo})))},apply:function(e,t,n){return this.panel.getParentArray().filterInfoSet(self.sortInfo,!0),!0},doAction:function(e,t,n){}});t.Klass=f}),define("syracuse-tablet/html/js/controls/page/panels/sortfilter/filterSortPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sidePanel","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabSort","syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilter","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/panels/sidePanel").Klass,s=e("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabSort").Klass,o=e("syracuse-tablet/html/js/controls/page/panels/sortfilter/tabFilter").Klass,u=e("syracuse-tablet/html/js/helpers/locale"),a={main:'		<section class="s-m-side-panel {{side}}">			<ul class="nav nav-pills" role="tablist"> 				{{#each tabs}}					<li style="width:{{width}};"><a href="#{{id}}" role="tab" data-toggle="tab">{{title}}</a></li> 				{{/each}}			</ul> 			<div class="tab-content">				<header>{{title}}</header>				<div class="btn-group btn-group-justified" role="group">				  <a type="button" class="btn btn-default" data-params="apply">{{apply}}</a>				  <a type="button" class="btn btn-default" data-params="close">{{close}}</a>				</div>				{{#each tabs}}					<div id="{{id}}" role="tabpanel" class="tab-pane {{type}}"/> 				{{/each}}			</div> 		</section>'},f=function(e,t){var n=e+"compiled",r=a[n];return r||(r=a[n]=Handlebars.compile(a[e])),r(t)},l=[{klass:s,options:{name:"sort",isActive:!0,singleCriteria:!0}},{klass:o,options:{name:"filter",isActive:!1}}],c=r.defineClass(function(e,t,n,r){this._tabs={},i.call(this,e,t,n,r)},i,{destroy:function(){i.prototype.destroy.call(this),this.options.parentArray=null,this._tabs&&($.each(this._tabs,function(e,t){t.destroy()}),this._tabs=null)},getParentArray:function(){return this.options.parentArray},buildHtml:function(e){var t=this;i.prototype.buildHtml.call(this,e),t.$$elmt.addClass(t.typeName),t.$$panel&&t.$$panel.remove();var n={ctrlId:t.id,side:e,apply:u.text("panels.array.apply"),close:u.text("panels.array.close"),title:this.getParentArray().getTitle(),tabs:[]},s=[];l.forEach(function(e){e=$.extend({},e),e.options.hidden=t.options[e.options.name]===!1,s.push(e)});var o=Math.round(1e5/l.length)/1e3+"%",a={};s.forEach(function(e){a[e.options.name]=r.readableuid("array"+e.options.name),n.tabs.push({id:a[e.options.name],title:u.text("panels.array."+e.options.name),type:e.options.name,width:o})}),t.$$panel=$(f("main",n));if(t.$$panel&&t.$$panel.length){t.$$elmt.append(t.$$panel);var c=0;s.forEach(function(e){var n=new e.klass(t,a[e.options.name],e.options);n.isHidden()&&c++,t._tabs[e.options.name]=n}),(s.length==1||s.length===c+1)&&$.each(t._tabs,function(e,t){t.isHidden()||t.setAlone()})}},notifyToggled:function(e,t,n){i.prototype.notifyToggled.call(this,e,t,n),$.each(this._tabs,function(r,i){i.notifyToggled(e,t,n)})},onResize:function(){$.each(this._tabs,function(e,t){t.onResize()})}});t.Klass=c}),define("syracuse-tablet/html/js/controls/page/panels/navigationPanel",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/sidePanel","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/fontUtils"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/panels/sidePanel").Klass,s=e("syracuse-tablet/html/js/helpers/notifications"),o=e("syracuse-tablet/html/js/ui/uiUtils"),u=e("syracuse-tablet/html/js/helpers/globals"),a=e("syracuse-tablet/html/js/ui/fontUtils"),f={navigLink:'<li class="">		<a draggable="false"  href="#" data-action="switchApp" data-params="{{appName}}" data-control-id="{{ctrlId}}">			<i class="{{icon}}"></i>			&nbsp;			<span>{{title}}</span>		</a>	</li>'},l=function(e,t){var n=e+"compiled",r=f[n];return r||(r=f[n]=Handlebars.compile(f[e])),r(t)},c=function(e){u.getModal().error("Error loading applications",e)},h=r.defineClass(function(e,t,n){this._$$wait=null,i.call(this,e,t,"left",n),this.appCount=0},i,{destroy:function(){i.prototype.destroy.call(this),o.waitPluginDestroy(this._$$wait),this._$$wait=null},buildAfterMainResize:function(e,t,n,r){var s=this;try{var o=[],f=u.getApplication(),h,p=u.getMetaData();p.getApplications().then(function(u){u.forEach(function(e){var t=e.applicationName,n=e;f.uuid!=n.$uuid?(o.push(l("navigLink",{title:n.title||n.description||n.applicationName,icon:n.iconName&&a.getIconByName(n.iconName)||a.getIconByName("briefcase"),appName:n.applicationName,ctrlId:s.id})),s.appCount++):h=n.title||n.applicationName}),e.title=h||"Navigation",e.actionsHtml=o.join(""),i.prototype.buildAfterMainResize.call(s,e,t,n,r)})}catch(d){c(d)}},_actSwitchApp:function(e){var t=this;s.publish("sm.switch.app",e)}});t.Klass=h}),define("syracuse-tablet/html/js/controls/page/panels/userpanelsmartphone",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/page/panels/actionPanel","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/eventListener"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/page/panels/actionPanel").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/helpers/globals"),u=e("syracuse-tablet/html/js/ui/fontUtils"),a=e("syracuse-tablet/html/js/helpers/locale"),f=e("syracuse-tablet/html/js/application/eventListener"),l={navigLink:'<li class="">		<a draggable="false"  href="#" data-action="{{action}}" data-params="{{params}}" data-control-id="{{ctrlId}}">			<i class="{{icon}}"></i>			&nbsp;			<span>{{title}}</span>		</a>	</li>'},c={home:{label:"header.sm.links.home",icon:"home",action:"gotoWelcomeApplication",target:"application"},switchContext:{label:"header.sm.links.switchContext",icon:"switchContext",params:"switchContext",action:"linkClicked",target:"panel"},clearCache:{label:"header.sm.links.clearCache",icon:"clearCache",action:"linkClicked",params:"clearCache",target:"panel"},about:{label:"header.sm.links.about",icon:"about",action:"linkClicked",params:"about",target:"panel"},logout:{label:"header.sm.links.logout",icon:"logout",action:"logout",target:"application"},development:{label:"header.links.development",icon:"developmentPage",action:"developmentPage",target:"application"}},h=function(e,t){var n=e+"compiled",r=l[n];return r||(r=l[n]=Handlebars.compile(l[e])),r(t)},p=r.defineClass(function(e,t,n,r){r.overlap=!1,i.call(this,e,t,n,r)},i,{buildPanel:function(e,t){var n=this,r=[],s=o.getCurrentPage().state.isWelcomePage,f=Object.keys(c);return f.forEach(function(e,t){if(!o.isDvlpMode()&&e==="development")return;if(!s||e!=="home"){var i=c[e];r.push(h("navigLink",{title:a.text(i.label),action:i.action||"",params:i.params||"",icon:u.pageIcon(i.icon),ctrlId:i.target==="panel"?n.id:null}))}}),e.title=o.getUserName(),e.actionsHtml=r.join(""),i.prototype.buildPanel.call(n,e,t)},_actLinkClicked:function(e){f.triggerAction(this.$$elmt,e)}});t.Klass=p}),define("syracuse-tablet/html/js/controls/ctrlTypeUnknown",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=r.defineClass(function(t,n,r){i.call(this,t,n,r)},i,{buildHtml:function(e,t,n){i.prototype.buildHtml.call(this,e,t,n,["s-m-unknown"]),this.$$elmt.html('<div class="s-m-value">Field '+this.$bind+" - Unknown type: "+this.$type+"</div>")}});t.Klass=s}),define("syracuse-tablet/html/js/controls/ctrlUnfound",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=r.defineClass(function(t,n,r){i.call(this,t,n,r)},i,{buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n,["s-m-unfound"]),r.$$elmt.html('<div class="s-m-value">Field <b>'+r.$bind+"</b> unfound</div>")}});t.Klass=s}),define("syracuse-tablet/html/js/controls/chart/ctrlCubeChartTheme",["require","exports","module"],function(e,t,n){var r={colors:["#BF7070","#BFB730","#7ABF30","#7373FF","#BF7730","#BF3080","#30BF9F","#FF7373","#FFF773","#85FF00","#3030BF","#FF9F40","#FF40BC","#1699A6","#FF0000","#FFF100","#00FF00","#0000FF","#FF7F00","#FF00A6","#00FFC6","#A60000","#A69C00","#56A600","#90B2FF","#A65200","#A6006C","#00A681","#FF4040","#FFF440","#A3FF40","#3673FF","#FFB873","#FF76CE","#73FFED"],chart:{borderRadius:"0",spacingTop:10,backgroundColor:"#fff",borderColor:"#ccc",borderWidth:1,className:"dark-container",resetZoomButton:{theme:{fill:"white",stroke:"#dddddd",r:0,states:{hover:{fill:"#00a1de",style:{color:"white"}}}},position:{x:-50,y:5},relativeTo:"chart"}},title:{style:{color:"#464646",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},subtitle:{style:{color:"#464646",font:'bold 12px "Trebuchet MS", Verdana, sans-serif'}},xAxis:{gridLineColor:"rgba(0, 0, 0, 0.05)",gridLineDashStyle:"longdash",gridLineWidth:1,labels:{style:{color:"#A0A0A0"}},lineColor:"rgba(0, 0, 0, 0.2)",tickColor:"rgba(0, 0, 0, 0.2)",title:{style:{color:"#464646",fontWeight:"normal",fontSize:"20px",fontFamily:"arial"}}},yAxis:{minorGridLineColor:"rgba(0, 0, 0, 0.05)",minorTickInterval:"auto",gridLineWidth:2,gridLineColor:"rgba(0, 0, 0, 0.07)",labels:{align:"left",x:0,y:12,style:{color:"#A0A0A0"}},lineColor:"rgba(0, 0, 0, 0.07)",title:{style:{color:"#CCC",fontSize:"16px",fontFamily:"Georgia, Verdana, sans-serif",fontStyle:"italic"}}},tooltip:{backgroundColor:"#464646",borderRadius:"0",style:{color:"#fff",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"silver"}},plotOptions:{series:{marker:{lineWidth:2,lineColor:null,radius:4,states:{hover:{radius:8,lineColor:null}}}},area:{fillOpacity:.15},areaspline:{fillOpacity:.15},line:{dataLabels:{color:"#CCC"},marker:{lineColor:"#FFFFFF"}},spline:{marker:{lineColor:"#FFFFFF"}},scatter:{marker:{lineColor:"#FFFFFF"}},candlestick:{lineColor:"#FFFFFF",animation:{duration:2e3,easing:"easeOutBounce"}},pie:{allowPointSelect:!0,cursor:"pointer",borderColor:"rgba(250,250,250,0.3)",borderWidth:.5,dataLabels:{enabled:!0,connectorWidth:2,color:"#464646",style:{fontWeight:"bold"}}}},legend:{borderRadius:0,borderWidth:1,backgroundColor:"white",itemMarginTop:8,itemStyle:{color:"#464646",fontFamily:'"arial"',fontWeight:"bold",fontSize:"8pt "},itemHoverStyle:{color:"#00a1de"},itemHiddenStyle:{color:"#555"},title:{style:{color:"#464646",fontWeight:"bold",fontSize:"8pt",fontFamily:"arial"}}},credits:{enabled:!1,style:{color:"#666"}},labels:{style:{color:"#CCC"}},exporting:{buttons:{drillUp:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"},exportButton:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"},printButton:{symbolStroke:"#fff",symbolFill:"rgba(250,250,250,0.5)",hoverSymbolStroke:"#fff",hoverSymbolFill:"rgba(250,250,250,0.5)"}}},rangeSelector:{buttonTheme:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},stroke:"#000000",style:{color:"#CCC",fontWeight:"bold"},states:{hover:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#BBB"],[.6,"#888"]]},stroke:"#000000",style:{color:"white"}},select:{fill:{linearGradient:[0,0,0,20],stops:[[.1,"#000"],[.3,"#333"]]},stroke:"#000000",style:{color:"yellow"}}}},inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(16, 16, 16, 0.5)",series:{color:"#7798BF",lineColor:"#A6C7ED"}},scrollbar:{barBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},barBorderColor:"#CCC",buttonArrowColor:"#CCC",buttonBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},buttonBorderColor:"#CCC",rifleColor:"#FFF",trackBackgroundColor:{linearGradient:[0,0,0,10],stops:[[0,"#000"],[1,"#333"]]},trackBorderColor:"#666"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",legendBackgroundColorSolid:"rgb(35, 35, 70)",dataLabelsColor:"#444",textColor:"#C0C0C0",maskColor:"rgba(255,255,255,0.3)"},i=r.colors;r.orgChart={node:{textColor:"black ",borderColor:i[1],borderWidth:2,backgroundColor:"white ",fontWeight:"normal ",hover:{backgroundColor:i[3],textColor:"white "}},junction:{lineColor:i[3],lineWidth:2},dropMarker:{borderColor:i[1],borderWidth:0,backgroundColor:i[4],backgroundOpacity:1},tooltip:{backgroundColor:i[1],backgroundOpacity:1,borderWidth:2,borderRadius:0,borderColor:i[2],style:{color:"#fff",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}}},r.version=Highcharts.version.split(".").map(function(e){return parseInt(e,10)}),r.version[0]!==2&&r.version[0]===3&&(r.navigation={buttonOptions:{symbolStroke:"#DDDDDD",hoverSymbolStroke:"#FFFFFF",theme:{fill:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#606060"],[.6,"#333333"]]},stroke:"#000000"}}},delete r.exporting),t.theme=r}),define("syracuse-tablet/html/js/controls/chart/ctrlCubeChartBase",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/ctrlBase","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/controls/chart/ctrlCubeChartTheme","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function h(e,t){return!!(e&&e.$hierarchies&&t.$axes&&t.$axes.length>0&&t.$axes[0].$hierarchies&&t.$axes[0].$hierarchies.length>0)}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/ctrlBase").Klass,s=e("syracuse-tablet/html/js/helpers/formatApi"),o=e("syracuse-tablet/html/js/controls/chart/ctrlCubeChartTheme").theme,u=e("syracuse-tablet/html/js/helpers/locale"),a=Highcharts.merge,f=function(e){return $.extend({},e)};Highcharts.theme=o,Highcharts.setOptions(Highcharts.theme);var l=Highcharts.theme.colors,c=function(e){var t={xy:"line",point:"scatter",stick:"column",radar:"spiderweb"};return e&&(t[e]||e)},p=r.defineClass(function(e,t,n,r){var s=this;i.call(s,e,t,n,r),s.itemProto=n.getPrototype("$item")},i,{_mergeMetaData:function(e){var t={};return e&&e.$cube&&(t.$cube=e.$cube),e&&e.$axes&&(t.$axes=e.$axes),e&&e.$style&&(t.$style=e.$style),e&&e.$color&&(t.$color=e.$color),e&&e.$isLegendHidden&&(t.$isLegendHidden=e.$isLegendHidden),e&&e.$isXLabelHidden&&(t.$isXLabelHidden=e.$isXLabelHidden),e&&e.$isYLabelHidden&&(t.$isYLabelHidden=e.$isYLabelHidden),e&&e.$isXLabelsHidden&&(t.$isXLabelsHidden=e.$isXLabelsHidden),e&&e.$isYLabelsHidden&&(t.$isYLabelsHidden=e.$isYLabelsHidden),this.currentMetaData=a(this.currentMetaData||{},t),e&&e.$item&&e.$item.$properties&&this.currentMetaData&&this.currentMetaData.$cube&&this.currentMetaData.$cube.$measures&&$.smForEachKey(this.currentMetaData.$cube.$measures,function(t,n){e.$item.$properties[t]&&e.$item.$properties[t].$title?n.$title=e.$item.$properties[t].$title:n.$title=t}),this.currentMetaData},_settingsFromValue:function(){var e=this,t=this.currentMetaData.$cube,n=0,r;return t.$style==="spiderweb"?(r={},r.categories=Object.keys(e._meta.series).map(function(t){return e._meta.series[t].options.name}),r.series={},e.dataset&&e.dataset.reduce(function(t,r){var i={name:e._getMeasureLabel(r,e._meta.xAxis[0].code),color:l[n++],data:[],pointPlacement:"on"};return i.name&&(i.id="#s-"+i.name,$.smForEachKey(e._meta.series,function(t,n){n.isHidden||e._pushData(i,t,t,r)}),t.series[i.name]=i),t},r)):(r={categories:[],series:{}},e.dataset&&e.dataset.reduce(function(t,n){var r=e._getMeasureLabel(n,e._meta.xAxis[0].code);return r!=null&&(t.categories.push(r),$.smForEachKey(e._meta.series,function(i,s){var o=t.series[i];o||(o=f(s.options),o.data=[],t.series[i]=o),e._pushData(o,r,i,n)})),t},r)),r},_pushData:function(e,t,n,r){var i=parseFloat(r.$rawV&&r.$rawV[n]&&r.$rawV[n].v||r[n])||0;this.useLogarithmicAxis&&(this.maxValue=Math.max(this.maxValue||-Infinity,i),this.minValue=Math.min(this.maxValue||Infinity,i)),e.data.push([t,i])},_createChart:function(e){var t=this,n=a(t._getPref(),t._getOptions(t.$prototype));e?(n.xAxis[0].categories=e.categories,$.smForEachKey(e.series,function(e,r){var i=f(r),s=t._meta.series[e];n.chart.polar&&i&&i.type&&delete i.type,(!s||!s.isHidden)&&n.series.push(i)})):$.smForEachKey(t._meta.series,function(e,t){var r=f(t.options);n.chart.polar&&r&&r.type&&delete r.type,r.data=[0],t.isHidden||n.series.push(r)}),(!t.$prototype.$cube||t.$prototype.$cube.$style!="spiderweb")&&n.series.reverse(),this.useLogarithmicAxis&&(this.maxValue||0)/(this.minValue||1)>10&&(n.yAxis.type="logarithmic"),t._chart=new Highcharts.Chart(n);var r=this._chart.legend;t.displayLegend=r&&r.display;var i=t._chart.series,s,o;for(var u=i.length-1;u>=0;u--)s=i[u],o=s&&s.options.id&&t._meta.series[s.options.id.slice(3)],o&&o.measure&&(o.measure.$color=o.options.color=s.color)},_getOptions:function(e){var t=this,n=this.currentMetaData.$cube,r=Highcharts.getOptions(),i=r.exporting.buttons,s=this._getFieldEvalTitle(),o=e.$axes&&e.$axes[0]||{},u=o.$hierarchies&&s[o.$hierarchies[0][0]]||o.$title,a,f={chart:{renderTo:this.$$chartSlot.get(0),zoomType:"x",ignoreHiddenSeries:!1,width:50,height:50},lang:{showHideLegend:t._localize.highCharts_showHideLegend},legend:{layout:"vertical",align:"right",verticalAlign:"top",y:60,x:-10,title:{text:":::: "+t._localize.highCharts_seriesTitle},floating:!0,draggable:!0,zIndex:20,enabled:this.currentMetaData.$isLegendHidden!==!0},title:{text:n&&t._localizedText(n.$title)||"",margin:5},xAxis:[{categories:[],title:{text:t._localizedText(u),enabled:this.currentMetaData.$isXLabelHidden!==!0},labels:{rotation:-45,align:"right",enabled:this.currentMetaData.$isXLabelsHidden!==!0}}],yAxis:[{title:{text:"",enabled:this.currentMetaData.$isYLabelHidden!==!0},labels:{align:"right",enabled:this.currentMetaData.$isYLabelsHidden!==!0}}],plotOptions:{series:{cursor:"pointer",events:{},point:{events:{click:function(e){}}},stacking:t._meta.stacking,animation:!1}},tooltip:{formatter:function(){var e=t._meta.series,n=this.key&&e[this.key]||e[this.series.options.id.slice(3)],r=n&&n.measure,i=this.series.processedYData,s=this.y;r&&t._ensureFormatter(r);var o=this.series.name||r&&r.$title,u=r&&r.formatter;o=(o?o+"<br>":"")+(this.x||this.key)+": <b> "+(u?u.format(s):s)+"</b>";if(r&&r.$isNormalized&&i.length>0){var a=i.reduce(function(e,t){return e+t});o+=" ("+(u?u.formatValue(s/a*100):s/a*100)+"%)"}return o}},series:[]};if(Highcharts.theme.version[0]===3){f.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{symbol:"menu",enabled:!1,_titleKey:"contextButtonTitle",menuItems:[{textKey:"showHideLegend",onclick:function(){setTimeout(function(){t._toggleLegendDisplay()},100)}}]},legendButton:{enabled:!1,textKey:"showHideLegend",symbol:"menu",onclick:function(){setTimeout(function(){t._toggleLegendDisplay()},100)}}}};var l=f.exporting.buttons.contextButton.menuItems||[];this._printSupported()&&l.push({text:"Print chart",onclick:function(){this.print(t)}}),this._exportSupported()&&(l.push({separator:!0}),l.push({textKey:"downloadPNG",onclick:function(){this.exportChart()}}),l.push({textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}}),l.push({textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}}),l.push({textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}))}return f.xAxis[0].title.text!==f.title.text&&(f.xAxis[0].title.text=f.xAxis[0].title.text?f.xAxis[0].title.text:f.title.text),f.chart.type=t._meta.defaultStyle,f},_initializeMeta:function(){this._mergeMetaData(this.$prototype),this._mergeMetaData(this.article);var e=this.$prototype,t=this.currentMetaData;this._meta={xAxis:[{}],series:{},displaysOneMeasure:t&&t.$displaysOneMeasure,hasMeasureSelector:t&&t.$hasMeasureSelector,hasStyleSelector:t&&t.$hasStyleSelector,defaultStyle:c(t.$style)||"column",drill:{minLevel:1,maxLevel:0,currLevel:1,currAxisHier:0,levelsProperties:[],members:[],stack:[{$axes:e.$axes,$item:e.$item,$slicer:e.$slicer}]}},this.__processMeta(e,!0)},_exportSupported:function(){return!0},_printSupported:function(){return!0},__processMeta:function(e,t){this._processMeasures(e,t),this._processAxes(e,t)},_processMeasures:function(e,t){this._mergeMetaData(e);var n=this,r=this.$prototype.$properties,i=this._getRestraintMeasures(),s=0;i&&$.smForEachKey(i,function(i,o){var u=o.$property||i,f=a(r[u],o);e&&e.$item&&e.$item.$properties&&(f=a(f,e.$item.$properties[u]));if(!f.$title||f.$title==="")f.$title=i;var h=n._meta.series[u];t&&(n._ensureFormatter(f),h=n._meta.series[u]={options:{id:"#s-"+u,name:n._localizedText(f.$title)||String.fromCharCode(160)},measure:f}),h&&(h.isHidden=f.$title==="",h.options.type=c(f.$style),h.options.color=f.$color||l[s++],h.options.name=n._localizedText(f.$title)||String.fromCharCode(160),h.options.visible=f.$title!==""&&(!n._meta.displaysOneMeasure||!!f.$isDefault));if(f.$isStacked||f.$stackingGroup)h.options.stack=f.$stackingGroup||0,n._meta.stacking=f.$isNormalized?"percent":n._meta.stacking||"normal"})},_getRestraintMeasures:function(){var e=this.currentMetaData,t=e.$cube,n=t&&t.$measures,r=n;return n&&e.$axes&&e.$axes.length>1&&e.$axes[1].$members&&e.$axes[1].$members[0][0].length>0&&(r={},$.smForEach(e.$axes[1].$members[0][0],function(e){r[e]=n[e]})),r},_processAxes:function(e,t){var n=this.$prototype.$cube;if(!h(n,e))return!1;var r=this,i=0,s=e.$axes&&e.$axes[0],o=null;if(s){$.smForEachKey(s.$hierarchies,function(e,t){!o&&t.length>1&&t[1]==1&&(o=n.$hierarchies[t[0]].$properties,o&&(r._meta.xAxis[0].code=o[t.length>2?t[2]:0],i=e))}),!o&&s.$hierarchies[0].length>0&&(o=n.$hierarchies[s.$hierarchies[0][0]].$properties,o&&o.length>0&&(r._meta.xAxis[0].code=o[0]));var u;$.smForEach(s.$hierarchies,function(e){u=n.$hierarchies[e[0]].$properties,$.smForEach(u,function(e){this.levelsProperties[this.maxLevel++]=e},r._meta.drill)}),s.$members&&$.smForEach(s.$members,function(e){$.smForEach(e,function(e){e.length>0&&(this.members[this.currLevel++ -1]=e[0])},this)},r._meta.drill)}r._meta.drill.code=e.$codeStat||"UNKNOWN",r._meta.drill.axis0FieldCode=r._meta.xAxis[0].code||"",r._meta.drill.maxLevel=Math.max(r._meta.drill.maxLevel,r._meta.drill.minLevel)},_getPref:function(){return Highcharts.getOptions()},_getMeasureLabel:function(e,t){var n=this._localizedText(e.$title);if(n)return n;var r=this,i=r.$prototype.$properties[t];if(!i)return null;switch(i.$type){case"application/x-choice":n=e[t],i.$value.$enum.some(function(e,t,r){return e.$value===n?(n=this._localizedText(e.$title),!0):!1});break;case"application/x-date":i.formatter=s.getFormatter(i.$type,u.getDateFormat(i.$type)),n=i.formatter.formatValue(e[t]);break;case"application/x-integer":case"application/x-decimal":i.formatter=s.getFormatter(i.$type,u.getNumberFormat(i.$type)),n=i.formatter.formatValue(e[t]);break;default:n=""+e[t]}return n},_toggleLegendDisplay:function(){var e=this._chart.legend;e&&this._displayLegend(!e.display)},_displayLegend:function(e){var t=this._chart.legend;if(!t)return;e?(t.group.show(),t.box.show()):(t.group.hide(),t.box.hide()),this.displayLegend=t.display=e},destroy:function(){var e=this;i.prototype.destroy.call(e),this._chart&&this._chart.destroy(),this._chart=this._localize=this._meta=this.currentMetaData=null}});t.Klass=p}),define("syracuse-tablet/html/js/controls/chart/ctrlCubeChart",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/chart/ctrlCubeChartBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/formatApi","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/chart/ctrlCubeChartBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/helpers/formatApi"),u=e("syracuse-tablet/html/js/helpers/locale"),a=r.defineClass(function(t,n,r,s){var o=this;i.call(o,t,n,r,s),o.itemProto=r.getPrototype("$item")},i,{initReuseProperties:function(){i.prototype.initReuseProperties.call(this),this.$$chartSlot=null,this.dataset=null},buildHtml:function(e,t,n){var r=this;i.prototype.buildHtml.call(r,e,t,n,["s-m-chart"]),r.$$chartSlot=$(s.createDomElement("div",null,null,null,r.$$elmt)),r.$$chartSlot.hide(),r._buildChart()},_buildChart:function(){var e=this;e.$prototype=e.prototype.json,e.$prototype.$properties=e.$prototype.$item.$properties,e._localize={highCharts_showHideLegend:u.text("highCharts_showHideLegend"),highCharts_seriesTitle:u.text("highCharts_seriesTitle")},e._initializeMeta(),e.dataset=e.getDao().getQueryResources();var t=e._settingsFromValue();e._createChart(t)},_ensureFormatter:function(e){e.formatApi={format:function(e,t){return e}}},_localizedText:function(e){return e},_getFieldEvalTitle:function(){return[]},destroy:function(){var e=this;i.prototype.destroy.call(e),e.dataset=null},onResize:function(){this.$$chartSlot.show();var e=this.$$chartSlot.highcharts();e&&e.setSize(this.$$chartSlot.width(),this.$$chartSlot.height(),!1)}});t.Klass=a}),define("syracuse-tablet/html/js/controls/field/ctrlBinary",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/fontUtils"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o=e("syracuse-tablet/html/js/ui/uiUtils"),u=e("syracuse-tablet/html/js/helpers/locale"),a=100,f={header:"_onClearClick",section:"_onDocumentClick",footer:"_onUploadClick",a:"_onDocumentClick"},l=r.defineClass(function(t,n,r,i){var o=this;s.call(o,t,n,r,i),o.isImage=o.$type.indexOf("image")==0,o.cssType=o.isImage?"s-m-img":"s-m-binary"},s,{buildFieldValue:function(e,t){var n=this,r=n.getFormattedValue(n.getValue()),u=s.prototype.buildFieldValue.call(n,e,t),a=n.prototype.data("$url",n.getDao())||"";a+="?salt="+(new Date).getTime();var f=r==null||r===""||a.length===0;f&&$(u).addClass("s-m-empty");if(n.$isEditMode&&typeof FileReader!="undefined")n._buildEditBinaryField(u,a,f);else if(f)$(u).addClass(i.binaryIcon(n.cssType,"default"));else{var l=o.createDomElement("a",["img-responsive ctrl-evt-click"],null,{href:"#"},u);n.isImage?l=n._newImg(l,a):l=o.createDomElement("span",i.binaryIcon(n.cssType,"default"),null,null,l)}},_buildEditBinaryField:function(e,t,n){var r=this,s=$('				<div class="s-m-img-layout">					<header></header>					<section></section>					<footer></footer>				</div>'),a,f,l;a=o.createDomElement("a",["ctrl-evt-click"],null,{href:"#"},s.find("header")),a=o.createDomElement("span",i.getIconByName("close"),null,null,a),$(a).toggle(!n),l=o.createDomElement("a",["img-responsive","s-m-field-"+(r.isImage?"img":"bin"),"ctrl-evt-click"],null,{href:"#"},s.find("section")),r.isImage?(f=o.createDomElement("a",["ctrl-evt-click"],u.text("image.label."+(n?"addimage":"changeimage")),{href:"#"},s.find("footer")),n?l=o.createDomElement("span",[i.binaryIcon(r.cssType,"default")+" s-m-empty","img-responsive"],null,null,l):l=r._newImg(l,t)):(l=o.createDomElement("span",[i.binaryIcon(r.cssType,"default"),n?"s-m-empty":"","s-m-doc"],null,null,l),s.find("footer").css("display","none")),e.appendChild(s[0]);if(r.isImage)var c=o.createDomElement("input",["ctrl-evt-change"],null,{type:"file",accept:"image/*"},e)},onClick:function(e){var t=this,n=e.target.nodeName.toLowerCase()==="span"?e.target.parentNode:e.target,r;!t.$isEditMode&&n.nodeName.toLowerCase()==="a"?r=n:r=n.parentNode,t[f[r.nodeName.toLowerCase()]](e,n)},_onClearClick:function(e,t){var n=this,r=t,s=n.$$elmt.find(".s-m-img-layout > section > a")[0];o.empty(s),s=o.createDomElement("span",[i.binaryIcon(n.cssType,"default"),"s-m-empty"],null,null,s),n.setValue(null),$(r).toggle(),n.isImage&&n.$$elmt.find(".s-m-img-layout > footer > a").text(u.text("image.label.addimage"))},_onDocumentClick:function(e,t){var n=this,r=n.getFormattedValue(n.getValue()),i=n.prototype.data("$url",n.getDao())||"",s=r==null||r===""||i.length===0;n.isImage?s&&n._onUploadClick(e,t):s||window.open(i,"_blank")},_onUploadClick:function(e,t){var n=this,r=n.$$elmt.find(".s-m-value > input");r.trigger("click")},onChange:function(e){var t=this;if(e.target.nodeName.toLowerCase()==="input"){var n=e.target.files,r={};if(n&&n.length){var i=n[0];if(!i.type.match("image.*"))return;r.$contentType=i.type,r.$fileName=i.name,r.$type="image";var s=new FileReader;s.onload=function(e,n){return function(e){var r=e.target.result.indexOf("base64,");r>0?n.$value=e.target.result.substring(r+7):n.$value=e.target.result,delete n.$url,t.setValue(n.$value),t._setImage(e.target.result)}}(i,r),s.readAsDataURL(i)}}},_setImage:function(e){var t=this,n=t.$$elmt.find(".s-m-img-layout > section > a")[0];o.empty(n),n=t._newImg(n,e),t.$$elmt.find(".s-m-img-layout > footer > a").text(u.text("image.label.changeimage")),t.$$elmt.find(".s-m-img-layout > header > a").toggle(!0)},_newImg:function(e,t){var n=$(o.createDomElement("img",["img-responsive"],null,{src:t},e)),r=Math.max(0,parseInt(this.getAuthoring("$height")||a,10));return n.height(r),n.get(0)}});t.Klass=l}),define("syracuse-tablet/html/js/helpers/html-escape/lib/escape",["require","exports","module"],function(e,t,n){function r(e){return e=e||{},e.allowedTags=(e.allowedTags||[]).concat(["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","pre","table","thead","caption","tbody","tr","th","td","pre"]),e.allowedAttributes=(e.allowedAttributes||[]).concat(["class","href","src","name","target"]),e.allowedSchemes=(e.allowedSchemes||[]).concat(["http","https","mailto"]),e}function i(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function s(e){return e.replace(/>/g,"&gt;")}function o(e){return e.replace(/-->/g,"__>")}function u(e){return e.replace(/\/\*.*?\*\//g,"").replace(/(\\|\b)(j\\?a\\?v\\?a\\?s\\?c\\?r\\?i\\?p\\?t|e\\?x\\?p\\?r\\?e\\?s\\?s\\?i\\?o\\?n|u\\?r\\?l)\b/ig,"disabled-$1$2")}function a(e){return e.replace(/javascript/i,"disabled-javascript")}t.escaper=function(e){function p(e,t,n){return h&&t!==e&&h(n+": "+e+" -> "+t),t}function d(e,t){return e==="style"?p(t,u(t),"sanitized style"):e==="type"?p(t,a(t),"sanitized type attribute"):t}function v(){function i(t,n,i){var u=t.indexOf(n);return u>=0?(c&&(e+=o(t.substring(0,u))+i+"-->"),e+=s(t.substring(u+n.length)),r="text"):c&&(e+=o(t)),e}function u(t,n,i){var u=new RegExp("^/"+n+">","i"),a=u.exec(t);return a?(i?e+="</"+n+">":c&&(e+="</"+n+">-->"),e+=s(t.substring(a[0].length)),r="text"):i?e+=d(n,"<"+t):c&&(e+=o("<"+t)),e}function a(t,n){return n&&n("malformed element: "+t),c&&(e+="<!--<"+o(t)+"-->"),e}function p(e,t){if(l.test(e)){var n=t.indexOf(":");if(n<0||!f[t.substring(0,n)])return!1}return!0}function v(t,r,i,s){if(r){e+="</"+t+">",i=i.trim(),c&&i&&(e+="<!--@"+o(i)+"-->");return}e+="<"+t;var u=0,a=/^\s*(\w+)(?:\s*=\s*(?:(["'])(.*?)\2|()([\w_-]+)))?/,f;while(f=a.exec(i)){i=i.substring(f[0].length);var l=f[1].toLowerCase(),v=f[2]||'"',m=f[3]||f[5];if(!n[l]||!p(l,m)){h&&h("forbidden attribute: "+l);if(!c)continue;l="disabled-"+l}e+=" "+l+(m===undefined?"":"="+v+d(l,m)+v)}s?e+="/>":e+=">",i=i.trim(),h&&i&&h("malformed attribute: "+i),c&&i&&(e+="<!--@"+o(i)+"-->")}var e="",r="text";return function(n){e="";if(r==="comment")return i("<"+n,"-->","");if(r==="cdata")return i("<"+n,"]]>","]]");if(r==="script")return u(n,"script");if(r==="style")return u(n,"style",t.style);if(/^!--/.test(n))return r="comment",c&&(e+="<!-- "),i(n.substring(3),"-->","");if(/^!\[CDATA\[/.test(n))return r="cdata",h&&h("forbidden CDATA"),c&&(e+="<!--"),i(n.substring(1),"]]>","]]");if(/^script\b/i.test(n))return r="script",h&&h("forbidden *** SCRIPT *** element"),c&&(e+="<!--"),u(n,"script");if(/^style\b/i.test(n))return r="style",!t.style&&h&&h("forbidden STYLE element"),c&&!t.style&&(e+="<!--"),u(n,"style",t.style);var o=n.indexOf(">");if(o<0)return a(n,h);var f=/^(\/?)(\w+)/.exec(n);if(!f)return a(n,h);var l=f[2].toLowerCase();if(!t[l])h&&!f[1]&&h("forbidden "+l.toUpperCase()+" element"),c&&a(n.substring(0,o+1)),s(n.substring(0,o+1));else{var p=n[o-1]==="/";v(l,f[1],n.substring(f[1].length+l.length,p?o-1:o),p)}return e+=s(n.substring(o+1)),e}}e=r(e);var t=i(e.allowedTags),n=i(e.allowedAttributes),f=i(e.allowedSchemes),l=/^(href|src|dynsrc|lowsrc|background)$/i,c=e.preserve,h=e.warn;return e.streaming?function(){var e;return function(t){if(t.indexOf("<")>=0)throw new Error("internal error: bad HTML fragment");return e?e(t):(e=v(),s(t))}}():function(e){var t=v(),n=e.split("<"),r=s(n[0]);return n.slice(1).reduce(function(e,n){return e+t(n)},r)}}}),define("syracuse-tablet/html/js/helpers/html-escape/lib/unescape",["require","exports","module"],function(e,t,n){t.unescaper=function(e){function t(e){return e.replace(/__>/g,"-->")}function n(e){return e.replace(/disabled-(\w+=?)/g,"$1").replace(/(.?)<!--(.*?)-->/g,function(e,n,r){if(r[0]===" ")return n+"<!--"+r.substring(1)+"-->";if(r[0]==="[")return n+"<!"+t(r)+">";if(r[0]==="<")return n+t(r);if(r[0]==="@")return t(r.substring(1))+n;throw new Error("cannot unescape: "+r)})}e=e||{};if(e.streaming){var r="";return function(e){if(e===undefined)return n(r);var t=Math.max(0,r.length-2);r+=e;var i=r.indexOf("-->",t);if(i<0)return"";var s=n(r.substring(0,i+3));return r=r.substring(i+3),s}}return n}}),define("syracuse-tablet/html/js/helpers/html-escape/index",["require","exports","module","./lib/escape","./lib/unescape"],function(e,t,n){t.escaper=e("./lib/escape").escaper,t.unescaper=e("./lib/unescape").unescaper}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/rtfparse",["require","exports","module"],function(e,t,n){function p(e){var t=[],n=[t];return{open:function(){var e=[];t.push(e),n.push(e),t=e},close:function(){n.length<=1&&e("too many }"),t=n.pop(),t=n[n.length-1]},text:function(e){t.push(e)},control:function(e,n){var r={word:e};n!=null&&(r.arg=n),t.push(r)},getResult:function(){return n.length!==1&&e("missing }"),n[0][0]}}}var r={},i={},s="\n".charCodeAt(0),o=" ".charCodeAt(0),u="\\".charCodeAt(0),a="{".charCodeAt(0),f="}".charCodeAt(0),l="-".charCodeAt(0),c="'".charCodeAt(0),h="*".charCodeAt(0);(function(){function e(e,t,n){t.split("").forEach(function(t){e[t.charCodeAt(0)+(n||0)]=!0})}for(var t=0;t<=9;t++)e(i,"0",t);for(var t=0;t<26;t++)e(r,"a",t)})(),t.parse=function(e){function g(n){var r=e.indexOf(/[\n>]/,t);return r<0&&(r=e.length),new Error("Invalid RTF: "+n+" at line "+v+" near "+e.substring(t,r))}function y(){t>n&&m.text(e.substring(n,t))}e=e.replace(/\r\n/g,"\n");var t=0,n=0,d=e.length,v=1,m=p(g);while(t<d){var b=e.charCodeAt(t);switch(b){case u:y();var w=++t;while(r[b=e.charCodeAt(t)])t++;if(t>w){var E=e.substring(w,t),S=undefined;if(b===l||i[b]){w=t,t++;while(i[b=e.charCodeAt(t)])t++;S=parseInt(e.substring(w,t),10)}(b===o||b===s||E==="u"&&b!==u&&b!==a&&b!==f)&&t++,m.control(E,S)}else if(b===c){var x=String.fromCharCode(parseInt(e.substring(t+1,t+3),16));m.text(x),t+=3}else b===h&&(m.control("*"),t++);n=t;break;case a:y(),m.open(),n=++t;break;case f:y(),m.close(),n=++t;break;case s:y(),v++,n=++t;break;default:t++}}return y(),m.getResult()}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/rtfinterpret",["require","exports","module"],function(e,t,n){t.interpret=function(e){function s(e,t,r){var i=e[0].word+e[0].arg,s=n.fonts[i]={};for(var u=1;u<e.length;u++)o(e[u],s)}function o(e,t){var n;typeof e=="string"&&(n=e.indexOf(";"))>0&&(t.name=e.substring(0,n))}function u(e,t,r){var i,s;if(e[0].word){i=e[0].word+e[0].arg,s=n.styles[i]={};for(var o=1;o<e.length;o++)a(e[o],s)}}function a(e,t){var n;typeof e=="string"&&(n=e.indexOf(";"))>0&&(t.name=e.substring(0,n))}function f(e,t,r){switch(e.word){case"rtf":case"ansi":case"ansicpg":break;case"stylesheet":t.slice(1).filter(function(e){return Array.isArray(e)}).forEach(u);break;case"deff":n.deffont="f"+e.arg;break;case"fonttbl":t.slice(1).filter(function(e){return Array.isArray(e)}).forEach(s);break;case"colortbl":var o=1;t[o]===";"&&(n.colors.push([0,0,0]),o++);while(o<t.length)n.colors.push([t[o].arg,t[o+1].arg,t[o+2].arg]),o+=4;break;case"*":i.indexOf(t[r+1].word)==-1&&t.splice(r,t.length-r)}}function l(e,t,n){Array.isArray(e)?e.forEach(l):typeof e=="object"&&f(e,n,t)}var t,n={deffont:"",fonts:{},colors:[],styles:{}},r={fnil:"Sans-serif",froman:"Sans-serif",fswiss:"Serif",fmodern:"Monospace",fscript:"Cursive",fdecor:"Cursive"},i=["rtf","ansi","ansicpg","deff","fonttbl","colortbl","stylesheet","fs","f","cf","highlight","i","b","ul","strike","plain","qc","ql","qr","qj","par","pard","pn"];return l(e),n}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/buildhtml",["require","exports","module"],function(e,t,n){function i(e){return e?s(e[0])+s(e[1])+s(e[2]):"000000"}function s(e){return("00"+e.toString(16)).slice(-2)}function o(e){return e/20}function u(e){return e/600}function a(e){return e/420}function f(e){return e/15}function l(e){function m(){return h=d=$("<div>").addClass("s-rtf-worker").addClass("s-rtf-clean"),d.appendTo(p)}function g(){return p=$("<div>").addClass("s-rtf-section").addClass("s-rtf-clean"),m(),p.appendTo(c)}function y(e){switch(e.word){case"f":var n=t[e.word+e.arg].name;return $("<font face='"+n+"'>");case"fs":return $("<span style='font-size: "+e.arg/2+"pt;'>");case"tab":return $("<blockquote>");case"cf":case"highlight":return $("<span style='"+r[e.word]+": #"+i(s[e.arg])+";'>");case"b":return $("<b>");case"i":return $("<i>");case"ul":return $("<u>");case"strike":return $("<s>");default:}}function b(e,t){e.addClass("s-rtf-format"),w();switch(t.word){case"ql":return e.attr("align","left");case"qc":return e.attr("align","center");case"qr":return e.attr("align","right");case"qj":return e.attr("align","justify");case"li":return t.arg>0?e.css("margin-left",o(t.arg)+"pt"):e;case"ri":return t.arg>0?e.css("margin-right",o(t.arg)+"pt"):e;default:return e}}function w(){d&&d.removeClass("s-rtf-clean"),p&&p.removeClass("s-rtf-clean")}function E(e){w(),h.append(e)}function S(e){w(),h=e.appendTo(h)}var t=e.fonts,n=e.deffont,s=e.colors,f=e.styles,l="",c=$("<div>").addClass("s-rtf-root"),h=null,p=null,d=null,v;return g(),v=function(){function n(){var t,n={};return e.forEach(function(e){t=e.format,Object.keys(t).forEach(function(e){typeof n[e]=="undefined"&&(n[e]=t[e])})}),n}var e=[{format:{}}],t=e[0];return{open:function(){e.push(t={format:{}})},close:function(n,r){e.pop(),t=e[e.length-1],n<r.length-1&&(this.pending=!0)},update:function(e,n){n===null?delete t.format[e]:t.format[e]=n},startOver:function(){if(!this.pending)return;var e=n();Object.keys(e).forEach(function(t){h=e[t].clone().appendTo(h)}),this.pending=!1}}}(),{text:function(e){w(),v&&v.startOver();var t=h.html();h.html(t+e)},open:function(){v.open()},close:function(e,t){h=d,h.length===0&&(h=c),v.close(e,t)},control:function(e){switch(e.word){case"par":w(),d.removeClass("s-rtf-worker").addClass("s-rtf-paragraph"),h=d=m(),v&&(v.pending=!0);break;case"pard":p.hasClass("s-rtf-clean")||(p=g(),v&&(v.pending=!0));break;case"pn":p.addClass("s-rtf-list");break;case"u":this.unicodechar(e.arg);break;case"qc":case"ql":case"qr":case"qj":case"ri":b(p,e);break;case"li":p.hasClass("s-rtf-list")?p.attr("indent",a(e.arg)):(!p.hasClass("s-rtf-clean")&&!p.hasClass("s-rtf-format")&&(p=g(),v&&(v.pending=!0)),p.addClass("s-rtf-left-indent"),p.attr("indent",u(e.arg)));break;case"lquote":case"rquote":this.text("'");break;case"line":E("<br>");break;case"bullet":break;case"i":case"b":case"strike":case"ulnone":case"ul":if(e.arg===0||e.word==="ulnone"){var t;e.word==="strike"?t="s":e.word==="ulnone"?t="u":t=e.word;if(h.is(t))h=h.parent();else if(h.html()!==""){var n=h.closest(t);h=n.parent()}v.update(e.word,null);break};default:var r=y(e);r&&(v.update(e.word,r.clone()),!v.pending&&S(r))}},unicodechar:function(e){w();var t=h.html();h.html(t+String.fromCharCode(e))},getHtml:function(){c.find(".s-rtf-clean").remove();var e=c.find(".s-rtf-section.s-rtf-list");e.map(function(e,t){var n=$(t),e=parseInt(n.attr("indent"),10),r=[];while(r.length<e)r.push("<ul>");n.wrap(r.join("")).contents()});var t=e.find(".s-rtf-paragraph");t.wrap("<li>").contents().unwrap();var n=c.find(".s-rtf-section.s-rtf-left-indent").removeClass("s-rtf-left-indent");n.map(function(e,t){var n=$(t),e=parseInt(n.attr("indent"),10),r=[];while(r.length<e)r.push("<blockquote>");n.wrap(r.join("")).contents(),n.removeAttr("indent")}),e=c.find(".s-rtf-section"),e.find(".s-rtf-paragraph").removeAttr("class").wrap("<p>").contents().unwrap(),e.find("div:empty").remove(),e.find(".s-rtf-worker:empty").remove(),e.filter(":not(.s-rtf-format)").contents().unwrap();while(c.find("span:empty").length)c.find("span:empty").remove();return c.find(".s-rtf-worker").removeAttr("class").contents().unwrap(),c.find(".s-rtf-format").removeAttr("class"),c.html()}}}var r={cf:"color",highlight:"background-color"};t.buildHtml=function(e,t){function r(e,t,i){if(typeof e=="string"){n.text(e);return}if(Array.isArray(e)&&e.length>0){if(e[0])switch(e[0].word){case"fonttbl":case"colortbl":case"stylesheet":case"pntxtb":case"pntext":case"pict":return}n.open(),e.forEach(r),n.close(t,i);return}typeof e=="object"&&n.control(e)}var n=l(t);return r(e,0,[]),e?n.getHtml():"<div></div>"}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/buildrtf",["require","exports","module"],function(e,t,n){function i(e){return r[e.toLowerCase()]}function s(){return{open:function(e){this[e]||(this[e]={},this[e].current=0),this[e].current++,this[e].pending=!0,this[e].value&&this[e].value[this[e].current-1]&&this[e].value.pop()},close:function(e){this[e].current--,this[e].current?this[e].pending=!0:this[e].pending=!1},current:function(e){return this[e]?this[e].current:0},pending:function(e,t){return t!==undefined&&(this[e]||(this[e]={}),this[e].pending=t),this[e]?this[e].pending:!1},value:function(e,t){return this[e]?(t!==undefined&&(t=parseInt(t,10),this[e].value===undefined&&(this[e].value=[]),this[e].value.push(this[e].current-1?this[e].value[this[e].current-2]+t:t)),this[e]&&this[e].value?this[e].value[this[e].current-1]:0):0},nl:!1,par:!1,ulindent:0}}function o(e){function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){if(e==null)return!0;for(var t in e)if(u(e,t))return!1;return!0}function f(e){e=e.toLowerCase();switch(e){case"p":return"\\par";case"b":return"\\b";case"i":return"\\i";case"u":return"\\ul";case"s":return"\\strike";case"br":return"\\par";case"blockquote":return"";default:return""}}var t=e.fonts,n=e.colors,r="",i=!1,o=s();return a(t)||(r+="{\\fonttbl",Object.keys(t).forEach(function(e){r+="{\\"+e+" "+t[e].name+";}"}),r+="}"),n.length>1&&(r+="{\\colortbl",n.forEach(function(e){e[0]===0&&e[1]===0&&e[2]===0?r+=";":r+="\\red"+e[0]+"\\green"+e[1]+"\\blue"+e[2]+";"}),r+="}"),r+="\\uc0\\pard",{open:function(){r+="{",i=!1},text:function(e){var t=0,n=t,s;while(t<e.length){while(e.charCodeAt(t)<=128&&e.charCodeAt(t)!=10)t++;t>n?r+=(i?" ":"")+e.substring(n,t):e.charCodeAt(t)==10&&(r+=i?" ":""),i=!1,t<e.length&&(s=e.charCodeAt(t),s===160||s===10?r+=" ":this.controlarg("u",e.charCodeAt(t)),t++),n=t}},fragment:function(e){r+=e,i=!1},font:function(e){e!==""&&(r+="\\"+e,i=!0)},controlarg:function(e,t){r+="\\"+e+t,i=!0},control:function(e){o.par=e=="par",r+="\\"+e,i=!0},htmltag:function(e){var t=f(e);t&&(o.par=t=="\\par"),r+=t,i=!0},star:function(){r+="\\*",i=!1},close:function(){o.par||(r+="\\par"),r="{\\rtf1\\ansi"+r+"}",i=!1},getRtf:function(){return r},context:o}}var r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",window:"#ffffff",windowframe:"#000000",windowtext:"#000000"},u={"margin-left":"li","margin-right":"ri","margin-top":"sb","margin-bottom":"sa"},a=function(e,t){var n={pt:20,px:15,mm:56.7,cm:567,"in":1440.18};return function(e,t){return t*(n[e]||n.px)}}();t.buildRtf=function(e){function h(e,t){if(!t)return-1;for(var n=0;n<e.length;n++)if(e[n][0]==t[0]&&e[n][1]==t[1]&&e[n][2]==t[2])return n;return-1}function p(e){return $(e).is("div[style]")?$(e).attr("style").search("margin-left")>-1:!1}function d(e){c.indexOf(e)<0&&c.push(e)}function v(e){var n=t.fonts,r=Object.keys(n);for(var i=0;i<r.length;i++)if(n[r[i]].name===e)return r[i];return""}function m(e){return $(e).is("ul")||$(e).is("li")||e.childElementCount>0&&e.firstChild.nodeName==="UL"}function g(e,n){var i,s,o;f.context.pending("blockquote")&&!f.context.current("list")&&!$(e).is("blockquote")&&!$(e).is("div")&&!f.context.current("list")&&!m(e)&&(f.control("li"+f.context.current("blockquote")*600),f.context.pending("blockquote",!1));if(e.nodeType===3)f.text(e.nodeValue),f.context.par=!1,e.nextSibling&&$(e.nextSibling).is("blockquote")&&f.control("par");else if($(e).is("*[style]")&&!$(e).is("blockquote")){var l=$(e).attr("style").split(";"),c=!($(e).attr("style").search("text-align")>-1&&$(e).attr("style").search("margin-left")>-1),p=null;e.nodeName=="B"&&f.htmltag(e.nodeName),l.forEach(function(n){var l=n.split(":");l[0]!=null&&(l[0]=l[0].replace(/^\s*/,"").replace(/\s*$/,"")),l[1]!=null&&(l[1]=l[1].replace(/^\s*/,"").replace(/\s*$/,""));switch(l[0]){case"color":l[1].substring(0,3)==="rgb"?(i=N(l[1]),s=h(t.colors,i)):s=b(l[1]),o="cf",f.controlarg(o,s);break;case"background-color":l[1].substring(0,3)==="rgb"?(i=N(l[1]),s=h(t.colors,i)):s=b(l[1]),o="highlight",f.controlarg(o,s);break;case"text-decoration":l[1]==="underline"?f.control("ul"):l[1]==="line-through"&&f.control("strike");break;case"font-style":l[1]==="italic"&&f.control("i");break;case"font-weight":l[1]==="bold"&&f.control("b");break;case"font-size":var d=$(e).attr("style"),v=/([0-9\.\-]+)([A-Za-z]*)/g.exec(l[1]),m=v[2]&&v[2].toLowerCase();if(m!="em"){var g=parseFloat(l[1]),y=Math.round(g*2);f.controlarg("fs",y),f.context.fs=!0}break;case"margin-left":var v=/([0-9\.\-]+)([A-Za-z]*)/g.exec(l[1]),m=v[2]&&v[2].toLowerCase()||"px",w=parseInt(v[1],10);if($(e).is("ul"))f.context.ulindent=w/40,f.context.open("list");else if($(e).is("div")||$(e).is("p"))f.context.open("lindent"),f.context.value("lindent",w),f.controlarg(u[l[0]],a(m,f.context.value("lindent"))),p&&f.control(r[p]);c&&($(e).contents().each(C),e.nodeName==="P"?(f.context.close("lindent"),f.control("par")):e.nodeName==="DIV"&&f.context.close("lindent"),f.context.current("lindent")?f.controlarg(u[l[0]],a(m,f.context.value("lindent"))):f.control("pard")),c=!0;break;case"margin-right":case"margin-top":case"margin-bottom":var v=/([0-9\.\-]+)([A-Za-z]*)/g.exec(l[1]),m=v[2]&&v[2].toLowerCase()||"px",w=parseInt(v[1],10);f.controlarg(u[l[0]],a(m,w)),$(e).contents().each(C),e.nodeName==="P"&&f.control("par"),f.control("pard");break;case"margin":$(e).contents().each(C),e.nodeName==="P"&&f.control("par");break;case"text-align":if(c){f.control("pard");var E=l[1];f.control(r[E]),$(e).contents().each(C),f.control("par"),f.control("pard")}else p=l[1];c=!0}})}else if($(e).is("font")){if($(e).is("font[face]")){var d=$(e).attr("face");f.font(v(d))}$(e).is("font[color]")&&(s=b($(e).attr("color")),o="cf",f.controlarg(o,s)),$(e).is("font[bgcolor]")&&(s=b($(e).attr("bgcolor")),o="highlight",f.controlarg(o,s)),$(e).is("font[size]")&&(s=w($(e).attr("size")),f.controlarg("fs",s))}else if($(e).is("div[align]")){var g=$(e).attr("align");f.control("pard"),f.control(r[g]),$(e).contents().each(C),e.childElementCount>0&&e.firstChild.nodeName==="P"||f.control("par"),f.control("pard")}else if(e.nodeName==="UL")f.control("pard"),f.context.open("list");else if(e.nodeName==="LI"){f.fragment("{\\pntext"),f.font(v("Symbol")),f.fragment("\\'B7\\tab}");if(f.context.pending("list")){var y=f.context.current("list")+f.context.current("blockquote")+f.context.ulindent;y+=f.context.current("lindent"),f.fragment("{\\*\\pn\\pnlvlblt\\pnf1\\pnindent0{\\pntxtb\\'B7}}\\f0\\li"+y*420),f.context.ulindent=0,f.context.pending("list",!1)}}else e.nodeName==="P"?f.control("par"):f.htmltag(e.nodeName)}function y(e){var t=/#(..)(..)(..)/.exec(e)||/#(..)(..)(..)/.exec(i(e));return t&&t.slice(1).map(function(e){return parseInt(e,16)})}function b(e){var n=y(e),r=h(t.colors,n);return r==-1?-1:r}function w(e){return e=parseInt(e,10),e<0||e>7?0:[0,18,20,24,28,36,48,72][e]}function E(e){if(!e)return;e.each(C)}function S(e,n){e.each(function(e,r){var i=$(r).attr(n),s=y(i);s&&h(t.colors,s)==-1&&t.colors.push(s)})}function x(e){var n,r;e.each(function(e,i){var s=$(i).attr("style"),o=s&&s.replace(/[\n\r]*\s*/g,"").split(";"),u=o&&o.filter(function(e){var t=e.split(":");return t[0]=t[0].replace(/^\s*/,"").replace(/\s*$/,""),["color","background-color","background"].indexOf(t[0])!=-1}),a=u&&u[0]&&u[0].split(":");a&&a[1]&&(a[1]=a[1].replace(/^\s*/,"").replace(/\s*$/,""),a[1].substring(0,3)==="rgb"?(n=N(a[1]),r=h(t.colors,n)):(r=b(a[1]),n=y(a[1])),r==-1&&n&&t.colors.push(n))})}function T(){var e=l.find("font[face]"),t=l.find("font[color]"),n=l.find("font[bgcolor]"),r=l.find('*[style*="background-color"]'),i=l.find('*[style*="color"]');d("MS Sans Serif"),e.each(function(e,t){d($(t).attr("face"))}),l.find("ul").length>0&&d("Symbol"),S(t,"color"),S(n,"bgcolor"),x(r),x(i)}function N(e){var t=/\s*rgb\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\);*/.exec(e);return t?t.slice(1).map(function(e){return parseInt(e,10)}):[]}function C(e,t){var n=$(t),i;if(n.is("blockquote"))f.context.open("blockquote");else if(n.is("div[align]")||n.is("*[style*=text-align]")||n.is("*[style*=margin]")){g(t,e),t.nodeName==="UL"&&f.control("pard");return}var s,o,u=t.nextSibling,l=t.nodeName==="P"&&t.childElementCount===1&&t.firstChild.nodeName==="BR";i=n.contents(),!n.is("blockquote")&&u&&u.nodeName==="DIV"&&!p(t)&&!p(u)?(!(u.childElementCount>0)||u.firstChild.nodeName!=="BR"&&u.firstChild.nodeName!=="P")&&!l&&(o=!0):i.length>0&&u&&!n.is("ul")&&!n.is("li")&&!n.is("blockquote")&&!n.is("p")&&(s=!0,f.fragment("{"));if(n.is("p[align]")){var c=n.attr("align");f.control("pard"),f.control(r[c])}n.is("p")||g(t,e),i.each(C),t.nodeName==="P"&&!o&&!l&&g(t,e),(t.nodeName==="B"||n.is("*[style*=font-weight]"))&&f.control("b0"),(t.nodeName==="U"||n.is("*[style*=text-decoration]"))&&f.control("ul0"),n.is("*[style*=font-size]")&&f.context.fs&&(f.context.fs=!1,s||f.control("fs16")),(t.nodeName==="I"||n.is("*[style*=font-style]"))&&f.control("i0"),n.is("*[style*=color]")&&!n.is("*[style*=background-color]")&&!s&&f.control("cf0"),t.nodeName==="UL"?(f.context.close("list"),f.control("pard"),f.context.par=!0,f.context.current("blockquote")&&f.context.pending("blockquote",!0),f.context.current("lindent")&&t.nextSibling&&t.nextSibling.nodeType===3&&f.control("li"+a("px",f.context.value("lindent")))):n.is("li")&&f.control("par"),s&&f.fragment("}"),n.is("blockquote")&&f.context.current("blockquote")&&(f.context.pending("blockquote")?(f.context.close("blockquote"),!f.context.current("blockquote")&&u&&!$(u).html()&&(f.context.nl=!0)):(f.context.par||f.control("par"),f.control("pard"),f.context.close("blockquote")));if(o||f.context.nl)f.context.nl=!1,f.control("par")}function k(){var e;for(var n=0;n<c.length;n++)e="f"+n,t.fonts[e]={name:c[n]}}var t={};t.deffont="",t.fonts={},t.colors=[],t.styles={};var n={fnil:"Sans-serif",froman:"Sans-serif",fswiss:"Serif",fmodern:"Monospace",fscript:"Cursive",fdecor:"Cursive"},r={left:"ql",center:"qc",right:"qr",justify:"qj"},s=[{pt:6,px:7},{pt:7,px:9},{pt:40,px:50}],f,l=$("<div>").append(e),c=[];t.colors.push([0,0,0]),T(),k(),f=o(t),E(l),f.close();var L=f.getRtf();return L}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/lib/index",["require","exports","module","./rtfparse","./rtfinterpret","./buildhtml","./buildrtf"],function(e,t,n){var r=e("./rtfparse"),i=e("./rtfinterpret"),s=e("./buildhtml"),o=e("./buildrtf");n.exports={toHtml:function(e,t){e=e||"";var n=r.parse(e),o=i.interpret(n);return s.buildHtml(n,o)},fromHtml:function(e,t){return o.buildRtf(e)}}}),define("syracuse-tablet/html/js/helpers/syracuse-rtf/index",["require","exports","module","./lib/index"],function(e,t,n){n.exports=e("./lib/index")}),define("syracuse-tablet/html/js/controls/field/ctrlText",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/helpers/html-escape/index","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/helpers/syracuse-rtf/index"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,s=e("syracuse-tablet/html/js/ui/uiUtils"),o=e("syracuse-tablet/html/js/helpers/locale"),u=e("syracuse-tablet/html/js/helpers/html-escape/index").escaper({warn:console.warn.bind(console),allowedAttributes:["style"],allowedTags:["span"]}),a=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax,f=e("syracuse-tablet/html/js/helpers/syracuse-rtf/index"),l=150,c,h={expander:'		<button type="button" class="btn" data-action="toggleText" data-control-id="{{ctrlId}}>{{label}}</button>'},p=r.defineClass(function(t,n,r,s){var o=this;n&&!n.$labelPosition&&(n.$labelPosition="top"),i.call(o,t,n,r,s),o.cssType="s-m-clob"},i,{buildFieldValue:function(e,t){var n=this,r=n.getFormattedValue(n.getValue()),o=i.prototype.buildFieldValue.call(n,e,t),u=$(s.createDomElement("div",["s-m-enriched-text"],null,null,o)),f=c=parseInt(n.getAuthoring("$height",l),10);u.css({height:f+"px"});var h=n.prototype.data("$url",n.getDao())||"";a("GET",h,null,null,{noJsonParsing:!0}).then(function(e){var t=e.responseText||"";if(!t||t===""){u.remove();return}var r=[];switch(n.$type){case"text/plain":n.buildFieldFromPlain(t,u);break;case"text/html":n.buildFieldFromHtml(t,u);break;case"text/rtf":n.buildFieldFromRtf(t,u)}n.appendExpander(u)}).fail(function(e){n.insertError(e.message),n.log(e)})},appendExpander:function(e){var t=this;if(e.get(0).scrollHeight>l&&e.get(0).scrollHeight-l>5){var n='<button type="button" class="btn" data-action="toggleText"				data-control-id="'+t.id+'"				data-params="more">'+o.text("field.text.seemore")+"</button>",r=t.$$expander=$(n);r.insertAfter(e)}},_actToggleText:function(e){var t=this;e==="more"?(t.$$elmt.find(".s-m-enriched-text").css({height:"auto"}),t.$$expander.text(o.text("field.text.seeless")),t.$$expander.attr("data-params","less")):(t.$$elmt.find(".s-m-enriched-text").css({height:(c||l)+"px"}),t.$$expander.text(o.text("field.text.seemore")),t.$$expander.attr("data-params","more"))},insertError:function(e){var t=['<div class="s-m-error">'];t.push(e),t.push("</div>"),$(t.join("")).appendTo(this.$$elmt)},buildFieldFromPlain:function(e,t){t.append($.parseHTML(u(e.replace(/\n/g,"<BR/>"))))},buildFieldFromRtf:function(e,t){this.buildFieldFromHtml(f.toHtml(e),t)},buildFieldFromHtml:function(e,t){t.append($.parseHTML(u(e)))}});t.Klass=p}),define("syracuse-tablet/html/js/controls/ctrlIcon",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/ctrlBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/fontUtils"),s=e("syracuse-tablet/html/js/controls/ctrlBase"),o=s.Klass,u=r.defineClass(function(t,n,r){o.call(this,t,n,r)},o,{buildHtml:function(e,t,n){var r=this;o.prototype.buildHtml.call(r,e,t,n,["s-m-icon"]),r.$$elmt.html(s.genHtmlCtrlLink(r.prototype,t,{tag:"a",css:""},function(e){e.push('<span class="'),e.push(i.ctrlIcon(r.prototype.data("$icon"))),e.push('"></span>')}))}});t.Klass=u}),define("syracuse-tablet/html/js/controls/ctrlButton",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/ui/fontUtils","syracuse-tablet/html/js/controls/ctrlBase"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/ui/fontUtils"),s=e("syracuse-tablet/html/js/controls/ctrlBase"),o=s.Klass,u=r.defineClass(function(t,n,r){o.call(this,t,n,r)},o,{buildHtml:function(e,t,n){var r=this;o.prototype.buildHtml.call(r,e,t,n,["s-m-btn"]),r.$$elmt.html(s.genHtmlCtrlLink(r.prototype,t,{tag:"button",css:"btn btn-info btn-large"},function(e){var t=r.prototype.data("$icon")||"";t.length>0&&e.push('<i class="'+i.ctrlIcon(r.prototype.data("$icon"))+'"></i>'),t=r.prototype.data("$text")||"",t.length>0&&e.push(t)}))}});t.Klass=u}),define("syracuse-tablet/html/js/controls/chart/chartstheme",["require","exports","module"],function(e,t,n){t.ChartsTheme={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.2/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.2/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#666",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0},area:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:0},spline:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0},areaspline:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:0},column:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0},bar:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0},scatter:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom"},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!1,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0}},pie:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:null,point:{events:{}},dataLabels:{enabled:!0,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:"bottom",distance:30},cropThreshold:300,pointRange:0,showInLegend:!1,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{}}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,ignoreHiddenPoint:!0,legendType:"point",size:null,slicedOffset:10,tooltip:{followPointer:!0}},arearange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},areasplinerange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},columnrange:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},cropThreshold:300,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!0,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0},gauge:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!0,align:"center",x:0,y:5,style:{color:"#666",cursor:"default",fontSize:"16px",lineHeight:"24px",fontWeight:"normal"},verticalAlign:"top",borderWidth:0,borderColor:null,borderRadius:3,zIndex:2},cropThreshold:300,pointRange:0,showInLegend:!1,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,dial:{},pivot:{},tooltip:{style:{color:"#666"},headerFormat:""}},boxplot:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:-0.3,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,fillColor:"#FFFFFF",medianWidth:2,tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{series.name}</span><br/>Minimum: {point.low}<br/>Lower quartile: {point.q1}<br/>Median: {point.median}<br/>Higher quartile: {point.q3}<br/>Maximum: {point.high}<br/>'},whiskerLength:"50%",whiskerWidth:2},errorbar:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:-0.3,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:null,fillColor:"#FFFFFF",medianWidth:2,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerLength:"50%",whiskerWidth:null,color:"#000000",grouping:!1,linkedTo:":previous"},waterfall:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:1,marker:null,point:{events:{}},dataLabels:{enabled:!1,align:null,x:0,y:null,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"},verticalAlign:null},cropThreshold:50,pointRange:null,showInLegend:!0,states:{hover:{marker:{},brightness:.1,shadow:!1},select:{marker:{},color:"#C0C0C0",borderColor:"#000000",shadow:!1}},stickyTracking:!1,borderColor:"#333",borderWidth:1,borderRadius:0,groupPadding:.2,pointPadding:.1,minPointLength:0,threshold:0,lineColor:"#333",dashStyle:"dot"},bubble:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:0,marker:{enabled:!0,lineWidth:1,radius:4,lineColor:null,states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{enabled:!1,align:"center",x:0,y:0,style:{color:"white",cursor:"default",fontSize:"11px",lineHeight:"14px",textShadow:"0px 0px 3px black"},verticalAlign:"middle",inside:!0},cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!1,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"({point.x}, {point.y}), Size: {point.z}",followPointer:!0},minSize:8,maxSize:"20%",zThreshold:0}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!1,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}}}),define("syracuse-tablet/html/js/controls/field/ctrlGaugeChart",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/controls/field/ctrlFieldBase","syracuse-tablet/html/js/controls/chart/chartstheme"],function(e,t,n){var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/locale"),s=e("syracuse-tablet/html/js/controls/field/ctrlFieldBase").Klass,o=e("syracuse-tablet/html/js/controls/chart/chartstheme").ChartsTheme,u=r.defineClass(function(t,n,r,i){var o=this;s.call(o,t,n,r,i),o.formatter=o.initFormatter(),o.cssType=null},s,{_defaultGaugeSegments:[{propStart:0,propEnd:.25,valStart:null,valEnd:null,color:"#41A940"},{propStart:.25,propEnd:.75,valStart:null,valEnd:null,color:"#FF5800"},{propStart:.75,propEnd:1,valStart:null,valEnd:null,color:"#CB3500"}],buildFieldValue:function(e,t){var n=this,r=$("<div>").addClass("s-m-gauge-container"),s=i.getNumberDecimalSeparator(),u=i.getNumberGroupSeparator();n.chartsTheme||(n.chartsTheme=o);if(!n.chartsTheme.themeWasSet||n.chartsTheme.decimalPoint!==s||n.chartsTheme.thousandsSep!==u)n.chartsTheme.decimalPoint=s,n.chartsTheme.thousandsSep=u,Highcharts.setOptions(n.chartsTheme),n.chartsTheme.themeWasSet=!0;n._renderGauge(r),e.appendChild(r[0])},buildFieldTitle:function(e,t){},_resolveExpr:function(e,t,n){return typeof e!="string"?e:e.replace(/\{(\w+)\}/g,function(e,r){return t[r]!=null?t[r]:n[r]!=null?n[r]:e})},_mergeAuthoringAndDefaults:function(){var e=this,t=e.article.$gauge;if(!t.segments)return e._defaultGaugeSegments;if(t.segments.length===0)return e._defaultGaugeSegments;var n,r,i,s=[];for(n=0;n<t.segments.length;n++)r=e._defaultGaugeSegments[Math.min(n,e._defaultGaugeSegments.length-1)],i=t.segments[n],i?((i.propStart==null||i.propEnd==null)&&(i.valStart==null||i.valEnd==null)&&(i.propStart=r.propStart,i.propEnd=r.propEnd,i.valStart=r.valStart,i.valEnd=r.valEnd),i.color==null&&(i.color=r.color),s.push(i)):s.push(r);return s},_createBands:function(e,t,n,r){var i=this,s=[];s.push({from:n,to:r,color:"#ccc",innerRadius:"79%",outerRadius:"101%"});var o=i.getValue(),u=i._mergeAuthoringAndDefaults(),a,f,l,c=r-n;for(f=0;f<u.length;f++)a=u[f],l={innerRadius:"79%",outerRadius:"101%",color:a.color},a.valStart!=null&&a.valEnd!=null?(l.from=i._resolveExpr(a.valStart,o,t),l.to=i._resolveExpr(a.valEnd,o,t)):a.propStart!=null&&a.propEnd!=null&&(l.from=n+c*i._resolveExpr(a.propStart,o,t),l.to=n+c*i._resolveExpr(a.propEnd,o,t)),s.push(l);return s},_getScale:function(){function t(e){var t=e.match(/\.(.*)/g);return t.length>=1?t.length:0}var e=this;return e.article.$scale?e.article.$scale:e.article.$format?t(e.article.$format):0},_renderGauge:function(e){var t=this,n=t.article.$gauge,r=t.$isEditMode?"#666":"#34B233",i=t.getValue(),s=0,o=100;n.$bindMin!=null&&n.$bindMax!=null&&(typeof n.$bindMin=="string"?s=t.getDao().getValue(n.$bindMin):s=n.$bindMin,typeof n.$bindMax=="string"?o=t.getDao().getValue(n.$bindMax):o=n.$bindMax);try{typeof i=="string"&&(i=parseFloat(i))}catch(u){}try{typeof s=="string"&&(s=parseFloat(s))}catch(u){}try{typeof o=="string"&&(o=parseFloat(o))}catch(u){}var a=t.prototype.json,f="";a.$unit&&a.$properties&&a.$properties[a.$unit]&&i&&i[a.$unit]&&i[a.$unit].$symbol&&(f=i[a.$unit].$symbol);var l=t.getTitle(),c=t._getScale(),h=t._createBands(e,a,s,o);t.$$chartSlot=e,e.highcharts({chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,backgroundColor:null,height:180,borderWidth:0,spacingBottom:35},title:{text:l,style:{color:r,fontWeight:"normal",textTransform:"uppercase"},verticalAlign:"bottom",y:27},pane:{startAngle:-90,endAngle:90,center:["50%","90%"],size:210,background:[{backgroundColor:"#FFF",borderWidth:0}]},yAxis:{min:s,max:o,minorTickWidth:1,minorTickInterval:"auto",minorTickLength:20,minorTickPosition:"inside",minorTickColor:"#fff",tickPixelInterval:30,tickWidth:0,tickPosition:"inside",tickLength:15,tickColor:"#FFF",labels:{step:1,rotation:"auto",style:{color:"#666",cursor:"default",fontSize:"0.9em",fontFamily:"Arial",lineHeight:"14px"},distance:10,y:0,verticalAlign:"center",align:"center"},title:{text:f,style:{color:"#666"}},plotBands:h},plotOptions:{gauge:{dataLabels:{enabled:!0,format:"{point.y:,."+c+"f}",style:{fontFamily:"Arial"}}}},exporting:{buttons:null},series:[{name:l,data:[i],tooltip:{valueSuffix:" "+f}}]},function(){})},onResize:function(){var e=this,t=e.$$chartSlot.highcharts();t&&t.setSize(e.$$chartSlot.width())}});t.Klass=u}),define("syracuse-tablet/html/js/controls/ctrlFactoryDeps",["require","exports","module","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlAlphanum","syracuse-tablet/html/js/controls/field/ctrlProgress","syracuse-tablet/html/js/controls/field/ctrlNumeric","syracuse-tablet/html/js/controls/field/ctrlQuantity","syracuse-tablet/html/js/controls/field/ctrlCheckBox","syracuse-tablet/html/js/controls/field/ctrlCombo","syracuse-tablet/html/js/controls/field/ctrlDate","syracuse-tablet/html/js/controls/array/ctrlArray","syracuse-tablet/html/js/controls/field/ctrlReference","syracuse-tablet/html/js/controls/layout/layoutRow","syracuse-tablet/html/js/controls/layout/layoutStack","syracuse-tablet/html/js/controls/layout/layoutTab","syracuse-tablet/html/js/controls/layout/layoutHub","syracuse-tablet/html/js/controls/layout/layoutHubGroup","syracuse-tablet/html/js/controls/layout/layoutTile","syracuse-tablet/html/js/controls/layout/layoutCell","syracuse-tablet/html/js/controls/vignetteBase","syracuse-tablet/html/js/controls/page/ctrlPageHeader","syracuse-tablet/html/js/controls/page/ctrlPageFooter","syracuse-tablet/html/js/controls/page/panels/pageActionPanelRegular","syracuse-tablet/html/js/controls/page/panels/sortfilter/filterSortPanel","syracuse-tablet/html/js/controls/page/panels/navigationPanel","syracuse-tablet/html/js/controls/page/panels/userpanelsmartphone","syracuse-tablet/html/js/controls/ctrlTypeUnknown","syracuse-tablet/html/js/controls/ctrlUnfound","syracuse-tablet/html/js/controls/chart/ctrlCubeChart","syracuse-tablet/html/js/controls/field/ctrlBinary","syracuse-tablet/html/js/controls/field/ctrlText","syracuse-tablet/html/js/controls/ctrlIcon","syracuse-tablet/html/js/controls/ctrlButton","syracuse-tablet/html/js/controls/field/ctrlGaugeChart","syracuse-tablet/html/js/controls/ctrlFactory"],function(e,t,n){var r=e("syracuse-tablet/html/js/controls/field/ctrlAlphanum").Klass,i=e("syracuse-tablet/html/js/controls/field/ctrlAlphanum").PhoneField,s=e("syracuse-tablet/html/js/controls/field/ctrlAlphanum").EmailField,o=e("syracuse-tablet/html/js/controls/field/ctrlProgress").Klass,u=e("syracuse-tablet/html/js/controls/field/ctrlNumeric").Klass,a=e("syracuse-tablet/html/js/controls/field/ctrlQuantity").Klass,f=e("syracuse-tablet/html/js/controls/field/ctrlCheckBox").Klass,l=e("syracuse-tablet/html/js/controls/field/ctrlCombo").Klass,c=e("syracuse-tablet/html/js/controls/field/ctrlDate").Klass,h=e("syracuse-tablet/html/js/controls/array/ctrlArray").Klass,p=e("syracuse-tablet/html/js/controls/field/ctrlReference").Klass,d=e("syracuse-tablet/html/js/controls/layout/layoutRow").Klass,v=e("syracuse-tablet/html/js/controls/layout/layoutStack").Klass,m=e("syracuse-tablet/html/js/controls/layout/layoutTab").Klass,g=e("syracuse-tablet/html/js/controls/layout/layoutHub").Klass,y=e("syracuse-tablet/html/js/controls/layout/layoutHubGroup").Klass,b=e("syracuse-tablet/html/js/controls/layout/layoutTile").Klass,w=e("syracuse-tablet/html/js/controls/layout/layoutCell").Klass,E=e("syracuse-tablet/html/js/controls/vignetteBase").Klass,S=e("syracuse-tablet/html/js/controls/page/ctrlPageHeader").Klass,x=e("syracuse-tablet/html/js/controls/page/ctrlPageFooter").Klass,T=e("syracuse-tablet/html/js/controls/page/panels/pageActionPanelRegular").Klass,N=e("syracuse-tablet/html/js/controls/page/panels/sortfilter/filterSortPanel").Klass,C=e("syracuse-tablet/html/js/controls/page/panels/navigationPanel").Klass,k=e("syracuse-tablet/html/js/controls/page/panels/userpanelsmartphone").Klass,L=e("syracuse-tablet/html/js/controls/ctrlTypeUnknown").Klass,A=e("syracuse-tablet/html/js/controls/ctrlUnfound").Klass,O=e("syracuse-tablet/html/js/controls/chart/ctrlCubeChart").Klass,M=e("syracuse-tablet/html/js/controls/field/ctrlBinary").Klass,_=e("syracuse-tablet/html/js/controls/field/ctrlText").Klass,D=e("syracuse-tablet/html/js/controls/ctrlIcon").Klass,P=e("syracuse-tablet/html/js/controls/ctrlButton").Klass,H=e("syracuse-tablet/html/js/controls/field/ctrlGaugeChart").Klass,B=e("syracuse-tablet/html/js/controls/ctrlFactory");t.init=function(){B.setImpl("Alphanum",r),B.setImpl("PhoneField",i),B.setImpl("EmailField",s),B.setImpl("ProgressField",s),B.setImpl("Numeric",u),B.setImpl("Quantity",a),B.setImpl("CheckBox",f),B.setImpl("Combo",l),B.setImpl("Date",c),B.setImpl("Array",h),B.setImpl("Reference",p),B.setImpl("LayoutRow",d),B.setImpl("LayoutStack",v),B.setImpl("LayoutTab",m),B.setImpl("LayoutHub",g),B.setImpl("LayoutHubGroup",y),B.setImpl("LayoutTile",b),B.setImpl("LayoutCell",w),B.setImpl("Vignette",E),B.setImpl("PageHeader",S),B.setImpl("PageFooter",x),B.setImpl("PageActionPanelRegular",T),B.setImpl("NavigationPanel",C),B.setImpl("UserPanelSmartphone",k),B.setImpl("FilterSortPanel",N),B.setImpl("TypeUnknown",L),B.setImpl("FieldUnfound",A),B.setImpl("CubeChart",O),B.setImpl("Binary",M),B.setImpl("Text",_),B.setImpl("Icon",D),B.setImpl("Gauge",H),B.setImpl("Button",P)}}),define("syracuse-tablet/html/js/sdata/sdataSort",["require","exports","module"],function(e,t,n){function r(e,t,n){var r=[],i=t.$properties.$resources&&t.$properties.$resources.$item&&t.$properties.$resources.$item.$properties||t.$properties;n.forEach(function(e){var t=e.property,n=e.sort==="DESC"?"DESC":"ASC",s=i[t]&&i[t].$type||"application/x-string";if(s==="application/x-decimal"){if(n==="ASC"){try{r.push(function(e,n){var r=e[t],i=n[t];return+r- +i})}catch(o){}return 0}try{r.push(function(e,n){var r=e[t],i=n[t];return+i- +r})}catch(o){}return 0}n==="ASC"?r.push(function(e,n){try{var r=e[t],i=n[t];if(r>i)return 1;if(r<i)return-1}catch(s){}return 0}):r.push(function(e,n){try{var r=e[t],i=n[t];if(r>i)return-1;if(r<i)return 1}catch(s){}return 0})}),e.sort(function(e,t){var n=0;for(var i=0;i<r.length;i++){n=r[i](e,t);if(n!==0)break}return n})}t.sdataSortArray=r}),define("syracuse-tablet/html/js/sdata/sdataCache",["require","exports","module","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdatawhere/parser","syracuse-tablet/html/js/sdata/sdatawhere/whereUtils","syracuse-tablet/html/js/sdata/sdataSort","syracuse-tablet/html/js/storage/localStorage"],function(e,t,n){function p(e){this.storage=e,this.context=null}var r=e("syracuse-tablet/html/js/helpers/logger").getLogger("SDataCache"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/utils"),o=e("syracuse-tablet/html/js/storage/storage"),u=e("syracuse-tablet/html/js/sdata/sdatawhere/parser").Parser,a=e("syracuse-tablet/html/js/sdata/sdatawhere/whereUtils"),f=e("syracuse-tablet/html/js/sdata/sdataSort"),l=e("syracuse-tablet/html/js/storage/localStorage"),c="$cache_",h=/\{(.*?)\}/g,d=s.defineClass(p,null,{setContext:function(e){r&&r("Changing cache context: "+JSON.stringify(e)),this.context=e},cachePrefix:c,put:function(e){var t=$.Deferred(),n=this;try{if(!e.$data)throw new Error("PUT: No data specified");var r,i;if(e.$proto){var s=n._getProto(e.$proto);r=n._getRepresentation(s),i=n._getKeyValue(e.$data,s)}else{if(!e.$representation||!e.$key)throw new Error("PUT: Neither proto nor representation and key specified");r=e.$representation,i=e.$key}n.storage.put({$context:n.context,$collection:c+r,$endpoint:e.$endpoint,$key:i,$data:{$item:e.$data}}).then(function(e){t.resolve()}).fail(function(e){t.reject(e)})}catch(o){t.reject(o)}finally{return t.promise()}},query:function(e){var t=$.Deferred(),n=this;try{var i;r&&r("Query by: "+JSON.stringify(e));if(e.$proto){var s=n._getProto(e.$proto);i=n._getRepresentation(s)}else{if(!e.$representation)throw new Error("QUERY: Neither proto nor representation specified");if(e.$where)throw new Error("QUERY: Where clause parsing requires prototype");if(e.$orderBy)throw new Error("QUERY: Order by requires prototype");i=e.$representation}n.storage.query({$context:n.context,$endpoint:e.$endpoint,$collection:c+i}).then(function(n){var r=[];if(e.$where){var i=u.parse(e.$where);n.$data.forEach(function(e,t){if(a.execWhere(e.$item,i,s)){var o=e.$item,u=n.$metaData[t];o.$cache={$lastRead:u.$lastRead,$lastUpdated:u.$lastUpdated},r.push(o)}})}else n.$data.forEach(function(e,t){var i=e.$item,s=n.$metaData[t];i.$cache={$lastRead:s.$lastRead,$lastUpdated:s.$lastUpdated},r.push(i)});e.$orderBy&&f.sdataSortArray(r,s,e.$orderBy),t.resolve(r)}).fail(function(e){t.reject(e)})}catch(o){t.reject(o)}finally{return t.promise()}},read:function(e){var t=$.Deferred(),n=this;try{var r;if(!e.$key)throw new Error("READ: No key specified");if(e.$proto){var i=n._getProto(e.$proto);r=n._getRepresentation(i)}else{if(!e.$representation)throw new Error("READ: Neither proto nor representation specified");r=e.$representation}n.storage.read({$context:n.context,$collection:c+r,$endpoint:e.$endpoint,$key:e.$key}).then(function(e){if(e.$status===o.StatusCodes.OK){var n=e.$data.$item;n.$cache={$lastRead:e.$metaData.$lastRead,$lastUpdated:e.$metaData.$lastUpdated},t.resolve(n)}else t.resolve(null)}).fail(function(e){t.reject(e)})}catch(s){t.reject(s)}finally{return t.promise()}},remove:function(e){var t=$.Deferred(),n=this;try{var r;if(!e.$key)throw new Error("REMOVE: No key specified");if(e.$proto){var i=n._getProto(e.$proto);r=n._getRepresentation(i)}else{if(!e.$representation)throw new Error("READ: Neither proto nor representation specified");r=e.$representation}n.storage.remove({$context:n.context,$collection:c+r,$endpoint:e.$endpoint,$key:e.$key}).then(function(){t.resolve()}).fail(function(e){t.reject(e)})}catch(s){t.reject(s)}finally{return t.promise()}},clearCache:function(){var e=$.Deferred(),t=this,n=new RegExp(t.cachePrefix.replace(/([\$\_]+)/g,"\\$1"));try{t.storage.clearCollection({$context:t.context,$collection:n}).then(function(){t.storage.clearCollection({$context:i.getEmptyCacheCtx(),$collection:n})}).then(function(){e.resolve()}).fail(function(t){e.reject(t)})}catch(r){e.reject(r)}finally{return e.promise()}},_getProto:function(e){var t=e.$properties.$resources&&e.$properties.$resources.$item||e;return t.$type=e.$type,t},_getRepresentation:function(e){return e.$type.split(".").slice(1,3).join(".").replace("$queryItem","$query")},_getKeyValue:function(e,t){return t.$key.replace(h,function(t,n){return e[n]})},disableCache:function(e){i.isDvlpMode()&&l.setItem("s.m.cache.disabled",e),this._isDisabled=e},isDisabled:function(){return this._isDisabled==null&&(i.isDvlpMode()?(this._isDisabled=l.getItem("s.m.cache.disabled"),this._isDisabled=this._isDisabled===!0||this._isDisabled==="true"):this._isDisabled=!1),this._isDisabled}});t.SDataCache=d}),define("syracuse-tablet/html/js/helpers/siteLayout",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/notifications"],function(e,t,n){function h(){var e=$(window).width(),t=$(window).height(),n=e/t,r;return n<1?r="portrait":r="landscape",r==f||f==null?(f=r,!1):(f=r,!0)}function p(){var e=$(window).width(),t=$(window).height(),n=null,r=0,i=0,u=0,h=0,p=0,b=0,w=$("#s-m-auth-panel-right-id"),E=$("#s-m-auth-panel-left-id"),S=$("#s-m-app-id"),x=$("#s-m-app-container-id");c=$.extend(!0,{},l);var T=c.pageParameters;c.authPanelRight.visible&&(r=c.authPanelRight.width,p=c.authPanelRight.splitterWidth,d(e,t),T.forcePreview=!0),c.authPanelLeft.visible&&(i=c.authPanelLeft.width,b=c.authPanelLeft.splitterWidth,v(e,t),T.forcePreview=!0),c.authPanelHeader.visible&&(u=c.authPanelHeader.height,m(e,t)),c.authPanelFooter.visible&&(h=c.authPanelFooter.height,g(e,t));var N=e-r-p-i-b,C=t-u-h,k,L=T.forcePreview===!0;S.parent().is(".s-m-device-wrapper")&&S.unwrap();if(L){var A=T.device||"tablet",O=s[A]||s.tablet,M=15;k={left:0,top:0,width:T.orientation==="landscape"?O.width:O.height,height:T.orientation==="landscape"?O.height:O.width};var _=k.height+2*M,D=k.width+2*M;T.forceAutoScale&&(T.scale=Math.min(Math.min(N/D,C/_),1)),k.left=Math.max((N-D*T.scale)/2,0),k.top=Math.max((C-_*T.scale)/2,0),n=O.bootstrapTweakClass[T.orientation];var P=$('<section class="s-m-device-wrapper"></section>"'),H={top:k.top+"px",left:k.left+"px",width:D+"px",height:_+"px"};T.scale!==1&&(H.transform="scale("+T.scale+", "+T.scale+")",H["transform-origin"]="left top"),P.css(H),S.wrap(P),S.css({top:M+"px",left:M+"px",width:k.width+"px",height:k.height+"px",position:"absolute"})}else k={left:0,top:0,width:N,height:C},T.orientation=f,S.css({top:k.top,left:k.left,width:k.width,height:k.height});S.removeClass(o.join("")),n&&S.addClass(n),x.css({top:u,left:i+b,width:N,height:C}),x.toggleClass("s-m-preview",L),a.publish("sm.main.layout.changed",{application:k},T.orientation,y())}function d(e,t){var n=$("#s-m-auth-panel-right-id"),r=$("#s-m-auth-splitter-right-id"),i=0,s=0;c.authPanelHeader.visible&&(i=c.authPanelHeader.height),c.authPanelFooter.visible&&(s=c.authPanelFooter.height),n.css({left:e-c.authPanelRight.width,top:i,width:c.authPanelRight.width,height:t-i-s}),r.css({left:e-c.authPanelRight.width-c.authPanelRight.splitterWidth,top:i,width:c.authPanelRight.splitterWidth,height:t-i-s})}function v(e,t){var n=$("#s-m-auth-panel-left-id"),r=$("#s-m-auth-splitter-left-id"),i=0,s=0;c.authPanelHeader.visible&&(i=c.authPanelHeader.height),c.authPanelFooter.visible&&(s=c.authPanelFooter.height),n.css({left:0,top:i,width:c.authPanelLeft.width,height:t-i-s}),r.css({left:c.authPanelLeft.width,top:i,width:c.authPanelLeft.splitterWidth,height:t-i-s})}function m(e,t){var n=$("#s-m-auth-panel-header-id");n.css({left:0,top:0,width:e,height:c.authPanelHeader.height})}function g(e,t){var n=$("#s-m-auth-panel-footer-id");n.css({left:0,top:t-c.authPanelFooter.height,width:e,height:c.authPanelFooter.height})}var r=null,i=function(){if(r)return r;var e=navigator.userAgent.toLowerCase();e.indexOf("iphone")>=0?r="smartphone":e.indexOf("ipad")>=0?r="tablet":r="tablet"},s={nexus5:{width:640,height:360,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-xs"},deviceClass:"smartphone",orientations:["portrait","landscape"]},nexus7:{width:960,height:600,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-sm"},deviceClass:"minitablet",orientations:["portrait","landscape"]},nexus10:{width:1280,height:800,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-sm",landscape:"s-m-auth-col-simulate-lg"},deviceClass:"tablet",orientations:["portrait","landscape"]},ipad:{width:1024,height:768,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-sm",landscape:"s-m-auth-col-simulate-lg"},deviceClass:"tablet",orientations:["portrait","landscape"]},iphone4:{width:480,height:320,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-xs"},deviceClass:"smartphone",orientations:["portrait","landscape"]},iphone5:{width:568,height:320,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-xs"},deviceClass:"smartphone",orientations:["portrait","landscape"]},iphone6:{width:667,height:375,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-xs"},deviceClass:"smartphone",orientations:["portrait","landscape"]},iphone6plus:{width:960,height:540,bootstrapTweakClass:{portrait:"s-m-auth-col-simulate-xs",landscape:"s-m-auth-col-simulate-xs"},deviceClass:"smartphone",orientations:["portrait","landscape"]}},o=["s-m-auth-col-simulate-xs","s-m-auth-col-simulate-sm","s-m-auth-col-simulate-md","s-m-auth-col-simulate-lg"],u=e("syracuse-tablet/html/js/helpers/utils"),a=e("syracuse-tablet/html/js/helpers/notifications"),f=null,l={authPanelRight:{width:230,splitterWidth:15,visible:!1},authPanelLeft:{width:300,splitterWidth:15,visible:!1},authPanelHeader:{height:34},authPanelFooter:{height:34},pageParameters:{forcePreview:!1,forceAutoScale:!0,device:"nexus10",orientation:"landscape",scale:1}},c;t.updateLayout=function(e,t){if(h()||u.isDesktop())t&&t.layout&&(l=$.extend(!0,{},l,t.layout)),p()},t.updateLayoutInternal=function(e,t){t&&t.layout&&(l=$.extend(!0,{},l,t.layout)),p()},t.getDeviceTemplates=function(){return s};var y=function(){if(c.pageParameters.forcePreview===!0){var e=c.pageParameters.device||"tablet",t=s[e]||s.tablet;return t.deviceClass}return i()},b=function(e){return e==null&&(e=y()),e!="tablet"&&e!="minitablet"?"smartphone":"tablet"};t.getDeviceType=b,t.getDeviceClass=y,t.getPageOrientation=function(){return c.pageParameters.orientation},t.getCurrentLayoutSettings=function(){var e=$.extend(!0,{},l);return e},t.getTransformScale=function(){var e=c&&c.pageParameters?c.pageParameters.scale:null;return e==null||e<=0?1:e}}),define("syracuse-tablet/html/js/application/metaDataCache",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ajax/ajax"],function(e,t,n){function f(e,t){var n=r.getStorage();return n.put({$context:t,$collection:"$cache_$meta",$endpoint:"$local",$key:"$applications",$data:e}).then(function(t){return e})}function l(e,t){var n=r.getStorage();return n.put({$context:t,$collection:"$cache_$meta",$endpoint:"$local",$key:"$application_"+e.$application.applicationName,$data:e})}function c(e){var t=$.Deferred();try{var n=r.baseLocation(),i=e.split("."),s=i.slice(0,3).join("/"),o=i.slice(3,5).join("."),f=n.host+"/mobile1/"+s+"/$prototypes('"+o+"')",l={"Accept-Language":u.getCurrentLocale()};a("GET",f,null,l).then(function(n){if(!n.isSuccess){var r="Http error status["+n.status+"] reading prototype id ["+e+"]";throw n.responseJSON&&(r+="\n"+JSON.stringify(n.responseJSON,null,2)),new Error(r)}t.resolve(n.responseJSON)}).fail(function(e){t.reject(e)})}catch(c){t.reject(c)}finally{return t.promise()}}function h(e,t,n){var i=r.getStorage();return i.put({$context:n,$collection:"$cache_$meta",$endpoint:"$local",$key:"$prototype_"+e,$data:t})}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/helpers/logger").getLogger("metaData"),s=e("syracuse-tablet/html/js/storage/storage"),o=e("syracuse-tablet/html/js/sdata/sdataCommonResources"),u=e("syracuse-tablet/html/js/helpers/locale"),a=e("syracuse-tablet/html/js/ajax/ajax").getAjax().ajax;t.getKnownApplications=function(e){var t=r.getStorage(),n={$user:"none",$role:"none",$lang:e.lang},u;return r.isDvlpMode()?u=$.smResolve({$status:s.StatusCodes.NOT_FOUND}):u=t.read({$context:n,$collection:"$cache_$meta",$endpoint:"$local",$key:"$applications"}),u.then(function(e){if(e.$status===s.StatusCodes.OK){var t=e.$data;return i&&i("Application list from cache"),t}return i&&i("Fetching remote application list"),o.queryAllApplications().then(function(e){return f(e,n).then(function(){return e})})})},t.getApplication=function(e,t){var n=r.getStorage(),u={$user:"none",$role:"none",$lang:t.lang};return n.read({$context:u,$collection:"$cache_$meta",$endpoint:"$local",$key:"$application_"+e.applicationName}).then(function(t){return t.$status===s.StatusCodes.OK?(i&&i("Application details from cache"),t.$data):(i&&i("Fetching remote application details"),o.queryApplicationDetail(e).then(function(e){return l(e,u).then(function(){return e})}))})},t.getPrototype=function(e,t){var n=r.getStorage(),o={$user:t.user,$role:t.role,$lang:t.lang},u;return u=n.read({$context:o,$collection:"$cache_$meta",$endpoint:"$local",$key:"$prototype_"+e}),u.then(function(t){if(t.$status===s.StatusCodes.OK){var n=t.$data;return i&&i("Prototype from cache"),n}return i&&i("Fetching remote prototype"),c(e).then(function(t){return h(e,t,o).then(function(){return t})})})}}),define("syracuse-tablet/html/js/application/metaData",["require","exports","module","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/application/metaDataCache","syracuse-tablet/html/js/helpers/logger","syracuse-tablet/html/js/helpers/prototype","syracuse-tablet/html/js/authoring/authoringArticleGen"],function(e,t,n){function v(){var e=r.getUserCtx(),t=r.getEndpoint();if(f.user!=e.$user||f.role!=e.$role||f.lang!=e.$lang||f.endpoint!=t)f.user=e.$user,f.role=e.$role,f.lang=e.$lang,f.endpoint=t,o&&o("Application context changed to: "+JSON.stringify(f)),m()}function m(){c=null,h={}}function g(){o&&o("Reading applications");var e=s.getKnownApplications(f).then(function(e){var t=[];e.forEach(function(e){var n=!0;e.endpoints&&e.endpoints.length>0&&(n=n&&e.endpoints.some(function(e){return e.application+"."+e.contract+"."+e.dataset===f.endpoint}));var i=!0;r.isDvlpMode()?i=!0:e.roles&&e.roles.length>0&&n&&(i=i&&e.roles.some(function(e){return e.code===f.role})),i&&n&&t.push(e)}),Object.keys(p).forEach(function(e){t.push(p[e].$application)}),c=t,o&&o("Number of applications: "+c.length)});return e}function y(e){var t=null;return c.some(function(n){if(n.applicationName==e)return t=n,!0}),t}function b(){var e=r.getUserCtx(),t=r.getEndpoint();if(l.user!=e.$user||l.role!=e.$role||l.lang!=e.$lang||l.endpoint!=t)l.user=e.$user,l.role=e.$role,l.lang=e.$lang,l.endpoint=t,o&&o("Prototype context changed to: "+JSON.stringify(l)),w()}function w(){d={}}function E(e){var t=r.getApplication().dao.appMetaData,n=t.$dashboards,i;return Object.keys(n).some(function(t){i=n[t];if(i.$dashboardName===e)return!0})||(i=null),i}function S(e){if(!e.smEndsWith(".$mobileDashboard"))return $.smResolve(null);var t=e.substring(0,e.length-17),n=E(t);if(!n)return $.smResolve(null);var r=n.$pageInfo||{};return r.name=e,r.type="dashboard",r.subtype=r.isWelcomePage?"welcome":"std",r.dashboardName=n.$dashboardName,r.cached=!1,r.refreshed=!1,r.changeHash=!1,$.smResolve(r)}function x(e){var n=r.getApplication().dao.appMetaData,i=n&&n.$pages,s=i&&i[e];if(!s)return $.smResolve(null);var o={name:e,home:!1,type:"regular",subtype:"unknown",cached:!1,refreshed:!1,changeHash:!1};return $.smResolve(s.$page.$prototype).then(function(e){return e?e:t.getPrototype(o.name)}).then(function(t){if(t){var n=t.$type;n||(n=t.$url),o.subtype=n.substring(n.lastIndexOf(".$")+2);if(!o.subtype)throw new Error("Unexpected facet for page "+e+"\n$url="+t.$url)}}).then(function(){return o})}function T(e){var n,s=r.getApplication().dao.appMetaData,o=s&&s.$pages;return $.smResolve().then(function(){var t=o&&o[e.name];if(t)return{prototype:t.$page&&t.$page.$prototype,article:t.$page&&t.$page.$article}}).then(function(t){return t?t:i.getRegularPageInfo(e.name).then(function(e){if(e)return{prototype:e.$page&&e.$page.$prototype,article:e.$page&&e.$page.$article}})}).then(function(n){return n?n.prototype?n:t.getPrototype(e.name).then(function(e){if(e)return n.prototype=e,n}):t.getPrototype(e.name).then(function(e){if(e)return{prototype:e}})}).then(function(e){return e&&(e.prototype=u.create(e.prototype)),e}).then(function(t){return t?C(e,t).then(function(){return t}):null})}function N(e){return $.smResolve().then(function(){var t={prototype:e.rowDetailPrototype};return C(e,t).then(function(){return t})})}function C(e,t){var n=t.prototype,r=e.options.article,i;return r&&Object.keys(r).length===0?i=a.genNewArticle({page:{prototype:n}}).then(function(e){Object.keys(e).forEach(function(t){r[t]=e[t]})}):i=$.smResolve().then(function(){r=r||e.article;if(!r)return a.genNewArticle({page:{prototype:n}}).then(function(e){r=e})}),i.then(function(){t.article=r})}var r=e("syracuse-tablet/html/js/helpers/globals"),i=e("syracuse-tablet/html/js/sdata/entities/clientContract"),s=e("syracuse-tablet/html/js/application/metaDataCache"),o=e("syracuse-tablet/html/js/helpers/logger").getLogger("metaData"),u=e("syracuse-tablet/html/js/helpers/prototype"),a=e("syracuse-tablet/html/js/authoring/authoringArticleGen"),f={},l={},c=null,h={},p=[],d={};t.registerStaticApp=function(e){o&&o("Register static application: "+e.$application.applicationName),p[e.$application.applicationName]=e},t.getApplication=function(e){var t=p[e]||h[e];if(t)return o&&o("Application from cache: "+e),$.smResolve(t);var n=y(e);return n?s.getApplication(n,f).then(function(t){return h[e]=t,t}):(o&&o("Unknown application: "+e),$.smResolve(t))},t.getApplications=function(){return v(),c!=null?$.smResolve(c):g().then(function(){return c})},t.getPrototype=function(e){o&&o("Getting prototype: "+e);var t=e.split(".");if(t.length<5)return n=i.getPrototype(t[0],t[1]),o&&o("Prototype (client side entitiy): "+e),$.smResolve(n);b();var n=d[e];return n?$.smResolve(n):s.getPrototype(e,l).then(function(t){return o&&o("Got prototype: "+e),t})},t.getDashboard=function(e){var t=r.getApplication().dao.appMetaData,n=t.$dashboards,i=E(e);return $.smResolve().then(function(){if(i)return i&&i.$update?i.$update(i):i}).then(function(e){if(e){e.$gadgets=e.$gadgets||{};if(t.$gadgets)for(var n in e.$vignettes){var r=e.$vignettes[n];t.$gadgets[r.$uuid]&&(e.$gadgets[r.$uuid]=t.$gadgets[r.$uuid])}}return e})},t.getDashboardPageName=function(e){return e+".$mobileDashboard"},t.getPageInfo=function(e){return S(e).then(function(t){return t?t:x(e)})},t.getPageDetails=function(e){var t;if(e.type==="regular")return T(e);if(e.type==="rowdetail")return N(e);throw new Error("Unsupported page type: "+e.type)}}),define("syracuse-tablet/html/js/sdata/entities/test/example",["require","exports","module"],function(e,t,n){var r=[];for(var i=0;i<100;i++)r.push({$uuid:""+i,name:"My name is: "+i,desc:"My desc is: "+i,desc2:"My desc2 is: "+i,amount:i*100});t.entity={$entityName:"example",$value:"{name}",$properties:{name:{$type:"application/x-string",$title:"My name"},desc:{$type:"application/x-string",$title:"My description"},desc2:{$type:"application/x-string",$title:"My description 2"},amount:{$type:"application/x-integer",$title:"My amount",$isExcluded:!1,$isHidden:!1,$isMandatory:!1,$isReadOnly:!1,$isDisabled:!1}},$relations:{values:{$type:"exampleChild"}},$articles:{$details:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"name",$isTitleHidden:!1}]},{$bind:"desc",$isTitleHidden:!1}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"desc2",$isTitleHidden:!1}]},{$bind:"amount",$isTitleHidden:!1}]}]},$edit:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"name",$isTitleHidden:!0}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"desc",$isTitleHidden:!0}]}]},{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"desc2",$isTitleHidden:!1}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"amount",$isTitleHidden:!1}]}]}]}},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/exampleHubLayout",["require","exports","module"],function(e,t,n){var r=[];for(var i=0;i<100;i++)r.push({$uuid:""+i,name:"My name is: "+i,desc:"My desc is: "+i,desc2:"My desc2 is: "+i,amount:i*100});t.entity={$entityName:"exampleHubLayout",$value:"{name}",$properties:{name:{$type:"application/x-string",$title:"My name"},desc:{$type:"application/x-string",$title:"My description"},desc2:{$type:"application/x-string",$title:"My description 2"},amount:{$type:"application/x-integer",$title:"My amount",$isExcluded:!1,$isHidden:!1,$isMandatory:!1,$isReadOnly:!1,$isDisabled:!1}},$relations:{values:{$type:"exampleChild"}},$articles:{$details:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Layout group 1",$items:[{$layoutType:"tile",$bgColor:"lime",$size:"full",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"purple",$size:"medium",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"magenta",$size:"medium",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"teal",$size:"wide",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]}]},{$layoutType:"hubGroup",$title:"Layout group 2",$items:[{$layoutType:"tile",$bgColor:"orange",$size:"large",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"purple",$size:"medium",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"magenta",$size:"green",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]},{$layoutType:"tile",$bgColor:"teal",$size:"wide",$items:[{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"name",$isTitleHidden:!1},{$bind:"desc",$isTitleHidden:!1}]}]}]}]}]},$edit:{$layoutType:"stack",$items:[{$layoutType:"row",$widthMd:"6,6",$items:[{$bind:"name",$isTitleHidden:!0},{$bind:"desc",$isTitleHidden:!0}]},{$layoutType:"row",$widthMd:"6,6",$items:[{$bind:"desc2",$isTitleHidden:!1},{$bind:"amount",$isTitleHidden:!1}]}]}},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testDatatypes",["require","exports","module"],function(e,t,n){var r=[],i=!1;for(var s=0;s<10;s++)r.push({$uuid:""+s,propString:"Simple String="+s,propDate:"2014-03-"+(s+20),propDateTime:"2014-06-"+(s+10)+"T12:45:"+(s+44)+".123Z",propTime:"15:45:"+(s+34),propTimeShort:"15:45:"+(s+34),propInt:s*1e3+s*10,propDecimal:Math.sqrt(s*1e3+s*10),propReal:Math.sqrt(s*1e3+s*30),propBoolean:i=!i,propChoice:"mr",propQuantity:s*123,propStringUnit:"EUR",propStringMandatory:"Mandatory",propDecimalMandatory:"",propStringMinMax:"",propStringMinMaxValue:"",propStringPattern:""});var o={$entityName:"testDataTypes",$properties:{propString:{$type:"application/x-string",$isMandatory:!1,$title:"My name (max len 25)",$maxLength:25},propStringMandatory:{$type:"application/x-string",$isMandatory:!0,$title:"String Madatory"},propStringMinMax:{$type:"application/x-string",$title:"String MinMaxLength(3-5)",$minLength:3,$maxLength:5},propStringMinMaxValue:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer MinMaxValue(3-50)",$minimun:"3",$maximun:"50"},propStringPattern:{$type:"application/x-string",$title:"Pattern",$maxLength:40},propDate:{$type:"application/x-date",$isMandatory:!1,$title:"Date"},propDateTime:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time"},propTime:{$type:"application/x-time",$isMandatory:!1,$title:"Time long",$format:"TT"},propTimeShort:{$type:"application/x-time",$isMandatory:!1,$title:"Time"},propInt:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer (1-7000 Max)",$minimun:"1",$maximun:"7000"},propDecimalMandatory:{$type:"application/x-decimal",$isMandatory:!0,$title:"Decimal mandatory(2.4)",$scale:2,$precision:4,$format:"0.00"},propDecimal:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal(4.7)",$scale:4,$precision:7,$format:"0.0000"},propReal:{$type:"application/x-real",$isMandatory:!1,$title:"Real"},propBoolean:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean"},propChoice:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice",$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propQuantity:{$title:"Quantity",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!0,$title:"Unit for quantity"},propStringM:{$type:"application/x-string",$isMandatory:!0,$title:"My name"},propDateM:{$type:"application/x-date",$isMandatory:!0,$title:"Date (Mandatory)"},propDateTimeM:{$type:"application/x-datetime",$isMandatory:!0,$title:"Date+Time (Mandatory)"},propTimeM:{$type:"application/x-time",$isMandatory:!0,$title:"Time (Mandatory)"},propIntM:{$type:"application/x-integer",$isMandatory:!0,$title:"Integer (Mandatory)"},propDecimalM:{$type:"application/x-decimal",$isMandatory:!0,$title:"Decimal (Mandatory)"},propRealM:{$type:"application/x-real",$isMandatory:!0,$title:"Real (Mandatory)"},propBooleanM:{$type:"application/x-boolean",$isMandatory:!0,$title:"Boolean (Mandatory)"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,s={$uuid:""+r,propString:"Simple String="+r,propDate:"2014-03-"+r,propDateTime:"2014-06-"+r+"T12:45:"+(r+44)+".234Z",propTime:"15:45:"+(r+34),propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10),propReal:Math.sqrt(r*1e3+r*30),propBoolean:i=!i};return n.resolve(s),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}};t.entity=o}),define("syracuse-tablet/html/js/sdata/entities/test/testFormats",["require","exports","module"],function(e,t,n){var r=[],i=!1;for(var s=0;s<10;s++)r.push({$uuid:""+s,propDate1:"2014-03-"+(s+20),propDateTime1:"2014-06-"+(s+10)+" 12:45:"+(s+44),propTime1:"15:45:"+(s+34),propInt1:s*1e3+s*10,propDecimal1:Math.sqrt(s*1e3+s*10),propReal1:Math.sqrt(s*1e3+s*30),propDate2:"2014-03-"+(s+20),propDateTime2:"2014-06-"+(s+10)+" 12:45:"+(s+44),propTime2:"15:45:"+(s+34),propInt2:s*1e3+s*10,propDecimal2:Math.sqrt(s*1e3+s*10),propReal2:Math.sqrt(s*1e3+s*30)});t.entity={$entityName:"testFormats",$properties:{propDate1:{$type:"application/x-date",$title:"Date"},propDateTime1:{$type:"application/x-datetime",$title:"Date+Time"},propTime1:{$type:"application/x-time",$title:"Time"},propInt1:{$type:"application/x-integer",$title:"Integer"},propDecimal1:{$type:"application/x-decimal",$title:"Decimal"},propReal1:{$type:"application/x-real",$title:"Real"},propDate2:{$type:"application/x-date",$title:"Date"},propDateTime2:{$type:"application/x-datetime",$title:"Date+Time"},propTime2:{$type:"application/x-time",$title:"Time"},propInt2:{$type:"application/x-integer",$title:"Integer"},propDecimal2:{$type:"application/x-decimal",$title:"Decimal"},propReal2:{$type:"application/x-real",$title:"Real"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve({}),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testFormatsReference",["require","exports","module"],function(e,t,n){var r=["Labe","Labuan","La Rochelle","Las Vegas","Las Palmas","Liege","Libreville","Lille","Liverpool","Leipzig","Lucknow","London"],i=["LEK","LBU","LRH","LAS","LPA","LGG","LBV","LIL","LPL","LEJ","LKO","LON"],s={SITE_REF:{$description:"Paris",FCY:"PAR"},SITE_REF_1:{$description:"Yaounde",FCY:"YDE"},SITE_REF_2:{$description:"London",FCY:"LON"},SITE_REF_3:{$description:"Lisbon",FCY:"LIS"}},o=[],u=-1,a=-1;for(var f=0;f<3;f++)o.push({$uuid:""+f,SITE_REF:{$description:r[++u],FCY:i[++a]},SITE_REF_1:{$description:r[++u],FCY:i[++a]},SITE_REF_2:{$description:r[++u],FCY:i[++a]},SITE_REF_3:{$description:r[++u],FCY:i[++a]}});t.entity={$entityName:"testFormatsReference",$baseUrl:"http://localhost:8124/mobile1/x3/erp/SUPERV",$properties:{SITE:{$type:"application/x-string",$maxLength:5,$isExcluded:!0},SITE_REF:{$type:"application/x-reference",$title:"Reference",$shortTitle:"Reference",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_1:{$type:"application/x-reference",$title:"Reference 1",$shortTitle:"Reference 1",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_2:{$type:"application/x-reference",$title:"Reference 2",$shortTitle:"Reference 2",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}},SITE_REF_3:{$type:"application/x-reference",$title:"Reference 3",$shortTitle:"Reference 3",$capabilities:"sort,filter",$item:{$url:"{$baseUrl}/testFormatsReference('{$key}')?representation=testFormatsReference.$lookup",$value:"{FCY}",FCY:"{SITE}",$key:"{FCY}",$properties:{FCY:{$type:"application/x-string"}},$links:{$details:{$title:"details",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference('{SITE}')?representation=testFormatsReference.$details",$method:"GET"},$lookup:{$title:"lookup",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$lookup",$method:"GET"},$query:{$title:"query",$target:"",$type:"application/json;vnd.sage=syracuse",$url:"{$baseUrl}/testFormatsReference?representation=testFormatsReference.$query",$method:"GET"},SIT1:{$title:"SIT1",$target:"main",$type:"application/json;vnd.sage=syracuse",$url:"https://maps.google.de/maps?q={SITE}&t=Default",$method:"GET"}}}}},$relations:{},$articles:{$details:{$layoutType:"stack",$items:[{$bind:"SITE_REF",$title:"Ref field 1"},{$bind:"SITE_REF_1",$title:"Ref field 2"},{$bind:"SITE_REF_2",$title:"Ref field 3"},{$bind:"SITE_REF_3",$title:"Ref field 4"}]},$edit:{$layoutType:"stack",$items:[{$bind:"SITE_REF",$title:"Ref field 1"},{$bind:"SITE_REF_1",$title:"Ref field 2"},{$bind:"SITE_REF_2",$title:"Ref field 3"},{$bind:"SITE_REF_3",$title:"Ref field 4"}]}},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve({}),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(s),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:o}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testCharts",["require","exports","module"],function(e,t,n){var r=[{part:"Gear",value:50,revenue:40,margin:10},{part:"Motor",value:60,revenue:40,margin:20},{part:"Head drive",value:60,revenue:80,margin:-20},{part:"Handwheel",value:70,revenue:90,margin:10},{part:"Crank",value:70,revenue:70,margin:0},{part:"Saddle",value:80,revenue:30,margin:50},{part:"Base",value:20,revenue:40,margin:-20},{part:"Spindle",value:10,revenue:0,margin:10}];t.entity={$entityName:"testCharts",$properties:{part:{$type:"application/x-string",$title:"Item"},value:{$type:"application/x-decimal",$title:"Value",$format:"0.0000"},revenue:{$type:"application/x-decimal",$title:"Revenue",$format:"0.0000"},margin:{$type:"application/x-decimal",$title:"Margin",$format:"0.0000"}},$prototype:function(e){var t=e.$properties&&e.$properties.$resources;t&&(t.$axes=[{$title:"Item",$hierarchies:[["part"]]},{$hierarchies:[["$measures"]]}],t.$cube={$title:"Sales overview",$hierarchies:{part:{$properties:["part"]}},$measures:{value:{},revenue:{},margin:{}}})},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testConstraints",["require","exports","module"],function(e,t,n){var r=[],i=!1;for(var s=0;s<10;s++)r.push({$uuid:""+s,propString:"Test "+s,propString2:"Some text "+s,propString3:"Fill me "+s,propInt:s*1e3+s*10,propInt2:s*1e3+s*100,propDecimal:Math.sqrt(s*1e3+s*10),propDecimal2:Math.sqrt(s*1e3+s*100),propDecimal3:Math.sqrt(s*1e3+s*110),propDecimal4:Math.sqrt(s*1e3+s*120),propQuantity:s*123,propStringUnit:"EUR"});t.entity={$entityName:"testConstraints",$properties:{propString:{$title:"Test: $pattern=Test.*\\d$",$type:"application/x-string",$isMandatory:!0,$pattern:"Test.*\\d$"},propString2:{$title:"Test: $minLength=5, $maxLength=15",$type:"application/x-string",$isMandatory:!0,$minLength:5,$maxLength:15},propString3:{$title:"Test: $minLength=5, $maxLength=15, $pattern=Fill me.*\\d$",$type:"application/x-string",$isMandatory:!0,$pattern:"Fill me.*\\d$",$minLength:5,$maxLength:15},propInt:{$title:"Test: $minimum=100, $maximum=200",$type:"application/x-integer",$isMandatory:!0,$minimum:100,$maximum:200},propInt2:{$title:"Test: $exclusiveMinimum=100, $exclusiveMaximum=200",$type:"application/x-integer",$isMandatory:!0,$exclusiveMinimum:100,$exclusiveMaximum:200},propDecimal:{$title:"Test: $format=0.0000",$type:"application/x-decimal",$isMandatory:!0,$format:"0.0000"},propDecimal2:{$title:"Test: $format=0.00",$type:"application/x-decimal",$isMandatory:!0,$format:"0.00"},propDecimal3:{$title:"Test: $precision=10",$type:"application/x-decimal",$isMandatory:!0,$precision:10},propDecimal4:{$title:"Test: $scale=3",$type:"application/x-decimal",$isMandatory:!0,$scale:3,$format:"0.00000"},propQuantity:{$title:"Test: $format=0.00",$isMandatory:!0,$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$title:"Unit for quantity",$type:"application/x-string",$isMandatory:!1,$isExcluded:!0}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,i={$uuid:""+r,propString:"Simple String="+r,propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10)};return n.resolve(i),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateTo",["require","exports","module"],function(e,t,n){var r=[];for(var i=0;i<10;i++)r.push({$uuid:""+i,name:"Customer group "+i,group:""+i});t.entity={$entityName:"testNavigateTo",$properties:{name:{$title:"Customer group name",$type:"application/x-string"},group:{$title:"Customer group",$type:"application/x-string"}},$prototype:function(e){var t=e.$properties&&e.$properties.$resources&&e.$properties.$resources.$item&&e.$properties.$resources.$item.$links||{};t.DASHBOARD={$title:"Show details",$url:"{$baseUrl}/$mobileDashboards?dashboard=testContextDashboardChild&parameters=group%3D%7Bgroup%7D"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,i={$uuid:""+r,propString:"Simple String="+r,propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10)};return n.resolve(i),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild",["require","exports","module"],function(e,t,n){var r=[];for(var i=0;i<10;i++)for(var s=0;s<10;s++)r.push({$uuid:""+(i*10+s),name:"Customer "+i*10+s,desc:"Belongs to group "+i,group:""+i});t.entity={$entityName:"testNavigateToChild",$properties:{name:{$title:"Customer name",$type:"application/x-string"},desc:{$title:"Description",$type:"application/x-string"},group:{$title:"Customer group",$type:"application/x-string"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,i={$uuid:""+r,propString:"Simple String="+r,propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10)};return n.resolve(i),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow",["require","exports","module"],function(e,t,n){var r=[],i=!1;for(var s=0;s<10;s++)r.push({$uuid:""+s,propStringShow:"Simple String="+s,propStringHide:"Simple String="+s,propStringReadOnly:"ReadOnly String="+s,propStringDisabled:"Disabled=true String="+s,propStringDisabledFalse:"Disabled=false String="+s,propDate:"2014-03-"+(s+20),propDateHide:"2014-03-"+(s+20),propDateDisabled:"2014-03-"+(s+20),propDateReadOnly:"2014-03-"+(s+20),propDateTime:"2014-06-"+(s+10)+"T12:45:"+(s+44)+".123Z",propDateTimeHide:"2014-06-"+(s+10)+"T12:45:"+(s+44)+".123Z",propDateTimeDisabled:"2014-06-"+(s+10)+"T12:45:"+(s+44)+".123Z",propTime:"15:45:"+(s+34),propTimeHide:"15:45:"+(s+34),propTimeDisabled:"15:45:"+(s+34),propInt:s*1e3+s*10,propIntHide:s*1e3+s*10,propIntDisabled:s*1e3+s*10,propIntReadOnly:s*1e3+s*10,propDecimal:Math.sqrt(s*1e3+s*10),propDecimalHide:Math.sqrt(s*1e3+s*10),propDecimalDisabled:Math.sqrt(s*1e3+s*10),propDecimalReadOnly:Math.sqrt(s*1e3+s*10),propReal:Math.sqrt(s*1e3+s*30),propBoolean:i=!i,propBooleanHidden:i=!i,propBooleanDisabled:i=!i,propChoice:"mr",propChoiceHidden:"mr",propChoiceDisabled:"mr",propQuantity:s*123,propStringUnit:"EUR",propQuantityExcluded:s*123,propStringUnitExcluded:"USD"});t.entity={$entityName:"testPropertyHideShow",$properties:{propStringShow:{$type:"application/x-string",$isMandatory:!0,$title:"String Mandatory $isHidden: false",$isHidden:!1},propStringHide:{$type:"application/x-string",$isMandatory:!1,$title:"String $isHidden: true",$isHidden:!0},propStringReadOnly:{$type:"application/x-string",$title:"String $isReadOnly: true",$isReadOnly:!0},propStringDisabledFalse:{$type:"application/x-string",$title:"String $isDisabled: false",$isDisabled:!1},propStringDisabled:{$type:"application/x-string",$title:"String $isDisabled: true",$isDisabled:!0},propDate:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isHidden: false",$isHidden:!1},propDateHide:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isHidden: true",$isHidden:!0},propDateDisabled:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isDisabled: true",$isDisabled:!0},propDateReadOnly:{$type:"application/x-date",$isMandatory:!1,$title:"Date $isReadOnly: true",$isReadOnly:!0},propDateTime:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isHidden: false",$isHidden:!1},propDateTimeHide:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isHidden: true",$isHidden:!0},propDateTimeDisabled:{$type:"application/x-datetime",$isMandatory:!1,$title:"Date+Time $isDisabled: true",$isDisabled:!0},propTime:{$type:"application/x-time",$isMandatory:!1,$title:"Time long",$format:"TT"},propTimeHide:{$type:"application/x-time",$isMandatory:!1,$title:"Time $isHidden: true",$isHidden:!0},propTimeDisabled:{$type:"application/x-time",$isMandatory:!1,$title:"Time $isDisabled: true",$isDisabled:!0},propInt:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isHidden: false)",$isHidden:!1},propIntHide:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isHidden: true)",$isHidden:!0},propIntDisabled:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isDisabled: true)",$isDisabled:!0},propIntReadOnly:{$type:"application/x-integer",$isMandatory:!1,$title:"Integer ($isReadOnly: true)",$isReadOnly:!0},propDecimal:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isHidden: false",$isHidden:!1},propDecimalHide:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isHidden: true",$isHidden:!0},propDecimalDisabled:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isDisabled: true",$isDisabled:!0},propDecimalReadOnly:{$type:"application/x-decimal",$isMandatory:!1,$title:"Decimal $isReadOnly: true",$isReadOnly:!0},propReal:{$type:"application/x-real",$isMandatory:!1,$title:"Real"},propBoolean:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean"},propBooleanHidden:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean ($isHidden: true)",$isHidden:!0},propBooleanDisabled:{$type:"application/x-boolean",$isMandatory:!1,$title:"Boolean ($isDisabled: true)",$isDisabled:!0},propChoice:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice",$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propChoiceHidden:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice($isHidden: true)",$isHidden:!0,$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propChoiceDisabled:{$type:"application/x-choice",$isMandatory:!1,$title:"Choice ($isDisabled: true)",$isDisabled:!0,$value:{$enum:[{$title:"Mr.",$value:"mr"},{$title:"Mrs.",$value:"mrs"}],$type:"application/x-string"}},propQuantity:{$title:"Quantity ($unit $isExcluded: false)",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnit"},propStringUnit:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!1,$title:"Unit for quantity ($isExcluded: false)"},propQuantityExcluded:{$title:"Quantity($unit $isExcluded: true)",$type:"application/x-quantity",$value:{$title:"{$value} {$unit}",$type:"application/x-decimal",$scale:9,$precision:2,$format:"0.00"},$unit:"propStringUnitExcluded"},propStringUnitExcluded:{$type:"application/x-string",$isMandatory:!1,$isExcluded:!0,$title:"Unit for quantity ($isExcluded: true)"}},$relations:{},$articles:{},$services:{$new:function(e,t){var n=$.Deferred(),r=15,s={$uuid:""+r,propString:"Simple String="+r,propDate:"2014-03-"+r,propDateTime:"2014-06-"+r+"T12:45:"+(r+44)+".234Z",propTime:"15:45:"+(r+34),propInt:r*1e3+r*10,propDecimal:Math.sqrt(r*1e3+r*10),propReal:Math.sqrt(r*1e3+r*30),propBoolean:i=!i};return n.resolve(s),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGaugeChart",["require","exports","module"],function(e,t,n){var r={salesOp:"75.0000000000",salesValue:"133000.0000000000",salesValueMin:"100000.0000000000",salesValueMax:"150000.0000000000"},i={$entityName:"testGaugeChart",$properties:{salesOp:{$title:"sale opportunity",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValue:{$title:"sales value",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValueMin:{$title:"sales value min",$type:"application/x-decimal",$capabilities:"sort,filter"},salesValueMax:{$title:"sales value max",$type:"application/x-decimal",$capabilities:"sort,filter"}},$relations:{},$articles:{},$services:{$read:function(e,t){var n=$.Deferred();return n.resolve(r),n.promise()}}};t.entity=i}),define("syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testHomeDashboard:{$dashboardName:"testHomeDashboard",$title:"Main test dashboard",$description:"This dashboard links to different dashboards used for every kind of UI tests",$vignettes:{testLayoutsDashboard:{$uuid:"testLayoutsDashboard",$displayStyle:"$link"},testTypesDashboard:{$uuid:"testTypesDashboard",$displayStyle:"$link"},testTypesDashboard2:{$uuid:"testTypesDashboard2",$displayStyle:"$link"},testFormatsDashboard:{$uuid:"testFormatsDashboard",$displayStyle:"$link"},testGX3APPDashboard:{$uuid:"testGX3APPDashboard",$displayStyle:"$link"},testSUPERVDashboard:{$uuid:"testSUPERVDashboard",$displayStyle:"$link"},testChartsDashboard:{$uuid:"testChartsDashboard",$displayStyle:"$link"},testSUPERVDashboard2:{$uuid:"testSUPERVDashboard2",$displayStyle:"$link"},testGX3APPDashboard2:{$uuid:"testGX3APPDashboard2",$displayStyle:"$link"},testConstraintsDashboard:{$uuid:"testConstraintsDashboard",$displayStyle:"$link"},testContextDashboard:{$uuid:"testContextDashboard",$displayStyle:"$link"},testPropertyHideShowDashboard:{$uuid:"testPropertyHideShowDashboard",$displayStyle:"$link"},testAQTACTNPDashboard:{$uuid:"testAQTACTNPDashboard",$displayStyle:"$link"},testSyDevDashboard:{$uuid:"testSyDevDashboard",$displayStyle:"$link"},testGaugeChartDashboard:{$uuid:"testGaugeChartDashboard",$displayStyle:"$link"},testGridDashboard:{$uuid:"testGridDashboard",$displayStyle:"$link"},testDefaultAQTCRUDM:{$uuid:"testDefaultAQTCRUDM",$displayStyle:"$link"},testDefaultAQMCRUDM:{$uuid:"testDefaultAQMCRUDM",$displayStyle:"$link"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Client only",$items:[{$layoutType:"tile",$bgColor:"magenta",$items:[{$bind:"testLayoutsDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"brown",$items:[{$bind:"testFormatsDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"brown",$items:[{$bind:"testTypesDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"red",$items:[{$bind:"testConstraintsDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"lime",$items:[{$bind:"testChartsDashboard"}],$size:"medium"},{$layoutType:"tile",$bgColor:"blue",$items:[{$bind:"testContextDashboard"}],$size:"medium"},{$layoutType:"tile",$bgColor:"purple",$items:[{$bind:"testPropertyHideShowDashboard"}],$size:"small"},{$layoutType:"tile",$bgColor:"lime",$items:[{$bind:"testGaugeChartDashboard"}],$size:"small"}]},{$layoutType:"hubGroup",$title:"SUPERV endpoint",$items:[{$layoutType:"tile",$bgColor:"green",$items:[{$bind:"testSUPERVDashboard"}]},{$layoutType:"tile",$bgColor:"teal",$items:[{$bind:"testGridDashboard"}]}]},{$layoutType:"hubGroup",$title:"GX3APP endpoint",$items:[{$layoutType:"tile",$bgColor:"blue",$items:[{$bind:"testGX3APPDashboard"}]},{$layoutType:"tile",$bgColor:"teal",$items:[{$bind:"testGX3APPDashboard2"}]}]},{$layoutType:"hubGroup",$title:"SYDEV endpoint",$items:[{$layoutType:"tile",$bgColor:"magenta",$items:[{$bind:"testSyDevDashboard"}]}]},{$layoutType:"hubGroup",$title:"Default endpoint",$items:[{$layoutType:"tile",$bgColor:"red",$items:[{$bind:"testAQTACTNPDashboard"}]},{$layoutType:"tile",$bgColor:"brown",$items:[{$bind:"testTypesDashboard2"}],$size:"medium"},{$layoutType:"tile",$bgColor:"teal",$items:[{$bind:"testDefaultAQTCRUDM"}]},{$layoutType:"tile",$bgColor:"teal",$items:[{$bind:"testDefaultAQMCRUDM"}]}]}]}}},t.gadgets={testLayoutsDashboard:{$type:"$dashboard",$title:"Layout tests",$description:"Layout tests",dashboardName:"testLayoutsDashboard"},testTypesDashboard:{$type:"$dashboard",$title:"Datatype tests",$description:"Datatype tests",dashboardName:"testTypesDashboard"},testTypesDashboard2:{$type:"$dashboard",$title:"Datatype AQTCRUD",$description:"Datatype AQTCRUD",dashboardName:"testTypesDashboard2"},testFormatsDashboard:{$type:"$dashboard",$title:"Formats tests",$description:"Formats tests",dashboardName:"testFormatsDashboard"},testGX3APPDashboard:{$type:"$dashboard",$title:"GX3APP tests",$description:"GX3APP tests",dashboardName:"testGX3APPDashboard"},testSUPERVDashboard:{$type:"$dashboard",$title:"SUPERV tests",$description:"SUPERV tests",dashboardName:"testSUPERVDashboard"},testChartsDashboard:{$type:"$dashboard",$title:"Charts tests",$description:"Charts tests",dashboardName:"testChartsDashboard"},testSUPERVDashboard2:{$type:"$dashboard",$title:"AQMCRUDM",$description:"AQMCRUDM default endpoint",dashboardName:"testSUPERVDashboard2"},testGX3APPDashboard2:{$type:"$dashboard",$title:"GX3APP Cost",$description:"GX3APP Cost",dashboardName:"testGX3APPDashboard2"},testConstraintsDashboard:{$type:"$dashboard",$title:"SData constraints",$description:"SData constraints",dashboardName:"testConstraintsDashboard"},testContextDashboard:{$type:"$dashboard",$title:"Dashboard with context",$description:"Dashboard with context",dashboardName:"testContextDashboard"},testPropertyHideShowDashboard:{$type:"$dashboard",$title:"Property Hide Show",$description:"Dashboard PropertyHideShow",dashboardName:"testPropertyHideShowDashboard"},testAQTACTNPDashboard:{$type:"$dashboard",$title:"AQTACTNP Create facet",$description:"AQTACTNP Create facet",dashboardName:"testAQTACTNPDashboard"},testSyDevDashboard:{$type:"$dashboard",$title:"Sydev entities",$description:"Sydev entities",dashboardName:"testSyDevDashboard"},testGaugeChartDashboard:{$type:"$dashboard",$title:"Test gauge chart",$description:"Test gauge chart",dashboardName:"testGaugeChartDashboard"},testGridDashboard:{$type:"$dashboard",$title:"Test grid authoring",$description:"Test grid authoring",dashboardName:"testGridDashboard"},testDefaultAQTCRUDM:{$type:"$dashboard",$title:"AQTCRUDM",$description:"Test AQTCRUDM",dashboardName:"testDefaultAQTCRUDM"},testDefaultAQMCRUDM:{$type:"$dashboard",$title:"AQMCRUDM",$description:"Test AQMCRUDM",dashboardName:"testDefaultAQMCRUDM"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testLayoutsDashboard:{$dashboardName:"testLayoutsDashboard",$title:"Layout test dashboard",$description:"Test different kinds of layouts",$vignettes:{testLayoutHubDashboard:{$uuid:"testLayoutHubDashboard",$displayStyle:"$link"},testLayoutRowsDashboard:{$uuid:"testLayoutRowsDashboard",$displayStyle:"$link"},testLongQuery:{$uuid:"testLongQuery",$displayStyle:"$link"},testHubLayoutEntity:{$uuid:"testHubLayoutEntity",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"150px",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLayoutHubDashboard"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLayoutRowsDashboard"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLongQuery"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testHubLayoutEntity"}]}]}]}},testLayoutHubDashboard:{$dashboardName:"testLayoutHubDashboard",$title:"Hub dashboard (scroll horizontal)",$description:"Horizontal scrolling dashboard",$vignettes:{testDummyTile:{$uuid:"testDummyTile",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Layout group 1",$items:[{$layoutType:"tile",$bgColor:"lime",$items:[{$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"name",$labelPosition:"left"},{$bind:"desc",$labelPosition:"top"},{$bind:"desc2",$labelPosition:"right"},{$bind:"desc2",$labelAlign:"right"},{$bind:"amount",$labelPosition:"bottom"},{$bind:"amount",$isTitleHidden:!0}]}}],$size:"full"},{$layoutType:"tile",$bgColor:"purple",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$bgColor:"teal",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bgColor:"lime",$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$bgColor:"brown",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$bgColor:"pink",$items:[{$bind:"testDummyTile"}],$size:"wide"},{$layoutType:"tile",$bgColor:"orange",$items:[{$bind:"testDummyTile"}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Layout group 2",$items:[{$layoutType:"tile",$bgColor:"blue",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$bgColor:"red",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$bgColor:"green",$items:[{$bind:"testDummyTile"}],$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 3",$items:[{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"wide"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 4",$items:[{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"medium"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"medium"}]},{$layoutType:"hubGroup",$title:"Layout group 5",$items:[{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"wide"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"full"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"},{$layoutType:"tile",$items:[{$bind:"testDummyTile"}],$size:"small"}]}]}},testLayoutRowsDashboard:{$dashboardName:"testLayoutRowsDashboard",$title:"Row layout dashboard (scroll vertical)",$description:"Vertical scrolling dashboard",$vignettes:{testDummyTile:{$uuid:"testDummyTile",$displayStyle:"$full"},testDummyTileLink:{$uuid:"testDummyTile",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"100px",$items:[{$layoutType:"cell",$widthLg:"3",$widthSm:"6",$widthXs:"12",$widthMd:"4",$items:[{$bind:"testDummyTileLink",$article:{}}]},{$layoutType:"cell",$widthLg:"3",$widthSm:"6",$widthXs:"12",$widthMd:"4",$items:[{$bind:"testDummyTileLink",$article:{}}]},{$layoutType:"cell",$widthLg:"3",$widthSm:"6",$widthXs:"12",$widthMd:"4",$items:[{$bind:"testDummyTileLink",$article:{}}]},{$layoutType:"cell",$widthLg:"3",$widthSm:"6",$widthXs:"12",$widthMd:"12",$items:[{$bind:"testDummyTileLink",$article:{}}]}]},{$layoutType:"row",$rowHeight:"200px",$items:[{$layoutType:"cell",$widthLg:"6",$widthSm:"6",$widthXs:"12",$items:[{$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"desc"},{$bind:"desc2"},{$bind:"amount"}]}}]},{$layoutType:"cell",$widthLg:"6",$widthSm:"6",$widthXs:"12",$items:[{$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"desc"},{$bind:"desc2"},{$bind:"amount"}]}}]},{$layoutType:"cell",$items:[{$widthLg:"3",$widthSm:"4",$widthXs:"12",$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"desc"},{$bind:"desc2"},{$bind:"amount"}]}}]},{$layoutType:"cell",$items:[{$widthLg:"3",$widthSm:"12",$widthXs:"12",$bind:"testDummyTile",$article:{$layoutType:"stack",$items:[{$bind:"name"},{$bind:"desc"},{$bind:"desc2"},{$bind:"amount"}]}}]}]}]}}},t.gadgets={testLayoutHubDashboard:{$type:"$dashboard",$title:"Hub Layout tests",$description:"Hub Layout tests",dashboardName:"testLayoutHubDashboard"},testLayoutRowsDashboard:{$type:"$dashboard",$title:"Rows Layout tests",$description:"Rows Layout tests",dashboardName:"testLayoutRowsDashboard"},testDummyTile:{$type:"$representation",$title:"Dummy",$description:"Dummy",entity:"example",action:"$details",representation:"example",facet:"$details",keyParameter:"5"},testLongQuery:{$type:"$representation",$title:"Long query",$description:"Query",entity:"example",action:"$query",representation:"example",facet:"$query"},testHubLayoutEntity:{$type:"$representation",$title:"Hub Layout on Representation",$description:"Hub Layout on Representation",entity:"exampleHubLayout",action:"$details",representation:"exampleHubLayout",facet:"$details",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testTypesDashboard:{$dashboardName:"testTypesDashboard",$title:"Datatypes test dashboard",$description:"Test different kinds of datatypes",$vignettes:{testLinkQueryRecord:{$uuid:"testDisplayQueryRecord",$displayStyle:"$link"},testLinkDetailsRecord:{$uuid:"testDisplayDetailsRecord",$displayStyle:"$link"},testLinkEditRecord:{$uuid:"testDisplayEditRecord",$displayStyle:"$link"},testLinkCreateRecord:{$uuid:"testDisplayCreateRecord",$displayStyle:"$link"},testDisplayQueryRecord:{$uuid:"testDisplayQueryRecord",$displayStyle:"$full"},testDisplayDetailsRecord:{$uuid:"testDisplayDetailsRecord",$displayStyle:"$full"},testDisplayEditRecord:{$uuid:"testDisplayEditRecord",$displayStyle:"$full"},testDisplayCreateRecord:{$uuid:"testDisplayCreateRecord",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"100px",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkQueryRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkDetailsRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkEditRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkCreateRecord"}]}]},{$layoutType:"row",$rowHeight:"300px",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayQueryRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayDetailsRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayEditRecord"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayCreateRecord"}]}]}]}}},t.gadgets={testDisplayDetailsRecord:{$type:"$representation",$title:"Details facet",entity:"testDataTypes",action:"$details",representation:"testDataTypes",facet:"$details",keyParameter:"5"},testDisplayEditRecord:{$type:"$representation",$title:"Edit facet",entity:"testDataTypes",action:"$edit",representation:"testDataTypes",facet:"$edit",keyParameter:"5"},testDisplayCreateRecord:{$type:"$representation",$title:"Create facet",entity:"testDataTypes",action:"$create",representation:"testDataTypes",facet:"$create",keyParameter:"5"},testDisplayQueryRecord:{$type:"$representation",$title:"Query facet",entity:"testDataTypes",action:"$query",representation:"testDataTypes",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard2",["require","exports","module"],function(e,t,n){t.dashboards={testTypesDashboard2:{$dashboardName:"testTypesDashboard2",$title:"AQTCRUD default endpoint",$description:"AQTCRUD Representation",$vignettes:{testLinkQueryRecord2:{$uuid:"testDisplayQueryRecord2",$displayStyle:"$link"},testLinkDetailsRecord2:{$uuid:"testDisplayDetailsRecord2",$displayStyle:"$link"},testLinkEditRecord2:{$uuid:"testDisplayEditRecord2",$displayStyle:"$link"},testLinkCreateRecord2:{$uuid:"testDisplayCreateRecord2",$displayStyle:"$link"},testDisplayQueryRecord2:{$uuid:"testDisplayQueryRecord2",$displayStyle:"$full"},testDisplayDetailsRecord2:{$uuid:"testDisplayDetailsRecord2",$displayStyle:"$full"},testDisplayEditRecord2:{$uuid:"testDisplayEditRecord2",$displayStyle:"$full"},testDisplayCreateRecord2:{$uuid:"testDisplayCreateRecord2",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"100px",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkQueryRecord2"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkDetailsRecord2"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkEditRecord2"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkCreateRecord2"}]}]},{$layoutType:"row",$rowHeight:"300px",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayQueryRecord2"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayDetailsRecord2"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayEditRecord2"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayCreateRecord2"}]}]}]}}},t.gadgets={testDisplayDetailsRecord2:{$type:"$representation",$title:"Details facet",entity:"AQTCRUD",action:"$details",representation:"AQTCRUD",facet:"$details",keyParameter:"10"},testDisplayEditRecord2:{$type:"$representation",$title:"Edit facet",entity:"AQTCRUD",action:"$edit",representation:"AQTCRUD",facet:"$edit",keyParameter:"10"},testDisplayCreateRecord2:{$type:"$representation",$title:"Create facet",entity:"AQTCRUD",action:"$create",representation:"AQTCRUD",facet:"$create"},testDisplayQueryRecord2:{$type:"$representation",$title:"Query facet",entity:"AQTCRUD",action:"$query",representation:"AQTCRUD",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testFormatsDashboard:{$dashboardName:"testFormatsDashboard",$title:"Formatting test dashboard",$description:"Test different kinds of formats",$vignettes:{testFormatEditRecord:{$uuid:"testFormatEditRecord",$displayStyle:"$full"},testFormatReferenceDetail:{$uuid:"testFormatReferenceDetail",$displayStyle:"$full"},testFormatReferenceEdit:{$uuid:"testFormatReferenceEdit",$displayStyle:"$full"},testFormatReferenceQuery:{$uuid:"testFormatReferenceQuery",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"300px",$items:[{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testFormatEditRecord"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testFormatReferenceDetail"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testFormatReferenceEdit"}]}]},{$layoutType:"row",$rowHeight:"300px",$items:[{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testFormatReferenceQuery"}]}]}]}}},t.gadgets={testFormatEditRecord:{$type:"$representation",$title:"Details facet",entity:"testFormats",action:"$edit",representation:"testFormats",facet:"$edit",keyParameter:"5"},testFormatReferenceDetail:{$type:"$representation",$title:"Details facet reference fields",entity:"testFormatsReference",action:"$details",representation:"testFormatsReference",facet:"$details",keyParameter:"5"},testFormatReferenceEdit:{$type:"$representation",$title:"Edit facet reference fields",entity:"testFormatsReference",action:"$edit",representation:"testFormatsReference",facet:"$edit",keyParameter:"5"},testFormatReferenceQuery:{$type:"$representation",$title:"Query facet reference fields",entity:"testFormatsReference",action:"$query",representation:"testFormatsReference",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testGX3APPDashboard:{$dashboardName:"testGX3APPDashboard",$title:"Display data from GX3APP",$description:"Test different representations on GX3APP",$vignettes:{testACTIVQuery:{$uuid:"testACTIVQuery",$displayStyle:"$full"},testRequestVEN085:{$uuid:"testRequestVEN085",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Some data...",$items:[{$layoutType:"tile",$items:[{$bind:"testACTIVQuery"}],$size:"full"}]},{$layoutType:"hubGroup",$title:"Some fancy chart",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestVEN085"}],$size:"large"}]}]}}},t.gadgets={testACTIVQuery:{$type:"$representation",$title:"Query ACTIV",entity:"ACTIV",action:"$query",representation:"ACTIV",endpoint:"x3.erp.GX3APP",facet:"$query"},testRequestVEN085:{$type:"$request",$title:"Request VEN085",requestName:"VEN085",requestLevel:"1",action:"$query",endpoint:"x3.erp.GX3APP",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testSUPERVDashboard:{$dashboardName:"testSUPERVDashboard",$title:"Display Query AQMCRUDM",$description:"Test different representation",$vignettes:{testAQMDEVICEQuery:{$uuid:"testAQMDEVICEQuery",$displayStyle:"$full"},testAQMDEVICEQueryLink:{$uuid:"testAQMDEVICEQuery",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"500px",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testAQMDEVICEQuery"}]},{$layoutType:"cell",$widthXs:"1",$items:[{$bind:"testAQMDEVICEQueryLink"}]}]}]}}},t.gadgets={testAQMDEVICEQuery:{$type:"$representation",$title:"Query AQMCRUDM",entity:"AQMDEVICE",action:"$query",representation:"AQMCRUDM",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testChartsDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testChartsDashboard:{$dashboardName:"testChartsDashboard",$title:"Display some charts",$description:"Test different kind of charts",$vignettes:{testRequestChart:{$uuid:"testRequestChart",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Big chart (!)",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}],$size:"full"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Bar charts",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"stick"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"bar"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Line charts",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"line"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"area"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Spline charts",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"spline"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"areaspline"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Pie chart",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$style:"pie"}]}}],$size:"large"}]},{$layoutType:"hubGroup",$title:"Test different sizes/legends",$items:[{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!1,$style:"line"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$style:"line"}]}}],$size:"large"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$isXLabelHidden:!0,$isYLabelHidden:!0,$isXLabelsHidden:!0,$isYLabelsHidden:!0,$style:"line"}]}}],$size:"wide"},{$layoutType:"tile",$items:[{$bind:"testRequestChart",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!0,$isLegendHidden:!0,$isXLabelHidden:!0,$isYLabelHidden:!0,$isXLabelsHidden:!0,$isYLabelsHidden:!0,$style:"bar"}]}}],$size:"medium"}]}]}}},t.gadgets={testRequestChart:{$type:"$request",$title:"Request test",requestName:"testCharts",requestLevel:"1",action:"$query",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2",["require","exports","module"],function(e,t,n){t.dashboards={testSUPERVDashboard2:{$dashboardName:"testSUPERVDashboard2",$title:"AQMCRUDM default endpoint",$description:"Test representation AQMCRUDM",$vignettes:{testAQTCRUDQuery:{$uuid:"testAQTCRUDQuery",$displayStyle:"$full"},testAQTCRUDQueryLink:{$uuid:"testAQTCRUDQuery",$displayStyle:"$link"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"500px",$widthXs:"6,1",$items:[{$bind:"testAQTCRUDQuery"},{$bind:"testAQTCRUDQueryLink"}]}]}}},t.gadgets={testAQTCRUDQuery:{$type:"$representation",$title:"Query AQMCRUDM",entity:"AQMCRUDM",action:"$query",representation:"AQMCRUDM",facet:"$query"},testAQTCRUDQueryLink:{$type:"$representation",$title:"Query 10 AQMCRUDM",requestName:"10",requestLevel:"1",action:"$query",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2",["require","exports","module"],function(e,t,n){t.dashboards={testGX3APPDashboard2:{$dashboardName:"testGX3APPDashboard2",$title:"Display data from GX3APP",$description:"Test PRPCOSTCTR representation on GX3APP",$vignettes:{testPRPCOSTCTRQuery:{$uuid:"testPRPCOSTCTRQuery",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Some data Spending cost...",$items:[{$layoutType:"tile",$items:[{$bind:"testPRPCOSTCTRQuery"}],$size:"full"}]}]}}},t.gadgets={testPRPCOSTCTRQuery:{$type:"$representation",$title:"Query PRPCOSTCTR",entity:"PRPCOSTCTR",action:"$query",representation:"PRPCOSTCTR",endpoint:"x3.erp.GX3APP",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testConstraintsDashboard:{$dashboardName:"testConstraintsDashboard",$title:"Constraints test dashboard",$description:"Test SData constraints: https://github.com/Sage-ERP-X3/platform/wiki/Resource-Prototypes#type-constraints",$vignettes:{testConstraintsEditRecord:{$uuid:"testConstraintsEditRecord",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"500px",$items:[{$layoutType:"cell",$widthXs:"12",$items:[{$bind:"testConstraintsEditRecord"}]}]}]}}},t.gadgets={testConstraintsEditRecord:{$type:"$representation",$title:"Edit facet",entity:"testConstraints",action:"$edit",representation:"testConstraints",facet:"$edit",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testContextDashboard:{$dashboardName:"testContextDashboard",$title:"Test dashboard parameters",$description:"Test navigation to a dashboard with parameters",$vignettes:{testRecordLinkToDashboard:{$uuid:"testRecordLinkToDashboard",$displayStyle:"$full"},testRecordLinkToDashboardLink:{$uuid:"testRecordLinkToDashboardLink",$displayStyle:"$full"},testRecordLinkToDashboardSUPERV:{$uuid:"testRecordLinkToDashboardSUPERV",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"300px",$items:[{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordLinkToDashboard"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordLinkToDashboardLink"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordLinkToDashboardSUPERV"}]}]}]}},testContextDashboardChild:{$dashboardName:"testContextDashboardChild",$title:"Child dashboard",$description:"Child dashboard getting parameters that are applied to the first to vignettes but not to the last one using the same representation to gather data",$vignettes:{testRecordWithContext1:{$uuid:"testRecordWithContext",$displayStyle:"$full"},testRecordWithContext2:{$uuid:"testRecordWithContext",$displayStyle:"$full"},testRecordWithoutContext:{$uuid:"testRecordWithoutContext",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"500px",$items:[{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordWithContext1"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordWithContext2"}]},{$layoutType:"cell",$widthXs:"4",$items:[{$bind:"testRecordWithoutContext"}]}]}]}},testContextDashboardChildSUPERV:{$dashboardName:"testContextDashboardChildSUPERV",$title:"Child dashboard",$description:"Child dashboard getting parameters",$vignettes:{testRecordWithContextSUPERV:{$uuid:"testRecordWithContextSUPERV",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"300px",$items:[{$layoutType:"cell",$widthXs:"12",$items:[{$bind:"testRecordWithContextSUPERV"}]}]}]}}},t.gadgets={testRecordLinkToDashboard:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateTo",action:"$query",representation:"testNavigateTo",facet:"$query"},testRecordWithContext:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateToChild",action:"$query",representation:"testNavigateToChild",facet:"$query",parameters:{where:{value:"group eq '{group}'"}}},testRecordLinkToDashboardLink:{$type:"$dashboard",$title:"Open dashboard w/o params",dashboardName:"testContextDashboardChild"},testRecordWithoutContext:{$type:"$representation",$title:"Click to navigate",entity:"testNavigateToChild",action:"$query",representation:"testNavigateToChild",facet:"$query"},testRecordLinkToDashboardSUPERV:{$type:"$representation",$title:"Click to navigate",entity:"AQMDEVICEM",action:"$query",representation:"AQMDEVICEM",facet:"$query",endpoint:"x3.erp.SUPERV"},testRecordWithContextSUPERV:{$type:"$representation",$title:"Click to navigate",entity:"AQMDEVICEM",action:"$query",representation:"AQMDEVICEM",facet:"$query",endpoint:"x3.erp.SUPERV",parameters:{where:{value:"CODE eq {CODE}"}}}}}),define("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testPropertyHideShowDashboard:{$dashboardName:"testPropertyHideShowDashboard",$title:"PropertyHideShow test dashboard",$description:"Test different kinds of PropertyHideShow",$vignettes:{testLinkQueryRecordHS:{$uuid:"testDisplayQueryRecordHS",$displayStyle:"$link"},testLinkDetailsRecordHS:{$uuid:"testDisplayDetailsRecordHS",$displayStyle:"$link"},testLinkEditRecordHS:{$uuid:"testDisplayEditRecordHS",$displayStyle:"$link"},testLinkCreateRecordHS:{$uuid:"testDisplayCreateRecordHS",$displayStyle:"$link"},testDisplayQueryRecordHS:{$uuid:"testDisplayQueryRecordHS",$displayStyle:"$full"},testDisplayDetailsRecordHS:{$uuid:"testDisplayDetailsRecordHS",$displayStyle:"$full"},testDisplayEditRecordHS:{$uuid:"testDisplayEditRecordHS",$displayStyle:"$full"},testDisplayCreateRecordHS:{$uuid:"testDisplayCreateRecordHS",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"100px",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkQueryRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkDetailsRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkEditRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testLinkCreateRecordHS"}]}]},{$layoutType:"row",$rowHeight:"300px",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayQueryRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayDetailsRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayEditRecordHS"}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testDisplayCreateRecordHS"}]}]}]}}},t.gadgets={testDisplayDetailsRecordHS:{$type:"$representation",$title:"Details facet",entity:"testPropertyHideShow",action:"$details",representation:"testPropertyHideShow",facet:"$details",keyParameter:"5"},testDisplayEditRecordHS:{$type:"$representation",$title:"Edit facet",entity:"testPropertyHideShow",action:"$edit",representation:"testPropertyHideShow",facet:"$edit",keyParameter:"5"},testDisplayCreateRecordHS:{$type:"$representation",$title:"Create facet",entity:"testPropertyHideShow",action:"$create",representation:"testPropertyHideShow",facet:"$create",keyParameter:"5"},testDisplayQueryRecordHS:{$type:"$representation",$title:"Query facet",entity:"testPropertyHideShow",action:"$query",representation:"testPropertyHideShow",facet:"$query",keyParameter:"5"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testAQTACTNPDashboard:{$dashboardName:"testAQTACTNPDashboard",$title:"AQTACTNP Facet Create",$description:"Test Facet Create AQTACTNP",$vignettes:{testAQTACTNPCreate:{$uuid:"testAQTACTNPCreate",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"500px",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testAQTACTNPCreate"}]}]}]}}},t.gadgets={testAQTACTNPCreate:{$type:"$representation",$title:"Facet Create AQTACTNP",entity:"AQTACTNP",action:"$create",representation:"AQTACTNP",facet:"$create"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSyDevDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testSyDevDashboard:{$dashboardName:"testSyDevDashboard",$title:"Display Query AQMCRUDM from SyDev",$description:"Test different representations on SyDev",$vignettes:{testSyDev_QAQT02_Request:{$uuid:"testSyDev_QAQT02_Request",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$items:[{$layoutType:"tile",$items:[{$bind:"testSyDev_QAQT02_Request"}],$size:"full"}]}]}}},t.gadgets={testSyDev_QAQT02_Request:{$type:"$request",$title:"Request QAQT02",requestName:"QAQT02",requestLevel:"99",action:"$query",endpoint:"x3.erp.SYDEV",facet:"$query"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGridDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testGridDashboard:{$dashboardName:"testGridDashboard",$title:"Arrays - Test dashboard",$description:"Arrays - Test dashboard",$vignettes:{testAQMDEVICEQueryGrid:{$uuid:"testAQMDEVICEQueryGrid",$displayStyle:"$full"},testAQMDEVICEDetailGrid:{$uuid:"testAQMDEVICEDetailGrid",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"AQMCRUDM.$Query - Table Mode",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"testAQMDEVICEQueryGrid",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$title:"QUERY - $display=table",$display:"table",$article:{$items:[{$bind:"CODE"},{$bind:"CODECHR"},{$bind:"TEXTDES0"},{$bind:"CUR_REF"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"AQMCRUDM.$Query - Vertical Cards - Multiple",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"testAQMDEVICEQueryGrid",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"cardV",$cardsPerRow:1,$emptycell:"filled",$article:{$items:[{$bind:"CODE"},{$bind:"CODECHR"},{$bind:"TEXTDES0"},{$bind:"CUR_REF"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"AQMCRUDM.$Query - Vertical Cards - Single",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"testAQMDEVICEQueryGrid",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"cardV",$cardsPerRow:3,$emptycell:"filled",$article:{$items:[{$bind:"CODE"},{$bind:"CODECHR"},{$bind:"TEXTDES0"},{$bind:"CUR_REF"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"$Details facet",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"testAQMDEVICEDetailGrid"}]}]}]}}},t.gadgets={testAQMDEVICEQueryGrid:{$type:"$representation",$title:"Query AQMCRUDM",entity:"AQMDEVICE",action:"$query",representation:"AQMCRUDM",facet:"$query"},testAQMDEVICEDetailGrid:{$type:"$representation",$title:"Detail AQMCRUDM",entity:"AQMDEVICE",action:"$details",representation:"AQMCRUDM",facet:"$details",keyParameter:"1"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQTCRUDMDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testDefaultAQTCRUDM:{$dashboardName:"testDefaultAQTCRUDM",$title:"AQTCRUDM default endpoint",$description:"AQTCRUDM Representation",$vignettes:{testDefaultAQTCRUDM_AQTCRUDM_QUERY:{$uuid:"testDefaultAQTCRUDM_AQTCRUDM_QUERY",$displayStyle:"$full"},testDefaultAQTCRUDM_AQTCRUDM_DETAIL:{$uuid:"testDefaultAQTCRUDM_AQTCRUDM_DETAIL",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"400px",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQTCRUDM_AQTCRUDM_QUERY"}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQTCRUDM_AQTCRUDM_DETAIL"}]}]}]}}},t.gadgets={testDefaultAQTCRUDM_AQTCRUDM_QUERY:{$type:"$representation",$title:"Query facet",entity:"AQTCRUDM",action:"$query",representation:"AQTCRUDM",facet:"$query"},testDefaultAQTCRUDM_AQTCRUDM_DETAIL:{$type:"$representation",$title:"Details facet",entity:"AQTCRUDM",action:"$details",representation:"AQTCRUDM",facet:"$details",keyParameter:"10"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMCRUDMDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testDefaultAQMCRUDM:{$dashboardName:"testDefaultAQMCRUDM",$title:"AQMCRUDM default endpoint",$description:"AQMCRUDM Representation",$vignettes:{testDefaultAQMCRUDM_AQMCRUDM_QUERY:{$uuid:"testDefaultAQMCRUDM_AQMCRUDM_QUERY",$displayStyle:"$full"},testDefaultAQMCRUDM_AQMCRUDM_DETAIL:{$uuid:"testDefaultAQMCRUDM_AQMCRUDM_DETAIL",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$rowHeight:"700px",$items:[{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQMCRUDM_AQMCRUDM_QUERY",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$title:"QUERY - $display=table, bind some unexistant fields",$display:"table",$article:{$items:[{$bind:"CODE"},{$bind:"CPY_REF"},{$bind:"CUR_REF"},{$bind:"I_do_not_exist"}]}}]}}]},{$layoutType:"cell",$widthXs:"6",$items:[{$bind:"testDefaultAQMCRUDM_AQMCRUDM_DETAIL"}]}]}]}}},t.gadgets={testDefaultAQMCRUDM_AQMCRUDM_QUERY:{$type:"$representation",$title:"Query facet",entity:"AQMCRUDM",action:"$query",representation:"AQMCRUDM",facet:"$query"},testDefaultAQMCRUDM_AQMCRUDM_DETAIL:{$type:"$representation",$title:"Details facet",entity:"AQMCRUDM",action:"$details",representation:"AQMCRUDM",facet:"$details",keyParameter:"10"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard",["require","exports","module"],function(e,t,n){t.dashboards={testGaugeChartDashboard:{$dashboardName:"testGaugeChartDashboard",$title:"Gauge chart test dashboard",$description:"Test different gauge charts authoring",$vignettes:{testGauge:{$uuid:"testGauge",$displayStyle:"$full"}},$article:{$layoutType:"stack",$items:[{$layoutType:"row",$items:[{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesOp",$gauge:{}}]}}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesOp",$gauge:{segments:[{propStart:0,propEnd:.75},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1}]}}]}}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesValue",$gauge:{$bindMin:"salesValueMin",$bindMax:"salesValueMax",segments:[{propStart:0,propEnd:.75},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1}]}}]}}]},{$layoutType:"cell",$widthXs:"3",$items:[{$bind:"testGauge",$article:{$layoutType:"stack",$items:[{$bind:"salesValue",$gauge:{$bindMin:"salesValueMin",$bindMax:"salesValueMax",segments:[{valStart:1e5,valEnd:13e4,color:"#DF5353"},{valStart:13e4,valEnd:14e4},{valStart:14e4,valEnd:15e4,color:"#55BF3B"}]}}]}}]}]}]}}},t.gadgets={testGauge:{$type:"$representation",$title:"Gauge 1",entity:"testGaugeChart",action:"$details",representation:"testGaugeChart",facet:"$details"}}}),define("syracuse-tablet/html/js/sdata/entities/test/testApplication",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/sdata/entities/test/example","syracuse-tablet/html/js/sdata/entities/test/exampleHubLayout","syracuse-tablet/html/js/sdata/entities/test/testDatatypes","syracuse-tablet/html/js/sdata/entities/test/testFormats","syracuse-tablet/html/js/sdata/entities/test/testFormatsReference","syracuse-tablet/html/js/sdata/entities/test/testCharts","syracuse-tablet/html/js/sdata/entities/test/testConstraints","syracuse-tablet/html/js/sdata/entities/test/testNavigateTo","syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild","syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow","syracuse-tablet/html/js/sdata/entities/test/testGaugeChart","syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard","syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard","syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard","syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard2","syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard","syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard","syracuse-tablet/html/js/sdata/entities/test/testChartsDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2","syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2","syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard","syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard","syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard","syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard","syracuse-tablet/html/js/sdata/entities/test/testSyDevDashboard","syracuse-tablet/html/js/sdata/entities/test/testGridDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQTCRUDMDashboard","syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMCRUDMDashboard","syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard"],function(e,t,n){function H(e){e.gadgets&&Object.keys(e.gadgets).forEach(function(t){P.$gadgets[t]&&console.log("Duplicate gadget name: "+t),P.$gadgets[t]=e.gadgets[t]}),e.dashboards&&Object.keys(e.dashboards).forEach(function(t){P.$dashboards[t]&&console.log("Duplicate dashboard name: "+t),P.$dashboards[t]=e.dashboards[t]})}var r=e("syracuse-tablet/html/js/sdata/entities/clientContract"),i=e("syracuse-tablet/html/js/sdata/entities/test/example"),s=e("syracuse-tablet/html/js/sdata/entities/test/exampleHubLayout"),o=e("syracuse-tablet/html/js/sdata/entities/test/testDatatypes"),u=e("syracuse-tablet/html/js/sdata/entities/test/testFormats"),a=e("syracuse-tablet/html/js/sdata/entities/test/testFormatsReference"),f=e("syracuse-tablet/html/js/sdata/entities/test/testCharts"),l=e("syracuse-tablet/html/js/sdata/entities/test/testConstraints"),c=e("syracuse-tablet/html/js/sdata/entities/test/testNavigateTo"),h=e("syracuse-tablet/html/js/sdata/entities/test/testNavigateToChild"),p=e("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShow"),d=e("syracuse-tablet/html/js/sdata/entities/test/testGaugeChart"),v=e("syracuse-tablet/html/js/sdata/entities/test/testHomeDashboard"),m=e("syracuse-tablet/html/js/sdata/entities/test/testLayoutsDashboard"),g=e("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard"),y=e("syracuse-tablet/html/js/sdata/entities/test/testTypesDashboard2"),b=e("syracuse-tablet/html/js/sdata/entities/test/testFormatsDashboard"),w=e("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard"),E=e("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard"),S=e("syracuse-tablet/html/js/sdata/entities/test/testChartsDashboard"),x=e("syracuse-tablet/html/js/sdata/entities/test/testSUPERVDashboard2"),T=e("syracuse-tablet/html/js/sdata/entities/test/testGX3APPDashboard2"),N=e("syracuse-tablet/html/js/sdata/entities/test/testConstraintsDashboard"),C=e("syracuse-tablet/html/js/sdata/entities/test/testNavigateToDashboard"),k=e("syracuse-tablet/html/js/sdata/entities/test/testPropertyHideShowDashboard"),L=e("syracuse-tablet/html/js/sdata/entities/test/testAQTACTNPDashboard"),A=e("syracuse-tablet/html/js/sdata/entities/test/testSyDevDashboard"),O=e("syracuse-tablet/html/js/sdata/entities/test/testGridDashboard"),M=e("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQTCRUDMDashboard"),_=e("syracuse-tablet/html/js/sdata/entities/test/testSUPERVAQMCRUDMDashboard"),D=e("syracuse-tablet/html/js/sdata/entities/test/testGaugeChartDashboard"),P={$application:{$uuid:"clientTestApplication",applicationName:"clientTestApplication",title:"Client test application",description:"Application for testing client features without server dependencies",iconName:"gears",$homeDashboard:{$uuid:"testHomeDashboard",dashboardName:"testHomeDashboard"}},$dashboards:{},$gadgets:{},$pages:{"x3.erp.SUPERV.AQMCRUDM.$details":{$page:{$article:{$layoutType:"stack",$items:[{$bind:"CODE"},{$bind:"PBLOB"},{$bind:"CODECHR"},{$bind:"WCUR_REF"},{$bind:"FLGTEST"},{$bind:"WMENU"},{$bind:"SIMUL1"},{$bind:"PCLOB"},{$bind:"TEXTAXX"},{$bind:"TEXTE"},{$bind:"TPOSIF"},{$bind:"CUR_REF"},{$bind:"SITE_REF"},{$bind:"TDCB2"},{$bind:"TDCB3",$gauge:{}},{$bind:"TDCB"},{$bind:"TDATE"},{$bind:"UNIT_REF"},{$bind:"CRY_REF"},{$bind:"TEL"},{$bind:"EMAIL"},{$bind:"TEXTPLAIN"},{$bind:"TEXTHTML"},{$bind:"TEXTRTF"},{$bind:"CREUSR_REF"},{$bind:"UPDUSR_REF"},{$bind:"ADEVCOLREF1"},{$bind:"ADEVCOLREF2"},{$bind:"ADEVCTINT"},{$bind:"ADEVADEVICEL"}]}}}}};t.register=function(){r.registerEntity(i.entity),r.registerEntity(s.entity),r.registerEntity(o.entity),r.registerEntity(u.entity),r.registerEntity(a.entity),r.registerEntity(f.entity),r.registerEntity(l.entity),r.registerEntity(c.entity),r.registerEntity(h.entity),r.registerEntity(p.entity),r.registerEntity(d.entity),H(v),H(m),H(g),H(y),H(b),H(w),H(E),H(S),H(x),H(T),H(N),H(C),H(k),H(L),H(A),H(D),H(O),H(M),H(_),r.registerApp(P)}}),define("syracuse-tablet/html/js/sdata/entities/welcomeApplication",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/application/settings","syracuse-tablet/html/js/helpers/locale"],function(e,t,n){function a(e){return e.dashboardName?l(e):f(e)}function f(e){return{$type:"$representation",$title:e.title,entity:e.entity,action:e.action,representation:e.representation,facet:e.facet,keyParameter:e.key,endpoint:e.endpoint,applicationName:e.applicationName}}function l(e){return{$type:"$dashboard",$title:e.title,dashboardName:e.dashboardName,applicationName:e.applicationName,sdataParameters:e.sdataParameters}}function c(e){var t,n=1;return s.getPinnedPages().then(function(r){if(r.length<=0)return;t={$layoutType:"hubGroup",$title:o.text("welcome.myquicklinks"),$items:[]},r.forEach(function(r){var i="$$$"+n;n++;var s=i,o=a(r);e.$gadgets[i]=o,e.$vignettes[s]={$uuid:i,$displayStyle:"$link"},t.$items.push({$layoutType:"tile",$items:[{$bind:s}],$size:"medium"})})}).then(function(){t&&e.$article.$items.push(t)})}function h(e){return e.$gadgets={},e.$vignettes={},e.$article={$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:o.text("welcome.myapps"),$items:[]}]},c(e).then(function(){var e=i.getMetaData();return e.getApplications()}).then(function(t){return t.forEach(function(t){var n=t.applicationName;if(t.applicationName!==u.$application.applicationName){var n="$welcome_"+t.applicationName,r={$type:"$application",$title:t.title,applicationName:t.applicationName},i={$uuid:n};e.$gadgets[n]=r,e.$vignettes[n]=i,e.$article.$items[0].$items.push({$layoutType:"tile",$items:[{$bind:n}],$size:"medium"})}}),e})}var r=e("syracuse-tablet/html/js/sdata/entities/clientContract"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/application/settings"),o=e("syracuse-tablet/html/js/helpers/locale"),u={$application:{$uuid:"$welcomeApplication",applicationName:"$welcomeApplication",title:"Welcome",description:"Welcome",iconName:"gears",$homeDashboard:{$uuid:"$welcomeDashboard",dashboardName:"$welcomeDashboard"}},$dashboards:{$welcomeDashboard:{$pageInfo:{isWelcomePage:!0,disableAuthoring:!0},$update:function(e){return h(e)},$dashboardName:"$welcomeDashboard",$title:"",$description:""}}};t.register=function(){r.registerApp(u)}}),define("syracuse-tablet/html/js/demoapp/entTodos",["require","exports","module"],function(e,t,n){var r=[{$uuid:"1",date:"2015-02-01 09:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"2",date:"2015-02-09 10:00:00",who:"Mr. Miller",desc:"Meeting"},{$uuid:"3",date:"2015-03-04 09:00:00",who:"Mr. Heinz",desc:"Milestone definition"},{$uuid:"4",date:"2015-03-05 15:00:00",who:"Mr. Schmidt",desc:"Project review"},{$uuid:"5",date:"2015-03-08 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"6",date:"2015-03-09 15:40:00",who:"Mr. Miller",desc:"Call"},{$uuid:"7",date:"2015-03-10 15:50:00",who:"Mr. Miller",desc:"Call"},{$uuid:"8",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"9",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"10",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"11",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"12",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"},{$uuid:"13",date:"2015-03-11 14:00:00",who:"Mr. Miller",desc:"Call"}];t.entity={$entityName:"$demoAppTodo",$value:"{desc}",$properties:{who:{$type:"application/x-string",$title:"Who"},desc:{$type:"application/x-string",$title:"Description"},date:{$type:"application/x-datetime",$title:"Date"}},$articles:{},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/demoapp/entOverviewSales",["require","exports","module"],function(e,t,n){var r={$uuid:"1",revMonthlyMin:1e5,revMonthly:18e4,revMonthlyMax:2e5,revMonthlyPerc:92};t.entity={$entityName:"$demoAppOverviewSales",$value:"{revMonthly}",$properties:{revMonthlyMin:{$type:"application/x-decimal",$title:"Min"},revMonthlyMax:{$type:"application/x-decimal",$title:"Target"},revMonthly:{$type:"application/x-decimal",$title:"Revenue"},revMonthlyPerc:{$type:"application/x-decimal",$title:"Monthly Target"}},$articles:{},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:[r]}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/demoapp/entOverviewSalesLeads",["require","exports","module"],function(e,t,n){var r=[{$uuid:"1",date:"2014-12-05",numLeads:50,numDeals:40},{$uuid:"1",date:"2014-12-12",numLeads:53,numDeals:45},{$uuid:"1",date:"2014-12-15",numLeads:54,numDeals:47},{$uuid:"1",date:"2014-12-22",numLeads:53,numDeals:49},{$uuid:"1",date:"2014-12-29",numLeads:52,numDeals:52}];t.entity={$entityName:"$demoAppOverviewSalesLeads",$value:"{date}",$properties:{date:{$type:"application/x-date",$title:"Date"},numLeads:{$type:"application/x-decimal",$title:"Leads"},numDeals:{$type:"application/x-decimal",$title:"Deals"}},$articles:{},$prototype:function(e){var t=e.$properties&&e.$properties.$resources;t&&(t.$axes=[{$title:"Date",$hierarchies:[["date"]]},{$hierarchies:[["$measures"]]}],t.$cube={$title:"Leads vs Deals",$hierarchies:{date:{$properties:["date"]}},$measures:{numLeads:{},numDeals:{}}})},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(r[0]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:r}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/demoapp/entCustomers",["require","exports","module"],function(e,t,n){var r=["Acme, inc.","Widget Corp","123 Warehousing","Demo Company","Smith and Co.","Foo Bars","ABC Telecom","Fake Brothers","QWERTY Logistics","Demo, inc.","Sample Company","Sample, inc","Acme Corp","Allied Biscuit","Ankh-Sto Associates","Extensive Enterprise","Galaxy Corp","Globo-Chem","Mr. Sparkle","Globex Corporation","LexCorp","LuthorCorp","North Central Positronics","Omni Consimer Products","Praxis Corporation","Sombra Corporation","Sto Plains Holdings","Tessier-Ashpool","Wayne Enterprises","Wentworth Industries","ZiffCorp","Bluth Company","Strickland Propane","Thatherton Fuels","Three Waters","Water and Power","Western Gas & Electric","Mammoth Pictures","Mooby Corp","Gringotts","Thrift Bank","Flowers By Irene","The Legitimate Businessmens Club","Osato Chemicals","Transworld Consortium","Universal Export","United Fried Chicken","Virtucon","Kumatsu Motors","Keedsler Motors","Powell Motors","Industrial Automation","Sirius Cybernetics Corporation","U.S. Robotics and Mechanical Men","Colonial Movers","Corellian Engineering Corporation","Incom Corporation","General Products","Leeding Engines Ltd.","Blammo","Input, Inc.","Mainway Toys","Videlectrix","Zevo Toys","Ajax","Axis Chemical Co.","Barrytron","Carrys Candles","Cogswell Cogs","Spacely Sprockets","General Forge and Foundry","Duff Brewing Company","Dunder Mifflin","General Services Corporation","Monarch Playing Card Co.","Krustyco","Initech","Roboto Industries","Primatech","Sonky Rubber Goods","St. Anky Beer","Stay Puft Corporation","Vandelay Industries","Wernham Hogg","Gadgetron","Burleigh and Stronginthearm","BLAND Corporation","Nordyne Defense Dynamics","Petrox Oil Company","Roxxon","McMahon and Tate","Sixty Second Avenue","Charles Townsend Agency","Spade and Archer","Megadodo Publications","Rouster and Sideways","C.H. Lavatory and Sons","Globo Gym American Corp","The New Firm"],i=[];for(var s=1e4;s<10100;s++)i.push({$uuid:""+(s-1e4),bpcnum:""+s,name:r[s-1e4],ordersValue:1e6+(s-1e4)*2e5%5e5,ordersMax:18e5,quotesValue:5e5+(s-1e4)*2e3%5e4,quotesMax:12e5,invoicesValue:1e4+(s-1e4)*2e3%5e4,invoicesMax:12e4,min:1e3,addr1:"Rue Fructidor",addr2:"75834 Paris Cedex 17"});t.entity={$entityName:"$demoAppCustomer",$value:"{name}",$properties:{bpcnum:{$type:"application/x-string",$title:"Customer"},name:{$type:"application/x-string",$title:"Name"},addr1:{$type:"application/x-string",$title:"Street"},addr2:{$type:"application/x-string",$title:"Address"},ordersValue:{$type:"application/x-decimal",$title:"Orders value"},min:{$type:"application/x-decimal",$title:"General min value"},quotesValue:{$type:"application/x-decimal",$title:"Quotes value"},invoicesValue:{$type:"application/x-decimal",$title:"Invoices value"},ordersMax:{$type:"application/x-decimal",$title:"Max"},quotesMax:{$type:"application/x-decimal",$title:"Max"},invoicesMax:{$type:"application/x-decimal",$title:"Max"}},$prototype:function(e){var t=e.$properties&&e.$properties.$resources&&e.$properties.$resources.$item&&e.$properties.$resources.$item.$links||{};t.DASHBOARD={$title:"Show details",$url:"{$baseUrl}/$mobileDashboards?dashboard=$demoAppCustomerDashboard&parameters=bpcnum%3D%7Bbpcnum%7D"}},$articles:{},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(i[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:i}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/demoapp/entCustomerRevenues",["require","exports","module"],function(e,t,n){var r=["January","February","March","April","May","June","July","August","September","October","November","December"],i=[],s=0;for(var o=1e4;o<10100;o++)for(var u=0;u<12;u++)i.push({$uuid:""+s,bpcnum:""+o,month:r[u],revenue:2e4+u*(12+o%12)%40*2e4}),s++;t.entity={$entityName:"$demoAppCustomerRevenue",$value:"{name}",$properties:{bpcnum:{$type:"application/x-string",$title:"ID"},month:{$type:"application/x-string",$title:"Month"},revenue:{$type:"application/x-decimal",$title:"Revenue"}},$prototype:function(e){var t=e.$properties&&e.$properties.$resources;t&&(t.$axes=[{$title:"Month",$hierarchies:[["month"]]},{$hierarchies:[["$measures"]]}],t.$cube={$title:"Revenue",$hierarchies:{month:{$properties:["month"]}},$measures:{revenue:{}}})},$articles:{},$services:{$new:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$read:function(e,t){var n=$.Deferred();return n.resolve(i[e.$key]),n.promise()},$query:function(e,t){var n=$.Deferred();return n.resolve({$resources:i}),n.promise()},$save:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()},$delete:function(e,t){var n=$.Deferred();return n.resolve(),n.promise()}}}}),define("syracuse-tablet/html/js/demoapp/dashOverview",["require","exports","module"],function(e,t,n){t.dashboards={$demoAppOverviewDashboard:{$dashboardName:"$demoAppOverviewDashboard",$title:"Sales Cockpit",$description:"",$vignettes:{$demoAppTodo_query:{$uuid:"$demoAppTodo_query",$displayStyle:"$full"},$demoAppOverviewSales_rev_perc:{$uuid:"$demoAppOverviewSales_rev_perc",$displayStyle:"$full"},$demoAppOverviewSales_rev_target:{$uuid:"$demoAppOverviewSales_rev_target",$displayStyle:"$full"},$demoAppOverviewSalesLeads:{$uuid:"$demoAppOverviewSalesLeads",$displayStyle:"$full"},$demoAppCustomer_query:{$uuid:"$demoAppCustomer_query",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"General",$items:[{$layoutType:"tile",$size:"full",$bgColor:"brown",$items:[{$bind:"$demoAppTodo_query",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$title:"",$display:"cardH",$cardsPerRow:1,$article:{$items:[{$bind:"date"},{$bind:"who"},{$bind:"desc"}]}}]}}]},{$layoutType:"tile",$size:"full",$bgColor:"brown",$items:[{$bind:"$demoAppOverviewSalesLeads",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$isTitleHidden:!1,$style:"line",$display:"table",$article:{$items:[{$bind:"date"},{$bind:"numLeads"},{$bind:"numDeals"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"Performance",$items:[{$layoutType:"tile",$size:"large",$bgColor:"pink",$items:[{$bind:"$demoAppOverviewSales_rev_perc",$article:{$layoutType:"stack",$items:[{$bind:"revMonthly",$gauge:{$bindMin:"revMonthlyMin",$bindMax:"revMonthlyMax",segments:[{propStart:0,propEnd:.75,color:"#DF5353"},{propStart:.75,propEnd:.85,color:"#FF5800"},{propStart:.85,propEnd:1,color:"#55BF3B"}]}}]}}]},{$layoutType:"tile",$size:"large",$bgColor:"pink",$items:[{$bind:"$demoAppOverviewSales_rev_perc",$article:{$layoutType:"stack",$items:[{$bind:"revMonthlyPerc",$gauge:{segments:[{propStart:0,propEnd:.75,color:"#DF5353"},{propStart:.75,propEnd:.85,color:"#FF5800"},{propStart:.85,propEnd:1,color:"#55BF3B"}]}}]}}]}]},{$layoutType:"hubGroup",$title:"My recent Customers",$items:[{$layoutType:"tile",$size:"all",$bgColor:"teal",$items:[{$bind:"$demoAppCustomer_query",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$display:"cardH",$cardsPerLine:4,$article:{$items:[{$bind:"bpcnum"},{$bind:"name"},{$bind:"addr1"},{$bind:"addr2"}]}}]}}]}]}]}}},t.gadgets={$demoAppTodo_query:{$type:"$representation",$title:"Todo",entity:"$demoAppTodo",action:"$query",representation:"$demoAppTodo",facet:"$query"},$demoAppOverviewSales_rev_perc:{$type:"$representation",$title:"Overview",entity:"$demoAppOverviewSales",action:"$details",representation:"$demoAppOverviewSales",facet:"$details",keyParameter:"10"},$demoAppOverviewSales_rev_target:{$type:"$representation",$title:"Overview",entity:"$demoAppOverviewSales",action:"$details",representation:"$demoAppOverviewSales",facet:"$details",keyParameter:"10"},$demoAppOverviewSalesLeads:{$type:"$representation",$title:"Leads vs Deals",entity:"$demoAppOverviewSalesLeads",action:"$query",representation:"$demoAppOverviewSalesLeads",facet:"$query"},$demoAppCustomer_query:{$type:"$representation",$title:"Customers",entity:"$demoAppCustomer",action:"$query",representation:"$demoAppCustomer",facet:"$query"}}}),define("syracuse-tablet/html/js/demoapp/dashCustomer",["require","exports","module"],function(e,t,n){t.dashboards={$demoAppCustomerDashboard:{$dashboardName:"$demoAppCustomerDashboard",$title:"Customer Dashboard",$description:"",$vignettes:{$demoAppCustomerRevenues:{$uuid:"$demoAppCustomerRevenues",$displayStyle:"$full"},$demoAppCustomerTotals:{$uuid:"$demoAppCustomerTotals",$displayStyle:"$full"}},$article:{$layoutType:"hub",$items:[{$layoutType:"hubGroup",$title:"Monthly revenues",$items:[{$layoutType:"tile",$size:"full",$items:[{$bind:"$demoAppCustomerRevenues",$article:{$layoutType:"stack",$items:[{$bind:"$resources",$style:"bar"}]}}]}]},{$layoutType:"hubGroup",$title:"Totals",$items:[{$layoutType:"tile",$size:"large",$items:[{$bind:"$demoAppCustomerTotals",$article:{$layoutType:"stack",$items:[{$bind:"ordersValue",$gauge:{$bindMin:"min",$bindMax:"ordersMax",segments:[{propStart:0,propEnd:.75,color:"#DF5353"},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1,color:"#55BF3B"}]}}]}}]},{$layoutType:"tile",$size:"large",$items:[{$bind:"$demoAppCustomerTotals",$article:{$layoutType:"stack",$items:[{$bind:"quotesValue",$gauge:{$bindMin:"min",$bindMax:"quotesMax",segments:[{propStart:0,propEnd:.75,color:"#DF5353"},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1,color:"#55BF3B"}]}}]}}]},{$layoutType:"tile",$size:"large",$items:[{$bind:"$demoAppCustomerTotals",$article:{$layoutType:"stack",$items:[{$bind:"invoicesValue",$gauge:{$bindMin:"min",$bindMax:"invoicesMax",segments:[{propStart:0,propEnd:.75},{propStart:.75,propEnd:.85},{propStart:.85,propEnd:1}]}}]}}]}]}]}}},t.gadgets={$demoAppCustomerRevenues:{$type:"$representation",$title:"Overview",entity:"$demoAppCustomerRevenue",action:"$query",representation:"$demoAppCustomerRevenue",facet:"$query",parameters:{where:{value:"bpcnum eq {bpcnum}"}}},$demoAppCustomerTotals:{$type:"$representation",$title:"Totals",entity:"$demoAppCustomer",action:"$details",representation:"$demoAppCustomer",facet:"$details",keyParameter:"10"}}}),define("syracuse-tablet/html/js/demoapp/demoApp",["require","exports","module","syracuse-tablet/html/js/sdata/entities/clientContract","syracuse-tablet/html/js/demoapp/entTodos","syracuse-tablet/html/js/demoapp/entOverviewSales","syracuse-tablet/html/js/demoapp/entOverviewSalesLeads","syracuse-tablet/html/js/demoapp/entCustomers","syracuse-tablet/html/js/demoapp/entCustomerRevenues","syracuse-tablet/html/js/demoapp/dashOverview","syracuse-tablet/html/js/demoapp/dashCustomer"],function(e,t,n){function h(e){e.gadgets&&Object.keys(e.gadgets).forEach(function(t){c.$gadgets[t]&&console.log("Duplicate gadget name: "+t),c.$gadgets[t]=e.gadgets[t]}),e.dashboards&&Object.keys(e.dashboards).forEach(function(t){c.$dashboards[t]&&console.log("Duplicate dashboard name: "+t),c.$dashboards[t]=e.dashboards[t]})}var r=e("syracuse-tablet/html/js/sdata/entities/clientContract"),i=e("syracuse-tablet/html/js/demoapp/entTodos"),s=e("syracuse-tablet/html/js/demoapp/entOverviewSales"),o=e("syracuse-tablet/html/js/demoapp/entOverviewSalesLeads"),u=e("syracuse-tablet/html/js/demoapp/entCustomers"),a=e("syracuse-tablet/html/js/demoapp/entCustomerRevenues"),f=e("syracuse-tablet/html/js/demoapp/dashOverview"),l=e("syracuse-tablet/html/js/demoapp/dashCustomer"),c={$application:{$uuid:"$demoApp",applicationName:"$demoApp",title:"Sales overview",description:"Sales overview",iconName:"gears",$homeDashboard:{$uuid:"$demoAppOverviewDashboard",dashboardName:"$demoAppOverviewDashboard"}},$dashboards:{},$gadgets:{}};t.register=function(){r.registerEntity(i.entity),r.registerEntity(s.entity),r.registerEntity(o.entity),r.registerEntity(u.entity),r.registerEntity(a.entity),h(f),h(l),r.registerApp(c)}}),define("syracuse-tablet/html/js/init/initModules",["require","exports","module","syracuse-tablet/html/js/helpers/utils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/application/appFactory","syracuse-tablet/html/js/application/appFactoryDeps","syracuse-tablet/html/js/controls/ctrlFactoryDeps","syracuse-tablet/html/js/ajax/ajax","syracuse-tablet/html/js/storage/storage","syracuse-tablet/html/js/sdata/sdataCache","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/siteLayout","syracuse-tablet/html/js/application/metaData","syracuse-tablet/html/js/ui/developmentPage","syracuse-tablet/html/js/sdata/entities/test/testApplication","syracuse-tablet/html/js/sdata/entities/welcomeApplication","syracuse-tablet/html/js/demoapp/demoApp"],function(e,t,n){function w(){i.isDvlpMode()&&m.wasActive()&&m.show()}var r=e("syracuse-tablet/html/js/helpers/utils"),i=e("syracuse-tablet/html/js/helpers/globals"),s=e("syracuse-tablet/html/js/helpers/locale"),o=e("syracuse-tablet/html/js/application/appFactory"),u=e("syracuse-tablet/html/js/application/appFactoryDeps"),a=e("syracuse-tablet/html/js/controls/ctrlFactoryDeps"),f=e("syracuse-tablet/html/js/ajax/ajax"),l=e("syracuse-tablet/html/js/storage/storage"),c=e("syracuse-tablet/html/js/sdata/sdataCache"),h=e("syracuse-tablet/html/js/ui/uiUtils"),p=e("syracuse-tablet/html/js/ui/modal"),d=e("syracuse-tablet/html/js/helpers/siteLayout"),v=e("syracuse-tablet/html/js/application/metaData"),m=e("syracuse-tablet/html/js/ui/developmentPage"),g=e("syracuse-tablet/html/js/sdata/entities/test/testApplication"),y=e("syracuse-tablet/html/js/sdata/entities/welcomeApplication"),b=e("syracuse-tablet/html/js/demoapp/demoApp");t.init=function(){var e,t,n=new $.Deferred;return i.setSiteLayout(d),e=l.getStorage(),e.init().then(function(){t=new c.SDataCache(e)}).then(function(){var n=window.location.href.indexOf("/index_debug.html")>-1||window.location.href.indexOf("/index_joined.html")>-1;i.init(n,e,t,r),i.setMetaData(v)}).then(function(){return u.init()}).then(function(){return a.init()}).then(function(){f.init({},s)}).then(function(){y.register(),b.register()}).then(function(){i.isDvlpMode()&&g.register()}).then(function(){var e=o.createApplication($("#s-m-app-id"));i.setTabletApplication(e),i.setModal(p)}).then(function(){w()}).then(function(){h.triggerResizeInternal()}).then(function(){n.resolve()}).fail(function(e){n.reject(e)}),n.promise()}}),define("syracuse-tablet/html/js/init/initLogin",["require","exports","module","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/application/authentication","syracuse-tablet/html/js/helpers/locale","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/notifications","syracuse-tablet/html/js/sdata/sdataCommonResources","syracuse-tablet/html/js/init/initContext"],function(e,t,n){var r=e("syracuse-tablet/html/js/ui/uiUtils"),i=e("syracuse-tablet/html/js/application/authentication"),s=e("syracuse-tablet/html/js/helpers/locale"),o=e("syracuse-tablet/html/js/ui/modal"),u=e("syracuse-tablet/html/js/helpers/globals"),a=e("syracuse-tablet/html/js/helpers/notifications"),f=e("syracuse-tablet/html/js/sdata/sdataCommonResources"),l=e("syracuse-tablet/html/js/init/initContext"),c=function(e){u.getApplication().gotoLogin(e)},h={notifLogin:function(e,t){var n=function(e){t?t.reject(e):o.error("notifLogin failed",e)};try{var r={$user:e.user.$value,$role:e.selectedRole.code,$lang:e.selectedLocale.code};u.setUserCtx(r),u.setUserProfile(e),s.setUserLocales(e&&e.user&&e.user.locales),l.init(!1,!1).then(function(){t&&t.resolve()}).fail(function(e){n(e)})}catch(i){n(i)}}};t.init=function(){a.subscribe(h,["sm.login"],1);try{return r.waitWheelStart(),i.check().then(function(e){return e.authenticated===!0?f.getUserProfile():null}).then(function(e){return r.waitWheelStop(),e?a.publish("sm.login",e):c(),$.smResolve()}).fail(function(e){r.waitWheelStop(),i.logout().then(function(){c("Please try login again")}).fail(function(e){o.error("exports.init failed",e)})})}catch(e){return c("Javascript exception"),$.smResolve()}}}),function(e,t){typeof define=="function"&&define.amd?define("syracuse-tablet/html/deps/handlebars-latest",[],t):typeof exports=="object"?module.exports=t():e.Handlebars=e.Handlebars||t()}(this,function(){var e=function(){function t(e){this.string=e}var e;return t.prototype.toString=function(){return""+this.string},e=t,e}(),t=function(e){function o(e){return r[e]}function u(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function c(e){return e instanceof n?e.toString():e==null?"":e?(e=""+e,s.test(e)?e.replace(i,o):e):e+""}function h(e){return!e&&e!==0?!0:l(e)&&e.length===0?!0:!1}function p(e,t){return(e?e+".":"")+t}var t={},n=e,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,s=/[&<>"'`]/;t.extend=u;var a=Object.prototype.toString;t.toString=a;var f=function(e){return typeof e=="function"};f(/x/)&&(f=function(e){return typeof e=="function"&&a.call(e)==="[object Function]"});var f;t.isFunction=f;var l=Array.isArray||function(e){return e&&typeof e=="object"?a.call(e)==="[object Array]":!1};return t.isArray=l,t.escapeExpression=c,t.isEmpty=h,t.appendContextPath=p,t}(e),n=function(){function n(e,n){var r;n&&n.firstLine&&(r=n.firstLine,e+=" - "+r+":"+n.firstColumn);var i=Error.prototype.constructor.call(this,e);for(var s=0;s<t.length;s++)this[t[s]]=i[t[s]];r&&(this.lineNumber=r,this.column=n.firstColumn)}var e,t=["description","fileName","lineNumber","message","name","number","stack"];return n.prototype=new Error,e=n,e}(),r=function(e,t){function h(e,t){this.helpers=e||{},this.partials=t||{},p(this)}function p(e){e.registerHelper("helperMissing",function(){if(arguments.length===1)return undefined;throw new i("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,s=n.fn;if(t===!0)return s(this);if(t===!1||t==null)return i(this);if(a(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var o=m(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return s(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new i("Must pass iterator to #each");var n=t.fn,s=t.inverse,o=0,u="",l,c;t.data&&t.ids&&(c=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),f(e)&&(e=e.call(this)),t.data&&(l=m(t.data));if(e&&typeof e=="object")if(a(e))for(var h=e.length;o<h;o++)l&&(l.index=o,l.first=o===0,l.last=o===e.length-1,c&&(l.contextPath=c+o)),u+=n(e[o],{data:l});else for(var p in e)e.hasOwnProperty(p)&&(l&&(l.key=p,l.index=o,l.first=o===0,c&&(l.contextPath=c+p)),u+=n(e[p],{data:l}),o++);return o===0&&(u=s(this)),u}),e.registerHelper("if",function(e,t){return f(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){f(e)&&(e=e.call(this));var n=t.fn;if(!r.isEmpty(e)){if(t.data&&t.ids){var i=m(t.data);i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}return t.inverse(this)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var n={},r=e,i=t,s="2.0.0";n.VERSION=s;var o=6;n.COMPILER_REVISION=o;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=u;var a=r.isArray,f=r.isFunction,l=r.toString,c="[object Object]";n.HandlebarsEnvironment=h,h.prototype={constructor:h,logger:d,log:v,registerHelper:function(e,t){if(l.call(e)===c){if(t)throw new i("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){l.call(e)===c?r.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level<=e){var n=d.methodMap[e];typeof console!="undefined"&&console[n]&&console[n].call(console,t)}}};n.logger=d;var v=d.log;n.log=v;var m=function(e){var t=r.extend({},e);return t._parent=e,t};return n.createFrame=m,n}(t,n),i=function(e,t,n){function f(e){var t=e&&e[0]||1,n=o;if(t!==n){if(t<n){var r=u[n],i=u[t];throw new s("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function l(e,t){if(!t)throw new s("No environment passed to template");if(!e||!e.main)throw new s("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,r,o,u,a,f,l,c,h){a&&(u=i.extend({},u,a));var p=t.VM.invokePartial.call(this,n,o,u,f,l,c,h);if(p==null&&t.compile){var d={helpers:f,partials:l,data:c,depths:h};l[o]=t.compile(n,{data:c!==undefined,compat:e.compat},t),p=l[o](u,d)}if(p!=null){if(r){var v=p.split("\n");for(var m=0,g=v.length;m<g;m++){if(!v[m]&&m+1===g)break;v[m]=r+v[m]}p=v.join("\n")}return p}throw new s("The partial "+o+" could not be compiled when running in runtime-only mode")},r={lookup:function(e,t){var n=e.length;for(var r=0;r<n;r++)if(e[r]&&e[r][t]!=null)return e[r][t]},lambda:function(e,t){return typeof e=="function"?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var r=this.programs[e],i=this.fn(e);return t||n?r=c(this,e,i,t,n):r||(r=this.programs[e]=c(this,e,i)),r},data:function(e,t){while(e&&t--)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=i.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},o=function(t,n){n=n||{};var i=n.data;o._setup(n),!n.partial&&e.useData&&(i=d(t,i));var s;return e.useDepths&&(s=n.depths?[t].concat(n.depths):[t]),e.main.call(r,t,r.helpers,r.partials,i,s)};return o.isTop=!0,o._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},o._child=function(t,n,i){if(e.useDepths&&!i)throw new s("must pass parent depths");return c(r,t,e[t],n,i)},o}function c(e,t,n,r,i){var s=function(t,s){return s=s||{},n.call(e,t,e.helpers,e.partials,s.data||r,i&&[t].concat(i))};return s.program=t,s.depth=i?i.length:0,s}function h(e,t,n,r,i,o,u){var a={partial:!0,helpers:r,partials:i,data:o,depths:u};if(e===undefined)throw new s("The partial "+t+" could not be found");if(e instanceof Function)return e(n,a)}function p(){return""}function d(e,t){if(!t||!("root"in t))t=t?a(t):{},t.root=e;return t}var r={},i=e,s=t,o=n.COMPILER_REVISION,u=n.REVISION_CHANGES,a=n.createFrame;return r.checkRevision=f,r.template=l,r.program=c,r.invokePartial=h,r.noop=p,r}(t,n,r),s=function(e,t,n,r,i){var s,o=e,u=t,a=n,f=r,l=i,c=function(){var e=new o.HandlebarsEnvironment;return f.extend(e,o),e.SafeString=u,e.Exception=a,e.Utils=f,e.escapeExpression=f.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e},h=c();return h.create=c,h["default"]=h,s=h,s}(r,e,n,t,i),o=function(e){function r(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var t,n=e,i={ProgramNode:function(e,t,n){r.call(this,n),this.type="program",this.statements=e,this.strip=t},MustacheNode:function(e,t,n,s,o){r.call(this,o),this.type="mustache",this.strip=s;if(n!=null&&n.charAt){var u=n.charAt(3)||n.charAt(2);this.escaped=u!=="{"&&u!=="&"}else this.escaped=!!n;e instanceof i.SexprNode?this.sexpr=e:this.sexpr=new i.SexprNode(e,t),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){r.call(this,n),this.type="sexpr",this.hash=t;var i=this.id=e[0],s=this.params=e.slice(1);this.isHelper=!!s.length||!!t,this.eligibleHelper=this.isHelper||i.isSimple},PartialNode:function(e,t,n,i,s){r.call(this,s),this.type="partial",this.partialName=e,this.context=t,this.hash=n,this.strip=i,this.strip.inlineStandalone=!0},BlockNode:function(e,t,n,i,s){r.call(this,s),this.type="block",this.mustache=e,this.program=t,this.inverse=n,this.strip=i,n&&!t&&(this.isInverse=!0)},RawBlockNode:function(e,t,s,o){r.call(this,o);if(e.sexpr.id.original!==s)throw new n(e.sexpr.id.original+" doesn't match "+s,this);t=new i.ContentNode(t,o),this.type="block",this.mustache=e,this.program=new i.ProgramNode([t],{},o)},ContentNode:function(e,t){r.call(this,t),this.type="content",this.original=this.string=e},HashNode:function(e,t){r.call(this,t),this.type="hash",this.pairs=e},IdNode:function(e,t){r.call(this,t),this.type="ID";var i="",s=[],o=0,u="";for(var a=0,f=e.length;a<f;a++){var l=e[a].part;i+=(e[a].separator||"")+l;if(l===".."||l==="."||l==="this"){if(s.length>0)throw new n("Invalid path: "+i,this);l===".."?(o++,u+="../"):this.isScoped=!0}else s.push(l)}this.original=i,this.parts=s,this.string=s.join("."),this.depth=o,this.idName=u+this.string,this.isSimple=e.length===1&&!this.isScoped&&o===0,this.stringModeValue=this.string},PartialNameNode:function(e,t){r.call(this,t),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,t){r.call(this,t),this.type="DATA",this.id=e,this.stringModeValue=e.stringModeValue,this.idName="@"+e.stringModeValue},StringNode:function(e,t){r.call(this,t),this.type="STRING",this.original=this.string=this.stringModeValue=e},NumberNode:function(e,t){r.call(this,t),this.type="NUMBER",this.original=this.number=e,this.stringModeValue=Number(e)},BooleanNode:function(e,t){r.call(this,t),this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},CommentNode:function(e,t){r.call(this,t),this.type="comment",this.comment=e,this.strip={inlineStandalone:!0}}};return t=i,t}(n),u=function(){var e,t=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return i.prepareProgram(o[a-1].statements,!0),o[a-1];case 2:this.$=new i.ProgramNode(i.prepareProgram(o[a]),{},this._$);break;case 3:this.$=o[a];break;case 4:this.$=o[a];break;case 5:this.$=o[a];break;case 6:this.$=o[a];break;case 7:this.$=new i.ContentNode(o[a],this._$);break;case 8:this.$=new i.CommentNode(o[a],this._$);break;case 9:this.$=new i.RawBlockNode(o[a-2],o[a-1],o[a],this._$);break;case 10:this.$=new i.MustacheNode(o[a-1],null,"","",this._$);break;case 11:this.$=i.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!1,this._$);break;case 12:this.$=i.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!0,this._$);break;case 13:this.$=new i.MustacheNode(o[a-1],null,o[a-2],i.stripFlags(o[a-2],o[a]),this._$);break;case 14:this.$=new i.MustacheNode(o[a-1],null,o[a-2],i.stripFlags(o[a-2],o[a]),this._$);break;case 15:this.$={strip:i.stripFlags(o[a-1],o[a-1]),program:o[a]};break;case 16:this.$={path:o[a-1],strip:i.stripFlags(o[a-2],o[a])};break;case 17:this.$=new i.MustacheNode(o[a-1],null,o[a-2],i.stripFlags(o[a-2],o[a]),this._$);break;case 18:this.$=new i.MustacheNode(o[a-1],null,o[a-2],i.stripFlags(o[a-2],o[a]),this._$);break;case 19:this.$=new i.PartialNode(o[a-3],o[a-2],o[a-1],i.stripFlags(o[a-4],o[a]),this._$);break;case 20:this.$=new i.PartialNode(o[a-2],undefined,o[a-1],i.stripFlags(o[a-3],o[a]),this._$);break;case 21:this.$=new i.SexprNode([o[a-2]].concat(o[a-1]),o[a],this._$);break;case 22:this.$=new i.SexprNode([o[a]],null,this._$);break;case 23:this.$=o[a];break;case 24:this.$=new i.StringNode(o[a],this._$);break;case 25:this.$=new i.NumberNode(o[a],this._$);break;case 26:this.$=new i.BooleanNode(o[a],this._$);break;case 27:this.$=o[a];break;case 28:o[a-1].isHelper=!0,this.$=o[a-1];break;case 29:this.$=new i.HashNode(o[a],this._$);break;case 30:this.$=[o[a-2],o[a]];break;case 31:this.$=new i.PartialNameNode(o[a],this._$);break;case 32:this.$=new i.PartialNameNode(new i.StringNode(o[a],this._$),this._$);break;case 33:this.$=new i.PartialNameNode(new i.NumberNode(o[a],this._$));break;case 34:this.$=new i.DataNode(o[a],this._$);break;case 35:this.$=new i.IdNode(o[a],this._$);break;case 36:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 37:this.$=[{part:o[a]}];break;case 38:this.$=[];break;case 39:o[a-1].push(o[a]);break;case 48:this.$=[];break;case 49:o[a-1].push(o[a]);break;case 52:this.$=[o[a]];break;case 53:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){function s(e,t){return n.yytext=n.yytext.substr(e,n.yyleng-t)}var o=i;switch(r){case 0:n.yytext.slice(-2)==="\\\\"?(s(0,1),this.begin("mu")):n.yytext.slice(-1)==="\\"?(s(0,1),this.begin("emu")):this.begin("mu");if(n.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return n.yytext=n.yytext.substr(5,n.yyleng-9),this.popState(),15;case 4:return 12;case 5:return s(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return s(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return n.yytext=s(1,2).replace(/\\"/g,'"'),42;case 30:return n.yytext=s(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return n.yytext=s(1,2),50;case 37:return"INVALID";case 38:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();return e=t,e}(),a=function(e){function r(e,t){return{left:e.charAt(2)==="~",right:t.charAt(t.length-3)==="~"}}function i(e,t,r,i,s,l){if(e.sexpr.id.original!==i.path.original)throw new n(e.sexpr.id.original+" doesn't match "+i.path.original,e);var c=r&&r.program,h={left:e.strip.left,right:i.strip.right,openStandalone:u(t.statements),closeStandalone:o((c||t).statements)};e.strip.right&&a(t.statements,null,!0);if(c){var p=r.strip;p.left&&f(t.statements,null,!0),p.right&&a(c.statements,null,!0),i.strip.left&&f(c.statements,null,!0),o(t.statements)&&u(c.statements)&&(f(t.statements),a(c.statements))}else i.strip.left&&f(t.statements,null,!0);return s?new this.BlockNode(e,c,t,h,l):new this.BlockNode(e,t,c,h,l)}function s(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n],s=i.strip;if(!s)continue;var l=o(e,n,t,i.type==="partial"),c=u(e,n,t),h=s.openStandalone&&l,p=s.closeStandalone&&c,d=s.inlineStandalone&&l&&c;s.right&&a(e,n,!0),s.left&&f(e,n,!0),d&&(a(e,n),f(e,n)&&i.type==="partial"&&(i.indent=/([ \t]+$)/.exec(e[n-1].original)?RegExp.$1:"")),h&&(a((i.program||i.inverse).statements),f(e,n)),p&&(a(e,n),f((i.inverse||i.program).statements))}return e}function o(e,t,n){t===undefined&&(t=e.length);var r=e[t-1],i=e[t-2];if(!r)return n;if(r.type==="content")return(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original)}function u(e,t,n){t===undefined&&(t=-1);var r=e[t+1],i=e[t+2];if(!r)return n;if(r.type==="content")return(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original)}function a(e,t,n){var r=e[t==null?0:t+1];if(!r||r.type!=="content"||!n&&r.rightStripped)return;var i=r.string;r.string=r.string.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.string!==i}function f(e,t,n){var r=e[t==null?e.length-1:t-1];if(!r||r.type!=="content"||!n&&r.leftStripped)return;var i=r.string;return r.string=r.string.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.string!==i,r.leftStripped}var t={},n=e;return t.stripFlags=r,t.prepareBlock=i,t.prepareProgram=s,t}(n),f=function(e,t,n,r){function l(e){return e.constructor===o.ProgramNode?e:(s.yy=f,s.parse(e))}var i={},s=e,o=t,u=n,a=r.extend;i.parser=s;var f={};return a(f,u,o),i.parse=l,i}(u,o,a,t),l=function(e,t){function o(){}function u(e,t,n){if(e==null||typeof e!="string"&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var i=n.parse(e),s=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(s,t)}function a(e,t,n){function s(){var r=n.parse(e),i=(new n.Compiler).compile(r,t),s=(new n.JavaScriptCompiler).compile(i,t,undefined,!0);return n.template(s)}if(e==null||typeof e!="string"&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var i,o=function(e,t){return i||(i=s()),i.call(this,e,t)};return o._setup=function(e){return i||(i=s()),i._setup(e)},o._child=function(e,t,n){return i||(i=s()),i._child(e,t,n)},o}function f(e,t){if(e===t)return!0;if(i(e)&&i(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!f(e[n],t[n]))return!1;return!0}}var n={},r=e,i=t.isArray,s=[].slice;return n.Compiler=o,o.prototype={compiler:o,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||!f(r.args,i.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.accept(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements;for(var n=0,r=t.length;n<r;n++)this.accept(t[n]);return this.isSimple=r===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=t.sexpr,s=this.classifySexpr(i);s==="helper"?this.helperSexpr(i,n,r):s==="simple"?(this.simpleSexpr(i),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",i.id.original)):(this.ambiguousSexpr(i,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(n=0,r=t.length;n<r;n++)this.pushParam(t[n][1]);while(n--)this.opcode("assignToHash",t[n][0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.hash?this.accept(e.hash):this.opcode("push","undefined"),e.context?this.accept(e.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",t.name,e.indent||""),this.opcode("append")},content:function(e){e.string&&this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.ID(r),this.opcode("invokeAmbiguous",i,s)},simpleSexpr:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),s=e.id,o=s.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",i.length,o);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+o,e);s.falsy=!0,this.ID(s),this.opcode("invokeHelper",i.length,s.original,s.isSimple)}},sexpr:function(e){var t=this.classifySexpr(e);t==="simple"?this.simpleSexpr(e):t==="helper"?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts,e.falsy,e.isScoped):this.opcode("pushContext")},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id.depth,e.id.parts)},STRING:function(e){this.opcode("pushString",e.string)},NUMBER:function(e){this.opcode("pushLiteral",e.number)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:s.call(arguments,1)})},addDepth:function(e){if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){this.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),e.type==="sexpr"&&this.sexpr(e)):(this.trackIds&&this.opcode("pushId",e.type,e.idName||e.stringModeValue),this.accept(e))},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}},n.precompile=u,n.compile=a,n}(n,t),c=function(e,t){function o(e){this.value=e}function u(){}var n,r=e.COMPILER_REVISION,i=e.REVISION_CHANGES,s=t;u.prototype={nameLookup:function(e,t){return u.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},depthedLookup:function(e){return this.aliases.lookup="this.lookup",'lookup(depths, "'+e+'")'},compilerInfo:function(){var e=r,t=i[e];return[e,t]},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.depths.list.length||this.options.compat;var i=e.opcodes,o,u,a;for(u=0,a=i.length;u<a;u++)o=i[u],this[o.opcode].apply(this,o.args);this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s("Compile completed with content left on stack");var f=this.createFunctionContext(r);if(!this.isChild){var l={compiler:this.compilerInfo(),main:f},c=this.context.programs;for(u=0,a=c.length;u<a;u++)c[u]&&(l[u]=c[u]);return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.options.compat&&(l.compat=!0),r||(l.compiler=JSON.stringify(l.compiler),l=this.objectLiteral(l)),l}return f},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(e){var t="",n=this.stackVars.concat(this.registers.list);n.length>0&&(t+=", "+n.join(", "));for(var r in this.aliases)this.aliases.hasOwnProperty(r)&&(t+=", "+r+"="+this.aliases[r]);var i=["depth0","helpers","partials","data"];this.useDepths&&i.push("depths");var s=this.mergeSource(t);return e?(i.push(s),Function.apply(this,i)):"function("+i.join(",")+") {\n  "+s+"}"},mergeSource:function(e){var t="",n,r=!this.forceBuffer,i;for(var s=0,o=this.source.length;s<o;s++){var u=this.source[s];u.appendToBuffer?n?n=n+"\n    + "+u.content:n=u.content:(n&&(t?t+="buffer += "+n+";\n  ":(i=!0,t=n+";\n  "),n=undefined),t+=u+"\n  ",this.environment.isSimple||(r=!1))}if(r){if(n||!t)t+="return "+(n||'""')+";\n"}else e+=", buffer = "+(i?"":this.initializeBuffer()),n?t+="return buffer + "+n+";\n":t+="return buffer;\n";return e&&(t="var "+e.substring(2)+(i?"":";\n  ")+t),t},blockValue:function(e){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=[this.contextName(0)];this.setupParams(e,0,t);var n=this.popStack();t.splice(1,0,n),this.push("blockHelperMissing.call("+t.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=[this.contextName(0)];this.setupParams("",0,e,!0),this.flushInline();var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.pendingContent=e},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if ("+e+" != null) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n){var r=0,i=e.length;!n&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(e[r++])):this.pushContext();for(;r<i;r++)this.replaceStack(function(n){var i=this.nameLookup(n,e[r],"context");return t?" && "+i:" != null ? "+i+" : "+n})},lookupData:function(e,t){e?this.pushStackLiteral("this.data(data, "+e+")"):this.pushStackLiteral("data");var n=t.length;for(var r=0;r<n;r++)this.replaceStack(function(e){return" && "+this.nameLookup(e,t[r],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),t!=="sexpr"&&(typeof e=="string"?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+e.ids.join(",")+"}"),this.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){this.aliases.helperMissing="helpers.helperMissing";var r=this.popStack(),i=this.setupHelper(e,t),s=(n?i.name+" || ":"")+r+" || helperMissing";this.push("(("+s+").call("+i.callParams+"))")},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper");this.push("((helper = (helper = "+i+" || "+n+") != null ? helper : helperMissing"+(r.paramsInit?"),("+r.paramsInit:"")+"),"+"(typeof helper === functionType ? helper.call("+r.callParams+") : helper))")},invokePartial:function(e,t){var n=[this.nameLookup("partials",e,"partial"),"'"+t+"'","'"+e+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?n.push("data"):this.options.compat&&n.push("undefined"),this.options.compat&&n.push("depths"),this.push("this.invokePartial("+n.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r,i;this.trackIds&&(i=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var s=this.hash;n&&s.contexts.push("'"+e+"': "+n),r&&s.types.push("'"+e+"': "+r),i&&s.ids.push("'"+e+"': "+i),s.values.push("'"+e+"': ("+t+")")},pushId:function(e,t){e==="ID"||e==="DATA"?this.pushString(t):e==="sexpr"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context,!this.precompile),this.context.environments[u]=r,this.useDepths=this.useDepths||i.useDepths):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],n=t.depths.list,r=this.useDepths,i,s=[t.index,"data"];return r&&s.push("depths"),"this.program("+s.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new o(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=undefined),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),r,i,u;if(!this.isInline())throw new s("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof o)t=r=a.value,u=!0;else{i=!this.stackSlot;var f=i?this.incrStack():this.topStackName();t="("+this.push(f)+" = "+a+")",r=this.topStack()}var l=e.call(this,r);u||this.popStack(),i&&this.stackSlot--,this.push("("+t+l+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];r instanceof o?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof o)return n.value;if(!t){if(!this.stackSlot)throw new s("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof o?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(this.quotedString(n)+":"+e[n]);return"{"+t.join(",")+"}"},setupHelper:function(e,t,n){var r=[],i=this.setupParams(t,e,r,n),s=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:i,name:s,callParams:[this.contextName(0)].concat(r).join(", ")}},setupOptions:function(e,t,n){var r={},i=[],s=[],o=[],u,a,f;r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack()),a=this.popStack(),f=this.popStack();if(f||a)f||(f="this.noop"),a||(a="this.noop"),r.fn=f,r.inverse=a;var l=t;while(l--)u=this.popStack(),n[l]=u,this.trackIds&&(o[l]=this.popStack()),this.stringParams&&(s[l]=this.popStack(),i[l]=this.popStack());return this.trackIds&&(r.ids="["+o.join(",")+"]"),this.stringParams&&(r.types="["+s.join(",")+"]",r.contexts="["+i.join(",")+"]"),this.options.data&&(r.data="data"),r},setupParams:function(e,t,n,r){var i=this.objectLiteral(this.setupOptions(e,t,n));return r?(this.useRegister("options"),n.push("options"),"options="+i):(n.push(i),"")}};var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),f=u.RESERVED_WORDS={};for(var l=0,c=a.length;l<c;l++)f[a[l]]=!0;return u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},n=u,n}(r,n),h=function(e,t,n,r,i){var s,o=e,u=t,a=n.parser,f=n.parse,l=r.Compiler,c=r.compile,h=r.precompile,p=i,d=o.create,v=function(){var e=d();return e.compile=function(t,n){return c(t,n,e)},e.precompile=function(t,n){return h(t,n,e)},e.AST=u,e.Compiler=l,e.JavaScriptCompiler=p,e.Parser=a,e.parse=f,e};return o=v(),o.create=v,o["default"]=o,s=o,s}(s,o,f,l,c);return h}),define("syracuse-tablet/html/js/helpers/handlebarsHelpers",["require","exports","module"],function(e,t,n){t.registerHelpers=function(e){e.registerHelper("smCompare",function(e,t,n,r){var i,s;if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");r===undefined&&(r=n,n=t,t="==="),i={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"typeof":function(e,t){return typeof e==t}};if(!i[t])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+t);return s=i[t](e,n),s?r.fn(this):r.inverse(this)})}}),define("syracuse-tablet/html/js/main",["require","exports","module","syracuse-tablet/html/js/ui/modal","syracuse-tablet/html/js/ui/uiUtils","syracuse-tablet/html/js/helpers/globals","syracuse-tablet/html/js/helpers/jsutils","syracuse-tablet/html/js/init/initStyles","syracuse-tablet/html/js/init/initLocale","syracuse-tablet/html/js/init/initModules","syracuse-tablet/html/js/init/initLogin","syracuse-tablet/html/deps/handlebars-latest","syracuse-tablet/html/js/helpers/handlebarsHelpers"],function(e,t,n){function c(){return u.init().then(function(){return a.init()}).then(function(){return f.init()}).then(function(){return l.init()}).fail(function(e){r.error("_startup error",e)})}var r=e("syracuse-tablet/html/js/ui/modal"),i=e("syracuse-tablet/html/js/ui/uiUtils"),s=e("syracuse-tablet/html/js/helpers/globals"),o=e("syracuse-tablet/html/js/helpers/jsutils"),u=e("syracuse-tablet/html/js/init/initStyles"),a=e("syracuse-tablet/html/js/init/initLocale"),f=e("syracuse-tablet/html/js/init/initModules"),l=e("syracuse-tablet/html/js/init/initLogin");window.Handlebars=e("syracuse-tablet/html/deps/handlebars-latest"),e("syracuse-tablet/html/js/helpers/handlebarsHelpers").registerHelpers(window.Handlebars),window.onerror=function(e,t,n,u){s.application?s.application.waitWheelStop():i.waitWheelStop();try{r.error("Javascript error",{where:"window.onerror",exception:u,message:e+"\n"+(t?"Url : "+o.cleanStack(t)+"\nLineNumber : "+n:"")})}catch(a){var f=e+"\n"+(u?+JSON.stringify(u,null,2):t?"Url : "+t+"\nLineNumber : "+n:"");alert(f)}},$(document).ready(function(){document.location.href.indexOf("?circular")>-1?xrayquire.showCycles(undefined,!0):c()})});