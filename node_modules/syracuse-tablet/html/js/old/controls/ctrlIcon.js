"use strict";

var utils = require('syracuse-tablet/html/js/helpers/utils');
var fontUtils = require('syracuse-tablet/html/js/ui/fontUtils');
var ctrlBase = require('syracuse-tablet/html/js/controls/ctrlBase');
var Base = ctrlBase.Klass;

/**
 * Icon used by arrays
 * Displays an icon according to the value of $icon in prototype
 * prototype properties
 * 		$url to attach a link to the icon
 * 		$action to attach an action/navigation to the icon
 * 			Contains all the parameters for the link (data-action, data-params...)
 */
var _Klass = utils.defineClass(

	function CtrlIcon(controller, article, prototype) {
		Base.call(this, controller, article, prototype);
	}, Base, {

		buildHtml: function($$parent, controllerDao, buildOptions) {
			var self = this;
			Base.prototype.buildHtml.call(self, $$parent, controllerDao, buildOptions, ["s-m-icon"]);
			self.$$elmt.html(ctrlBase.genHtmlCtrlLink(self.prototype, controllerDao, {
				tag: 'a',
				css: ''
			}, function(html) {
				html.push('<span class="');
				html.push(fontUtils.ctrlIcon(self.prototype.data('$icon')));
				html.push('"></span>');
			}));
		}
	});

exports.Klass = _Klass;