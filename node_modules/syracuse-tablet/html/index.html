<!DOCTYPE html>
<!-- dir attribute specifies the text direction of the element's content - ltr=left to right  -->
<html dir="ltr">
<head>
<title>Syracuse Tablet App</title>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<!-- BOOTSTRAP CSS - CSS -->
<link rel="stylesheet" href="./deps/bootstrap-3.1.1/css/bootstrap.css" />
<link rel="stylesheet" href="./deps/bootstrap-3.1.1/css/bootstrap-theme.css" />
<link rel="stylesheet" href="./deps/bootstrap-select/bootstrap-select.css" />
<link rel="stylesheet" href="./deps/jquery-waiting/waiting.css" />
<!-- SAGE - CSS -->
<link rel="stylesheet" href="./css/main.css" />
<link rel="stylesheet" href="./css/images.css" />
<link rel="stylesheet" href="./css/applications.css" />
<!-- LIBS -->
<script src="deps/requirejs/require.js"></script>
<script src="deps/requirejs/xrayquire.js"></script>
<script>
	var _log = function() {
		var text;
		for (var i = 0; i < arguments.length; i++) {
			var a = arguments[i];
			if (a != null) {
				if (Error.prototype.toString === a.toString){
					console.log(a.message, "\n", a.stack);
				}else{
					if (!text) text = ["[index]: "];
					text.push(a);
				}
			}
		}
		console.log(text.join(text, " "));
	};
	require.config({
		'baseUrl' : "/requireJS",
		'paths' : {
			'textPlugin' : '/syracuse-tablet/html/deps/requirejs/text',
			
			'jquery' : '/syracuse-tablet/html/deps/jquery-2.1.1/jquery',
			'jquery-waiting' : '/syracuse-tablet/html/deps/jquery-waiting/waiting',
			
			'bootstrap' : '/syracuse-tablet/html/deps/bootstrap-3.1.1/js/bootstrap',
			'bootstrap-select' : '/syracuse-tablet/html/deps/bootstrap-select/bootstrap-select',
			
			'hammer' : '/syracuse-tablet/html/deps/hammerjs-1.1.3/hammer',
			'handlebars' : '/syracuse-tablet/html/deps/handlebars-latest',

			'nativePrototypes': '/syracuse-tablet/html/js/helpers/nativePrototypes',
			'jqueryPlugins': '/syracuse-tablet/html/js/helpers/jqueryPlugins',
			
			'main': 'syracuse-tablet/html/js/main'
		},
		'shim' : {
			'jquery-waiting': {
				'deps' : [ 'jquery' ]
			},
			'jqueryPlugins': {
				'deps' : [ 'jquery' ]
			},
			'bootstrap' : {
				'deps' : [ 'jquery' ]
			},
			'bootstrap-select': {
				'deps' : [ 'bootstrap' ]
			},
			'hammer' : {
				'deps' : [ 'bootstrap' ]
			},
			'main': { 
				'deps': [
				"jquery", 
				"hammer",
				"bootstrap", 
				"handlebars", 
				"bootstrap-select", 
				"jquery-waiting",
				"nativePrototypes",
				"jqueryPlugins"
				]
			}
		}
	});
	function loadMain(lang, rsrc){
		require.undef("textPlugin");
		require(["main"], 
			function(main) {
				main.main(lang, rsrc);
			}
		);
	}
	function loadRsrc (lang, success, fail) {
		_log && _log("Try to load ", lang, " resource");
		var path = "/syracuse-tablet/html/js/resources/strings-" + lang + ".json";
		require(["textPlugin!" + path], function(rsrc) {
			try {
				_log && _log("Resource ", lang, " loaded");
				success(lang, JSON.parse(rsrc));	
			}catch(e){
				_log && _log("Error parsing ", lang, " resource", e);
				if (fail) fail(lang); else success(lang , null);
			}
		}, function(err){
			_log && _log("Error loading ", err.requireModules[0]);
			if (fail) fail(lang); else success(lang , null);
		});
	};
	loadRsrc ("en"||window.navigator.language, loadMain, function(lang){
		if (lang === "en") loadMain();
		loadRsrc ("en", loadMain);
	});	
</script>

<!-- Currently used to create the standard page header -->
<script id="contructionHeadTmpl" type="text/x-handlebars-template">
<nav class="navbar navbar-inverse" role="navigation">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target="#header-coll{{togglenav}}</span> <span
					class="icon-bar"></span> <span class="icon-bar"></span> <span
					class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#">{{title}}</a>
		</div>
		<div class="collapse navbar-collapse" id="#header-collapse-{{pageId}}">
			<ul class="nav navbar-nav navbar-right">
				<li><a href="#" data-action="logout"><span
						class="glyphicon glyphicon-log-out" /> {{logout}}</a></li>
			</ul>
		</div>
	</div>
</nav>

</script>
</head>
<body>
	<div class="application" id="application" style="display: none"></div>
	<div class="waiting-background" style="display:none"></div>
	<div class="waiting-wheel"  style="display:none"></div>
</body>
</html>
