$(function() {
	$(document)
			.ready(
					function() {

						function toggleClass(dom, css, show) {
							if (dom) {
								if (show) {
									if (dom.className.indexOf(css) < 0) {
										dom.className += (" " + css);
									}
								} else {
									dom.className = dom.className.replace(css,
											"");
								}
							}
						}

						// --- INITIALIZING POPOVER
						var options = {
							placement : "bottom",
							content : "Please fill the two fields with the same value. It's just for the demo :)",
							trigger : "manual"
						};
						$(document.getElementById('s-home-form-submit'))
								.popover(options);
						// --- POPOVER INITIALIZATION END

						$(document.body)
								.delegate(
										"a[data-s-box],button",
										"click",
										function(event) {
											var pickerAttribute = event.target
													.getAttribute("data-s-picker");
											var boxAttribute = event.target
													.getAttribute("data-s-box");
											switch (pickerAttribute) {
											case "s-home-form-submit":

												var input1Val = document
														.getElementById("s-home-form-input1").value;
												var input2Val = document
														.getElementById("s-home-form-input2").value;

												if (!input1Val
														|| !input2Val
														|| (input1Val != input2Val)) {
													$(event.target).popover(
															'show');
													setTimeout(
															function() {
																$(event.target)
																		.popover(
																				'hide');
															}, 1500);
												} else {
													window.location = "bootstrap_dashboard.html";
												}
												break;
											case "s-home-form-return":
												window.location = "bootstrap.html";
												break;
											}
											if (boxAttribute) {
												var listItems = event.target.parentNode.parentNode.children;
												var grids = document
														.getElementsByClassName("s-list-core")[0].children;
												for (var ii = 0, jj = listItems.length; ii < jj; ii++) {
													toggleClass(
															listItems[ii],
															"active",
															listItems[ii].children[0]
																	.getAttribute("data-s-box") == boxAttribute);
													grids[ii].style.display = listItems[ii].children[0]
															.getAttribute("data-s-box") == boxAttribute ? ""
															: "none";
												}
											}
										})
								.delegate(
										"button[data-toggle='collapse']",
										"click",
										function(event) {
											var navMenuDom = document
													.getElementsByClassName("s-page-navigation-menu")[0];
											navMenuDom.style.height = document.body.clientHeight
													+ "px";
										});

						if (window.location.pathname
								.indexOf("bootstrap_customers.html") > 0) {

							// building lists with templating
							var rows = [];
							var columns = [];
							var contactsNumber = 16;
							var maxColumnsPerRow = 12;

							for (var ii = 0, jj = contactsNumber; ii < jj; ii++) {
								columns.push({
									firstname : "FirstName",
									lastname : "Lastname " + ii,
									companyName : "Company " + ii
								});
								if ((ii + 1) % maxColumnsPerRow == 0) {
									rows.push({
										columns : columns
									});
									columns = [];
								}
							}

							$
									.when($.stemplates.exec("contacts", {
										rows : rows
									}))
									.done(
											function(html) {
												document
														.getElementsByClassName("s-field-value")[0]
														.appendChild($(html)[0]);
											});
						}

					});
});