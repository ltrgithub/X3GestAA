"use strict";
(function($) {

	var that = $.smobile || {};

	var emptyDom = function(domNode) {
		if (domNode) {
			while (domNode.firstChild) {
				domNode.removeChild(domNode.firstChild);
			}
		}
	};

	var buildCustomerView = function() {
		// build html base
		$.when($.stemplates.exec("customerView1", {})).done(
			function(html) {
				var dom = html;
				$(document.body).html(dom);

				// bind data and runWINJS processing
				var items = [];

				for (var ii = 0, jj = 20; ii < jj; ii++) {
					items.push({
						title: "Customer Name " + ii,
						picture: "images/customers/customericon.png"
					});
				}

				WinJS.Namespace.define("Sample.ListView", {
					data: new WinJS.Binding.List(items)
				});

				WinJS.UI.processAll();
			});
	};

	that.openCustomerView = function(testCase) {
		// clean Dom
		emptyDom(document.body);

		// build view
		switch (testCase) {
			case "sample1":
				buildCustomerView();
				break;
			case "sample2":
				break;
		}
	};

	that.loadListener = function() {
		$(document.body).delegate("button", "click touchstart", function(event) {
			$.smobile.openCustomerView(this.getAttribute("data-s-picker"));
		});
	};

})(jQuery);