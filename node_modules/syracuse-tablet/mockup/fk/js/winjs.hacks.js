"use strict";
(function($){
	
	$.smobile = $.smobile || {};
	
	var _iconMap = {
		"previous":"\uE100",
		"next":"\uE101",
		"play":"\uE102",
		"pause":"\uE103",
		"edit":"\uE104",
		"save":"\uE105",
		"clear":"\uE106",
		"delete":"\uE107",
		"remove":"\uE108",
		"add":"\uE109",
		"cancel":"\uE10A",
		"accept":"\uE10B",
		"more":"\uE10C",
		"redo":"\uE10D",
		"undo":"\uE10E",
		"home":"\uE10F",
		"up":"\uE110",
		"forward":"\uE111",
		"right":"\uE111",
		"back":"\uE112",
		"left":"\uE112",
		"favorite":"\uE113",
		"camera":"\uE114",
		"settings":"\uE115",
		"sync":"\uE117",
		"download":"\uE118",
		"find":"\uE11A",
		"help":"\uE11B",
		"contactinfo":"\uE136"
		
	}
	function addUtils(){
		$.extend($.helpers,{
			winJsIconChar:function(id){
				var x = _iconMap[id];
				return x ? x : "\uE177";
			}
			
		});
		
	}
	
	
	function hackController() {
		$.extend($.smobile.controllerClass.prototype, {
			actionwinjsnav: function(options, page) {
				if (options.success) options.success(null, null, false);
				if (page) $.smobile.goToPage(this, page);
			}
		});
	};
	
	$.smobile.hackWinJsinit = function(){
		hackController();	
		addUtils();
	}
	
})(jQuery);