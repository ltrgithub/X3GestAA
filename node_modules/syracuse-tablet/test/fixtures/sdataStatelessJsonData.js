"use strict";
/*
 *
 * This file contains a list of test cases which send data to the server and match it against an expected result
 *
 * Every test case is build like:
 * {
 *   $exec: {
 *     $url: URL to send to
 *     $method: HTTP method to use
 *     $data: Data to send (opriona)
 *   },
 *   $check: {
 *     $code: expected http code
 *     $data: Data expected to be returned: Received object must match expected object but may contain additional data
 *     $not: Same as data but properties specified in $not MUST NOT be contained in the response
 *   }
 * }
 */

exports.testCases = [

	/*
	 * Get query prototype
	 */
	{
		"$title": "Test query prototype",
		"$exec": {
			"$url": "{$baseUrl}/$prototypes('AQTCRUD.$query')?$stateless=true",
			"$method": "GET"
		},
		"$check": {
			"$code": 200,
			"$data": {
				"$properties": {
					"$resources": {
						"$type": "application/x-array",
						"$item": {
							"$links": {
								"$details": {
									"$url": "{$baseUrl}/AQTCRUD('{CODE}')?representation=AQTCRUD.$details",
									"$method": "GET"
								},
								"$edit": {
									"$method": "GET",
									"$url": "{$baseUrl}/AQTCRUD('{CODE}')?representation=AQTCRUD.$edit"
								},
								"$delete": {
									"$method": "DELETE",
									"$url": "{$baseUrl}/AQTCRUD('{CODE}')?representation=AQTCRUD.$query"
								}
							}
						}
					}
				},
				"$links": {
					"$create": {
						"$method": "GET",
						"$url": "{$baseUrl}/AQTCRUD/$template?representation=AQTCRUD.$create"
					}
				}
			},
			"$not": {
				"$actions": null
			}
		}
	},

	/*
	 * Get details prototype
	 */
	{
		"$title": "Test details prototype",
		"$exec": {
			"$url": "{$baseUrl}/$prototypes('AQTCRUD.$details')?$stateless=true",
			"$method": "GET"
		},
		"$check": {
			"$code": 200,
			"$data": {
				"$url": "{$baseUrl}/AQTCRUD('{$key}')?representation=AQTCRUD.$details",
				"$links": {
					"$edit": {
						"$method": "GET",
						"$url": "{$baseUrl}/AQTCRUD('{CODE}')?representation=AQTCRUD.$edit"
					},
					"$delete": {
						"$method": "DELETE",
						"$confirm": "Do you wish to delete the recording?",
						"$url": "{$baseUrl}/AQTCRUD('{CODE}')?representation=AQTCRUD.$query"
					},
					"$query": {
						"$url": "{$baseUrl}/AQTCRUD?representation=AQTCRUD.$query",
						"$method": "GET"
					}
				}
			},
			"$not": {
				"$actions": null
			}
		}
	},

	/*
	 * Get edit prototype
	 */
	{
		"$title": "Test edit prototype",
		"$exec": {
			"$url": "{$baseUrl}/$prototypes('AQTCRUD.$edit')?$stateless=true",
			"$method": "GET"
		},
		"$check": {
			"$code": 200,
			"$data": {
				"$url": "{$baseUrl}/AQTCRUD('{$key}')?representation=AQTCRUD.$edit",
				"$links": {
					"$save": {
						"$isAction": true,
						"$url": "{$baseUrl}/AQTCRUD('{$key}')",
						"$method": "PUT"
					},
					"WADD_LIG44444444": {
						"$isAction": true,
						"$url": "{$baseUrl}/AQTCRUD('{$key}')/$services/WADD_LIG44444444?representation=AQTCRUD.$edit",
						"$method": "PUT"
					}
				}
			},
			"$not": {
				"$actions": null
			}
		}
	},

	/*
	 * Get create prototype
	 */
	{
		"$title": "Test create prototype",
		"$exec": {
			"$url": "{$baseUrl}/$prototypes('AQTCRUD.$create')?$stateless=true",
			"$method": "GET"
		},
		"$check": {
			"$code": 200,
			"$data": {
				"$url": "{$baseUrl}/AQTCRUD('{$key}')?representation=AQTCRUD.$create",
				"$links": {
					"$save": {
						"$isAction": true,
						"$url": "{$baseUrl}/AQTCRUD",
						"$method": "POST"
					},
					"WADD_LIG44444444": {
						"$isAction": true,
						"$url": "{$baseUrl}/AQTCRUD/$services/WADD_LIG44444444?representation=AQTCRUD.$create",
						"$method": "PUT"
					}
				}
			},
			"$not": {
				"$actions": null
			}
		}
	},

	/*
	 * Execute action on persistent class (edit facet)
	 */
	{
		"$title": "Test action $edit facet",
		"$exec": {
			"$url": "{$baseUrl}/AQTCRUD('10')/$services/WADD_LIG44444444?representation=AQTCRUD.$edit&$stateless=true",
			"$method": "PUT",
			"$data": {
				"TDCB1": 1500,
				"TDCB2": 2000
			}
		},
		"$check": {
			"$code": 200,
			"$data": {
				"$representation": "AQTCRUD",
				"$links": {
					"$save": {
						"$isDisabled": false,
						"$isAction": true,
						"$url": "{$baseUrl}/AQTCRUD('{$key}')",
						"$method": "PUT"
					},
					"WADD_LIG44444444": {
						"$isDisabled": false,
						"$isAction": true,
						"$url": "{$baseUrl}/AQTCRUD('{$key}')/$services/WADD_LIG44444444?representation=AQTCRUD.$edit",
						"$method": "PUT"
					}
				},
				"TDCB1": 1500,
				"TDCB2": 2000,
				"TDCB": 3500
			}
		}
	},

	/*
	 * Execute action on persistent class (create facet)
	 */
	{
		"$title": "Test action $create facet",
		"$exec": {
			"$url": "{$baseUrl}/AQTCRUD/$services/WADD_LIG44444444?representation=AQTCRUD.$create&$stateless=true",
			"$method": "PUT",
			"$data": {
				"TDCB1": 1500,
				"TDCB2": 2000
			}
		},
		"$check": {
			"$code": 200,
			"$data": {
				"$representation": "AQTCRUD",
				"$links": {
					"$save": {
						"$isDisabled": false,
						"$isAction": true,
						"$url": "{$baseUrl}/AQTCRUD",
						"$method": "POST"
					},
					"WADD_LIG44444444": {
						"$isDisabled": false,
						"$isAction": true,
						"$url": "{$baseUrl}/AQTCRUD/$services/WADD_LIG44444444?representation=AQTCRUD.$create",
						"$method": "PUT"
					}
				},
				"TDCB1": 1500,
				"TDCB2": 2000,
				"TDCB": 3500
			}
		}
	},

	/*
	 * Execute action on non persistent class (create facet)
	 */
	{
		"$title": "Test action $create facet, non persisten class",
		"$exec": {
			"$url": "{$baseUrl}/AQTACTNP/$services/WADD_LIG44444444?representation=AQTACTNP.$create&$stateless=true",
			"$method": "PUT",
			"$data": {
				"TDCB1": 1550,
				"TDCB2": 2050
			}
		},
		"$check": {
			"$code": 200,
			"$data": {
				"$representation": "AQTACTNP",
				"$links": {
					"$save": {
						"$isDisabled": false,
						"$isAction": true,
						"$url": "{$baseUrl}/AQTACTNP",
						"$method": "POST"
					},
					"WADD_LIG44444444": {
						"$isDisabled": false,
						"$isAction": true,
						"$url": "{$baseUrl}/AQTACTNP/$services/WADD_LIG44444444?representation=AQTACTNP.$create",
						"$method": "PUT"
					}
				},
				"TDCB1": 1550,
				"TDCB2": 2050,
				"TDCB": 3600
			}
		}
	}
];