"use strict";

var UT = require("./../lib/ut");
// ====================================================================================================
//-- Authoring test:  Array Display: Table, Card, Carousel  link---------------------------------------
//-- Quit button NOT save - click on "yes" to confirm
//-- Logout
//=====================================================================================================
describe("AQMCRUDM authoring table/card/carousel", function() {
	UT.defaultBeforeAndAfter({
		testPageUrl: "{$hostPort}/mobile2/x3/erp/GX3APP/AQMDEVICE?representation=AQMCRUDM.$query"
	});

	it("Page design open", function() {
		this.timeout(10000);
		return UT.Dom.click(UT.Sel.DataAction("openGlobalPanel")).then(function() {
				return UT.Dom.waitVisible(UT.Sel.DataAction("designPage"), 500);
			})
			.then(function() {
				return UT.Dom.click(UT.Sel.DataAction("designPage"));
			})
			.then(function() {
				return UT.Dom.waitLocated(UT.Sel.Id("authPanelControlType"), 1000);
			});
	});

	//-- panel left/right card authoring -------------------------------------------
	it("Test panel left/right Card click", function() {
		this.timeout(10000);
		return UT.App.selectAuthTreeElement("$resources")
			.then(function() {
				return UT.App.authArrayDispaly("card_lab");
			});
	});
	//-- Table click -------------------------------		
	it("Test panel right Table click", function() {
		return UT.App.authArrayDispaly("table");
	});

	//-- panel right carousel authoring -------------------------------------------
	it("Test panel left/right carousel click", function() {
		return UT.App.authArrayDispaly("carousel");
	});
	// ============================================================================						
	//-- Close  button authoring NOT Save -----------------------------------------
	// ============================================================================	
	it("Test close not Save button", function() {
		this.timeout(10000);
		return UT.Dom.waitLocated(UT.Sel.Id("auth-btn-close-id"), 800).then(function() {
			//-- Close button "auth-btn-close-id" -------------- 	        
			return UT.Dom.click(UT.Sel.Id("auth-btn-close-id"))
				.then(function() {
					//----Modal Question yes/no : yes : quit no Save ----------------
					return UT.Dom.waitLocated(UT.Sel.DataAction2("yes"), 5000)
						.then(function() {
							return UT.Dom.click(UT.Sel.DataAction2("yes"))
								.then(function() {
									// Simulate an error in order to click on logout
									return UT.App.waitPage("[To improve]", 1000);
								});
						});

				});
		});
	});
	// ---------------------------------------------------------------------
	//------ Logout with span.fa.fa-bars: BigMac  icon ---------------------
	// ---------------------------------------------------------------------
	it("Logout for authoring", function() {
		return UT.App.logout();
	});


});