"use strict";

var UT = require("./../lib/ut");

// Test executing an action on a working copy
describe("AQMCRUDM working copy action test", function() {
	UT.defaultBeforeAndAfter({
		testPageUrl: "{$hostPort}/mobile2/x3/erp/GX3APP/AQMDEVICE('10')/$workingCopies?representation=AQMCRUDM.$edit"
	});

	it("Test edit facet working copy action", function() {
		this.timeout(10000);
		var TEXTAXX;
		var TEXTE;
		var currentCyle;

		return UT.Dom.getPageCycle(UT.Sel.Page("AQMCRUDM.$edit"))
			.then(function(cycle) {
				currentCyle = cycle;
				// Trigger action
				return UT.App.executeActionPanelItem(UT.Sel.X3Action("ADDNUMBER_LIG444"));
			})
			.then(function() {
				// Wait for client to sync with server
				//Not need here: return UT.Dom.waitPageCycleChange(UT.Sel.Page("AQMCRUDM.$edit"), null, currentCyle);

			})
	});
	//-- Ltr 24/11/2016 ----- if not error on the next script --        
	it("Logout for working copy action", function() {
		this.timeout(10000);
		return UT.App.logout();
	});
});