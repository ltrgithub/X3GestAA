"use strict";

var UT = require("./../lib/ut");

// Test if navigation from a query to a details facet works using AQMCRUDM
describe("AQMCRUDM query row click row 4", function() {
	UT.defaultBeforeAndAfter({
		testPageUrl: "{$hostPort}/mobile2/x3/erp/GX3APP/AQMDEVICE?representation=AQMCRUDM.$query"
	});
	it("Waiting...", function() {
		// Simulate an error in order to click on nex event
		return UT.App.waitPage("[To improve]", 1500);
	});

	it("Test detail page navigation row 4", function() {
		return UT.Dom.find(UT.Sel.Row(4), UT.Sel.X3Field("$resources"))
			.then(function($$gridRow) {
				return UT.Dom.click($$gridRow, null, UT.App.waitPage$("AQMCRUDM.$details", 12000));
			})
	});
	it("Waiting...", function() {
		// Simulate an error in order to click on nex event
		return UT.App.waitPage("[To improve]", 900);
	});

	//-- Back button ----------------------------------------------------------			
	it("Test detail page navigation back button", function() {
		return UT.App.back()
			.then(function() {
				// Wait for $query page to become visible again
				//return UT.App.waitPage("AQMCRUDM.$query", 1000);
			});

	});
	it("Waiting...", function() {
		// Simulate an error in order to click on nex event
		return UT.App.waitPage("[To improve]", 1500);
	});
	// ---------------------------------------------------------------------
	//------ Logout with span.fa.fa-bars: BigMac  icon ---------------------
	// ---------------------------------------------------------------------
	it("Logout for row 8 read", function() {
		return UT.App.logout();
	});

});