"use strict";

var UT = require("../ut");

var _code;
var _description;

describe("Test CRUD on AQMCRUDM", function() {

	describe("Create on AQMCRUDM", function() {

		// Open browser, login, ensure browser is closed once all tests were executed
		UT.defaultBeforeAndAfter();

		it("Navigate to create page", function() {
			this.timeout(10000);
			return UT.App.navToTestPage("x3.erp.SUPERV.AQMCRUDM.$query", "testAutoUI_AQMDEVICE_Query")
				.then(function() {
					return UT.DOM.click(UT.SEL.$$X3Link("$create"),
						null,
						UT.App.waitPage$("x3.erp.SUPERV.AQMCRUDM.$create"));
				});
		});
		it("Enter data and save", function() {
			this.timeout(10000);
			return UT.DOM.getValue(UT.SEL.$$Field("CODE"))
				.then(function(text) {
					UT.log("Key generated: " + text);
					_code = text;
					_description = "Created by testcase: " + _code;
					return UT.DOM.setValue(UT.SEL.$$Field("TEXTAXX"), _description);
				})
				.then(function() {
					return UT.DOM.click(UT.SEL.$$X3Link("$save"),
						null,
						UT.App.waitPage$("x3.erp.SUPERV.AQMCRUDM.$query"));
				});
		});
	});
});