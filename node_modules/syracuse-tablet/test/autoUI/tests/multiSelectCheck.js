"use strict";

var UT = require("./../lib/ut");
//=========================================================================================
//============ Test using AQMCRUDM, Multi-Select check                     ================
//========================================================================================= 
describe("AQMCRUDM MultiSelect check", function() {
	UT.defaultBeforeAndAfter({
		testPageUrl: "{$hostPort}/mobile2/x3/erp/GX3APP/AQMDEVICE?representation=AQMCRUDM.$query&$mobileEndpoint=x3.erp.GX3APP&$mobileProtocol=workingcopy&$forceProtocol=true"
	});

	it("Button Multi-Select", function() {
		return UT.Dom.waitLocated(UT.Sel.Xpath("//a[@data-naction='multiSelToggle']"), 1500).then(function() {
			return UT.Dom.click(UT.Sel.Xpath("//a[@data-naction='multiSelToggle']/i[@class='fa fa-th-list']"));
		});
	});

	it("Waiting for browser finish..", function() {
		// Simulate an error in order to click on next event
		return UT.App.waitPage("[To improve]", 800);
	});

	//it("Button Select all menu", function() {				
	//return UT.Dom.waitLocated(UT.Sel.Xpath("//button[@data-toggle='dropdown']"), 1500).then(function() {
	//	return UT.Dom.click(UT.Sel.Xpath("//button[@data-toggle='dropdown']"));
	//});
	//});

	it("Select 4 lines", function() {
		return UT.Dom.waitLocated(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='0']"), 1500).then(function() {
			return UT.Dom.click(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='0']")).then(function() {
				return UT.Dom.click(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='1']")).then(function() {
					return UT.Dom.click(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='2']")).then(function() {
						return UT.Dom.click(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='3']"))
					});
				});
			});
		});
	});

	it("Select 4 lines suite", function() {
		return UT.Dom.waitLocated(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='4']"), 1500).then(function() {
			return UT.Dom.click(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='4']")).then(function() {
				return UT.Dom.click(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='5']")).then(function() {
					return UT.Dom.click(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='6']")).then(function() {
						return UT.Dom.click(UT.Sel.Xpath("//tr[@data-s-ut-row-idx='7']"))
					});
				});
			});
		});
	});

	it("Waiting for browser finish..", function() {
		// Simulate an error in order to click on next event
		return UT.App.waitPage("[To improve]", 2000);
	});

	//it("Button Un-Select", function() {				
	//	return UT.Dom.waitLocated(UT.Sel.Xpath("//a[@data-params='$selectall']"), 1500).then(function() {
	//		return UT.Dom.click(UT.Sel.Xpath("//a[@data-params='$selectall']"));
	//	});
	//});	
	//it("Waiting for browser finish..", function() {
	//		// Simulate an error in order to click on next event
	//		return UT.App.waitPage("[To improve]", 1000);
	//});

	it("Icon Action Lock", function() {
		return UT.Dom.waitLocated(UT.Sel.Xpath("//a[@data-naction='multiSelTriggerAction'][@data-params='LOK']"), 1500).then(function() {
			return UT.Dom.click(UT.Sel.Xpath("//a[@data-naction='multiSelTriggerAction'][@data-params='LOK']"))
				.then(function() {
					return UT.App.waitPage("[To improve]", 3000);
				});
		});
	});
	it("Waiting for browser finish..", function() {
		return UT.Dom.waitLocated(UT.Sel.Xpath("//a[@data-naction='multiSelTriggerAction'][@data-params='exit']"), 1500).then(function() {
			return UT.Dom.click(UT.Sel.Xpath("//a[@data-naction='multiSelTriggerAction'][@data-params='exit']"))
		});

	});
	it("Waiting for browser finish..", function() {
		// Simulate an error in order to click on next event
		return UT.App.waitPage("[To improve]", 2000);
	});
	// ----------------------------------------------------------------------------
	//------ Logout with span.fa.fa-bars: Burger  icon ----------------------------
	// ----------------------------------------------------------------------------
	it("Logout of Multi-Select", function() {
		return UT.App.logout();
	});

});