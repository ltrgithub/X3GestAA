"use strict";

var UT = require("./../lib/ut");

//============ Test using Login to authoring Request ============================================
//============ testPageUrl: "{$hostPort}/mobile2/x3/erp/GX3APP/AQMDEVICE?representation=AQMCRUDM.$query" ==

describe("Authoring Request", function() {
	UT.defaultBeforeAndAfterPageWait({
		testPageUrl: "{$hostPort}/mobile2/$client/$local/$dataset/mobileDashboard('GRAPHIC-SUBLEVEL')",
		pagewait: "$graphicsDashboard.$mobileDashboard"

	});
	//----- Tile Sublevel ---------------
	it("Request sublevel", function() {
		return UT.App.waitPage("[To improve]", 12000);
	});
	//----------------------------------------------------------------------------------------
	// -------------------- Design page Request Level for Level ------------------------------
	//----------------------------------------------------------------------------------------		
	it("Request Page design open", function() {
		return UT.App.openDesignPage2().then(function() {
			UT.log("==>Request Page design open. Found.");
		});
	});
	// ====================================================================
	//-- panel left authoring GX3APP_QUERY_QAQTGRAP -----------------------
	// ====================================================================
	it("Test Request $resources click", function() {
		//return UT.App.selectAuthTreeElement("$resources")
		//.then (function() {		
		//});
		//===================================================		
		return UT.Dom.waitLocated(UT.Sel.Xpath("//li[@data-s-ut-auth-elmt-id='GX3APP_QUERY_QAQTGRAP']/ul/li/ul/li[@data-s-ut-auth-elmt-id='$resources']"), 1000)
			.then(function() {
				return UT.Dom.click(UT.Sel.Xpath("//li[@data-s-ut-auth-elmt-id='GX3APP_QUERY_QAQTGRAP']/ul/li/ul/li[@data-s-ut-auth-elmt-id='$resources']"))
					.then(function() {
						//return UT.App.waitPage("[To improve]", 2000);
						return UT.Dom.waitLocated(UT.Sel.Xpath("//a[@aria-controls='collapse_auth_prop_arrayOptions']"), 1500);
					});
			});

	});

	it("Request showPagination_lab click", function() {
		return UT.App.authExpSelectOption("arrayOptions", "showPagination_lab");
	});
	//---- Bug not fixed lose right panel menu
	it("Request chartStyle line click", function() {
		return UT.App.authExpSelectOption("chartStyle", "line_lab");
	});
	it("Request chartStyle bar click", function() {
		return UT.App.authExpSelectOption("chartStyle", "bar_lab");
	});
	it("Request chartStyle column click", function() {
		return UT.App.authExpSelectOption("chartStyle", "column_lab");
	});

	it("Request chartDisplayOptions isLegendHidden click", function() {
		return UT.App.authExpSelectOption("chartOptions", "isLegendHidden_lab");
	});
	it("Request chartDisplayOptions isXLabelsHidden click", function() {
		return UT.App.authExpSelectOption("chartOptions", "isXLabelsHidden_lab");
	});

	it("Request seriesOptions serie_CODE click", function() {
		return UT.App.authSeriesOptions("serie_CODE");
	});


	//it("Request axisLabels isXLabelsHidden click", function() {
	//		return UT.App.authExpSelectOption("axisLabels","isXLabelsHidden_lab");
	//});


	//a[@aria-controls="collapse_auth_prop_chartOptions"]
	//a[@aria-controls="collapse_auth_prop_axisLabels"]
	//button[@class="btn dropdown-toggle selectpicker btn-default"]
	//li[@data-original-index="1"]
	//li[@data-original-index="2"]


	// ============================================================================						
	//-- Close  button authoring NOT Save -----------------------------------------
	// ============================================================================	
	it("Request sublevel Close not Save button", function() {
		return UT.App.closeAuthNotSave().then(function() {
			UT.log("==>Request sublevel Close not Save button. Found.");
		});
	});
	// ---------------------------------------------------------------------
	//------ Logout with span.fa.fa-bars: BigMac  icon ---------------------
	// ---------------------------------------------------------------------
	it("Logout of Request authoring", function() {
		return UT.App.logout();
	});

});