"use strict";
require('syracuse-tablet/html/js/helpers/nativePrototypes');
var utils = require('syracuse-tablet/html/js/helpers/utils');



/*for (var i = 0; i < testModules.length; i++) {
	console.log(i + " require->	" + testModules[i])
	try{

		require(testModules[i]);
	}catch(e){
		console.log(e)
	}
}*/

/*
var runModules = [];
// add query string parameter to filter tests
var qs = utils.parseQueryString();
qs.exec = qs.exec ? qs.exec.trim().split(" ") : null;
console.log(JSON.stringify(qs, null, 2))
if (qs.exec) {
	qs.exec.forEach(function(m) {
		if (m && m.length > 0) {
			var idx = testModules.smIndexOf(function(x) {
				return x.indexOf('/' + m) > 0;
			})
			if (idx >= 0) {
				runModules.push(testModules[idx]);
			}
		}
	})
}
if (runModules.length == 0) {
	runModules = testModules;
	qs.skip = qs.skip ? qs.skip.split(" ") : null;
	if (qs.skip) {
		qs.skip.forEach(function(m) {
			if (m && m.length > 0) {
				var idx = runModules.smIndexOf(function(x) {
					return x.indexOf('/' + m) > 0;
				})
				if (idx >= 0) {
					runModules.splice(idx, 1);
				}
			}
		})
	}
}
console.log(JSON.stringify(runModules, null, 2))

for (var i = 0; i < runModules.length; i++) {
	console.log("require->	" + runModules[i])
	runModules[i] = require(runModules[i]);
}
*/
exports.main = function() {
	try {
		var testModules = [
			require('../../test/js/storage/testStorage'),
			require('../../test/js/testAjax'),
			require('../../test/js/testGeoLoc'),
			require('../../test/js/sdata/testSData'),
			require('../../test/js/protocol/testStateless')
		];
		var runModules = testModules;

		// To avoid bootstrap transitions (collapse)
		$.support.transition = false;
		var runTest = function() {
			module = runModules.pop();
			if (module) {
				module.test().then(function() {
					runTest();
				});
			}
		};
		runTest();
	} catch (e) {
		console.log(e);
	}
};