"use strict";

var UT = require("../ut");

describe("Check array detail navigation", function() {
	before(function() {
		this.timeout(10000);
		return UT.login();
	});

	describe("Check navigation", function() {
		it("Navigate to test page", function() {
			this.timeout(10000);
			return UT.DOM.click(
				UT.SEL.$$AppTile("clientTestApplication"),
				null,
				UT.App.waitPage$("testHomeDashboard.$mobileDashboard", 2000))
				.then(function() {
					return UT.DOM.click(
						UT.SEL.$$PageTile("testDefaultAQMCRUDM.$mobileDashboard"),
						null,
						UT.App.waitPage$("testDefaultAQMCRUDM.$mobileDashboard"), 5000);
				})
			// Find grid and open vignette in full screen
			.then(function() {
				return UT.DOM.find(UT.SEL.$$Field("$resources"));
			})
				.then(function(grid) {
					return UT.DOM.click(UT.SEL.$$Row(0), grid, UT.App.waitPage$("x3.erp.SUPERV.AQMCRUDM.$query"));
				})
			// Click grid in fullscreen to go to details
			.then(function(grid) {
				return UT.DOM.find(UT.SEL.$$Field("$resources"));
			})
				.then(function(grid) {
					return UT.DOM.click(UT.SEL.$$Row(0), grid, UT.App.waitPage$("x3.erp.SUPERV.AQMCRUDM.$details"));
				});

		});
	});

	after(function() {
		return UT.Driver.quit();
	});
});