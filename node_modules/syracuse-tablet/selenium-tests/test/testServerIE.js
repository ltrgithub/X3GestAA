"use strict";

var webdriver = require('selenium-webdriver');

var until = webdriver.until;
var By = webdriver.By;

//=============================================================================================
//======================= Run with Serer local IE driver                         ==========
// java -jar selenium-server-standalone-2.44.0.jar -Dwebdriver.ie.driver=.\IEDriverServer.exe
//==============================================================================================
var expectedTitle = 'Sage X3 Mobile - Debug';

// --- connect to Server Local -------------------------------------------------------
var browser = new webdriver.Builder().
usingServer('http://localhost:4444/wd/hub').
withCapabilities(webdriver.Capabilities.ie()).build();

browser.get('http://localhost:8124/syracuse-tablet/html/index_debug.html');
browser.manage().window().maximize();

//==================================== It works well with css  IE =============================================
var login_user = browser.wait(until.elementLocated(By.css('input[id="login-user"]')), 30000);
login_user.sendKeys("admin");
var login_password = browser.wait(until.elementLocated(By.css('input[id="login-password"]')), 30000);
login_password.sendKeys("admin");
var login_login = browser.wait(until.elementLocated(By.css('button[id="login-login"]')), 30000);
login_login.click();
//-- must have a time out
var tiles = browser.wait(until.elementLocated(By.xpath('//div[@id="_welcome_MOBILEMENUGENERALVig45"]')), 30000);
tiles.click();
//=============================================================================================================

//===Ok for IE use By.css very Quickly pb time out ??==================================================
//browser.findElement(webdriver.By.css('input[id="login-user"]')).sendKeys("admin");
//browser.findElement(webdriver.By.css('input[id="login-password"]')).sendKeys("admin");
//browser.findElement(webdriver.By.css('button[id="login-login"]')).click();
//======================================================================================================

browser.getTitle().then(function(title) {
	if (expectedTitle === title) {
		console.log("IE - Verification Successful - The correct title is displayed on the IE page.=" + title);
	} else {
		console.log("Verification Failed - An incorrect title is displayed on the web page.");
	}
});