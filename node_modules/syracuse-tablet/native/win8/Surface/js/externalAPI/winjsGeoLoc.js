"use strict";

(function() {

	var _getLocation = function(data) {
		return new WinJS.Promise(function(resolve, reject, progress) {

			var loc = new Windows.Devices.Geolocation.Geolocator();
			loc.getGeopositionAsync().then(function(pos) {
				var result = {
					valid: true,
					altitude: pos.coordinate.point.position.altitude,
					latitude: pos.coordinate.point.position.latitude,
					longitude: pos.coordinate.point.position.longitude
				};
				resolve(result);
			}, function(error) {
				var result = {
					valid: false,
					altitude: 0,
					latitude: 0,
					longitude: 0
				};
				resolve(result);
			});
		});

	};

	window.$SAGE.registerContainerAPI("geoLoc", {
		getLocation: _getLocation
	});
})();