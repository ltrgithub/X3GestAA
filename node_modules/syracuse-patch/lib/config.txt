[COMMANDS]
# _excel c:$/patching\test.bat $S $R$/exceladdin.txt
# _word c:$/patching\test.bat $S $R$/wordaddin.txt
# _nodelocal c:$/patching$/nodelocal.bat nodelocal.js $R
[OPTIONS]
streamline {"runtime": "fibers", "quiet": true, "typescript": { "module": 1, "moduleResolution": 2, "target": 1, "sourceMap": true}}
uglify  {"sequences": false, "unsafe": false, "unused": false, "hoist_vars": false, "if_return": false,	"cascade": false, "side_effects": false, "hoist_funs": false}
# other uglify properties: properties, dead_code, drop_debugger, conditionals, comparisons, evaluate !!, booleans, loops, join_vars

[FILES]
noCrypt  -1

#include tools/syracuse-migration
copy node_modules/tools/syracuse-migration/*.(js|_js|md)
copy node_modules/tools/syracuse-migration/config-template.yml

# do not copy git repository of submodules
ignore node_modules/**/.git
ignore shadow-modules/**/.git

#include tools/syracuse-migration
streamline node_modules/tools/syracuse-migration/*.(js|_js|md)
copy node_modules/tools/syracuse-migration/config-template.yml

# copy shadow modules except for developer modules
ignore shadow-modules/*/node_modules/(grunt|look|nodetime|v8-profiler|js-beautify|jshint|memwatch|streamline-doctool|tools|uglify-js|git-node)/**/*
# copy native modules only for desired platforms
if (!DOCKER) copy shadow-modules/((linux|win32)-x64-v8-(5.1|5.8))/**/*

ignore shadow_modules/**/*
copy node_modules/public/**/*

# no development tools
ignore node_modules/(js-beautify|jshint|streamline-doctool|tools|uglify-js|git-node)/**/*
ignore node_modules/@sage/syracuse-lib/src/memwatch/**/*

# unit tests
# ignore node_modules/(test-runner|test-contract)/**/*
# unused
ignore node_modules/(node-lint|x3-engine)/**/*

# ignore license encrypter and dev.html
ignore node_modules/**/encrypt.node

ignore shadow_modules/**/syracuse-license/**/encrypt.node

ignore node_modules/@sage/syracuse-lib/src/license/add-on.zip

ignore node_modules/dev.html

# ignores of mobile modules
ignore node_modules/syracuse-mobile/**/build/**/*
ignore node_modules/syracuse-tablet/html/build/**/*
ignore node_modules/syracuse-tablet/codecheck/**/*
# not necessary any more: ignore node_modules/syracuse-tablet/native/**/*


# copy external modules
copy node_modules/(babel-*|npm-shadow|coffee-script|fibers|jsurl|js-xml|jsntlm|mongodb|streamline*|mongodb|ez-*|mustache|aws-sdk|xml-crypto)/**/*
copy node_modules/@sage/html-sanitizer/**/*
copy node_modules/**/(node_modules|deps)/**/*


# files in main directory
copy (index|nanny|licdb|syragent).js
ignore *

# policies
copy policies/*.json

# ignore developer license
ignore devLic/*

#ignore nodejs binaries
ignore nodejs/**/*

# include plugins
babel node_modules/plugin/**/*

# ignore hidden files (starting with dot) and other programming languages
copy node_modules/msoffice/**/_rels/.rels
ignore **/.*
ignore **/*.(c|cpp|h|sh|asm|md|afm|as|cc|tbl|msg|gyp|orig)
ignore node_modules/.bin/*

# the following line can be removed when the corresponding references are deleted from the code
# streamline node_modules/@sage/syracuse-ui/lib/tests/**/*

# ignore tests
ignore (.git|try-git|tools|deps|stubs|x3index|dotnet)/**/*
ignore node_modules/**/(test)/**/*
ignore node_modules/**/(tests|examples)/**/*
# ignore native modules for Macintosh
ignore node_modules/**/darwin_x64/**/*

# auth is internal module. Do not change md5.min.js
copy @sage/syracuse-lib/public/auth/deps/**/*
ignore node_modules/@sage/syracuse-lib/src/auth/pfx/**/*
streamline @sage/syracuse-lib/public/auth/**/*
hide node_modules/@sage/syracuse-lib/src/auth/**/*

# ignore some parts which are not interesting at customer site
ignore node_modules/@sage/syracuse-ui/lib/fusion/dataTest/**/*
ignore node_modules/syracuse-x3/lib/convergence/data/cvgRecords/*
ignore node_modules/syracuse-x3/lib/unused.zip
ignore node_modules/@sage/syracuse-ui/addins/sageFlash/sfChart.js
ignore node_modules/syracuse-main/lib/ssl/*

# mobile client (ignored files: see above)
copy node_modules/syracuse-mobile/**/*
hide node_modules/syracuse-tablet/lib/**/*
copy node_modules/syracuse-tablet/**/*

#deliver test-runner
copy node_modules/test-runner/**/*

# uglify client side modules and modules without licensing
uglify node_modules/**/public/**/*
uglify node_modules/public/**/*
copy node_modules/@sage/syracuse-core/streamline-loader.js
copy node_modules/@sage/syracuse-lib/src/load-balancer/syragent.js
copy node_modules/@sage/syracuse-lib/src/mongo-util/**/*
uglify node_modules/@sage/syracuse-ui/**/*
copy node_modules/@sage/syracuse-react/**/*
uglify node_modules/@sage/rtf-converter/**/*
uglify node_modules/@sage/syracuse-lib/src/load-balancer/**/*
# include ui packages
uglify node_modules/@sage/ui-*/**/*
uglify node_modules/syracuse-main/html/**/*
uglify node_modules/msoffice/**/*
uglify node_modules/@sage/syracuse-core/lib/http.*
uglify node_modules/@sage/syracuse-lib/src/collaboration/entities/page/classicPageConverter.*
uglify node_modules/syracuse-x3/lib/convergence/**/*
uglify node_modules/syracuse-x3/lib/formatter/**/*
uglify node_modules/jsx509/**/*

# Eclipse studio
uglify node_modules/syracuse-studio/lib/dbgp/(proxyLauncher|proxy|proxyRunner).*
ignore node_modules/syracuse-studio/lib/dbgp/inprocProxy.*

# encrypt server side Syracuse modules
encrypt node_modules/@sage/syracuse-lib/src/(sage-id|perfmon)/**/*
encrypt node_modules/js*/**/*
uglify node_modules/@sage/syracuse-lib/src/license/index.ts
ignore node_modules/@sage/syracuse-lib/src/license/**/add-on.zip
hide node_modules/@sage/syracuse-lib/src/license/*
# ignore this config file
ignore node_modules/syracuse-patch/**/config.txt
hide node_modules/syracuse-patch/**/*
# encrypt remaining sources in node_modules/syracuse-* and node_modules/@sage/syracuse-lib/src
hide node_modules/syracuse-*/**/*
hide node_modules/@sage/syracuse-lib/src/**/*
copy node_modules/@sage/syracuse-lib/package.json

ignore node_modules/bundles/test/**/*
ignore node_modules/bundles/sage-exchange/test.js
hide node_modules/bundles/**/*
hide node_modules/bundle-*/**/*
hide node_modules/salesforce-*/**/*
# include support tool
hide node_modules/support-tool/**/*
# include socket.io
hide node_modules/socket.io/**/*
# include etna and related
hide node_modules/etna-etl
hide node_modules/etna-etl/**/*
hide node_modules/scm-lib
hide node_modules/scm-lib/**/*
hide node_modules/git-wrapper/**/*

# copy files directly within node_modules
copy node_modules/*

# ignore everything else under node_modules
ignore node_modules/**/*

# import modules
copy import/**/*
ignore (changelog|translation-indexes)/**/*

# copyrights 
copy copyrights/*

# certificate generation tool (ignore sources)
ignore cert_gen/java/**/*
copy cert_gen/*

# ignore everything else
ignore */**/*
