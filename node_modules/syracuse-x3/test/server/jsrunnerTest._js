"use strict";

var config = require('config');
var jsrunner = require('syracuse-x3/lib/jsRunner');

var done;
QUnit.module(module.id, {
	setup: function() {}
});



asyncTest("explorePackage test", 7, function(_) {
	strictEqual(jsrunner.explorePackage(_, __dirname + "/../fixtures/jsrunner_packageExplore/test1/test0"), true, "OK - same directory");
	strictEqual(jsrunner.explorePackage(_, __dirname + "/../fixtures/jsrunner_packageExplore/test2/lib/a1/a2/test0"), true, "OK - different directory");
	strictEqual(jsrunner.explorePackage(_, __dirname + "/../fixtures/jsrunner_packageExplore/test3/test0"), false, "not OK - file not found");
	strictEqual(jsrunner.explorePackage(_, __dirname + "/../fixtures/jsrunner_packageExplore/test4/test0"), false, "not OK - 4gl apis is not an array");
	strictEqual(jsrunner.explorePackage(_, __dirname + "/../fixtures/jsrunner_packageExplore/test5/test0"), false, "not OK empty array");
	strictEqual(jsrunner.explorePackage(_, __dirname + "/../fixtures/jsrunner_packageExplore/test6/test0"), false, "not OK - no 4gl-apis element");
	//comment it because we have to test with bad json but precommit rulle prevent that 
	//strictEqual(jsrunner.explorePackage(_, __dirname + "/../fixtures/jsrunner_packageExplore/test7/test0"), false, "not OK - invalid JSON");
	strictEqual(jsrunner.explorePackage(_, __dirname + "/../fixtures/jsrunner_packageExplore/test8/lib/test0"), false, "not OK - incorrect path in inner package.json");
	start();
});