"use strict";

var x3decimal = require('syracuse-x3/lib/convergence/types/CvgDecimal').CvgDecimal;

var done;
QUnit.module(module.id, {
	setup: function(_) {},
	teardown: function(_) {
		if (done) {
			setTimeout(function() {
				process.kill(process.pid);
			}, 500);
		}
	}
});


asyncTest("CvgDecimal",  function(_) {
	var buf = x3decimal.toBytes(".000003");
	strictEqual('be03000000000000000000000000000000' === buf.toString('hex'),true,".000003 ["+buf.toString('hex')+"]");
	var buf = x3decimal.toBytes("-.000003");
	strictEqual('4161000000000000000000000000000000' === buf.toString('hex'),true,"-.000003 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("2");
	strictEqual('c102000000000000000000000000000000' === buf.toString('hex'),true,"2 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("-2");
	strictEqual('3e62000000000000000000000000000000' === buf.toString('hex'),true,"-2 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("20");
	strictEqual('c114000000000000000000000000000000' === buf.toString('hex'),true,"20 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("-20");
	strictEqual('3e50000000000000000000000000000000' === buf.toString('hex'),true,"-20 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("24.58");
	strictEqual('c1183a0000000000000000000000000000' === buf.toString('hex'),true,"24.58 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("-24.58");
	strictEqual('3e4b2a0000000000000000000000000000' === buf.toString('hex'),true,"-24.58 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("1010.10");
	strictEqual('c20a0a0a00000000000000000000000000' === buf.toString('hex'),true,"1010.10 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("-1010.10");
	strictEqual('3d59595a00000000000000000000000000' === buf.toString('hex'),true,"-1010.10 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("3.1415926536");
	strictEqual('c1030e0f5c412400000000000000000000' === buf.toString('hex'),true,"-3.1415926536 ["+buf.toString('hex')+"");
	var buf = x3decimal.toBytes("0.25000");
	strictEqual('c019000000000000000000000000000000' === buf.toString('hex'),true,"0.25000 ["+buf.toString('hex')+"");
});

asyncTest("kill", 0, function(_) {
	done = true;
	start();
});
