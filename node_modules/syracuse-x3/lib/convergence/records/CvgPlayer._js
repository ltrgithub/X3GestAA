var helpers = require('syracuse-core/lib/helpers');
var util = require('util');
var upath =require('path');


var _player= function(_, filePath, config) {
	this._filePath =filePath;
	this._fileName = upath.basename (filePath);	
	this._config = config;	
}

exports.CvgPlayer = helpers.defineClass(_player, null, {
	start:function(_, context){
		var self=this, ex=null;
		try{
			self._log("START PLAYER");
		}catch(e){
			self._log("START PLAYER ERROR\n" + e.stack);
			ex=e;
		}finally{
			self._stop(_, ex, context);			
		}
	},
	_stop:function(_, exep, context){
		var self=this;
		try{
			self._log("STOP PLAYER - " + (exep==null ? "OK" : "KO"));
		}catch(e){
			self._log("STOP PLAYER ERROR\n" + e.stack);
		}finally{	
		}
	},
	_log:function(txt){
		if (this._config.trace) this._config.trace(txt);
	},
	logerr:function(e, txt) {
		this._log(txt);	
		this._log(e.stack ? e.stack : e.message ? e.message : e);
	}
	
});
