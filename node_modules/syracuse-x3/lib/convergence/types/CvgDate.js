"use strict";

var originMillis = Date.UTC(1599, 11, 31);

var CvgDate = {
	DATE_ZERO: "15991231",
	fromDays: function(days) {
		if (days === 0) {
			return CvgDate.DATE_ZERO;
		}
		var millis = originMillis + days * 86400 * 1000;
		var d = new Date(millis);
		return String(d.getUTCFullYear() * 10000 + (d.getUTCMonth() + 1) * 100 + d.getUTCDate());
	},
	toDays: function(str) {
		var year = parseInt(str.substring(0, 4), 10);
		var month = parseInt(str.substring(4, 6) || "0", 10);
		var day = parseInt(str.substring(6, 8) || "0", 10);
		var millis = Date.UTC(year, month - 1, day) - originMillis;
		return Math.ceil(millis / (86400 * 1000));
	}
};

exports.CvgDate = CvgDate;