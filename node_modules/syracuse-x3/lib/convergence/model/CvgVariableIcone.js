"use strict";
var helpers = require('syracuse-core/lib/helpers');
var CvgVariable = require('syracuse-x3/lib/convergence/model/CvgVariable').CvgVariable;
var CvgResu = require('syracuse-x3/lib/convergence/types/CvgResu').CvgResu;

// change - check with Client team
var NO_ICON = "-1";

var CvgVariableIcone = exports.CvgVariableIcone = helpers.defineClass(function(srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aFormat, aEntityState) {
	CvgVariable.call(this, srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aFormat, aEntityState);
}, CvgVariable, {
	clone: function() {
		var wVariable = new CvgVariableIcone(this.srcLine, this.entityIndexBaseOne, this.name, this.id, this.dataType, this.format, this.state);
		wVariable.mustBeFormatted = this.mustBeFormatted;
		this.cloneValues(wVariable);
		wVariable.setServerValue(new CvgResu(this.dataType, NO_ICON));
		wVariable.forceServerValueModification(true);
		return wVariable;
	},
	setServerValue: function(aResu) {
		if (aResu.isNull()) {
			aResu = new CvgResu(this.dataType, NO_ICON); // ack to set a STRU instead of a int
		}
		CvgVariable.prototype.setServerValue.call(this, aResu);
	}
});