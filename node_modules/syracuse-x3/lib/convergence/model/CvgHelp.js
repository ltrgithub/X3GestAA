"use strict";
var helpers = require('syracuse-core').helpers;
var CvgObservable = require('syracuse-x3/lib/convergence/model/CvgObservable').CvgObservable;

var CvgHelp = exports.CvgHelp = helpers.defineClass(function(client) {
	CvgObservable.call(this, client);
	this.tokens = [];
	this.setJsonType('MISC');
}, CvgObservable, {

	addToken: function(token) {
		var cat = "OBJ",
			keyw, split;
		if (token) {
			split = token.indexOf(".");
			keyw = split >= 0 ? token.substr(++split) : token;
			if ((split = keyw.indexOf(String.fromCharCode(7))) >= 0) {
				cat = keyw.substr(split + 1);
				keyw = keyw.substr(0, split);
			}
			this.tokens = [cat, keyw];
			this.forceChange();
		}
	},
	toJSON: function() {
		return {
			help: {
				tokens: this.tokens
			}
		};
	}
});