"use strict";
var helpers = require('syracuse-core/lib/helpers');
var CvgDiagnose = require('syracuse-x3/lib/convergence/model/CvgDiagnose');
/*
var CustomException = helpers.defineClass(function(client, e, message) {
	Error.call(this);
	Error.captureStackTrace(this, this); //super helper method to include stack trace in error object
	this.name = 'Custom Exception'; //set our function’s name as error name.
	// Error could be a strings, number...
	if (e && typeof e !="object") e = {message:e.toString()};
	this.message = e && e.message ?  e.message : (message ? message : ""); //set the error message
	this.inner = e;
	
}, Error, {
});
	*/
var CvgException = exports.CvgException = helpers.defineClass(function(client, e, message, recoveryCode, origin, detail) {
	Error.call(this);
	Error.captureStackTrace(this, this); //super helper method to include stack trace in error object
	// Error could be a strings, number...
	if (e && typeof e != "object") e = {
		message: e.toString()
	};
	this.message = e && e.message ? e.message : (message ? message : ""); //set the error message
	this.inner = e;
	this.name = 'CvgException'; //set our function’s name as error name.
	// Create diagnose exception (not tracked by the client !!)
	this.diagnose = CvgDiagnose.create(client, 'ERROR', 500, message || this.message, detail || null, e, origin, recoveryCode || 'KILL', false);
}, Error, {});