"use strict";
var helpers = require('syracuse-core/lib/helpers');
var CvgObservable = require('syracuse-x3/lib/convergence/model/CvgObservable').CvgObservable;

var CvgDiagnose = exports.CvgDiagnose = helpers.defineClass(function(client, severity, applicationCode, message, stackTrace, isException) {
	CvgObservable.call(this, client);

	
	this.severity = severity;
	this.applicationCode = applicationCode;
	this.message = message;
	this.stackTrace = stackTrace;
	// En dernier
	if (!isException)
		this.setJsonType('DIAGNOSE');
	
}, CvgObservable, {

	toJSON: function() {
		return {
			severity: this.severity || 'ERROR',
			applicationCode: this.applicationCode || 'ERROR',
			message: this.message || "",
			stackTrace: this.stackTrace || null,
			$origin: "NodeJS: Convergence Server",
		}

	},

});