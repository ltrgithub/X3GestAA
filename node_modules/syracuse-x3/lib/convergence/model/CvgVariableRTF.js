"use strict";
var helpers = require('@sage/syracuse-core').helpers;
var CvgVariable = require('./CvgVariable').CvgVariable;
import * as rtfconvert2unicodertf from '@sage/rtf-converter/lib/rtfconvert2unicodertf';
//var rtfconvert2unicodertf = require('@sage/syracuse-rtf/lib/rtfconvert2unicodertf');

var CvgVariableRTF = exports.CvgVariableRTF = helpers.defineClass(function(srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aFormat, aEntityState, window) {
	CvgVariable.call(this, srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aFormat, aEntityState, window);
}, CvgVariable, {
	clone: function(line) {
		var wVariable = new CvgVariableRTF(line, this.entityIndexBaseOne, this.name, this.id, this.dataType, this.format, this.state, this.win);
		wVariable.mustBeFormatted = this.mustBeFormatted;
		this.cloneValues(wVariable);
		return wVariable;
	},
	getValueForJson: function() {
		if (this.serverValue && this.serverValue.value) {
			this.serverValue.value = rtfconvert2unicodertf.parse(this.serverValue.value);
		}
		return CvgVariable.prototype.getValueForJson.call(this);
	}
});