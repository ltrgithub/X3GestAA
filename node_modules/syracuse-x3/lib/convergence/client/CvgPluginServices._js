"use strict";
var helpers = require('syracuse-core/lib/helpers');
var x3helpers = require("syracuse-x3/lib/helpers");
var CvgException = require('syracuse-x3/lib/convergence/model/CvgException').CvgException;
var CvgBlobSvc = require('syracuse-x3/lib/convergence/client/CvgBlobSvc').CvgBlobSvc;
var fs = require('fs');

var CvgPluginBlobSvc = helpers.defineClass(function(client) {
	CvgBlobSvc.call(this);
	this.plugin = client;
}, CvgBlobSvc, {

	doPut: function(_, context, tracker) {
		// create ACK_RESI
		var blob = new Buffer(context.request.readAll(_), 'binary');
		this.plugin.processRequest(_, context, {}, tracker);
	}
	doPost: function(_, context, tracker) {
		this.doPut(_, context, tracker);
	}

});

exports.create = function(client) {
	return {
		blobSvc: new CvgPluginBlobSvc(client)
	};
};