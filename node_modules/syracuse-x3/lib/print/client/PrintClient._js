"use strict";
var helpers = require('syracuse-core/lib/helpers');
var PrintComm = require('syracuse-x3/lib/print/client/PrintComm').printComm;
var streams = require('streamline/lib/streams/streams');


var PrintClient = exports.PrintClient = helpers.defineClass(function(_, hostname, port) {
	this.hostname = hostname;
	this.port = port;

	this._connect(_);
}, null, {

	getAllPrinters: function() {
	
	},
	
	getAdvancedParameters: function(printerId) {
		
	},
	
	getExtraParameters: function(printerId) {
		
	},
	
	launchPrint: function(jobId, params) {
		
	},
	
	cancelPrint: function() {
		
	},
	
	getState: function() {
		
	},
	
	getReport: function() {
		
	},
	
	
	// TODO : Manage connection errors
	_connect: function(_){
		try{
			this.stream = streams.tcpClient(this.port, this.hostname).connect(_);
			this.communicator = new PrintComm(_, this.stream);
			this.communicator.connect(_);
		}catch(e) {
			this.disconnect(_);
		}
	},
	
	_disconnect: function(_){
		this.stream.end();
		this.stream = null;
	},
	
	_Request: function(_){
		
	},

	
});
