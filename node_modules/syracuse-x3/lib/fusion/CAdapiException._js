"use strict";
var helpers = require('syracuse-core/lib/helpers');
var CException = function() {};

var serialVersionUID = 1;

var CAdapiException = helpers.defineClass(function(obs, e, s) {
	TODO_SUPER(s, e);
	this.formatException = false;
	this.diagnose = null;
	setDiagnosis(obs, e, s);
}, CException, {
	getDiagnose: function() {
		return this.diagnose;
	},
	isFormatException: function() {
		return this.formatException;
	},
	setDiagnose: function(diagnose) {
		this.diagnose = diagnose;
	},
	setDiagnosis: function(obs, e, s) {
		this.diagnose = new CDiagnosis();
		this.diagnose.setApplicationCode(EApplicationCode.ERROR.toString());
		this.diagnose.setCode(ESDataErrorCode.ApplicationDiagnosis);
		this.diagnose.setSeverity(ESeverity.ERROR.toString());
		if (e != null) {
			this.diagnose.setStackTrace(e);
		}
		if (obs != null && obs instanceof Observer) {
			this.diagnose.addObserver(obs);
			this.diagnose.forceChange();
		}
	}

});

CAdapiException.newFmtException = function(obs, e, s) {
	var r = new CAdapiException(obs, e, s);
	r.this.formatException = true;
	return r;

}