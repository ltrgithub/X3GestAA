"use strict";
var helpers = require('syracuse-core/lib/helpers');
var CAdapiVariableBlob = require('syracuse-x3/lib/fusion/CAdapiVariableBlob').CAdapiVariableBlob;


var EXT_GIF = "gif";
var MIME_TYPE_GIF = "image/gif";
var EXT_IEF = "ief";
var MIME_TYPE_IEF = "image/ief";
var EXT_JPEG = "jpeg";
var EXT_JPG = "jpg";
var EXT_JPE = "jpe";
var MIME_TYPE_JPEG = "image/jpeg";
var EXT_PNG = "png";
var MIME_TYPE_PNG = "image/png";
var EXT_TIFF = "tiff";
var EXT_TIF = "tif";
var MIME_TYPE_TIFF = "image/tiff";

/*
 * image png "2 pixels x 2 pixel transparent"
 */
var IMG_NO_IMAGE = [ //
0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A, //
0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52, //
0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x02, //
0x01, 0x03, 0x00, 0x00, 0x00, 0x48, 0x78, 0x9F, //
0x67, 0x00, 0x00, 0x00, 0x06, 0x50, 0x4C, 0x54, //
0x45, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xA5, //
0xD9, 0x9F, 0xDD, 0x00, 0x00, 0x00, 0x02, 0x74, //
0x52, 0x4E, 0x53, 0xFF, 0x00, 0xE5, 0xB7, 0x30, //
0x4A, 0x00, 0x00, 0x00, 0x0C, 0x49, 0x44, 0x41, //
0x54, 0x78, 0xDA, 0x63, 0x38, 0xC0, 0x70, 0x00, //
0x00, 0x03, 0x04, 0x01, 0x81, 0x2A, 0xE5, 0x6E, //
0x5A, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4E, //
0x44, 0xAE, 0x42, 0x60, 0x82];


var CAdapiVariableIMG = exports.CAdapiVariableIMG = helpers.defineClass(function(srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aSize, aFormat, aEntityState) {
	CAdapiVariable.call(this, srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aSize, aFormat, aEntityState, srcLine.adapiClient.adapiClientConfig.getUrlServerBlob());
}, CAdapiVariableBlob, {
	clone: function() {
		var wVariable = new CAdapiVariableIMG(this.srcLine, this.entityIndexBaseOne, this.name, this.id, this.dataType, this.size, this.format, this.state);
		wVariable.setMustBeFormated(mustBeFormated());
		if (this.indirection != null) {
			wVariable.setIndirection(this.indirection.clone());
		}
		cloneValues(wVariable);
		return wVariable;
	}
})