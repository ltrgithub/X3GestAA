"use strict";
var helpers = require('syracuse-core/lib/helpers');
var AdapiObservable = function() {};

var AdapiClose = helpers.defineClass(function(aClient, reason, message, appCode, stack) {
	AdapiObservable.call(this, aClient);
	this.closeReason = reason;
	this.closeMessage = message;
	this.closeAppCode = appCode;
	var stackStr = new StringWriter();
	if (stack != null) {
		stack.printStackTrace(new PrintWriter(stackStr));
		this.closeStack = stackStr.toString();
	}
	// En dernier
	setJsonType('SESSION');
}, AdapiObservable, {
	toJson: function() {
		return {
			reason: this.closeReason,
			message: this.closeMessage,
			stack: this.closeStack,
			appCode: this.closeAppCode,
		};
	},
	toJsonObj: function() {
		return toJson();
	}
});