"use strict"; var helpers = require('syracuse-core/lib/helpers');

var CAdapiVariableIMG = helpers.defineClass(function() {}, CAdapiVariableBlob, {

	public final static String EXT_GIF = "gif";
	public final static String MIME_TYPE_GIF = "image/gif";
	public final static String EXT_IEF = "ief";
	public final static String MIME_TYPE_IEF = "image/ief";
	public final static String EXT_JPEG = "jpeg";
	public final static String EXT_JPG = "jpg";
	public final static String EXT_JPE = "jpe";
	public final static String MIME_TYPE_JPEG = "image/jpeg";
	public final static String EXT_PNG = "png";
	public final static String MIME_TYPE_PNG = "image/png";
	public final static String EXT_TIFF = "tiff";
	public final static String EXT_TIF = "tif";
	public final static String MIME_TYPE_TIFF = "image/tiff";

	/*
	 * image png "2 pixels x 2 pixel transparent"
	 */
	private static byte[] IMG_NO_IMAGE = { (byte) 0x89, (byte) 0x50, (byte) 0x4E, (byte) 0x47, (byte) 0x0D, (byte) 0x0A, (byte) 0x1A, (byte) 0x0A, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x0D, (byte) 0x49, (byte) 0x48, (byte) 0x44, (byte) 0x52, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x02, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x02, (byte) 0x01, (byte) 0x03, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x48, (byte) 0x78, (byte) 0x9F, (byte) 0x67, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x06, (byte) 0x50, (byte) 0x4C, (byte) 0x54, (byte) 0x45, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0xFF, (byte) 0xFF, (byte) 0xFF, (byte) 0xA5, (byte) 0xD9, (byte) 0x9F, (byte) 0xDD, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x02, (byte) 0x74, (byte) 0x52, (byte) 0x4E, (byte) 0x53, (byte) 0xFF, (byte) 0x00, (byte) 0xE5, (byte) 0xB7, (byte) 0x30, (byte) 0x4A, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x0C, (byte) 0x49, (byte) 0x44, (byte) 0x41, (byte) 0x54,
		(byte) 0x78, (byte) 0xDA, (byte) 0x63, (byte) 0x38, (byte) 0xC0, (byte) 0x70, (byte) 0x00, (byte) 0x00, (byte) 0x03, (byte) 0x04, (byte) 0x01, (byte) 0x81, (byte) 0x2A, (byte) 0xE5, (byte) 0x6E, (byte) 0x5A, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x49, (byte) 0x45, (byte) 0x4E, (byte) 0x44, (byte) 0xAE, (byte) 0x42, (byte) 0x60, (byte) 0x82 };

	public CAdapiVariableIMG(srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aSize, aFormat, aEntityState) {
		TODO_SUPER(srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aSize, aFormat, aEntityState, srcLine.getAdapiClient().getAdapiClientConfig().getUrlServerBlob());

	}, clone: function() {
		var wVariable = new CAdapiVariableIMG(getSrcLine(), getEntityIndexBaseOne(), getName(), getId(), getDataType(), getSize(), getFormat(), getState());
		wVariable.setMustBeFormated(mustBeFormated());
		if (getIndirection() != null) {
			wVariable.setIndirection((CStructResu) getIndirection().clone());
		}
		cloneValues(wVariable);
		return wVariable;
	}, getBlob: function() {
		if (hasValueBlob()) {
			return new CAdapiBlob(getServerValResu(), null);
		} else {
			return new CAdapiBlob(IMG_NO_IMAGE, MIME_TYPE_PNG);
		}
	}
}
