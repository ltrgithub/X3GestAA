"use strict";
var helpers = require('syracuse-core/lib/helpers');
var EventEmitter = require('events').EventEmitter;

var AdapiObservable = helpers.defineClass(function(adapiClient) {
	this.typeJson = null;
	this.notified = false;
	if (adapiClient != null) {
		addObserver(adapiClient);
	}
}, EventEmitter, {
	compareTo: function(o) {
		return getAdapiObservableId().compareTo(o.getAdapiObservableId());
	},
	dispose: function() {
		deleteObservers();
	},
	forceChange: function() {
		if (false && this.notified) {
			return;
		}
		if (getTypeJsonNode() != null) { // send only when jsonNode Type is
			// defined
			setChanged();
			notifyObservers();
		}
		this.notified = true;
	},
	getAdapiObservableId: function() {
		return getClass().getName() + hashCode();
	},
	getTypeJsonNode: function() {
		return this.typeJson;
	},
	razModification: function() {
		this.notified = false;
	},
	setTypeJsonNode: function(aType) { // change jsontype and
		// force change
		this.typeJson = aType;
		forceChange();
	}
	//toJson: function();
});