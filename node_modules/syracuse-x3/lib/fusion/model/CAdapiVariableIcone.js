"use strict";
var helpers = require('syracuse-core/lib/helpers');
var CAdapiVariable = require('syracuse-x3/lib/fusion/model/CAdapiVariable').CAdapiVariable;
var CStructResu = require('syracuse-x3/lib/fusion/types/CStructResu').CStructResu;

var NO_ICON = -1;

var CAdapiVariableIcone = exports.CAdapiVariableIcone = helpers.defineClass(function(srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aFormat, aEntityState) {
	CAdapiVariable.call(this, srcLine, aEntityIndexBaseOne, aVarName, aID, aTdo, aFormat, aEntityState);
}, CAdapiVariable, {
	// Pas de format
	acceptEditFormat: function() {
		return false;
	},
	clone: function() {
		var wVariable = new CAdapiVariableIcone(this.srcLine, this.entityIndexBaseOne, this.name, this.id, this.dataType, this.format, this.state);
		wVariable.mustBeFormatted = this.mustBeFormatted;
		this.cloneValues(wVariable);
		wVariable.setServerValue(new CStructResu(CStructResu.TAG_INT, NO_ICON));
		wVariable.forceServerValueModification(false);
		return wVariable;
	},
	formatX3ToDisplay: function(aData) {
		return aData.value.toString();
	},
	setServerValue: function(aResu) {
		if (aResu.isNull()) {
			aResu.setIntValue(NO_ICON);
		}
		CAdapiVariable.prototype.setServerValue.call(this,aResu);
	}
});