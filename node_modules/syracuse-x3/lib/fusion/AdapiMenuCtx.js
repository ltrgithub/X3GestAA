"use strict";
var helpers = require('syracuse-core/lib/helpers');
var AdapiObservable = require('syracuse-x3/lib/fusion/AdapiObservable').AdapiObservable;

var AdapiMenuCtx = exports.AdapiMenuCtx = helpers.defineClass(function(client, id, enabled, label) {
	AdapiObservable.call(this, client);
	this.id = id;
	this.enabled = enabled;
	this.label = label;
	// En dernier
	this.setJsonType('TARGETACT');
}, AdapiObservable, {

	// Vidage des contextButtons sur noaid NDOMNCO
	clear: function() {
		this.cleared = true;
	},
	getAdapiObservableId: function() {
		return this.id.toString();
	},
	toJson: function() {
		if (this.cleared) {
			return null;
		}
		
		var object = [this.id.toString(),this.enabled];
		if (this.label) {
			object.push(this.label);
		}
		return object;
	},
	toString: function() {
		return JSON.stringify(this.toJson());
	}
});