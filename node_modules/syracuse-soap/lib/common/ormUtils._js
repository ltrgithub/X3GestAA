"use strict";

var util = require("util");
var soapTracer = require('./soapTracer');
var tracer = soapTracer.create();

exports.isChild = function(title, context){
	if (context.entity.$relations[title]){
		 return context.entity.$relations[title].isChild;
	}else{
		throw new Error(title + " element is not a relation");
	}
	return false;
}

exports.getRelationType = function(title, context){

	var relType;
	if (context.entity.$relations[title]){
//		tracer.trace("? Search relation type found for element: "+ title);
//		tracer.trace("Relation: "+util.inspect(context.entity.$relations[title]));
		if (context.entity.$relations[title].isPlural){
			relType = context.model.singularize(context.entity.$relations[title].type);
		}else{
			relType = context.entity.$relations[title].type;
		}
		return relType;
	}
	return;
}