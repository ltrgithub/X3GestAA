"use strict";
var check = require("syracuse-license/lib/check");

exports.step = function(_, length, poolMetadata) {
	//isCountLimitReached(_, poolMetadata);
	return true;
};

function isCountLimitReached(_, poolMetadata) {
	if (poolMetadata && poolMetadata.product) {
		var checkRes = check.getLicenseParameters(_, poolMetadata.product.code);
		if (!checkRes) throw new Error("An error occured while retrieving license information.");
		var maxCount = checkRes.MAXWEBSERVICES;
		console.error("Web service maximum call number : " + maxCount);
		// TODO : Count mechanism
		// INFO : poolMetadata contains these information today, but we can make evolutions :
		/*Metadata: {
			  "x3ServerHost": "aws-x3-indv7",
			  "x3ServerPort": 17100,
			  "x3Solution": "X3V7",
			  "x3Folder": "X3TESTV7",
			  "locale": "en-US",
			  "userName": "admin",
			  "product": {
			    "code": "1",
			    "version": "7"
			  }
		}*/
	}
}