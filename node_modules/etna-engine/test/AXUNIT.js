if (typeof(requireScript)==='undefined'){var requireScript=function(cb,name){require(name);cb();}};var z = require('etna-engine/lib/runtime').instructions,r=requireScript,e=exports,p=[],B=z.B,NL=z.NL,A=z.A,REQ=z.REQ,GOSUB=z.GOSUB,END=z.END,PROG=z.PROG,DECL=z.DECL,CALL=z.CALL,C=z.C,GO=z.GO,IF=z.IF,LT=z.LT,DIM=z.DIM,V=z.V,SET=z.SET,F=z.F,ADD=z.ADD,EQ=z.EQ,WHILE=z.WHILE,PLUSEQ=z.PLUSEQ,SUB=z.SUB,RAZ=z.RAZ,RANGE=z.RANGE,GT=z.GT,AND=z.AND,INDEX=z.INDEX,NE=z.NE,OR=z.OR,LE=z.LE,NOT=z.NOT,ONERRGO=z.ONERRGO,CASE=z.CASE,TYPEV=z.TYPEV,WHEN=z.WHEN,RESUME=z.RESUME,RET=z.RET,USUB=z.USUB,CLALEV=z.CLALEV,CV=z.CV,CLOSEFILE=z.CLOSEFILE,FILESYS=z.FILESYS,NIY=z.NIY,FORF=z.FORF,KEY=z.KEY,WHERE=z.WHERE,EVALUE=z.EVALUE,BREAK=z.BREAK,CLOSE=z.CLOSE,OPEN=z.OPEN,IOMODE=z.IOMODE,WRSEQ=z.WRSEQ,GOTO=z.GOTO,FORV=z.FORV,BOX=z.BOX;z.BEGIN(module);NL(0);/*z.MAIN(e);*/e.MAIN=B(GOSUB(C(e),'TEST_')
,NL(1),END()); 



























PROG(e,'TESTSUITE_START',['SUITE_ID','SUITE_DESCRIPTION'],B(
NL(29),DECL('BS','SUITE_ID','',A([C(null)]))
,NL(1),DECL('BS','SUITE_DESCRIPTION','',A([C(null)]))

,NL(2),CALL(C(e),C('INIT_UNIT'),[])
,NL(1),IF(LT(DIM(V('GXUNIT_ID')),C(0)),p,1,B(DECL('VS','GXUNIT_ID','',A([C(255)])),GO(p,1)))));p[1]=B(
NL(1),SET(V('GXUNIT_ID'),V('SUITE_ID'))
,NL(1),IF(LT(DIM(V('GXUNIT_SUITE_DESCRIPTION')),C(0)),p,2,B(DECL('VS','GXUNIT_SUITE_DESCRIPTION','',A([C(255)])),GO(p,2))));p[2]=B(
NL(1),SET(V('GXUNIT_SUITE_DESCRIPTION'),V('SUITE_DESCRIPTION'))
,NL(1),IF(LT(DIM(V('GXUNIT_CASE_ID')),C(0)),p,3,B(DECL('VI','GXUNIT_CASE_ID',''),GO(p,3))));p[3]=B(
NL(1),SET(V('GXUNIT_CASE_ID'),C(0))
,NL(1),IF(LT(DIM(V('GXUNIT_CASE_SUCCESS')),C(0)),p,4,B(DECL('VI','GXUNIT_CASE_SUCCESS',''),GO(p,4))));p[4]=B(
NL(1),SET(V('GXUNIT_CASE_SUCCESS'),C(0))
,NL(1),IF(LT(DIM(V('GXUNIT_CASE_FAILURE')),C(0)),p,5,B(DECL('VI','GXUNIT_CASE_FAILURE',''),GO(p,5))));p[5]=B(
NL(1),SET(V('GXUNIT_CASE_FAILURE'),C(0))

,NL(2),IF(LT(DIM(V('GXUNIT_LOG_NAME')),C(0)),p,6,B(DECL('VS','GXUNIT_LOG_NAME','',A([C(255)])),GO(p,6))));p[6]=B(
NL(1),SET(V('GXUNIT_LOG_NAME'),C(''))

,NL(2),SET(V('GXUNIT_TSTAMP'),F('TIMESTAMP$'))
,NL(1),CALL(C(e),C('LOG_CLEAR'),[])
,NL(1),CALL(C(e),C('LOG_LINE'),[ADD(ADD(ADD(ADD(ADD(C('Start suite - '),V('GXUNIT_MODULE_NAME')),C(' - ')),V('GXUNIT_ID')),C(' - ')),V('GXUNIT_SUITE_DESCRIPTION'))])
,NL(1),END()); 

PROG(e,'INIT_UNIT',[],B(
NL(3),IF(LT(DIM(V('GXUNIT_TSTAMP')),C(0)),p,7,B(DECL('VS','GXUNIT_TSTAMP','',A([C(20)])),GO(p,7)))));p[7]=B(
NL(1),IF(EQ(V('GXUNIT_TSTAMP'),C('')),p,8,B(
NL(1),SET(V('GXUNIT_TSTAMP'),F('TIMESTAMP$'))
,GO(p,8))));p[8]=B(
NL(2),IF(LT(DIM(V('GXUNIT_MODULE_NAME')),C(0)),p,9,B(DECL('VS','GXUNIT_MODULE_NAME','',A([C(255)])),GO(p,9))));p[9]=B(
NL(1),IF(EQ(V('GXUNIT_MODULE_NAME'),C('')),p,10,B(
NL(1),DECL('LI','NIVEAU','')
,NL(1),WHILE(EQ(F('ADXPNO',[V('NIVEAU')]),F('ADXPNO',[C(0)])),p,11,B(
NL(1),PLUSEQ(V('NIVEAU'),C(1))
)),GO(p,10))));p[11]=B(
NL(2),DECL('LI','POS1','')
,NL(1),DECL('LI','POS2','')
,NL(1),SET(V('POS1'),F('INSTR',[C(1),F('ADXPNO',[V('NIVEAU')]),C('/')]))
,NL(1),SET(V('POS2'),F('INSTR',[ADD(V('POS1'),C(1)),F('ADXPNO',[V('NIVEAU')]),C('$')]))
,NL(1),SET(V('GXUNIT_MODULE_NAME'),F('MID$',[F('ADXPNO',[V('NIVEAU')]),ADD(V('POS1'),C(1)),SUB(SUB(V('POS2'),V('POS1')),C(1))]))
);p[10]=B(

NL(3),IF(LT(DIM(V('GXUNIT_SUITE_RESULT')),C(0)),p,12,B(DECL('VT','GXUNIT_SUITE_RESULT','',A([C(2)])),GO(p,12))));p[12]=B(
NL(1),RAZ([V('GXUNIT_SUITE_RESULT')])
,NL(1),IF(LT(DIM(V('GXUNIT_JSON')),C(0)),p,13,B(DECL('VT','GXUNIT_JSON','',A([C(8)])),GO(p,13))));p[13]=B(
NL(1),RAZ([V('GXUNIT_JSON')])

,NL(2),IF(LT(DIM(V('GXUNIT_CASES')),C(0)),p,14,B(DECL('VS','GXUNIT_CASES','',A([C(100)]),A([RANGE(C(1)),C(2)])),GO(p,14))));p[14]=B(
NL(1),IF(LT(DIM(V('GXUNIT_CASE_COUNT')),C(0)),p,15,B(DECL('VI','GXUNIT_CASE_COUNT',''),GO(p,15))));p[15]=B(
NL(1),IF(LT(DIM(V('GXUNIT_CURRENT_CASE')),C(0)),p,16,B(DECL('VI','GXUNIT_CURRENT_CASE',''),GO(p,16))));p[16]=B(
NL(1),IF(LT(DIM(V('GXUNIT_CASE_ASSERT_COUNT')),C(0)),p,17,B(DECL('VI','GXUNIT_CASE_ASSERT_COUNT','',A([RANGE(C(1)),C(2)])),GO(p,17))));p[17]=B(
NL(1),END()); 




PROG(e,'TESTSUITE_END',[],B(



NL(9),IF(GT(DIM(V('GXUNIT_SUITE_ERROR')),C(0)),p,18,B(
NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),V('GXUNIT_SUITE_ERROR'))
,NL(1),RAZ([V('GXUNIT_SUITE_ERROR')])
,GO(p,18)))));p[18]=B(

NL(3),PLUSEQ(V('GXUNIT_SUITE_RESULT'),ADD(ADD(ADD(V('GXUNIT_MODULE_NAME'),C(' - ')),V('GXUNIT_ID')),C(' - ')))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),F('NUM$',[V('GXUNIT_CASE_SUCCESS')]))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),C(' Succeed, '))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),F('NUM$',[V('GXUNIT_CASE_FAILURE')]))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),C(' Failed, '))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),F('NUM$',[SUB(F('VAL',[F('TIMESTAMP$')]),F('VAL',[V('GXUNIT_TSTAMP')]))]))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),C('ms elapsed'))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),C("Result has been written to '"))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),CALL(C(e),C('LOG_NAME'),[]))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),C("'"))

,NL(2),CALL(C(e),C('LOG_APPEND'),[F('CHR$',[C(10)])])
,NL(1),CALL(C(e),C('LOG_LINE'),[V('GXUNIT_SUITE_RESULT')])

,NL(2),CALL(C(e),C('RESET_UNIT'),[])
,NL(1),END()); 






PROG(e,'TESTCASE_START',['DESCRIPTION'],B(
NL(8),DECL('BS','DESCRIPTION','',A([C(null)]))

,NL(2),IF(LT(DIM(V('GXUNIT_CASESTAMP')),C(0)),p,19,B(DECL('VS','GXUNIT_CASESTAMP','',A([C(20)])),GO(p,19)))));p[19]=B(
NL(1),SET(V('GXUNIT_CASESTAMP'),F('TIMESTAMP$'))
,NL(1),IF(LT(DIM(V('GXUNIT_DESCRIPTION')),C(0)),p,20,B(DECL('VS','GXUNIT_DESCRIPTION','',A([C(255)])),GO(p,20))));p[20]=B(
NL(1),SET(V('GXUNIT_DESCRIPTION'),V('DESCRIPTION'))
,NL(1),IF(LT(DIM(V('GXUNIT_TESTID')),C(0)),p,21,B(DECL('VI','GXUNIT_TESTID',''),GO(p,21))));p[21]=B(
NL(1),SET(V('GXUNIT_TESTID'),C(0))

,NL(2),CALL(C(e),C('CREATE_RESULT_CONTEXT'),[])
,NL(1),SET(V('GXUNIT_SUCCESS'),C(0))
,NL(1),SET(V('GXUNIT_FAILURE'),C(0))
,NL(1),RAZ([V('GXUNIT_RESULT')])

,NL(2),IF(LT(DIM(V('GXUNIT_ERROR')),C(0)),p,22,B(DECL('VI','GXUNIT_ERROR',''),GO(p,22))));p[22]=B(
NL(1),SET(V('GXUNIT_ERROR'),C(0))

,NL(2),PLUSEQ(V('GXUNIT_CASE_ID'),C(1))
,NL(1),CALL(C(e),C('LOG_APPEND'),[F('CHR$',[C(10)])])
,NL(1),CALL(C(e),C('LOG_LINE'),[ADD(C('Start test case - '),V('GXUNIT_DESCRIPTION'))])
,NL(1),END()); 




PROG(e,'TESTCASE_END',[],B(
NL(6),PLUSEQ(V('GXUNIT_RESULT'),C('success='))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[V('GXUNIT_SUCCESS')]))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C(', failure='))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[V('GXUNIT_FAILURE')]))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C(', elapsed='))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[SUB(F('VAL',[F('TIMESTAMP$')]),F('VAL',[V('GXUNIT_CASESTAMP')]))]))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C('ms'))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,NL(1),IF(GT(V('GXUNIT_FAILURE'),C(0)),p,23,B(
NL(1),PLUSEQ(V('GXUNIT_CASE_FAILURE'),C(1))
,GO(p,24)))));p[23]=B(
NL(2),PLUSEQ(V('GXUNIT_CASE_SUCCESS'),C(1))
,GO(p,24));p[24]=B(
NL(2),IF(AND(GT(INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(0)]),C(0)),NE(INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(0)]),INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(1)]))),p,25,B(

NL(2),PLUSEQ(V('GXUNIT_RESULT'),C('Mismatch number of assertions: expected '))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(0)])]))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C(' got '))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(1)])]))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,GO(p,25))));p[25]=B(
NL(2),CALL(C(e),C('LOG_APPEND'),[V('GXUNIT_RESULT')])


























,NL(27),END()); 




PROG(e,'SUITE_RESULT',[],B(
NL(6),END(V('GXUNIT_SUITE_RESULT')))); 




PROG(e,'CHECK_RESULT',[],B(
NL(6),END(V('GXUNIT_RESULT')))); 





PROG(e,'VERIFY_CHECK',[],B(
NL(7),IF(OR(LT(DIM(V('GXUNIT_CURRENT_CASE')),C(0)),OR(LE(V('GXUNIT_CURRENT_CASE'),C(0)),AND(GT(DIM(V('GXUNIT_SUITE_RESULT')),C(0)),GT(F('LEN',[V('GXUNIT_SUITE_RESULT')]),C(0))))),p,26,B(
NL(1),IF(LT(DIM(V('GXUNIT_SUITE_ERROR')),C(0)),p,27,B(DECL('VT','GXUNIT_SUITE_ERROR','',A([C(3)])),GO(p,27))),GO(p,26)))));p[27]=B(
NL(1),PLUSEQ(V('GXUNIT_SUITE_ERROR'),C('Warning: No current test case, the check has been skipped'))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_ERROR'),F('CHR$',[C(10)]))
,NL(1),DECL('LI','STAT','')
,NL(1),IF(LT(DIM(V('GSTACK')),C(0)),p,28,B(DECL('VT','GSTACK','',A([C(7)])),GO(p,28))));p[28]=B(
NL(1),SET(V('STAT'),F('DBGCALLSTACK',[C(0),V('GSTACK')]))
,NL(1),CALL(C(e),C('APPEND_STACK'),[V('GXUNIT_SUITE_ERROR'),V('GSTACK')])
,NL(1),PLUSEQ(V('GXUNIT_SUITE_ERROR'),F('CHR$',[C(10)]))
,NL(1),END(C(0))); 
p[26]=B(
NL(2),END(C(1))); 





PROG(e,'CREATE_RESULT_CONTEXT',[],B(
NL(7),IF(LT(DIM(V('GXUNIT_RESULT')),C(0)),p,29,B(DECL('VT','GXUNIT_RESULT','',A([C(10)])),GO(p,29)))));p[29]=B(
NL(1),IF(LT(DIM(V('GXUNIT_SUCCESS')),C(0)),p,30,B(DECL('VI','GXUNIT_SUCCESS',''),GO(p,30))));p[30]=B(
NL(1),IF(LT(DIM(V('GXUNIT_FAILURE')),C(0)),p,31,B(DECL('VI','GXUNIT_FAILURE',''),GO(p,31))));p[31]=B(
NL(1),END()); 







PROG(e,'CHECK_EQUAL',['GOT','EXPECT'],B(
NL(9),DECL('LI','FAILED',''),SET(V('FAILED'),C(0))

,NL(2),IF(NOT(CALL(C(e),C('VERIFY_CHECK'),[])),p,32,B(END(),GO(p,32))))); p[32]=B(

NL(2),ONERRGO(C(e),'CHECK_ERR')

,NL(2),PLUSEQ(INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(1)]),C(1))
,NL(1),PLUSEQ(V('GXUNIT_TESTID'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),ADD(ADD(F('NUM$',[V('GXUNIT_CASE_ID')]),C('.')),F('NUM$',[V('GXUNIT_TESTID')])))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C(' - CHECK_EQUAL - '))
,NL(1),IF(EQ(V('GOT'),V('EXPECT')),p,33,B(
NL(1),PLUSEQ(V('GXUNIT_SUCCESS'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C('OK: '))
,GO(p,34))));p[33]=B(
NL(2),SET(V('FAILED'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C('FAILED: expected '))
,NL(1),CASE(F('TYPE',[TYPEV('GOT')]),p,35,36)
,GO(p,34));p[35]=WHEN([C(1),C(2),C(4),C(5),C(6),C(7),C(9),C(525)],p,37,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[V('EXPECT')]))
,GO(p,36)));p[37]=WHEN([C(3)],p,38,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),V('EXPECT'))
,GO(p,36)));p[38]=WHEN([],p,36,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),C("'"))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),V('EXPECT'))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C("'"))
,GO(p,36)));p[36]=B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),C(', got '))
);p[34]=B(
NL(2),CASE(F('TYPE',[TYPEV('GOT')]),p,39,40)
);p[39]=WHEN([C(1),C(2),C(4),C(5),C(6),C(7),C(9),C(525)],p,41,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[V('GOT')]))
,GO(p,40)));p[41]=WHEN([C(3)],p,42,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),V('GOT'))
,GO(p,40)));p[42]=WHEN([],p,40,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),C("'"))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),V('GOT'))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C("'"))
,GO(p,40)));p[40]=B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,NL(1),IF(V('FAILED'),p,43,B(
NL(1),GOSUB(C(e),'CHECK_FAILED')
,GO(p,43))));p[43]=B(
NL(2),END()); 







PROG(e,'CHECK_NOTEQUAL',['GOT','EXPECT'],B(
NL(9),DECL('LI','FAILED',''),SET(V('FAILED'),C(0))

,NL(2),IF(NOT(CALL(C(e),C('VERIFY_CHECK'),[])),p,44,B(END(),GO(p,44))))); p[44]=B(

NL(2),ONERRGO(C(e),'CHECK_ERR')

,NL(2),PLUSEQ(INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(1)]),C(1))
,NL(1),PLUSEQ(V('GXUNIT_TESTID'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),ADD(ADD(F('NUM$',[V('GXUNIT_CASE_ID')]),C('.')),F('NUM$',[V('GXUNIT_TESTID')])))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C(' - CHECK_NOTEQUAL - '))
,NL(1),IF(OR(NE(F('TYPE',[TYPEV('GOT')]),F('TYPE',[TYPEV('EXPECT')])),NE(V('GOT'),V('EXPECT'))),p,45,B(
NL(1),PLUSEQ(V('GXUNIT_SUCCESS'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C('OK: '))
,GO(p,46))));p[45]=B(
NL(2),SET(V('FAILED'),C(1))













,GO(p,46));p[46]=B(
NL(15),CASE(F('TYPE',[TYPEV('GOT')]),p,47,48)
);p[47]=WHEN([C(1),C(2),C(4),C(5),C(6),C(7),C(9),C(525)],p,49,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[V('GOT')]))
,GO(p,48)));p[49]=WHEN([C(3)],p,50,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),V('GOT'))
,GO(p,48)));p[50]=WHEN([],p,48,B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),C("'"))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),V('GOT'))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C("'"))
,GO(p,48)));p[48]=B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,NL(1),IF(V('FAILED'),p,51,B(
NL(1),GOSUB(C(e),'CHECK_FAILED')
,GO(p,51))));p[51]=B(
NL(2),END()); 






PROG(e,'CHECK_TRUE',['GOT'],B(
NL(8),IF(NOT(CALL(C(e),C('VERIFY_CHECK'),[])),p,52,B(END(),GO(p,52))))); p[52]=B(

NL(2),ONERRGO(C(e),'CHECK_ERR')

,NL(2),PLUSEQ(INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(1)]),C(1))
,NL(1),PLUSEQ(V('GXUNIT_TESTID'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),ADD(ADD(F('NUM$',[V('GXUNIT_CASE_ID')]),C('.')),F('NUM$',[V('GXUNIT_TESTID')])))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C(' - CHECK_TRUE - '))

,NL(2),IF(V('GOT'),p,53,B(
NL(1),PLUSEQ(V('GXUNIT_SUCCESS'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C('OK'))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,GO(p,54))));p[53]=B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),C('Failed'))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,NL(1),GOSUB(C(e),'CHECK_FAILED')
,GO(p,54));p[54]=B(
NL(2),END()); 






PROG(e,'CHECK_FALSE',['GOT'],B(
NL(8),IF(NOT(CALL(C(e),C('VERIFY_CHECK'),[])),p,55,B(END(),GO(p,55))))); p[55]=B(

NL(2),ONERRGO(C(e),'CHECK_ERR')

,NL(2),PLUSEQ(INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CURRENT_CASE'),C(1)]),C(1))
,NL(1),PLUSEQ(V('GXUNIT_TESTID'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),ADD(ADD(F('NUM$',[V('GXUNIT_CASE_ID')]),C('.')),F('NUM$',[V('GXUNIT_TESTID')])))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C(' - CHECK_FALSE - '))

,NL(2),IF(NOT(V('GOT')),p,56,B(
NL(1),PLUSEQ(V('GXUNIT_SUCCESS'),C(1))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C('OK'))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,GO(p,57))));p[56]=B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),C('Failed'))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,NL(1),GOSUB(C(e),'CHECK_FAILED')
,GO(p,57));p[57]=B(
NL(2),END()); 

e.CHECK_ERR=B(
NL(3),PLUSEQ(V('GXUNIT_RESULT'),C('Error'))
,NL(1),IF(F('ERRN'),p,58,B(
NL(1),PLUSEQ(V('GXUNIT_RESULT'),C(': ['))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('NUM$',[F('ERRN')]))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),C('] '))
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('ERRMES$',[F('ERRN')]))
,GO(p,58))));p[58]=B(
NL(2),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,NL(1),SET(V('GXUNIT_ERROR'),F('ERRN'))
,NL(1),GOSUB(C(e),'CHECK_FAILED')
,NL(1),RESUME()); 

e.CHECK_FAILED=B(
NL(3),DECL('LI','STAT','')
,NL(1),IF(LT(DIM(V('GSTACK')),C(0)),p,59,B(DECL('VT','GSTACK','',A([C(7)])),GO(p,59))));p[59]=B(
NL(1),PLUSEQ(V('GXUNIT_FAILURE'),C(1))
,NL(1),SET(V('STAT'),F('DBGCALLSTACK',[C(0),V('GSTACK')]))
,NL(1),CALL(C(e),C('APPEND_STACK'),[V('GXUNIT_RESULT'),V('GSTACK')])
,NL(1),PLUSEQ(V('GXUNIT_RESULT'),F('CHR$',[C(10)]))
,NL(1),RET()); 







PROG(e,'APPEND_STACK',['CLB','STACK'],B(
NL(9),DECL('AT','CLB','',A([C(null)]))
,NL(1),DECL('AT','STACK','',A([C(null)]))

,NL(2),DECL('LI','TOK_START','')
,NL(1),DECL('LI','TOK_END','')
,NL(1),DECL('LS','FNAME','',A([C(255)]))
,NL(1),DECL('LS','LINE','',A([C(255)]))
,NL(1),DECL('LS','PROG','',A([C(255)]))

,NL(2),SET(V('TOK_START'),C(1))
,NL(1),WHILE(EQ(V('TOK_START'),C(0)),p,60,B(
NL(1),SET(V('TOK_START'),F('INSTR',[V('TOK_START'),V('STACK'),C('<stack ')]))
,NL(1),IF(NE(V('TOK_START'),C(0)),p,61,B(
NL(1),PLUSEQ(V('TOK_START'),C(7))
,NL(1),SET(V('TOK_START'),F('INSTR',[V('TOK_START'),V('STACK'),C('filename="')]))
,NL(1),PLUSEQ(V('TOK_START'),C(10))
,NL(1),IF(GT(F('INSTR',[V('TOK_START'),V('STACK'),C('x3://')]),C(0)),p,62,B(
NL(1),PLUSEQ(V('TOK_START'),C(5))
,GO(p,62))),GO(p,61)))),true)));p[62]=B(
NL(2),SET(V('TOK_END'),F('INSTR',[V('TOK_START'),V('STACK'),C('" ')]))
,NL(1),SET(V('FNAME'),F('MID$',[V('STACK'),V('TOK_START'),SUB(V('TOK_END'),V('TOK_START'))]))
,NL(1),SET(V('TOK_START'),ADD(V('TOK_END'),C(2)))
,NL(1),SET(V('TOK_START'),F('INSTR',[V('TOK_START'),V('STACK'),C('lineno="')]))
,NL(1),PLUSEQ(V('TOK_START'),C(8))
,NL(1),SET(V('TOK_END'),F('INSTR',[V('TOK_START'),V('STACK'),C('" ')]))
,NL(1),SET(V('LINE'),F('NUM$',[ADD(F('VAL',[F('MID$',[V('STACK'),V('TOK_START'),SUB(V('TOK_END'),V('TOK_START'))])]),C(1))]))
,NL(1),SET(V('TOK_START'),ADD(V('TOK_END'),C(2)))
,NL(1),SET(V('TOK_START'),F('INSTR',[V('TOK_START'),V('STACK'),C('where="')]))
,NL(1),PLUSEQ(V('TOK_START'),C(7))
,NL(1),SET(V('TOK_END'),F('INSTR',[V('TOK_START'),V('STACK'),C('" ')]))
,NL(1),SET(V('PROG'),F('MID$',[V('STACK'),V('TOK_START'),SUB(V('TOK_END'),V('TOK_START'))]))
,NL(1),SET(V('TOK_START'),ADD(V('TOK_END'),C(2)))
,NL(1),PLUSEQ(V('CLB'),C('    at '))
,NL(1),PLUSEQ(V('CLB'),V('PROG'))
,NL(1),PLUSEQ(V('CLB'),C('('))
,NL(1),PLUSEQ(V('CLB'),V('FNAME'))
,NL(1),PLUSEQ(V('CLB'),C(':'))
,NL(1),PLUSEQ(V('CLB'),V('LINE'))
,NL(1),PLUSEQ(V('CLB'),C(')'))
,NL(1),PLUSEQ(V('CLB'),F('CHR$',[C(10)]))
);p[61]=B(
);p[60]=B(


NL(5),END()); 




PROG(e,'RUN_ALL',[],B(
NL(6),DECL('LT','FILES','',A([C(10)]))
,NL(1),DECL('LT','RES','',A([C(4)]))
,NL(1),PLUSEQ(V('RES'),C('=== Runtime Test Set ==='))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),CALL(C(e),C('RUN_SET'),[C('RTM')]))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),C('=== Supervisor Test Set ==='))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),CALL(C(e),C('RUN_SET'),[C('SUP')]))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),C('=== Java Bridge Test Set ==='))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),CALL(C(e),C('RUN_SET'),[C('JAV')]))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),C('=== Web Test Set ==='))
,NL(1),PLUSEQ(V('RES'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('RES'),CALL(C(e),C('RUN_SET'),[C('WEB')]))
,NL(1),END(V('RES')))); 












PROG(e,'RUN_SET',['SET'],B(
NL(14),DECL('BS','SET','',A([C(null)]))

,NL(2),DECL('LT','FILES','',A([C(10)]))
,NL(1),DECL('LT','RES','',A([C(1)]))
,NL(1),DECL('LI','I','')
,NL(1),DECL('LI','STARTPOS','')
,NL(1),SET(V('FILES'),CALL(C(e),C('GET_QLF_LIST'),[C(''),V('SET'),C(';')]))
,NL(1),IF(GT(F('LEN',[V('FILES')]),C(0)),p,63,B(
NL(1),SET(V('I'),C(1))
,NL(1),WHILE(GT(V('I'),C(0)),p,64,B(
NL(1),SET(V('STARTPOS'),V('I'))
,NL(1),SET(V('I'),F('INSTR',[V('I'),V('FILES'),C(';')]))
,NL(1),SET(V('FNAME'),F('MID$',[V('FILES'),V('STARTPOS'),SUB(V('I'),V('STARTPOS'))]))
,NL(1),IF(GT(F('LEN',[V('FNAME')]),C(0)),p,65,B(
NL(1),PLUSEQ(V('RES'),CALL(C(e),ADD(V('FNAME'),C('.TESTSUITE')),[]))
,GO(p,65)))),true),GO(p,63)))));p[65]=B(
);p[64]=B(
);p[63]=B(
NL(4),END(V('RES'))); 

PROG(e,'GET_QLF_LIST',['DOSSIER','SET','SEP'],B(
NL(3),DECL('BS','DOSSIER','',A([C(null)]))
,NL(1),DECL('BS','SET','',A([C(null)]))
,NL(1),DECL('BS','SEP','',A([C(null)]))
,NL(1),DECL('LS','FILTRE','',A([C(250)]))
,NL(1),DECL('LT','FILES','',A([C(10)]))

,NL(2),SET(V('FILTRE'),ADD(ADD(ADD(ADD(C('left$(TRT,'),F('NUM$',[ADD(F('LEN',[V('SET')]),C(3))])),C(')="QLF')),V('SET')),C('"')))
,NL(1),SET(V('FILES'),CALL(C(e),C('GET_FILES'),[V('DOSSIER'),C('QLF'),V('FILTRE'),C(100000),C('adx'),C('TRT'),V('SEP')]))
,NL(1),END(V('FILES')))); 

PROG(e,'GET_FILES',['DOSSIER','START','FILTERS','NBMAX','FILEEXT','FILEDIR','SEP'],B(
NL(3),DECL('BS','DOSSIER','',A([C(null)]))
,NL(1),DECL('BS','START','',A([C(null)]))
,NL(1),DECL('BS','FILTERS','',A([C(null)]))
,NL(1),DECL('BI','NBMAX','')
,NL(1),DECL('BS','FILEEXT','',A([C(null)]))
,NL(1),DECL('BS','FILEDIR','',A([C(null)]))
,NL(1),DECL('BS','SEP','',A([C(null)]))

,NL(2),DECL('LS','FILTRE','',A([C(250)])),DECL('LS','REPERT','',A([V('GDIMFIC')]))
,NL(1),DECL('LS','MACHINE','',A([C(250)])),DECL('LS','APPLI','',A([V('GLONADS')])),DECL('LS','ORDSYS','',A([C(250)]))
,NL(1),DECL('LS','CODTRT','',A([V('GLONADC')]))
,NL(1),DECL('LI','NB_TRT',''),DECL('LI','K','')
,NL(1),DECL('LI','NB_MAX','')

,NL(2),DECL('LT','FILES','',A([C(10)]))



,NL(4),IF(EQ(V('NBMAX'),USUB(C(1))),p,66,B(SET(V('NB_MAX'),V('GNBSEL')),GO(p,67)))));p[66]=B(SET(V('NB_MAX'),V('NBMAX')),GO(p,67));p[67]=B(
NL(1),IF(EQ(V('DOSSIER'),C('')),p,68,B(SET(V('DOSSIER'),F('NOMAP')),GO(p,68))));p[68]=B(

NL(2),CALL(REQ(r,C('ORDSYS')),C('MACHINE'),[V('DOSSIER'),V('MACHINE'),V('APPLI')])
,NL(1),SET(V('REPERT'),F('FILPATH',[V('FILEDIR'),C(''),C(''),V('APPLI'),C(''),V('MACHINE')]))


,NL(3),IF(EQ(V('START'),C('')),p,69,B(
NL(1),SET(V('FILTRE'),C(''))
,GO(p,70))));p[69]=B(
NL(2),SET(V('FILTRE'),ADD(ADD(C('TRT>="'),V('START')),C('"')))
,GO(p,70));p[70]=B(


NL(4),IF(NE(V('FILTRE'),C('')),p,71,B(PLUSEQ(V('FILTRE'),C('&')),GO(p,71))));p[71]=B(
NL(1),PLUSEQ(V('FILTRE'),C('TRT<>""'))


,NL(3),IF(NE(V('FILTERS'),C('')),p,72,B(
NL(1),IF(NE(V('FILTRE'),C('')),p,73,B(PLUSEQ(V('FILTRE'),C('&')),GO(p,73))),GO(p,72))));p[73]=B(
NL(1),PLUSEQ(V('FILTRE'),V('FILTERS'))
);p[72]=B(

NL(3),IF(GT(CLALEV(CV('F','TRT_',null)),C(0)),p,74,B(CLOSEFILE('LOCAL',['TRT_']),GO(p,74))));p[74]=B(
NL(1),CASE(V('FILEEXT'),p,75,76)
);p[75]=WHEN([C('src')],p,77,B(
NL(2),SET(V('ORDSYS'),SUB(SUB(ADD(ADD(V('MACHINE'),C('@')),C('lsadx -a')),F('TOUPPER',[V('APPLI')])),V('REPERT')))
,NL(1),PLUSEQ(V('FILTRE'),C('& pat(TRT,"*.src")'))
,GO(p,76)));p[77]=WHEN([C('stc')],p,78,B(
NL(2),SET(V('ORDSYS'),SUB(SUB(ADD(ADD(V('MACHINE'),C('@')),C('lsadx -a')),F('TOUPPER',[V('APPLI')])),V('REPERT')))
,NL(1),PLUSEQ(V('FILTRE'),C('& pat(TRT,"*.stc")'))
,GO(p,76)));p[78]=WHEN([],p,76,B(
NL(2),SET(V('ORDSYS'),SUB(ADD(ADD(ADD(V('MACHINE'),C('@')),C('archive -d ')),V('DOSSIER')),C(' -t "adx" -l "*" -v')))
,GO(p,76)));p[76]=B(
NL(2),FILESYS(CV('?','TRT_',null),[NIY({tag:'VAR',type:C(null),name:C(null),lens:A([C(30)]),ranges:C(null)})],NIY({tag:'SYSTEM',exp:V('ORDSYS')}))

,NL(2),SET(V('NB_TRT'),C(0))
,NL(1),FORF(KEY('?','TRT_',''),WHERE([EVALUE(r, e, V('FILTRE'))]),p,79,B(
NL(1),PLUSEQ(V('NB_TRT'),C(1))
,NL(1),SET(V('K'),F('INSTR',[C(1),CV('F','TRT_','TRT'),ADD(C('.'),V('FILEEXT'))]))
,NL(1),IF(V('K'),p,80,B(
NL(1),SET(V('CODTRT'),F('LEFT$',[CV('F','TRT_','TRT'),SUB(V('K'),C(1))]))
,GO(p,81))))));p[80]=B(
NL(2),SET(V('CODTRT'),CV('F','TRT_','TRT'))
,GO(p,81));p[81]=B(
NL(2),IF(GT(V('NB_TRT'),V('NB_MAX')),p,82,B(
NL(1),BREAK(p,C(1))
,GO(p,82))));p[82]=B(
NL(2),PLUSEQ(V('FILES'),V('CODTRT'))
,NL(1),PLUSEQ(V('FILES'),V('SEP'))
);p[79]=B(
NL(2),END(V('FILES'))); 







PROG(e,'LOG_APPEND',['LINE'],B(
NL(9),OPEN('LOG_',CALL(C(e),C('LOG_NAME'),[]),'w',USUB(C(1)))
,NL(1),IOMODE('LOG_','adxium',V('GUTF8'))
,NL(1),IOMODE('LOG_','adxirs',C(''))


,NL(3),WRSEQ('LOG_',A([V('LINE')]))
,NL(1),CLOSE('LOG_')
,NL(1),END())); 







PROG(e,'LOG_LINE',['LINE'],B(
NL(9),OPEN('LOG_',CALL(C(e),C('LOG_NAME'),[]),'w',USUB(C(1)))

,NL(2),IOMODE('LOG_','adxium',V('GUTF8'))
,NL(1),IOMODE('LOG_','adxirs',C(''))


,NL(3),WRSEQ('LOG_',A([ADD(ADD(ADD(ADD(ADD(F('FORMAT$',[C('D:YYYY[-]MM[-]DD'),F('DATE$')]),C('T')),F('TIME$')),C('.')),F('FORMAT$',[C('N0:3'),F('MOD',[F('VAL',[F('TIMESTAMP$')]),C(1000)])])),C(': '))]))
,NL(1),WRSEQ('LOG_',A([V('LINE')]))
,NL(1),WRSEQ('LOG_',A([F('CHR$',[C(10)])]))
,NL(1),CLOSE('LOG_')
,NL(1),END())); 







PROG(e,'RUN_TESTSUITE',['SUITE_ID','SUITE_DESCRIPTION'],B(
NL(9),DECL('BS','SUITE_ID','',A([C(null)]))
,NL(1),DECL('BS','SUITE_DESCRIPTION','',A([C(null)]))

,NL(2),DECL('LI','FATAL_ERR','')
,NL(1),ONERRGO(C(e),'SUITE_ERR')
,NL(1),CALL(C(e),C('TESTSUITE_START'),[V('SUITE_ID'),V('SUITE_DESCRIPTION')])
,NL(1),IF(NE(V('FATAL_ERR'),C(0)),p,83,B(
NL(1),GOTO(C(e),'END_SUITE')
,GO(p,83)))));p[83]=B(

NL(3),DECL('LI','I','')
,NL(1),FORV('I',C(1),V('GXUNIT_CASE_COUNT'),null,p,84,B(
NL(1),SET(V('GXUNIT_CURRENT_CASE'),V('I'))
,NL(1),CALL(C(e),C('RUN_TESTCASE'),[INDEX(V('GXUNIT_CASES'),[V('I'),C(0)]),INDEX(V('GXUNIT_CASES'),[V('I'),C(1)]),INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('I'),C(0)])])
,NL(1),IF(NE(V('FATAL_ERR'),C(0)),p,85,B(
NL(1),GOTO(C(e),'END_SUITE')
,GO(p,85))))));p[85]=B(
);p[84]=B(

NL(4),CALL(C(e),C('TESTSUITE_END'),[])
,NL(1),IF(NE(V('FATAL_ERR'),C(0)),p,86,B(
NL(1),GOTO(C(e),'END_SUITE')
,GO(p,86))));p[86]=B(

GO(e,'END_SUITE'));e.END_SUITE=B(
NL(4),ONERRGO(C(e))
,NL(1),END(CALL(C(e),C('SUITE_RESULT'),[]))); 

e.SUITE_ERR=B(
NL(3),SET(V('FATAL_ERR'),F('ERRN'))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('GXUNIT_SUITE_RESULT'),ADD(ADD(ADD(ADD(ADD(ADD(ADD(ADD(C('Fatal error('),F('NUM$',[F('ERRN')])),C('): ')),F('ERRMES$',[F('ERRN')])),C('[')),F('ERRP')),C(':')),F('NUM$',[F('ERRL')])),C(']')))







,NL(8),CALL(C(e),C('RESET_UNIT'),[])
,NL(1),RESUME()); 

PROG(e,'RESET_UNIT',[],B(
NL(3),SET(V('GXUNIT_CURRENT_CASE'),C(0))
,NL(1),SET(V('GXUNIT_CASE_COUNT'),C(0))
,NL(1),SET(V('GXUNIT_MODULE_NAME'),C(''))
,NL(1),SET(V('GXUNIT_TSTAMP'),C(''))
,NL(1),END())); 








PROG(e,'RUN_TESTCASE',['SUBPRG','DESCRIPTION','ASSERT_COUNT'],B(
NL(10),DECL('BS','SUBPRG','',A([C(null)]))
,NL(1),DECL('BS','DESCRIPTION','',A([C(null)]))
,NL(1),DECL('BI','ASSERT_COUNT','')

,NL(2),CALL(C(e),C('TESTCASE_START'),[V('DESCRIPTION')])
,NL(1),CALL(REQ(r,V('GXUNIT_MODULE_NAME')),V('SUBPRG'),[])
,NL(1),CALL(C(e),C('TESTCASE_END'),[])
,NL(1),END())); 

PROG(e,'ADD_TESTCASE',['SUBPRG','DESCRIPTION','ASSERT_COUNT'],B(
NL(3),DECL('BS','SUBPRG','',A([C(null)]))
,NL(1),DECL('BS','DESCRIPTION','',A([C(null)]))
,NL(1),DECL('BI','ASSERT_COUNT','')

,NL(2),CALL(C(e),C('INIT_UNIT'),[])

,NL(2),PLUSEQ(V('GXUNIT_CASE_COUNT'),C(1))
,NL(1),SET(INDEX(V('GXUNIT_CASES'),[V('GXUNIT_CASE_COUNT'),C(0)]),V('SUBPRG'))
,NL(1),SET(INDEX(V('GXUNIT_CASES'),[V('GXUNIT_CASE_COUNT'),C(1)]),V('DESCRIPTION'))
,NL(1),SET(INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CASE_COUNT'),C(0)]),V('ASSERT_COUNT'))
,NL(1),SET(INDEX(V('GXUNIT_CASE_ASSERT_COUNT'),[V('GXUNIT_CASE_COUNT'),C(1)]),C(0))
,NL(1),END())); 





PROG(e,'LOG_CLEAR',[],B(
NL(7),OPEN('LOG_',CALL(C(e),C('LOG_NAME'),[]),'w',C(0))
,NL(1),CLOSE('LOG_')
,NL(1),END())); 





PROG(e,'LOG_NAME',[],B(
NL(7),IF(LT(DIM(V('GXUNIT_LOG_NAME')),C(0)),p,87,B(DECL('VS','GXUNIT_LOG_NAME','',A([C(255)])),GO(p,87)))));p[87]=B(
NL(1),IF(EQ(CV('V','','GXUNIT_LOG_NAME'),C('')),p,88,B(
NL(1),DECL('LS','NAME','',A([C(255)]))
,NL(1),CALL(C(e),C('INIT_UNIT'),[])
,NL(1),SET(V('NAME'),ADD(ADD(V('GXUNIT_MODULE_NAME'),C('_')),F('TOUPPER',[F('CTRANS',[F('ADXUSR'),C('.\\/|*@'),C('______')])])))


,NL(3),SET(CV('V','','GXUNIT_LOG_NAME'),F('FILPATH',[C('TRA'),V('NAME'),C('tra'),C(0)]))
,GO(p,88))));p[88]=B(
NL(2),END(CV('V','','GXUNIT_LOG_NAME'))); 

PROG(e,'RAZ_CONTEXT',[],B(
NL(3),ONERRGO(C(e),'TRAP_ERROR')
,NL(1),IF(GT(DIM(V('GXUNIT_TSTAMP')),C(0)),p,89,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_TSTAMP')])}),GO(p,89)))));p[89]=B(
NL(1),IF(GT(DIM(V('GXUNIT_ID')),C(0)),p,90,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_ID')])}),GO(p,90))));p[90]=B(
NL(1),IF(GT(DIM(V('GXUNIT_DESCRIPTION')),C(0)),p,91,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_DESCRIPTION')])}),GO(p,91))));p[91]=B(
NL(1),IF(GT(DIM(V('GXUNIT_SUCCESS')),C(0)),p,92,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_SUCCESS')])}),GO(p,92))));p[92]=B(
NL(1),IF(GT(DIM(V('GXUNIT_FAILURE')),C(0)),p,93,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_FAILURE')])}),GO(p,93))));p[93]=B(
NL(1),IF(GT(DIM(V('GXUNIT_TESTID')),C(0)),p,94,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_TESTID')])}),GO(p,94))));p[94]=B(
NL(1),IF(GT(DIM(V('GXUNIT_RESULT')),C(0)),p,95,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_RESULT')])}),GO(p,95))));p[95]=B(
NL(1),IF(GT(DIM(V('GXUNIT_ERROR')),C(0)),p,96,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_ERROR')])}),GO(p,96))));p[96]=B(
NL(1),IF(GT(DIM(V('GXUNIT_FILE')),C(0)),p,97,B(NIY({tag:'KILL',expressions:A([V('GXUNIT_FILE')])}),GO(p,97))));p[97]=B(
NL(1),END(C('ok'))); 

e.TRAP_ERROR=B(
NL(3),RESUME()); 




e.TEST_=B(
NL(6),BOX('info',[CALL(C(e),C('TESTSUITE'),[])])
,NL(1),END()); 

PROG(e,'TESTSUITE',[],B(

NL(4),IF(LT(DIM(V('GXUNIT_MODULE_NAME')),C(0)),p,98,B(DECL('VS','GXUNIT_MODULE_NAME','',A([C(255)])),GO(p,98)))));p[98]=B(
NL(1),SET(V('GXUNIT_MODULE_NAME'),C('AXUNIT'))

,NL(2),CALL(C(e),C('ADD_TESTCASE'),[C('TC_01'),C('"abc" <> 2'),C(1)])
,NL(1),CALL(C(e),C('ADD_TESTCASE'),[C('TC_02'),C('"abc" = "abc"'),C(1)])
,NL(1),CALL(C(e),C('ADD_TESTCASE'),[C('TC_03'),C('(1 = 1) = true'),C(1)])
,NL(1),CALL(C(e),C('ADD_TESTCASE'),[C('TC_04'),C('(1 = 0) = false'),C(1)])
,NL(1),CALL(C(e),C('ADD_TESTCASE'),[C('TC_05'),C('callstack'),C(1)])
,NL(1),END(CALL(C(e),C('RUN_TESTSUITE'),[C('AXUNIT'),C('AXUNIT self test')]))); 

PROG(e,'TC_01',[],B(

NL(4),DECL('LS','A','',A([C(250)])),SET(V('A'),C('abc'))

,NL(2),CALL(C(e),C('CHECK_NOTEQUAL'),[V('A'),C(2)])
,NL(1),END())); 

PROG(e,'TC_02',[],B(
NL(3),DECL('LS','A','',A([C(250)])),SET(V('A'),C('abc'))

,NL(2),CALL(C(e),C('CHECK_EQUAL'),[V('A'),C('abc')])
,NL(1),END())); 

PROG(e,'TC_03',[],B(
NL(3),CALL(C(e),C('CHECK_TRUE'),[EQ(C(1),C(1))])
,NL(1),END())); 

PROG(e,'TC_04',[],B(
NL(3),CALL(C(e),C('CHECK_FALSE'),[EQ(C(1),C(0))])
,NL(1),END())); 

PROG(e,'TC_05',[],B(
NL(3),DECL('LT','ST','',A([C(2)]))
,NL(1),DECL('LT','GOT','',A([C(2)]))
,NL(1),DECL('LT','EXPECT','',A([C(2)]))
,NL(1),SET(V('ST'),C(''))
,NL(1),PLUSEQ(V('ST'),C('<stack level="0" type="file" filename="x3://sodaix02:17000/SUPERV/ZXUNIT.src" lineno="253" where="ZXUNIT.TEST_STACK" cmdbegin="253:0" cmdend="253:-1"/>'))
,NL(1),PLUSEQ(V('ST'),C('<stack level="1" type="file" filename="x3://sodaix02:17000/SUPERV/.src" lineno="2015" where="WMAXDCOR_122.EVALUE_EXPR" cmdbegin="2015:0" cmdend="2015:-1"/>'))

,NL(2),PLUSEQ(V('EXPECT'),C('    at ZXUNIT.TEST_STACK(sodaix02:17000/SUPERV/ZXUNIT.src:254)'))
,NL(1),PLUSEQ(V('EXPECT'),F('CHR$',[C(10)]))
,NL(1),PLUSEQ(V('EXPECT'),C('    at WMAXDCOR_122.EVALUE_EXPR(sodaix02:17000/SUPERV/.src:2016)'))
,NL(1),PLUSEQ(V('EXPECT'),F('CHR$',[C(10)]))

,NL(2),CALL(C(e),C('APPEND_STACK'),[V('GOT'),V('ST')])

,NL(2),CALL(C(e),C('CHECK_EQUAL'),[V('GOT'),V('EXPECT')])
,NL(1),END())); 

PROG(e,'STACK',[],B(
NL(3),DECL('LT','ST','',A([C(1)]))
,NL(1),DECL('LT','ST2','',A([C(1)]))
,NL(1),SET(V('ST'),C(''))
,NL(1),PLUSEQ(V('ST'),C('<stack level="0" type="file" filename="x3://sodaix02:17000/SUPERV/ZXUNIT.src" lineno="253" where="ZXUNIT.TEST_STACK" cmdbegin="253:0" cmdend="253:-1"/>'))
,NL(1),PLUSEQ(V('ST'),C('<stack level="1" type="file" filename="x3://sodaix02:17000/SUPERV/.src" lineno="2015" where="WMAXDCOR_122.EVALUE_EXPR" cmdbegin="2015:0" cmdend="2015:-1"/>'))
,NL(1),CALL(C(e),C('APPEND_STACK'),[V('ST2'),V('ST')])








,NL(9),END(ADD(ADD(C('ok: '),F('CHR$',[C(10)])),V('ST2'))))); 

PROG(e,'TEST_STACK',[],B(
NL(3),END(CALL(C(e),C('TEST_STACK2'),[])))); 

PROG(e,'TEST_STACK2',[],B(
NL(3),DECL('LI','STAT','')
,NL(1),DECL('LT','STACK','',A([C(10)]))
,NL(1),DECL('LT','STACK2','',A([C(10)]))
,NL(1),SET(V('STAT'),F('DBGCALLSTACK',[C(0),V('STACK')]))
,NL(1),CALL(C(e),C('APPEND_STACK'),[V('STACK2'),V('STACK')])
,NL(1),END(V('STACK2')))); 
