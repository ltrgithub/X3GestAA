Local Clbfile RESULT
RESULT = func TESTSUITE()
Call FERME_TRACE From LECFIC
GTRACE = "QLFAR_UUID_"+GACTX.USER
Call LEC_TRACE From LECFIC
End


#**
#* The main entry point of the unit test suite for Requirement 73835
#*
#* @see
#* <a href="http://tools.ietf.org/pdf/rfc4122.pdf"> A Universally Unique IDentifier (UUID) </a>
#*!
Funprog TESTSUITE()
Call ADD_TESTCASE("TEST_DECL_UUID", "déclaration variable de type  UUID ", 3) From AXUNIT
Call ADD_TESTCASE("TEST_GETUUID", "Fonction getuuid-génère nouveau UUID et retourne type LUUID", 1) From AXUNIT
Call ADD_TESTCASE("TEST_NULUUID", "Fonction nulluuid", 3) From AXUNIT
Call ADD_TESTCASE("TEST_NUMD", "Fonction num$", 2) From AXUNIT
End func AXUNIT.RUN_TESTSUITE("REQ-73835", "Universally Unique IDentifier (UUID)")

# -----------------------------------------------------------------------
Subprog TEST_DECL_UUID
Local Uuident MYUUID
Call CHECK_NOTEQUAL(dim(MYUUID),-1) From AXUNIT
Call CHECK_EQUAL(type(MYUUID),525) From AXUNIT
Call CHECK_EQUAL(clasiz([L],1),16) From AXUNIT
End

# -----------------------------------------------------------------------
Subprog TEST_GETUUID
Local Char GOT(50),EXPECT(50)
Local Char GOT(25)
Local Char EXPECT(25)
Local Char MYUUIDSTR(40)
Local Uuident MYUUID
MYUUID=getUuid
MYUUIDSTR=num$(MYUUID)
#SPLIT LES DIFFéRENTES PARTIES OCTETS ET VéRIFIER S'ils sont conformes au standart
Call CHECK_EQUAL(len(MYUUIDSTR),36) From AXUNIT
End

# -----------------------------------------------------------------------
Subprog TEST_NUMD
Local Char    GOT(100),EXPECT(100) , UUID_FALSE(100)
Local Uuident MYUUID
Local Integer ER
EXPECT="86EDC6C6-5641-4515-B0A3-53F4638B18D8"
MYUUID=toUuid(EXPECT)
GOT=toupper(num$(MYUUID))
Call CHECK_EQUAL(GOT,EXPECT) From AXUNIT
Onerrgo ER
UUID_FALSE = "86EDC6C6-5641-4515-B0A3-53F4638B18D8ss"
MYUUID = toUuid(UUID_FALSE)
Call CHECK_EQUAL(ER,151) From AXUNIT
Onerrgo
End

#----------#
$ER
ER = errn
Resume

# -----------------------------------------------------------------------
Subprog TEST_NULUUID
Local Uuident MYNULLUUID , MYUUID
Local Char    GOT(50), EXPECT(50) , UUID_FALSE(100)
Local Integer ER
MYNULLUUID=NullUuid
EXPECT="00000000-0000-0000-0000-000000000000"
GOT =num$(MYNULLUUID)
Call CHECK_EQUAL(GOT,EXPECT) From AXUNIT
Onerrgo ER
UUID_FALSE = "00000000-0000-0000-0000-000000000000ss"
MYUUID = toUuid(UUID_FALSE)
Call CHECK_EQUAL(ER,151) From AXUNIT
UUID_FALSE = "00000000-0000-0000-0000-00000"
MYUUID = toUuid(UUID_FALSE)
Call CHECK_EQUAL(ER,151) From AXUNIT
Onerrgo
End
