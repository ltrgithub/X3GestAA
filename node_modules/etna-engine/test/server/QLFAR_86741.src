#<AdxTL>@(#)1.0.0.0 $Revision$
TOTO = func TESTSUITE()
Infbox TOTO

End

# ---------- TEST_SUITE EscJson UnEscJson --------------------------
# ------------------------------------------------------------------

Funprog TESTSUITE()

Call ADD_TESTCASE("TEST0", "Global test", 9) From AXUNIT

End func AXUNIT.RUN_TESTSUITE("EscJson", "Common")


# -----------------------TEST_VARIABLE --------------------------------
# ###################################################################
Subprog TEST0( )
Local Char CH0(50)
Local Char CH1(50)
Local Clbfile MYCLB0(0)
Local Clbfile MYCLB1(0)
Local Clbfile MYCLB2(0)
Local Clbfile MYCLB3(0)

Local Integer I

# ##### void test ###############################################
# void string
CH0 = escJson("")
Call CHECK_EQUAL( CH0, "" ) From AXUNIT

CH0 = escJson(CH1)
Call CHECK_EQUAL( CH0, "" ) From AXUNIT

# void clob
MYCLB1 = escJson( MYCLB0 )
Call CHECK_EQUAL( MYCLB1, "" ) From AXUNIT

# ####################################################
# init test clob
For I=0 To 7
    Append MYCLB0, '/123456789"123456789\123456789'+chr$(10)+'123456789'+chr$(13)+'123456789'+chr$(12)+'123456789'+chr$(9)
    Append MYCLB0, '/123456789"123456789\123456789'+chr$(10)+'123456789'+chr$(13)+'123456789'+chr$(12)+'123456789'+chr$(9)
    Append MYCLB0, '/123456789"123456789\123456789'+chr$(10)+'123456789'+chr$(13)+'123456789'+chr$(12)+'123456789'+chr$(9)
    Append MYCLB0, '/123456789"123456789\123456789'+chr$(10)+'123456789'+chr$(13)+'123456789'+chr$(12)+'123456789'+chr$(9)
    Append MYCLB0, '/123456789"123456789\123456789'+chr$(10)+'123456789'+chr$(13)+'123456789'+chr$(12)+'123456789'+chr$(9)
Next

For I=0 To 7
    Append MYCLB2, '/123456789\"123456789\\123456789\n123456789\r123456789\f123456789\t'
    Append MYCLB2, '/123456789\"123456789\\123456789\n123456789\r123456789\f123456789\t'
    Append MYCLB2, '/123456789\"123456789\\123456789\n123456789\r123456789\f123456789\t'
    Append MYCLB2, '/123456789\"123456789\\123456789\n123456789\r123456789\f123456789\t'
    Append MYCLB2, '/123456789\"123456789\\123456789\n123456789\r123456789\f123456789\t'
Next

# ####################################################
# string test

# literal ############################################
CH0 = escJson('to\t/é"#'+chr$(10)+'$'+chr$(13)+'$'+chr$(12)+'$'+chr$(9)+'$')
Call CHECK_EQUAL( CH0, 'to\\t/é\"#\n$\r$\f$\t$' ) From AXUNIT


CH1 = unescJson( 'to\\t/é\"#\n$\r$\f$\t$' )
Call CHECK_EQUAL( CH1, 'to\t/é"#'+chr$(10)+'$'+chr$(13)+'$'+chr$(12)+'$'+chr$(9)+'$' ) From AXUNIT

# variable string ####################################
CH1 = 'to\t/é"#'+chr$(10)+'$'+chr$(13)+'$'+chr$(12)+'$'+chr$(9)+'$'
CH0 = escJson(CH1)
Call CHECK_EQUAL( CH0, 'to\\t/é\"#\n$\r$\f$\t$' ) From AXUNIT


CH1 = unescJson(CH0)
Call CHECK_EQUAL( CH1, 'to\t/é"#'+chr$(10)+'$'+chr$(13)+'$'+chr$(12)+'$'+chr$(9)+'$' ) From AXUNIT

# variable clob ####################################

MYCLB1 = escJson( MYCLB0 )
Call CHECK_EQUAL( MYCLB1, MYCLB2 ) From AXUNIT

MYCLB3 = unescJson( MYCLB1 )
Call CHECK_EQUAL( MYCLB3, MYCLB0 ) From AXUNIT

End
