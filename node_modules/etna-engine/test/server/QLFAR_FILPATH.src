#<AdxTL>@(#)8.0.0.0 $Revision$
TOTO = func TESTSUITE()
#Call FERME_TRACE From LECFIC
#GTRACE = "QLFAR_FILPATH_"+GUSER
#Call LEC_TRACE From LECFIC

#End

# ---------- TEST_SUITE filpath function       -------------------------
# ------------------------------------------------------------------

Funprog TESTSUITE()

    Call ADD_TESTCASE("TEST1", "Test base", 32 + 3 * (func ASYSOS.PLATFORM() = "win32")) From AXUNIT

End func AXUNIT.RUN_TESTSUITE("Types", "Common")

# -----------------------TEST_UNI -------------------------------------
# #####################################################################

Subprog TEST1( )
Local Char RES(250)
Local Char SEP(2)
Local Char BASE(250)
Local Char BASE2(250)

SEP = func ASYSPATH.SEP() 

BASE = filpath("","","","","","")
BASE2 = func AFNC.TRANSF( BASE, nomap, "NEWAPP")


If (func ASYSOS.PLATFORM() = "win32")
    RES = filpath("","C:/","","","","")
    Call CHECK_EQUAL( RES, "C:\" ) From AXUNIT

    RES = filpath("","C:\","","","","")
    Call CHECK_EQUAL( RES, "C:\" ) From AXUNIT

    RES = filpath("","C:\toto","","","","")
    Call CHECK_EQUAL( RES, "C:\toto" ) From AXUNIT

	RES = filpath("","C:\toto\tata\tutu","","","","")
    Call CHECK_EQUAL( RES, "C:\toto\tata\tutu" ) From AXUNIT

Else
    RES = filpath("","/","","","","")
    Call CHECK_EQUAL( RES, "/" ) From AXUNIT	
Endif

# ---------------------------------------------------------------------
RES = filpath("TRT","","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT" ) From AXUNIT

RES = filpath("TRT","","",nomap,"","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT" ) From AXUNIT

RES = filpath("TRT","","","","nomap","" )
Call CHECK_EQUAL( RES, "" ) From AXUNIT

RES = filpath("TRT","fic","src",nomap,"","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"fic.src" ) From AXUNIT

RES = filpath("TRT",nomap+".FIL","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"FIL" ) From AXUNIT

RES = filpath("TRT",nomap+".FIL","ext" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"FIL.ext" ) From AXUNIT

RES = filpath("TRT",nomap+".FIL","ext", "NOAPP" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"FIL.ext" ) From AXUNIT

RES = filpath("TRT",nomap+".FIL","ext", "", "A" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"FIL.ext" ) From AXUNIT

RES = filpath("TRT",nomap+".FIL","ext", "", "B" )
Call CHECK_EQUAL( RES, "" ) From AXUNIT


# ---------------------------------------------------------------------
RES = filpath("",nomap+".FIL","ext" )
Call CHECK_EQUAL( RES, BASE+SEP+"FIL.ext" ) From AXUNIT

RES = filpath("",nomap+".adxora","","","","" )
Call CHECK_EQUAL( RES, BASE+SEP+"adxora" ) From AXUNIT

RES = filpath("",nomap+".TRT/adxora","","","","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adxora" ) From AXUNIT

RES = filpath("",nomap+".TRT/adxora","json","","","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adxora.json" ) From AXUNIT

RES = filpath("",nomap+".TRT/adxora","json","X3","","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adxora.json" ) From AXUNIT

RES = filpath("","@"+nomap+".TRT/adonix$adx", "","","","")
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adonix.adx" ) From AXUNIT

RES = filpath("","@"+nomap+".TRT/adonix$adx", "ext","","","")
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adonix.adx" ) From AXUNIT

RES = filpath("","@"+nomap+".TRT/adonix$adx", "","","A","")
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adonix.adx" ) From AXUNIT

RES = filpath("",nomap+".TRT/adonix$adx", "","","","")
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adonix.adx" ) From AXUNIT

RES = filpath("",nomap+".TRT/adonix$adx", "","","B","")
Call CHECK_EQUAL( RES, "" ) From AXUNIT

# ---------------------------------------------------------------------

RES = filpath("","FIL","ext" )
Call CHECK_EQUAL( RES, BASE+SEP+"FIL.ext" ) From AXUNIT

RES = filpath("","adxora","","","","" )
Call CHECK_EQUAL( RES, BASE+SEP+"adxora" ) From AXUNIT

RES = filpath("","TRT/adxora","","","","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adxora" ) From AXUNIT

RES = filpath("","TRT/adxora","json","","","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adxora.json" ) From AXUNIT

RES = filpath("","TRT/adxora","json",nomap,"","" )
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adxora.json" ) From AXUNIT

RES = filpath("","TRT/adonix$adx", "","","A","")
Call CHECK_EQUAL( RES, BASE+SEP+"TRT"+SEP+"adonix.adx" ) From AXUNIT


# ---------------------------------------------------------------------

RES = filpath("","TRT/adonix$adx", "","NEWAPP","A","")
Call CHECK_EQUAL( RES, BASE2+SEP+"TRT"+SEP+"adonix.adx" ) From AXUNIT

RES = filpath("","TRT/adonix", "adx","NEWAPP","A","")
Call CHECK_EQUAL( RES, BASE2+SEP+"TRT"+SEP+"adonix.adx" ) From AXUNIT

RES = filpath("TRT","adonix", "adx","NEWAPP","A","")
Call CHECK_EQUAL( RES, BASE2+SEP+"TRT"+SEP+"adonix.adx" ) From AXUNIT

RES = filpath("TRT","adonix", "adx","NEWAPP","B","")
Call CHECK_EQUAL( RES, "" ) from AXUNIT

RES = filpath("","adonix", "adx","NEWAPP","A","")
Call CHECK_EQUAL( RES, BASE2+SEP+"adonix.adx" ) From AXUNIT

RES = filpath("","", "","NEWAPP","A","")
Call CHECK_EQUAL( RES, BASE2 ) From AXUNIT


End