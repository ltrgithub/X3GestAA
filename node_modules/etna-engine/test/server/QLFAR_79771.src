#<AdxTL>@(#)9.0.0.0 $Revision$
Infbox func TESTSUITE()
End

# ---------- TEST_SUITE system variable find -----------------
# -----------------------------------------------------------------

Funprog TESTSUITE()


  Call ADD_TESTCASE("TEST_FIND", "Classic test", 5) From AXUNIT


End func AXUNIT.RUN_TESTSUITE("find", "Common")

# -----------------------TEST_ADXSQLREC --------------------------------
# ######################################################################
Subprog TEST_FIND( )
Local File AABREV[ABV]


Local Integer DIMT,I
DIMT = 128

Local Char T(20)(1..DIMT)
Local Char ABR0(15)
Local Char ABR1(15)
Local Char ABR2(15)
ABR0 = "A12345678901234"
ABR1 = "A123456789012345"
ABR2 = "A1234567890123"

For I = 1 To DIMT
    T(I) = "toto"
Next

Trbegin [ABV]
    ABREV = ABR0
    MOT = "TEST_OK"
    Write [ABV]
    Call CHECK_EQUAL( fstat, 0 ) From AXUNIT
Commit

I=0
T(50) = ABR0
For [ABV] Where find( ABREV, T ) <> 0
    I+=1
Next
Call CHECK_EQUAL( I, 1 ) From AXUNIT

I=0
T(50) = ABR1
For [ABV] Where find( ABREV, T ) <> 0
    I+=1
Next
Call CHECK_EQUAL( I, 1 ) From AXUNIT

I=0
T(50) = ABR2
For [ABV] Where find( ABREV, T ) <> 0
    I+=1
Next
Call CHECK_EQUAL( I, 0 ) From AXUNIT

I=0
T(128) = ABR0
For [ABV] Where find( ABREV, T ) <> 0
    I+=1
Next
Call CHECK_EQUAL( I, 1 ) From AXUNIT


Trbegin [ABV]
    Read [ABV]AAB0 = ABR0
    Delete [ABV] Curr
Commit


End
