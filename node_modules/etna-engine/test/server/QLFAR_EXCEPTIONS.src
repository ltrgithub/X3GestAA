Local Clbfile RES
RES =  func TESTSUITE()
Call FERME_TRACE From LECFIC
GTRACE = "QLFAR_EXCEPTIONS_"+GACTX.USER
Call LEC_TRACE From LECFIC

End

# ---------- TEST_SUITE uni function       -------------------------
# ------------------------------------------------------------------

Funprog TESTSUITE()

    Call ADD_TESTCASE("TEST_EXCEPTIONS1", "Test 1", 5) From AXUNIT
    Call ADD_TESTCASE("TEST_EXCEPTIONS2", "Test 2", 1) From AXUNIT

End func AXUNIT.RUN_TESTSUITE("Types", "Common")

# -----------------------TEST_INTEGER ---------------------------------
# #####################################################################

$SUB0
X = X/0
Return

Subprog TEST_EXCEPTIONS1( )
Integer EX

Local Integer X,I
EX = 53
Onerrgo ERROR
X = X/0
Onerrgo


Onerrgo ERROR
For I = 0 To 3
  EX = 53
  X = X/0
Next
Onerrgo

#Gosub SUB0
End

Subprog TEST_EXCEPTIONS2( )
Integer EX
EX = 53
Local Integer X
Onerrgo ERROR
X = X/0
Onerrgo

End

Subprog CHECK_EVAL(STR, RESULT)
Call CHECK_EQUAL(evalue(STR), RESULT)
End

Subprog CHECK_EQUAL(GOT, EXPECT)
Call CHECK_EQUAL(GOT, EXPECT) From AXUNIT
End

$ERROR
Call CHECK_EQUAL(errn, EX) From AXUNIT
EX = 0
Resume
