var z = require('etna-engine/lib/basic'),r=require,e=exports,p=[],B=z.B,NL=z.NL,A=z.A,DECL=z.DECL,C=z.C,SET=z.SET,CV=z.CV,F=z.F,V=z.V,RANGE=z.RANGE,INDEX=z.INDEX,ADD=z.ADD,DATE=z.DATE,PLUSEQ=z.PLUSEQ,REQ=z.REQ,CALL=z.CALL,SUB=z.SUB,SIGMA=z.SIGMA,DIV=z.DIV,POW=z.POW,USUB=z.USUB,ONERRGO=z.ONERRGO,MUL=z.MUL,EQ=z.EQ,WHILE=z.WHILE,GO=z.GO,LE=z.LE,ERRBOX=z.ERRBOX,END=z.END,PROG=z.PROG,SORTA=z.SORTA,RESUME=z.RESUME;z.BEGIN(module);NL(0);z.MAIN(e,!_);e.MAIN=B(


NL(3),DECL('VI','OPTION_TRACE'),DECL('VI','ERREUR_TROUVEE')
,NL(1),DECL('VS','FICHIER_TRACE',A([C(200)]))
,NL(1),DECL('LI','TIME_START'),DECL('LI','NOMBRE')

,NL(2),SET(CV('V','','OPTION_TRACE'),C(1))
,NL(1),SET(CV('V','','FICHIER_TRACE'),F('FILPATH',[C('TRA'),F('TRTCOU'),C('tra')]))

,NL(2),SET(V('TIME_START'),F('TIME'))


,NL(3),SET(V('NOMBRE'),C(22))
,NL(1),DECL('LS','TAB_CHAINE',A([C(50)]),A([V('NOMBRE')]))
,NL(1),DECL('LN','TAB_DECIMAL',A([V('NOMBRE')]))
,NL(1),DECL('LD','TAB_DATE',A([(RANGE(C(1),V('NOMBRE')))]))

,NL(2),DECL('LI','I')

,NL(2),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Prison de la Bastille')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(3)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1789,7,14)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Armand Jean Du Plessis Richelieu')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(14)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1642,12,4)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Jean Sébastien Bach')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(159)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1750,7,28)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Georges Pompidou')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(26)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1974,4,2)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Richard Wagner')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(53)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1883,2,13)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Georges Perec')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(58)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1982,3,3)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Mur de Berlin')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(97)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1989,11,9)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('François Mitterrand')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(93)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1996,1,8)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Johannes Brahms')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(23)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1897,4,3)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Emile Zola')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(84)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1902,9,29)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Louis XVI')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(62)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1793,1,21)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('François Marie Arouet Voltaire')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(64)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1778,5,30)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('John Fitzgerald Kennedy')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(33)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1963,11,22)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('World Trade Center')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(83)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(2001,9,11)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Felix Faure')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(27)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1899,2,16)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Albert Einstein')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(950)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1955,4,18)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Blaise Pascal')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(288)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1622,8,19)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Dmitri Chostakovitch')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(41)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1975,8,9)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Coco Chanel')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(97)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1971,1,10)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Martin Luther King')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(16)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1968,4,4)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Leonhard Euler')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(93)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(1783,9,18)),PLUSEQ(V('I'),C(1))
,NL(1),SET(INDEX(V('TAB_CHAINE'),[V('I')]),C('Ernst Ingmar Bergmann')),SET(INDEX(V('TAB_DECIMAL'),[V('I')]),C(99)),SET(INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))]),DATE(2007,7,30)),PLUSEQ(V('I'),C(1))
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(SUB((SUB((SUB((SUB((SUB(C('Les décimales'),F('NUM$',[INDEX(V('TAB_DECIMAL'),[(SUB(F('UNI',[V('TAB_DECIMAL')]),C(1)))])]))),C('se répètent en position'))),F('NUM$',[(SUB(F('FIND',[INDEX(V('TAB_DECIMAL'),[(SUB(F('UNI',[V('TAB_DECIMAL')]),C(1)))]),V('TAB_DECIMAL')]),C(1)))]))),C('et'))),F('NUM$',[(SUB(F('UNI',[V('TAB_DECIMAL')]),C(1)))])))])


,NL(3),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(ADD(C('Nombre='),F('NUM$',[V('I')])))])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(ADD((ADD(F('NUM$',[INDEX(V('TAB_DECIMAL'),[C(0)])]),C('.'))),SIGMA('INDCUM',[C(1),(SUB(V('NOMBRE'),C(1))),F('NUM$',[INDEX(V('TAB_DECIMAL'),[V('INDCUM')])])])))])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(ADD((ADD(F('NUM$',[INDEX(V('TAB_DECIMAL'),[C(0)])]),C('.'))),F('NUM$',[F('SUM',[INDEX(V('TAB_DECIMAL'),[(RANGE(C(1),(SUB(V('NOMBRE'),C(1)))))])])])))])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(SUB((SUB((SUB(C('Les chiffres varient entre'),F('NUM$',[F('MIN',[V('TAB_DECIMAL')])]))),C('et'))),F('NUM$',[F('MAX',[V('TAB_DECIMAL')])])))])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(SUB((SUB((SUB(C('Somme:'),F('NUM$',[F('SUM',[V('TAB_DECIMAL')])]))),C('Produit:'))),F('NUM$',[(DIV(F('PRD',[V('TAB_DECIMAL')]),(POW(C(10),(ADD((USUB(C(1))),F('INT',[F('LOG',[F('MAX',[F('PRD',[V('TAB_DECIMAL')]),C(10)])])])))))))])))])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(SUB((SUB((SUB(C('Moyenne:'),F('NUM$',[F('AVG',[V('TAB_DECIMAL')])]))),C('Somme/nombre:'))),F('NUM$',[(DIV(F('SUM',[V('TAB_DECIMAL')]),F('DIM',[V('TAB_DECIMAL')])))])))])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(SUB((SUB((SUB(C('Les chaines varient entre'),F('MIN',[V('TAB_CHAINE')]))),C('et'))),F('MAX',[V('TAB_CHAINE')])))])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(SUB((SUB((SUB(C('Les dates varient entre'),F('NUM$',[F('MIN',[V('TAB_DATE')])]))),C('et'))),F('NUM$',[F('MAX',[V('TAB_DATE')])])))])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(ADD((ADD(F('NUM$',[INDEX(V('TAB_DECIMAL'),[C(0)])]),C('.'))),F('NUM$',[F('SUM',[INDEX(V('TAB_DECIMAL'),[(RANGE(C(1),(SUB(V('NOMBRE'),C(1)))))])])])))])
,NL(1),CALL(C(e),C('TRIE_MOI_CA'),[V('TAB_CHAINE'),V('TAB_DECIMAL'),V('TAB_DATE')])

,NL(2),ONERRGO(C(e),'TROP_LOIN')
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(ADD(C('Compte='),F('NUM$',[(ADD((SUB(F('FIND',[C(''),V('TAB_CHAINE')]),C(2))),(MUL((EQ(F('FIND',[C(''),V('TAB_CHAINE')]),C(0))),(ADD(F('DIM',[V('TAB_CHAINE')]),C(1)))))))])))])
,NL(1),DECL('LI','I'),SET(V('I'),C(0)),DECL('LI','I$e'),SET(V('I$e'),(ADD((SUB(F('FIND',[C(''),V('TAB_CHAINE')]),C(2))),(MUL((EQ(F('FIND',[C(''),V('TAB_CHAINE')]),C(0))),(ADD(F('DIM',[V('TAB_CHAINE')]),C(1)))))))),GO(p,1));p[1]=WHILE(LE(V('I'),V('I$e')),p,2,B(
NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(SUB((SUB(F('VIREBLC',[INDEX(V('TAB_CHAINE'),[V('I')]),C(3)]),C('score'))),F('NUM$',[INDEX(V('TAB_DECIMAL'),[V('I')])])))])
,NL(1),PLUSEQ(V('I'),C(1))));p[2]=B(

NL(2),CALL(C(e),C('RETRIE_MOI_CA'),[V('TAB_CHAINE'),V('TAB_DECIMAL'),V('TAB_DATE')])

,NL(2),DECL('LI','I'),SET(V('I'),C(0)),DECL('LI','I$e'),SET(V('I$e'),(ADD((SUB(F('FIND',[C(''),V('TAB_CHAINE')]),C(2))),(MUL((EQ(F('FIND',[C(''),V('TAB_CHAINE')]),C(0))),(ADD(F('DIM',[V('TAB_CHAINE')]),C(1)))))))),GO(p,3));p[3]=WHILE(LE(V('I'),V('I$e')),p,4,B(
NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(SUB((SUB(F('NUM$',[INDEX(V('TAB_DATE'),[(ADD(V('I'),C(1)))])]),C('pour'))),INDEX(V('TAB_CHAINE'),[V('I')])))])
,NL(1),PLUSEQ(V('I'),C(1))));p[4]=B(

NL(2),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[(ADD((ADD(F('NUM$',[INDEX(V('TAB_DECIMAL'),[C(0)])]),C('.'))),SIGMA('INDCUM',[C(1),V('NOMBRE'),F('NUM$',[INDEX(V('TAB_DECIMAL'),[V('INDCUM')])])])))])

,NL(2),SET(V('ERREUR_TROUVEE'),C(0))
,NL(1),ERRBOX(INDEX(V('TAB_CHAINE'),[(ADD(F('DIM',[V('TAB_CHAINE')]),C(1)))]))
,NL(1),ERRBOX(F('NUM$',[V('ERREUR_TROUVEE')]))

,NL(2),CALL(C(e),C('TRIE_SEULEMENT_CA'),[INDEX(V('TAB_CHAINE'),[(RANGE(C(1),C(4)))])])
,NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[C('Tri partiel de 1 à 4')])
,NL(1),DECL('LI','I'),SET(V('I'),C(0)),DECL('LI','I$e'),SET(V('I$e'),(ADD((SUB(F('FIND',[C(''),V('TAB_CHAINE')]),C(2))),(MUL((EQ(F('FIND',[C(''),V('TAB_CHAINE')]),C(0))),(ADD(F('DIM',[V('TAB_CHAINE')]),C(1)))))))),GO(p,5));p[5]=WHILE(LE(V('I'),V('I$e')),p,6,B(
NL(1),CALL(REQ(r,C('ZSYRADOM1')),C('TRACE_ERRBOX'),[INDEX(V('TAB_CHAINE'),[V('I')])])
,NL(1),PLUSEQ(V('I'),C(1))));p[6]=B(

NL(2),END()); 

PROG(e,'TRIE_MOI_CA',[V('ARG1'),V('ARG2'),V('ARG3')],B(
NL(3),DECL('AS','ARG1',A([C(null)]),A([(RANGE(C(2)))]))
,NL(1),DECL('AN','ARG2',A([(RANGE((USUB(C(5)))))]))
,NL(1),DECL('AD','ARG3',A([(RANGE(C(0)))]))
,NL(1),SORTA((ADD((SUB(F('FIND',[C(''),V('ARG1')]),C(1))),(MUL((EQ(F('FIND',[C(''),V('ARG1')]),C(0))),F('DIM',[V('ARG1')]))))),[V('ARG1'),V('ARG2'),V('ARG3')],[])
,NL(1),END())); 

PROG(e,'RETRIE_MOI_CA',[V('ARG1'),V('ARG2'),V('ARG3')],B(
NL(3),DECL('AS','ARG1',A([C(null)]),A([C(null)]))
,NL(1),DECL('AN','ARG2',A([C(null)]))
,NL(1),DECL('AD','ARG3',A([C(null)]))
,NL(1),SORTA(C(null),[V('ARG1'),V('ARG2'),V('ARG3')],[INDEX(V('ARG3'),[V('INDICE')])])
,NL(1),END())); 

PROG(e,'TRIE_SEULEMENT_CA',[V('ARG1')],B(
NL(3),DECL('AS','ARG1',A([C(null)]))
,NL(1),SORTA(C(null),[V('ARG1')],[])
,NL(1),END())); 

e.TROP_LOIN=B(
NL(3),SET(V('ERREUR_TROUVEE'),F('ERRN'))
,NL(1),RESUME()); 
