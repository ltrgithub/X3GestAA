"use strict"

var util = require("etna-supervisor/lib/util");


function _UUID(value) {
	if(typeof value === 'undefined') {
		this.value = util.uuid('');
		return this;
	} else if (typeof value === 'string') {
		if(/^[0-9a-fA-F]{8}[0-9a-fA-F]{4}[0-9a-fA-F]{4}[0-9a-fA-F]{4}[0-9a-fA-F]{12}$/.test(value) ) {
			this.value = value;
			return this;
		} else if(/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(value) ){
			this.value = value.replace('-', '');
			return this;
		}		
	}
	return undefined;
}

_UUID.prototype.toString = function() {
	return this.value;
}

exports.isUUID = function(uuid) {
	return uuid instanceof _UUID;
}

exports.UUID = _UUID;