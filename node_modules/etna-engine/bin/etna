#!/usr/bin/env node --harmony

try {
	require("etna-engine/lib/register");
	var glob = require('streamline/lib/globals');
	var arg = process.argv[2];
	var path = require('path');
	var p = path.join(process.cwd(), arg);
	var main = require(p).MAIN;
	glob.context.x3frame = require("etna-engine/lib/runtime/variables").createStack({});
	main(function(err) {
		if (err) throw err;
	});
}
catch (ex) {
	console.log("failed: " + ex.stack);
}