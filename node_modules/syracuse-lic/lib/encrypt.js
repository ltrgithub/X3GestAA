var streamlineTransform = require('streamline/lib/callbacks/transform').transform;
var fs = require('fs');
var Module = require('module');
var _compile = Module.prototype._compile;
function register() {
	require.extensions['.jsc'] = function(module, filename) {
		var content = fs.readFileSync(filename, "utf8");
		content = content.substr(10);
		_compile.call(module, content, filename);
		};
}
exports.register = register;

function encryptName(filename) {
	if (/\._?js$/.test(filename))
		return filename.replace(/\._?js/, ".jsc");
	return filename;
}
exports.encryptName = encryptName;

function encrypt(sourceFile, buff) {
	var content = buff.toString("utf8");
	content = "%/7!s?*tAa\n" + content;
	return new Buffer(content, "utf8");
}
exports.encrypt = encrypt;


