#<AdxTL>@(#)0.0.0.0 $Revision$

Funprog SEND_NOTIF(WTYPE, WTITLE, WMESSAGE, WSEVERITY,WTITLINK,WLINK, RESHEAD, RESBODY)
Value Char WTYPE()
Value Char WTITLE()
Value Clbfile WMESSAGE()
Value Char WSEVERITY()
Value Char WTITLINK()
Value Char WLINK()
Variable Clbfile RESHEAD()
Variable Clbfile RESBODY()

Local Integer STATUSCODE
Local Char MODULE(100) : MODULE = 'syracuse-notification/lib/helper'
Local Char FONCTION(30) : FONCTION = 'sendMessage'


Local Clbfile ARGUMENTS(0)
ARGUMENTS = '"' + WTYPE + '","' + WTITLE + '","' + WMESSAGE + '","*","' + WSEVERITY+'"'
If WTITLINK<>""and WLINK<>""
  ARGUMENTS += ',{"title":"'+WTITLINK+'","url":"'+WLINK+'"}'
Endif
Local Clbfile RESBODY(0)
# Call 'write' function{
STATUSCODE = func ASYRWEBSER.EXEC_JS(MODULE, FONCTION, 'wait', ARGUMENTS, '', 0, '', '0', RESHEAD, RESBODY)

End STATUSCODE
