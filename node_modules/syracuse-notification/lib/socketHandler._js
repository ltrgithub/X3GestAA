"use strict";

var helpers = require('syracuse-core/lib/helpers');
var tracer = require("syracuse-trace/lib/helper").getTracer("notifications");
var globals = require('streamline/lib/globals');

var SocketHandler = helpers.defineClass(function(_, sock) {
	this.sock = sock;
	this.initEvents(_);
	
}, null, {
	initEvents: function(_) {
		this.sock.on('connection', function(client) {
			
			tracer.info && tracer.info("Client connected: "+);
			
			
			client.on('message', function(message) {
				client.broadcast.emit('message', message);
		    });
		});
	}
});



exports.create = function(_, socket) {
	tracer.info && tracer.info("Create socket handler");
	var sh = new SocketHandler(_, socket);
}