var fs = require('fs');

exports.register = function(options) {
	var l = exports.load("license");
	if (l) 
		l.register(require, options);
}

exports.load = function(name) {
	var filename = __dirname+"/"+process.platform+"_"+process.arch+"/"+name+".node";
	if (fs.existsSync(filename))
		return require(filename);
	else {
		filename = __dirname+"/"+process.platform+"/"+name+".node";
		if (fs.existsSync(filename))
			return require(filename);
		console.log("Native module "+name+".node cannot be found");
	}	
}