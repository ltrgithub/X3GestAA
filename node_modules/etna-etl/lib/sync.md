# Sync Metadata
Tools to synchronize metadata from Sql (SqlServer, oracle, ...) to mongodb
Usage : 
```
var sync = require("etna-etl/lib/sync").newSync(etnaConfig, tracker);
sync.exportMetadataAndPush(_);
```
--------------------------
### extractMetadataFromX3(_, entityType, entityName)
Intended to be invoked from X3, see `exportMetadataAndPush` for more details
--------------------------
### exportMetadataToJSONs(_, entityType, entityNames)
Export metadata to JSON files and returns the ABSOLUTE filename of the generated JSON files
### importMetadataToMongo(_, absoluteFilenamesToimport, entityType)
Import some JSON files into mongoDb
* absoluteFilenamesToimport : filenames fo the JSON files to import
* entityType : the type of entities 
* fullSync ? drop the mongo collections before importing
### exportMetadataAndPush(_, entityType, entityNames, options)
Exports the metadata of set of entities.
An export consists in :
* Creating JSON files that contain the metadata
* importing the generated JSON files to mongDb
* committing and pushing the generated files to git
When no `entityType` is provided, all the types will be processed (tables, views, representations, ...).
When no `entityNames` is provided, all the entities will be processed (ABANK, ABICOND, ...).
In the file system, the JSON files will be dispatched in many folders, according to 
the pattern : `moduleName/entitySubDir/entityName`
* moduleName : the name of the module that uses the meta (SUPERV, FINANCE BP, ...)
* entitySubDir : depends of the type of entity : TABLES, ACTIONS, VIEWS, ....
* entityName : the name of the entity
There might be several generated files for a given entity, for instance, one describing
the class, another for the SQL table, ...
### importMetadata(_)
Imports metadata from file system (JSON files) to mongoDb
This function will import ALL the JSON files that were updated since the last time
an import was done. It relies on git to retrieve the updated files (from the last sha1 to the HEAD) 
