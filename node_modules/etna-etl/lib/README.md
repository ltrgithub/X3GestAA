### Installation
Install streamline globally:

```
cd syracuse/node_modules/streamline
npm install -g
```

Compile the oracle driver:

```
cd syracuse/node_modules/oracle
npm install
```

Additional setup may be required to use the oracle driver, such as installing the Oracle Instant Client. See full instructions [here](https://github.com/joeferner/node-oracle/blob/master/INSTALL.md).

Add a metadata config section to your nodelocal.js file

```
    metadata: {
        trace: console.log,
        force: true,
        db: {
            driver: "oracle",
            hostname: "10.10.40.20",
            database: "X3V7",
            user: "SEED",
            password: "...."
        },
    },
```

Note: the tool checks if the repository is an X3 development directory because the module organization is different in supervisor environments. The `force` flag allows you to run the tool against a supervisor environment, even if the module names would be wrong in this case.

### Run the tool
```
cd syracuse/node_modules/etna-etl/lib
_node . [options]
```

This should create the metadata files under an x3meta directory at the same level as your syracuse directory.

It will generate one metadata file per table, with the the files organized in a hierarchy as: `rootdir/module/activity_code/TABLES/table_name.json` with `STD` as activity code for tables that don't have an activity code.
For example: `rootdir/SUPERV/ABI/TABLES/ABICOND.json`

The idea is to have an organization which maps to the functional organization of the meta data. We would have other resource types like CLASSES, REPRESENTATIONS, SCRIPTS, etc. at the same level as TABLES. Smaller files will also help with conflict handling. You should be able to quickly see which resources are in conflict and you won't have to edit a huge file.

#### Flags
Options implemented with [`commander.js`](https://github.com/visionmedia/commander.js/) command-line interface
```
-h, --help
    output usage information

-a, --all
    perform all steps

-e, --exportMeta
    export meatdata from source sql database into x3meta directory

-i, --importMeta
    import entities from x3meta into mongoDB

-E, --exportData
    export data from source sql database

-Z, --initData
    initialize tables in desination oracle database

-I, --importData
    import data into destination oracle database

-c, --clean
    clean x3meta directory

-t, --test
    test import/export of a specific entity or text

-g, --git
    commit any changes to git repo, also initialize repo if does not exist
```
