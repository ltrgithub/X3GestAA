"use strict";

require("streamline").register({
	fibers: true,
	fast: true,
	verbose: true,
	cache: true
});

var perf = require("syracuse-perfmon/lib/analyzer");

if (process.argv.length < 4)
{
	console.log("Usage: " + process.argv.splice(0,2).join(" ") + " [logdir] [json-dest-file]");
	process.exit(-1);
}

console.log("\nWriting output to " +  process.argv[3] + "\n");
perf.analyze(process.argv[2], process.argv[3]);
// perf.analyze("C:/workspace/Syracuse/logs/perfmon/2014-06/16", __dirname + "/perf/perfstat-del.json");
// perf.analyze("C:/workspace/Syracuse/logs/perfmon/2014-06/20", __dirname + "/perf/perfstat-2014-06-20.json");
// perf.analyze("D:/temp/perf/230", __dirname + "/perf/perfstat-gre230.json");
