"use strict";
var exec = require('child_process').exec;
var rules = require('tools/git/pre-commit-rules');

// rootDir is the root of the git repo on disk, regardless of where git commit was run from.
var rootDir = process.cwd();

exec('git diff --cached --name-only', function(err, stdout, stderr) {
	if (err) throw err;
	if (stderr) throw new Error(stderr);
	var files = stdout.split('\n');
	files.forEach(rules.processFileSync);
	rules.finish();
})
