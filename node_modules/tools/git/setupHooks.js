"use strict";

var fs = require('fs');
var fsp = require('path');

var hooksDir = __dirname + '/../../../.git/hooks';

if (fs.existsSync(hooksDir)) {
	['commit-msg', 'pre-commit'].forEach(function(file) {
		fs.writeFileSync(hooksDir + "/" + file, "#!/bin/sh\nnode node_modules/tools/git/" + file + " $1\n", "utf8");
		fs.chmodSync(hooksDir + "/" + file, "755");
	});
/*	var chgLogSettingsPath = fsp.join(__dirname, '/../../../changelog/changelogSettings.json');
	if (fs.existsSync(chgLogSettingsPath)) {
		var settings = JSON.parse(fs.readFileSync(chgLogSettingsPath, "utf8"));
		if (settings.generate_event) {
			var script = fsp.join(hooksDir, settings.generate_event);
			fs.writeFileSync(script, "#!/bin/sh\nnode changelog/generateChangelog.js $2\n", "utf8");
			fs.chmodSync(script, "755");
		}
	}
	*/
}