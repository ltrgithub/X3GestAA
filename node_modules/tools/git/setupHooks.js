"use strict";

var fs = require('fs');
var fsp = require('path');
var root = __dirname + '/../../../'

function install(hooksDir, rel) {
	if (fs.existsSync(hooksDir)) {
		['commit-msg', 'pre-commit'].forEach(function(file) {
			fs.writeFileSync(hooksDir + "/" + file, "#!/bin/sh\nnode " + rel + "node_modules/tools/git/" + file + " $1\n", "utf8");
			fs.chmodSync(hooksDir + "/" + file, "755");
		});
	}
}

install(root + '.git/hooks', '');
fs.readdirSync(root + '.git/modules/node_modules').forEach(function(mod) {
	install(root + '.git/modules/node_modules/' + mod + '/hooks', '../../')
})