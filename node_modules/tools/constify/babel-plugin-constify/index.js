"use strict";

module.exports = function(pluginArguments) {
	const t = pluginArguments.types;
	return {
		visitor: {
			VariableDeclaration(path, state) {
				const node = path.node;
				if (path.scope.getFunctionParent() === path.scope && 
					node.kind === 'var' 
					&& node.declarations.every(decl => path.scope.getBinding(decl.id.name).constant)) {
					path.replaceWith(t.variableDeclaration('const', node.declarations));
				}
			},
		},
	};
};