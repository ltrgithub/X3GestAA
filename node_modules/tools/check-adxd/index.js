#!/usr/bin/env node

require('npm-shadow')();

var config = {};
try {
	config = require("../../../nodelocal").config || {};
} catch (ex) {
	console.error("Error in nodelocal.js: " + ex);
	process.exit(6);
}
if (config.streamlineFromCI) {
	try {
		var version = require("../../../version.json") || {};
		if (version.streamline) {
			console.log("Streamline config from version.json");
			config.streamline = version.streamline;
		}
	} catch (ex) {
		console.error(ex);
	}
}

require('syracuse-core/streamline-loader')(config.streamline);
require('syracuse-license').register(function(err, data) {
	require('./main');
});
