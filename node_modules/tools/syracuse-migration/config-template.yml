#########################################################
# Migration tool configuration file                     #
# This file uses YAML format                            #
# Indentation with double space is really important !!! #
#########################################################

# logsDir defines where dump and restore logs files will be stored. It can be relative or absolute path
logsDir: ..\..\..\logs

# mongodb section defines parameters use for dump and restore operations
mongodb:
  # This `path` property is mandatory and indicates where mongodb client software is installed
  path: C:\mongodb-win32-x86_64-2008plus-2.6.0
  # This `out` property indicates where the dumps will be stored
  out: C:\dumps
  # The `dump` section accepts all mongodump standard parameters
  # See https://docs.mongodb.com/manual/reference/program/mongodump/
  source:
    host: my-source-server
    port: 27017
    db: syracuse
  # The `restore` section accepts all mongorestore standard parameters
  # See https://docs.mongodb.com/manual/reference/program/mongorestore/
  destination:
    host: my-destination-server
    port: 27017
    db: syracuse
    # the following ssl properties are mandatory only if your mongodb server is secured with ssl (same thing can be applied to source server)
    ssl: true
    sslCAFile: D:\keystore\ca.cacrt
    sslPEMKeyFile: D:\keystore\client.pem
    sslPEMKeyPassword: MyPassphrase
    #sslAllowInvalidCertificates: true

# x3solutions section defines the new X3 configuration solution
x3solutions:
  # `-` character allows to declare multiple solutions
  - solutionToModify: SRC_X3SOLUTION # The solution `code` configured on source server you want to modify on destination server
    newSolution:
      code: NEW_CODE_FOR_SOLUTION
      description: SRC_X3SOLUTION modified with migration tool
      solutionName: DEST_SOLUTION
      serverHost: my-destination-x3-server
      serverPort: 17000
      serverTimeout: 60000
      webServer: '' # let empty if same as serverHost
      webServerPort: 80
      proxy: false
      runtimes:
        # `-` character allows to declare multiple runtimes
        # only serverHost and serverPort are mandatory !
        - serverHost: my-destination-x3-server.mydomain.com
          serverPort: 17000
          tag: MAIN
          exclusive: false
          banTimeout: 60
          banned: false
          disabled: false
        - serverHost: my-destination-x3-server-2.mydomain.com
          serverPort: 17001
          disabled: true

# endpoints section defines the new endpoints
endpoints:
  # `-` character allows to declare multiple endpoints
  - endpointToModify: SEED # The endpoint `dataset` (name) configured on source server you want to modify on destination server
    newEndpoint:
      dataset: SEEDTEST
      x3ServerFolder: MYSEED
      description: SEED modified with migration tool

# hosts section defines new host instances configuration changes. It will be also used to rename certificates.
#   'hostnameToModify', 'hostname' and 'tcpHostName' are mandatory !
# WARNING about certificate: the new certificates on destination server have to be generated using the standard certificate tool.
hosts:
  - hostnameToModify: my-source-server # The source server hostname will be used to find and replace host information
    hostname: my-destination-server # This is the destination server hostname
    tcpHostName: my-destination-server.mydomain.com # Full qualified domain name of destination server
    children: 2 # Number of children processes
    wsChildren: 1 # Number of children processes dedicated for SOAP web services