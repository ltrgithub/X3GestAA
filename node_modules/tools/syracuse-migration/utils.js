"use strict";

var colors = require('colors/safe');
var path = require('path');
var fs = require('streamline-fs');

var write = process.stdout.write.bind(process.stdout);
process.stdout.write = function () {};
process.stderr.write = function () {};

exports.log = function(str, color) {
	write((color && colors[color] ? colors[color] : colors.white)(str));
	write('\n');
};

exports.logSection = function(str, color) {
	exports.log('#########################################################################################', color);
	if (Array.isArray(str)) {
		str.forEach(function(s) {
			exports.log('#\t' + s, color);
		});
	} else {
		exports.log('#\t' + str, color);
	}
	exports.log('#########################################################################################', color);
};

exports.logFile = function(str, filename, extension) {
	var d = new Date();
	var filePath = path.join(__dirname, filename + '_' + d.getFullYear() + '-' + d.getMonth() + '-' + d.getDay() + '.' +extension);
	fs.writeFileSync(filePath, str);
	exports.log("INFO: Log file '" + filePath + "' created.", "grey");
};