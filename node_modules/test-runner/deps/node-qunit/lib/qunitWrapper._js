require("./qunit");

// We only need the wrapper if running with a fast option. So test and bail out here
if (!/-fast$/.test(require('streamline/lib/globals').runtime)) return;

var oldAsyncTest = global.asyncTest;

global.asyncTest = function(name, expect, test) {
	if (typeof expect === "function") {
		test = expect;
		return oldAsyncTest(name, function(cb) {
			test(_ >> cb);
		});
	} else {
		return oldAsyncTest(name, expect, function(cb) {
			test(_ >> cb);
		});
	}
}