require( "./qunit" );

// We only need the wrapper if running with a fast option. So test and bail out here
if (!/-fast$/.test(require('streamline/lib/globals').__runtimeDir__)) return;

var oldAsyncTest = global.asyncTest;

global.asyncTest = function(name, expect, test) {
	if (typeof test !== "function") throw new Error("bad asyncTest call: expected function, got " + typeof test);
	return oldAsyncTest(name, expect, function(cb) {
		test(_(cb));
	});
}
