"use strict";

var jsxml = require('./jsxmlold');
var fs = require('fs');

function find(node, tag) {
	return node.$$children ? node.$$children.filter(function(child) {
		return child.$$tag === tag;
	}) : [];
}

try {
	var data = jsxml.parse(fs.readFileSync(__dirname + "/data.xml", "utf8"));
	console.log(find(data, 'D')[0].I);
	var json = JSON.stringify(data, null, '  ');
	fs.writeFileSync(__dirname + "/data.json", json, "utf8");
} catch (ex) {
	console.log(ex.stack);
}