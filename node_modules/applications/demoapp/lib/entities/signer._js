"use strict";

var locale = require("syracuse-core/lib/locale");

exports.entity = {
	$titleTemplate: "Signer {name}",
	$descriptionTemplate: "blah blah blah",
	$valueTemplate: "{name}",
	$helpPage: "Signer-Help",
	$properties: {
		name: {
			$title: "Name",
			$linksToDetails: true,
			$isMandatory: true,
			$isUnique: true,
		},
		active: {
			$title: "Active",
			$type: "boolean",
		},
		expirationDate: {
			$title: "Expiration date",
			$type: "date",
			$isNullable: true,
			$isHidden: function(_, instance) {
				return !instance.active(_);
			},
		},
	},
	$relations: {
		contracts: {
			$title: "Contracts",
			$type: "contracts",
			$inv: "signers",
		},
	},
	$functions: {},
	$services: {
		activate: {
			$title: "Activate",
			$description: "activate the signer",
			$isMethod: true,
			$method: "POST",
			$execute: function(_, context, instance, parameters) {
				if (!instance.active(_)) instance.active(_, true);
			},
		},
	},
	$searchIndex: {
		$fields: ["name"]
	}
};