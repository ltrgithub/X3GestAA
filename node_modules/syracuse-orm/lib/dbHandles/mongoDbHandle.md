# Mongodb handle API  
usually this object is already instantiated on the context
```javascript
var dataModel = require("syracuse-orm/lib/dataModel");
var model = dataModel.make(...);
// now get the mongodb handle
var db = dataModel.getOrm(_, model, dataset);  
```

-------------
## getEntity function :
``` javascript
var entity = db.getEntity(_, entityName);
```
Get the class metadata as an entity


-------------
## createCursor function :
``` javascript
var cursor = db.createCursor(_, entity, params, shallow);
var data;
while(data = cursor.next(_) {
  // do something with data witch is an object instance
}
```
Creates a cursor allowing to iterate over the objects in a collection
function next(_) on the cursor returns the current instance. Returns null at the end of the cursor

```javascript
// parameters example
params = {
  count: 20, // cursor fetch limit
  startIndex: 2, // skip parameter
  orderBy: [{binding:"name", descending: true}, {binding: title}],
  jsonWhere: {/* mongodb style json filter */} // or sdataWhere = sdataClause or where = parsed_expression_object
}
```

-------------
## getCounterValue function :
``` javascript
var value = db.getCounterValue(_, domain, name, withIncrement);
```
manages counters with model domain and name as unique key. 
options:
* value: if set it will update the counter value to the given value
* increment: if set counter value will be increment by the given value
* data: object that will be saved with the counter. Update of this is differential, meaning that property not in object
    aren't updated. To delete a property it must be set to null
if (!value && !increment) existing value is returned without modification
data is updated even if counter value is not modified
return value is in form of:
``` javascript
{
  value: 152,
  data: {
    "...": "..."
  }
}

