
# Storage Area API

`var sa = require('syracuse-orm/lib/storageArea')`

* `var document = sa.readAll(_, filter);`  
  Read document from storage area.  
  The `filter` parameter represents filter selector :  
     ex: var filter = {
                jsonWhere:{
                   $uuid: uuid
                }
             }
  Returns a Document entity  
* `var document = sa.writeAll(_, properties, buf, filter);`  
  Update document in storage area.  
  The `properties` parameter represents the document properties in JSON format :  
     ex: var properties = {
                 description: "UPDATE",
                 content: {
                    contentType: "application/pdf",
                    fileName: "update.pdf",
                 }
             }
  The `buf` parameter represents the document in binary format.  
  The `filter` parameter represents filter selector. It's used only for update.  
     ex: var filter = {
                jsonWhere:{
                   $uuid: uuid
                }
             }
  Returns a Document entity.  
* `var document = sa.remove(_, filter);`  
  Remove document from storage area.  
  The `filter` parameter represents filter selector :  
     ex: var filter = {
                jsonWhere:{
                   $uuid: uuid
                }
             }
  Returns 1 if operation is successful else throw Error.  
* `var dd = sa.open(_, filter);`  
  Open document from storage area or create a new instance.  
  The `filter` parameter represents filter selector :  
     ex: var filter = {
                jsonWhere:{
                   $uuid: uuid
                }
             }
  Returns a Document Descriptor UUID.  
* `dd.write(_, _, ddUuid, properties, stream);`  
  Write content of document instance. 
  This function CAN be called between `openStream` and `closeStream` functions.
  The `ddUuid` parameter represents an identifier of Document Descriptor in uuid format.  
  The `properties` parameter represents the document properties in JSON format :  
     ex: var properties = {
                 description: "STREAM",
                 content: {
                    contentType: "application/pdf",
                    fileName: "stream.pdf",
                 }
             }
  The `stream` parameter represents a stream of the document in binary format.  
* `dd.read(_, _, ddUuid);`  
  Read content of document instance. 
  This function CAN be called between `openStream` and `closeStream` functions.
  The `ddUuid` parameter represents an identifier of Document Descriptor in uuid format.  
  Returns a Buffer part.  
* `dd.close(_, ddUuid);`  
  Close the document store and persist the content in datastore.  
  IMPORTANT : this function MUST be called after openStream !!!!
  The `ddUuid` parameter represents an identifier of Document Descriptor in uuid format.  
  Returns a Document entity.  
