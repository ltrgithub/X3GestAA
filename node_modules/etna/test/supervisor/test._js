"use strict";

var config = require("etna/lib/util/nodeconfig").config.etna;
var fs = require('streamline-fs');
var superv = require("etna/lib/supervisor/supervisor").create(_, "SUPERV");
var glob = require('streamline-runtime').globals;

fs.readdir(config.SUPERV.scriptsRoot, _).forEach_(_, (_, name) => {
	if (/^QLFAC_.*\.src$/.test(name)) {
		name = name.substring(0, name.length - 4);
		console.log("<<<<<<<< " + name);
		var script = superv.loadScript(_, name);
		//console.log(script);
		require("etna/lib/engine/runtime/variables").initStack(superv);
		script.MAIN(_);
		console.log(">>>>>>>> " + name);
		process.exit(0);
	}
});
process.exit(0);