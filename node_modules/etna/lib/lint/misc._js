"use strict";
var glob = require('streamline/lib/globals');
var util = require("./util");

exports.instructions = {
	CALLJS: function(mode, ns, name, args) {
		var loc = util.sourceLoc;

		return function calljs$do(_) {
		  	var lint = glob.context.lint;
			var nsVal = ns(_);
			var mod;
			try {
				mod = require(nsVal);
				if (!mod[name]) lint.addDiagnose("error","function "+name+" not found",loc);
			} catch (ex) {
		        lint.addDiagnose("error","module "+nsVal+" not found",loc);
			}
			args(_);
		};
	},
	BOX: function(kind, args) {
		var aargs = (args) ? util.instructions.A(args) : null;
		return function log$do(_) {
			aargs && aargs(_);
		};
	},

	DBGETNA: function(args) {
		var aargs = (args) ? util.instructions.A(args) : null;
		return function dbg$do(_) {
			aargs && aargs(_);
		};
	},

	SLEEP: function(args) {
		var aargs = (args) ? util.instructions.A(args) : null;
		return function sleep$do(_) {
			aargs && aargs(_);
		};
	}
};