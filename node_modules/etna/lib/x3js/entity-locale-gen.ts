import { _ } from 'streamline-runtime';
import { FullDescriptor } from './descriptor';

export function generateJson<T>(_: _,  data: any, descriptor: FullDescriptor<T>) {
	const colName = Object.keys(descriptor.collections).filter(k => !!descriptor.collections[k].localizedKey)[0];
	if (!colName) return null;

	const colDesc = descriptor.collections[colName];
	return Object.keys(data[colName]).reduce((r: any, k: string) => (r[k] = data[colName][k][colDesc.localizedKey], r), {});
};