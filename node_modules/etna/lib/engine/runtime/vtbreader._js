"use strict";

var generic = require('ez-streams').devices.generic;
var arrays = require('./arrays');
var util = require('./util');

var c1 = [1,2,3,4]
var c2 = ["toto1","toto2", "toto3", "toto4"]


module.exports = {
	reader: function( vtb, nk ) {
		var pos = 0;
		var names = Object.keys(vtb.values) ;
		var guide = vtb.keys[nk].key ;

		return generic.reader(function(_) {
			if (pos < vtb.lines) {
				var row = {};
				for (var i = 0; i < names.length; i++)
					row[names[i]] = arrays.instructions.INDEX(vtb.tables[i], [util.instructions.C( guide[pos]+vtb.bases[i])])(_);

				pos += 1;
				return row;
			}
			return undefined;
		}, function stop(_) {

		});
	},
};