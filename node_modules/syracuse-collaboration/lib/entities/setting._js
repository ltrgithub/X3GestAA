"use strict";

var sys = require("util");

exports.entity = {
	$canCreate: false,
	$canDelete: false,
	$properties: {
		authentication: {
			$title: "Authentication",
			$enum: [{
				$value: "basic",
				$title: "Basic"
			}, {
				$value: "digest",
				$title: "Digest"
			}, {
				$value: "oauth2",
				$title: "OAuth2"
			}],
			$default: "basic",
			$isMandatory: true
		},
		patchLock: {
			$title: "Patch system locked",
			$type: "boolean",
			$default: false
		},
		proxy: {
			$title: "Proxy server",
			$type: "boolean",
			$default: false
		},
		endpoint: {
			$title: "Synchronization endpoint"
		},
		conflictPriority: {
			$title: "Conflict priority",
			$type: "integer",
			$maximum: 9,
			$minimum: 1,
			$default: 5
		},
	},
	$titleTemplate: "Settings",
	$valueTemplate: "Settings",
	$descriptionTemplate: "Settings",
	$relations: {
		ldap: {
			$title: "Default LDAP server",
			$type: "ldap",
			$isHidden: function(_, instance) {
				return instance.authentication(_) !== "basic";
			}
		},
		oauth2: {
			$title: "Default OAuth2 server",
			$type: "oauth2",
			$isMandatory: function(_, instance) {
				return instance.authentication(_) === "oauth2";
			},
			$isHidden: function(_, instance) {
				return instance.authentication(_) !== "oauth2";
			}
		},
		proxyConf: {
			$title: "Default proxy configuration",
			$type: "proxyConfiguration",
			$isMandatory: function(_, instance) {
				return instance.proxy(_);
			},
			$isHidden: function(_, instance) {
				return !instance.proxy(_);
			}
		}
	}

};