"use strict";

var dataModel = require("syracuse-orm/lib/dataModel");
var sdataRegistry = require("syracuse-sdata/lib/sdataRegistry");
var util = require("util");
var wsdlParser = require('syracuse-soap/lib/client/wsdlParser');

exports.entity = {
	$titleTemplate: "Remote SOAP Web Services",
	$descriptionTemplate: "Name identifies a service",
	$valueTemplate: "{description}",
	$createActionTitle: "New Remote Web Service",
	$listTitle: "List of remote SOAP Web Services",
	$properties: {
		name: {
			$title: "Name",
			//$isMandatory: true,
			$linksToDetails: true,
			$constraints: {
				$isUnique: true
			}
		},
		url: {
			$title: "Url",
			$isMandatory: true
		},
	},
	$relations: {},
	$services: {
	    $generateStub: {
			$method : "PUT",
			$isMethod : true,
			$title : "Generate Stub",
			$execute : function(_, context, instance) {
				instance.$diagnoses = instance.$diagnoses || {};
				wsdlParser.create(_, context, instance.url(_));
				
			}
		},
	},
	$uniqueConstraints: [["name"]]
}