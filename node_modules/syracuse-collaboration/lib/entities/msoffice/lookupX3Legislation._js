"use strict";

var util = require('./util');

exports.entity = {
	$properties: {
		LEG: {
			$title: "Legislation"
		},
		SHODES: {
			$title: "Short Title"
		},
		LNGDES: {
			$title: "Title"
		}
	},
	$fetchInstances: function(_, context, parameters) {
		var self = this;
		var codes = [];
		var res = util.query(_, context, parameters, "ATABDIV", "$query", function(_, inst) {
			var instance = self.factory.createInstance(_, null, context.db, context);
			instance.LEG(_, inst.CODE(_));
			instance.SHODES(_, inst.SHODES(_));
			instance.LNGDES(_, inst.LNGDES(_));
			codes.push(instance);
		}, { "jsonWhere": { "NUMTAB" : 909} });
		return codes;
	},
	$defaultOrder: [["LEG", true]]
}