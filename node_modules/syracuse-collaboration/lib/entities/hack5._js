"use strict";

var util = require("util");

var https = require("https");
var mock = require("syracuse-load/lib/mock");

exports.entity = {
	$properties: {
		test2: {
			$title: "Test 2",
		},
		test3: {
			$title: "Test 3",
		},
	},
	$titleTemplate: "hack5",
	$valueTemplate: "hack5",
	$descriptionTemplate: "hack5",
	$functions: {},
	$services: {
		test: {
			$method: "POST",
			$isMethod: true,
			$title: "Test",
			$execute: function(_, context, instance) {

				var result = mock.simpleRequest(https, {
					host: "www.smartsheet.com",
					method: "GET",
					path: "/workspaces",
					headers: {
						Authorization: "Bearer 3nn8dwwgdzoun6ujjllr2h5h1d"
					}
				}, undefined, _);

				console.log("End" + util.format(result));
			}
		},
		test2: {
			$method: "POST",
			$isMethod: false,
			$title: "Test2",
			$execute: function(_, context) {

				var ez = require("ez-streams");
				try {
					var client = ez.devices.http.client({
						url: "https://api.smartsheet.com/1.1/home?",
						headers: {
							authorization: "Bearer 3nn8dwwgdzoun6ujjllr2h5h1d"
						}
					});

					var result = client.end().response(_).readAll(_);

					var client = ez.devices.http.client({
						url: "https://api.smartsheet.com/1.1/home?",
						method: "POST",
						headers: {
							authorization: "Bearer 3nn8dwwgdzoun6ujjllr2h5h1d",
							"content=type": "application/json",

						}
					});

					var result = client.write(_, JSON.stringify(myData)).end().response(_).checkStatus(200).readAll(_);

				} catch (e) {
					console.log("error" + e);
				}
				// , accept : "application/json"
				/*				var result = mock.simpleRequest (https, {
					host : "www.smartsheet.com",
					method : "GET",
					path : "/workspaces",
					headers : { 
						Authorization : "Bearer 3nn8dwwgdzoun6ujjllr2h5h1d"
					}
				  },undefined,_);					
			
				console.log("End2"+ util.format(result)); */

				console.log(result);
			}
		},
	},
};