"use strict";

var sys = require("util");

exports.entity = {
	$properties: {
		description: {
			$title: "Description",
			$linksToDetails: true,
			$isMandatory: true,
			
				$isUnique: true
			},
		explorer: {
			$title: "Explorer",
			$type: "graph",
			$format: "d3.nodeChart",
			$relations: {
				endPoints: {
					applicationRef: { $selected: false }
				},
				role: {},
				users: {}
			}
		}
	},
	$titleTemplate: "Group",
	$descriptionTemplate: "Access administration, groups associates users with roles and endpoints",
	$valueTemplate: "{description}",
	$relations: {
		endPoints: {
			$title: "Endpoints",
			$type: "endPoints",
			$inv: "groups"
		},
		parent: {
			$title: "Parent",
			$type: "group",
			$inv: "children"
		},
		children: {
			$title: "Children",
			$type: "groups",
			$inv: "parent",
			isComputed: true
		},
		users: {
			$title: "Users",
			$type: "users",
			$inv: "groups",
			isComputed: true
		},
		role: {
			$title: "Role",
			$type: "role",
			$inv: "groups"
		}
	},
	$searchIndex: {
		$fields: ["description", "endPoints", "users", "role"]
	}
};