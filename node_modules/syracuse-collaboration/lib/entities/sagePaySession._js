"use strict";

var adminHelper = require("syracuse-collaboration/lib/helpers").AdminHelper;
var config = require('config');

exports.entity = {
	$titleTemplate: "SagePay session",
	$properties: {
		sid: {
			$title: "Session id"
		},
		host: {
			$title: "Host"
		},
		vpsTxid: {
			$title: "Sage Pay ID"
		},
		vendorName: {
			$title: "Vendor Name"
		},
		securityKey: {
			$title: "Security Key"
		},
		nextURL: {
			$title: "Next URL"
		},

		waitStatus: {
			$title: "Wait Status"
		},
		vpsProtocol: {
			$title: "VPS Protocol"
		},
		status: {
			$title: "Status"
		},
		securityStatus: {
			$title: "Security Status"
		},
		notificationPostData: {
			$title: "Notification Post Data"
		}
	},
	$relations: {},
	$expire: function(_, instance) {
		// set in hard the value, it will be configured after
		if (config.session.timeout) { // timeout + 1 
			return (config.session.timeout + 10) * 60000;
		}
	}
}