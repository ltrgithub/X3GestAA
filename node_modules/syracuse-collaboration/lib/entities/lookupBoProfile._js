"use strict";

var helpers = require("syracuse-core/lib/helpers");
var adminHelper = require("syracuse-collaboration/lib/helpers").AdminHelper;
var util = require('util');

exports.entity = {
	$properties: {
		name: {
			$title: "Name"
		},
		security: {
			$title: "Security"
		},
		user: {
			$title: "User"
		}
	},
	$fetchInstances: function(_, context, parameters) {


		console.log("FETCH INSTANCE IN LOOKUP");
		var boServer = parameters.boServer;

		var db = adminHelper.getCollaborationOrm(_);
		var entity = db.getEntity(_, "boProfile");
		var instances = db.fetchInstances(_, entity, {
			sdataWhere: "boServer eq '" + boServer + "'"
		});
		if (!instances) return [];

		for (var i in instances) {
			console.log("BO Profile name: " + instances[i].name(_));
		}
		return instances;
	},
	$defaultOrder: [
		["name", true]
	]
};