"use strict";
var adminHelper = require("syracuse-collaboration/lib/helpers").AdminHelper;
var sdataRegistry = require("syracuse-sdata/lib/sdataRegistry");
var flows = require('streamline/lib/util/flows');
var helpers = require("syracuse-core/lib/helpers");
var pluralize = helpers.string.pluralize;
var locale = require("syracuse-core/lib/locale");
var filters = require("syracuse-orm/lib/filters");
var Parser = require("syracuse-sdata/lib/parser/parser").Parser;
var sys = require("util");


exports.entity = {
	$titleTemplate: "Cache administration",
	$descriptionTemplate: "Cache administration panel",
	$valueTemplate: "{title}",
	$properties: {
		title: {
			$title: "Title",
		},
		cacheEntities: {
			$title: "Entities list",
		},
		cacheBy: {
			$title: "cache by",
			$default: "all",
			$enum: [{
				$value: "group",
				$title: "group"
			}, {
				$value: "user",
				$title: "user"
			}, {
				$value: "all",
				$title: "all"
			}],
		},

	},
	$relations: {
		group: {
			$type: "group",
			$isHidden: function(_, instance) {
				return instance.cacheBy(_) !== "group";
			}
		},
		user: {
			$type: "user",
			$isHidden: function(_, instance) {
				return instance.cacheBy(_) !== "user";
			}
		}
	},

	$functions: {
		getRepresentationToCache: function(_) {
			return cacheEntities.split(",");
		}
	},

	$searchIndex: {
		$fields: []
	}
};