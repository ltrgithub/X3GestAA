"use strict";

exports.entity = {
	$titleTemplate: "Applications",
	$descriptionTemplate: "Application and contract names identifies a service",
	$valueTemplate: "{description}",
	$createActionTitle: "New application",
	$listTitle: "List of applications",
	$properties: {
		description: {
			$title: "Description",
			$linksToDetails: true,
			$isMandatory: true,
			$constraints: {
				$isUnique: true
			}
		},
		protocol: {
			$title: "Type",
			$enum: ["syracuse", "x3", "sdata"],
			$enumCaptions: ["Syracuse", "X3", "Generic Sdata"],
			$isMandatory: true,
			$default: "syracuse"
		},
		application: {
			$title: "Name",
			$isMandatory: true
		},
		contract: {
			$title: "Contract",
			$isMandatory: true
		}
	},
	$relations: {
		menuItems: {
			$title: "Menu items",
			$type: "menuItems",
			$inv: "application",
			$isComputed: true,
			$capabilities: "sort,filter"
		},
		portlets: {
			$title: "Vignettes",
			$type: "portlets",
			$inv: "application",
			$isComputed: true
		},
		endpoints: {
			$title: "Endpoints",
			$type: "endPoints",
			$inv: "applicationRef",
			$isComputed: true
		}
	},
	$searchIndex: {
		$fields: ["description", "application", "contract", "menuItems", "portlets", "endpoints"]
	},
	$uniqueConstraints: [["description"], ["application", "contract"]]
}