"use strict";

var http = require('http');
var httpClient = require('syracuse-httpclient/lib/httpClient');
var config = require('syracuse-main/lib/nodeconfig').config;
var adminHelper = require('syracuse-collaboration/lib/helpers').AdminHelper;

var tracer = config && config.rest && config.rest.client && config.rest.client.tracer != null ? config.rest.client.tracer : false;
var trace = function(str) {
	if (tracer === true) console.log(" " + str);
};
exports.entity = {
	$titleTemplate: "HRM Site",
	$descriptionTemplate: "Configure HRM site",
	$valueTemplate: "{name}",
	$properties: {
		name: {
			$title: "Name",
			$isMandatory: true,
			$linksToDetails: true,
			$isUnique: true,
			$pattern: /^[A-Za-z_\-][A-Za-z_\-0-9]*$/
		}
	},
	$relations: {
		application: {
			$title: "Application",
			$type: "application",
			$isExcluded: true,
			$isDefined: true,
			$compute: function(_, instance) {
				return adminHelper.getApplication(_, "x3", "hrm");
			},
			$isMandatory: true
		},
		endpoint: {
			$title: "Endpoint",
			$type: "endPoint",
			$isMandatory: true,
			$isDefined: true,
			$lookupFilter: {
				applicationRef: "{application}"
			}
		},
		servers: {
			$title: "XTend Servers",
			$type: "xtendServers",
			isChild: true
		}
	},
	$functions: {

	},
	$services: {

	}
};