"use strict";

exports.entity = {
	$isPersistent: false,
	$canSave: false,
	$titleTemplate: "Cache Statistics",
	$descriptionTemplate: "Calculate statistics on cache actions",
	$properties: {
		representation: {
			$title: "Representation"
		//	$type: "cacheRepresentationStatistic"
		}

	},
	$relations: {
		endpoint: {
			$title: "Endpoint",
			$type: "endPoint",
			$lookupFilter: {
				isCacheable: true
			},
			$serializeAll: true
		},
	},
	$functions: {
		calculate: function (_) {

		}
	},
	$services: {

		calculateStatistics: {
			$method: "PUT",
			$title: "Calculate Statistics",
			$isMethod: true,
			$invocationMode: "async",
			$capabilities: "abort",
			$isDisabled: function(_, instance) {
				return !instance.endpoint(_) || !instance.representation(_);
			},
			$execute: function(_, context, instance) {
				instance.calculate(_);
			}
		},
		deleteStatistics: {
			$method: "DELETE",
			$title: "Delete statistics",
			$confirm: "this operation will delete cache statistics for selected endpoint/representation, are you sure ?",
			$isMethod: true,
			$isDisabled: function(_, instance) {
				return !instance.endpoint(_) || !instance.representation(_);
			},
			$execute: function(_, context, instance) {

				// TODO
			}
		},
		deleteAllStatistics: {
			$method: "DELETE",
			$title: "Delete all statistics",
			$confirm: "this operation will delete all cache statistics for the selected endpoint, are you sure ?",
			$isMethod: true,
			$isDisabled: function(_, instance) {
				return !instance.endpoint(_);
			},
			$execute: function(_, context, instance) {

				// TODO

			}
		}
	}
};