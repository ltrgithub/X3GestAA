"use strict";

var sys = require("util");

exports.entity = {
	$properties: {
		name: {
			$title: "Name",
			$isMandatory: true,
			$default: "OAuth2",
			$linksToDetails: true,
			$isUnique: true,
			$pattern: /^[a-zA-Z]\w*$/,
		},
		displayName: {
			$title: "Display Name",
			$isLocalized: true
		},
		active: {
			$title: "Active",
			$type: "boolean",
			$default: true
		},
		baseSite: {
			$title: "OAuth2 server URL without path",
			$isMandatory: true
		},
		authorizePath: {
			$title: "Path for authorization",
			$default: "/oauth/authorize",
			$isMandatory: true
		},
		accessTokenPath: {
			$title: "Path to get access token",
			$isMandatory: true,
			$default: "/oauth/access_token"
		},
		clientId: {
			$title: "OAuth2 client ID",
			$isMandatory: true
		},
		clientSecret: {
			$title: "OAuth2 client secret",
			$isMandatory: true
		},
		scope: {
			$title: "Scope for OAuth2 requests"
		},
		redirectUri: {
			$title: "Redirect URI for OAuth2 server"
		},
		dataRequestURL: {
			$title: "URL for requesting user data",
			$isMandatory: true
		},
		userField: {
			$title: "User field in user name answer",
			$isMandatory: true,
			$default: "user"
		},
		image: {
			$title: "Image",
			$type: "image",
			$storage: "db_file",
			$capabilities: ""
		}
	},
	$titleTemplate: "OAuth2",
	$valueTemplate: "{name} {baseSite}",
	$descriptionTemplate: "OAuth2 server {name}",
	$helpPage: "Administration-reference-OAuth2",
	$relations: {
		users: {
			$title: "Users",
			$type: "users",
			$inv: "oauth2",
			$isComputed: true
		}
	},
	$searchIndex: {
		$fields: ["name", "displayName", "baseSite"]
	},
	$defaultOrder: [
		["name", true]
	]
};