"use strict";

var locale = require('streamline-locale');

exports.entity = {
	$titleTemplate: "Application connection item",
	$descriptionTemplate: "Items identifies connection properties",
	$createActionTitle: "New application connection item",
	$listTitle: "List of application connection items",
	$properties: {
		data: {
			$title: "Data",
			$type: "json",
			$isMandatory: true
		},
		proto: {
			$title: "Prototype",
			$type: "json",
			$isMandatory: true
		}
	},
	$relations: {
		endpoint: {
			$title: "Endpoint",
			$type: "endPoint",
			$isDisabled: true
		},
	},
	$functions: {
		genEditLink: function(_, ep) {
			var app = ep.applicationRef(_);
			var repr = app.connRepresentation(_);
			if (!repr) throw new Error(locale.format(module, "noConnRepr", app.description(_)));
			return "{$baseUrl}/" + repr + "('" + this.$uuid + "')?representation=" + repr + ".$edit";
		}
	}
};