"use strict";
const entityHelper = require('etna/lib/x3js/entity-helper');
const classDescriptor = require('etna/lib/x3js/class-descriptor').descriptor;
const x3jsUtil = require('etna/lib/x3js/util');

exports.entity = {
	$canDelete: false,
	$canCreate: false,
	$canEdit: false,
	$capabilities: "",
	$titleTemplate: "Collection",
	$descriptionTemplate: " ",
	$valueTemplate: " ",
	$properties: {
		name: {
			$title: "X3JS name",
			$control: x3jsUtil.controlCamelCase('name'),
		},
		title: {
			$title: "title",
			$isReadOnly(_, instance) {
				return !!instance.dictCode(_);
			},
		},
		dictCode: {
			$title: "dictionary code",
			$isReadOnly(_, instance) {
				return !!instance.dictCode(_);
			},
		},
		itemClassName: {
			$title: "item class name",
			$control: x3jsUtil.controlPascalCase('itemClassName'),
		},
		comment: {
			$title: "comment",
		},
	},
	$functions: {
		$toString(_) {
			var jsName = `${this._parent.name(_)}.${this.name(_)}`;
			const dictName = `${this._parent.dictCode(_)}.${this.dictCode(_)}`;
			return `collection ${jsName} (${dictName})`;
		}
	},
	$relations: {},
};

entityHelper.fillEntity(exports.entity, classDescriptor.collections.collections);