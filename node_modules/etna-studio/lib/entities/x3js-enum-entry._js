"use strict";
const entityHelper = require('etna/lib/x3js/entity-helper');
const enumDescriptor = require('etna/lib/x3js/enum-descriptor');
const x3jsUtil = require('etna/lib/x3js/util');

exports.entity = {
	$canDelete: false,
	$canCreate: false,
	$canEdit: false,
	$capabilities: "",
	$titleTemplate: "Enum value",
	$descriptionTemplate: " ",
	$valueTemplate: " ",
	$properties: {
		name: {
			$title: "name",
			$control: x3jsUtil.controlUpperCase('name'),
			$propagate: entityHelper.updateSource,
		},
		dictId: {
			$title: "id",
			$type: 'integer',
			$isReadOnly(_, instance) {
				return !!instance.dictId(_);
			},
		},
		title: {
			$title: "title",
			$isReadOnly(_, instance) {
				return !!instance.dictId(_);
			},
		},
		comment: {
			$title: "comment",
		},
	},
	$functions: {
		$toString(_) {
			var jsName = `${this._parent.name(_)}.${this.name(_)}`;
			const dictName = `${this._parent.dictId(_)}.${this.dictId(_)}`;
			return `enum value ${jsName} (${dictName})`;
		}
	},
};

entityHelper.addProperties(exports.entity, enumDescriptor.collections.entries);